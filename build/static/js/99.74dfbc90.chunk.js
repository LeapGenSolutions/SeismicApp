"use strict";(self.webpackChunkdoctorapp_leapgen=self.webpackChunkdoctorapp_leapgen||[]).push([[99],{9099:(e,t,r)=>{r.r(t),r.d(t,{MyUILayout:()=>f,default:()=>h});var n=r(542),a=r(4820),c=r(7495),i=(r(2669),r(5043)),o=r(5239),s=r.n(o),l=r(579);console.log(window.location.href);const u=(()=>{const e=new Date;return`${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}-${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}`})(),d={id:"Ben_Skywalker",name:"Doctor"},g=new n.Hq({apiKey:"mmhfdzb5evj2",user:d,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL3Byb250by5nZXRzdHJlYW0uaW8iLCJzdWIiOiJ1c2VyL0Jlbl9Ta3l3YWxrZXIiLCJ1c2VyX2lkIjoiQmVuX1NreXdhbGtlciIsInZhbGlkaXR5X2luX3NlY29uZHMiOjYwNDgwMCwiaWF0IjoxNzQ3ODY0ODY3LCJleHAiOjE3NDg0Njk2Njd9.EIcmcoGIrrb21i_M70DE5nvoc7IEMYqXh3gOSWidaHM"}),p=g.call("default","jGdKsruxWg4H");function h(){return(0,l.jsx)(a.Mf9,{client:g,children:(0,l.jsx)(a.xwR,{call:p,children:(0,l.jsx)(f,{})})})}p.join({create:!0});const f=()=>{const{useCallCallingState:e}=(0,c.R3)(),t=e(),r=(0,i.useRef)(null),o=(0,i.useRef)(null),[d,g]=(0,i.useState)(!1),p=(0,i.useRef)(null),h=(0,i.useRef)([]),f=(0,i.useRef)(null),j=(0,i.useRef)(null),v=(0,i.useRef)(null),w=(0,i.useRef)(0),x=e=>{const t=new MediaRecorder(e,{mimeType:"video/webm"});h.current=[],t.ondataavailable=async e=>{if(e.data.size>0){const r=new Blob([e.data],{type:"video/webm"}),n=new FormData,a=w.current++;n.append("chunk",r,`recording-${a}.webm`);try{await fetch(`https://seismic-backend-04272025-bjbxatgnadguabg9.centralus-01.azurewebsites.net/upload-chunk/Guest-${u}/${a}`,{method:"POST",body:n})}catch(t){console.error("Upload error:",t)}}},t.start(),p.current=t};return t!==n.Ko.JOINED?(console.log("Joining"),(0,l.jsx)("div",{children:"Loading..."})):(0,l.jsxs)(a.E8H,{children:[(0,l.jsx)("canvas",{ref:o,style:{display:"none"}}),(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(a.ctU,{participantsBarPosition:"bottom"})}),(0,l.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"10px"},children:[(0,l.jsx)(a.Lcj,{}),(0,l.jsx)(a.OAE,{}),(0,l.jsx)("div",{onClick:async()=>{console.log("Recording Button clicked"),d?(()=>{var e,t;clearInterval(f.current),clearInterval(j.current),"recording"===(null===(e=p.current)||void 0===e?void 0:e.state)&&p.current.stop(),null===(t=v.current)||void 0===t||t.getTracks().forEach((e=>e.stop())),g(!1)})():await(async()=>{if(!r.current||!o.current)return;g(!0);const{offsetWidth:e,offsetHeight:t}=r.current;o.current.width=e,o.current.height=t,j.current=setInterval((()=>{s()(r.current).then((r=>{const n=o.current.getContext("2d");n.clearRect(0,0,e,t),n.drawImage(r,0,0,e,t)}))}),100);const n=o.current.captureStream(60),a=await navigator.mediaDevices.getUserMedia({audio:!0}),c=new MediaStream([...n.getVideoTracks(),...a.getAudioTracks()]);v.current=c,x(c),f.current=setInterval((()=>{var e;"recording"===(null===(e=p.current)||void 0===e?void 0:e.state)&&(p.current.stop(),x(c))}),5e3),g(!0)})()},children:(0,l.jsx)(a.uUZ,{})}),(0,l.jsx)(a.xZ6,{})]})]})}}}]);
//# sourceMappingURL=99.74dfbc90.chunk.js.map