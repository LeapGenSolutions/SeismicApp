{"version":3,"file":"static/js/716.48b43877.chunk.js","mappings":"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","sources":["../node_modules/rxjs/src/internal/util/throwUnobservableError.ts","../node_modules/webrtc-adapter/src/js/utils.js","../node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","../node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","../node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","../node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","../node_modules/webrtc-adapter/src/js/safari/safari_shim.js","../node_modules/webrtc-adapter/src/js/common_shim.js","../node_modules/webrtc-adapter/src/js/adapter_factory.js","../node_modules/webrtc-adapter/src/js/adapter_core.js","../node_modules/@protobuf-ts/runtime/build/es2015/message-type-contract.js","../node_modules/@protobuf-ts/runtime/build/es2015/lower-camel-case.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-info.js","../node_modules/@protobuf-ts/runtime/build/es2015/oneof.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-type-check.js","../node_modules/@protobuf-ts/runtime/build/es2015/json-typings.js","../node_modules/@protobuf-ts/runtime/build/es2015/base64.js","../node_modules/@protobuf-ts/runtime/build/es2015/goog-varint.js","../node_modules/@protobuf-ts/runtime/build/es2015/pb-long.js","../node_modules/@protobuf-ts/runtime/build/es2015/assert.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-long-convert.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-json-reader.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-json-writer.js","../node_modules/@protobuf-ts/runtime/build/es2015/binary-format-contract.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-scalar-default.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-binary-reader.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-binary-writer.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-merge-partial.js","../node_modules/@protobuf-ts/runtime/build/es2015/json-format-contract.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-equals.js","../node_modules/@protobuf-ts/runtime/build/es2015/binary-writer.js","../node_modules/@protobuf-ts/runtime/build/es2015/binary-reader.js","../node_modules/@protobuf-ts/runtime/build/es2015/message-type.js","../node_modules/@protobuf-ts/runtime/build/es2015/reflection-create.js","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/rpc-interceptor.js","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/rpc-error.js","../node_modules/axios/lib/helpers/bind.js","../node_modules/axios/lib/utils.js","../node_modules/axios/lib/core/AxiosError.js","../node_modules/axios/lib/helpers/toFormData.js","../node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../node_modules/axios/lib/helpers/buildURL.js","../node_modules/axios/lib/core/InterceptorManager.js","../node_modules/axios/lib/defaults/transitional.js","../node_modules/axios/lib/platform/browser/index.js","../node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../node_modules/axios/lib/platform/browser/classes/FormData.js","../node_modules/axios/lib/platform/browser/classes/Blob.js","../node_modules/axios/lib/platform/common/utils.js","../node_modules/axios/lib/platform/index.js","../node_modules/axios/lib/helpers/formDataToJSON.js","../node_modules/axios/lib/defaults/index.js","../node_modules/axios/lib/helpers/toURLEncodedForm.js","../node_modules/axios/lib/helpers/parseHeaders.js","../node_modules/axios/lib/core/AxiosHeaders.js","../node_modules/axios/lib/core/transformData.js","../node_modules/axios/lib/cancel/isCancel.js","../node_modules/axios/lib/cancel/CanceledError.js","../node_modules/axios/lib/core/settle.js","../node_modules/axios/lib/helpers/speedometer.js","../node_modules/axios/lib/helpers/throttle.js","../node_modules/axios/lib/helpers/progressEventReducer.js","../node_modules/axios/lib/helpers/isURLSameOrigin.js","../node_modules/axios/lib/helpers/cookies.js","../node_modules/axios/lib/core/buildFullPath.js","../node_modules/axios/lib/helpers/isAbsoluteURL.js","../node_modules/axios/lib/helpers/combineURLs.js","../node_modules/axios/lib/core/mergeConfig.js","../node_modules/axios/lib/helpers/resolveConfig.js","../node_modules/axios/lib/adapters/xhr.js","../node_modules/axios/lib/helpers/parseProtocol.js","../node_modules/axios/lib/helpers/composeSignals.js","../node_modules/axios/lib/helpers/trackStream.js","../node_modules/axios/lib/adapters/fetch.js","../node_modules/axios/lib/adapters/adapters.js","../node_modules/axios/lib/helpers/null.js","../node_modules/axios/lib/core/dispatchRequest.js","../node_modules/axios/lib/env/data.js","../node_modules/axios/lib/helpers/validator.js","../node_modules/axios/lib/core/Axios.js","../node_modules/axios/lib/cancel/CancelToken.js","../node_modules/axios/lib/helpers/HttpStatusCode.js","../node_modules/axios/lib/axios.js","../node_modules/axios/lib/helpers/spread.js","../node_modules/axios/lib/helpers/isAxiosError.js","../node_modules/@protobuf-ts/twirp-transport/build/es2015/twitch-twirp-error-code.js","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/deferred.js","../node_modules/@protobuf-ts/twirp-transport/build/es2015/twirp-format.js","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/rpc-options.js","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/unary-call.js","../node_modules/@protobuf-ts/twirp-transport/build/es2015/twirp-transport.js","../node_modules/rxjs/src/internal/util/ObjectUnsubscribedError.ts","../node_modules/rxjs/src/internal/Subject.ts","../node_modules/rxjs/src/internal/scheduler/dateTimestampProvider.ts","../node_modules/rxjs/src/internal/ReplaySubject.ts","../node_modules/rxjs/src/internal/util/argsArgArrayOrObject.ts","../node_modules/rxjs/src/internal/operators/map.ts","../node_modules/rxjs/src/internal/util/mapOneOrManyArgs.ts","../node_modules/rxjs/src/internal/observable/combineLatest.ts","../node_modules/rxjs/src/internal/util/createObject.ts","../node_modules/rxjs/src/internal/BehaviorSubject.ts","../node_modules/rxjs/src/internal/operators/share.ts","../node_modules/rxjs/src/internal/operators/shareReplay.ts","../node_modules/rxjs/src/internal/operators/distinctUntilChanged.ts","../node_modules/rxjs/src/internal/operators/takeWhile.ts","../node_modules/rxjs/src/internal/operators/distinctUntilKeyChanged.ts","../node_modules/rxjs/src/internal/observable/fromEventPattern.ts","../node_modules/rxjs/src/internal/operators/mergeMap.ts","../node_modules/rxjs/src/internal/operators/mergeInternals.ts","../node_modules/rxjs/src/internal/observable/fromEvent.ts","../node_modules/rxjs/src/internal/scheduler/Action.ts","../node_modules/rxjs/src/internal/scheduler/intervalProvider.ts","../node_modules/rxjs/src/internal/scheduler/AsyncAction.ts","../node_modules/rxjs/src/internal/Scheduler.ts","../node_modules/rxjs/src/internal/scheduler/async.ts","../node_modules/rxjs/src/internal/scheduler/AsyncScheduler.ts","../node_modules/rxjs/src/internal/operators/mergeAll.ts","../node_modules/rxjs/src/internal/observable/empty.ts","../node_modules/rxjs/src/internal/observable/merge.ts","../node_modules/rxjs/src/internal/observable/concat.ts","../node_modules/rxjs/src/internal/operators/concatAll.ts","../node_modules/rxjs/src/internal/operators/startWith.ts","../node_modules/rxjs/src/internal/operators/concatMap.ts","../node_modules/@stream-io/src/gen/coordinator/index.ts","../node_modules/@stream-io/src/coordinator/connection/types.ts","../node_modules/@stream-io/src/gen/google/protobuf/struct.ts","../node_modules/@stream-io/src/gen/google/protobuf/timestamp.ts","../node_modules/@stream-io/src/gen/video/sfu/models/models.ts","../node_modules/@stream-io/src/gen/video/sfu/signal_rpc/signal.ts","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/service-type.js","../node_modules/@protobuf-ts/runtime-rpc/build/es2015/reflection-info.js","../node_modules/@stream-io/src/gen/video/sfu/event/events.ts","../node_modules/@stream-io/src/types.ts","../node_modules/@stream-io/src/gen/video/sfu/signal_rpc/signal.client.ts","../node_modules/@stream-io/src/rpc/createClient.ts","../node_modules/@stream-io/src/coordinator/connection/utils.ts","../node_modules/@stream-io/src/helpers/platforms.ts","../node_modules/@stream-io/src/logger.ts","../node_modules/@stream-io/src/rpc/retryable.ts","../node_modules/@stream-io/src/rtc/codecs.ts","../node_modules/@stream-io/src/rtc/Dispatcher.ts","../node_modules/@stream-io/src/rtc/IceTrickleBuffer.ts","../node_modules/@stream-io/src/helpers/concurrency.ts","../node_modules/@stream-io/src/store/rxUtils.ts","../node_modules/@stream-io/src/store/CallingState.ts","../node_modules/@stream-io/src/store/stateStore.ts","../node_modules/@stream-io/src/sorting/comparator.ts","../node_modules/@stream-io/src/helpers/participantUtils.ts","../node_modules/@stream-io/src/sorting/participants.ts","../node_modules/@stream-io/src/sorting/presets.ts","../node_modules/@stream-io/src/store/CallState.ts","../node_modules/@stream-io/src/stats/utils.ts","../node_modules/@stream-io/src/helpers/browsers.ts","../node_modules/@stream-io/src/stats/CallStateStatsReporter.ts","../node_modules/@stream-io/src/helpers/client-details.ts","../node_modules/@stream-io/src/stats/SfuStatsReporter.ts","../node_modules/@stream-io/src/stats/rtc/pc.ts","../node_modules/@stream-io/src/stats/rtc/StatsTracer.ts","../node_modules/@stream-io/src/stats/rtc/Tracer.ts","../node_modules/@stream-io/src/rtc/BasePeerConnection.ts","../node_modules/@stream-io/src/rtc/TransceiverCache.ts","../node_modules/@stream-io/src/helpers/ensureExhausted.ts","../node_modules/@stream-io/src/rtc/helpers/tracks.ts","../node_modules/@stream-io/src/rtc/videoLayers.ts","../node_modules/@stream-io/src/rtc/helpers/sdp.ts","../node_modules/@stream-io/src/rtc/Publisher.ts","../node_modules/@stream-io/src/rtc/Subscriber.ts","../node_modules/@stream-io/src/helpers/promise.ts","../node_modules/@stream-io/src/helpers/lazy.ts","../node_modules/@stream-io/src/timers/worker.build.ts","../node_modules/@stream-io/src/timers/index.ts","../node_modules/@stream-io/src/StreamSfuClient.ts","../node_modules/@stream-io/src/rtc/signal.ts","../node_modules/@stream-io/src/events/call.ts","../node_modules/@stream-io/src/events/call-permissions.ts","../node_modules/@stream-io/src/events/internal.ts","../node_modules/@stream-io/src/events/mutes.ts","../node_modules/@stream-io/src/helpers/array.ts","../node_modules/@stream-io/src/events/participant.ts","../node_modules/@stream-io/src/events/speaker.ts","../node_modules/@stream-io/src/events/callEventHandlers.ts","../node_modules/@stream-io/src/helpers/ViewportTracker.ts","../node_modules/@stream-io/src/helpers/DynascaleManager.ts","../node_modules/@stream-io/src/permissions/PermissionsContext.ts","../node_modules/@stream-io/src/CallType.ts","../node_modules/@stream-io/src/devices/BrowserPermission.ts","../node_modules/@stream-io/src/devices/devices.ts","../node_modules/rxjs/src/internal/operators/debounceTime.ts","../node_modules/@stream-io/src/helpers/compatibility.ts","../node_modules/@stream-io/src/devices/InputMediaDeviceManager.ts","../node_modules/rxjs/src/internal/operators/pairwise.ts","../node_modules/@stream-io/src/devices/InputMediaDeviceManagerState.ts","../node_modules/@stream-io/src/devices/CameraManagerState.ts","../node_modules/@stream-io/src/devices/CameraManager.ts","../node_modules/@stream-io/src/devices/MicrophoneManagerState.ts","../node_modules/@stream-io/src/helpers/sound-detector.ts","../node_modules/@stream-io/src/helpers/RNSpeechDetector.ts","../node_modules/@stream-io/src/devices/MicrophoneManager.ts","../node_modules/@stream-io/src/devices/ScreenShareState.ts","../node_modules/@stream-io/src/devices/ScreenShareManager.ts","../node_modules/@stream-io/src/devices/SpeakerState.ts","../node_modules/@stream-io/src/devices/SpeakerManager.ts","../node_modules/@stream-io/src/Call.ts","../node_modules/@stream-io/src/rtc/helpers/rtcConfiguration.ts","../node_modules/@stream-io/src/coordinator/connection/connection.ts","../node_modules/@stream-io/src/coordinator/connection/signing.ts","../node_modules/@stream-io/src/coordinator/connection/token_manager.ts","../node_modules/@stream-io/src/coordinator/connection/location.ts","../node_modules/@stream-io/src/coordinator/connection/client.ts","../node_modules/@stream-io/video-client/https","../node_modules/@stream-io/src/helpers/clientUtils.ts","../node_modules/@stream-io/src/StreamVideoClient.ts","../node_modules/rxjs/src/internal/util/isPromise.ts","../node_modules/rxjs/src/internal/util/executeSchedule.ts","../node_modules/rxjs/src/internal/util/identity.ts","../node_modules/rxjs/src/internal/symbol/iterator.ts","../node_modules/rxjs/src/internal/symbol/observable.ts","../node_modules/rxjs/src/internal/config.ts","../node_modules/rxjs/src/internal/observable/innerFrom.ts","../node_modules/rxjs/src/internal/util/args.ts","../node_modules/rxjs/src/internal/util/isScheduler.ts","../node_modules/ua-parser-js/src/ua-parser.js","../node_modules/rxjs/src/internal/util/isAsyncIterable.ts","../node_modules/rxjs/src/internal/util/noop.ts","../node_modules/rxjs/src/internal/NotificationFactories.ts","../node_modules/rxjs/src/internal/Subscriber.ts","../node_modules/rxjs/src/internal/util/lift.ts","../node_modules/tabbable/src/index.js","../node_modules/@floating-ui/react/dist/floating-ui.react.utils.mjs","../node_modules/@floating-ui/react/dist/floating-ui.react.mjs","../node_modules/@stream-io/src/core/components/Audio/Audio.tsx","../node_modules/@stream-io/src/core/components/Audio/ParticipantsAudio.tsx","../node_modules/@stream-io/src/core/components/ParticipantView/ParticipantViewContext.tsx","../node_modules/@stream-io/src/hooks/useFloatingUIPreset.ts","../node_modules/@stream-io/src/hooks/useDeviceList.tsx","../node_modules/@stream-io/src/components/Menu/MenuToggle.tsx","../node_modules/@stream-io/src/components/Menu/GenericMenu.tsx","../node_modules/@stream-io/src/components/Icon/Icon.tsx","../node_modules/@stream-io/src/core/hooks/usePictureInPictureState.ts","../node_modules/@stream-io/src/core/components/ParticipantView/ParticipantActionsContextMenu.tsx","../node_modules/@stream-io/src/utilities/isComponentType.ts","../node_modules/@stream-io/src/utilities/applyElementToRef.ts","../node_modules/@stream-io/src/core/components/Video/BaseVideoPlaceholder.tsx","../node_modules/@stream-io/src/core/components/Video/BaseVideo.tsx","../node_modules/@stream-io/src/core/components/Video/DefaultVideoPlaceholder.tsx","../node_modules/@stream-io/src/core/components/Video/DefaultPictureInPicturePlaceholder.tsx","../node_modules/@stream-io/src/core/components/Video/Video.tsx","../node_modules/@stream-io/src/components/BackgroundFilters/BackgroundFilters.tsx","../node_modules/@stream-io/src/core/hooks/useTrackElementVisibility.ts","../node_modules/@stream-io/src/components/Button/IconButton.tsx","../node_modules/@stream-io/src/components/Button/CompositeButton.tsx","../node_modules/@stream-io/src/components/Notification/Notification.tsx","../node_modules/@stream-io/src/components/LoadingIndicator/LoadingIndicator.tsx","../node_modules/@stream-io/src/components/Tooltip/Tooltip.tsx","../node_modules/@stream-io/src/components/Tooltip/WithTooltip.tsx","../node_modules/@stream-io/src/components/Tooltip/hooks/useEnterLeaveHandlers.ts","../node_modules/@stream-io/src/components/CallControls/RecordCallButton.tsx","../node_modules/@stream-io/src/components/Reaction/Reaction.tsx","../node_modules/@stream-io/src/utilities/callControlHandler.ts","../node_modules/@stream-io/src/components/CallControls/ReactionsButton.tsx","../node_modules/@stream-io/src/components/CallControls/ScreenShareButton.tsx","../node_modules/@stream-io/src/components/DropdownSelect/DropdownSelect.tsx","../node_modules/@stream-io/src/components/DeviceSettings/DeviceSelector.tsx","../node_modules/@stream-io/src/components/DeviceSettings/DeviceSelectorVideo.tsx","../node_modules/@stream-io/src/components/CallControls/ToggleAudioButton.tsx","../node_modules/@stream-io/src/components/DeviceSettings/DeviceSettings.tsx","../node_modules/@stream-io/src/components/CallControls/ToggleVideoButton.tsx","../node_modules/@stream-io/src/components/CallControls/CancelCallButton.tsx","../node_modules/@stream-io/src/components/CallStats/CallStats.tsx","../node_modules/@stream-io/src/components/CallControls/CallStatsButton.tsx","../node_modules/@stream-io/src/components/CallParticipantsList/CallParticipantListingItem.tsx","../node_modules/@stream-io/src/components/CallParticipantsList/CallParticipantsList.tsx","../node_modules/@stream-io/src/components/NoiseCancellation/NoiseCancellationProvider.tsx","../node_modules/@stream-io/src/components/RingingCall/RingingCall.tsx","../node_modules/@stream-io/src/components/Permissions/PermissionRequests.tsx","../node_modules/@stream-io/src/components/Search/hooks/useSearch.ts","../node_modules/@stream-io/src/components/StreamTheme/StreamTheme.tsx","../node_modules/@stream-io/src/core/components/ParticipantView/DefaultParticipantViewUI.tsx","../node_modules/@stream-io/src/core/components/ParticipantView/ParticipantView.tsx","../node_modules/@stream-io/src/core/components/StreamCall/StreamCall.tsx","../node_modules/@stream-io/src/translations/index.ts","../node_modules/@stream-io/src/core/components/StreamVideo/StreamVideo.tsx","../node_modules/@stream-io/src/utilities/filter.ts","../node_modules/@stream-io/src/core/components/CallLayout/hooks.ts","../node_modules/@stream-io/src/core/components/CallLayout/LivestreamLayout.tsx","../node_modules/@stream-io/src/core/components/CallLayout/PaginatedGridLayout.tsx","../node_modules/@stream-io/src/utilities/chunk.ts","../node_modules/@stream-io/src/core/hooks/useCalculateHardLimit.ts","../node_modules/@stream-io/src/core/components/CallLayout/SpeakerLayout.tsx","../node_modules/@stream-io/src/hooks/useScrollPosition.ts","../node_modules/@stream-io/src/core/components/CallLayout/PipLayout.tsx","../node_modules/@stream-io/index.ts","../node_modules/rxjs/src/internal/observable/of.ts","../node_modules/html2canvas/node_modules/tslib/tslib.es6.js","../node_modules/html2canvas/node_modules/src/Util.ts","../node_modules/src/css/layout/bounds.ts","../node_modules/html2canvas/node_modules/css-line-break/node_modules/src/Util.ts","../node_modules/html2canvas/node_modules/css-line-break/node_modules/utrie/node_modules/src/index.ts","../node_modules/html2canvas/node_modules/css-line-break/node_modules/src/Trie.ts","../node_modules/html2canvas/node_modules/src/linebreak-trie.ts","../node_modules/html2canvas/node_modules/src/LineBreak.ts","../node_modules/src/css/syntax/tokenizer.ts","../node_modules/src/css/syntax/parser.ts","../node_modules/src/css/types/length.ts","../node_modules/src/css/types/length-percentage.ts","../node_modules/src/css/types/angle.ts","../node_modules/src/css/types/color.ts","../node_modules/src/css/property-descriptors/background-clip.ts","../node_modules/src/css/property-descriptors/background-color.ts","../node_modules/src/css/types/functions/gradient.ts","../node_modules/src/css/types/functions/-prefix-linear-gradient.ts","../node_modules/src/css/types/functions/radial-gradient.ts","../node_modules/src/css/types/functions/-prefix-radial-gradient.ts","../node_modules/src/css/types/image.ts","../node_modules/src/css/property-descriptors/background-size.ts","../node_modules/src/css/types/functions/linear-gradient.ts","../node_modules/src/css/types/functions/-webkit-gradient.ts","../node_modules/src/css/property-descriptors/background-image.ts","../node_modules/src/css/property-descriptors/background-origin.ts","../node_modules/src/css/property-descriptors/background-position.ts","../node_modules/src/css/property-descriptors/background-repeat.ts","../node_modules/src/css/property-descriptors/line-break.ts","../node_modules/src/css/property-descriptors/border-color.ts","../node_modules/src/css/property-descriptors/border-radius.ts","../node_modules/src/css/property-descriptors/border-style.ts","../node_modules/src/css/property-descriptors/border-width.ts","../node_modules/src/css/property-descriptors/color.ts","../node_modules/src/css/property-descriptors/direction.ts","../node_modules/src/css/property-descriptors/display.ts","../node_modules/src/css/property-descriptors/float.ts","../node_modules/src/css/property-descriptors/letter-spacing.ts","../node_modules/src/css/property-descriptors/word-break.ts","../node_modules/src/css/property-descriptors/line-height.ts","../node_modules/src/css/property-descriptors/list-style-image.ts","../node_modules/src/css/property-descriptors/list-style-position.ts","../node_modules/src/css/property-descriptors/list-style-type.ts","../node_modules/src/css/property-descriptors/margin.ts","../node_modules/src/css/property-descriptors/overflow.ts","../node_modules/src/css/property-descriptors/overflow-wrap.ts","../node_modules/src/css/property-descriptors/padding.ts","../node_modules/src/css/property-descriptors/text-align.ts","../node_modules/src/css/property-descriptors/position.ts","../node_modules/src/css/property-descriptors/text-shadow.ts","../node_modules/src/css/property-descriptors/text-transform.ts","../node_modules/src/css/property-descriptors/transform.ts","../node_modules/src/css/property-descriptors/transform-origin.ts","../node_modules/src/css/property-descriptors/visibility.ts","../node_modules/html2canvas/node_modules/text-segmentation/node_modules/src/Util.ts","../node_modules/src/css/property-descriptors/z-index.ts","../node_modules/src/css/types/time.ts","../node_modules/src/css/property-descriptors/opacity.ts","../node_modules/src/css/property-descriptors/text-decoration-color.ts","../node_modules/src/css/property-descriptors/text-decoration-line.ts","../node_modules/src/css/property-descriptors/font-family.ts","../node_modules/src/css/property-descriptors/font-size.ts","../node_modules/src/css/property-descriptors/font-weight.ts","../node_modules/src/css/property-descriptors/font-variant.ts","../node_modules/src/css/property-descriptors/font-style.ts","../node_modules/src/core/bitwise.ts","../node_modules/src/css/property-descriptors/content.ts","../node_modules/src/css/property-descriptors/counter-increment.ts","../node_modules/src/css/property-descriptors/counter-reset.ts","../node_modules/src/css/property-descriptors/duration.ts","../node_modules/src/css/property-descriptors/quotes.ts","../node_modules/src/css/property-descriptors/box-shadow.ts","../node_modules/src/css/property-descriptors/paint-order.ts","../node_modules/src/css/property-descriptors/webkit-text-stroke-color.ts","../node_modules/src/css/property-descriptors/webkit-text-stroke-width.ts","../node_modules/src/css/index.ts","../node_modules/src/core/debugger.ts","../node_modules/src/dom/element-container.ts","../node_modules/html2canvas/node_modules/src/grapheme-break-trie.ts","../node_modules/html2canvas/node_modules/text-segmentation/node_modules/utrie/node_modules/src/index.ts","../node_modules/html2canvas/node_modules/text-segmentation/node_modules/src/Trie.ts","../node_modules/html2canvas/node_modules/src/GraphemeBreak.ts","../node_modules/src/dom/document-cloner.ts","../node_modules/src/core/features.ts","../node_modules/src/css/layout/text.ts","../node_modules/src/dom/text-container.ts","../node_modules/src/dom/replaced-elements/image-element-container.ts","../node_modules/src/dom/replaced-elements/canvas-element-container.ts","../node_modules/src/dom/replaced-elements/svg-element-container.ts","../node_modules/src/dom/elements/li-element-container.ts","../node_modules/src/dom/elements/ol-element-container.ts","../node_modules/src/dom/replaced-elements/input-element-container.ts","../node_modules/src/dom/elements/select-element-container.ts","../node_modules/src/dom/elements/textarea-element-container.ts","../node_modules/src/dom/replaced-elements/iframe-element-container.ts","../node_modules/src/dom/node-parser.ts","../node_modules/src/css/types/functions/counter.ts","../node_modules/src/render/bound-curves.ts","../node_modules/src/core/cache-storage.ts","../node_modules/src/render/vector.ts","../node_modules/src/render/bezier-curve.ts","../node_modules/src/render/effects.ts","../node_modules/src/render/path.ts","../node_modules/src/render/stacking-context.ts","../node_modules/src/render/border.ts","../node_modules/src/render/box-sizing.ts","../node_modules/src/render/background.ts","../node_modules/src/core/util.ts","../node_modules/src/render/font-metrics.ts","../node_modules/src/render/renderer.ts","../node_modules/src/render/canvas/canvas-renderer.ts","../node_modules/src/render/canvas/foreignobject-renderer.ts","../node_modules/src/core/logger.ts","../node_modules/src/core/context.ts","../node_modules/src/index.ts","../node_modules/rxjs/src/internal/util/isFunction.ts","../node_modules/rxjs/src/internal/util/reportUnhandledError.ts","../node_modules/sdp-transform/lib/grammar.js","../node_modules/sdp-transform/lib/writer.js","../node_modules/rxjs/src/internal/util/isArrayLike.ts","../node_modules/rxjs/src/internal/util/UnsubscriptionError.ts","../node_modules/rxjs/src/internal/Subscription.ts","../node_modules/rxjs/src/internal/util/isReadableStreamLike.ts","../node_modules/i18next/dist/esm/i18next.js","../node_modules/@stream-io/src/contexts/StreamCallContext.tsx","../node_modules/@stream-io/src/i18n/StreamI18n.ts","../node_modules/@stream-io/src/contexts/StreamI18nContext.tsx","../node_modules/@stream-io/src/contexts/StreamVideoContext.tsx","../node_modules/@stream-io/src/hooks/useObservableValue.ts","../node_modules/@stream-io/src/hooks/callStateHooks.ts","../node_modules/@stream-io/src/hooks/store.ts","../node_modules/@stream-io/src/hooks/callUtilHooks.ts","../node_modules/@stream-io/src/hooks/index.ts","../node_modules/@stream-io/src/wrappers/Restricted.tsx","../node_modules/rxjs/src/internal/scheduler/timeoutProvider.ts","../node_modules/rxjs/src/internal/util/arrRemove.ts","../node_modules/rxjs/src/internal/util/createErrorClass.ts","../node_modules/rxjs/src/internal/util/isInteropObservable.ts","../node_modules/rxjs/src/internal/util/isIterable.ts","../node_modules/sdp/sdp.js","../node_modules/rxjs/src/internal/operators/OperatorSubscriber.ts","../node_modules/rxjs/src/internal/operators/observeOn.ts","../node_modules/rxjs/src/internal/operators/subscribeOn.ts","../node_modules/rxjs/src/internal/scheduled/scheduleAsyncIterable.ts","../node_modules/rxjs/src/internal/scheduled/scheduled.ts","../node_modules/rxjs/src/internal/scheduled/scheduleObservable.ts","../node_modules/rxjs/src/internal/scheduled/scheduleArray.ts","../node_modules/rxjs/src/internal/scheduled/schedulePromise.ts","../node_modules/rxjs/src/internal/scheduled/scheduleIterable.ts","../node_modules/rxjs/src/internal/scheduled/scheduleReadableStreamLike.ts","../node_modules/rxjs/src/internal/observable/from.ts","../node_modules/sdp-transform/lib/parser.js","../node_modules/rxjs/src/internal/util/errorContext.ts","../node_modules/rxjs/src/internal/util/pipe.ts","../node_modules/rxjs/src/internal/Observable.ts","../node_modules/sdp-transform/lib/index.js"],"sourcesContent":["/**\n * Creates the TypeError to throw if an invalid object is passed to `from` or `scheduled`.\n * @param input The object that was passed.\n */\nexport function createInvalidObservableTypeError(input: any) {\n  // TODO: We should create error codes that can be looked up, so this can be less verbose.\n  return new TypeError(\n    `You provided ${\n      input !== null && typeof input === 'object' ? 'an invalid object' : `'${input}'`\n    } where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`\n  );\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseFloat(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1));\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2));\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1));\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n    // Only for internal usage.\n    result._safariVersion = extractVersion(navigator.userAgent,\n      /Version\\/(\\d+(\\.?\\d+))/, 1);\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' &&\n      browserDetails._safariVersion >= 13.1) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n// Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","/**\n * The symbol used as a key on message objects to store the message type.\n *\n * Note that this is an experimental feature - it is here to stay, but\n * implementation details may change without notice.\n */\nexport const MESSAGE_TYPE = Symbol.for(\"protobuf-ts/message-type\");\n","/**\n * Converts snake_case to lowerCamelCase.\n *\n * Should behave like protoc:\n * https://github.com/protocolbuffers/protobuf/blob/e8ae137c96444ea313485ed1118c5e43b2099cf1/src/google/protobuf/compiler/java/java_helpers.cc#L118\n */\nexport function lowerCamelCase(snakeCase) {\n    let capNext = false;\n    const sb = [];\n    for (let i = 0; i < snakeCase.length; i++) {\n        let next = snakeCase.charAt(i);\n        if (next == '_') {\n            capNext = true;\n        }\n        else if (/\\d/.test(next)) {\n            sb.push(next);\n            capNext = true;\n        }\n        else if (capNext) {\n            sb.push(next.toUpperCase());\n            capNext = false;\n        }\n        else if (i == 0) {\n            sb.push(next.toLowerCase());\n        }\n        else {\n            sb.push(next);\n        }\n    }\n    return sb.join('');\n}\n","import { lowerCamelCase } from \"./lower-camel-case\";\n/**\n * Scalar value types. This is a subset of field types declared by protobuf\n * enum google.protobuf.FieldDescriptorProto.Type The types GROUP and MESSAGE\n * are omitted, but the numerical values are identical.\n */\nexport var ScalarType;\n(function (ScalarType) {\n    // 0 is reserved for errors.\n    // Order is weird for historical reasons.\n    ScalarType[ScalarType[\"DOUBLE\"] = 1] = \"DOUBLE\";\n    ScalarType[ScalarType[\"FLOAT\"] = 2] = \"FLOAT\";\n    // Not ZigZag encoded.  Negative numbers take 10 bytes.  Use TYPE_SINT64 if\n    // negative values are likely.\n    ScalarType[ScalarType[\"INT64\"] = 3] = \"INT64\";\n    ScalarType[ScalarType[\"UINT64\"] = 4] = \"UINT64\";\n    // Not ZigZag encoded.  Negative numbers take 10 bytes.  Use TYPE_SINT32 if\n    // negative values are likely.\n    ScalarType[ScalarType[\"INT32\"] = 5] = \"INT32\";\n    ScalarType[ScalarType[\"FIXED64\"] = 6] = \"FIXED64\";\n    ScalarType[ScalarType[\"FIXED32\"] = 7] = \"FIXED32\";\n    ScalarType[ScalarType[\"BOOL\"] = 8] = \"BOOL\";\n    ScalarType[ScalarType[\"STRING\"] = 9] = \"STRING\";\n    // Tag-delimited aggregate.\n    // Group type is deprecated and not supported in proto3. However, Proto3\n    // implementations should still be able to parse the group wire format and\n    // treat group fields as unknown fields.\n    // TYPE_GROUP = 10,\n    // TYPE_MESSAGE = 11,  // Length-delimited aggregate.\n    // New in version 2.\n    ScalarType[ScalarType[\"BYTES\"] = 12] = \"BYTES\";\n    ScalarType[ScalarType[\"UINT32\"] = 13] = \"UINT32\";\n    // TYPE_ENUM = 14,\n    ScalarType[ScalarType[\"SFIXED32\"] = 15] = \"SFIXED32\";\n    ScalarType[ScalarType[\"SFIXED64\"] = 16] = \"SFIXED64\";\n    ScalarType[ScalarType[\"SINT32\"] = 17] = \"SINT32\";\n    ScalarType[ScalarType[\"SINT64\"] = 18] = \"SINT64\";\n})(ScalarType || (ScalarType = {}));\n/**\n * JavaScript representation of 64 bit integral types. Equivalent to the\n * field option \"jstype\".\n *\n * By default, protobuf-ts represents 64 bit types as `bigint`.\n *\n * You can change the default behaviour by enabling the plugin parameter\n * `long_type_string`, which will represent 64 bit types as `string`.\n *\n * Alternatively, you can change the behaviour for individual fields\n * with the field option \"jstype\":\n *\n * ```protobuf\n * uint64 my_field = 1 [jstype = JS_STRING];\n * uint64 other_field = 2 [jstype = JS_NUMBER];\n * ```\n */\nexport var LongType;\n(function (LongType) {\n    /**\n     * Use JavaScript `bigint`.\n     *\n     * Field option `[jstype = JS_NORMAL]`.\n     */\n    LongType[LongType[\"BIGINT\"] = 0] = \"BIGINT\";\n    /**\n     * Use JavaScript `string`.\n     *\n     * Field option `[jstype = JS_STRING]`.\n     */\n    LongType[LongType[\"STRING\"] = 1] = \"STRING\";\n    /**\n     * Use JavaScript `number`.\n     *\n     * Large values will loose precision.\n     *\n     * Field option `[jstype = JS_NUMBER]`.\n     */\n    LongType[LongType[\"NUMBER\"] = 2] = \"NUMBER\";\n})(LongType || (LongType = {}));\n/**\n * Protobuf 2.1.0 introduced packed repeated fields.\n * Setting the field option `[packed = true]` enables packing.\n *\n * In proto3, all repeated fields are packed by default.\n * Setting the field option `[packed = false]` disables packing.\n *\n * Packed repeated fields are encoded with a single tag,\n * then a length-delimiter, then the element values.\n *\n * Unpacked repeated fields are encoded with a tag and\n * value for each element.\n *\n * `bytes` and `string` cannot be packed.\n */\nexport var RepeatType;\n(function (RepeatType) {\n    /**\n     * The field is not repeated.\n     */\n    RepeatType[RepeatType[\"NO\"] = 0] = \"NO\";\n    /**\n     * The field is repeated and should be packed.\n     * Invalid for `bytes` and `string`, they cannot be packed.\n     */\n    RepeatType[RepeatType[\"PACKED\"] = 1] = \"PACKED\";\n    /**\n     * The field is repeated but should not be packed.\n     * The only valid repeat type for repeated `bytes` and `string`.\n     */\n    RepeatType[RepeatType[\"UNPACKED\"] = 2] = \"UNPACKED\";\n})(RepeatType || (RepeatType = {}));\n/**\n * Turns PartialFieldInfo into FieldInfo.\n */\nexport function normalizeFieldInfo(field) {\n    var _a, _b, _c, _d;\n    field.localName = (_a = field.localName) !== null && _a !== void 0 ? _a : lowerCamelCase(field.name);\n    field.jsonName = (_b = field.jsonName) !== null && _b !== void 0 ? _b : lowerCamelCase(field.name);\n    field.repeat = (_c = field.repeat) !== null && _c !== void 0 ? _c : RepeatType.NO;\n    field.opt = (_d = field.opt) !== null && _d !== void 0 ? _d : (field.repeat ? false : field.oneof ? false : field.kind == \"message\");\n    return field;\n}\n/**\n * Read custom field options from a generated message type.\n *\n * @deprecated use readFieldOption()\n */\nexport function readFieldOptions(messageType, fieldName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = messageType.fields.find((m, i) => m.localName == fieldName || i == fieldName)) === null || _a === void 0 ? void 0 : _a.options;\n    return options && options[extensionName] ? extensionType.fromJson(options[extensionName]) : undefined;\n}\nexport function readFieldOption(messageType, fieldName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = messageType.fields.find((m, i) => m.localName == fieldName || i == fieldName)) === null || _a === void 0 ? void 0 : _a.options;\n    if (!options) {\n        return undefined;\n    }\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\nexport function readMessageOption(messageType, extensionName, extensionType) {\n    const options = messageType.options;\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\n","/**\n * Is the given value a valid oneof group?\n *\n * We represent protobuf `oneof` as algebraic data types (ADT) in generated\n * code. But when working with messages of unknown type, the ADT does not\n * help us.\n *\n * This type guard checks if the given object adheres to the ADT rules, which\n * are as follows:\n *\n * 1) Must be an object.\n *\n * 2) Must have a \"oneofKind\" discriminator property.\n *\n * 3) If \"oneofKind\" is `undefined`, no member field is selected. The object\n * must not have any other properties.\n *\n * 4) If \"oneofKind\" is a `string`, the member field with this name is\n * selected.\n *\n * 5) If a member field is selected, the object must have a second property\n * with this name. The property must not be `undefined`.\n *\n * 6) No extra properties are allowed. The object has either one property\n * (no selection) or two properties (selection).\n *\n */\nexport function isOneofGroup(any) {\n    if (typeof any != 'object' || any === null || !any.hasOwnProperty('oneofKind')) {\n        return false;\n    }\n    switch (typeof any.oneofKind) {\n        case \"string\":\n            if (any[any.oneofKind] === undefined)\n                return false;\n            return Object.keys(any).length == 2;\n        case \"undefined\":\n            return Object.keys(any).length == 1;\n        default:\n            return false;\n    }\n}\n/**\n * Returns the value of the given field in a oneof group.\n */\nexport function getOneofValue(oneof, kind) {\n    return oneof[kind];\n}\nexport function setOneofValue(oneof, kind, value) {\n    if (oneof.oneofKind !== undefined) {\n        delete oneof[oneof.oneofKind];\n    }\n    oneof.oneofKind = kind;\n    if (value !== undefined) {\n        oneof[kind] = value;\n    }\n}\nexport function setUnknownOneofValue(oneof, kind, value) {\n    if (oneof.oneofKind !== undefined) {\n        delete oneof[oneof.oneofKind];\n    }\n    oneof.oneofKind = kind;\n    if (value !== undefined && kind !== undefined) {\n        oneof[kind] = value;\n    }\n}\n/**\n * Removes the selected field in a oneof group.\n *\n * Note that the recommended way to modify a oneof group is to set\n * a new object:\n *\n * ```ts\n * message.result = { oneofKind: undefined };\n * ```\n */\nexport function clearOneofValue(oneof) {\n    if (oneof.oneofKind !== undefined) {\n        delete oneof[oneof.oneofKind];\n    }\n    oneof.oneofKind = undefined;\n}\n/**\n * Returns the selected value of the given oneof group.\n *\n * Not that the recommended way to access a oneof group is to check\n * the \"oneofKind\" property and let TypeScript narrow down the union\n * type for you:\n *\n * ```ts\n * if (message.result.oneofKind === \"error\") {\n *   message.result.error; // string\n * }\n * ```\n *\n * In the rare case you just need the value, and do not care about\n * which protobuf field is selected, you can use this function\n * for convenience.\n */\nexport function getSelectedOneofValue(oneof) {\n    if (oneof.oneofKind === undefined) {\n        return undefined;\n    }\n    return oneof[oneof.oneofKind];\n}\n","import { LongType, ScalarType } from \"./reflection-info\";\nimport { isOneofGroup } from \"./oneof\";\n// noinspection JSMethodCanBeStatic\nexport class ReflectionTypeCheck {\n    constructor(info) {\n        var _a;\n        this.fields = (_a = info.fields) !== null && _a !== void 0 ? _a : [];\n    }\n    prepare() {\n        if (this.data)\n            return;\n        const req = [], known = [], oneofs = [];\n        for (let field of this.fields) {\n            if (field.oneof) {\n                if (!oneofs.includes(field.oneof)) {\n                    oneofs.push(field.oneof);\n                    req.push(field.oneof);\n                    known.push(field.oneof);\n                }\n            }\n            else {\n                known.push(field.localName);\n                switch (field.kind) {\n                    case \"scalar\":\n                    case \"enum\":\n                        if (!field.opt || field.repeat)\n                            req.push(field.localName);\n                        break;\n                    case \"message\":\n                        if (field.repeat)\n                            req.push(field.localName);\n                        break;\n                    case \"map\":\n                        req.push(field.localName);\n                        break;\n                }\n            }\n        }\n        this.data = { req, known, oneofs: Object.values(oneofs) };\n    }\n    /**\n     * Is the argument a valid message as specified by the\n     * reflection information?\n     *\n     * Checks all field types recursively. The `depth`\n     * specifies how deep into the structure the check will be.\n     *\n     * With a depth of 0, only the presence of fields\n     * is checked.\n     *\n     * With a depth of 1 or more, the field types are checked.\n     *\n     * With a depth of 2 or more, the members of map, repeated\n     * and message fields are checked.\n     *\n     * Message fields will be checked recursively with depth - 1.\n     *\n     * The number of map entries / repeated values being checked\n     * is < depth.\n     */\n    is(message, depth, allowExcessProperties = false) {\n        if (depth < 0)\n            return true;\n        if (message === null || message === undefined || typeof message != 'object')\n            return false;\n        this.prepare();\n        let keys = Object.keys(message), data = this.data;\n        // if a required field is missing in arg, this cannot be a T\n        if (keys.length < data.req.length || data.req.some(n => !keys.includes(n)))\n            return false;\n        if (!allowExcessProperties) {\n            // if the arg contains a key we dont know, this is not a literal T\n            if (keys.some(k => !data.known.includes(k)))\n                return false;\n        }\n        // \"With a depth of 0, only the presence and absence of fields is checked.\"\n        // \"With a depth of 1 or more, the field types are checked.\"\n        if (depth < 1) {\n            return true;\n        }\n        // check oneof group\n        for (const name of data.oneofs) {\n            const group = message[name];\n            if (!isOneofGroup(group))\n                return false;\n            if (group.oneofKind === undefined)\n                continue;\n            const field = this.fields.find(f => f.localName === group.oneofKind);\n            if (!field)\n                return false; // we found no field, but have a kind, something is wrong\n            if (!this.field(group[group.oneofKind], field, allowExcessProperties, depth))\n                return false;\n        }\n        // check types\n        for (const field of this.fields) {\n            if (field.oneof !== undefined)\n                continue;\n            if (!this.field(message[field.localName], field, allowExcessProperties, depth))\n                return false;\n        }\n        return true;\n    }\n    field(arg, field, allowExcessProperties, depth) {\n        let repeated = field.repeat;\n        switch (field.kind) {\n            case \"scalar\":\n                if (arg === undefined)\n                    return field.opt;\n                if (repeated)\n                    return this.scalars(arg, field.T, depth, field.L);\n                return this.scalar(arg, field.T, field.L);\n            case \"enum\":\n                if (arg === undefined)\n                    return field.opt;\n                if (repeated)\n                    return this.scalars(arg, ScalarType.INT32, depth);\n                return this.scalar(arg, ScalarType.INT32);\n            case \"message\":\n                if (arg === undefined)\n                    return true;\n                if (repeated)\n                    return this.messages(arg, field.T(), allowExcessProperties, depth);\n                return this.message(arg, field.T(), allowExcessProperties, depth);\n            case \"map\":\n                if (typeof arg != 'object' || arg === null)\n                    return false;\n                if (depth < 2)\n                    return true;\n                if (!this.mapKeys(arg, field.K, depth))\n                    return false;\n                switch (field.V.kind) {\n                    case \"scalar\":\n                        return this.scalars(Object.values(arg), field.V.T, depth, field.V.L);\n                    case \"enum\":\n                        return this.scalars(Object.values(arg), ScalarType.INT32, depth);\n                    case \"message\":\n                        return this.messages(Object.values(arg), field.V.T(), allowExcessProperties, depth);\n                }\n                break;\n        }\n        return true;\n    }\n    message(arg, type, allowExcessProperties, depth) {\n        if (allowExcessProperties) {\n            return type.isAssignable(arg, depth);\n        }\n        return type.is(arg, depth);\n    }\n    messages(arg, type, allowExcessProperties, depth) {\n        if (!Array.isArray(arg))\n            return false;\n        if (depth < 2)\n            return true;\n        if (allowExcessProperties) {\n            for (let i = 0; i < arg.length && i < depth; i++)\n                if (!type.isAssignable(arg[i], depth - 1))\n                    return false;\n        }\n        else {\n            for (let i = 0; i < arg.length && i < depth; i++)\n                if (!type.is(arg[i], depth - 1))\n                    return false;\n        }\n        return true;\n    }\n    scalar(arg, type, longType) {\n        let argType = typeof arg;\n        switch (type) {\n            case ScalarType.UINT64:\n            case ScalarType.FIXED64:\n            case ScalarType.INT64:\n            case ScalarType.SFIXED64:\n            case ScalarType.SINT64:\n                switch (longType) {\n                    case LongType.BIGINT:\n                        return argType == \"bigint\";\n                    case LongType.NUMBER:\n                        return argType == \"number\" && !isNaN(arg);\n                    default:\n                        return argType == \"string\";\n                }\n            case ScalarType.BOOL:\n                return argType == 'boolean';\n            case ScalarType.STRING:\n                return argType == 'string';\n            case ScalarType.BYTES:\n                return arg instanceof Uint8Array;\n            case ScalarType.DOUBLE:\n            case ScalarType.FLOAT:\n                return argType == 'number' && !isNaN(arg);\n            default:\n                // case ScalarType.UINT32:\n                // case ScalarType.FIXED32:\n                // case ScalarType.INT32:\n                // case ScalarType.SINT32:\n                // case ScalarType.SFIXED32:\n                return argType == 'number' && Number.isInteger(arg);\n        }\n    }\n    scalars(arg, type, depth, longType) {\n        if (!Array.isArray(arg))\n            return false;\n        if (depth < 2)\n            return true;\n        if (Array.isArray(arg))\n            for (let i = 0; i < arg.length && i < depth; i++)\n                if (!this.scalar(arg[i], type, longType))\n                    return false;\n        return true;\n    }\n    mapKeys(map, type, depth) {\n        let keys = Object.keys(map);\n        switch (type) {\n            case ScalarType.INT32:\n            case ScalarType.FIXED32:\n            case ScalarType.SFIXED32:\n            case ScalarType.SINT32:\n            case ScalarType.UINT32:\n                return this.scalars(keys.slice(0, depth).map(k => parseInt(k)), type, depth);\n            case ScalarType.BOOL:\n                return this.scalars(keys.slice(0, depth).map(k => k == 'true' ? true : k == 'false' ? false : k), type, depth);\n            default:\n                return this.scalars(keys, type, depth, LongType.STRING);\n        }\n    }\n}\n","/**\n * Get the type of a JSON value.\n * Distinguishes between array, null and object.\n */\nexport function typeofJsonValue(value) {\n    let t = typeof value;\n    if (t == \"object\") {\n        if (Array.isArray(value))\n            return \"array\";\n        if (value === null)\n            return \"null\";\n    }\n    return t;\n}\n/**\n * Is this a JSON object (instead of an array or null)?\n */\nexport function isJsonObject(value) {\n    return value !== null && typeof value == \"object\" && !Array.isArray(value);\n}\n","// lookup table from base64 character to byte\nlet encTable = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n// lookup table from base64 character *code* to byte because lookup by number is fast\nlet decTable = [];\nfor (let i = 0; i < encTable.length; i++)\n    decTable[encTable[i].charCodeAt(0)] = i;\n// support base64url variants\ndecTable[\"-\".charCodeAt(0)] = encTable.indexOf(\"+\");\ndecTable[\"_\".charCodeAt(0)] = encTable.indexOf(\"/\");\n/**\n * Decodes a base64 string to a byte array.\n *\n * - ignores white-space, including line breaks and tabs\n * - allows inner padding (can decode concatenated base64 strings)\n * - does not require padding\n * - understands base64url encoding:\n *   \"-\" instead of \"+\",\n *   \"_\" instead of \"/\",\n *   no padding\n */\nexport function base64decode(base64Str) {\n    // estimate byte size, not accounting for inner padding and whitespace\n    let es = base64Str.length * 3 / 4;\n    // if (es % 3 !== 0)\n    // throw new Error('invalid base64 string');\n    if (base64Str[base64Str.length - 2] == '=')\n        es -= 2;\n    else if (base64Str[base64Str.length - 1] == '=')\n        es -= 1;\n    let bytes = new Uint8Array(es), bytePos = 0, // position in byte array\n    groupPos = 0, // position in base64 group\n    b, // current byte\n    p = 0 // previous byte\n    ;\n    for (let i = 0; i < base64Str.length; i++) {\n        b = decTable[base64Str.charCodeAt(i)];\n        if (b === undefined) {\n            // noinspection FallThroughInSwitchStatementJS\n            switch (base64Str[i]) {\n                case '=':\n                    groupPos = 0; // reset state when padding found\n                case '\\n':\n                case '\\r':\n                case '\\t':\n                case ' ':\n                    continue; // skip white-space, and padding\n                default:\n                    throw Error(`invalid base64 string.`);\n            }\n        }\n        switch (groupPos) {\n            case 0:\n                p = b;\n                groupPos = 1;\n                break;\n            case 1:\n                bytes[bytePos++] = p << 2 | (b & 48) >> 4;\n                p = b;\n                groupPos = 2;\n                break;\n            case 2:\n                bytes[bytePos++] = (p & 15) << 4 | (b & 60) >> 2;\n                p = b;\n                groupPos = 3;\n                break;\n            case 3:\n                bytes[bytePos++] = (p & 3) << 6 | b;\n                groupPos = 0;\n                break;\n        }\n    }\n    if (groupPos == 1)\n        throw Error(`invalid base64 string.`);\n    return bytes.subarray(0, bytePos);\n}\n/**\n * Encodes a byte array to a base64 string.\n * Adds padding at the end.\n * Does not insert newlines.\n */\nexport function base64encode(bytes) {\n    let base64 = '', groupPos = 0, // position in base64 group\n    b, // current byte\n    p = 0; // carry over from previous byte\n    for (let i = 0; i < bytes.length; i++) {\n        b = bytes[i];\n        switch (groupPos) {\n            case 0:\n                base64 += encTable[b >> 2];\n                p = (b & 3) << 4;\n                groupPos = 1;\n                break;\n            case 1:\n                base64 += encTable[p | b >> 4];\n                p = (b & 15) << 2;\n                groupPos = 2;\n                break;\n            case 2:\n                base64 += encTable[p | b >> 6];\n                base64 += encTable[b & 63];\n                groupPos = 0;\n                break;\n        }\n    }\n    // padding required?\n    if (groupPos) {\n        base64 += encTable[p];\n        base64 += '=';\n        if (groupPos == 1)\n            base64 += '=';\n    }\n    return base64;\n}\n","// Copyright 2008 Google Inc.  All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// Code generated by the Protocol Buffer compiler is owned by the owner\n// of the input file used when generating it.  This code is not\n// standalone and requires a support library to be linked with it.  This\n// support library is itself covered by the above license.\n/**\n * Read a 64 bit varint as two JS numbers.\n *\n * Returns tuple:\n * [0]: low bits\n * [0]: high bits\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/buffer_decoder.js#L175\n */\nexport function varint64read() {\n    let lowBits = 0;\n    let highBits = 0;\n    for (let shift = 0; shift < 28; shift += 7) {\n        let b = this.buf[this.pos++];\n        lowBits |= (b & 0x7F) << shift;\n        if ((b & 0x80) == 0) {\n            this.assertBounds();\n            return [lowBits, highBits];\n        }\n    }\n    let middleByte = this.buf[this.pos++];\n    // last four bits of the first 32 bit number\n    lowBits |= (middleByte & 0x0F) << 28;\n    // 3 upper bits are part of the next 32 bit number\n    highBits = (middleByte & 0x70) >> 4;\n    if ((middleByte & 0x80) == 0) {\n        this.assertBounds();\n        return [lowBits, highBits];\n    }\n    for (let shift = 3; shift <= 31; shift += 7) {\n        let b = this.buf[this.pos++];\n        highBits |= (b & 0x7F) << shift;\n        if ((b & 0x80) == 0) {\n            this.assertBounds();\n            return [lowBits, highBits];\n        }\n    }\n    throw new Error('invalid varint');\n}\n/**\n * Write a 64 bit varint, given as two JS numbers, to the given bytes array.\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/writer.js#L344\n */\nexport function varint64write(lo, hi, bytes) {\n    for (let i = 0; i < 28; i = i + 7) {\n        const shift = lo >>> i;\n        const hasNext = !((shift >>> 7) == 0 && hi == 0);\n        const byte = (hasNext ? shift | 0x80 : shift) & 0xFF;\n        bytes.push(byte);\n        if (!hasNext) {\n            return;\n        }\n    }\n    const splitBits = ((lo >>> 28) & 0x0F) | ((hi & 0x07) << 4);\n    const hasMoreBits = !((hi >> 3) == 0);\n    bytes.push((hasMoreBits ? splitBits | 0x80 : splitBits) & 0xFF);\n    if (!hasMoreBits) {\n        return;\n    }\n    for (let i = 3; i < 31; i = i + 7) {\n        const shift = hi >>> i;\n        const hasNext = !((shift >>> 7) == 0);\n        const byte = (hasNext ? shift | 0x80 : shift) & 0xFF;\n        bytes.push(byte);\n        if (!hasNext) {\n            return;\n        }\n    }\n    bytes.push((hi >>> 31) & 0x01);\n}\n// constants for binary math\nconst TWO_PWR_32_DBL = (1 << 16) * (1 << 16);\n/**\n * Parse decimal string of 64 bit integer value as two JS numbers.\n *\n * Returns tuple:\n * [0]: minus sign?\n * [1]: low bits\n * [2]: high bits\n *\n * Copyright 2008 Google Inc.\n */\nexport function int64fromString(dec) {\n    // Check for minus sign.\n    let minus = dec[0] == '-';\n    if (minus)\n        dec = dec.slice(1);\n    // Work 6 decimal digits at a time, acting like we're converting base 1e6\n    // digits to binary. This is safe to do with floating point math because\n    // Number.isSafeInteger(ALL_32_BITS * 1e6) == true.\n    const base = 1e6;\n    let lowBits = 0;\n    let highBits = 0;\n    function add1e6digit(begin, end) {\n        // Note: Number('') is 0.\n        const digit1e6 = Number(dec.slice(begin, end));\n        highBits *= base;\n        lowBits = lowBits * base + digit1e6;\n        // Carry bits from lowBits to highBits\n        if (lowBits >= TWO_PWR_32_DBL) {\n            highBits = highBits + ((lowBits / TWO_PWR_32_DBL) | 0);\n            lowBits = lowBits % TWO_PWR_32_DBL;\n        }\n    }\n    add1e6digit(-24, -18);\n    add1e6digit(-18, -12);\n    add1e6digit(-12, -6);\n    add1e6digit(-6);\n    return [minus, lowBits, highBits];\n}\n/**\n * Format 64 bit integer value (as two JS numbers) to decimal string.\n *\n * Copyright 2008 Google Inc.\n */\nexport function int64toString(bitsLow, bitsHigh) {\n    // Skip the expensive conversion if the number is small enough to use the\n    // built-in conversions.\n    if ((bitsHigh >>> 0) <= 0x1FFFFF) {\n        return '' + (TWO_PWR_32_DBL * bitsHigh + (bitsLow >>> 0));\n    }\n    // What this code is doing is essentially converting the input number from\n    // base-2 to base-1e7, which allows us to represent the 64-bit range with\n    // only 3 (very large) digits. Those digits are then trivial to convert to\n    // a base-10 string.\n    // The magic numbers used here are -\n    // 2^24 = 16777216 = (1,6777216) in base-1e7.\n    // 2^48 = 281474976710656 = (2,8147497,6710656) in base-1e7.\n    // Split 32:32 representation into 16:24:24 representation so our\n    // intermediate digits don't overflow.\n    let low = bitsLow & 0xFFFFFF;\n    let mid = (((bitsLow >>> 24) | (bitsHigh << 8)) >>> 0) & 0xFFFFFF;\n    let high = (bitsHigh >> 16) & 0xFFFF;\n    // Assemble our three base-1e7 digits, ignoring carries. The maximum\n    // value in a digit at this step is representable as a 48-bit integer, which\n    // can be stored in a 64-bit floating point number.\n    let digitA = low + (mid * 6777216) + (high * 6710656);\n    let digitB = mid + (high * 8147497);\n    let digitC = (high * 2);\n    // Apply carries from A to B and from B to C.\n    let base = 10000000;\n    if (digitA >= base) {\n        digitB += Math.floor(digitA / base);\n        digitA %= base;\n    }\n    if (digitB >= base) {\n        digitC += Math.floor(digitB / base);\n        digitB %= base;\n    }\n    // Convert base-1e7 digits to base-10, with optional leading zeroes.\n    function decimalFrom1e7(digit1e7, needLeadingZeros) {\n        let partial = digit1e7 ? String(digit1e7) : '';\n        if (needLeadingZeros) {\n            return '0000000'.slice(partial.length) + partial;\n        }\n        return partial;\n    }\n    return decimalFrom1e7(digitC, /*needLeadingZeros=*/ 0) +\n        decimalFrom1e7(digitB, /*needLeadingZeros=*/ digitC) +\n        // If the final 1e7 digit didn't need leading zeros, we would have\n        // returned via the trivial code path at the top.\n        decimalFrom1e7(digitA, /*needLeadingZeros=*/ 1);\n}\n/**\n * Write a 32 bit varint, signed or unsigned. Same as `varint64write(0, value, bytes)`\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/1b18833f4f2a2f681f4e4a25cdf3b0a43115ec26/js/binary/encoder.js#L144\n */\nexport function varint32write(value, bytes) {\n    if (value >= 0) {\n        // write value as varint 32\n        while (value > 0x7f) {\n            bytes.push((value & 0x7f) | 0x80);\n            value = value >>> 7;\n        }\n        bytes.push(value);\n    }\n    else {\n        for (let i = 0; i < 9; i++) {\n            bytes.push(value & 127 | 128);\n            value = value >> 7;\n        }\n        bytes.push(1);\n    }\n}\n/**\n * Read an unsigned 32 bit varint.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/buffer_decoder.js#L220\n */\nexport function varint32read() {\n    let b = this.buf[this.pos++];\n    let result = b & 0x7F;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7F) << 7;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7F) << 14;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7F) << 21;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    // Extract only last 4 bits\n    b = this.buf[this.pos++];\n    result |= (b & 0x0F) << 28;\n    for (let readBytes = 5; ((b & 0x80) !== 0) && readBytes < 10; readBytes++)\n        b = this.buf[this.pos++];\n    if ((b & 0x80) != 0)\n        throw new Error('invalid varint');\n    this.assertBounds();\n    // Result can have 32 bits, convert it to unsigned\n    return result >>> 0;\n}\n","import { int64fromString, int64toString } from \"./goog-varint\";\nlet BI;\nexport function detectBi() {\n    const dv = new DataView(new ArrayBuffer(8));\n    const ok = globalThis.BigInt !== undefined\n        && typeof dv.getBigInt64 === \"function\"\n        && typeof dv.getBigUint64 === \"function\"\n        && typeof dv.setBigInt64 === \"function\"\n        && typeof dv.setBigUint64 === \"function\";\n    BI = ok ? {\n        MIN: BigInt(\"-9223372036854775808\"),\n        MAX: BigInt(\"9223372036854775807\"),\n        UMIN: BigInt(\"0\"),\n        UMAX: BigInt(\"18446744073709551615\"),\n        C: BigInt,\n        V: dv,\n    } : undefined;\n}\ndetectBi();\nfunction assertBi(bi) {\n    if (!bi)\n        throw new Error(\"BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support\");\n}\n// used to validate from(string) input (when bigint is unavailable)\nconst RE_DECIMAL_STR = /^-?[0-9]+$/;\n// constants for binary math\nconst TWO_PWR_32_DBL = 0x100000000;\nconst HALF_2_PWR_32 = 0x080000000;\n// base class for PbLong and PbULong provides shared code\nclass SharedPbLong {\n    /**\n     * Create a new instance with the given bits.\n     */\n    constructor(lo, hi) {\n        this.lo = lo | 0;\n        this.hi = hi | 0;\n    }\n    /**\n     * Is this instance equal to 0?\n     */\n    isZero() {\n        return this.lo == 0 && this.hi == 0;\n    }\n    /**\n     * Convert to a native number.\n     */\n    toNumber() {\n        let result = this.hi * TWO_PWR_32_DBL + (this.lo >>> 0);\n        if (!Number.isSafeInteger(result))\n            throw new Error(\"cannot convert to safe number\");\n        return result;\n    }\n}\n/**\n * 64-bit unsigned integer as two 32-bit values.\n * Converts between `string`, `number` and `bigint` representations.\n */\nexport class PbULong extends SharedPbLong {\n    /**\n     * Create instance from a `string`, `number` or `bigint`.\n     */\n    static from(value) {\n        if (BI)\n            // noinspection FallThroughInSwitchStatementJS\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    if (value == \"\")\n                        throw new Error('string is no integer');\n                    value = BI.C(value);\n                case \"number\":\n                    if (value === 0)\n                        return this.ZERO;\n                    value = BI.C(value);\n                case \"bigint\":\n                    if (!value)\n                        return this.ZERO;\n                    if (value < BI.UMIN)\n                        throw new Error('signed value for ulong');\n                    if (value > BI.UMAX)\n                        throw new Error('ulong too large');\n                    BI.V.setBigUint64(0, value, true);\n                    return new PbULong(BI.V.getInt32(0, true), BI.V.getInt32(4, true));\n            }\n        else\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    value = value.trim();\n                    if (!RE_DECIMAL_STR.test(value))\n                        throw new Error('string is no integer');\n                    let [minus, lo, hi] = int64fromString(value);\n                    if (minus)\n                        throw new Error('signed value for ulong');\n                    return new PbULong(lo, hi);\n                case \"number\":\n                    if (value == 0)\n                        return this.ZERO;\n                    if (!Number.isSafeInteger(value))\n                        throw new Error('number is no integer');\n                    if (value < 0)\n                        throw new Error('signed value for ulong');\n                    return new PbULong(value, value / TWO_PWR_32_DBL);\n            }\n        throw new Error('unknown value ' + typeof value);\n    }\n    /**\n     * Convert to decimal string.\n     */\n    toString() {\n        return BI ? this.toBigInt().toString() : int64toString(this.lo, this.hi);\n    }\n    /**\n     * Convert to native bigint.\n     */\n    toBigInt() {\n        assertBi(BI);\n        BI.V.setInt32(0, this.lo, true);\n        BI.V.setInt32(4, this.hi, true);\n        return BI.V.getBigUint64(0, true);\n    }\n}\n/**\n * ulong 0 singleton.\n */\nPbULong.ZERO = new PbULong(0, 0);\n/**\n * 64-bit signed integer as two 32-bit values.\n * Converts between `string`, `number` and `bigint` representations.\n */\nexport class PbLong extends SharedPbLong {\n    /**\n     * Create instance from a `string`, `number` or `bigint`.\n     */\n    static from(value) {\n        if (BI)\n            // noinspection FallThroughInSwitchStatementJS\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    if (value == \"\")\n                        throw new Error('string is no integer');\n                    value = BI.C(value);\n                case \"number\":\n                    if (value === 0)\n                        return this.ZERO;\n                    value = BI.C(value);\n                case \"bigint\":\n                    if (!value)\n                        return this.ZERO;\n                    if (value < BI.MIN)\n                        throw new Error('signed long too small');\n                    if (value > BI.MAX)\n                        throw new Error('signed long too large');\n                    BI.V.setBigInt64(0, value, true);\n                    return new PbLong(BI.V.getInt32(0, true), BI.V.getInt32(4, true));\n            }\n        else\n            switch (typeof value) {\n                case \"string\":\n                    if (value == \"0\")\n                        return this.ZERO;\n                    value = value.trim();\n                    if (!RE_DECIMAL_STR.test(value))\n                        throw new Error('string is no integer');\n                    let [minus, lo, hi] = int64fromString(value);\n                    if (minus) {\n                        if (hi > HALF_2_PWR_32 || (hi == HALF_2_PWR_32 && lo != 0))\n                            throw new Error('signed long too small');\n                    }\n                    else if (hi >= HALF_2_PWR_32)\n                        throw new Error('signed long too large');\n                    let pbl = new PbLong(lo, hi);\n                    return minus ? pbl.negate() : pbl;\n                case \"number\":\n                    if (value == 0)\n                        return this.ZERO;\n                    if (!Number.isSafeInteger(value))\n                        throw new Error('number is no integer');\n                    return value > 0\n                        ? new PbLong(value, value / TWO_PWR_32_DBL)\n                        : new PbLong(-value, -value / TWO_PWR_32_DBL).negate();\n            }\n        throw new Error('unknown value ' + typeof value);\n    }\n    /**\n     * Do we have a minus sign?\n     */\n    isNegative() {\n        return (this.hi & HALF_2_PWR_32) !== 0;\n    }\n    /**\n     * Negate two's complement.\n     * Invert all the bits and add one to the result.\n     */\n    negate() {\n        let hi = ~this.hi, lo = this.lo;\n        if (lo)\n            lo = ~lo + 1;\n        else\n            hi += 1;\n        return new PbLong(lo, hi);\n    }\n    /**\n     * Convert to decimal string.\n     */\n    toString() {\n        if (BI)\n            return this.toBigInt().toString();\n        if (this.isNegative()) {\n            let n = this.negate();\n            return '-' + int64toString(n.lo, n.hi);\n        }\n        return int64toString(this.lo, this.hi);\n    }\n    /**\n     * Convert to native bigint.\n     */\n    toBigInt() {\n        assertBi(BI);\n        BI.V.setInt32(0, this.lo, true);\n        BI.V.setInt32(4, this.hi, true);\n        return BI.V.getBigInt64(0, true);\n    }\n}\n/**\n * long 0 singleton.\n */\nPbLong.ZERO = new PbLong(0, 0);\n","/**\n * assert that condition is true or throw error (with message)\n */\nexport function assert(condition, msg) {\n    if (!condition) {\n        throw new Error(msg);\n    }\n}\n/**\n * assert that value cannot exist = type `never`. throw runtime error if it does.\n */\nexport function assertNever(value, msg) {\n    throw new Error(msg !== null && msg !== void 0 ? msg : 'Unexpected object: ' + value);\n}\nconst FLOAT32_MAX = 3.4028234663852886e+38, FLOAT32_MIN = -3.4028234663852886e+38, UINT32_MAX = 0xFFFFFFFF, INT32_MAX = 0X7FFFFFFF, INT32_MIN = -0X80000000;\nexport function assertInt32(arg) {\n    if (typeof arg !== \"number\")\n        throw new Error('invalid int 32: ' + typeof arg);\n    if (!Number.isInteger(arg) || arg > INT32_MAX || arg < INT32_MIN)\n        throw new Error('invalid int 32: ' + arg);\n}\nexport function assertUInt32(arg) {\n    if (typeof arg !== \"number\")\n        throw new Error('invalid uint 32: ' + typeof arg);\n    if (!Number.isInteger(arg) || arg > UINT32_MAX || arg < 0)\n        throw new Error('invalid uint 32: ' + arg);\n}\nexport function assertFloat32(arg) {\n    if (typeof arg !== \"number\")\n        throw new Error('invalid float 32: ' + typeof arg);\n    if (!Number.isFinite(arg))\n        return;\n    if (arg > FLOAT32_MAX || arg < FLOAT32_MIN)\n        throw new Error('invalid float 32: ' + arg);\n}\n","import { LongType } from \"./reflection-info\";\n/**\n * Utility method to convert a PbLong or PbUlong to a JavaScript\n * representation during runtime.\n *\n * Works with generated field information, `undefined` is equivalent\n * to `STRING`.\n */\nexport function reflectionLongConvert(long, type) {\n    switch (type) {\n        case LongType.BIGINT:\n            return long.toBigInt();\n        case LongType.NUMBER:\n            return long.toNumber();\n        default:\n            // case undefined:\n            // case LongType.STRING:\n            return long.toString();\n    }\n}\n","import { isJsonObject, typeofJsonValue } from \"./json-typings\";\nimport { base64decode } from \"./base64\";\nimport { LongType, ScalarType } from \"./reflection-info\";\nimport { PbLong, PbULong } from \"./pb-long\";\nimport { assert, assertFloat32, assertInt32, assertUInt32 } from \"./assert\";\nimport { reflectionLongConvert } from \"./reflection-long-convert\";\n/**\n * Reads proto3 messages in canonical JSON format using reflection information.\n *\n * https://developers.google.com/protocol-buffers/docs/proto3#json\n */\nexport class ReflectionJsonReader {\n    constructor(info) {\n        this.info = info;\n    }\n    prepare() {\n        var _a;\n        if (this.fMap === undefined) {\n            this.fMap = {};\n            const fieldsInput = (_a = this.info.fields) !== null && _a !== void 0 ? _a : [];\n            for (const field of fieldsInput) {\n                this.fMap[field.name] = field;\n                this.fMap[field.jsonName] = field;\n                this.fMap[field.localName] = field;\n            }\n        }\n    }\n    // Cannot parse JSON <type of jsonValue> for <type name>#<fieldName>.\n    assert(condition, fieldName, jsonValue) {\n        if (!condition) {\n            let what = typeofJsonValue(jsonValue);\n            if (what == \"number\" || what == \"boolean\")\n                what = jsonValue.toString();\n            throw new Error(`Cannot parse JSON ${what} for ${this.info.typeName}#${fieldName}`);\n        }\n    }\n    /**\n     * Reads a message from canonical JSON format into the target message.\n     *\n     * Repeated fields are appended. Map entries are added, overwriting\n     * existing keys.\n     *\n     * If a message field is already present, it will be merged with the\n     * new data.\n     */\n    read(input, message, options) {\n        this.prepare();\n        const oneofsHandled = [];\n        for (const [jsonKey, jsonValue] of Object.entries(input)) {\n            const field = this.fMap[jsonKey];\n            if (!field) {\n                if (!options.ignoreUnknownFields)\n                    throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${jsonKey}`);\n                continue;\n            }\n            const localName = field.localName;\n            // handle oneof ADT\n            let target; // this will be the target for the field value, whether it is member of a oneof or not\n            if (field.oneof) {\n                if (jsonValue === null && (field.kind !== 'enum' || field.T()[0] !== 'google.protobuf.NullValue')) {\n                    continue;\n                }\n                // since json objects are unordered by specification, it is not possible to take the last of multiple oneofs\n                if (oneofsHandled.includes(field.oneof))\n                    throw new Error(`Multiple members of the oneof group \"${field.oneof}\" of ${this.info.typeName} are present in JSON.`);\n                oneofsHandled.push(field.oneof);\n                target = message[field.oneof] = {\n                    oneofKind: localName\n                };\n            }\n            else {\n                target = message;\n            }\n            // we have handled oneof above. we just have read the value into `target`.\n            if (field.kind == 'map') {\n                if (jsonValue === null) {\n                    continue;\n                }\n                // check input\n                this.assert(isJsonObject(jsonValue), field.name, jsonValue);\n                // our target to put map entries into\n                const fieldObj = target[localName];\n                // read entries\n                for (const [jsonObjKey, jsonObjValue] of Object.entries(jsonValue)) {\n                    this.assert(jsonObjValue !== null, field.name + \" map value\", null);\n                    // read value\n                    let val;\n                    switch (field.V.kind) {\n                        case \"message\":\n                            val = field.V.T().internalJsonRead(jsonObjValue, options);\n                            break;\n                        case \"enum\":\n                            val = this.enum(field.V.T(), jsonObjValue, field.name, options.ignoreUnknownFields);\n                            if (val === false)\n                                continue;\n                            break;\n                        case \"scalar\":\n                            val = this.scalar(jsonObjValue, field.V.T, field.V.L, field.name);\n                            break;\n                    }\n                    this.assert(val !== undefined, field.name + \" map value\", jsonObjValue);\n                    // read key\n                    let key = jsonObjKey;\n                    if (field.K == ScalarType.BOOL)\n                        key = key == \"true\" ? true : key == \"false\" ? false : key;\n                    key = this.scalar(key, field.K, LongType.STRING, field.name).toString();\n                    fieldObj[key] = val;\n                }\n            }\n            else if (field.repeat) {\n                if (jsonValue === null)\n                    continue;\n                // check input\n                this.assert(Array.isArray(jsonValue), field.name, jsonValue);\n                // our target to put array entries into\n                const fieldArr = target[localName];\n                // read array entries\n                for (const jsonItem of jsonValue) {\n                    this.assert(jsonItem !== null, field.name, null);\n                    let val;\n                    switch (field.kind) {\n                        case \"message\":\n                            val = field.T().internalJsonRead(jsonItem, options);\n                            break;\n                        case \"enum\":\n                            val = this.enum(field.T(), jsonItem, field.name, options.ignoreUnknownFields);\n                            if (val === false)\n                                continue;\n                            break;\n                        case \"scalar\":\n                            val = this.scalar(jsonItem, field.T, field.L, field.name);\n                            break;\n                    }\n                    this.assert(val !== undefined, field.name, jsonValue);\n                    fieldArr.push(val);\n                }\n            }\n            else {\n                switch (field.kind) {\n                    case \"message\":\n                        if (jsonValue === null && field.T().typeName != 'google.protobuf.Value') {\n                            this.assert(field.oneof === undefined, field.name + \" (oneof member)\", null);\n                            continue;\n                        }\n                        target[localName] = field.T().internalJsonRead(jsonValue, options, target[localName]);\n                        break;\n                    case \"enum\":\n                        if (jsonValue === null)\n                            continue;\n                        let val = this.enum(field.T(), jsonValue, field.name, options.ignoreUnknownFields);\n                        if (val === false)\n                            continue;\n                        target[localName] = val;\n                        break;\n                    case \"scalar\":\n                        if (jsonValue === null)\n                            continue;\n                        target[localName] = this.scalar(jsonValue, field.T, field.L, field.name);\n                        break;\n                }\n            }\n        }\n    }\n    /**\n     * Returns `false` for unrecognized string representations.\n     *\n     * google.protobuf.NullValue accepts only JSON `null` (or the old `\"NULL_VALUE\"`).\n     */\n    enum(type, json, fieldName, ignoreUnknownFields) {\n        if (type[0] == 'google.protobuf.NullValue')\n            assert(json === null || json === \"NULL_VALUE\", `Unable to parse field ${this.info.typeName}#${fieldName}, enum ${type[0]} only accepts null.`);\n        if (json === null)\n            // we require 0 to be default value for all enums\n            return 0;\n        switch (typeof json) {\n            case \"number\":\n                assert(Number.isInteger(json), `Unable to parse field ${this.info.typeName}#${fieldName}, enum can only be integral number, got ${json}.`);\n                return json;\n            case \"string\":\n                let localEnumName = json;\n                if (type[2] && json.substring(0, type[2].length) === type[2])\n                    // lookup without the shared prefix\n                    localEnumName = json.substring(type[2].length);\n                let enumNumber = type[1][localEnumName];\n                if (typeof enumNumber === 'undefined' && ignoreUnknownFields) {\n                    return false;\n                }\n                assert(typeof enumNumber == \"number\", `Unable to parse field ${this.info.typeName}#${fieldName}, enum ${type[0]} has no value for \"${json}\".`);\n                return enumNumber;\n        }\n        assert(false, `Unable to parse field ${this.info.typeName}#${fieldName}, cannot parse enum value from ${typeof json}\".`);\n    }\n    scalar(json, type, longType, fieldName) {\n        let e;\n        try {\n            switch (type) {\n                // float, double: JSON value will be a number or one of the special string values \"NaN\", \"Infinity\", and \"-Infinity\".\n                // Either numbers or strings are accepted. Exponent notation is also accepted.\n                case ScalarType.DOUBLE:\n                case ScalarType.FLOAT:\n                    if (json === null)\n                        return .0;\n                    if (json === \"NaN\")\n                        return Number.NaN;\n                    if (json === \"Infinity\")\n                        return Number.POSITIVE_INFINITY;\n                    if (json === \"-Infinity\")\n                        return Number.NEGATIVE_INFINITY;\n                    if (json === \"\") {\n                        e = \"empty string\";\n                        break;\n                    }\n                    if (typeof json == \"string\" && json.trim().length !== json.length) {\n                        e = \"extra whitespace\";\n                        break;\n                    }\n                    if (typeof json != \"string\" && typeof json != \"number\") {\n                        break;\n                    }\n                    let float = Number(json);\n                    if (Number.isNaN(float)) {\n                        e = \"not a number\";\n                        break;\n                    }\n                    if (!Number.isFinite(float)) {\n                        // infinity and -infinity are handled by string representation above, so this is an error\n                        e = \"too large or small\";\n                        break;\n                    }\n                    if (type == ScalarType.FLOAT)\n                        assertFloat32(float);\n                    return float;\n                // int32, fixed32, uint32: JSON value will be a decimal number. Either numbers or strings are accepted.\n                case ScalarType.INT32:\n                case ScalarType.FIXED32:\n                case ScalarType.SFIXED32:\n                case ScalarType.SINT32:\n                case ScalarType.UINT32:\n                    if (json === null)\n                        return 0;\n                    let int32;\n                    if (typeof json == \"number\")\n                        int32 = json;\n                    else if (json === \"\")\n                        e = \"empty string\";\n                    else if (typeof json == \"string\") {\n                        if (json.trim().length !== json.length)\n                            e = \"extra whitespace\";\n                        else\n                            int32 = Number(json);\n                    }\n                    if (int32 === undefined)\n                        break;\n                    if (type == ScalarType.UINT32)\n                        assertUInt32(int32);\n                    else\n                        assertInt32(int32);\n                    return int32;\n                // int64, fixed64, uint64: JSON value will be a decimal string. Either numbers or strings are accepted.\n                case ScalarType.INT64:\n                case ScalarType.SFIXED64:\n                case ScalarType.SINT64:\n                    if (json === null)\n                        return reflectionLongConvert(PbLong.ZERO, longType);\n                    if (typeof json != \"number\" && typeof json != \"string\")\n                        break;\n                    return reflectionLongConvert(PbLong.from(json), longType);\n                case ScalarType.FIXED64:\n                case ScalarType.UINT64:\n                    if (json === null)\n                        return reflectionLongConvert(PbULong.ZERO, longType);\n                    if (typeof json != \"number\" && typeof json != \"string\")\n                        break;\n                    return reflectionLongConvert(PbULong.from(json), longType);\n                // bool:\n                case ScalarType.BOOL:\n                    if (json === null)\n                        return false;\n                    if (typeof json !== \"boolean\")\n                        break;\n                    return json;\n                // string:\n                case ScalarType.STRING:\n                    if (json === null)\n                        return \"\";\n                    if (typeof json !== \"string\") {\n                        e = \"extra whitespace\";\n                        break;\n                    }\n                    try {\n                        encodeURIComponent(json);\n                    }\n                    catch (e) {\n                        e = \"invalid UTF8\";\n                        break;\n                    }\n                    return json;\n                // bytes: JSON value will be the data encoded as a string using standard base64 encoding with paddings.\n                // Either standard or URL-safe base64 encoding with/without paddings are accepted.\n                case ScalarType.BYTES:\n                    if (json === null || json === \"\")\n                        return new Uint8Array(0);\n                    if (typeof json !== 'string')\n                        break;\n                    return base64decode(json);\n            }\n        }\n        catch (error) {\n            e = error.message;\n        }\n        this.assert(false, fieldName + (e ? \" - \" + e : \"\"), json);\n    }\n}\n","import { base64encode } from \"./base64\";\nimport { PbLong, PbULong } from \"./pb-long\";\nimport { ScalarType } from \"./reflection-info\";\nimport { assert, assertFloat32, assertInt32, assertUInt32 } from \"./assert\";\n/**\n * Writes proto3 messages in canonical JSON format using reflection\n * information.\n *\n * https://developers.google.com/protocol-buffers/docs/proto3#json\n */\nexport class ReflectionJsonWriter {\n    constructor(info) {\n        var _a;\n        this.fields = (_a = info.fields) !== null && _a !== void 0 ? _a : [];\n    }\n    /**\n     * Converts the message to a JSON object, based on the field descriptors.\n     */\n    write(message, options) {\n        const json = {}, source = message;\n        for (const field of this.fields) {\n            // field is not part of a oneof, simply write as is\n            if (!field.oneof) {\n                let jsonValue = this.field(field, source[field.localName], options);\n                if (jsonValue !== undefined)\n                    json[options.useProtoFieldName ? field.name : field.jsonName] = jsonValue;\n                continue;\n            }\n            // field is part of a oneof\n            const group = source[field.oneof];\n            if (group.oneofKind !== field.localName)\n                continue; // not selected, skip\n            const opt = field.kind == 'scalar' || field.kind == 'enum'\n                ? Object.assign(Object.assign({}, options), { emitDefaultValues: true }) : options;\n            let jsonValue = this.field(field, group[field.localName], opt);\n            assert(jsonValue !== undefined);\n            json[options.useProtoFieldName ? field.name : field.jsonName] = jsonValue;\n        }\n        return json;\n    }\n    field(field, value, options) {\n        let jsonValue = undefined;\n        if (field.kind == 'map') {\n            assert(typeof value == \"object\" && value !== null);\n            const jsonObj = {};\n            switch (field.V.kind) {\n                case \"scalar\":\n                    for (const [entryKey, entryValue] of Object.entries(value)) {\n                        const val = this.scalar(field.V.T, entryValue, field.name, false, true);\n                        assert(val !== undefined);\n                        jsonObj[entryKey.toString()] = val; // JSON standard allows only (double quoted) string as property key\n                    }\n                    break;\n                case \"message\":\n                    const messageType = field.V.T();\n                    for (const [entryKey, entryValue] of Object.entries(value)) {\n                        const val = this.message(messageType, entryValue, field.name, options);\n                        assert(val !== undefined);\n                        jsonObj[entryKey.toString()] = val; // JSON standard allows only (double quoted) string as property key\n                    }\n                    break;\n                case \"enum\":\n                    const enumInfo = field.V.T();\n                    for (const [entryKey, entryValue] of Object.entries(value)) {\n                        assert(entryValue === undefined || typeof entryValue == 'number');\n                        const val = this.enum(enumInfo, entryValue, field.name, false, true, options.enumAsInteger);\n                        assert(val !== undefined);\n                        jsonObj[entryKey.toString()] = val; // JSON standard allows only (double quoted) string as property key\n                    }\n                    break;\n            }\n            if (options.emitDefaultValues || Object.keys(jsonObj).length > 0)\n                jsonValue = jsonObj;\n        }\n        else if (field.repeat) {\n            assert(Array.isArray(value));\n            const jsonArr = [];\n            switch (field.kind) {\n                case \"scalar\":\n                    for (let i = 0; i < value.length; i++) {\n                        const val = this.scalar(field.T, value[i], field.name, field.opt, true);\n                        assert(val !== undefined);\n                        jsonArr.push(val);\n                    }\n                    break;\n                case \"enum\":\n                    const enumInfo = field.T();\n                    for (let i = 0; i < value.length; i++) {\n                        assert(value[i] === undefined || typeof value[i] == 'number');\n                        const val = this.enum(enumInfo, value[i], field.name, field.opt, true, options.enumAsInteger);\n                        assert(val !== undefined);\n                        jsonArr.push(val);\n                    }\n                    break;\n                case \"message\":\n                    const messageType = field.T();\n                    for (let i = 0; i < value.length; i++) {\n                        const val = this.message(messageType, value[i], field.name, options);\n                        assert(val !== undefined);\n                        jsonArr.push(val);\n                    }\n                    break;\n            }\n            // add converted array to json output\n            if (options.emitDefaultValues || jsonArr.length > 0 || options.emitDefaultValues)\n                jsonValue = jsonArr;\n        }\n        else {\n            switch (field.kind) {\n                case \"scalar\":\n                    jsonValue = this.scalar(field.T, value, field.name, field.opt, options.emitDefaultValues);\n                    break;\n                case \"enum\":\n                    jsonValue = this.enum(field.T(), value, field.name, field.opt, options.emitDefaultValues, options.enumAsInteger);\n                    break;\n                case \"message\":\n                    jsonValue = this.message(field.T(), value, field.name, options);\n                    break;\n            }\n        }\n        return jsonValue;\n    }\n    /**\n     * Returns `null` as the default for google.protobuf.NullValue.\n     */\n    enum(type, value, fieldName, optional, emitDefaultValues, enumAsInteger) {\n        if (type[0] == 'google.protobuf.NullValue')\n            return !emitDefaultValues && !optional ? undefined : null;\n        if (value === undefined) {\n            assert(optional);\n            return undefined;\n        }\n        if (value === 0 && !emitDefaultValues && !optional)\n            // we require 0 to be default value for all enums\n            return undefined;\n        assert(typeof value == 'number');\n        assert(Number.isInteger(value));\n        if (enumAsInteger || !type[1].hasOwnProperty(value))\n            // if we don't now the enum value, just return the number\n            return value;\n        if (type[2])\n            // restore the dropped prefix\n            return type[2] + type[1][value];\n        return type[1][value];\n    }\n    message(type, value, fieldName, options) {\n        if (value === undefined)\n            return options.emitDefaultValues ? null : undefined;\n        return type.internalJsonWrite(value, options);\n    }\n    scalar(type, value, fieldName, optional, emitDefaultValues) {\n        if (value === undefined) {\n            assert(optional);\n            return undefined;\n        }\n        const ed = emitDefaultValues || optional;\n        // noinspection FallThroughInSwitchStatementJS\n        switch (type) {\n            // int32, fixed32, uint32: JSON value will be a decimal number. Either numbers or strings are accepted.\n            case ScalarType.INT32:\n            case ScalarType.SFIXED32:\n            case ScalarType.SINT32:\n                if (value === 0)\n                    return ed ? 0 : undefined;\n                assertInt32(value);\n                return value;\n            case ScalarType.FIXED32:\n            case ScalarType.UINT32:\n                if (value === 0)\n                    return ed ? 0 : undefined;\n                assertUInt32(value);\n                return value;\n            // float, double: JSON value will be a number or one of the special string values \"NaN\", \"Infinity\", and \"-Infinity\".\n            // Either numbers or strings are accepted. Exponent notation is also accepted.\n            case ScalarType.FLOAT:\n                assertFloat32(value);\n            case ScalarType.DOUBLE:\n                if (value === 0)\n                    return ed ? 0 : undefined;\n                assert(typeof value == 'number');\n                if (Number.isNaN(value))\n                    return 'NaN';\n                if (value === Number.POSITIVE_INFINITY)\n                    return 'Infinity';\n                if (value === Number.NEGATIVE_INFINITY)\n                    return '-Infinity';\n                return value;\n            // string:\n            case ScalarType.STRING:\n                if (value === \"\")\n                    return ed ? '' : undefined;\n                assert(typeof value == 'string');\n                return value;\n            // bool:\n            case ScalarType.BOOL:\n                if (value === false)\n                    return ed ? false : undefined;\n                assert(typeof value == 'boolean');\n                return value;\n            // JSON value will be a decimal string. Either numbers or strings are accepted.\n            case ScalarType.UINT64:\n            case ScalarType.FIXED64:\n                assert(typeof value == 'number' || typeof value == 'string' || typeof value == 'bigint');\n                let ulong = PbULong.from(value);\n                if (ulong.isZero() && !ed)\n                    return undefined;\n                return ulong.toString();\n            // JSON value will be a decimal string. Either numbers or strings are accepted.\n            case ScalarType.INT64:\n            case ScalarType.SFIXED64:\n            case ScalarType.SINT64:\n                assert(typeof value == 'number' || typeof value == 'string' || typeof value == 'bigint');\n                let long = PbLong.from(value);\n                if (long.isZero() && !ed)\n                    return undefined;\n                return long.toString();\n            // bytes: JSON value will be the data encoded as a string using standard base64 encoding with paddings.\n            // Either standard or URL-safe base64 encoding with/without paddings are accepted.\n            case ScalarType.BYTES:\n                assert(value instanceof Uint8Array);\n                if (!value.byteLength)\n                    return ed ? \"\" : undefined;\n                return base64encode(value);\n        }\n    }\n}\n","/**\n * This handler implements the default behaviour for unknown fields.\n * When reading data, unknown fields are stored on the message, in a\n * symbol property.\n * When writing data, the symbol property is queried and unknown fields\n * are serialized into the output again.\n */\nexport var UnknownFieldHandler;\n(function (UnknownFieldHandler) {\n    /**\n     * The symbol used to store unknown fields for a message.\n     * The property must conform to `UnknownFieldContainer`.\n     */\n    UnknownFieldHandler.symbol = Symbol.for(\"protobuf-ts/unknown\");\n    /**\n     * Store an unknown field during binary read directly on the message.\n     * This method is compatible with `BinaryReadOptions.readUnknownField`.\n     */\n    UnknownFieldHandler.onRead = (typeName, message, fieldNo, wireType, data) => {\n        let container = is(message) ? message[UnknownFieldHandler.symbol] : message[UnknownFieldHandler.symbol] = [];\n        container.push({ no: fieldNo, wireType, data });\n    };\n    /**\n     * Write unknown fields stored for the message to the writer.\n     * This method is compatible with `BinaryWriteOptions.writeUnknownFields`.\n     */\n    UnknownFieldHandler.onWrite = (typeName, message, writer) => {\n        for (let { no, wireType, data } of UnknownFieldHandler.list(message))\n            writer.tag(no, wireType).raw(data);\n    };\n    /**\n     * List unknown fields stored for the message.\n     * Note that there may be multiples fields with the same number.\n     */\n    UnknownFieldHandler.list = (message, fieldNo) => {\n        if (is(message)) {\n            let all = message[UnknownFieldHandler.symbol];\n            return fieldNo ? all.filter(uf => uf.no == fieldNo) : all;\n        }\n        return [];\n    };\n    /**\n     * Returns the last unknown field by field number.\n     */\n    UnknownFieldHandler.last = (message, fieldNo) => UnknownFieldHandler.list(message, fieldNo).slice(-1)[0];\n    const is = (message) => message && Array.isArray(message[UnknownFieldHandler.symbol]);\n})(UnknownFieldHandler || (UnknownFieldHandler = {}));\n/**\n * Merges binary write or read options. Later values override earlier values.\n */\nexport function mergeBinaryOptions(a, b) {\n    return Object.assign(Object.assign({}, a), b);\n}\n/**\n * Protobuf binary format wire types.\n *\n * A wire type provides just enough information to find the length of the\n * following value.\n *\n * See https://developers.google.com/protocol-buffers/docs/encoding#structure\n */\nexport var WireType;\n(function (WireType) {\n    /**\n     * Used for int32, int64, uint32, uint64, sint32, sint64, bool, enum\n     */\n    WireType[WireType[\"Varint\"] = 0] = \"Varint\";\n    /**\n     * Used for fixed64, sfixed64, double.\n     * Always 8 bytes with little-endian byte order.\n     */\n    WireType[WireType[\"Bit64\"] = 1] = \"Bit64\";\n    /**\n     * Used for string, bytes, embedded messages, packed repeated fields\n     *\n     * Only repeated numeric types (types which use the varint, 32-bit,\n     * or 64-bit wire types) can be packed. In proto3, such fields are\n     * packed by default.\n     */\n    WireType[WireType[\"LengthDelimited\"] = 2] = \"LengthDelimited\";\n    /**\n     * Used for groups\n     * @deprecated\n     */\n    WireType[WireType[\"StartGroup\"] = 3] = \"StartGroup\";\n    /**\n     * Used for groups\n     * @deprecated\n     */\n    WireType[WireType[\"EndGroup\"] = 4] = \"EndGroup\";\n    /**\n     * Used for fixed32, sfixed32, float.\n     * Always 4 bytes with little-endian byte order.\n     */\n    WireType[WireType[\"Bit32\"] = 5] = \"Bit32\";\n})(WireType || (WireType = {}));\n","import { LongType, ScalarType } from \"./reflection-info\";\nimport { reflectionLongConvert } from \"./reflection-long-convert\";\nimport { PbLong, PbULong } from \"./pb-long\";\n/**\n * Creates the default value for a scalar type.\n */\nexport function reflectionScalarDefault(type, longType = LongType.STRING) {\n    switch (type) {\n        case ScalarType.BOOL:\n            return false;\n        case ScalarType.UINT64:\n        case ScalarType.FIXED64:\n            return reflectionLongConvert(PbULong.ZERO, longType);\n        case ScalarType.INT64:\n        case ScalarType.SFIXED64:\n        case ScalarType.SINT64:\n            return reflectionLongConvert(PbLong.ZERO, longType);\n        case ScalarType.DOUBLE:\n        case ScalarType.FLOAT:\n            return 0.0;\n        case ScalarType.BYTES:\n            return new Uint8Array(0);\n        case ScalarType.STRING:\n            return \"\";\n        default:\n            // case ScalarType.INT32:\n            // case ScalarType.UINT32:\n            // case ScalarType.SINT32:\n            // case ScalarType.FIXED32:\n            // case ScalarType.SFIXED32:\n            return 0;\n    }\n}\n","import { UnknownFieldHandler, WireType } from \"./binary-format-contract\";\nimport { LongType, ScalarType } from \"./reflection-info\";\nimport { reflectionLongConvert } from \"./reflection-long-convert\";\nimport { reflectionScalarDefault } from \"./reflection-scalar-default\";\n/**\n * Reads proto3 messages in binary format using reflection information.\n *\n * https://developers.google.com/protocol-buffers/docs/encoding\n */\nexport class ReflectionBinaryReader {\n    constructor(info) {\n        this.info = info;\n    }\n    prepare() {\n        var _a;\n        if (!this.fieldNoToField) {\n            const fieldsInput = (_a = this.info.fields) !== null && _a !== void 0 ? _a : [];\n            this.fieldNoToField = new Map(fieldsInput.map(field => [field.no, field]));\n        }\n    }\n    /**\n     * Reads a message from binary format into the target message.\n     *\n     * Repeated fields are appended. Map entries are added, overwriting\n     * existing keys.\n     *\n     * If a message field is already present, it will be merged with the\n     * new data.\n     */\n    read(reader, message, options, length) {\n        this.prepare();\n        const end = length === undefined ? reader.len : reader.pos + length;\n        while (reader.pos < end) {\n            // read the tag and find the field\n            const [fieldNo, wireType] = reader.tag(), field = this.fieldNoToField.get(fieldNo);\n            if (!field) {\n                let u = options.readUnknownField;\n                if (u == \"throw\")\n                    throw new Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.info.typeName}`);\n                let d = reader.skip(wireType);\n                if (u !== false)\n                    (u === true ? UnknownFieldHandler.onRead : u)(this.info.typeName, message, fieldNo, wireType, d);\n                continue;\n            }\n            // target object for the field we are reading\n            let target = message, repeated = field.repeat, localName = field.localName;\n            // if field is member of oneof ADT, use ADT as target\n            if (field.oneof) {\n                target = target[field.oneof];\n                // if other oneof member selected, set new ADT\n                if (target.oneofKind !== localName)\n                    target = message[field.oneof] = {\n                        oneofKind: localName\n                    };\n            }\n            // we have handled oneof above, we just have read the value into `target[localName]`\n            switch (field.kind) {\n                case \"scalar\":\n                case \"enum\":\n                    let T = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n                    let L = field.kind == \"scalar\" ? field.L : undefined;\n                    if (repeated) {\n                        let arr = target[localName]; // safe to assume presence of array, oneof cannot contain repeated values\n                        if (wireType == WireType.LengthDelimited && T != ScalarType.STRING && T != ScalarType.BYTES) {\n                            let e = reader.uint32() + reader.pos;\n                            while (reader.pos < e)\n                                arr.push(this.scalar(reader, T, L));\n                        }\n                        else\n                            arr.push(this.scalar(reader, T, L));\n                    }\n                    else\n                        target[localName] = this.scalar(reader, T, L);\n                    break;\n                case \"message\":\n                    if (repeated) {\n                        let arr = target[localName]; // safe to assume presence of array, oneof cannot contain repeated values\n                        let msg = field.T().internalBinaryRead(reader, reader.uint32(), options);\n                        arr.push(msg);\n                    }\n                    else\n                        target[localName] = field.T().internalBinaryRead(reader, reader.uint32(), options, target[localName]);\n                    break;\n                case \"map\":\n                    let [mapKey, mapVal] = this.mapEntry(field, reader, options);\n                    // safe to assume presence of map object, oneof cannot contain repeated values\n                    target[localName][mapKey] = mapVal;\n                    break;\n            }\n        }\n    }\n    /**\n     * Read a map field, expecting key field = 1, value field = 2\n     */\n    mapEntry(field, reader, options) {\n        let length = reader.uint32();\n        let end = reader.pos + length;\n        let key = undefined; // javascript only allows number or string for object properties\n        let val = undefined;\n        while (reader.pos < end) {\n            let [fieldNo, wireType] = reader.tag();\n            switch (fieldNo) {\n                case 1:\n                    if (field.K == ScalarType.BOOL)\n                        key = reader.bool().toString();\n                    else\n                        // long types are read as string, number types are okay as number\n                        key = this.scalar(reader, field.K, LongType.STRING);\n                    break;\n                case 2:\n                    switch (field.V.kind) {\n                        case \"scalar\":\n                            val = this.scalar(reader, field.V.T, field.V.L);\n                            break;\n                        case \"enum\":\n                            val = reader.int32();\n                            break;\n                        case \"message\":\n                            val = field.V.T().internalBinaryRead(reader, reader.uint32(), options);\n                            break;\n                    }\n                    break;\n                default:\n                    throw new Error(`Unknown field ${fieldNo} (wire type ${wireType}) in map entry for ${this.info.typeName}#${field.name}`);\n            }\n        }\n        if (key === undefined) {\n            let keyRaw = reflectionScalarDefault(field.K);\n            key = field.K == ScalarType.BOOL ? keyRaw.toString() : keyRaw;\n        }\n        if (val === undefined)\n            switch (field.V.kind) {\n                case \"scalar\":\n                    val = reflectionScalarDefault(field.V.T, field.V.L);\n                    break;\n                case \"enum\":\n                    val = 0;\n                    break;\n                case \"message\":\n                    val = field.V.T().create();\n                    break;\n            }\n        return [key, val];\n    }\n    scalar(reader, type, longType) {\n        switch (type) {\n            case ScalarType.INT32:\n                return reader.int32();\n            case ScalarType.STRING:\n                return reader.string();\n            case ScalarType.BOOL:\n                return reader.bool();\n            case ScalarType.DOUBLE:\n                return reader.double();\n            case ScalarType.FLOAT:\n                return reader.float();\n            case ScalarType.INT64:\n                return reflectionLongConvert(reader.int64(), longType);\n            case ScalarType.UINT64:\n                return reflectionLongConvert(reader.uint64(), longType);\n            case ScalarType.FIXED64:\n                return reflectionLongConvert(reader.fixed64(), longType);\n            case ScalarType.FIXED32:\n                return reader.fixed32();\n            case ScalarType.BYTES:\n                return reader.bytes();\n            case ScalarType.UINT32:\n                return reader.uint32();\n            case ScalarType.SFIXED32:\n                return reader.sfixed32();\n            case ScalarType.SFIXED64:\n                return reflectionLongConvert(reader.sfixed64(), longType);\n            case ScalarType.SINT32:\n                return reader.sint32();\n            case ScalarType.SINT64:\n                return reflectionLongConvert(reader.sint64(), longType);\n        }\n    }\n}\n","import { UnknownFieldHandler, WireType } from \"./binary-format-contract\";\nimport { RepeatType, ScalarType } from \"./reflection-info\";\nimport { assert } from \"./assert\";\nimport { PbLong, PbULong } from \"./pb-long\";\n/**\n * Writes proto3 messages in binary format using reflection information.\n *\n * https://developers.google.com/protocol-buffers/docs/encoding\n */\nexport class ReflectionBinaryWriter {\n    constructor(info) {\n        this.info = info;\n    }\n    prepare() {\n        if (!this.fields) {\n            const fieldsInput = this.info.fields ? this.info.fields.concat() : [];\n            this.fields = fieldsInput.sort((a, b) => a.no - b.no);\n        }\n    }\n    /**\n     * Writes the message to binary format.\n     */\n    write(message, writer, options) {\n        this.prepare();\n        for (const field of this.fields) {\n            let value, // this will be our field value, whether it is member of a oneof or not\n            emitDefault, // whether we emit the default value (only true for oneof members)\n            repeated = field.repeat, localName = field.localName;\n            // handle oneof ADT\n            if (field.oneof) {\n                const group = message[field.oneof];\n                if (group.oneofKind !== localName)\n                    continue; // if field is not selected, skip\n                value = group[localName];\n                emitDefault = true;\n            }\n            else {\n                value = message[localName];\n                emitDefault = false;\n            }\n            // we have handled oneof above. we just have to honor `emitDefault`.\n            switch (field.kind) {\n                case \"scalar\":\n                case \"enum\":\n                    let T = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n                    if (repeated) {\n                        assert(Array.isArray(value));\n                        if (repeated == RepeatType.PACKED)\n                            this.packed(writer, T, field.no, value);\n                        else\n                            for (const item of value)\n                                this.scalar(writer, T, field.no, item, true);\n                    }\n                    else if (value === undefined)\n                        assert(field.opt);\n                    else\n                        this.scalar(writer, T, field.no, value, emitDefault || field.opt);\n                    break;\n                case \"message\":\n                    if (repeated) {\n                        assert(Array.isArray(value));\n                        for (const item of value)\n                            this.message(writer, options, field.T(), field.no, item);\n                    }\n                    else {\n                        this.message(writer, options, field.T(), field.no, value);\n                    }\n                    break;\n                case \"map\":\n                    assert(typeof value == 'object' && value !== null);\n                    for (const [key, val] of Object.entries(value))\n                        this.mapEntry(writer, options, field, key, val);\n                    break;\n            }\n        }\n        let u = options.writeUnknownFields;\n        if (u !== false)\n            (u === true ? UnknownFieldHandler.onWrite : u)(this.info.typeName, message, writer);\n    }\n    mapEntry(writer, options, field, key, value) {\n        writer.tag(field.no, WireType.LengthDelimited);\n        writer.fork();\n        // javascript only allows number or string for object properties\n        // we convert from our representation to the protobuf type\n        let keyValue = key;\n        switch (field.K) {\n            case ScalarType.INT32:\n            case ScalarType.FIXED32:\n            case ScalarType.UINT32:\n            case ScalarType.SFIXED32:\n            case ScalarType.SINT32:\n                keyValue = Number.parseInt(key);\n                break;\n            case ScalarType.BOOL:\n                assert(key == 'true' || key == 'false');\n                keyValue = key == 'true';\n                break;\n        }\n        // write key, expecting key field number = 1\n        this.scalar(writer, field.K, 1, keyValue, true);\n        // write value, expecting value field number = 2\n        switch (field.V.kind) {\n            case 'scalar':\n                this.scalar(writer, field.V.T, 2, value, true);\n                break;\n            case 'enum':\n                this.scalar(writer, ScalarType.INT32, 2, value, true);\n                break;\n            case 'message':\n                this.message(writer, options, field.V.T(), 2, value);\n                break;\n        }\n        writer.join();\n    }\n    message(writer, options, handler, fieldNo, value) {\n        if (value === undefined)\n            return;\n        handler.internalBinaryWrite(value, writer.tag(fieldNo, WireType.LengthDelimited).fork(), options);\n        writer.join();\n    }\n    /**\n     * Write a single scalar value.\n     */\n    scalar(writer, type, fieldNo, value, emitDefault) {\n        let [wireType, method, isDefault] = this.scalarInfo(type, value);\n        if (!isDefault || emitDefault) {\n            writer.tag(fieldNo, wireType);\n            writer[method](value);\n        }\n    }\n    /**\n     * Write an array of scalar values in packed format.\n     */\n    packed(writer, type, fieldNo, value) {\n        if (!value.length)\n            return;\n        assert(type !== ScalarType.BYTES && type !== ScalarType.STRING);\n        // write tag\n        writer.tag(fieldNo, WireType.LengthDelimited);\n        // begin length-delimited\n        writer.fork();\n        // write values without tags\n        let [, method,] = this.scalarInfo(type);\n        for (let i = 0; i < value.length; i++)\n            writer[method](value[i]);\n        // end length delimited\n        writer.join();\n    }\n    /**\n     * Get information for writing a scalar value.\n     *\n     * Returns tuple:\n     * [0]: appropriate WireType\n     * [1]: name of the appropriate method of IBinaryWriter\n     * [2]: whether the given value is a default value\n     *\n     * If argument `value` is omitted, [2] is always false.\n     */\n    scalarInfo(type, value) {\n        let t = WireType.Varint;\n        let m;\n        let i = value === undefined;\n        let d = value === 0;\n        switch (type) {\n            case ScalarType.INT32:\n                m = \"int32\";\n                break;\n            case ScalarType.STRING:\n                d = i || !value.length;\n                t = WireType.LengthDelimited;\n                m = \"string\";\n                break;\n            case ScalarType.BOOL:\n                d = value === false;\n                m = \"bool\";\n                break;\n            case ScalarType.UINT32:\n                m = \"uint32\";\n                break;\n            case ScalarType.DOUBLE:\n                t = WireType.Bit64;\n                m = \"double\";\n                break;\n            case ScalarType.FLOAT:\n                t = WireType.Bit32;\n                m = \"float\";\n                break;\n            case ScalarType.INT64:\n                d = i || PbLong.from(value).isZero();\n                m = \"int64\";\n                break;\n            case ScalarType.UINT64:\n                d = i || PbULong.from(value).isZero();\n                m = \"uint64\";\n                break;\n            case ScalarType.FIXED64:\n                d = i || PbULong.from(value).isZero();\n                t = WireType.Bit64;\n                m = \"fixed64\";\n                break;\n            case ScalarType.BYTES:\n                d = i || !value.byteLength;\n                t = WireType.LengthDelimited;\n                m = \"bytes\";\n                break;\n            case ScalarType.FIXED32:\n                t = WireType.Bit32;\n                m = \"fixed32\";\n                break;\n            case ScalarType.SFIXED32:\n                t = WireType.Bit32;\n                m = \"sfixed32\";\n                break;\n            case ScalarType.SFIXED64:\n                d = i || PbLong.from(value).isZero();\n                t = WireType.Bit64;\n                m = \"sfixed64\";\n                break;\n            case ScalarType.SINT32:\n                m = \"sint32\";\n                break;\n            case ScalarType.SINT64:\n                d = i || PbLong.from(value).isZero();\n                m = \"sint64\";\n                break;\n        }\n        return [t, m, i || d];\n    }\n}\n","/**\n * Copy partial data into the target message.\n *\n * If a singular scalar or enum field is present in the source, it\n * replaces the field in the target.\n *\n * If a singular message field is present in the source, it is merged\n * with the target field by calling mergePartial() of the responsible\n * message type.\n *\n * If a repeated field is present in the source, its values replace\n * all values in the target array, removing extraneous values.\n * Repeated message fields are copied, not merged.\n *\n * If a map field is present in the source, entries are added to the\n * target map, replacing entries with the same key. Entries that only\n * exist in the target remain. Entries with message values are copied,\n * not merged.\n *\n * Note that this function differs from protobuf merge semantics,\n * which appends repeated fields.\n */\nexport function reflectionMergePartial(info, target, source) {\n    let fieldValue, // the field value we are working with\n    input = source, output; // where we want our field value to go\n    for (let field of info.fields) {\n        let name = field.localName;\n        if (field.oneof) {\n            const group = input[field.oneof]; // this is the oneof`s group in the source\n            if ((group === null || group === void 0 ? void 0 : group.oneofKind) == undefined) { // the user is free to omit\n                continue; // we skip this field, and all other members too\n            }\n            fieldValue = group[name]; // our value comes from the the oneof group of the source\n            output = target[field.oneof]; // and our output is the oneof group of the target\n            output.oneofKind = group.oneofKind; // always update discriminator\n            if (fieldValue == undefined) {\n                delete output[name]; // remove any existing value\n                continue; // skip further work on field\n            }\n        }\n        else {\n            fieldValue = input[name]; // we are using the source directly\n            output = target; // we want our field value to go directly into the target\n            if (fieldValue == undefined) {\n                continue; // skip further work on field, existing value is used as is\n            }\n        }\n        if (field.repeat)\n            output[name].length = fieldValue.length; // resize target array to match source array\n        // now we just work with `fieldValue` and `output` to merge the value\n        switch (field.kind) {\n            case \"scalar\":\n            case \"enum\":\n                if (field.repeat)\n                    for (let i = 0; i < fieldValue.length; i++)\n                        output[name][i] = fieldValue[i]; // not a reference type\n                else\n                    output[name] = fieldValue; // not a reference type\n                break;\n            case \"message\":\n                let T = field.T();\n                if (field.repeat)\n                    for (let i = 0; i < fieldValue.length; i++)\n                        output[name][i] = T.create(fieldValue[i]);\n                else if (output[name] === undefined)\n                    output[name] = T.create(fieldValue); // nothing to merge with\n                else\n                    T.mergePartial(output[name], fieldValue);\n                break;\n            case \"map\":\n                // Map and repeated fields are simply overwritten, not appended or merged\n                switch (field.V.kind) {\n                    case \"scalar\":\n                    case \"enum\":\n                        Object.assign(output[name], fieldValue); // elements are not reference types\n                        break;\n                    case \"message\":\n                        let T = field.V.T();\n                        for (let k of Object.keys(fieldValue))\n                            output[name][k] = T.create(fieldValue[k]);\n                        break;\n                }\n                break;\n        }\n    }\n}\n","const defaultsWrite = {\n    emitDefaultValues: false,\n    enumAsInteger: false,\n    useProtoFieldName: false,\n    prettySpaces: 0,\n}, defaultsRead = {\n    ignoreUnknownFields: false,\n};\n/**\n * Make options for reading JSON data from partial options.\n */\nexport function jsonReadOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsRead), options) : defaultsRead;\n}\n/**\n * Make options for writing JSON data from partial options.\n */\nexport function jsonWriteOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsWrite), options) : defaultsWrite;\n}\n/**\n * Merges JSON write or read options. Later values override earlier values. Type registries are merged.\n */\nexport function mergeJsonOptions(a, b) {\n    var _a, _b;\n    let c = Object.assign(Object.assign({}, a), b);\n    c.typeRegistry = [...((_a = a === null || a === void 0 ? void 0 : a.typeRegistry) !== null && _a !== void 0 ? _a : []), ...((_b = b === null || b === void 0 ? void 0 : b.typeRegistry) !== null && _b !== void 0 ? _b : [])];\n    return c;\n}\n","import { ScalarType } from \"./reflection-info\";\n/**\n * Determines whether two message of the same type have the same field values.\n * Checks for deep equality, traversing repeated fields, oneof groups, maps\n * and messages recursively.\n * Will also return true if both messages are `undefined`.\n */\nexport function reflectionEquals(info, a, b) {\n    if (a === b)\n        return true;\n    if (!a || !b)\n        return false;\n    for (let field of info.fields) {\n        let localName = field.localName;\n        let val_a = field.oneof ? a[field.oneof][localName] : a[localName];\n        let val_b = field.oneof ? b[field.oneof][localName] : b[localName];\n        switch (field.kind) {\n            case \"enum\":\n            case \"scalar\":\n                let t = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n                if (!(field.repeat\n                    ? repeatedPrimitiveEq(t, val_a, val_b)\n                    : primitiveEq(t, val_a, val_b)))\n                    return false;\n                break;\n            case \"map\":\n                if (!(field.V.kind == \"message\"\n                    ? repeatedMsgEq(field.V.T(), objectValues(val_a), objectValues(val_b))\n                    : repeatedPrimitiveEq(field.V.kind == \"enum\" ? ScalarType.INT32 : field.V.T, objectValues(val_a), objectValues(val_b))))\n                    return false;\n                break;\n            case \"message\":\n                let T = field.T();\n                if (!(field.repeat\n                    ? repeatedMsgEq(T, val_a, val_b)\n                    : T.equals(val_a, val_b)))\n                    return false;\n                break;\n        }\n    }\n    return true;\n}\nconst objectValues = Object.values;\nfunction primitiveEq(type, a, b) {\n    if (a === b)\n        return true;\n    if (type !== ScalarType.BYTES)\n        return false;\n    let ba = a;\n    let bb = b;\n    if (ba.length !== bb.length)\n        return false;\n    for (let i = 0; i < ba.length; i++)\n        if (ba[i] != bb[i])\n            return false;\n    return true;\n}\nfunction repeatedPrimitiveEq(type, a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!primitiveEq(type, a[i], b[i]))\n            return false;\n    return true;\n}\nfunction repeatedMsgEq(type, a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!type.equals(a[i], b[i]))\n            return false;\n    return true;\n}\n","import { PbLong, PbULong } from \"./pb-long\";\nimport { varint32write, varint64write } from \"./goog-varint\";\nimport { assertFloat32, assertInt32, assertUInt32 } from \"./assert\";\nconst defaultsWrite = {\n    writeUnknownFields: true,\n    writerFactory: () => new BinaryWriter(),\n};\n/**\n * Make options for writing binary data form partial options.\n */\nexport function binaryWriteOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsWrite), options) : defaultsWrite;\n}\nexport class BinaryWriter {\n    constructor(textEncoder) {\n        /**\n         * Previous fork states.\n         */\n        this.stack = [];\n        this.textEncoder = textEncoder !== null && textEncoder !== void 0 ? textEncoder : new TextEncoder();\n        this.chunks = [];\n        this.buf = [];\n    }\n    /**\n     * Return all bytes written and reset this writer.\n     */\n    finish() {\n        this.chunks.push(new Uint8Array(this.buf)); // flush the buffer\n        let len = 0;\n        for (let i = 0; i < this.chunks.length; i++)\n            len += this.chunks[i].length;\n        let bytes = new Uint8Array(len);\n        let offset = 0;\n        for (let i = 0; i < this.chunks.length; i++) {\n            bytes.set(this.chunks[i], offset);\n            offset += this.chunks[i].length;\n        }\n        this.chunks = [];\n        return bytes;\n    }\n    /**\n     * Start a new fork for length-delimited data like a message\n     * or a packed repeated field.\n     *\n     * Must be joined later with `join()`.\n     */\n    fork() {\n        this.stack.push({ chunks: this.chunks, buf: this.buf });\n        this.chunks = [];\n        this.buf = [];\n        return this;\n    }\n    /**\n     * Join the last fork. Write its length and bytes, then\n     * return to the previous state.\n     */\n    join() {\n        // get chunk of fork\n        let chunk = this.finish();\n        // restore previous state\n        let prev = this.stack.pop();\n        if (!prev)\n            throw new Error('invalid state, fork stack empty');\n        this.chunks = prev.chunks;\n        this.buf = prev.buf;\n        // write length of chunk as varint\n        this.uint32(chunk.byteLength);\n        return this.raw(chunk);\n    }\n    /**\n     * Writes a tag (field number and wire type).\n     *\n     * Equivalent to `uint32( (fieldNo << 3 | type) >>> 0 )`.\n     *\n     * Generated code should compute the tag ahead of time and call `uint32()`.\n     */\n    tag(fieldNo, type) {\n        return this.uint32((fieldNo << 3 | type) >>> 0);\n    }\n    /**\n     * Write a chunk of raw bytes.\n     */\n    raw(chunk) {\n        if (this.buf.length) {\n            this.chunks.push(new Uint8Array(this.buf));\n            this.buf = [];\n        }\n        this.chunks.push(chunk);\n        return this;\n    }\n    /**\n     * Write a `uint32` value, an unsigned 32 bit varint.\n     */\n    uint32(value) {\n        assertUInt32(value);\n        // write value as varint 32, inlined for speed\n        while (value > 0x7f) {\n            this.buf.push((value & 0x7f) | 0x80);\n            value = value >>> 7;\n        }\n        this.buf.push(value);\n        return this;\n    }\n    /**\n     * Write a `int32` value, a signed 32 bit varint.\n     */\n    int32(value) {\n        assertInt32(value);\n        varint32write(value, this.buf);\n        return this;\n    }\n    /**\n     * Write a `bool` value, a variant.\n     */\n    bool(value) {\n        this.buf.push(value ? 1 : 0);\n        return this;\n    }\n    /**\n     * Write a `bytes` value, length-delimited arbitrary data.\n     */\n    bytes(value) {\n        this.uint32(value.byteLength); // write length of chunk as varint\n        return this.raw(value);\n    }\n    /**\n     * Write a `string` value, length-delimited data converted to UTF-8 text.\n     */\n    string(value) {\n        let chunk = this.textEncoder.encode(value);\n        this.uint32(chunk.byteLength); // write length of chunk as varint\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `float` value, 32-bit floating point number.\n     */\n    float(value) {\n        assertFloat32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setFloat32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `double` value, a 64-bit floating point number.\n     */\n    double(value) {\n        let chunk = new Uint8Array(8);\n        new DataView(chunk.buffer).setFloat64(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `fixed32` value, an unsigned, fixed-length 32-bit integer.\n     */\n    fixed32(value) {\n        assertUInt32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setUint32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `sfixed32` value, a signed, fixed-length 32-bit integer.\n     */\n    sfixed32(value) {\n        assertInt32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setInt32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `sint32` value, a signed, zigzag-encoded 32-bit varint.\n     */\n    sint32(value) {\n        assertInt32(value);\n        // zigzag encode\n        value = ((value << 1) ^ (value >> 31)) >>> 0;\n        varint32write(value, this.buf);\n        return this;\n    }\n    /**\n     * Write a `fixed64` value, a signed, fixed-length 64-bit integer.\n     */\n    sfixed64(value) {\n        let chunk = new Uint8Array(8);\n        let view = new DataView(chunk.buffer);\n        let long = PbLong.from(value);\n        view.setInt32(0, long.lo, true);\n        view.setInt32(4, long.hi, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `fixed64` value, an unsigned, fixed-length 64 bit integer.\n     */\n    fixed64(value) {\n        let chunk = new Uint8Array(8);\n        let view = new DataView(chunk.buffer);\n        let long = PbULong.from(value);\n        view.setInt32(0, long.lo, true);\n        view.setInt32(4, long.hi, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `int64` value, a signed 64-bit varint.\n     */\n    int64(value) {\n        let long = PbLong.from(value);\n        varint64write(long.lo, long.hi, this.buf);\n        return this;\n    }\n    /**\n     * Write a `sint64` value, a signed, zig-zag-encoded 64-bit varint.\n     */\n    sint64(value) {\n        let long = PbLong.from(value), \n        // zigzag encode\n        sign = long.hi >> 31, lo = (long.lo << 1) ^ sign, hi = ((long.hi << 1) | (long.lo >>> 31)) ^ sign;\n        varint64write(lo, hi, this.buf);\n        return this;\n    }\n    /**\n     * Write a `uint64` value, an unsigned 64-bit varint.\n     */\n    uint64(value) {\n        let long = PbULong.from(value);\n        varint64write(long.lo, long.hi, this.buf);\n        return this;\n    }\n}\n","import { WireType } from \"./binary-format-contract\";\nimport { PbLong, PbULong } from \"./pb-long\";\nimport { varint32read, varint64read } from \"./goog-varint\";\nconst defaultsRead = {\n    readUnknownField: true,\n    readerFactory: bytes => new BinaryReader(bytes),\n};\n/**\n * Make options for reading binary data form partial options.\n */\nexport function binaryReadOptions(options) {\n    return options ? Object.assign(Object.assign({}, defaultsRead), options) : defaultsRead;\n}\nexport class BinaryReader {\n    constructor(buf, textDecoder) {\n        this.varint64 = varint64read; // dirty cast for `this`\n        /**\n         * Read a `uint32` field, an unsigned 32 bit varint.\n         */\n        this.uint32 = varint32read; // dirty cast for `this` and access to protected `buf`\n        this.buf = buf;\n        this.len = buf.length;\n        this.pos = 0;\n        this.view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\n        this.textDecoder = textDecoder !== null && textDecoder !== void 0 ? textDecoder : new TextDecoder(\"utf-8\", {\n            fatal: true,\n            ignoreBOM: true,\n        });\n    }\n    /**\n     * Reads a tag - field number and wire type.\n     */\n    tag() {\n        let tag = this.uint32(), fieldNo = tag >>> 3, wireType = tag & 7;\n        if (fieldNo <= 0 || wireType < 0 || wireType > 5)\n            throw new Error(\"illegal tag: field no \" + fieldNo + \" wire type \" + wireType);\n        return [fieldNo, wireType];\n    }\n    /**\n     * Skip one element on the wire and return the skipped data.\n     * Supports WireType.StartGroup since v2.0.0-alpha.23.\n     */\n    skip(wireType) {\n        let start = this.pos;\n        // noinspection FallThroughInSwitchStatementJS\n        switch (wireType) {\n            case WireType.Varint:\n                while (this.buf[this.pos++] & 0x80) {\n                    // ignore\n                }\n                break;\n            case WireType.Bit64:\n                this.pos += 4;\n            case WireType.Bit32:\n                this.pos += 4;\n                break;\n            case WireType.LengthDelimited:\n                let len = this.uint32();\n                this.pos += len;\n                break;\n            case WireType.StartGroup:\n                // From descriptor.proto: Group type is deprecated, not supported in proto3.\n                // But we must still be able to parse and treat as unknown.\n                let t;\n                while ((t = this.tag()[1]) !== WireType.EndGroup) {\n                    this.skip(t);\n                }\n                break;\n            default:\n                throw new Error(\"cant skip wire type \" + wireType);\n        }\n        this.assertBounds();\n        return this.buf.subarray(start, this.pos);\n    }\n    /**\n     * Throws error if position in byte array is out of range.\n     */\n    assertBounds() {\n        if (this.pos > this.len)\n            throw new RangeError(\"premature EOF\");\n    }\n    /**\n     * Read a `int32` field, a signed 32 bit varint.\n     */\n    int32() {\n        return this.uint32() | 0;\n    }\n    /**\n     * Read a `sint32` field, a signed, zigzag-encoded 32-bit varint.\n     */\n    sint32() {\n        let zze = this.uint32();\n        // decode zigzag\n        return (zze >>> 1) ^ -(zze & 1);\n    }\n    /**\n     * Read a `int64` field, a signed 64-bit varint.\n     */\n    int64() {\n        return new PbLong(...this.varint64());\n    }\n    /**\n     * Read a `uint64` field, an unsigned 64-bit varint.\n     */\n    uint64() {\n        return new PbULong(...this.varint64());\n    }\n    /**\n     * Read a `sint64` field, a signed, zig-zag-encoded 64-bit varint.\n     */\n    sint64() {\n        let [lo, hi] = this.varint64();\n        // decode zig zag\n        let s = -(lo & 1);\n        lo = ((lo >>> 1 | (hi & 1) << 31) ^ s);\n        hi = (hi >>> 1 ^ s);\n        return new PbLong(lo, hi);\n    }\n    /**\n     * Read a `bool` field, a variant.\n     */\n    bool() {\n        let [lo, hi] = this.varint64();\n        return lo !== 0 || hi !== 0;\n    }\n    /**\n     * Read a `fixed32` field, an unsigned, fixed-length 32-bit integer.\n     */\n    fixed32() {\n        return this.view.getUint32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `sfixed32` field, a signed, fixed-length 32-bit integer.\n     */\n    sfixed32() {\n        return this.view.getInt32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `fixed64` field, an unsigned, fixed-length 64 bit integer.\n     */\n    fixed64() {\n        return new PbULong(this.sfixed32(), this.sfixed32());\n    }\n    /**\n     * Read a `fixed64` field, a signed, fixed-length 64-bit integer.\n     */\n    sfixed64() {\n        return new PbLong(this.sfixed32(), this.sfixed32());\n    }\n    /**\n     * Read a `float` field, 32-bit floating point number.\n     */\n    float() {\n        return this.view.getFloat32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `double` field, a 64-bit floating point number.\n     */\n    double() {\n        return this.view.getFloat64((this.pos += 8) - 8, true);\n    }\n    /**\n     * Read a `bytes` field, length-delimited arbitrary data.\n     */\n    bytes() {\n        let len = this.uint32();\n        let start = this.pos;\n        this.pos += len;\n        this.assertBounds();\n        return this.buf.subarray(start, start + len);\n    }\n    /**\n     * Read a `string` field, length-delimited data converted to UTF-8 text.\n     */\n    string() {\n        return this.textDecoder.decode(this.bytes());\n    }\n}\n","import { MESSAGE_TYPE } from \"./message-type-contract\";\nimport { normalizeFieldInfo } from \"./reflection-info\";\nimport { ReflectionTypeCheck } from \"./reflection-type-check\";\nimport { ReflectionJsonReader } from \"./reflection-json-reader\";\nimport { ReflectionJsonWriter } from \"./reflection-json-writer\";\nimport { ReflectionBinaryReader } from \"./reflection-binary-reader\";\nimport { ReflectionBinaryWriter } from \"./reflection-binary-writer\";\nimport { reflectionCreate } from \"./reflection-create\";\nimport { reflectionMergePartial } from \"./reflection-merge-partial\";\nimport { typeofJsonValue } from \"./json-typings\";\nimport { jsonReadOptions, jsonWriteOptions, } from \"./json-format-contract\";\nimport { reflectionEquals } from \"./reflection-equals\";\nimport { binaryWriteOptions } from \"./binary-writer\";\nimport { binaryReadOptions } from \"./binary-reader\";\nconst baseDescriptors = Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));\n/**\n * This standard message type provides reflection-based\n * operations to work with a message.\n */\nexport class MessageType {\n    constructor(name, fields, options) {\n        this.defaultCheckDepth = 16;\n        this.typeName = name;\n        this.fields = fields.map(normalizeFieldInfo);\n        this.options = options !== null && options !== void 0 ? options : {};\n        this.messagePrototype = Object.create(null, Object.assign(Object.assign({}, baseDescriptors), { [MESSAGE_TYPE]: { value: this } }));\n        this.refTypeCheck = new ReflectionTypeCheck(this);\n        this.refJsonReader = new ReflectionJsonReader(this);\n        this.refJsonWriter = new ReflectionJsonWriter(this);\n        this.refBinReader = new ReflectionBinaryReader(this);\n        this.refBinWriter = new ReflectionBinaryWriter(this);\n    }\n    create(value) {\n        let message = reflectionCreate(this);\n        if (value !== undefined) {\n            reflectionMergePartial(this, message, value);\n        }\n        return message;\n    }\n    /**\n     * Clone the message.\n     *\n     * Unknown fields are discarded.\n     */\n    clone(message) {\n        let copy = this.create();\n        reflectionMergePartial(this, copy, message);\n        return copy;\n    }\n    /**\n     * Determines whether two message of the same type have the same field values.\n     * Checks for deep equality, traversing repeated fields, oneof groups, maps\n     * and messages recursively.\n     * Will also return true if both messages are `undefined`.\n     */\n    equals(a, b) {\n        return reflectionEquals(this, a, b);\n    }\n    /**\n     * Is the given value assignable to our message type\n     * and contains no [excess properties](https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks)?\n     */\n    is(arg, depth = this.defaultCheckDepth) {\n        return this.refTypeCheck.is(arg, depth, false);\n    }\n    /**\n     * Is the given value assignable to our message type,\n     * regardless of [excess properties](https://www.typescriptlang.org/docs/handbook/interfaces.html#excess-property-checks)?\n     */\n    isAssignable(arg, depth = this.defaultCheckDepth) {\n        return this.refTypeCheck.is(arg, depth, true);\n    }\n    /**\n     * Copy partial data into the target message.\n     */\n    mergePartial(target, source) {\n        reflectionMergePartial(this, target, source);\n    }\n    /**\n     * Create a new message from binary format.\n     */\n    fromBinary(data, options) {\n        let opt = binaryReadOptions(options);\n        return this.internalBinaryRead(opt.readerFactory(data), data.byteLength, opt);\n    }\n    /**\n     * Read a new message from a JSON value.\n     */\n    fromJson(json, options) {\n        return this.internalJsonRead(json, jsonReadOptions(options));\n    }\n    /**\n     * Read a new message from a JSON string.\n     * This is equivalent to `T.fromJson(JSON.parse(json))`.\n     */\n    fromJsonString(json, options) {\n        let value = JSON.parse(json);\n        return this.fromJson(value, options);\n    }\n    /**\n     * Write the message to canonical JSON value.\n     */\n    toJson(message, options) {\n        return this.internalJsonWrite(message, jsonWriteOptions(options));\n    }\n    /**\n     * Convert the message to canonical JSON string.\n     * This is equivalent to `JSON.stringify(T.toJson(t))`\n     */\n    toJsonString(message, options) {\n        var _a;\n        let value = this.toJson(message, options);\n        return JSON.stringify(value, null, (_a = options === null || options === void 0 ? void 0 : options.prettySpaces) !== null && _a !== void 0 ? _a : 0);\n    }\n    /**\n     * Write the message to binary format.\n     */\n    toBinary(message, options) {\n        let opt = binaryWriteOptions(options);\n        return this.internalBinaryWrite(message, opt.writerFactory(), opt).finish();\n    }\n    /**\n     * This is an internal method. If you just want to read a message from\n     * JSON, use `fromJson()` or `fromJsonString()`.\n     *\n     * Reads JSON value and merges the fields into the target\n     * according to protobuf rules. If the target is omitted,\n     * a new instance is created first.\n     */\n    internalJsonRead(json, options, target) {\n        if (json !== null && typeof json == \"object\" && !Array.isArray(json)) {\n            let message = target !== null && target !== void 0 ? target : this.create();\n            this.refJsonReader.read(json, message, options);\n            return message;\n        }\n        throw new Error(`Unable to parse message ${this.typeName} from JSON ${typeofJsonValue(json)}.`);\n    }\n    /**\n     * This is an internal method. If you just want to write a message\n     * to JSON, use `toJson()` or `toJsonString().\n     *\n     * Writes JSON value and returns it.\n     */\n    internalJsonWrite(message, options) {\n        return this.refJsonWriter.write(message, options);\n    }\n    /**\n     * This is an internal method. If you just want to write a message\n     * in binary format, use `toBinary()`.\n     *\n     * Serializes the message in binary format and appends it to the given\n     * writer. Returns passed writer.\n     */\n    internalBinaryWrite(message, writer, options) {\n        this.refBinWriter.write(message, writer, options);\n        return writer;\n    }\n    /**\n     * This is an internal method. If you just want to read a message from\n     * binary data, use `fromBinary()`.\n     *\n     * Reads data from binary format and merges the fields into\n     * the target according to protobuf rules. If the target is\n     * omitted, a new instance is created first.\n     */\n    internalBinaryRead(reader, length, options, target) {\n        let message = target !== null && target !== void 0 ? target : this.create();\n        this.refBinReader.read(reader, message, options, length);\n        return message;\n    }\n}\n","import { reflectionScalarDefault } from \"./reflection-scalar-default\";\nimport { MESSAGE_TYPE } from './message-type-contract';\n/**\n * Creates an instance of the generic message, using the field\n * information.\n */\nexport function reflectionCreate(type) {\n    /**\n     * This ternary can be removed in the next major version.\n     * The `Object.create()` code path utilizes a new `messagePrototype`\n     * property on the `IMessageType` which has this same `MESSAGE_TYPE`\n     * non-enumerable property on it. Doing it this way means that we only\n     * pay the cost of `Object.defineProperty()` once per `IMessageType`\n     * class of once per \"instance\". The falsy code path is only provided\n     * for backwards compatibility in cases where the runtime library is\n     * updated without also updating the generated code.\n     */\n    const msg = type.messagePrototype\n        ? Object.create(type.messagePrototype)\n        : Object.defineProperty({}, MESSAGE_TYPE, { value: type });\n    for (let field of type.fields) {\n        let name = field.localName;\n        if (field.opt)\n            continue;\n        if (field.oneof)\n            msg[field.oneof] = { oneofKind: undefined };\n        else if (field.repeat)\n            msg[name] = [];\n        else\n            switch (field.kind) {\n                case \"scalar\":\n                    msg[name] = reflectionScalarDefault(field.T, field.L);\n                    break;\n                case \"enum\":\n                    // we require 0 to be default value for all enums\n                    msg[name] = 0;\n                    break;\n                case \"map\":\n                    msg[name] = {};\n                    break;\n            }\n    }\n    return msg;\n}\n","import { assertNever } from \"@protobuf-ts/runtime\";\n/**\n * Creates a \"stack\" of of all interceptors specified in the given `RpcOptions`.\n * Used by generated client implementations.\n * @internal\n */\nexport function stackIntercept(kind, transport, method, options, input) {\n    var _a, _b, _c, _d;\n    if (kind == \"unary\") {\n        let tail = (mtd, inp, opt) => transport.unary(mtd, inp, opt);\n        for (const curr of ((_a = options.interceptors) !== null && _a !== void 0 ? _a : []).filter(i => i.interceptUnary).reverse()) {\n            const next = tail;\n            tail = (mtd, inp, opt) => curr.interceptUnary(next, mtd, inp, opt);\n        }\n        return tail(method, input, options);\n    }\n    if (kind == \"serverStreaming\") {\n        let tail = (mtd, inp, opt) => transport.serverStreaming(mtd, inp, opt);\n        for (const curr of ((_b = options.interceptors) !== null && _b !== void 0 ? _b : []).filter(i => i.interceptServerStreaming).reverse()) {\n            const next = tail;\n            tail = (mtd, inp, opt) => curr.interceptServerStreaming(next, mtd, inp, opt);\n        }\n        return tail(method, input, options);\n    }\n    if (kind == \"clientStreaming\") {\n        let tail = (mtd, opt) => transport.clientStreaming(mtd, opt);\n        for (const curr of ((_c = options.interceptors) !== null && _c !== void 0 ? _c : []).filter(i => i.interceptClientStreaming).reverse()) {\n            const next = tail;\n            tail = (mtd, opt) => curr.interceptClientStreaming(next, mtd, opt);\n        }\n        return tail(method, options);\n    }\n    if (kind == \"duplex\") {\n        let tail = (mtd, opt) => transport.duplex(mtd, opt);\n        for (const curr of ((_d = options.interceptors) !== null && _d !== void 0 ? _d : []).filter(i => i.interceptDuplex).reverse()) {\n            const next = tail;\n            tail = (mtd, opt) => curr.interceptDuplex(next, mtd, opt);\n        }\n        return tail(method, options);\n    }\n    assertNever(kind);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackUnaryInterceptors(transport, method, input, options) {\n    return stackIntercept(\"unary\", transport, method, options, input);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackServerStreamingInterceptors(transport, method, input, options) {\n    return stackIntercept(\"serverStreaming\", transport, method, options, input);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackClientStreamingInterceptors(transport, method, options) {\n    return stackIntercept(\"clientStreaming\", transport, method, options);\n}\n/**\n * @deprecated replaced by `stackIntercept()`, still here to support older generated code\n */\nexport function stackDuplexStreamingInterceptors(transport, method, options) {\n    return stackIntercept(\"duplex\", transport, method, options);\n}\n","/**\n * An error that occurred while calling a RPC method.\n */\nexport class RpcError extends Error {\n    constructor(message, code = 'UNKNOWN', meta) {\n        super(message);\n        this.name = 'RpcError';\n        // see https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#example\n        Object.setPrototypeOf(this, new.target.prototype);\n        this.code = code;\n        this.meta = meta !== null && meta !== void 0 ? meta : {};\n    }\n    toString() {\n        const l = [this.name + ': ' + this.message];\n        if (this.code) {\n            l.push('');\n            l.push('Code: ' + this.code);\n        }\n        if (this.serviceName && this.methodName) {\n            l.push('Method: ' + this.serviceName + '/' + this.methodName);\n        }\n        let m = Object.entries(this.meta);\n        if (m.length) {\n            l.push('');\n            l.push('Meta:');\n            for (let [k, v] of m) {\n                l.push(`  ${k}: ${v}`);\n            }\n        }\n        return l.join('\\n');\n    }\n}\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn.apply(null, args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let {data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth} = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  let contentType;\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // Let the browser set it\n    } else if ((contentType = headers.getContentType()) !== false) {\n      // fix semicolon duplication issue for ReactNative FormData implementation\n      const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n      headers.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n    }\n  }\n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst isFetchSupported = typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function';\nconst isReadableStreamSupported = isFetchSupported && typeof ReadableStream === 'function';\n\n// used only inside the fetch adapter\nconst encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n    ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n    async (str) => new Uint8Array(await new Response(str).arrayBuffer())\n);\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsRequestStream = isReadableStreamSupported && test(() => {\n  let duplexAccessed = false;\n\n  const hasContentType = new Request(platform.origin, {\n    body: new ReadableStream(),\n    method: 'POST',\n    get duplex() {\n      duplexAccessed = true;\n      return 'half';\n    },\n  }).headers.has('Content-Type');\n\n  return duplexAccessed && !hasContentType;\n});\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst supportsResponseStream = isReadableStreamSupported &&\n  test(() => utils.isReadableStream(new Response('').body));\n\n\nconst resolvers = {\n  stream: supportsResponseStream && ((res) => res.body)\n};\n\nisFetchSupported && (((res) => {\n  ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n    !resolvers[type] && (resolvers[type] = utils.isFunction(res[type]) ? (res) => res[type]() :\n      (_, config) => {\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n  });\n})(new Response));\n\nconst getBodyLength = async (body) => {\n  if (body == null) {\n    return 0;\n  }\n\n  if(utils.isBlob(body)) {\n    return body.size;\n  }\n\n  if(utils.isSpecCompliantForm(body)) {\n    const _request = new Request(platform.origin, {\n      method: 'POST',\n      body,\n    });\n    return (await _request.arrayBuffer()).byteLength;\n  }\n\n  if(utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n    return body.byteLength;\n  }\n\n  if(utils.isURLSearchParams(body)) {\n    body = body + '';\n  }\n\n  if(utils.isString(body)) {\n    return (await encodeText(body)).byteLength;\n  }\n}\n\nconst resolveBodyLength = async (headers, body) => {\n  const length = utils.toFiniteNumber(headers.getContentLength());\n\n  return length == null ? getBodyLength(body) : length;\n}\n\nexport default isFetchSupported && (async (config) => {\n  let {\n    url,\n    method,\n    data,\n    signal,\n    cancelToken,\n    timeout,\n    onDownloadProgress,\n    onUploadProgress,\n    responseType,\n    headers,\n    withCredentials = 'same-origin',\n    fetchOptions\n  } = resolveConfig(config);\n\n  responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n  let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n  let request;\n\n  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n  });\n\n  let requestContentLength;\n\n  try {\n    if (\n      onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n      (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n    ) {\n      let _request = new Request(url, {\n        method: 'POST',\n        body: data,\n        duplex: \"half\"\n      });\n\n      let contentTypeHeader;\n\n      if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n        headers.setContentType(contentTypeHeader)\n      }\n\n      if (_request.body) {\n        const [onProgress, flush] = progressEventDecorator(\n          requestContentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress))\n        );\n\n        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n      }\n    }\n\n    if (!utils.isString(withCredentials)) {\n      withCredentials = withCredentials ? 'include' : 'omit';\n    }\n\n    // Cloudflare Workers throws when credentials are defined\n    // see https://github.com/cloudflare/workerd/issues/902\n    const isCredentialsSupported = \"credentials\" in Request.prototype;\n    request = new Request(url, {\n      ...fetchOptions,\n      signal: composedSignal,\n      method: method.toUpperCase(),\n      headers: headers.normalize().toJSON(),\n      body: data,\n      duplex: \"half\",\n      credentials: isCredentialsSupported ? withCredentials : undefined\n    });\n\n    let response = await fetch(request);\n\n    const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n    if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n      const options = {};\n\n      ['status', 'statusText', 'headers'].forEach(prop => {\n        options[prop] = response[prop];\n      });\n\n      const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n        responseContentLength,\n        progressEventReducer(asyncDecorator(onDownloadProgress), true)\n      ) || [];\n\n      response = new Response(\n        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n          flush && flush();\n          unsubscribe && unsubscribe();\n        }),\n        options\n      );\n    }\n\n    responseType = responseType || 'text';\n\n    let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n    !isStreamResponse && unsubscribe && unsubscribe();\n\n    return await new Promise((resolve, reject) => {\n      settle(resolve, reject, {\n        data: responseData,\n        headers: AxiosHeaders.from(response.headers),\n        status: response.status,\n        statusText: response.statusText,\n        config,\n        request\n      })\n    })\n  } catch (err) {\n    unsubscribe && unsubscribe();\n\n    if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n      throw Object.assign(\n        new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n        {\n          cause: err.cause || err\n        }\n      )\n    }\n\n    throw AxiosError.from(err, err && err.code, config, request);\n  }\n});\n\n\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: fetchAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.9.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","// Copyright 2018 Twitch Interactive, Inc.  All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\"). You may not\n// use this file except in compliance with the License. A copy of the License is\n// located at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n// CONDITIONS OF ANY KIND, either express or implied. See the License\n// for the specific language governing permissions and limitations under\n// the License.\n/**\n * See https://twitchtv.github.io/twirp/docs/spec_v5.html#error-codes\n *\n * Names and descriptions from [twirp / errors.go](https://github.com/twitchtv/twirp/blob/b2ecb97cf02a9bb55d730920f6a1cb5243899093/errors.go)\n *\n * Copyright 2018 by Twitch Interactive, Inc.\n */\nexport var TwirpErrorCode;\n(function (TwirpErrorCode) {\n    /**\n     * The operation was cancelled.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"cancelled\"] = 0] = \"cancelled\";\n    /**\n     * An unknown error occurred. For example, this can be used when handling\n     * errors raised by APIs that do not return any error information.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unknown\"] = 1] = \"unknown\";\n    /**\n     * The client specified an invalid argument. This indicates arguments that\n     * are invalid regardless of the state of the system (i.e. a malformed\n     * file name, required argument, number out of range, etc.).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"invalid_argument\"] = 2] = \"invalid_argument\";\n    /**\n     * The client sent a message which could not be decoded. This may mean that\n     * the message was encoded improperly or that the client and server have\n     * incompatible message definitions.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"malformed\"] = 3] = \"malformed\";\n    /**\n     * Operation expired before completion. For operations that change the state\n     * of the system, this error may be returned even if the operation has\n     * completed successfully (timeout).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"deadline_exceeded\"] = 4] = \"deadline_exceeded\";\n    /**\n     * Some requested entity was not found.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"not_found\"] = 5] = \"not_found\";\n    /**\n     * The requested URL path wasn't routable to a Twirp service and method.\n     * This is returned by generated server code and should not be returned\n     * by application code (use \"not_found\" or \"unimplemented\" instead).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"bad_route\"] = 6] = \"bad_route\";\n    /**\n     * An attempt to create an entity failed because one already exists.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"already_exists\"] = 7] = \"already_exists\";\n    /**\n     * The caller does not have permission to execute the specified operation.\n     * It must not be used if the caller cannot be identified (use\n     * \"unauthenticated\" instead).\n     */\n    TwirpErrorCode[TwirpErrorCode[\"permission_denied\"] = 8] = \"permission_denied\";\n    /**\n     * The request does not have valid authentication credentials for the\n     * operation.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unauthenticated\"] = 9] = \"unauthenticated\";\n    /**\n     * Some resource has been exhausted, perhaps a per-user quota, or\n     * perhaps the entire file system is out of space.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"resource_exhausted\"] = 10] = \"resource_exhausted\";\n    /**\n     * The operation was rejected because the system is not in a state\n     * required for the operation's execution. For example, doing an rmdir\n     * operation on a directory that is non-empty, or on a non-directory\n     * object, or when having conflicting read-modify-write on the same\n     * resource.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"failed_precondition\"] = 11] = \"failed_precondition\";\n    /**\n     * The operation was aborted, typically due to a concurrency issue\n     * like sequencer check failures, transaction aborts, etc.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"aborted\"] = 12] = \"aborted\";\n    /**\n     * The operation was attempted past the valid range. For example, seeking\n     * or reading past end of a paginated collection. Unlike\n     * \"invalid_argument\", this error indicates a problem that may be fixed if\n     * the system state changes (i.e. adding more items to the collection).\n     * There is a fair bit of overlap between \"failed_precondition\" and\n     * \"out_of_range\". We recommend using \"out_of_range\" (the more specific\n     * error) when it applies so that callers who are iterating through a space\n     * can easily look for an \"out_of_range\" error to detect when they are done.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"out_of_range\"] = 13] = \"out_of_range\";\n    /**\n     * The operation is not implemented or not supported/enabled in this service.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unimplemented\"] = 14] = \"unimplemented\";\n    /**\n     * When some invariants expected by the underlying system have been broken.\n     * In other words, something bad happened in the library or backend service.\n     * Twirp specific issues like wire and serialization problems are also\n     * reported as \"internal\" errors.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"internal\"] = 15] = \"internal\";\n    /**\n     * The service is currently unavailable. This is most likely a transient\n     * condition and may be corrected by retrying with a backoff.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"unavailable\"] = 16] = \"unavailable\";\n    /**\n     * The operation resulted in unrecoverable data loss or corruption.\n     */\n    TwirpErrorCode[TwirpErrorCode[\"dataloss\"] = 17] = \"dataloss\";\n})(TwirpErrorCode || (TwirpErrorCode = {}));\n","export var DeferredState;\n(function (DeferredState) {\n    DeferredState[DeferredState[\"PENDING\"] = 0] = \"PENDING\";\n    DeferredState[DeferredState[\"REJECTED\"] = 1] = \"REJECTED\";\n    DeferredState[DeferredState[\"RESOLVED\"] = 2] = \"RESOLVED\";\n})(DeferredState || (DeferredState = {}));\n/**\n * A deferred promise. This is a \"controller\" for a promise, which lets you\n * pass a promise around and reject or resolve it from the outside.\n *\n * Warning: This class is to be used with care. Using it can make code very\n * difficult to read. It is intended for use in library code that exposes\n * promises, not for regular business logic.\n */\nexport class Deferred {\n    /**\n     * @param preventUnhandledRejectionWarning - prevents the warning\n     * \"Unhandled Promise rejection\" by adding a noop rejection handler.\n     * Working with calls returned from the runtime-rpc package in an\n     * async function usually means awaiting one call property after\n     * the other. This means that the \"status\" is not being awaited when\n     * an earlier await for the \"headers\" is rejected. This causes the\n     * \"unhandled promise reject\" warning. A more correct behaviour for\n     * calls might be to become aware whether at least one of the\n     * promises is handled and swallow the rejection warning for the\n     * others.\n     */\n    constructor(preventUnhandledRejectionWarning = true) {\n        this._state = DeferredState.PENDING;\n        this._promise = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n        if (preventUnhandledRejectionWarning) {\n            this._promise.catch(_ => { });\n        }\n    }\n    /**\n     * Get the current state of the promise.\n     */\n    get state() {\n        return this._state;\n    }\n    /**\n     * Get the deferred promise.\n     */\n    get promise() {\n        return this._promise;\n    }\n    /**\n     * Resolve the promise. Throws if the promise is already resolved or rejected.\n     */\n    resolve(value) {\n        if (this.state !== DeferredState.PENDING)\n            throw new Error(`cannot resolve ${DeferredState[this.state].toLowerCase()}`);\n        this._resolve(value);\n        this._state = DeferredState.RESOLVED;\n    }\n    /**\n     * Reject the promise. Throws if the promise is already resolved or rejected.\n     */\n    reject(reason) {\n        if (this.state !== DeferredState.PENDING)\n            throw new Error(`cannot reject ${DeferredState[this.state].toLowerCase()}`);\n        this._reject(reason);\n        this._state = DeferredState.REJECTED;\n    }\n    /**\n     * Resolve the promise. Ignore if not pending.\n     */\n    resolvePending(val) {\n        if (this._state === DeferredState.PENDING)\n            this.resolve(val);\n    }\n    /**\n     * Reject the promise. Ignore if not pending.\n     */\n    rejectPending(reason) {\n        if (this._state === DeferredState.PENDING)\n            this.reject(reason);\n    }\n}\n","import { isJsonObject } from \"@protobuf-ts/runtime\";\nimport { RpcError } from \"@protobuf-ts/runtime-rpc\";\nimport { TwirpErrorCode } from \"./twitch-twirp-error-code\";\n/**\n * Create fetch API headers for a Twirp request.\n */\nexport function createTwirpRequestHeader(headers, sendJson, meta) {\n    // add meta as headers\n    if (meta) {\n        for (let [k, v] of Object.entries(meta)) {\n            if (typeof v == \"string\")\n                headers.append(k, v);\n            else\n                for (let i of v)\n                    headers.append(k, i);\n        }\n    }\n    // set standard headers (possibly overwriting meta)\n    headers.set('Content-Type', sendJson ? \"application/json\" : \"application/protobuf\");\n    headers.set('Accept', sendJson ? \"application/json\" : \"application/protobuf, application/json\");\n    return headers;\n}\n/**\n * Parse Twirp error message from JSON and create RpcError from the Twirp error.\n *\n * see https://twitchtv.github.io/twirp/docs/spec_v5.html\n */\nexport function parseTwirpErrorResponse(json) {\n    if (!isJsonObject(json) || typeof json.code !== \"string\" || typeof json.msg !== \"string\")\n        return new RpcError('cannot read twirp error response', TwirpErrorCode[TwirpErrorCode.internal]);\n    let meta = {};\n    if (isJsonObject(json.meta)) {\n        for (let [k, v] of Object.entries(json.meta)) {\n            if (typeof v == \"string\")\n                meta[k] = v;\n        }\n    }\n    return new RpcError(json.msg, json.code, meta);\n}\n/**\n * Parses fetch API response headers to RpcMetaData.\n * Drops the headers Content-Type and Content-Length.\n */\nexport function parseMetadataFromResponseHeaders(headers) {\n    let meta = {};\n    headers.forEach((value, key) => {\n        if (key.toLowerCase() === 'content-type')\n            return;\n        if (key.toLowerCase() === 'content-length')\n            return;\n        if (meta.hasOwnProperty(key))\n            meta[key].push(value);\n        else\n            meta[key] = value;\n    });\n    return meta;\n}\n","import { mergeBinaryOptions, mergeJsonOptions } from \"@protobuf-ts/runtime\";\n/**\n * Merges custom RPC options with defaults. Returns a new instance and keeps\n * the \"defaults\" and the \"options\" unmodified.\n *\n * Merges `RpcMetadata` \"meta\", overwriting values from \"defaults\" with\n * values from \"options\". Does not append values to existing entries.\n *\n * Merges \"jsonOptions\", including \"jsonOptions.typeRegistry\", by creating\n * a new array that contains types from \"options.jsonOptions.typeRegistry\"\n * first, then types from \"defaults.jsonOptions.typeRegistry\".\n *\n * Merges \"binaryOptions\".\n *\n * Merges \"interceptors\" by creating a new array that contains interceptors\n * from \"defaults\" first, then interceptors from \"options\".\n *\n * Works with objects that extend `RpcOptions`, but only if the added\n * properties are of type Date, primitive like string, boolean, or Array\n * of primitives. If you have other property types, you have to merge them\n * yourself.\n */\nexport function mergeRpcOptions(defaults, options) {\n    if (!options)\n        return defaults;\n    let o = {};\n    copy(defaults, o);\n    copy(options, o);\n    for (let key of Object.keys(options)) {\n        let val = options[key];\n        switch (key) {\n            case \"jsonOptions\":\n                o.jsonOptions = mergeJsonOptions(defaults.jsonOptions, o.jsonOptions);\n                break;\n            case \"binaryOptions\":\n                o.binaryOptions = mergeBinaryOptions(defaults.binaryOptions, o.binaryOptions);\n                break;\n            case \"meta\":\n                o.meta = {};\n                copy(defaults.meta, o.meta);\n                copy(options.meta, o.meta);\n                break;\n            case \"interceptors\":\n                o.interceptors = defaults.interceptors ? defaults.interceptors.concat(val) : val.concat();\n                break;\n        }\n    }\n    return o;\n}\nfunction copy(a, into) {\n    if (!a)\n        return;\n    let c = into;\n    for (let [k, v] of Object.entries(a)) {\n        if (v instanceof Date)\n            c[k] = new Date(v.getTime());\n        else if (Array.isArray(v))\n            c[k] = v.concat();\n        else\n            c[k] = v;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * A unary RPC call. Unary means there is exactly one input message and\n * exactly one output message unless an error occurred.\n */\nexport class UnaryCall {\n    constructor(method, requestHeaders, request, headers, response, status, trailers) {\n        this.method = method;\n        this.requestHeaders = requestHeaders;\n        this.request = request;\n        this.headers = headers;\n        this.response = response;\n        this.status = status;\n        this.trailers = trailers;\n    }\n    /**\n     * If you are only interested in the final outcome of this call,\n     * you can await it to receive a `FinishedUnaryCall`.\n     */\n    then(onfulfilled, onrejected) {\n        return this.promiseFinished().then(value => onfulfilled ? Promise.resolve(onfulfilled(value)) : value, reason => onrejected ? Promise.resolve(onrejected(reason)) : Promise.reject(reason));\n    }\n    promiseFinished() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let [headers, response, status, trailers] = yield Promise.all([this.headers, this.response, this.status, this.trailers]);\n            return {\n                method: this.method,\n                requestHeaders: this.requestHeaders,\n                request: this.request,\n                headers,\n                response,\n                status,\n                trailers\n            };\n        });\n    }\n}\n","import { createTwirpRequestHeader, parseMetadataFromResponseHeaders, parseTwirpErrorResponse } from \"./twirp-format\";\nimport { Deferred, mergeRpcOptions, RpcError, UnaryCall } from \"@protobuf-ts/runtime-rpc\";\nimport { lowerCamelCase } from \"@protobuf-ts/runtime\";\nimport { TwirpErrorCode } from \"./twitch-twirp-error-code\";\n/**\n * Implements the Twirp protocol, supporting JSON or binary format on\n * the wire. Uses the fetch API to do the HTTP requests.\n *\n * See https://twitchtv.github.io/twirp/docs/spec_v5.html\n */\nexport class TwirpFetchTransport {\n    constructor(options) {\n        this.defaultOptions = options;\n    }\n    mergeOptions(options) {\n        return mergeRpcOptions(this.defaultOptions, options);\n    }\n    unary(method, input, options) {\n        var _a, _b, _c;\n        let opt = options, url = this.makeUrl(method, opt), fetchInit = (_a = opt.fetchInit) !== null && _a !== void 0 ? _a : {}, requestBody = opt.sendJson ? method.I.toJsonString(input, opt.jsonOptions) : method.I.toBinary(input, opt.binaryOptions), defHeader = new Deferred(), defMessage = new Deferred(), defStatus = new Deferred(), defTrailer = new Deferred();\n        globalThis.fetch(url, Object.assign(Object.assign({}, fetchInit), { method: 'POST', headers: createTwirpRequestHeader(new globalThis.Headers(), !!opt.sendJson, opt.meta), body: requestBody, signal: (_b = options.abort) !== null && _b !== void 0 ? _b : null // node-fetch@3.0.0-beta.9 rejects `undefined`\n         }))\n            .then(fetchResponse => {\n            defHeader.resolve(parseMetadataFromResponseHeaders(fetchResponse.headers));\n            // Cloudflare Workers throw when the type property of a fetch response\n            // is accessed, so wrap access with try/catch. See:\n            // * https://developers.cloudflare.com/workers/runtime-apis/response/#properties\n            // * https://github.com/cloudflare/miniflare/blob/72f046e/packages/core/src/standards/http.ts#L646\n            let responseType;\n            try {\n                responseType = fetchResponse.type;\n            }\n            catch (_a) { }\n            switch (responseType) {\n                case \"error\":\n                case \"opaque\":\n                case \"opaqueredirect\":\n                    // see https://developer.mozilla.org/en-US/docs/Web/API/Response/type\n                    throw new RpcError(`fetch response type ${fetchResponse.type}`, TwirpErrorCode[TwirpErrorCode.unknown]);\n            }\n            if (!fetchResponse.ok) {\n                return fetchResponse.json().then(value => {\n                    throw parseTwirpErrorResponse(value);\n                }, () => {\n                    throw new RpcError('received HTTP ' + fetchResponse.status + ', unable to read response body as json', TwirpErrorCode[TwirpErrorCode.internal]);\n                });\n            }\n            if (opt.sendJson) {\n                return fetchResponse.json().then(value => method.O.fromJson(value, opt.jsonOptions), () => {\n                    throw new RpcError('unable to read response body as json', TwirpErrorCode[TwirpErrorCode.dataloss]);\n                });\n            }\n            return fetchResponse.arrayBuffer().then(value => method.O.fromBinary(new Uint8Array(value), opt.binaryOptions), () => {\n                throw new RpcError('unable to read response body', TwirpErrorCode[TwirpErrorCode.dataloss]);\n            });\n        }, (reason) => {\n            // failed to fetch, aborted, wrong url or network problem\n            if (reason instanceof Error && reason.name === 'AbortError')\n                throw new RpcError(reason.message, TwirpErrorCode[TwirpErrorCode.cancelled]);\n            throw new RpcError(reason instanceof Error ? reason.message : reason);\n        })\n            .then(message => {\n            defMessage.resolve(message);\n            defStatus.resolve({ code: 'OK', detail: '' });\n            defTrailer.resolve({});\n        })\n            .catch((reason) => {\n            // RpcErrors are thrown by us, everything else is an internal error\n            let error = reason instanceof RpcError ? reason\n                : new RpcError(reason instanceof Error ? reason.message : reason, TwirpErrorCode[TwirpErrorCode.internal]);\n            error.methodName = method.name;\n            error.serviceName = method.service.typeName;\n            defHeader.rejectPending(error);\n            defMessage.rejectPending(error);\n            defStatus.rejectPending(error);\n            defTrailer.rejectPending(error);\n        });\n        return new UnaryCall(method, (_c = opt.meta) !== null && _c !== void 0 ? _c : {}, input, defHeader.promise, defMessage.promise, defStatus.promise, defTrailer.promise);\n    }\n    /**\n     * Create an URI for a RPC call.\n     *\n     * Takes the `baseUrl` option and appends:\n     * - slash \"/\"\n     * - package name\n     * - dot \".\"\n     * - service name\n     * - slash \"/\"\n     * - method name\n     *\n     * If the service was declared without a package, the package name and dot\n     * are omitted.\n     *\n     * The method name is CamelCased just as it would be in Go, unless the\n     * option `useProtoMethodName` is `true`.\n     */\n    makeUrl(method, options) {\n        let base = options.baseUrl;\n        if (base.endsWith('/'))\n            base = base.substring(0, base.length - 1);\n        let methodName = method.name;\n        if (options.useProtoMethodName !== true) {\n            methodName = lowerCamelCase(methodName);\n            methodName = methodName.substring(0, 1).toUpperCase() + methodName.substring(1);\n        }\n        return `${base}/${method.service.typeName}/${methodName}`;\n    }\n    clientStreaming(method /*, options: RpcOptions*/) {\n        const e = new RpcError('Client streaming is not supported by Twirp', TwirpErrorCode[TwirpErrorCode.unimplemented]);\n        e.methodName = method.name;\n        e.serviceName = method.service.typeName;\n        throw e;\n    }\n    duplex(method /*, options: RpcOptions*/) {\n        const e = new RpcError('Duplex streaming is not supported by Twirp', TwirpErrorCode[TwirpErrorCode.unimplemented]);\n        e.methodName = method.name;\n        e.serviceName = method.service.typeName;\n        throw e;\n    }\n    serverStreaming(method /*, input: I, options?: RpcOptions*/) {\n        const e = new RpcError('Server streaming is not supported by Twirp', TwirpErrorCode[TwirpErrorCode.unimplemented]);\n        e.methodName = method.name;\n        e.serviceName = method.service.typeName;\n        throw e;\n    }\n}\n","import { createErrorClass } from './createErrorClass';\n\nexport interface ObjectUnsubscribedError extends Error {}\n\nexport interface ObjectUnsubscribedErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): ObjectUnsubscribedError;\n}\n\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nexport const ObjectUnsubscribedError: ObjectUnsubscribedErrorCtor = createErrorClass(\n  (_super) =>\n    function ObjectUnsubscribedErrorImpl(this: any) {\n      _super(this);\n      this.name = 'ObjectUnsubscribedError';\n      this.message = 'object unsubscribed';\n    }\n);\n","import { Operator } from './Operator';\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { Observer, SubscriptionLike, TeardownLogic } from './types';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\n\n/**\n * A Subject is a special type of Observable that allows values to be\n * multicasted to many Observers. Subjects are like EventEmitters.\n *\n * Every Subject is an Observable and an Observer. You can subscribe to a\n * Subject, and you can call next to feed values as well as error and complete.\n */\nexport class Subject<T> extends Observable<T> implements SubscriptionLike {\n  closed = false;\n\n  private currentObservers: Observer<T>[] | null = null;\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  observers: Observer<T>[] = [];\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  isStopped = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  hasError = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  thrownError: any = null;\n\n  /**\n   * Creates a \"subject\" by basically gluing an observer to an observable.\n   *\n   * @deprecated Recommended you do not use. Will be removed at some point in the future. Plans for replacement still under discussion.\n   */\n  static create: (...args: any[]) => any = <T>(destination: Observer<T>, source: Observable<T>): AnonymousSubject<T> => {\n    return new AnonymousSubject<T>(destination, source);\n  };\n\n  constructor() {\n    // NOTE: This must be here to obscure Observable's constructor.\n    super();\n  }\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const subject = new AnonymousSubject(this, this);\n    subject.operator = operator as any;\n    return subject as any;\n  }\n\n  /** @internal */\n  protected _throwIfClosed() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n  }\n\n  next(value: T) {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        if (!this.currentObservers) {\n          this.currentObservers = Array.from(this.observers);\n        }\n        for (const observer of this.currentObservers) {\n          observer.next(value);\n        }\n      }\n    });\n  }\n\n  error(err: any) {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        this.hasError = this.isStopped = true;\n        this.thrownError = err;\n        const { observers } = this;\n        while (observers.length) {\n          observers.shift()!.error(err);\n        }\n      }\n    });\n  }\n\n  complete() {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        this.isStopped = true;\n        const { observers } = this;\n        while (observers.length) {\n          observers.shift()!.complete();\n        }\n      }\n    });\n  }\n\n  unsubscribe() {\n    this.isStopped = this.closed = true;\n    this.observers = this.currentObservers = null!;\n  }\n\n  get observed() {\n    return this.observers?.length > 0;\n  }\n\n  /** @internal */\n  protected _trySubscribe(subscriber: Subscriber<T>): TeardownLogic {\n    this._throwIfClosed();\n    return super._trySubscribe(subscriber);\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    this._throwIfClosed();\n    this._checkFinalizedStatuses(subscriber);\n    return this._innerSubscribe(subscriber);\n  }\n\n  /** @internal */\n  protected _innerSubscribe(subscriber: Subscriber<any>) {\n    const { hasError, isStopped, observers } = this;\n    if (hasError || isStopped) {\n      return EMPTY_SUBSCRIPTION;\n    }\n    this.currentObservers = null;\n    observers.push(subscriber);\n    return new Subscription(() => {\n      this.currentObservers = null;\n      arrRemove(observers, subscriber);\n    });\n  }\n\n  /** @internal */\n  protected _checkFinalizedStatuses(subscriber: Subscriber<any>) {\n    const { hasError, thrownError, isStopped } = this;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped) {\n      subscriber.complete();\n    }\n  }\n\n  /**\n   * Creates a new Observable with this Subject as the source. You can do this\n   * to create custom Observer-side logic of the Subject and conceal it from\n   * code that uses the Observable.\n   * @return Observable that this Subject casts to.\n   */\n  asObservable(): Observable<T> {\n    const observable: any = new Observable<T>();\n    observable.source = this;\n    return observable;\n  }\n}\n\nexport class AnonymousSubject<T> extends Subject<T> {\n  constructor(\n    /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n    public destination?: Observer<T>,\n    source?: Observable<T>\n  ) {\n    super();\n    this.source = source;\n  }\n\n  next(value: T) {\n    this.destination?.next?.(value);\n  }\n\n  error(err: any) {\n    this.destination?.error?.(err);\n  }\n\n  complete() {\n    this.destination?.complete?.();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    return this.source?.subscribe(subscriber) ?? EMPTY_SUBSCRIPTION;\n  }\n}\n","import { TimestampProvider } from '../types';\n\ninterface DateTimestampProvider extends TimestampProvider {\n  delegate: TimestampProvider | undefined;\n}\n\nexport const dateTimestampProvider: DateTimestampProvider = {\n  now() {\n    // Use the variable rather than `this` so that the function can be called\n    // without being bound to the provider.\n    return (dateTimestampProvider.delegate || Date).now();\n  },\n  delegate: undefined,\n};\n","import { Subject } from './Subject';\nimport { TimestampProvider } from './types';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\n\n/**\n * A variant of {@link Subject} that \"replays\" old values to new subscribers by emitting them when they first subscribe.\n *\n * `ReplaySubject` has an internal buffer that will store a specified number of values that it has observed. Like `Subject`,\n * `ReplaySubject` \"observes\" values by having them passed to its `next` method. When it observes a value, it will store that\n * value for a time determined by the configuration of the `ReplaySubject`, as passed to its constructor.\n *\n * When a new subscriber subscribes to the `ReplaySubject` instance, it will synchronously emit all values in its buffer in\n * a First-In-First-Out (FIFO) manner. The `ReplaySubject` will also complete, if it has observed completion; and it will\n * error if it has observed an error.\n *\n * There are two main configuration items to be concerned with:\n *\n * 1. `bufferSize` - This will determine how many items are stored in the buffer, defaults to infinite.\n * 2. `windowTime` - The amount of time to hold a value in the buffer before removing it from the buffer.\n *\n * Both configurations may exist simultaneously. So if you would like to buffer a maximum of 3 values, as long as the values\n * are less than 2 seconds old, you could do so with a `new ReplaySubject(3, 2000)`.\n *\n * ### Differences with BehaviorSubject\n *\n * `BehaviorSubject` is similar to `new ReplaySubject(1)`, with a couple of exceptions:\n *\n * 1. `BehaviorSubject` comes \"primed\" with a single value upon construction.\n * 2. `ReplaySubject` will replay values, even after observing an error, where `BehaviorSubject` will not.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n * @see {@link shareReplay}\n */\nexport class ReplaySubject<T> extends Subject<T> {\n  private _buffer: (T | number)[] = [];\n  private _infiniteTimeWindow = true;\n\n  /**\n   * @param _bufferSize The size of the buffer to replay on subscription\n   * @param _windowTime The amount of time the buffered items will stay buffered\n   * @param _timestampProvider An object with a `now()` method that provides the current timestamp. This is used to\n   * calculate the amount of time something has been buffered.\n   */\n  constructor(\n    private _bufferSize = Infinity,\n    private _windowTime = Infinity,\n    private _timestampProvider: TimestampProvider = dateTimestampProvider\n  ) {\n    super();\n    this._infiniteTimeWindow = _windowTime === Infinity;\n    this._bufferSize = Math.max(1, _bufferSize);\n    this._windowTime = Math.max(1, _windowTime);\n  }\n\n  next(value: T): void {\n    const { isStopped, _buffer, _infiniteTimeWindow, _timestampProvider, _windowTime } = this;\n    if (!isStopped) {\n      _buffer.push(value);\n      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n    }\n    this._trimBuffer();\n    super.next(value);\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    this._throwIfClosed();\n    this._trimBuffer();\n\n    const subscription = this._innerSubscribe(subscriber);\n\n    const { _infiniteTimeWindow, _buffer } = this;\n    // We use a copy here, so reentrant code does not mutate our array while we're\n    // emitting it to a new subscriber.\n    const copy = _buffer.slice();\n    for (let i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n      subscriber.next(copy[i] as T);\n    }\n\n    this._checkFinalizedStatuses(subscriber);\n\n    return subscription;\n  }\n\n  private _trimBuffer() {\n    const { _bufferSize, _timestampProvider, _buffer, _infiniteTimeWindow } = this;\n    // If we don't have an infinite buffer size, and we're over the length,\n    // use splice to truncate the old buffer values off. Note that we have to\n    // double the size for instances where we're not using an infinite time window\n    // because we're storing the values and the timestamps in the same array.\n    const adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n\n    // Now, if we're not in an infinite time window, remove all values where the time is\n    // older than what is allowed.\n    if (!_infiniteTimeWindow) {\n      const now = _timestampProvider.now();\n      let last = 0;\n      // Search the array for the first timestamp that isn't expired and\n      // truncate the buffer up to that point.\n      for (let i = 1; i < _buffer.length && (_buffer[i] as number) <= now; i += 2) {\n        last = i;\n      }\n      last && _buffer.splice(0, last + 1);\n    }\n  }\n}\n","const { isArray } = Array;\nconst { getPrototypeOf, prototype: objectProto, keys: getKeys } = Object;\n\n/**\n * Used in functions where either a list of arguments, a single array of arguments, or a\n * dictionary of arguments can be returned. Returns an object with an `args` property with\n * the arguments in an array, if it is a dictionary, it will also return the `keys` in another\n * property.\n */\nexport function argsArgArrayOrObject<T, O extends Record<string, T>>(args: T[] | [O] | [T[]]): { args: T[]; keys: string[] | null } {\n  if (args.length === 1) {\n    const first = args[0];\n    if (isArray(first)) {\n      return { args: first, keys: null };\n    }\n    if (isPOJO(first)) {\n      const keys = getKeys(first);\n      return {\n        args: keys.map((key) => first[key]),\n        keys,\n      };\n    }\n  }\n\n  return { args: args as T[], keys: null };\n}\n\nfunction isPOJO(obj: any): obj is object {\n  return obj && typeof obj === 'object' && getPrototypeOf(obj) === objectProto;\n}\n","import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function map<T, R>(project: (value: T, index: number) => R): OperatorFunction<T, R>;\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function map<T, R, A>(project: (this: A, value: T, index: number) => R, thisArg: A): OperatorFunction<T, R>;\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n *\n * Map every click to the `clientX` position of that click\n *\n * ```ts\n * import { fromEvent, map } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n *\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param project The function to apply to each `value` emitted by the source\n * Observable. The `index` parameter is the number `i` for the i-th emission\n * that has happened since the subscription, starting from the number `0`.\n * @param thisArg An optional argument to define what `this` is in the\n * `project` function.\n * @return A function that returns an Observable that emits the values from the\n * source Observable transformed by the given `project` function.\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return operate((source, subscriber) => {\n    // The index of the value from the source. Used with projection.\n    let index = 0;\n    // Subscribe to the source, all errors and completions are sent along\n    // to the consumer.\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value: T) => {\n        // Call the projection function with the appropriate this context,\n        // and send the resulting value to the consumer.\n        subscriber.next(project.call(thisArg, value, index++));\n      })\n    );\n  });\n}\n","import { OperatorFunction } from \"../types\";\nimport { map } from \"../operators/map\";\n\nconst { isArray } = Array;\n\nfunction callOrApply<T, R>(fn: ((...values: T[]) => R), args: T|T[]): R {\n    return isArray(args) ? fn(...args) : fn(args);\n}\n\n/**\n * Used in several -- mostly deprecated -- situations where we need to \n * apply a list of arguments or a single argument to a result selector.\n */\nexport function mapOneOrManyArgs<T, R>(fn: ((...values: T[]) => R)): OperatorFunction<T|T[], R> {\n    return map(args => callOrApply(fn, args))\n}","import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf, ObservableInputTuple } from '../types';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { Subscriber } from '../Subscriber';\nimport { from } from './from';\nimport { identity } from '../util/identity';\nimport { Subscription } from '../Subscription';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { popResultSelector, popScheduler } from '../util/args';\nimport { createObject } from '../util/createObject';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { AnyCatcher } from '../AnyCatcher';\nimport { executeSchedule } from '../util/executeSchedule';\n\n// combineLatest(any)\n// We put this first because we need to catch cases where the user has supplied\n// _exactly `any`_ as the argument. Since `any` literally matches _anything_,\n// we don't want it to randomly hit one of the other type signatures below,\n// as we have no idea at build-time what type we should be returning when given an any.\n\n/**\n * You have passed `any` here, we can't figure out if it is\n * an array or an object, so you're getting `unknown`. Use better types.\n * @param arg Something typed as `any`\n */\nexport function combineLatest<T extends AnyCatcher>(arg: T): Observable<unknown>;\n\n// combineLatest([a, b, c])\nexport function combineLatest(sources: []): Observable<never>;\nexport function combineLatest<A extends readonly unknown[]>(sources: readonly [...ObservableInputTuple<A>]): Observable<A>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[], R>(\n  sources: readonly [...ObservableInputTuple<A>],\n  resultSelector: (...values: A) => R,\n  scheduler: SchedulerLike\n): Observable<R>;\nexport function combineLatest<A extends readonly unknown[], R>(\n  sources: readonly [...ObservableInputTuple<A>],\n  resultSelector: (...values: A) => R\n): Observable<R>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[]>(\n  sources: readonly [...ObservableInputTuple<A>],\n  scheduler: SchedulerLike\n): Observable<A>;\n\n// combineLatest(a, b, c)\n/** @deprecated Pass an array of sources instead. The rest-parameters signature will be removed in v8. Details: https://rxjs.dev/deprecations/array-argument */\nexport function combineLatest<A extends readonly unknown[]>(...sources: [...ObservableInputTuple<A>]): Observable<A>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[], R>(\n  ...sourcesAndResultSelectorAndScheduler: [...ObservableInputTuple<A>, (...values: A) => R, SchedulerLike]\n): Observable<R>;\n/** @deprecated Pass an array of sources instead. The rest-parameters signature will be removed in v8. Details: https://rxjs.dev/deprecations/array-argument */\nexport function combineLatest<A extends readonly unknown[], R>(\n  ...sourcesAndResultSelector: [...ObservableInputTuple<A>, (...values: A) => R]\n): Observable<R>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `combineLatestAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function combineLatest<A extends readonly unknown[]>(\n  ...sourcesAndScheduler: [...ObservableInputTuple<A>, SchedulerLike]\n): Observable<A>;\n\n// combineLatest({a, b, c})\nexport function combineLatest(sourcesObject: { [K in any]: never }): Observable<never>;\nexport function combineLatest<T extends Record<string, ObservableInput<any>>>(\n  sourcesObject: T\n): Observable<{ [K in keyof T]: ObservedValueOf<T[K]> }>;\n\n/**\n * Combines multiple Observables to create an Observable whose values are\n * calculated from the latest values of each of its input Observables.\n *\n * <span class=\"informal\">Whenever any input Observable emits a value, it\n * computes a formula using the latest values from all the inputs, then emits\n * the output of that formula.</span>\n *\n * ![](combineLatest.png)\n *\n * `combineLatest` combines the values from all the Observables passed in the\n * observables array. This is done by subscribing to each Observable in order and,\n * whenever any Observable emits, collecting an array of the most recent\n * values from each Observable. So if you pass `n` Observables to this operator,\n * the returned Observable will always emit an array of `n` values, in an order\n * corresponding to the order of the passed Observables (the value from the first Observable\n * will be at index 0 of the array and so on).\n *\n * Static version of `combineLatest` accepts an array of Observables. Note that an array of\n * Observables is a good choice, if you don't know beforehand how many Observables\n * you will combine. Passing an empty array will result in an Observable that\n * completes immediately.\n *\n * To ensure the output array always has the same length, `combineLatest` will\n * actually wait for all input Observables to emit at least once,\n * before it starts emitting results. This means if some Observable emits\n * values before other Observables started emitting, all these values but the last\n * will be lost. On the other hand, if some Observable does not emit a value but\n * completes, resulting Observable will complete at the same moment without\n * emitting anything, since it will now be impossible to include a value from the\n * completed Observable in the resulting array. Also, if some input Observable does\n * not emit any value and never completes, `combineLatest` will also never emit\n * and never complete, since, again, it will wait for all streams to emit some\n * value.\n *\n * If at least one Observable was passed to `combineLatest` and all passed Observables\n * emitted something, the resulting Observable will complete when all combined\n * streams complete. So even if some Observable completes, the result of\n * `combineLatest` will still emit values when other Observables do. In case\n * of a completed Observable, its value from now on will always be the last\n * emitted value. On the other hand, if any Observable errors, `combineLatest`\n * will error immediately as well, and all other Observables will be unsubscribed.\n *\n * ## Examples\n *\n * Combine two timer Observables\n *\n * ```ts\n * import { timer, combineLatest } from 'rxjs';\n *\n * const firstTimer = timer(0, 1000); // emit 0, 1, 2... after every second, starting from now\n * const secondTimer = timer(500, 1000); // emit 0, 1, 2... after every second, starting 0,5s from now\n * const combinedTimers = combineLatest([firstTimer, secondTimer]);\n * combinedTimers.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0] after 0.5s\n * // [1, 0] after 1s\n * // [1, 1] after 1.5s\n * // [2, 1] after 2s\n * ```\n *\n * Combine a dictionary of Observables\n *\n * ```ts\n * import { of, delay, startWith, combineLatest } from 'rxjs';\n *\n * const observables = {\n *   a: of(1).pipe(delay(1000), startWith(0)),\n *   b: of(5).pipe(delay(5000), startWith(0)),\n *   c: of(10).pipe(delay(10000), startWith(0))\n * };\n * const combined = combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // { a: 0, b: 0, c: 0 } immediately\n * // { a: 1, b: 0, c: 0 } after 1s\n * // { a: 1, b: 5, c: 0 } after 5s\n * // { a: 1, b: 5, c: 10 } after 10s\n * ```\n *\n * Combine an array of Observables\n *\n * ```ts\n * import { of, delay, startWith, combineLatest } from 'rxjs';\n *\n * const observables = [1, 5, 10].map(\n *   n => of(n).pipe(\n *     delay(n * 1000), // emit 0 and then emit n after n seconds\n *     startWith(0)\n *   )\n * );\n * const combined = combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0, 0] immediately\n * // [1, 0, 0] after 1s\n * // [1, 5, 0] after 5s\n * // [1, 5, 10] after 10s\n * ```\n *\n * Use map operator to dynamically calculate the Body-Mass Index\n *\n * ```ts\n * import { of, combineLatest, map } from 'rxjs';\n *\n * const weight = of(70, 72, 76, 79, 75);\n * const height = of(1.76, 1.77, 1.78);\n * const bmi = combineLatest([weight, height]).pipe(\n *   map(([w, h]) => w / (h * h)),\n * );\n * bmi.subscribe(x => console.log('BMI is ' + x));\n *\n * // With output to console:\n * // BMI is 24.212293388429753\n * // BMI is 23.93948099205209\n * // BMI is 23.671253629592222\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link merge}\n * @see {@link withLatestFrom}\n *\n * @param args Any number of `ObservableInput`s provided either as an array or as an object\n * to combine with each other. If the last parameter is the function, it will be used to project the\n * values from the combined latest values into a new value on the output Observable.\n * @return An Observable of projected values from the most recent values from each `ObservableInput`,\n * or an array of the most recent values from each `ObservableInput`.\n */\nexport function combineLatest<O extends ObservableInput<any>, R>(...args: any[]): Observable<R> | Observable<ObservedValueOf<O>[]> {\n  const scheduler = popScheduler(args);\n  const resultSelector = popResultSelector(args);\n\n  const { args: observables, keys } = argsArgArrayOrObject(args);\n\n  if (observables.length === 0) {\n    // If no observables are passed, or someone has passed an empty array\n    // of observables, or even an empty object POJO, we need to just\n    // complete (EMPTY), but we have to honor the scheduler provided if any.\n    return from([], scheduler as any);\n  }\n\n  const result = new Observable<ObservedValueOf<O>[]>(\n    combineLatestInit(\n      observables as ObservableInput<ObservedValueOf<O>>[],\n      scheduler,\n      keys\n        ? // A handler for scrubbing the array of args into a dictionary.\n          (values) => createObject(keys, values)\n        : // A passthrough to just return the array\n          identity\n    )\n  );\n\n  return resultSelector ? (result.pipe(mapOneOrManyArgs(resultSelector)) as Observable<R>) : result;\n}\n\nexport function combineLatestInit(\n  observables: ObservableInput<any>[],\n  scheduler?: SchedulerLike,\n  valueTransform: (values: any[]) => any = identity\n) {\n  return (subscriber: Subscriber<any>) => {\n    // The outer subscription. We're capturing this in a function\n    // because we may have to schedule it.\n    maybeSchedule(\n      scheduler,\n      () => {\n        const { length } = observables;\n        // A store for the values each observable has emitted so far. We match observable to value on index.\n        const values = new Array(length);\n        // The number of currently active subscriptions, as they complete, we decrement this number to see if\n        // we are all done combining values, so we can complete the result.\n        let active = length;\n        // The number of inner sources that still haven't emitted the first value\n        // We need to track this because all sources need to emit one value in order\n        // to start emitting values.\n        let remainingFirstValues = length;\n        // The loop to kick off subscription. We're keying everything on index `i` to relate the observables passed\n        // in to the slot in the output array or the key in the array of keys in the output dictionary.\n        for (let i = 0; i < length; i++) {\n          maybeSchedule(\n            scheduler,\n            () => {\n              const source = from(observables[i], scheduler as any);\n              let hasFirstValue = false;\n              source.subscribe(\n                createOperatorSubscriber(\n                  subscriber,\n                  (value) => {\n                    // When we get a value, record it in our set of values.\n                    values[i] = value;\n                    if (!hasFirstValue) {\n                      // If this is our first value, record that.\n                      hasFirstValue = true;\n                      remainingFirstValues--;\n                    }\n                    if (!remainingFirstValues) {\n                      // We're not waiting for any more\n                      // first values, so we can emit!\n                      subscriber.next(valueTransform(values.slice()));\n                    }\n                  },\n                  () => {\n                    if (!--active) {\n                      // We only complete the result if we have no more active\n                      // inner observables.\n                      subscriber.complete();\n                    }\n                  }\n                )\n              );\n            },\n            subscriber\n          );\n        }\n      },\n      subscriber\n    );\n  };\n}\n\n/**\n * A small utility to handle the couple of locations where we want to schedule if a scheduler was provided,\n * but we don't if there was no scheduler.\n */\nfunction maybeSchedule(scheduler: SchedulerLike | undefined, execute: () => void, subscription: Subscription) {\n  if (scheduler) {\n    executeSchedule(subscription, scheduler, execute);\n  } else {\n    execute();\n  }\n}\n","export function createObject(keys: string[], values: any[]) {\n  return keys.reduce((result, key, i) => ((result[key] = values[i]), result), {} as any);\n}\n","import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\n\n/**\n * A variant of Subject that requires an initial value and emits its current\n * value whenever it is subscribed to.\n */\nexport class BehaviorSubject<T> extends Subject<T> {\n  constructor(private _value: T) {\n    super();\n  }\n\n  get value(): T {\n    return this.getValue();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    const subscription = super._subscribe(subscriber);\n    !subscription.closed && subscriber.next(this._value);\n    return subscription;\n  }\n\n  getValue(): T {\n    const { hasError, thrownError, _value } = this;\n    if (hasError) {\n      throw thrownError;\n    }\n    this._throwIfClosed();\n    return _value;\n  }\n\n  next(value: T): void {\n    super.next((this._value = value));\n  }\n}\n","import { innerFrom } from '../observable/innerFrom';\nimport { Subject } from '../Subject';\nimport { SafeSubscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SubjectLike, ObservableInput } from '../types';\nimport { operate } from '../util/lift';\n\nexport interface ShareConfig<T> {\n  /**\n   * The factory used to create the subject that will connect the source observable to\n   * multicast consumers.\n   */\n  connector?: () => SubjectLike<T>;\n  /**\n   * If `true`, the resulting observable will reset internal state on error from source and return to a \"cold\" state. This\n   * allows the resulting observable to be \"retried\" in the event of an error.\n   * If `false`, when an error comes from the source it will push the error into the connecting subject, and the subject\n   * will remain the connecting subject, meaning the resulting observable will not go \"cold\" again, and subsequent retries\n   * or resubscriptions will resubscribe to that same subject. In all cases, RxJS subjects will emit the same error again, however\n   * {@link ReplaySubject} will also push its buffered values before pushing the error.\n   * It is also possible to pass a notifier factory returning an `ObservableInput` instead which grants more fine-grained\n   * control over how and when the reset should happen. This allows behaviors like conditional or delayed resets.\n   */\n  resetOnError?: boolean | ((error: any) => ObservableInput<any>);\n  /**\n   * If `true`, the resulting observable will reset internal state on completion from source and return to a \"cold\" state. This\n   * allows the resulting observable to be \"repeated\" after it is done.\n   * If `false`, when the source completes, it will push the completion through the connecting subject, and the subject\n   * will remain the connecting subject, meaning the resulting observable will not go \"cold\" again, and subsequent repeats\n   * or resubscriptions will resubscribe to that same subject.\n   * It is also possible to pass a notifier factory returning an `ObservableInput` instead which grants more fine-grained\n   * control over how and when the reset should happen. This allows behaviors like conditional or delayed resets.\n   */\n  resetOnComplete?: boolean | (() => ObservableInput<any>);\n  /**\n   * If `true`, when the number of subscribers to the resulting observable reaches zero due to those subscribers unsubscribing, the\n   * internal state will be reset and the resulting observable will return to a \"cold\" state. This means that the next\n   * time the resulting observable is subscribed to, a new subject will be created and the source will be subscribed to\n   * again.\n   * If `false`, when the number of subscribers to the resulting observable reaches zero due to unsubscription, the subject\n   * will remain connected to the source, and new subscriptions to the result will be connected through that same subject.\n   * It is also possible to pass a notifier factory returning an `ObservableInput` instead which grants more fine-grained\n   * control over how and when the reset should happen. This allows behaviors like conditional or delayed resets.\n   */\n  resetOnRefCountZero?: boolean | (() => ObservableInput<any>);\n}\n\nexport function share<T>(): MonoTypeOperatorFunction<T>;\n\nexport function share<T>(options: ShareConfig<T>): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one\n * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will\n * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.\n * This is an alias for `multicast(() => new Subject()), refCount()`.\n *\n * The subscription to the underlying source Observable can be reset (unsubscribe and resubscribe for new subscribers),\n * if the subscriber count to the shared observable drops to 0, or if the source Observable errors or completes. It is\n * possible to use notifier factories for the resets to allow for behaviors like conditional or delayed resets. Please\n * note that resetting on error or complete of the source Observable does not behave like a transparent retry or restart\n * of the source because the error or complete will be forwarded to all subscribers and their subscription will be\n * closed. Only new subscribers after a reset on error or complete happened will cause a fresh subscription to the\n * source. To achieve transparent retries or restarts pipe the source through appropriate operators before sharing.\n *\n * ![](share.png)\n *\n * ## Example\n *\n * Generate new multicast Observable from the `source` Observable value\n *\n * ```ts\n * import { interval, tap, map, take, share } from 'rxjs';\n *\n * const source = interval(1000).pipe(\n *   tap(x => console.log('Processing: ', x)),\n *   map(x => x * x),\n *   take(6),\n *   share()\n * );\n *\n * source.subscribe(x => console.log('subscription 1: ', x));\n * source.subscribe(x => console.log('subscription 2: ', x));\n *\n * // Logs:\n * // Processing: 0\n * // subscription 1: 0\n * // subscription 2: 0\n * // Processing: 1\n * // subscription 1: 1\n * // subscription 2: 1\n * // Processing: 2\n * // subscription 1: 4\n * // subscription 2: 4\n * // Processing: 3\n * // subscription 1: 9\n * // subscription 2: 9\n * // Processing: 4\n * // subscription 1: 16\n * // subscription 2: 16\n * // Processing: 5\n * // subscription 1: 25\n * // subscription 2: 25\n * ```\n *\n * ## Example with notifier factory: Delayed reset\n *\n * ```ts\n * import { interval, take, share, timer } from 'rxjs';\n *\n * const source = interval(1000).pipe(\n *   take(3),\n *   share({\n *     resetOnRefCountZero: () => timer(1000)\n *   })\n * );\n *\n * const subscriptionOne = source.subscribe(x => console.log('subscription 1: ', x));\n * setTimeout(() => subscriptionOne.unsubscribe(), 1300);\n *\n * setTimeout(() => source.subscribe(x => console.log('subscription 2: ', x)), 1700);\n *\n * setTimeout(() => source.subscribe(x => console.log('subscription 3: ', x)), 5000);\n *\n * // Logs:\n * // subscription 1:  0\n * // (subscription 1 unsubscribes here)\n * // (subscription 2 subscribes here ~400ms later, source was not reset)\n * // subscription 2:  1\n * // subscription 2:  2\n * // (subscription 2 unsubscribes here)\n * // (subscription 3 subscribes here ~2000ms later, source did reset before)\n * // subscription 3:  0\n * // subscription 3:  1\n * // subscription 3:  2\n * ```\n *\n * @see {@link shareReplay}\n *\n * @return A function that returns an Observable that mirrors the source.\n */\nexport function share<T>(options: ShareConfig<T> = {}): MonoTypeOperatorFunction<T> {\n  const { connector = () => new Subject<T>(), resetOnError = true, resetOnComplete = true, resetOnRefCountZero = true } = options;\n  // It's necessary to use a wrapper here, as the _operator_ must be\n  // referentially transparent. Otherwise, it cannot be used in calls to the\n  // static `pipe` function - to create a partial pipeline.\n  //\n  // The _operator function_ - the function returned by the _operator_ - will\n  // not be referentially transparent - as it shares its source - but the\n  // _operator function_ is called when the complete pipeline is composed via a\n  // call to a source observable's `pipe` method - not when the static `pipe`\n  // function is called.\n  return (wrapperSource) => {\n    let connection: SafeSubscriber<T> | undefined;\n    let resetConnection: Subscription | undefined;\n    let subject: SubjectLike<T> | undefined;\n    let refCount = 0;\n    let hasCompleted = false;\n    let hasErrored = false;\n\n    const cancelReset = () => {\n      resetConnection?.unsubscribe();\n      resetConnection = undefined;\n    };\n    // Used to reset the internal state to a \"cold\"\n    // state, as though it had never been subscribed to.\n    const reset = () => {\n      cancelReset();\n      connection = subject = undefined;\n      hasCompleted = hasErrored = false;\n    };\n    const resetAndUnsubscribe = () => {\n      // We need to capture the connection before\n      // we reset (if we need to reset).\n      const conn = connection;\n      reset();\n      conn?.unsubscribe();\n    };\n\n    return operate<T, T>((source, subscriber) => {\n      refCount++;\n      if (!hasErrored && !hasCompleted) {\n        cancelReset();\n      }\n\n      // Create the subject if we don't have one yet. Grab a local reference to\n      // it as well, which avoids non-null assertions when using it and, if we\n      // connect to it now, then error/complete need a reference after it was\n      // reset.\n      const dest = (subject = subject ?? connector());\n\n      // Add the finalization directly to the subscriber - instead of returning it -\n      // so that the handling of the subscriber's unsubscription will be wired\n      // up _before_ the subscription to the source occurs. This is done so that\n      // the assignment to the source connection's `closed` property will be seen\n      // by synchronous firehose sources.\n      subscriber.add(() => {\n        refCount--;\n\n        // If we're resetting on refCount === 0, and it's 0, we only want to do\n        // that on \"unsubscribe\", really. Resetting on error or completion is a different\n        // configuration.\n        if (refCount === 0 && !hasErrored && !hasCompleted) {\n          resetConnection = handleReset(resetAndUnsubscribe, resetOnRefCountZero);\n        }\n      });\n\n      // The following line adds the subscription to the subscriber passed.\n      // Basically, `subscriber === dest.subscribe(subscriber)` is `true`.\n      dest.subscribe(subscriber);\n\n      if (\n        !connection &&\n        // Check this shareReplay is still activate - it can be reset to 0\n        // and be \"unsubscribed\" _before_ it actually subscribes.\n        // If we were to subscribe then, it'd leak and get stuck.\n        refCount > 0\n      ) {\n        // We need to create a subscriber here - rather than pass an observer and\n        // assign the returned subscription to connection - because it's possible\n        // for reentrant subscriptions to the shared observable to occur and in\n        // those situations we want connection to be already-assigned so that we\n        // don't create another connection to the source.\n        connection = new SafeSubscriber({\n          next: (value) => dest.next(value),\n          error: (err) => {\n            hasErrored = true;\n            cancelReset();\n            resetConnection = handleReset(reset, resetOnError, err);\n            dest.error(err);\n          },\n          complete: () => {\n            hasCompleted = true;\n            cancelReset();\n            resetConnection = handleReset(reset, resetOnComplete);\n            dest.complete();\n          },\n        });\n        innerFrom(source).subscribe(connection);\n      }\n    })(wrapperSource);\n  };\n}\n\nfunction handleReset<T extends unknown[] = never[]>(\n  reset: () => void,\n  on: boolean | ((...args: T) => ObservableInput<any>),\n  ...args: T\n): Subscription | undefined {\n  if (on === true) {\n    reset();\n    return;\n  }\n\n  if (on === false) {\n    return;\n  }\n\n  const onSubscriber = new SafeSubscriber({\n    next: () => {\n      onSubscriber.unsubscribe();\n      reset();\n    },\n  });\n\n  return innerFrom(on(...args)).subscribe(onSubscriber);\n}\n","import { ReplaySubject } from '../ReplaySubject';\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { share } from './share';\n\nexport interface ShareReplayConfig {\n  bufferSize?: number;\n  windowTime?: number;\n  refCount: boolean;\n  scheduler?: SchedulerLike;\n}\n\nexport function shareReplay<T>(config: ShareReplayConfig): MonoTypeOperatorFunction<T>;\nexport function shareReplay<T>(bufferSize?: number, windowTime?: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n\n/**\n * Share source and replay specified number of emissions on subscription.\n *\n * This operator is a specialization of `replay` that connects to a source observable\n * and multicasts through a `ReplaySubject` constructed with the specified arguments.\n * A successfully completed source will stay cached in the `shareReplay`ed observable forever,\n * but an errored source can be retried.\n *\n * ## Why use `shareReplay`?\n *\n * You generally want to use `shareReplay` when you have side-effects or taxing computations\n * that you do not wish to be executed amongst multiple subscribers.\n * It may also be valuable in situations where you know you will have late subscribers to\n * a stream that need access to previously emitted values.\n * This ability to replay values on subscription is what differentiates {@link share} and `shareReplay`.\n *\n * ## Reference counting\n *\n * By default `shareReplay` will use `refCount` of false, meaning that it will _not_ unsubscribe the\n * source when the reference counter drops to zero, i.e. the inner `ReplaySubject` will _not_ be unsubscribed\n * (and potentially run for ever).\n * This is the default as it is expected that `shareReplay` is often used to keep around expensive to setup\n * observables which we want to keep running instead of having to do the expensive setup again.\n *\n * As of RXJS version 6.4.0 a new overload signature was added to allow for manual control over what\n * happens when the operators internal reference counter drops to zero.\n * If `refCount` is true, the source will be unsubscribed from once the reference count drops to zero, i.e.\n * the inner `ReplaySubject` will be unsubscribed. All new subscribers will receive value emissions from a\n * new `ReplaySubject` which in turn will cause a new subscription to the source observable.\n *\n * ## Examples\n *\n * Example with a third subscriber coming late to the party\n *\n * ```ts\n * import { interval, take, shareReplay } from 'rxjs';\n *\n * const shared$ = interval(2000).pipe(\n *   take(6),\n *   shareReplay(3)\n * );\n *\n * shared$.subscribe(x => console.log('sub A: ', x));\n * shared$.subscribe(y => console.log('sub B: ', y));\n *\n * setTimeout(() => {\n *   shared$.subscribe(y => console.log('sub C: ', y));\n * }, 11000);\n *\n * // Logs:\n * // (after ~2000 ms)\n * // sub A: 0\n * // sub B: 0\n * // (after ~4000 ms)\n * // sub A: 1\n * // sub B: 1\n * // (after ~6000 ms)\n * // sub A: 2\n * // sub B: 2\n * // (after ~8000 ms)\n * // sub A: 3\n * // sub B: 3\n * // (after ~10000 ms)\n * // sub A: 4\n * // sub B: 4\n * // (after ~11000 ms, sub C gets the last 3 values)\n * // sub C: 2\n * // sub C: 3\n * // sub C: 4\n * // (after ~12000 ms)\n * // sub A: 5\n * // sub B: 5\n * // sub C: 5\n * ```\n *\n * Example for `refCount` usage\n *\n * ```ts\n * import { Observable, tap, interval, shareReplay, take } from 'rxjs';\n *\n * const log = <T>(name: string, source: Observable<T>) => source.pipe(\n *   tap({\n *     subscribe: () => console.log(`${ name }: subscribed`),\n *     next: value => console.log(`${ name }: ${ value }`),\n *     complete: () => console.log(`${ name }: completed`),\n *     finalize: () => console.log(`${ name }: unsubscribed`)\n *   })\n * );\n *\n * const obs$ = log('source', interval(1000));\n *\n * const shared$ = log('shared', obs$.pipe(\n *   shareReplay({ bufferSize: 1, refCount: true }),\n *   take(2)\n * ));\n *\n * shared$.subscribe(x => console.log('sub A: ', x));\n * shared$.subscribe(y => console.log('sub B: ', y));\n *\n * // PRINTS:\n * // shared: subscribed <-- reference count = 1\n * // source: subscribed\n * // shared: subscribed <-- reference count = 2\n * // source: 0\n * // shared: 0\n * // sub A: 0\n * // shared: 0\n * // sub B: 0\n * // source: 1\n * // shared: 1\n * // sub A: 1\n * // shared: completed <-- take(2) completes the subscription for sub A\n * // shared: unsubscribed <-- reference count = 1\n * // shared: 1\n * // sub B: 1\n * // shared: completed <-- take(2) completes the subscription for sub B\n * // shared: unsubscribed <-- reference count = 0\n * // source: unsubscribed <-- replaySubject unsubscribes from source observable because the reference count dropped to 0 and refCount is true\n *\n * // In case of refCount being false, the unsubscribe is never called on the source and the source would keep on emitting, even if no subscribers\n * // are listening.\n * // source: 2\n * // source: 3\n * // source: 4\n * // ...\n * ```\n *\n * @see {@link publish}\n * @see {@link share}\n * @see {@link publishReplay}\n *\n * @param configOrBufferSize Maximum element count of the replay buffer or {@link ShareReplayConfig configuration}\n * object.\n * @param windowTime Maximum time length of the replay buffer in milliseconds.\n * @param scheduler Scheduler where connected observers within the selector function\n * will be invoked on.\n * @return A function that returns an Observable sequence that contains the\n * elements of a sequence produced by multicasting the source sequence within a\n * selector function.\n */\nexport function shareReplay<T>(\n  configOrBufferSize?: ShareReplayConfig | number,\n  windowTime?: number,\n  scheduler?: SchedulerLike\n): MonoTypeOperatorFunction<T> {\n  let bufferSize: number;\n  let refCount = false;\n  if (configOrBufferSize && typeof configOrBufferSize === 'object') {\n    ({ bufferSize = Infinity, windowTime = Infinity, refCount = false, scheduler } = configOrBufferSize);\n  } else {\n    bufferSize = (configOrBufferSize ?? Infinity) as number;\n  }\n  return share<T>({\n    connector: () => new ReplaySubject(bufferSize, windowTime, scheduler),\n    resetOnError: true,\n    resetOnComplete: false,\n    resetOnRefCountZero: refCount,\n  });\n}\n","import { MonoTypeOperatorFunction } from '../types';\nimport { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function distinctUntilChanged<T>(comparator?: (previous: T, current: T) => boolean): MonoTypeOperatorFunction<T>;\nexport function distinctUntilChanged<T, K>(\n  comparator: (previous: K, current: K) => boolean,\n  keySelector: (value: T) => K\n): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns a result {@link Observable} that emits all values pushed by the source observable if they\n * are distinct in comparison to the last value the result observable emitted.\n *\n * When provided without parameters or with the first parameter (`{@link distinctUntilChanged#comparator comparator}`),\n * it behaves like this:\n *\n * 1. It will always emit the first value from the source.\n * 2. For all subsequent values pushed by the source, they will be compared to the previously emitted values\n *    using the provided `comparator` or an `===` equality check.\n * 3. If the value pushed by the source is determined to be unequal by this check, that value is emitted and\n *    becomes the new \"previously emitted value\" internally.\n *\n * When the second parameter (`{@link distinctUntilChanged#keySelector keySelector}`) is provided, the behavior\n * changes:\n *\n * 1. It will always emit the first value from the source.\n * 2. The `keySelector` will be run against all values, including the first value.\n * 3. For all values after the first, the selected key will be compared against the key selected from\n *    the previously emitted value using the `comparator`.\n * 4. If the keys are determined to be unequal by this check, the value (not the key), is emitted\n *    and the selected key from that value is saved for future comparisons against other keys.\n *\n * ## Examples\n *\n * A very basic example with no `{@link distinctUntilChanged#comparator comparator}`. Note that `1` is emitted more than once,\n * because it's distinct in comparison to the _previously emitted_ value,\n * not in comparison to _all other emitted values_.\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * of(1, 1, 1, 2, 2, 2, 1, 1, 3, 3)\n *   .pipe(distinctUntilChanged())\n *   .subscribe(console.log);\n * // Logs: 1, 2, 1, 3\n * ```\n *\n * With a `{@link distinctUntilChanged#comparator comparator}`, you can do custom comparisons. Let's say\n * you only want to emit a value when all of its components have\n * changed:\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * const totallyDifferentBuilds$ = of(\n *   { engineVersion: '1.1.0', transmissionVersion: '1.2.0' },\n *   { engineVersion: '1.1.0', transmissionVersion: '1.4.0' },\n *   { engineVersion: '1.3.0', transmissionVersion: '1.4.0' },\n *   { engineVersion: '1.3.0', transmissionVersion: '1.5.0' },\n *   { engineVersion: '2.0.0', transmissionVersion: '1.5.0' }\n * ).pipe(\n *   distinctUntilChanged((prev, curr) => {\n *     return (\n *       prev.engineVersion === curr.engineVersion ||\n *       prev.transmissionVersion === curr.transmissionVersion\n *     );\n *   })\n * );\n *\n * totallyDifferentBuilds$.subscribe(console.log);\n *\n * // Logs:\n * // { engineVersion: '1.1.0', transmissionVersion: '1.2.0' }\n * // { engineVersion: '1.3.0', transmissionVersion: '1.4.0' }\n * // { engineVersion: '2.0.0', transmissionVersion: '1.5.0' }\n * ```\n *\n * You can also provide a custom `{@link distinctUntilChanged#comparator comparator}` to check that emitted\n * changes are only in one direction. Let's say you only want to get\n * the next record temperature:\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * const temps$ = of(30, 31, 20, 34, 33, 29, 35, 20);\n *\n * const recordHighs$ = temps$.pipe(\n *   distinctUntilChanged((prevHigh, temp) => {\n *     // If the current temp is less than\n *     // or the same as the previous record,\n *     // the record hasn't changed.\n *     return temp <= prevHigh;\n *   })\n * );\n *\n * recordHighs$.subscribe(console.log);\n * // Logs: 30, 31, 34, 35\n * ```\n *\n * Selecting update events only when the `updatedBy` field shows\n * the account changed hands.\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * // A stream of updates to a given account\n * const accountUpdates$ = of(\n *   { updatedBy: 'blesh', data: [] },\n *   { updatedBy: 'blesh', data: [] },\n *   { updatedBy: 'ncjamieson', data: [] },\n *   { updatedBy: 'ncjamieson', data: [] },\n *   { updatedBy: 'blesh', data: [] }\n * );\n *\n * // We only want the events where it changed hands\n * const changedHands$ = accountUpdates$.pipe(\n *   distinctUntilChanged(undefined, update => update.updatedBy)\n * );\n *\n * changedHands$.subscribe(console.log);\n * // Logs:\n * // { updatedBy: 'blesh', data: Array[0] }\n * // { updatedBy: 'ncjamieson', data: Array[0] }\n * // { updatedBy: 'blesh', data: Array[0] }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param comparator A function used to compare the previous and current keys for\n * equality. Defaults to a `===` check.\n * @param keySelector Used to select a key value to be passed to the `comparator`.\n *\n * @return A function that returns an Observable that emits items from the\n * source Observable with distinct values.\n */\nexport function distinctUntilChanged<T, K>(\n  comparator?: (previous: K, current: K) => boolean,\n  keySelector: (value: T) => K = identity as (value: T) => K\n): MonoTypeOperatorFunction<T> {\n  // We've been allowing `null` do be passed as the `compare`, so we can't do\n  // a default value for the parameter, because that will only work\n  // for `undefined`.\n  comparator = comparator ?? defaultCompare;\n\n  return operate((source, subscriber) => {\n    // The previous key, used to compare against keys selected\n    // from new arrivals to determine \"distinctiveness\".\n    let previousKey: K;\n    // Whether or not this is the first value we've gotten.\n    let first = true;\n\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        // We always call the key selector.\n        const currentKey = keySelector(value);\n\n        // If it's the first value, we always emit it.\n        // Otherwise, we compare this key to the previous key, and\n        // if the comparer returns false, we emit.\n        if (first || !comparator!(previousKey, currentKey)) {\n          // Update our state *before* we emit the value\n          // as emission can be the source of re-entrant code\n          // in functional libraries like this. We only really\n          // need to do this if it's the first value, or if the\n          // key we're tracking in previous needs to change.\n          first = false;\n          previousKey = currentKey;\n\n          // Emit the value!\n          subscriber.next(value);\n        }\n      })\n    );\n  });\n}\n\nfunction defaultCompare(a: any, b: any) {\n  return a === b;\n}\n","import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function takeWhile<T>(predicate: BooleanConstructor, inclusive: true): MonoTypeOperatorFunction<T>;\nexport function takeWhile<T>(predicate: BooleanConstructor, inclusive: false): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function takeWhile<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S, inclusive: false): OperatorFunction<T, S>;\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive?: boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * ![](takeWhile.png)\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * ## Example\n *\n * Emit click events only while the clientX property is greater than 200\n *\n * ```ts\n * import { fromEvent, takeWhile } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const result = clicks.pipe(takeWhile(ev => ev.clientX > 200));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param predicate A function that evaluates a value emitted by the source\n * Observable and returns a boolean. Also takes the (zero-based) index as the\n * second argument.\n * @param inclusive When set to `true` the value that caused `predicate` to\n * return `false` will also be emitted.\n * @return A function that returns an Observable that emits values from the\n * source Observable so long as each value satisfies the condition defined by\n * the `predicate`, then completes.\n */\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive = false): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let index = 0;\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        const result = predicate(value, index++);\n        (result || inclusive) && subscriber.next(value);\n        !result && subscriber.complete();\n      })\n    );\n  });\n}\n","import { distinctUntilChanged } from './distinctUntilChanged';\nimport { MonoTypeOperatorFunction } from '../types';\n\nexport function distinctUntilKeyChanged<T>(key: keyof T): MonoTypeOperatorFunction<T>;\nexport function distinctUntilKeyChanged<T, K extends keyof T>(key: K, compare: (x: T[K], y: T[K]) => boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns an Observable that emits all items emitted by the source Observable that\n * are distinct by comparison from the previous item, using a property accessed by\n * using the key provided to check if the two items are distinct.\n *\n * If a comparator function is provided, then it will be called for each item to\n * test for whether that value should be emitted or not.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * ## Examples\n *\n * An example comparing the name of persons\n *\n * ```ts\n * import { of, distinctUntilKeyChanged } from 'rxjs';\n *\n * of(\n *   { age: 4, name: 'Foo' },\n *   { age: 7, name: 'Bar' },\n *   { age: 5, name: 'Foo' },\n *   { age: 6, name: 'Foo' }\n * ).pipe(\n *   distinctUntilKeyChanged('name')\n * )\n * .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n * ```\n *\n * An example comparing the first letters of the name\n *\n * ```ts\n * import { of, distinctUntilKeyChanged } from 'rxjs';\n *\n * of(\n *   { age: 4, name: 'Foo1' },\n *   { age: 7, name: 'Bar' },\n *   { age: 5, name: 'Foo2' },\n *   { age: 6, name: 'Foo3' }\n * ).pipe(\n *   distinctUntilKeyChanged('name', (x, y) => x.substring(0, 3) === y.substring(0, 3))\n * )\n * .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo1' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo2' }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n *\n * @param key String key for object property lookup on each item.\n * @param compare Optional comparison function called to test if an item is distinct\n * from the previous item in the source.\n * @return A function that returns an Observable that emits items from the source\n * Observable with distinct values based on the key specified.\n */\nexport function distinctUntilKeyChanged<T, K extends keyof T>(\n  key: K,\n  compare?: (x: T[K], y: T[K]) => boolean\n): MonoTypeOperatorFunction<T> {\n  return distinctUntilChanged((x: T, y: T) => (compare ? compare(x[key], y[key]) : x[key] === y[key]));\n}\n","import { Observable } from '../Observable';\nimport { isFunction } from '../util/isFunction';\nimport { NodeEventHandler } from './fromEvent';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\n\n/* tslint:disable:max-line-length */\nexport function fromEventPattern<T>(\n  addHandler: (handler: NodeEventHandler) => any,\n  removeHandler?: (handler: NodeEventHandler, signal?: any) => void\n): Observable<T>;\nexport function fromEventPattern<T>(\n  addHandler: (handler: NodeEventHandler) => any,\n  removeHandler?: (handler: NodeEventHandler, signal?: any) => void,\n  resultSelector?: (...args: any[]) => T\n): Observable<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Creates an Observable from an arbitrary API for registering event handlers.\n *\n * <span class=\"informal\">When that method for adding event handler was something {@link fromEvent}\n * was not prepared for.</span>\n *\n * ![](fromEventPattern.png)\n *\n * `fromEventPattern` allows you to convert into an Observable any API that supports registering handler functions\n * for events. It is similar to {@link fromEvent}, but far\n * more flexible. In fact, all use cases of {@link fromEvent} could be easily handled by\n * `fromEventPattern` (although in slightly more verbose way).\n *\n * This operator accepts as a first argument an `addHandler` function, which will be injected with\n * handler parameter. That handler is actually an event handler function that you now can pass\n * to API expecting it. `addHandler` will be called whenever Observable\n * returned by the operator is subscribed, so registering handler in API will not\n * necessarily happen when `fromEventPattern` is called.\n *\n * After registration, every time an event that we listen to happens,\n * Observable returned by `fromEventPattern` will emit value that event handler\n * function was called with. Note that if event handler was called with more\n * than one argument, second and following arguments will not appear in the Observable.\n *\n * If API you are using allows to unregister event handlers as well, you can pass to `fromEventPattern`\n * another function - `removeHandler` - as a second parameter. It will be injected\n * with the same handler function as before, which now you can use to unregister\n * it from the API. `removeHandler` will be called when consumer of resulting Observable\n * unsubscribes from it.\n *\n * In some APIs unregistering is actually handled differently. Method registering an event handler\n * returns some kind of token, which is later used to identify which function should\n * be unregistered or it itself has method that unregisters event handler.\n * If that is the case with your API, make sure token returned\n * by registering method is returned by `addHandler`. Then it will be passed\n * as a second argument to `removeHandler`, where you will be able to use it.\n *\n * If you need access to all event handler parameters (not only the first one),\n * or you need to transform them in any way, you can call `fromEventPattern` with optional\n * third parameter - project function which will accept all arguments passed to\n * event handler when it is called. Whatever is returned from project function will appear on\n * resulting stream instead of usual event handlers first argument. This means\n * that default project can be thought of as function that takes its first parameter\n * and ignores the rest.\n *\n * ## Examples\n *\n * Emits clicks happening on the DOM document\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * function addClickHandler(handler) {\n *   document.addEventListener('click', handler);\n * }\n *\n * function removeClickHandler(handler) {\n *   document.removeEventListener('click', handler);\n * }\n *\n * const clicks = fromEventPattern(\n *   addClickHandler,\n *   removeClickHandler\n * );\n * clicks.subscribe(x => console.log(x));\n *\n * // Whenever you click anywhere in the browser, DOM MouseEvent\n * // object will be logged.\n * ```\n *\n * Use with API that returns cancellation token\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * const token = someAPI.registerEventHandler(function() {});\n * someAPI.unregisterEventHandler(token); // this APIs cancellation method accepts\n *                                        // not handler itself, but special token.\n *\n * const someAPIObservable = fromEventPattern(\n *   function(handler) { return someAPI.registerEventHandler(handler); }, // Note that we return the token here...\n *   function(handler, token) { someAPI.unregisterEventHandler(token); }  // ...to then use it here.\n * );\n * ```\n *\n * Use with project function\n *\n * ```ts\n * import { fromEventPattern } from 'rxjs';\n *\n * someAPI.registerEventHandler((eventType, eventMessage) => {\n *   console.log(eventType, eventMessage); // Logs 'EVENT_TYPE' 'EVENT_MESSAGE' to console.\n * });\n *\n * const someAPIObservable = fromEventPattern(\n *   handler => someAPI.registerEventHandler(handler),\n *   handler => someAPI.unregisterEventHandler(handler)\n *   (eventType, eventMessage) => eventType + ' --- ' + eventMessage // without that function only 'EVENT_TYPE'\n * );                                                                // would be emitted by the Observable\n *\n * someAPIObservable.subscribe(value => console.log(value));\n *\n * // Logs:\n * // 'EVENT_TYPE --- EVENT_MESSAGE'\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n *\n * @param addHandler A function that takes a `handler` function as argument and attaches it\n * somehow to the actual source of events.\n * @param removeHandler A function that takes a `handler` function as an argument and removes\n * it from the event source. If `addHandler` returns some kind of token, `removeHandler` function\n * will have it as a second parameter.\n * @param resultSelector A function to transform results. It takes the arguments from the event\n * handler and should return a single value.\n * @return Observable which, when an event happens, emits first parameter passed to registered\n * event handler. Alternatively it emits whatever project function returns at that moment.\n */\nexport function fromEventPattern<T>(\n  addHandler: (handler: NodeEventHandler) => any,\n  removeHandler?: (handler: NodeEventHandler, signal?: any) => void,\n  resultSelector?: (...args: any[]) => T\n): Observable<T | T[]> {\n  if (resultSelector) {\n    return fromEventPattern<T>(addHandler, removeHandler).pipe(mapOneOrManyArgs(resultSelector));\n  }\n\n  return new Observable<T | T[]>((subscriber) => {\n    const handler = (...e: T[]) => subscriber.next(e.length === 1 ? e[0] : e);\n    const retValue = addHandler(handler);\n    return isFunction(removeHandler) ? () => removeHandler(handler, retValue) : undefined;\n  });\n}\n","import { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\n\n/* tslint:disable:max-line-length */\nexport function mergeMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  concurrent?: number\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function mergeMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined,\n  concurrent?: number\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function mergeMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R,\n  concurrent?: number\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link mergeAll}.</span>\n *\n * ![](mergeMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger.\n *\n * ## Example\n *\n * Map and flatten each letter to an Observable ticking every 1 second\n *\n * ```ts\n * import { of, mergeMap, interval, map } from 'rxjs';\n *\n * const letters = of('a', 'b', 'c');\n * const result = letters.pipe(\n *   mergeMap(x => interval(1000).pipe(map(i => x + i)))\n * );\n *\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // a0\n * // b0\n * // c0\n * // a1\n * // b1\n * // c1\n * // continues to list a, b, c every second with respective ascending integers\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchMap}\n *\n * @param project A function that, when applied to an item emitted by the source\n * Observable, returns an Observable.\n * @param concurrent Maximum number of `ObservableInput`s being subscribed to concurrently.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and merging\n * the results of the Observables obtained from this transformation.\n */\nexport function mergeMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: ((outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R) | number,\n  concurrent: number = Infinity\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  if (isFunction(resultSelector)) {\n    // DEPRECATED PATH\n    return mergeMap((a, i) => map((b: any, ii: number) => resultSelector(a, b, i, ii))(innerFrom(project(a, i))), concurrent);\n  } else if (typeof resultSelector === 'number') {\n    concurrent = resultSelector;\n  }\n\n  return operate((source, subscriber) => mergeInternals(source, subscriber, project, concurrent));\n}\n","import { Observable } from '../Observable';\nimport { innerFrom } from '../observable/innerFrom';\nimport { Subscriber } from '../Subscriber';\nimport { ObservableInput, SchedulerLike } from '../types';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * A process embodying the general \"merge\" strategy. This is used in\n * `mergeMap` and `mergeScan` because the logic is otherwise nearly identical.\n * @param source The original source observable\n * @param subscriber The consumer subscriber\n * @param project The projection function to get our inner sources\n * @param concurrent The number of concurrent inner subscriptions\n * @param onBeforeNext Additional logic to apply before nexting to our consumer\n * @param expand If `true` this will perform an \"expand\" strategy, which differs only\n * in that it recurses, and the inner subscription must be schedule-able.\n * @param innerSubScheduler A scheduler to use to schedule inner subscriptions,\n * this is to support the expand strategy, mostly, and should be deprecated\n */\nexport function mergeInternals<T, R>(\n  source: Observable<T>,\n  subscriber: Subscriber<R>,\n  project: (value: T, index: number) => ObservableInput<R>,\n  concurrent: number,\n  onBeforeNext?: (innerValue: R) => void,\n  expand?: boolean,\n  innerSubScheduler?: SchedulerLike,\n  additionalFinalizer?: () => void\n) {\n  // Buffered values, in the event of going over our concurrency limit\n  const buffer: T[] = [];\n  // The number of active inner subscriptions.\n  let active = 0;\n  // An index to pass to our accumulator function\n  let index = 0;\n  // Whether or not the outer source has completed.\n  let isComplete = false;\n\n  /**\n   * Checks to see if we can complete our result or not.\n   */\n  const checkComplete = () => {\n    // If the outer has completed, and nothing is left in the buffer,\n    // and we don't have any active inner subscriptions, then we can\n    // Emit the state and complete.\n    if (isComplete && !buffer.length && !active) {\n      subscriber.complete();\n    }\n  };\n\n  // If we're under our concurrency limit, just start the inner subscription, otherwise buffer and wait.\n  const outerNext = (value: T) => (active < concurrent ? doInnerSub(value) : buffer.push(value));\n\n  const doInnerSub = (value: T) => {\n    // If we're expanding, we need to emit the outer values and the inner values\n    // as the inners will \"become outers\" in a way as they are recursively fed\n    // back to the projection mechanism.\n    expand && subscriber.next(value as any);\n\n    // Increment the number of active subscriptions so we can track it\n    // against our concurrency limit later.\n    active++;\n\n    // A flag used to show that the inner observable completed.\n    // This is checked during finalization to see if we should\n    // move to the next item in the buffer, if there is on.\n    let innerComplete = false;\n\n    // Start our inner subscription.\n    innerFrom(project(value, index++)).subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (innerValue) => {\n          // `mergeScan` has additional handling here. For example\n          // taking the inner value and updating state.\n          onBeforeNext?.(innerValue);\n\n          if (expand) {\n            // If we're expanding, then just recurse back to our outer\n            // handler. It will emit the value first thing.\n            outerNext(innerValue as any);\n          } else {\n            // Otherwise, emit the inner value.\n            subscriber.next(innerValue);\n          }\n        },\n        () => {\n          // Flag that we have completed, so we know to check the buffer\n          // during finalization.\n          innerComplete = true;\n        },\n        // Errors are passed to the destination.\n        undefined,\n        () => {\n          // During finalization, if the inner completed (it wasn't errored or\n          // cancelled), then we want to try the next item in the buffer if\n          // there is one.\n          if (innerComplete) {\n            // We have to wrap this in a try/catch because it happens during\n            // finalization, possibly asynchronously, and we want to pass\n            // any errors that happen (like in a projection function) to\n            // the outer Subscriber.\n            try {\n              // INNER SOURCE COMPLETE\n              // Decrement the active count to ensure that the next time\n              // we try to call `doInnerSub`, the number is accurate.\n              active--;\n              // If we have more values in the buffer, try to process those\n              // Note that this call will increment `active` ahead of the\n              // next conditional, if there were any more inner subscriptions\n              // to start.\n              while (buffer.length && active < concurrent) {\n                const bufferedValue = buffer.shift()!;\n                // Particularly for `expand`, we need to check to see if a scheduler was provided\n                // for when we want to start our inner subscription. Otherwise, we just start\n                // are next inner subscription.\n                if (innerSubScheduler) {\n                  executeSchedule(subscriber, innerSubScheduler, () => doInnerSub(bufferedValue));\n                } else {\n                  doInnerSub(bufferedValue);\n                }\n              }\n              // Check to see if we can complete, and complete if so.\n              checkComplete();\n            } catch (err) {\n              subscriber.error(err);\n            }\n          }\n        }\n      )\n    );\n  };\n\n  // Subscribe to our source observable.\n  source.subscribe(\n    createOperatorSubscriber(subscriber, outerNext, () => {\n      // Outer completed, make a note of it, and check to see if we can complete everything.\n      isComplete = true;\n      checkComplete();\n    })\n  );\n\n  // Additional finalization (for when the destination is torn down).\n  // Other finalization is added implicitly via subscription above.\n  return () => {\n    additionalFinalizer?.();\n  };\n}\n","import { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\n\n// These constants are used to create handler registry functions using array mapping below.\nconst nodeEventEmitterMethods = ['addListener', 'removeListener'] as const;\nconst eventTargetMethods = ['addEventListener', 'removeEventListener'] as const;\nconst jqueryMethods = ['on', 'off'] as const;\n\nexport interface NodeStyleEventEmitter {\n  addListener(eventName: string | symbol, handler: NodeEventHandler): this;\n  removeListener(eventName: string | symbol, handler: NodeEventHandler): this;\n}\n\nexport type NodeEventHandler = (...args: any[]) => void;\n\n// For APIs that implement `addListener` and `removeListener` methods that may\n// not use the same arguments or return EventEmitter values\n// such as React Native\nexport interface NodeCompatibleEventEmitter {\n  addListener(eventName: string, handler: NodeEventHandler): void | {};\n  removeListener(eventName: string, handler: NodeEventHandler): void | {};\n}\n\n// Use handler types like those in @types/jquery. See:\n// https://github.com/DefinitelyTyped/DefinitelyTyped/blob/847731ba1d7fa6db6b911c0e43aa0afe596e7723/types/jquery/misc.d.ts#L6395\nexport interface JQueryStyleEventEmitter<TContext, T> {\n  on(eventName: string, handler: (this: TContext, t: T, ...args: any[]) => any): void;\n  off(eventName: string, handler: (this: TContext, t: T, ...args: any[]) => any): void;\n}\n\nexport interface EventListenerObject<E> {\n  handleEvent(evt: E): void;\n}\n\nexport interface HasEventTargetAddRemove<E> {\n  addEventListener(\n    type: string,\n    listener: ((evt: E) => void) | EventListenerObject<E> | null,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: ((evt: E) => void) | EventListenerObject<E> | null,\n    options?: EventListenerOptions | boolean\n  ): void;\n}\n\nexport interface EventListenerOptions {\n  capture?: boolean;\n  passive?: boolean;\n  once?: boolean;\n}\n\nexport interface AddEventListenerOptions extends EventListenerOptions {\n  once?: boolean;\n  passive?: boolean;\n}\n\nexport function fromEvent<T>(target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>, eventName: string): Observable<T>;\nexport function fromEvent<T, R>(\n  target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>,\n  eventName: string,\n  resultSelector: (event: T) => R\n): Observable<R>;\nexport function fromEvent<T>(\n  target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>,\n  eventName: string,\n  options: EventListenerOptions\n): Observable<T>;\nexport function fromEvent<T, R>(\n  target: HasEventTargetAddRemove<T> | ArrayLike<HasEventTargetAddRemove<T>>,\n  eventName: string,\n  options: EventListenerOptions,\n  resultSelector: (event: T) => R\n): Observable<R>;\n\nexport function fromEvent(target: NodeStyleEventEmitter | ArrayLike<NodeStyleEventEmitter>, eventName: string): Observable<unknown>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function fromEvent<T>(target: NodeStyleEventEmitter | ArrayLike<NodeStyleEventEmitter>, eventName: string): Observable<T>;\nexport function fromEvent<R>(\n  target: NodeStyleEventEmitter | ArrayLike<NodeStyleEventEmitter>,\n  eventName: string,\n  resultSelector: (...args: any[]) => R\n): Observable<R>;\n\nexport function fromEvent(\n  target: NodeCompatibleEventEmitter | ArrayLike<NodeCompatibleEventEmitter>,\n  eventName: string\n): Observable<unknown>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function fromEvent<T>(target: NodeCompatibleEventEmitter | ArrayLike<NodeCompatibleEventEmitter>, eventName: string): Observable<T>;\nexport function fromEvent<R>(\n  target: NodeCompatibleEventEmitter | ArrayLike<NodeCompatibleEventEmitter>,\n  eventName: string,\n  resultSelector: (...args: any[]) => R\n): Observable<R>;\n\nexport function fromEvent<T>(\n  target: JQueryStyleEventEmitter<any, T> | ArrayLike<JQueryStyleEventEmitter<any, T>>,\n  eventName: string\n): Observable<T>;\nexport function fromEvent<T, R>(\n  target: JQueryStyleEventEmitter<any, T> | ArrayLike<JQueryStyleEventEmitter<any, T>>,\n  eventName: string,\n  resultSelector: (value: T, ...args: any[]) => R\n): Observable<R>;\n\n/**\n * Creates an Observable that emits events of a specific type coming from the\n * given event target.\n *\n * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n * EventEmitter events or others.</span>\n *\n * ![](fromEvent.png)\n *\n * `fromEvent` accepts as a first argument event target, which is an object with methods\n * for registering event handler functions. As a second argument it takes string that indicates\n * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n * which are described in detail below. If your event target does not match any of the ones listed,\n * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n * handler functions have different names, but they all accept a string describing event type\n * and function itself, which will be called whenever said event happens.\n *\n * Every time resulting Observable is subscribed, event handler function will be registered\n * to event target on given event type. When that event fires, value\n * passed as a first argument to registered function will be emitted by output Observable.\n * When Observable is unsubscribed, function will be unregistered from event target.\n *\n * Note that if event target calls registered function with more than one argument, second\n * and following arguments will not appear in resulting stream. In order to get access to them,\n * you can pass to `fromEvent` optional project function, which will be called with all arguments\n * passed to event handler. Output Observable will then emit value returned by project function,\n * instead of the usual value.\n *\n * Remember that event targets listed below are checked via duck typing. It means that\n * no matter what kind of object you have and no matter what environment you work in,\n * you can safely use `fromEvent` on that object if it exposes described methods (provided\n * of course they behave as was described above). So for example if Node.js library exposes\n * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n * a good choice.\n *\n * If the API you use is more callback then event handler oriented (subscribed\n * callback function fires only once and thus there is no need to manually\n * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n * instead.\n *\n * `fromEvent` supports following types of event targets:\n *\n * **DOM EventTarget**\n *\n * This is an object with `addEventListener` and `removeEventListener` methods.\n *\n * In the browser, `addEventListener` accepts - apart from event type string and event\n * handler function arguments - optional third parameter, which is either an object or boolean,\n * both used for additional configuration how and when passed function will be called. When\n * `fromEvent` is used with event target of that type, you can provide this values\n * as third parameter as well.\n *\n * **Node.js EventEmitter**\n *\n * An object with `addListener` and `removeListener` methods.\n *\n * **JQuery-style event target**\n *\n * An object with `on` and `off` methods\n *\n * **DOM NodeList**\n *\n * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n *\n * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n * it contains and install event handler function in every of them. When returned Observable\n * is unsubscribed, function will be removed from all Nodes.\n *\n * **DOM HtmlCollection**\n *\n * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n * installed and removed in each of elements.\n *\n *\n * ## Examples\n *\n * Emit clicks happening on the DOM document\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * clicks.subscribe(x => console.log(x));\n *\n * // Results in:\n * // MouseEvent object logged to console every time a click\n * // occurs on the document.\n * ```\n *\n * Use `addEventListener` with capture option\n *\n * ```ts\n * import { fromEvent } from 'rxjs';\n *\n * const div = document.createElement('div');\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\n * document.body.appendChild(div);\n *\n * // note optional configuration parameter which will be passed to addEventListener\n * const clicksInDocument = fromEvent(document, 'click', { capture: true });\n * const clicksInDiv = fromEvent(div, 'click');\n *\n * clicksInDocument.subscribe(() => console.log('document'));\n * clicksInDiv.subscribe(() => console.log('div'));\n *\n * // By default events bubble UP in DOM tree, so normally\n * // when we would click on div in document\n * // \"div\" would be logged first and then \"document\".\n * // Since we specified optional `capture` option, document\n * // will catch event when it goes DOWN DOM tree, so console\n * // will log \"document\" and then \"div\".\n * ```\n *\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n * @see {@link fromEventPattern}\n *\n * @param target The DOM EventTarget, Node.js EventEmitter, JQuery-like event target,\n * NodeList or HTMLCollection to attach the event handler to.\n * @param eventName The event name of interest, being emitted by the `target`.\n * @param options Options to pass through to the underlying `addListener`,\n * `addEventListener` or `on` functions.\n * @param resultSelector A mapping function used to transform events. It takes the\n * arguments from the event handler and should return a single value.\n * @return An Observable emitting events registered through `target`'s\n * listener handlers.\n */\nexport function fromEvent<T>(\n  target: any,\n  eventName: string,\n  options?: EventListenerOptions | ((...args: any[]) => T),\n  resultSelector?: (...args: any[]) => T\n): Observable<T> {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n  if (resultSelector) {\n    return fromEvent<T>(target, eventName, options as EventListenerOptions).pipe(mapOneOrManyArgs(resultSelector));\n  }\n\n  // Figure out our add and remove methods. In order to do this,\n  // we are going to analyze the target in a preferred order, if\n  // the target matches a given signature, we take the two \"add\" and \"remove\"\n  // method names and apply them to a map to create opposite versions of the\n  // same function. This is because they all operate in duplicate pairs,\n  // `addListener(name, handler)`, `removeListener(name, handler)`, for example.\n  // The call only differs by method name, as to whether or not you're adding or removing.\n  const [add, remove] =\n    // If it is an EventTarget, we need to use a slightly different method than the other two patterns.\n    isEventTarget(target)\n      ? eventTargetMethods.map((methodName) => (handler: any) => target[methodName](eventName, handler, options as EventListenerOptions))\n      : // In all other cases, the call pattern is identical with the exception of the method names.\n      isNodeStyleEventEmitter(target)\n      ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n      : isJQueryStyleEventEmitter(target)\n      ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n      : [];\n\n  // If add is falsy, it's because we didn't match a pattern above.\n  // Check to see if it is an ArrayLike, because if it is, we want to\n  // try to apply fromEvent to all of it's items. We do this check last,\n  // because there are may be some types that are both ArrayLike *and* implement\n  // event registry points, and we'd rather delegate to that when possible.\n  if (!add) {\n    if (isArrayLike(target)) {\n      return mergeMap((subTarget: any) => fromEvent(subTarget, eventName, options as EventListenerOptions))(\n        innerFrom(target)\n      ) as Observable<T>;\n    }\n  }\n\n  // If add is falsy and we made it here, it's because we didn't\n  // match any valid target objects above.\n  if (!add) {\n    throw new TypeError('Invalid event target');\n  }\n\n  return new Observable<T>((subscriber) => {\n    // The handler we are going to register. Forwards the event object, by itself, or\n    // an array of arguments to the event handler, if there is more than one argument,\n    // to the consumer.\n    const handler = (...args: any[]) => subscriber.next(1 < args.length ? args : args[0]);\n    // Do the work of adding the handler to the target.\n    add(handler);\n    // When we finalize, we want to remove the handler and free up memory.\n    return () => remove!(handler);\n  });\n}\n\n/**\n * Used to create `add` and `remove` functions to register and unregister event handlers\n * from a target in the most common handler pattern, where there are only two arguments.\n * (e.g.  `on(name, fn)`, `off(name, fn)`, `addListener(name, fn)`, or `removeListener(name, fn)`)\n * @param target The target we're calling methods on\n * @param eventName The event name for the event we're creating register or unregister functions for\n */\nfunction toCommonHandlerRegistry(target: any, eventName: string) {\n  return (methodName: string) => (handler: any) => target[methodName](eventName, handler);\n}\n\n/**\n * Checks to see if the target implements the required node-style EventEmitter methods\n * for adding and removing event handlers.\n * @param target the object to check\n */\nfunction isNodeStyleEventEmitter(target: any): target is NodeStyleEventEmitter {\n  return isFunction(target.addListener) && isFunction(target.removeListener);\n}\n\n/**\n * Checks to see if the target implements the required jQuery-style EventEmitter methods\n * for adding and removing event handlers.\n * @param target the object to check\n */\nfunction isJQueryStyleEventEmitter(target: any): target is JQueryStyleEventEmitter<any, any> {\n  return isFunction(target.on) && isFunction(target.off);\n}\n\n/**\n * Checks to see if the target implements the required EventTarget methods\n * for adding and removing event handlers.\n * @param target the object to check\n */\nfunction isEventTarget(target: any): target is HasEventTargetAddRemove<any> {\n  return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n","import { Scheduler } from '../Scheduler';\nimport { Subscription } from '../Subscription';\nimport { SchedulerAction } from '../types';\n\n/**\n * A unit of work to be executed in a `scheduler`. An action is typically\n * created from within a {@link SchedulerLike} and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n */\nexport class Action<T> extends Subscription {\n  constructor(scheduler: Scheduler, work: (this: SchedulerAction<T>, state?: T) => void) {\n    super();\n  }\n  /**\n   * Schedules this action on its parent {@link SchedulerLike} for execution. May be passed\n   * some context object, `state`. May happen at some point in the future,\n   * according to the `delay` parameter, if specified.\n   * @param state Some contextual data that the `work` function uses when called by the\n   * Scheduler.\n   * @param delay Time to wait before executing the work, where the time unit is implicit\n   * and defined by the Scheduler.\n   * @return A subscription in order to be able to unsubscribe the scheduled work.\n   */\n  public schedule(state?: T, delay: number = 0): Subscription {\n    return this;\n  }\n}\n","import type { TimerHandle } from './timerHandle';\ntype SetIntervalFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\ntype ClearIntervalFunction = (handle: TimerHandle) => void;\n\ninterface IntervalProvider {\n  setInterval: SetIntervalFunction;\n  clearInterval: ClearIntervalFunction;\n  delegate:\n    | {\n        setInterval: SetIntervalFunction;\n        clearInterval: ClearIntervalFunction;\n      }\n    | undefined;\n}\n\nexport const intervalProvider: IntervalProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setInterval(handler: () => void, timeout?: number, ...args) {\n    const { delegate } = intervalProvider;\n    if (delegate?.setInterval) {\n      return delegate.setInterval(handler, timeout, ...args);\n    }\n    return setInterval(handler, timeout, ...args);\n  },\n  clearInterval(handle) {\n    const { delegate } = intervalProvider;\n    return (delegate?.clearInterval || clearInterval)(handle as any);\n  },\n  delegate: undefined,\n};\n","import { Action } from './Action';\nimport { SchedulerAction } from '../types';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsyncAction<T> extends Action<T> {\n  public id: TimerHandle | undefined;\n  public state?: T;\n  // @ts-ignore: Property has no initializer and is not definitely assigned\n  public delay: number;\n  protected pending: boolean = false;\n\n  constructor(protected scheduler: AsyncScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (this.closed) {\n      return this;\n    }\n\n    // Always replace the current state with the new state.\n    this.state = state;\n\n    const id = this.id;\n    const scheduler = this.scheduler;\n\n    //\n    // Important implementation note:\n    //\n    // Actions only execute once by default, unless rescheduled from within the\n    // scheduled callback. This allows us to implement single and repeat\n    // actions via the same code path, without adding API surface area, as well\n    // as mimic traditional recursion but across asynchronous boundaries.\n    //\n    // However, JS runtimes and timers distinguish between intervals achieved by\n    // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n    // serial `setTimeout` calls can be individually delayed, which delays\n    // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n    // guarantee the interval callback will be invoked more precisely to the\n    // interval period, regardless of load.\n    //\n    // Therefore, we use `setInterval` to schedule single and repeat actions.\n    // If the action reschedules itself with the same delay, the interval is not\n    // canceled. If the action doesn't reschedule, or reschedules with a\n    // different delay, the interval will be canceled after scheduled callback\n    // execution.\n    //\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay);\n    }\n\n    // Set the pending flag indicating that this action has been scheduled, or\n    // has recursively rescheduled itself.\n    this.pending = true;\n\n    this.delay = delay;\n    // If this action has already an async Id, don't request a new one.\n    this.id = this.id ?? this.requestAsyncId(scheduler, this.id, delay);\n\n    return this;\n  }\n\n  protected requestAsyncId(scheduler: AsyncScheduler, _id?: TimerHandle, delay: number = 0): TimerHandle {\n    return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n  }\n\n  protected recycleAsyncId(_scheduler: AsyncScheduler, id?: TimerHandle, delay: number | null = 0): TimerHandle | undefined {\n    // If this action is rescheduled with the same delay time, don't clear the interval id.\n    if (delay != null && this.delay === delay && this.pending === false) {\n      return id;\n    }\n    // Otherwise, if the action's delay time is different from the current delay,\n    // or the action has been rescheduled before it's executed, clear the interval id\n    if (id != null) {\n      intervalProvider.clearInterval(id);\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Immediately executes this action and the `work` it contains.\n   */\n  public execute(state: T, delay: number): any {\n    if (this.closed) {\n      return new Error('executing a cancelled action');\n    }\n\n    this.pending = false;\n    const error = this._execute(state, delay);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      // Dequeue if the action didn't reschedule itself. Don't call\n      // unsubscribe(), because the action could reschedule later.\n      // For example:\n      // ```\n      // scheduler.schedule(function doWork(counter) {\n      //   /* ... I'm a busy worker bee ... */\n      //   var originalAction = this;\n      //   /* wait 100ms before rescheduling the action */\n      //   setTimeout(function () {\n      //     originalAction.schedule(counter + 1);\n      //   }, 100);\n      // }, 1000);\n      // ```\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  }\n\n  protected _execute(state: T, _delay: number): any {\n    let errored: boolean = false;\n    let errorValue: any;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      // HACK: Since code elsewhere is relying on the \"truthiness\" of the\n      // return here, we can't have it return \"\" or 0 or false.\n      // TODO: Clean this up when we refactor schedulers mid-version-8 or so.\n      errorValue = e ? e : new Error('Scheduled action threw falsy error');\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      const { id, scheduler } = this;\n      const { actions } = scheduler;\n\n      this.work = this.state = this.scheduler = null!;\n      this.pending = false;\n\n      arrRemove(actions, this);\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n\n      this.delay = null!;\n      super.unsubscribe();\n    }\n  }\n}\n","import { Action } from './scheduler/Action';\nimport { Subscription } from './Subscription';\nimport { SchedulerLike, SchedulerAction } from './types';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an `Action`.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}. Will be made internal in v8.\n */\nexport class Scheduler implements SchedulerLike {\n  public static now: () => number = dateTimestampProvider.now;\n\n  constructor(private schedulerActionCtor: typeof Action, now: () => number = Scheduler.now) {\n    this.now = now;\n  }\n\n  /**\n   * A getter method that returns a number representing the current time\n   * (at the time this function was called) according to the scheduler's own\n   * internal clock.\n   * @return A number that represents the current time. May or may not\n   * have a relation to wall-clock time. May or may not refer to a time unit\n   * (e.g. milliseconds).\n   */\n  public now: () => number;\n\n  /**\n   * Schedules a function, `work`, for execution. May happen at some point in\n   * the future, according to the `delay` parameter, if specified. May be passed\n   * some context object, `state`, which will be passed to the `work` function.\n   *\n   * The given arguments will be processed an stored as an Action object in a\n   * queue of actions.\n   *\n   * @param work A function representing a task, or some unit of work to be\n   * executed by the Scheduler.\n   * @param delay Time to wait before executing the work, where the time unit is\n   * implicit and defined by the Scheduler itself.\n   * @param state Some contextual data that the `work` function uses when called\n   * by the Scheduler.\n   * @return A subscription in order to be able to unsubscribe the scheduled work.\n   */\n  public schedule<T>(work: (this: SchedulerAction<T>, state?: T) => void, delay: number = 0, state?: T): Subscription {\n    return new this.schedulerActionCtor<T>(this, work).schedule(state, delay);\n  }\n}\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asapScheduler} scheduler.\n *\n * ## Examples\n * Use async scheduler to delay task\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * const task = () => console.log('it works!');\n *\n * asyncScheduler.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n * ```\n *\n * Use async scheduler to repeat task in intervals\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * asyncScheduler.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n * ```\n */\n\nexport const asyncScheduler = new AsyncScheduler(AsyncAction);\n\n/**\n * @deprecated Renamed to {@link asyncScheduler}. Will be removed in v8.\n */\nexport const async = asyncScheduler;\n","import { Scheduler } from '../Scheduler';\nimport { Action } from './Action';\nimport { AsyncAction } from './AsyncAction';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsyncScheduler extends Scheduler {\n  public actions: Array<AsyncAction<any>> = [];\n  /**\n   * A flag to indicate whether the Scheduler is currently executing a batch of\n   * queued actions.\n   * @internal\n   */\n  public _active: boolean = false;\n  /**\n   * An internal ID used to track the latest asynchronous task such as those\n   * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n   * others.\n   * @internal\n   */\n  public _scheduled: TimerHandle | undefined;\n\n  constructor(SchedulerAction: typeof Action, now: () => number = Scheduler.now) {\n    super(SchedulerAction, now);\n  }\n\n  public flush(action: AsyncAction<any>): void {\n    const { actions } = this;\n\n    if (this._active) {\n      actions.push(action);\n      return;\n    }\n\n    let error: any;\n    this._active = true;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions.shift()!)); // exhaust the scheduler queue\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions.shift()!)) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n","import { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nimport { OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\n\n/**\n * Converts a higher-order Observable into a first-order Observable which\n * concurrently delivers all values that are emitted on the inner Observables.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * ![](mergeAll.png)\n *\n * `mergeAll` subscribes to an Observable that emits Observables, also known as\n * a higher-order Observable. Each time it observes one of these emitted inner\n * Observables, it subscribes to that and delivers all the values from the\n * inner Observable on the output Observable. The output Observable only\n * completes once all inner Observables have completed. Any error delivered by\n * a inner Observable will be immediately emitted on the output Observable.\n *\n * ## Examples\n *\n * Spawn a new interval Observable for each click event, and blend their outputs as one Observable\n *\n * ```ts\n * import { fromEvent, map, interval, mergeAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(map(() => interval(1000)));\n * const firstOrder = higherOrder.pipe(mergeAll());\n *\n * firstOrder.subscribe(x => console.log(x));\n * ```\n *\n * Count from 0 to 9 every second for each click, but only allow 2 concurrent timers\n *\n * ```ts\n * import { fromEvent, map, interval, take, mergeAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(() => interval(1000).pipe(take(10)))\n * );\n * const firstOrder = higherOrder.pipe(mergeAll(2));\n *\n * firstOrder.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link concatAll}\n * @see {@link exhaustAll}\n * @see {@link merge}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @param concurrent Maximum number of inner Observables being subscribed to\n * concurrently.\n * @return A function that returns an Observable that emits values coming from\n * all the inner Observables emitted by the source Observable.\n */\nexport function mergeAll<O extends ObservableInput<any>>(concurrent: number = Infinity): OperatorFunction<O, ObservedValueOf<O>> {\n  return mergeMap(identity, concurrent);\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\n/**\n * A simple Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.</span>\n *\n * ![](empty.png)\n *\n * A simple Observable that only emits the complete notification. It can be used\n * for composing with other Observables, such as in a {@link mergeMap}.\n *\n * ## Examples\n *\n * Log complete notification\n *\n * ```ts\n * import { EMPTY } from 'rxjs';\n *\n * EMPTY.subscribe({\n *   next: () => console.log('Next'),\n *   complete: () => console.log('Complete!')\n * });\n *\n * // Outputs\n * // Complete!\n * ```\n *\n * Emit the number 7, then complete\n *\n * ```ts\n * import { EMPTY, startWith } from 'rxjs';\n *\n * const result = EMPTY.pipe(startWith(7));\n * result.subscribe(x => console.log(x));\n *\n * // Outputs\n * // 7\n * ```\n *\n * Map and flatten only odd numbers to the sequence `'a'`, `'b'`, `'c'`\n *\n * ```ts\n * import { interval, mergeMap, of, EMPTY } from 'rxjs';\n *\n * const interval$ = interval(1000);\n * const result = interval$.pipe(\n *   mergeMap(x => x % 2 === 1 ? of('a', 'b', 'c') : EMPTY),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval, e.g. (0, 1, 2, 3, ...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1, print a, b, c (each on its own)\n * // if x % 2 is not equal to 1, nothing will be output\n * ```\n *\n * @see {@link Observable}\n * @see {@link NEVER}\n * @see {@link of}\n * @see {@link throwError}\n */\nexport const EMPTY = new Observable<never>((subscriber) => subscriber.complete());\n\n/**\n * @param scheduler A {@link SchedulerLike} to use for scheduling\n * the emission of the complete notification.\n * @deprecated Replaced with the {@link EMPTY} constant or {@link scheduled} (e.g. `scheduled([], scheduler)`). Will be removed in v8.\n */\nexport function empty(scheduler?: SchedulerLike) {\n  return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\n\nfunction emptyScheduled(scheduler: SchedulerLike) {\n  return new Observable<never>((subscriber) => scheduler.schedule(() => subscriber.complete()));\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput, ObservableInputTuple, SchedulerLike } from '../types';\nimport { mergeAll } from '../operators/mergeAll';\nimport { innerFrom } from './innerFrom';\nimport { EMPTY } from './empty';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from './from';\n\nexport function merge<A extends readonly unknown[]>(...sources: [...ObservableInputTuple<A>]): Observable<A[number]>;\nexport function merge<A extends readonly unknown[]>(...sourcesAndConcurrency: [...ObservableInputTuple<A>, number?]): Observable<A[number]>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `mergeAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function merge<A extends readonly unknown[]>(\n  ...sourcesAndScheduler: [...ObservableInputTuple<A>, SchedulerLike?]\n): Observable<A[number]>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `mergeAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function merge<A extends readonly unknown[]>(\n  ...sourcesAndConcurrencyAndScheduler: [...ObservableInputTuple<A>, number?, SchedulerLike?]\n): Observable<A[number]>;\n\n/**\n * Creates an output Observable which concurrently emits all values from every\n * given input Observable.\n *\n * <span class=\"informal\">Flattens multiple Observables together by blending\n * their values into one Observable.</span>\n *\n * ![](merge.png)\n *\n * `merge` subscribes to each given input Observable (as arguments), and simply\n * forwards (without doing any transformation) all the values from all the input\n * Observables to the output Observable. The output Observable only completes\n * once all input Observables have completed. Any error delivered by an input\n * Observable will be immediately emitted on the output Observable.\n *\n * ## Examples\n *\n * Merge together two Observables: 1s interval and clicks\n *\n * ```ts\n * import { merge, fromEvent, interval } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const timer = interval(1000);\n * const clicksOrTimer = merge(clicks, timer);\n * clicksOrTimer.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // timer will emit ascending values, one every second(1000ms) to console\n * // clicks logs MouseEvents to console every time the \"document\" is clicked\n * // Since the two streams are merged you see these happening\n * // as they occur.\n * ```\n *\n * Merge together 3 Observables, but run only 2 concurrently\n *\n * ```ts\n * import { interval, take, merge } from 'rxjs';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n *\n * const concurrent = 2; // the argument\n * const merged = merge(timer1, timer2, timer3, concurrent);\n * merged.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - First timer1 and timer2 will run concurrently\n * // - timer1 will emit a value every 1000ms for 10 iterations\n * // - timer2 will emit a value every 2000ms for 6 iterations\n * // - after timer1 hits its max iteration, timer2 will\n * //   continue, and timer3 will start to run concurrently with timer2\n * // - when timer2 hits its max iteration it terminates, and\n * //   timer3 will continue to emit a value every 500ms until it is complete\n * ```\n *\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n *\n * @param args `ObservableInput`s to merge together. If the last parameter\n * is of type number, `merge` will use it to limit number of concurrently\n * subscribed `ObservableInput`s. If the last parameter is {@link SchedulerLike},\n * it will be used for scheduling the emission of values.\n * @return An Observable that emits items that are the result of every input Observable.\n */\nexport function merge(...args: (ObservableInput<unknown> | number | SchedulerLike)[]): Observable<unknown> {\n  const scheduler = popScheduler(args);\n  const concurrent = popNumber(args, Infinity);\n  const sources = args as ObservableInput<unknown>[];\n  return !sources.length\n    ? // No source provided\n      EMPTY\n    : sources.length === 1\n    ? // One source? Just return it.\n      innerFrom(sources[0])\n    : // Merge all sources\n      mergeAll(concurrent)(from(sources, scheduler));\n}\n","import { Observable } from '../Observable';\nimport { ObservableInputTuple, SchedulerLike } from '../types';\nimport { concatAll } from '../operators/concatAll';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\n\nexport function concat<T extends readonly unknown[]>(...inputs: [...ObservableInputTuple<T>]): Observable<T[number]>;\nexport function concat<T extends readonly unknown[]>(\n  ...inputsAndScheduler: [...ObservableInputTuple<T>, SchedulerLike]\n): Observable<T[number]>;\n\n/**\n * Creates an output Observable which sequentially emits all values from the first given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * ![](concat.png)\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * ## Examples\n *\n * Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10\n *\n * ```ts\n * import { interval, take, range, concat } from 'rxjs';\n *\n * const timer = interval(1000).pipe(take(4));\n * const sequence = range(1, 10);\n * const result = concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n * ```\n *\n * Concatenate 3 Observables\n *\n * ```ts\n * import { interval, take, concat } from 'rxjs';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n *\n * const result = concat(timer1, timer2, timer3);\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n * ```\n *\n * Concatenate the same Observable to repeat it\n *\n * ```ts\n * import { interval, take, concat } from 'rxjs';\n *\n * const timer = interval(1000).pipe(take(2));\n *\n * concat(timer, timer) // concatenating the same Observable!\n *   .subscribe({\n *     next: value => console.log(value),\n *     complete: () => console.log('...and it is done!')\n *   });\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // '...and it is done!' also after 4s\n * ```\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link startWith}\n * @see {@link endWith}\n *\n * @param args `ObservableInput`s to concatenate.\n */\nexport function concat(...args: any[]): Observable<unknown> {\n  return concatAll()(from(args, popScheduler(args)));\n}\n","import { mergeAll } from './mergeAll';\nimport { OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * ![](concatAll.svg)\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, map, interval, take, concatAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(() => interval(1000).pipe(take(4)))\n * );\n * const firstOrder = higherOrder.pipe(concatAll());\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaustAll}\n * @see {@link mergeAll}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @return A function that returns an Observable emitting values from all the\n * inner Observables concatenated.\n */\nexport function concatAll<O extends ObservableInput<any>>(): OperatorFunction<O, ObservedValueOf<O>> {\n  return mergeAll(1);\n}\n","import { concat } from '../observable/concat';\nimport { OperatorFunction, SchedulerLike, ValueFromArray } from '../types';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\n\n// Devs are more likely to pass null or undefined than they are a scheduler\n// without accompanying values. To make things easier for (naughty) devs who\n// use the `strictNullChecks: false` TypeScript compiler option, these\n// overloads with explicit null and undefined values are included.\n\nexport function startWith<T>(value: null): OperatorFunction<T, T | null>;\nexport function startWith<T>(value: undefined): OperatorFunction<T, T | undefined>;\n\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `concatAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function startWith<T, A extends readonly unknown[] = T[]>(\n  ...valuesAndScheduler: [...A, SchedulerLike]\n): OperatorFunction<T, T | ValueFromArray<A>>;\nexport function startWith<T, A extends readonly unknown[] = T[]>(...values: A): OperatorFunction<T, T | ValueFromArray<A>>;\n\n/**\n * Returns an observable that, at the moment of subscription, will synchronously emit all\n * values provided to this operator, then subscribe to the source and mirror all of its emissions\n * to subscribers.\n *\n * This is a useful way to know when subscription has occurred on an existing observable.\n *\n * <span class=\"informal\">First emits its arguments in order, and then any\n * emissions from the source.</span>\n *\n * ![](startWith.png)\n *\n * ## Examples\n *\n * Emit a value when a timer starts.\n *\n * ```ts\n * import { timer, map, startWith } from 'rxjs';\n *\n * timer(1000)\n *   .pipe(\n *     map(() => 'timer emit'),\n *     startWith('timer start')\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // results:\n * // 'timer start'\n * // 'timer emit'\n * ```\n *\n * @param values Items you want the modified Observable to emit first.\n * @return A function that returns an Observable that synchronously emits\n * provided values before subscribing to the source Observable.\n *\n * @see {@link endWith}\n * @see {@link finalize}\n * @see {@link concat}\n */\nexport function startWith<T, D>(...values: D[]): OperatorFunction<T, T | D> {\n  const scheduler = popScheduler(values);\n  return operate((source, subscriber) => {\n    // Here we can't pass `undefined` as a scheduler, because if we did, the\n    // code inside of `concat` would be confused by the `undefined`, and treat it\n    // like an invalid observable. So we have to split it two different ways.\n    (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n  });\n}\n","import { mergeMap } from './mergeMap';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { isFunction } from '../util/isFunction';\n\n/* tslint:disable:max-line-length */\nexport function concatMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function concatMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * ![](concatMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, concatMap, interval, take } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   concatMap(ev => interval(1000).pipe(take(4)))\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param project A function that, when applied to an item emitted by the source\n * Observable, returns an Observable.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and taking\n * values from each projected inner Observable sequentially.\n */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return isFunction(resultSelector) ? mergeMap(project, resultSelector, 1) : mergeMap(project, 1);\n}\n","/* tslint:disable */\n\n/**\n *\n * @export\n * @interface APIError\n */\nexport interface APIError {\n  /**\n   * Response HTTP status code\n   * @type {number}\n   * @memberof APIError\n   */\n  StatusCode: number;\n  /**\n   * API error code\n   * @type {number}\n   * @memberof APIError\n   */\n  code: number;\n  /**\n   * Additional error-specific information\n   * @type {Array<number>}\n   * @memberof APIError\n   */\n  details: Array<number>;\n  /**\n   * Request duration\n   * @type {string}\n   * @memberof APIError\n   */\n  duration: string;\n  /**\n   * Additional error info\n   * @type {{ [key: string]: string; }}\n   * @memberof APIError\n   */\n  exception_fields?: { [key: string]: string };\n  /**\n   * Message describing an error\n   * @type {string}\n   * @memberof APIError\n   */\n  message: string;\n  /**\n   * URL with additional information\n   * @type {string}\n   * @memberof APIError\n   */\n  more_info: string;\n  /**\n   * Flag that indicates if the error is unrecoverable, requests that return unrecoverable errors should not be retried, this error only applies to the request that caused it\n   * @type {boolean}\n   * @memberof APIError\n   */\n  unrecoverable?: boolean;\n}\n/**\n * AcceptCallResponse is the payload for accepting a call.\n * @export\n * @interface AcceptCallResponse\n */\nexport interface AcceptCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof AcceptCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface AudioSettingsRequest\n */\nexport interface AudioSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof AudioSettingsRequest\n   */\n  default_device: AudioSettingsRequestDefaultDeviceEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  mic_default_on?: boolean;\n  /**\n   *\n   * @type {NoiseCancellationSettings}\n   * @memberof AudioSettingsRequest\n   */\n  noise_cancellation?: NoiseCancellationSettings;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  opus_dtx_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  redundant_coding_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsRequest\n   */\n  speaker_default_on?: boolean;\n}\n\n/**\n * @export\n */\nexport const AudioSettingsRequestDefaultDeviceEnum = {\n  SPEAKER: 'speaker',\n  EARPIECE: 'earpiece',\n} as const;\nexport type AudioSettingsRequestDefaultDeviceEnum =\n  (typeof AudioSettingsRequestDefaultDeviceEnum)[keyof typeof AudioSettingsRequestDefaultDeviceEnum];\n\n/**\n *\n * @export\n * @interface AudioSettingsResponse\n */\nexport interface AudioSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof AudioSettingsResponse\n   */\n  default_device: AudioSettingsResponseDefaultDeviceEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  mic_default_on: boolean;\n  /**\n   *\n   * @type {NoiseCancellationSettings}\n   * @memberof AudioSettingsResponse\n   */\n  noise_cancellation?: NoiseCancellationSettings;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  opus_dtx_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  redundant_coding_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof AudioSettingsResponse\n   */\n  speaker_default_on: boolean;\n}\n\n/**\n * @export\n */\nexport const AudioSettingsResponseDefaultDeviceEnum = {\n  SPEAKER: 'speaker',\n  EARPIECE: 'earpiece',\n} as const;\nexport type AudioSettingsResponseDefaultDeviceEnum =\n  (typeof AudioSettingsResponseDefaultDeviceEnum)[keyof typeof AudioSettingsResponseDefaultDeviceEnum];\n\n/**\n *\n * @export\n * @interface BackstageSettingsRequest\n */\nexport interface BackstageSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BackstageSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof BackstageSettingsRequest\n   */\n  join_ahead_time_seconds?: number;\n}\n/**\n *\n * @export\n * @interface BackstageSettingsResponse\n */\nexport interface BackstageSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BackstageSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof BackstageSettingsResponse\n   */\n  join_ahead_time_seconds?: number;\n}\n/**\n * BlockUserRequest is the payload for blocking a user.\n * @export\n * @interface BlockUserRequest\n */\nexport interface BlockUserRequest {\n  /**\n   * the user to block\n   * @type {string}\n   * @memberof BlockUserRequest\n   */\n  user_id: string;\n}\n/**\n * BlockUserResponse is the payload for blocking a user.\n * @export\n * @interface BlockUserResponse\n */\nexport interface BlockUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof BlockUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to call participants to notify when a user is blocked on a call, clients can use this event to show a notification.\n * If the user is the current user, the client should leave the call screen as well\n * @export\n * @interface BlockedUserEvent\n */\nexport interface BlockedUserEvent {\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof BlockedUserEvent\n   */\n  blocked_by_user?: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.blocked_user\" in this case\n   * @type {string}\n   * @memberof BlockedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof BlockedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface Bound\n */\nexport interface Bound {\n  /**\n   *\n   * @type {boolean}\n   * @memberof Bound\n   */\n  inclusive: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof Bound\n   */\n  value: number;\n}\n/**\n *\n * @export\n * @interface BroadcastSettingsRequest\n */\nexport interface BroadcastSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BroadcastSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {HLSSettingsRequest}\n   * @memberof BroadcastSettingsRequest\n   */\n  hls?: HLSSettingsRequest;\n  /**\n   *\n   * @type {RTMPSettingsRequest}\n   * @memberof BroadcastSettingsRequest\n   */\n  rtmp?: RTMPSettingsRequest;\n}\n/**\n * BroadcastSettingsResponse is the payload for broadcasting settings\n * @export\n * @interface BroadcastSettingsResponse\n */\nexport interface BroadcastSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof BroadcastSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {HLSSettingsResponse}\n   * @memberof BroadcastSettingsResponse\n   */\n  hls: HLSSettingsResponse;\n  /**\n   *\n   * @type {RTMPSettingsResponse}\n   * @memberof BroadcastSettingsResponse\n   */\n  rtmp: RTMPSettingsResponse;\n}\n/**\n * This event is sent when a user accepts a notification to join a call.\n * @export\n * @interface CallAcceptedEvent\n */\nexport interface CallAcceptedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallAcceptedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.accepted\" in this case\n   * @type {string}\n   * @memberof CallAcceptedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallAcceptedEvent\n   */\n  user: UserResponse;\n}\n/**\n * CallClosedCaption represents a closed caption of a call.\n * @export\n * @interface CallClosedCaption\n */\nexport interface CallClosedCaption {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  speaker_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaption\n   */\n  text: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallClosedCaption\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent when call closed captions has failed\n * @export\n * @interface CallClosedCaptionsFailedEvent\n */\nexport interface CallClosedCaptionsFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_captions_failed\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call closed caption has started\n * @export\n * @interface CallClosedCaptionsStartedEvent\n */\nexport interface CallClosedCaptionsStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_captions_started\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call closed captions has stopped\n * @export\n * @interface CallClosedCaptionsStoppedEvent\n */\nexport interface CallClosedCaptionsStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.transcription_stopped\" in this case\n   * @type {string}\n   * @memberof CallClosedCaptionsStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is created. Clients receiving this event should check if the ringing\n * field is set to true and if so, show the call screen\n * @export\n * @interface CallCreatedEvent\n */\nexport interface CallCreatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallCreatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  created_at: string;\n  /**\n   * the members added to this call\n   * @type {Array<MemberResponse>}\n   * @memberof CallCreatedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.created\" in this case\n   * @type {string}\n   * @memberof CallCreatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is deleted. Clients receiving this event should leave the call screen\n * @export\n * @interface CallDeletedEvent\n */\nexport interface CallDeletedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallDeletedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.deleted\" in this case\n   * @type {string}\n   * @memberof CallDeletedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallDurationReport\n */\nexport interface CallDurationReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof CallDurationReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface CallDurationReportResponse\n */\nexport interface CallDurationReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallDurationReportResponse>}\n   * @memberof CallDurationReportResponse\n   */\n  daily: Array<DailyAggregateCallDurationReportResponse>;\n}\n/**\n * This event is sent when a call is mark as ended for all its participants. Clients receiving this event should leave the call screen\n * @export\n * @interface CallEndedEvent\n */\nexport interface CallEndedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallEndedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.ended\" in this case\n   * @type {string}\n   * @memberof CallEndedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallEndedEvent\n   */\n  user?: UserResponse;\n}\n/**\n * This event is sent when frame recording has failed\n * @export\n * @interface CallFrameRecordingFailedEvent\n */\nexport interface CallFrameRecordingFailedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_failed\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a frame is captured from a call\n * @export\n * @interface CallFrameRecordingFrameReadyEvent\n */\nexport interface CallFrameRecordingFrameReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  call_cid: string;\n  /**\n   * The time the frame was captured\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  captured_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  egress_id: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  session_id: string;\n  /**\n   * The type of the track frame was captured from (TRACK_TYPE_VIDEO|TRACK_TYPE_SCREEN_SHARE)\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  track_type: string;\n  /**\n   * The type of event: \"call.frame_recording_ready\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  type: string;\n  /**\n   * The URL of the frame\n   * @type {string}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  url: string;\n  /**\n   * The users in the frame\n   * @type {{ [key: string]: UserResponse; }}\n   * @memberof CallFrameRecordingFrameReadyEvent\n   */\n  users: { [key: string]: UserResponse };\n}\n/**\n * This event is sent when frame recording has started\n * @export\n * @interface CallFrameRecordingStartedEvent\n */\nexport interface CallFrameRecordingStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_started\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when frame recording has stopped\n * @export\n * @interface CallFrameRecordingStoppedEvent\n */\nexport interface CallFrameRecordingStoppedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.frame_recording_stopped\" in this case\n   * @type {string}\n   * @memberof CallFrameRecordingStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has failed\n * @export\n * @interface CallHLSBroadcastingFailedEvent\n */\nexport interface CallHLSBroadcastingFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_failed\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has started\n * @export\n * @interface CallHLSBroadcastingStartedEvent\n */\nexport interface CallHLSBroadcastingStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  hls_playlist_url: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_started\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when HLS broadcasting has stopped\n * @export\n * @interface CallHLSBroadcastingStoppedEvent\n */\nexport interface CallHLSBroadcastingStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.hls_broadcasting_stopped\" in this case\n   * @type {string}\n   * @memberof CallHLSBroadcastingStoppedEvent\n   */\n  type: string;\n}\n/**\n * CallIngressResponse is the payload for ingress settings\n * @export\n * @interface CallIngressResponse\n */\nexport interface CallIngressResponse {\n  /**\n   *\n   * @type {RTMPIngress}\n   * @memberof CallIngressResponse\n   */\n  rtmp: RTMPIngress;\n}\n/**\n * This event is sent when a call is started. Clients receiving this event should start the call.\n * @export\n * @interface CallLiveStartedEvent\n */\nexport interface CallLiveStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallLiveStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.live_started\" in this case\n   * @type {string}\n   * @memberof CallLiveStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are added to a call\n * @export\n * @interface CallMemberAddedEvent\n */\nexport interface CallMemberAddedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberAddedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  created_at: string;\n  /**\n   * the members added to this call\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberAddedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_added\" in this case\n   * @type {string}\n   * @memberof CallMemberAddedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are removed from a call\n * @export\n * @interface CallMemberRemovedEvent\n */\nexport interface CallMemberRemovedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberRemovedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  created_at: string;\n  /**\n   * the list of member IDs removed from the call\n   * @type {Array<string>}\n   * @memberof CallMemberRemovedEvent\n   */\n  members: Array<string>;\n  /**\n   * The type of event: \"call.member_removed\" in this case\n   * @type {string}\n   * @memberof CallMemberRemovedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members are updated\n * @export\n * @interface CallMemberUpdatedEvent\n */\nexport interface CallMemberUpdatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberUpdatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  created_at: string;\n  /**\n   * The list of members that were updated\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberUpdatedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_updated\" in this case\n   * @type {string}\n   * @memberof CallMemberUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when one or more members get its role updated\n * @export\n * @interface CallMemberUpdatedPermissionEvent\n */\nexport interface CallMemberUpdatedPermissionEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  call_cid: string;\n  /**\n   * The capabilities by role for this call\n   * @type {{ [key: string]: Array<string>; }}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  capabilities_by_role: { [key: string]: Array<string> };\n  /**\n   *\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  created_at: string;\n  /**\n   * The list of members that were updated\n   * @type {Array<MemberResponse>}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * The type of event: \"call.member_added\" in this case\n   * @type {string}\n   * @memberof CallMemberUpdatedPermissionEvent\n   */\n  type: string;\n}\n/**\n * This event is sent to call members who did not accept/reject/join the call to notify they missed the call\n * @export\n * @interface CallMissedEvent\n */\nexport interface CallMissedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallMissedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  created_at: string;\n  /**\n   * List of members who missed the call\n   * @type {Array<MemberResponse>}\n   * @memberof CallMissedEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallMissedEvent\n   */\n  notify_user: boolean;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallMissedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallMissedEvent\n   */\n  user: UserResponse;\n}\n/**\n * This event is sent to all call members to notify they are getting called\n * @export\n * @interface CallNotificationEvent\n */\nexport interface CallNotificationEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallNotificationEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  created_at: string;\n  /**\n   * Call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallNotificationEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallNotificationEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallNotificationEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallParticipantCountReport\n */\nexport interface CallParticipantCountReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof CallParticipantCountReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface CallParticipantCountReportResponse\n */\nexport interface CallParticipantCountReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallParticipantCountReportResponse>}\n   * @memberof CallParticipantCountReportResponse\n   */\n  daily: Array<DailyAggregateCallParticipantCountReportResponse>;\n}\n/**\n *\n * @export\n * @interface CallParticipantResponse\n */\nexport interface CallParticipantResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  joined_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  role: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallParticipantResponse\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallParticipantResponse\n   */\n  user_session_id: string;\n}\n/**\n * This event is sent when a reaction is sent in a call, clients should use this to show the reaction in the call screen\n * @export\n * @interface CallReactionEvent\n */\nexport interface CallReactionEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {ReactionResponse}\n   * @memberof CallReactionEvent\n   */\n  reaction: ReactionResponse;\n  /**\n   * The type of event: \"call.reaction_new\" in this case\n   * @type {string}\n   * @memberof CallReactionEvent\n   */\n  type: string;\n}\n/**\n * CallRecording represents a recording of a call.\n * @export\n * @interface CallRecording\n */\nexport interface CallRecording {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  filename: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecording\n   */\n  url: string;\n}\n/**\n * This event is sent when call recording has failed\n * @export\n * @interface CallRecordingFailedEvent\n */\nexport interface CallRecordingFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_failed\" in this case\n   * @type {string}\n   * @memberof CallRecordingFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording is ready\n * @export\n * @interface CallRecordingReadyEvent\n */\nexport interface CallRecordingReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallRecording}\n   * @memberof CallRecordingReadyEvent\n   */\n  call_recording: CallRecording;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_ready\" in this case\n   * @type {string}\n   * @memberof CallRecordingReadyEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording has started\n * @export\n * @interface CallRecordingStartedEvent\n */\nexport interface CallRecordingStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_started\" in this case\n   * @type {string}\n   * @memberof CallRecordingStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call recording has stopped\n * @export\n * @interface CallRecordingStoppedEvent\n */\nexport interface CallRecordingStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.recording_stopped\" in this case\n   * @type {string}\n   * @memberof CallRecordingStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a user rejects a notification to join a call.\n * @export\n * @interface CallRejectedEvent\n */\nexport interface CallRejectedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallRejectedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  created_at: string;\n  /**\n   * Provides information about why the call was rejected. You can provide any value, but the Stream API and SDKs use these default values: rejected, cancel, timeout and busy\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  reason?: string;\n  /**\n   * The type of event: \"call.rejected\" in this case\n   * @type {string}\n   * @memberof CallRejectedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallRejectedEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface CallReportResponse\n */\nexport interface CallReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallReportResponse\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallReportResponse\n   */\n  score: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallReportResponse\n   */\n  started_at?: string;\n}\n/**\n * CallRequest is the payload for creating a call.\n * @export\n * @interface CallRequest\n */\nexport interface CallRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CallRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {Array<MemberRequest>}\n   * @memberof CallRequest\n   */\n  members?: Array<MemberRequest>;\n  /**\n   *\n   * @type {CallSettingsRequest}\n   * @memberof CallRequest\n   */\n  settings_override?: CallSettingsRequest;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  starts_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRequest\n   */\n  team?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallRequest\n   */\n  video?: boolean;\n}\n/**\n * Represents a call\n * @export\n * @interface CallResponse\n */\nexport interface CallResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  backstage: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallResponse\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  captioning: boolean;\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallResponse\n   */\n  cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallResponse\n   */\n  created_by: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  current_session_id: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof CallResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {EgressResponse}\n   * @memberof CallResponse\n   */\n  egress: EgressResponse;\n  /**\n   * Date/time when the call ended\n   * @type {string}\n   * @memberof CallResponse\n   */\n  ended_at?: string;\n  /**\n   * Call ID\n   * @type {string}\n   * @memberof CallResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {CallIngressResponse}\n   * @memberof CallResponse\n   */\n  ingress: CallIngressResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof CallResponse\n   */\n  join_ahead_time_seconds?: number;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  recording: boolean;\n  /**\n   *\n   * @type {CallSessionResponse}\n   * @memberof CallResponse\n   */\n  session?: CallSessionResponse;\n  /**\n   *\n   * @type {CallSettingsResponse}\n   * @memberof CallResponse\n   */\n  settings: CallSettingsResponse;\n  /**\n   * Date/time when the call will start\n   * @type {string}\n   * @memberof CallResponse\n   */\n  starts_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallResponse\n   */\n  team?: string;\n  /**\n   *\n   * @type {ThumbnailResponse}\n   * @memberof CallResponse\n   */\n  thumbnails?: ThumbnailResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallResponse\n   */\n  transcribing: boolean;\n  /**\n   * The type of call\n   * @type {string}\n   * @memberof CallResponse\n   */\n  type: string;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof CallResponse\n   */\n  updated_at: string;\n}\n/**\n * This event is sent to all call members to notify they are getting called\n * @export\n * @interface CallRingEvent\n */\nexport interface CallRingEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallRingEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  created_at: string;\n  /**\n   * Call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallRingEvent\n   */\n  members: Array<MemberResponse>;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.notification\" in this case\n   * @type {string}\n   * @memberof CallRingEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CallRingEvent\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof CallRingEvent\n   */\n  video: boolean;\n}\n/**\n * This event is sent when a call RTMP broadcast has failed\n * @export\n * @interface CallRtmpBroadcastFailedEvent\n */\nexport interface CallRtmpBroadcastFailedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_failed\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when RTMP broadcast has started\n * @export\n * @interface CallRtmpBroadcastStartedEvent\n */\nexport interface CallRtmpBroadcastStartedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_started\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when RTMP broadcast has stopped\n * @export\n * @interface CallRtmpBroadcastStoppedEvent\n */\nexport interface CallRtmpBroadcastStoppedEvent {\n  /**\n   * The unique identifier for a call (<type>:<id>)\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  call_cid: string;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  created_at: string;\n  /**\n   * Name of the given RTMP broadcast\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  name: string;\n  /**\n   * The type of event: \"call.rtmp_broadcast_stopped\" in this case\n   * @type {string}\n   * @memberof CallRtmpBroadcastStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call session ends\n * @export\n * @interface CallSessionEndedEvent\n */\nexport interface CallSessionEndedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallSessionEndedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_ended\" in this case\n   * @type {string}\n   * @memberof CallSessionEndedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when the participant counts in a call session are updated\n * @export\n * @interface CallSessionParticipantCountsUpdatedEvent\n */\nexport interface CallSessionParticipantCountsUpdatedEvent {\n  /**\n   *\n   * @type {number}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  anonymous_participant_count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  participants_count_by_role: { [key: string]: number };\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_count_updated\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantCountsUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a participant joins a call session\n * @export\n * @interface CallSessionParticipantJoinedEvent\n */\nexport interface CallSessionParticipantJoinedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {CallParticipantResponse}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  participant: CallParticipantResponse;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_joined\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantJoinedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a participant leaves a call session\n * @export\n * @interface CallSessionParticipantLeftEvent\n */\nexport interface CallSessionParticipantLeftEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  created_at: string;\n  /**\n   * The duration participant was in the session in seconds\n   * @type {number}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  duration_seconds: number;\n  /**\n   *\n   * @type {CallParticipantResponse}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  participant: CallParticipantResponse;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_participant_left\" in this case\n   * @type {string}\n   * @memberof CallSessionParticipantLeftEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallSessionResponse\n */\nexport interface CallSessionResponse {\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  accepted_by: { [key: string]: string };\n  /**\n   *\n   * @type {number}\n   * @memberof CallSessionResponse\n   */\n  anonymous_participant_count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  live_ended_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  live_started_at?: string;\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  missed_by: { [key: string]: string };\n  /**\n   *\n   * @type {Array<CallParticipantResponse>}\n   * @memberof CallSessionResponse\n   */\n  participants: Array<CallParticipantResponse>;\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof CallSessionResponse\n   */\n  participants_count_by_role: { [key: string]: number };\n  /**\n   *\n   * @type {{ [key: string]: string; }}\n   * @memberof CallSessionResponse\n   */\n  rejected_by: { [key: string]: string };\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  started_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionResponse\n   */\n  timer_ends_at?: string;\n}\n/**\n * This event is sent when a call session starts\n * @export\n * @interface CallSessionStartedEvent\n */\nexport interface CallSessionStartedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallSessionStartedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  created_at: string;\n  /**\n   * Call session ID\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  session_id: string;\n  /**\n   * The type of event: \"call.session_started\" in this case\n   * @type {string}\n   * @memberof CallSessionStartedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallSettingsRequest\n */\nexport interface CallSettingsRequest {\n  /**\n   *\n   * @type {AudioSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  audio?: AudioSettingsRequest;\n  /**\n   *\n   * @type {BackstageSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  backstage?: BackstageSettingsRequest;\n  /**\n   *\n   * @type {BroadcastSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  broadcasting?: BroadcastSettingsRequest;\n  /**\n   *\n   * @type {FrameRecordingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  frame_recording?: FrameRecordingSettingsRequest;\n  /**\n   *\n   * @type {GeofenceSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  geofencing?: GeofenceSettingsRequest;\n  /**\n   *\n   * @type {LimitsSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  limits?: LimitsSettingsRequest;\n  /**\n   *\n   * @type {RecordSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  recording?: RecordSettingsRequest;\n  /**\n   *\n   * @type {RingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  ring?: RingSettingsRequest;\n  /**\n   *\n   * @type {ScreensharingSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  screensharing?: ScreensharingSettingsRequest;\n  /**\n   *\n   * @type {SessionSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  session?: SessionSettingsRequest;\n  /**\n   *\n   * @type {ThumbnailsSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  thumbnails?: ThumbnailsSettingsRequest;\n  /**\n   *\n   * @type {TranscriptionSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  transcription?: TranscriptionSettingsRequest;\n  /**\n   *\n   * @type {VideoSettingsRequest}\n   * @memberof CallSettingsRequest\n   */\n  video?: VideoSettingsRequest;\n}\n/**\n *\n * @export\n * @interface CallSettingsResponse\n */\nexport interface CallSettingsResponse {\n  /**\n   *\n   * @type {AudioSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  audio: AudioSettingsResponse;\n  /**\n   *\n   * @type {BackstageSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  backstage: BackstageSettingsResponse;\n  /**\n   *\n   * @type {BroadcastSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  broadcasting: BroadcastSettingsResponse;\n  /**\n   *\n   * @type {FrameRecordingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  frame_recording: FrameRecordingSettingsResponse;\n  /**\n   *\n   * @type {GeofenceSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  geofencing: GeofenceSettingsResponse;\n  /**\n   *\n   * @type {LimitsSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  limits: LimitsSettingsResponse;\n  /**\n   *\n   * @type {RecordSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  recording: RecordSettingsResponse;\n  /**\n   *\n   * @type {RingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  ring: RingSettingsResponse;\n  /**\n   *\n   * @type {ScreensharingSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  screensharing: ScreensharingSettingsResponse;\n  /**\n   *\n   * @type {SessionSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  session: SessionSettingsResponse;\n  /**\n   *\n   * @type {ThumbnailsSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  thumbnails: ThumbnailsSettingsResponse;\n  /**\n   *\n   * @type {TranscriptionSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  transcription: TranscriptionSettingsResponse;\n  /**\n   *\n   * @type {VideoSettingsResponse}\n   * @memberof CallSettingsResponse\n   */\n  video: VideoSettingsResponse;\n}\n/**\n * CallStateResponseFields is the payload for call state response\n * @export\n * @interface CallStateResponseFields\n */\nexport interface CallStateResponseFields {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallStateResponseFields\n   */\n  call: CallResponse;\n  /**\n   * List of call members\n   * @type {Array<MemberResponse>}\n   * @memberof CallStateResponseFields\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof CallStateResponseFields\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof CallStateResponseFields\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface CallStatsReportSummaryResponse\n */\nexport interface CallStatsReportSummaryResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_duration_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_session_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  call_status: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  created_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  first_stats_time: string;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  min_user_rating?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof CallStatsReportSummaryResponse\n   */\n  quality_score?: number;\n}\n/**\n * CallTranscription represents a transcription of a call.\n * @export\n * @interface CallTranscription\n */\nexport interface CallTranscription {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  end_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  filename: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  start_time: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscription\n   */\n  url: string;\n}\n/**\n * This event is sent when call transcription has failed\n * @export\n * @interface CallTranscriptionFailedEvent\n */\nexport interface CallTranscriptionFailedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_failed\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionFailedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription is ready\n * @export\n * @interface CallTranscriptionReadyEvent\n */\nexport interface CallTranscriptionReadyEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallTranscription}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  call_transcription: CallTranscription;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_ready\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionReadyEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription has started\n * @export\n * @interface CallTranscriptionStartedEvent\n */\nexport interface CallTranscriptionStartedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_started\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionStartedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when call transcription has stopped\n * @export\n * @interface CallTranscriptionStoppedEvent\n */\nexport interface CallTranscriptionStoppedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  egress_id: string;\n  /**\n   * The type of event: \"call.transcription_stopped\" in this case\n   * @type {string}\n   * @memberof CallTranscriptionStoppedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call is updated, clients should use this update the local state of the call.\n * This event also contains the capabilities by role for the call, clients should update the own_capability for the current.\n * @export\n * @interface CallUpdatedEvent\n */\nexport interface CallUpdatedEvent {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof CallUpdatedEvent\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  call_cid: string;\n  /**\n   * The capabilities by role for this call\n   * @type {{ [key: string]: Array<string>; }}\n   * @memberof CallUpdatedEvent\n   */\n  capabilities_by_role: { [key: string]: Array<string> };\n  /**\n   *\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.ended\" in this case\n   * @type {string}\n   * @memberof CallUpdatedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when a call member is muted\n * @export\n * @interface CallUserMutedEvent\n */\nexport interface CallUserMutedEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  from_user_id: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof CallUserMutedEvent\n   */\n  muted_user_ids: Array<string>;\n  /**\n   * The type of event: \"call.user_muted\" in this case\n   * @type {string}\n   * @memberof CallUserMutedEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CallsPerDayReport\n */\nexport interface CallsPerDayReport {\n  /**\n   *\n   * @type {number}\n   * @memberof CallsPerDayReport\n   */\n  count: number;\n}\n/**\n *\n * @export\n * @interface CallsPerDayReportResponse\n */\nexport interface CallsPerDayReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateCallsPerDayReportResponse>}\n   * @memberof CallsPerDayReportResponse\n   */\n  daily: Array<DailyAggregateCallsPerDayReportResponse>;\n}\n/**\n *\n * @export\n * @interface ChatActivityStatsResponse\n */\nexport interface ChatActivityStatsResponse {\n  /**\n   *\n   * @type {MessageStatsResponse}\n   * @memberof ChatActivityStatsResponse\n   */\n  Messages?: MessageStatsResponse;\n}\n/**\n * This event is sent when closed captions are being sent in a call, clients should use this to show the closed captions in the call screen\n * @export\n * @interface ClosedCaptionEvent\n */\nexport interface ClosedCaptionEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {CallClosedCaption}\n   * @memberof ClosedCaptionEvent\n   */\n  closed_caption: CallClosedCaption;\n  /**\n   *\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.closed_caption\" in this case\n   * @type {string}\n   * @memberof ClosedCaptionEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CollectUserFeedbackRequest\n */\nexport interface CollectUserFeedbackRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof CollectUserFeedbackRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof CollectUserFeedbackRequest\n   */\n  rating: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  reason?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  sdk: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  sdk_version: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CollectUserFeedbackRequest\n   */\n  user_session_id?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface CollectUserFeedbackResponse\n */\nexport interface CollectUserFeedbackResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof CollectUserFeedbackResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface ConnectUserDetailsRequest\n */\nexport interface ConnectUserDetailsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof ConnectUserDetailsRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ConnectUserDetailsRequest\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  language?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectUserDetailsRequest\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof ConnectUserDetailsRequest\n   */\n  privacy_settings?: object;\n}\n/**\n * This event is sent when the WS connection is established and authenticated, this event contains the full user object as it is stored on the server\n * @export\n * @interface ConnectedEvent\n */\nexport interface ConnectedEvent {\n  /**\n   * The connection_id for this client\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {OwnUserResponse}\n   * @memberof ConnectedEvent\n   */\n  me: OwnUserResponse;\n  /**\n   * The type of event: \"connection.ok\" in this case\n   * @type {string}\n   * @memberof ConnectedEvent\n   */\n  type: string;\n}\n/**\n * This event is sent when the WS connection fails\n * @export\n * @interface ConnectionErrorEvent\n */\nexport interface ConnectionErrorEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {APIError}\n   * @memberof ConnectionErrorEvent\n   */\n  error: APIError;\n  /**\n   * The type of event: \"connection.ok\" in this case\n   * @type {string}\n   * @memberof ConnectionErrorEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface CountByMinuteResponse\n */\nexport interface CountByMinuteResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof CountByMinuteResponse\n   */\n  count: number;\n  /**\n   *\n   * @type {string}\n   * @memberof CountByMinuteResponse\n   */\n  start_ts: string;\n}\n/**\n * Create device request\n * @export\n * @interface CreateDeviceRequest\n */\nexport interface CreateDeviceRequest {\n  /**\n   * Device ID\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  id: string;\n  /**\n   * Push provider\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  push_provider: CreateDeviceRequestPushProviderEnum;\n  /**\n   * Push provider name\n   * @type {string}\n   * @memberof CreateDeviceRequest\n   */\n  push_provider_name?: string;\n  /**\n   * When true the token is for Apple VoIP push notifications\n   * @type {boolean}\n   * @memberof CreateDeviceRequest\n   */\n  voip_token?: boolean;\n}\n\n/**\n * @export\n */\nexport const CreateDeviceRequestPushProviderEnum = {\n  FIREBASE: 'firebase',\n  APN: 'apn',\n  HUAWEI: 'huawei',\n  XIAOMI: 'xiaomi',\n} as const;\nexport type CreateDeviceRequestPushProviderEnum =\n  (typeof CreateDeviceRequestPushProviderEnum)[keyof typeof CreateDeviceRequestPushProviderEnum];\n\n/**\n *\n * @export\n * @interface CreateGuestRequest\n */\nexport interface CreateGuestRequest {\n  /**\n   *\n   * @type {UserRequest}\n   * @memberof CreateGuestRequest\n   */\n  user: UserRequest;\n}\n/**\n *\n * @export\n * @interface CreateGuestResponse\n */\nexport interface CreateGuestResponse {\n  /**\n   * the access token to authenticate the user\n   * @type {string}\n   * @memberof CreateGuestResponse\n   */\n  access_token: string;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof CreateGuestResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CreateGuestResponse\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface Credentials\n */\nexport interface Credentials {\n  /**\n   *\n   * @type {Array<ICEServer>}\n   * @memberof Credentials\n   */\n  ice_servers: Array<ICEServer>;\n  /**\n   *\n   * @type {SFUResponse}\n   * @memberof Credentials\n   */\n  server: SFUResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof Credentials\n   */\n  token: string;\n}\n/**\n * A custom event, this event is used to send custom events to other participants in the call.\n * @export\n * @interface CustomVideoEvent\n */\nexport interface CustomVideoEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  created_at: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof CustomVideoEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   * The type of event, \"custom\" in this case\n   * @type {string}\n   * @memberof CustomVideoEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof CustomVideoEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallDurationReportResponse\n */\nexport interface DailyAggregateCallDurationReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallDurationReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallDurationReport}\n   * @memberof DailyAggregateCallDurationReportResponse\n   */\n  report: CallDurationReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallParticipantCountReportResponse\n */\nexport interface DailyAggregateCallParticipantCountReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallParticipantCountReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallParticipantCountReport}\n   * @memberof DailyAggregateCallParticipantCountReportResponse\n   */\n  report: CallParticipantCountReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateCallsPerDayReportResponse\n */\nexport interface DailyAggregateCallsPerDayReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateCallsPerDayReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {CallsPerDayReport}\n   * @memberof DailyAggregateCallsPerDayReportResponse\n   */\n  report: CallsPerDayReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateQualityScoreReportResponse\n */\nexport interface DailyAggregateQualityScoreReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateQualityScoreReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {QualityScoreReport}\n   * @memberof DailyAggregateQualityScoreReportResponse\n   */\n  report: QualityScoreReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateSDKUsageReportResponse\n */\nexport interface DailyAggregateSDKUsageReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateSDKUsageReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {SDKUsageReport}\n   * @memberof DailyAggregateSDKUsageReportResponse\n   */\n  report: SDKUsageReport;\n}\n/**\n *\n * @export\n * @interface DailyAggregateUserFeedbackReportResponse\n */\nexport interface DailyAggregateUserFeedbackReportResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof DailyAggregateUserFeedbackReportResponse\n   */\n  date: string;\n  /**\n   *\n   * @type {UserFeedbackReport}\n   * @memberof DailyAggregateUserFeedbackReportResponse\n   */\n  report: UserFeedbackReport;\n}\n/**\n * DeleteCallRequest is the payload for deleting a call.\n * @export\n * @interface DeleteCallRequest\n */\nexport interface DeleteCallRequest {\n  /**\n   * if true the call will be hard deleted along with all related data\n   * @type {boolean}\n   * @memberof DeleteCallRequest\n   */\n  hard?: boolean;\n}\n/**\n * DeleteCallResponse is the payload for deleting a call.\n * @export\n * @interface DeleteCallResponse\n */\nexport interface DeleteCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof DeleteCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof DeleteCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof DeleteCallResponse\n   */\n  task_id?: string;\n}\n/**\n * Response for DeleteRecording\n * @export\n * @interface DeleteRecordingResponse\n */\nexport interface DeleteRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof DeleteRecordingResponse\n   */\n  duration: string;\n}\n/**\n * DeleteTranscriptionResponse is the payload for deleting a transcription.\n * @export\n * @interface DeleteTranscriptionResponse\n */\nexport interface DeleteTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof DeleteTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n * Response for Device\n * @export\n * @interface DeviceResponse\n */\nexport interface DeviceResponse {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  created_at: string;\n  /**\n   * Whether device is disabled or not\n   * @type {boolean}\n   * @memberof DeviceResponse\n   */\n  disabled?: boolean;\n  /**\n   * Reason explaining why device had been disabled\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  disabled_reason?: string;\n  /**\n   * Device ID\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  id: string;\n  /**\n   * Push provider\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  push_provider: string;\n  /**\n   * Push provider name\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  push_provider_name?: string;\n  /**\n   * User ID\n   * @type {string}\n   * @memberof DeviceResponse\n   */\n  user_id: string;\n  /**\n   * When true the token is for Apple VoIP push notifications\n   * @type {boolean}\n   * @memberof DeviceResponse\n   */\n  voip?: boolean;\n}\n/**\n *\n * @export\n * @interface EdgeResponse\n */\nexport interface EdgeResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  continent_code: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  country_iso_code: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  green: number;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  latency_test_url: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  latitude: number;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  longitude: number;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  red: number;\n  /**\n   *\n   * @type {string}\n   * @memberof EdgeResponse\n   */\n  subdivision_iso_code: string;\n  /**\n   *\n   * @type {number}\n   * @memberof EdgeResponse\n   */\n  yellow: number;\n}\n/**\n *\n * @export\n * @interface EgressHLSResponse\n */\nexport interface EgressHLSResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EgressHLSResponse\n   */\n  playlist_url: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressHLSResponse\n   */\n  status: string;\n}\n/**\n *\n * @export\n * @interface EgressRTMPResponse\n */\nexport interface EgressRTMPResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  started_at: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  stream_key?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof EgressRTMPResponse\n   */\n  stream_url?: string;\n}\n/**\n *\n * @export\n * @interface EgressResponse\n */\nexport interface EgressResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof EgressResponse\n   */\n  broadcasting: boolean;\n  /**\n   *\n   * @type {FrameRecordingResponse}\n   * @memberof EgressResponse\n   */\n  frame_recording?: FrameRecordingResponse;\n  /**\n   *\n   * @type {EgressHLSResponse}\n   * @memberof EgressResponse\n   */\n  hls?: EgressHLSResponse;\n  /**\n   *\n   * @type {Array<EgressRTMPResponse>}\n   * @memberof EgressResponse\n   */\n  rtmps: Array<EgressRTMPResponse>;\n}\n/**\n * Response for ending a call\n * @export\n * @interface EndCallResponse\n */\nexport interface EndCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof EndCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface FrameRecordingResponse\n */\nexport interface FrameRecordingResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingResponse\n   */\n  status: string;\n}\n/**\n *\n * @export\n * @interface FrameRecordingSettingsRequest\n */\nexport interface FrameRecordingSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  capture_interval_in_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  mode: FrameRecordingSettingsRequestModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsRequest\n   */\n  quality?: FrameRecordingSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type FrameRecordingSettingsRequestModeEnum =\n  (typeof FrameRecordingSettingsRequestModeEnum)[keyof typeof FrameRecordingSettingsRequestModeEnum];\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n} as const;\nexport type FrameRecordingSettingsRequestQualityEnum =\n  (typeof FrameRecordingSettingsRequestQualityEnum)[keyof typeof FrameRecordingSettingsRequestQualityEnum];\n\n/**\n *\n * @export\n * @interface FrameRecordingSettingsResponse\n */\nexport interface FrameRecordingSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  capture_interval_in_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  mode: FrameRecordingSettingsResponseModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof FrameRecordingSettingsResponse\n   */\n  quality?: string;\n}\n\n/**\n * @export\n */\nexport const FrameRecordingSettingsResponseModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type FrameRecordingSettingsResponseModeEnum =\n  (typeof FrameRecordingSettingsResponseModeEnum)[keyof typeof FrameRecordingSettingsResponseModeEnum];\n\n/**\n *\n * @export\n * @interface GeofenceSettingsRequest\n */\nexport interface GeofenceSettingsRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof GeofenceSettingsRequest\n   */\n  names?: Array<string>;\n}\n/**\n *\n * @export\n * @interface GeofenceSettingsResponse\n */\nexport interface GeofenceSettingsResponse {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof GeofenceSettingsResponse\n   */\n  names: Array<string>;\n}\n/**\n *\n * @export\n * @interface GetCallResponse\n */\nexport interface GetCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GetCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof GetCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof GetCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof GetCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n * Basic response information\n * @export\n * @interface GetCallReportResponse\n */\nexport interface GetCallReportResponse {\n  /**\n   *\n   * @type {ChatActivityStatsResponse}\n   * @memberof GetCallReportResponse\n   */\n  chat_activity?: ChatActivityStatsResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetCallReportResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ReportResponse}\n   * @memberof GetCallReportResponse\n   */\n  report: ReportResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof GetCallReportResponse\n   */\n  session_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface GetEdgesResponse\n */\nexport interface GetEdgesResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GetEdgesResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<EdgeResponse>}\n   * @memberof GetEdgesResponse\n   */\n  edges: Array<EdgeResponse>;\n}\n/**\n *\n * @export\n * @interface GetOrCreateCallRequest\n */\nexport interface GetOrCreateCallRequest {\n  /**\n   *\n   * @type {CallRequest}\n   * @memberof GetOrCreateCallRequest\n   */\n  data?: CallRequest;\n  /**\n   *\n   * @type {number}\n   * @memberof GetOrCreateCallRequest\n   */\n  members_limit?: number;\n  /**\n   * if provided it sends a notification event to the members for this call\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  notify?: boolean;\n  /**\n   * if provided it sends a ring event to the members for this call\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  ring?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GetOrCreateCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface GetOrCreateCallResponse\n */\nexport interface GetOrCreateCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GetOrCreateCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GetOrCreateCallResponse\n   */\n  created: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof GetOrCreateCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof GetOrCreateCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof GetOrCreateCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof GetOrCreateCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface GoLiveRequest\n */\nexport interface GoLiveRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof GoLiveRequest\n   */\n  recording_storage_name?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_closed_caption?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_hls?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_recording?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_rtmp_broadcasts?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof GoLiveRequest\n   */\n  start_transcription?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof GoLiveRequest\n   */\n  transcription_storage_name?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface GoLiveResponse\n */\nexport interface GoLiveResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof GoLiveResponse\n   */\n  call: CallResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof GoLiveResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface GroupedStatsResponse\n */\nexport interface GroupedStatsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof GroupedStatsResponse\n   */\n  name: string;\n  /**\n   *\n   * @type {number}\n   * @memberof GroupedStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface HLSSettingsRequest\n */\nexport interface HLSSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsRequest\n   */\n  auto_on?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof HLSSettingsRequest\n   */\n  quality_tracks: Array<string>;\n}\n/**\n * HLSSettings is the payload for HLS settings\n * @export\n * @interface HLSSettingsResponse\n */\nexport interface HLSSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsResponse\n   */\n  auto_on: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof HLSSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof HLSSettingsResponse\n   */\n  quality_tracks: Array<string>;\n}\n/**\n *\n * @export\n * @interface HealthCheckEvent\n */\nexport interface HealthCheckEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  cid?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  connection_id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof HealthCheckEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  received_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof HealthCheckEvent\n   */\n  type: string;\n}\n/**\n *\n * @export\n * @interface ICEServer\n */\nexport interface ICEServer {\n  /**\n   *\n   * @type {string}\n   * @memberof ICEServer\n   */\n  password: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof ICEServer\n   */\n  urls: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof ICEServer\n   */\n  username: string;\n}\n/**\n *\n * @export\n * @interface JoinCallRequest\n */\nexport interface JoinCallRequest {\n  /**\n   * if true the call will be created if it doesn't exist\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  create?: boolean;\n  /**\n   *\n   * @type {CallRequest}\n   * @memberof JoinCallRequest\n   */\n  data?: CallRequest;\n  /**\n   *\n   * @type {string}\n   * @memberof JoinCallRequest\n   */\n  location: string;\n  /**\n   *\n   * @type {number}\n   * @memberof JoinCallRequest\n   */\n  members_limit?: number;\n  /**\n   * If the participant is migrating from another SFU, then this is the ID of the previous SFU\n   * @type {string}\n   * @memberof JoinCallRequest\n   */\n  migrating_from?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  notify?: boolean;\n  /**\n   * if true and the call is created, the notification will include ring=true\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  ring?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallRequest\n   */\n  video?: boolean;\n}\n/**\n *\n * @export\n * @interface JoinCallResponse\n */\nexport interface JoinCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof JoinCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {boolean}\n   * @memberof JoinCallResponse\n   */\n  created: boolean;\n  /**\n   *\n   * @type {Credentials}\n   * @memberof JoinCallResponse\n   */\n  credentials: Credentials;\n  /**\n   *\n   * @type {string}\n   * @memberof JoinCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof JoinCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof JoinCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof JoinCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   *\n   * @type {StatsOptions}\n   * @memberof JoinCallResponse\n   */\n  stats_options: StatsOptions;\n}\n/**\n *\n * @export\n * @interface LayoutSettingsRequest\n */\nexport interface LayoutSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof LayoutSettingsRequest\n   */\n  detect_orientation?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  external_app_url?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  external_css_url?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof LayoutSettingsRequest\n   */\n  name: LayoutSettingsRequestNameEnum;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof LayoutSettingsRequest\n   */\n  options?: { [key: string]: any };\n}\n\n/**\n * @export\n */\nexport const LayoutSettingsRequestNameEnum = {\n  SPOTLIGHT: 'spotlight',\n  GRID: 'grid',\n  SINGLE_PARTICIPANT: 'single-participant',\n  MOBILE: 'mobile',\n  CUSTOM: 'custom',\n} as const;\nexport type LayoutSettingsRequestNameEnum =\n  (typeof LayoutSettingsRequestNameEnum)[keyof typeof LayoutSettingsRequestNameEnum];\n\n/**\n *\n * @export\n * @interface LimitsSettingsRequest\n */\nexport interface LimitsSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsRequest\n   */\n  max_duration_seconds?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsRequest\n   */\n  max_participants?: number;\n}\n/**\n *\n * @export\n * @interface LimitsSettingsResponse\n */\nexport interface LimitsSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsResponse\n   */\n  max_duration_seconds?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof LimitsSettingsResponse\n   */\n  max_participants?: number;\n}\n/**\n * List devices response\n * @export\n * @interface ListDevicesResponse\n */\nexport interface ListDevicesResponse {\n  /**\n   * List of devices\n   * @type {Array<DeviceResponse>}\n   * @memberof ListDevicesResponse\n   */\n  devices: Array<DeviceResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof ListDevicesResponse\n   */\n  duration: string;\n}\n/**\n * Response for listing recordings\n * @export\n * @interface ListRecordingsResponse\n */\nexport interface ListRecordingsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ListRecordingsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<CallRecording>}\n   * @memberof ListRecordingsResponse\n   */\n  recordings: Array<CallRecording>;\n}\n/**\n *\n * @export\n * @interface ListTranscriptionsResponse\n */\nexport interface ListTranscriptionsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ListTranscriptionsResponse\n   */\n  duration: string;\n  /**\n   * List of transcriptions for the call\n   * @type {Array<CallTranscription>}\n   * @memberof ListTranscriptionsResponse\n   */\n  transcriptions: Array<CallTranscription>;\n}\n/**\n *\n * @export\n * @interface Location\n */\nexport interface Location {\n  /**\n   *\n   * @type {string}\n   * @memberof Location\n   */\n  continent_code: string;\n  /**\n   *\n   * @type {string}\n   * @memberof Location\n   */\n  country_iso_code: string;\n  /**\n   *\n   * @type {string}\n   * @memberof Location\n   */\n  subdivision_iso_code: string;\n}\n/**\n * MemberRequest is the payload for adding a member to a call.\n * @export\n * @interface MemberRequest\n */\nexport interface MemberRequest {\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof MemberRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof MemberRequest\n   */\n  role?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberRequest\n   */\n  user_id: string;\n}\n/**\n * MemberResponse is the payload for a member of a call.\n * @export\n * @interface MemberResponse\n */\nexport interface MemberResponse {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  created_at: string;\n  /**\n   * Custom member response data\n   * @type {{ [key: string]: any; }}\n   * @memberof MemberResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   * Date/time of deletion\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  role?: string;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  updated_at: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof MemberResponse\n   */\n  user: UserResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof MemberResponse\n   */\n  user_id: string;\n}\n/**\n *\n * @export\n * @interface MessageStatsResponse\n */\nexport interface MessageStatsResponse {\n  /**\n   *\n   * @type {Array<CountByMinuteResponse>}\n   * @memberof MessageStatsResponse\n   */\n  count_over_time?: Array<CountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface MuteUsersRequest\n */\nexport interface MuteUsersRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  audio?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  mute_all_users?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  screenshare?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  screenshare_audio?: boolean;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof MuteUsersRequest\n   */\n  user_ids?: Array<string>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof MuteUsersRequest\n   */\n  video?: boolean;\n}\n/**\n * MuteUsersResponse is the response payload for the mute users endpoint.\n * @export\n * @interface MuteUsersResponse\n */\nexport interface MuteUsersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof MuteUsersResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface NetworkMetricsReportResponse\n */\nexport interface NetworkMetricsReportResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_connection_time?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_jitter?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_latency?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof NetworkMetricsReportResponse\n   */\n  average_time_to_reconnect?: number;\n}\n/**\n *\n * @export\n * @interface NoiseCancellationSettings\n */\nexport interface NoiseCancellationSettings {\n  /**\n   *\n   * @type {string}\n   * @memberof NoiseCancellationSettings\n   */\n  mode: NoiseCancellationSettingsModeEnum;\n}\n\n/**\n * @export\n */\nexport const NoiseCancellationSettingsModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type NoiseCancellationSettingsModeEnum =\n  (typeof NoiseCancellationSettingsModeEnum)[keyof typeof NoiseCancellationSettingsModeEnum];\n\n/**\n * All possibility of string to use\n * @export\n */\nexport const OwnCapability = {\n  BLOCK_USERS: 'block-users',\n  CHANGE_MAX_DURATION: 'change-max-duration',\n  CREATE_CALL: 'create-call',\n  CREATE_REACTION: 'create-reaction',\n  ENABLE_NOISE_CANCELLATION: 'enable-noise-cancellation',\n  END_CALL: 'end-call',\n  JOIN_BACKSTAGE: 'join-backstage',\n  JOIN_CALL: 'join-call',\n  JOIN_ENDED_CALL: 'join-ended-call',\n  MUTE_USERS: 'mute-users',\n  PIN_FOR_EVERYONE: 'pin-for-everyone',\n  READ_CALL: 'read-call',\n  REMOVE_CALL_MEMBER: 'remove-call-member',\n  SCREENSHARE: 'screenshare',\n  SEND_AUDIO: 'send-audio',\n  SEND_VIDEO: 'send-video',\n  START_BROADCAST_CALL: 'start-broadcast-call',\n  START_CLOSED_CAPTIONS_CALL: 'start-closed-captions-call',\n  START_FRAME_RECORD_CALL: 'start-frame-record-call',\n  START_RECORD_CALL: 'start-record-call',\n  START_TRANSCRIPTION_CALL: 'start-transcription-call',\n  STOP_BROADCAST_CALL: 'stop-broadcast-call',\n  STOP_CLOSED_CAPTIONS_CALL: 'stop-closed-captions-call',\n  STOP_FRAME_RECORD_CALL: 'stop-frame-record-call',\n  STOP_RECORD_CALL: 'stop-record-call',\n  STOP_TRANSCRIPTION_CALL: 'stop-transcription-call',\n  UPDATE_CALL: 'update-call',\n  UPDATE_CALL_MEMBER: 'update-call-member',\n  UPDATE_CALL_PERMISSIONS: 'update-call-permissions',\n  UPDATE_CALL_SETTINGS: 'update-call-settings',\n} as const;\nexport type OwnCapability = (typeof OwnCapability)[keyof typeof OwnCapability];\n\n/**\n *\n * @export\n * @interface OwnUserResponse\n */\nexport interface OwnUserResponse {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof OwnUserResponse\n   */\n  blocked_user_ids?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof OwnUserResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  deactivated_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {Array<DeviceResponse>}\n   * @memberof OwnUserResponse\n   */\n  devices: Array<DeviceResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  image?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  last_active?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof OwnUserResponse\n   */\n  privacy_settings?: object;\n  /**\n   *\n   * @type {PushPreferences}\n   * @memberof OwnUserResponse\n   */\n  push_preferences?: PushPreferences;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  role: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof OwnUserResponse\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof OwnUserResponse\n   */\n  updated_at: string;\n}\n/**\n *\n * @export\n * @interface ParticipantCountByMinuteResponse\n */\nexport interface ParticipantCountByMinuteResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  first: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  last: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  max: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  min: number;\n  /**\n   *\n   * @type {string}\n   * @memberof ParticipantCountByMinuteResponse\n   */\n  start_ts: string;\n}\n/**\n *\n * @export\n * @interface ParticipantCountOverTimeResponse\n */\nexport interface ParticipantCountOverTimeResponse {\n  /**\n   *\n   * @type {Array<ParticipantCountByMinuteResponse>}\n   * @memberof ParticipantCountOverTimeResponse\n   */\n  by_minute?: Array<ParticipantCountByMinuteResponse>;\n}\n/**\n *\n * @export\n * @interface ParticipantReportResponse\n */\nexport interface ParticipantReportResponse {\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_browser?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_country?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_device?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {Array<GroupedStatsResponse>}\n   * @memberof ParticipantReportResponse\n   */\n  by_operating_system?: Array<GroupedStatsResponse>;\n  /**\n   *\n   * @type {ParticipantCountOverTimeResponse}\n   * @memberof ParticipantReportResponse\n   */\n  count_over_time?: ParticipantCountOverTimeResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  max_concurrent?: number;\n  /**\n   *\n   * @type {PublisherStatsResponse}\n   * @memberof ParticipantReportResponse\n   */\n  publishers?: PublisherStatsResponse;\n  /**\n   *\n   * @type {SubscriberStatsResponse}\n   * @memberof ParticipantReportResponse\n   */\n  subscribers?: SubscriberStatsResponse;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  sum: number;\n  /**\n   *\n   * @type {number}\n   * @memberof ParticipantReportResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface PerSDKUsageReport\n */\nexport interface PerSDKUsageReport {\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof PerSDKUsageReport\n   */\n  by_version: { [key: string]: number };\n  /**\n   *\n   * @type {number}\n   * @memberof PerSDKUsageReport\n   */\n  total: number;\n}\n/**\n * This event is sent when a user requests access to a feature on a call,\n * clients receiving this event should display a permission request to the user\n * @export\n * @interface PermissionRequestEvent\n */\nexport interface PermissionRequestEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  created_at: string;\n  /**\n   * The list of permissions requested by the user\n   * @type {Array<string>}\n   * @memberof PermissionRequestEvent\n   */\n  permissions: Array<string>;\n  /**\n   * The type of event: \"call.permission_request\" in this case\n   * @type {string}\n   * @memberof PermissionRequestEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof PermissionRequestEvent\n   */\n  user: UserResponse;\n}\n/**\n * PinRequest is the payload for pinning a message.\n * @export\n * @interface PinRequest\n */\nexport interface PinRequest {\n  /**\n   * the session ID of the user who pinned the message\n   * @type {string}\n   * @memberof PinRequest\n   */\n  session_id: string;\n  /**\n   * the user ID of the user who pinned the message\n   * @type {string}\n   * @memberof PinRequest\n   */\n  user_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface PinResponse\n */\nexport interface PinResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof PinResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface PublisherStatsResponse\n */\nexport interface PublisherStatsResponse {\n  /**\n   *\n   * @type {Array<TrackStatsResponse>}\n   * @memberof PublisherStatsResponse\n   */\n  by_track?: Array<TrackStatsResponse>;\n  /**\n   *\n   * @type {number}\n   * @memberof PublisherStatsResponse\n   */\n  total: number;\n  /**\n   *\n   * @type {number}\n   * @memberof PublisherStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface PushPreferences\n */\nexport interface PushPreferences {\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  call_level?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  chat_level?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof PushPreferences\n   */\n  disabled_until?: string;\n}\n/**\n *\n * @export\n * @interface QualityScoreReport\n */\nexport interface QualityScoreReport {\n  /**\n   *\n   * @type {Array<ReportByHistogramBucket>}\n   * @memberof QualityScoreReport\n   */\n  histogram: Array<ReportByHistogramBucket>;\n}\n/**\n *\n * @export\n * @interface QualityScoreReportResponse\n */\nexport interface QualityScoreReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateQualityScoreReportResponse>}\n   * @memberof QualityScoreReportResponse\n   */\n  daily: Array<DailyAggregateQualityScoreReportResponse>;\n}\n/**\n *\n * @export\n * @interface QueryAggregateCallStatsRequest\n */\nexport interface QueryAggregateCallStatsRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  from?: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  report_types?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryAggregateCallStatsRequest\n   */\n  to?: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryAggregateCallStatsResponse\n */\nexport interface QueryAggregateCallStatsResponse {\n  /**\n   *\n   * @type {CallDurationReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  call_duration_report?: CallDurationReportResponse;\n  /**\n   *\n   * @type {CallParticipantCountReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  call_participant_count_report?: CallParticipantCountReportResponse;\n  /**\n   *\n   * @type {CallsPerDayReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  calls_per_day_report?: CallsPerDayReportResponse;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {NetworkMetricsReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  network_metrics_report?: NetworkMetricsReportResponse;\n  /**\n   *\n   * @type {QualityScoreReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  quality_score_report?: QualityScoreReportResponse;\n  /**\n   *\n   * @type {SDKUsageReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  sdk_usage_report?: SDKUsageReportResponse;\n  /**\n   *\n   * @type {UserFeedbackReportResponse}\n   * @memberof QueryAggregateCallStatsResponse\n   */\n  user_feedback_report?: UserFeedbackReportResponse;\n}\n/**\n *\n * @export\n * @interface QueryCallMembersRequest\n */\nexport interface QueryCallMembersRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallMembersRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallMembersRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallMembersRequest\n   */\n  sort?: Array<SortParamRequest>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersRequest\n   */\n  type: string;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallMembersResponse\n */\nexport interface QueryCallMembersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof QueryCallMembersResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallMembersResponse\n   */\n  prev?: string;\n}\n/**\n *\n * @export\n * @interface QueryCallStatsRequest\n */\nexport interface QueryCallStatsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallStatsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallStatsRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsRequest\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallStatsRequest\n   */\n  sort?: Array<SortParamRequest>;\n}\n/**\n * Basic response information\n * @export\n * @interface QueryCallStatsResponse\n */\nexport interface QueryCallStatsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallStatsResponse\n   */\n  prev?: string;\n  /**\n   *\n   * @type {Array<CallStatsReportSummaryResponse>}\n   * @memberof QueryCallStatsResponse\n   */\n  reports: Array<CallStatsReportSummaryResponse>;\n}\n/**\n *\n * @export\n * @interface QueryCallsRequest\n */\nexport interface QueryCallsRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof QueryCallsRequest\n   */\n  filter_conditions?: { [key: string]: any };\n  /**\n   *\n   * @type {number}\n   * @memberof QueryCallsRequest\n   */\n  limit?: number;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsRequest\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsRequest\n   */\n  prev?: string;\n  /**\n   * Array of sort parameters\n   * @type {Array<SortParamRequest>}\n   * @memberof QueryCallsRequest\n   */\n  sort?: Array<SortParamRequest>;\n  /**\n   *\n   * @type {boolean}\n   * @memberof QueryCallsRequest\n   */\n  watch?: boolean;\n}\n/**\n *\n * @export\n * @interface QueryCallsResponse\n */\nexport interface QueryCallsResponse {\n  /**\n   *\n   * @type {Array<CallStateResponseFields>}\n   * @memberof QueryCallsResponse\n   */\n  calls: Array<CallStateResponseFields>;\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  next?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof QueryCallsResponse\n   */\n  prev?: string;\n}\n/**\n *\n * @export\n * @interface ReportResponse\n */\nexport interface ReportResponse {\n  /**\n   *\n   * @type {CallReportResponse}\n   * @memberof ReportResponse\n   */\n  call: CallReportResponse;\n  /**\n   *\n   * @type {ParticipantReportResponse}\n   * @memberof ReportResponse\n   */\n  participants: ParticipantReportResponse;\n  /**\n   *\n   * @type {UserRatingReportResponse}\n   * @memberof ReportResponse\n   */\n  user_ratings: UserRatingReportResponse;\n}\n/**\n * RTMPBroadcastRequest is the payload for starting an RTMP broadcast.\n * @export\n * @interface RTMPBroadcastRequest\n */\nexport interface RTMPBroadcastRequest {\n  /**\n   *\n   * @type {LayoutSettingsRequest}\n   * @memberof RTMPBroadcastRequest\n   */\n  layout?: LayoutSettingsRequest;\n  /**\n   * Name identifier for RTMP broadcast, must be unique in call\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  name: string;\n  /**\n   * If provided, will override the call's RTMP settings quality\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  quality?: RTMPBroadcastRequestQualityEnum;\n  /**\n   * If provided, will be appended at the end of stream_url\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  stream_key?: string;\n  /**\n   * URL for the RTMP server to send the call to\n   * @type {string}\n   * @memberof RTMPBroadcastRequest\n   */\n  stream_url: string;\n}\n\n/**\n * @export\n */\nexport const RTMPBroadcastRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n  PORTRAIT_2160X3840: 'portrait-2160x3840',\n} as const;\nexport type RTMPBroadcastRequestQualityEnum =\n  (typeof RTMPBroadcastRequestQualityEnum)[keyof typeof RTMPBroadcastRequestQualityEnum];\n\n/**\n * RTMP input settings\n * @export\n * @interface RTMPIngress\n */\nexport interface RTMPIngress {\n  /**\n   *\n   * @type {string}\n   * @memberof RTMPIngress\n   */\n  address: string;\n}\n/**\n *\n * @export\n * @interface RTMPSettingsRequest\n */\nexport interface RTMPSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RTMPSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   * Resolution to set for the RTMP stream\n   * @type {string}\n   * @memberof RTMPSettingsRequest\n   */\n  quality?: RTMPSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const RTMPSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n  PORTRAIT_2160X3840: 'portrait-2160x3840',\n} as const;\nexport type RTMPSettingsRequestQualityEnum =\n  (typeof RTMPSettingsRequestQualityEnum)[keyof typeof RTMPSettingsRequestQualityEnum];\n\n/**\n * RTMPSettingsResponse is the payload for RTMP settings\n * @export\n * @interface RTMPSettingsResponse\n */\nexport interface RTMPSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RTMPSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RTMPSettingsResponse\n   */\n  quality: string;\n}\n/**\n *\n * @export\n * @interface ReactionResponse\n */\nexport interface ReactionResponse {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof ReactionResponse\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof ReactionResponse\n   */\n  emoji_code?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof ReactionResponse\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof ReactionResponse\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface RecordSettingsRequest\n */\nexport interface RecordSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RecordSettingsRequest\n   */\n  audio_only?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsRequest\n   */\n  mode: RecordSettingsRequestModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsRequest\n   */\n  quality?: RecordSettingsRequestQualityEnum;\n}\n\n/**\n * @export\n */\nexport const RecordSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type RecordSettingsRequestModeEnum =\n  (typeof RecordSettingsRequestModeEnum)[keyof typeof RecordSettingsRequestModeEnum];\n\n/**\n * @export\n */\nexport const RecordSettingsRequestQualityEnum = {\n  _360P: '360p',\n  _480P: '480p',\n  _720P: '720p',\n  _1080P: '1080p',\n  _1440P: '1440p',\n  _2160P: '2160p',\n  PORTRAIT_360X640: 'portrait-360x640',\n  PORTRAIT_480X854: 'portrait-480x854',\n  PORTRAIT_720X1280: 'portrait-720x1280',\n  PORTRAIT_1080X1920: 'portrait-1080x1920',\n  PORTRAIT_1440X2560: 'portrait-1440x2560',\n  PORTRAIT_2160X3840: 'portrait-2160x3840',\n} as const;\nexport type RecordSettingsRequestQualityEnum =\n  (typeof RecordSettingsRequestQualityEnum)[keyof typeof RecordSettingsRequestQualityEnum];\n\n/**\n * RecordSettings is the payload for recording settings\n * @export\n * @interface RecordSettingsResponse\n */\nexport interface RecordSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof RecordSettingsResponse\n   */\n  audio_only: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsResponse\n   */\n  mode: string;\n  /**\n   *\n   * @type {string}\n   * @memberof RecordSettingsResponse\n   */\n  quality: string;\n}\n/**\n *\n * @export\n * @interface RejectCallRequest\n */\nexport interface RejectCallRequest {\n  /**\n   * Reason for rejecting the call\n   * @type {string}\n   * @memberof RejectCallRequest\n   */\n  reason?: string;\n}\n/**\n *\n * @export\n * @interface RejectCallResponse\n */\nexport interface RejectCallResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof RejectCallResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface ReportByHistogramBucket\n */\nexport interface ReportByHistogramBucket {\n  /**\n   *\n   * @type {string}\n   * @memberof ReportByHistogramBucket\n   */\n  category: string;\n  /**\n   *\n   * @type {number}\n   * @memberof ReportByHistogramBucket\n   */\n  count: number;\n  /**\n   *\n   * @type {Bound}\n   * @memberof ReportByHistogramBucket\n   */\n  lower_bound?: Bound;\n  /**\n   *\n   * @type {number}\n   * @memberof ReportByHistogramBucket\n   */\n  sum: number;\n  /**\n   *\n   * @type {Bound}\n   * @memberof ReportByHistogramBucket\n   */\n  upper_bound?: Bound;\n}\n/**\n *\n * @export\n * @interface RequestPermissionRequest\n */\nexport interface RequestPermissionRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof RequestPermissionRequest\n   */\n  permissions: Array<string>;\n}\n/**\n *\n * @export\n * @interface RequestPermissionResponse\n */\nexport interface RequestPermissionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof RequestPermissionResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface Response\n */\nexport interface Response {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof Response\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface RingSettingsRequest\n */\nexport interface RingSettingsRequest {\n  /**\n   * When none of the callees accept a ring call in this time a rejection will be sent by the caller with reason 'timeout' by the SDKs\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  auto_cancel_timeout_ms: number;\n  /**\n   * When a callee is online but doesn't answer a ring call in this time a rejection will be sent with reason 'timeout' by the SDKs\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  incoming_call_timeout_ms: number;\n  /**\n   * When a callee doesn't accept or reject a ring call in this time a missed call event will be sent\n   * @type {number}\n   * @memberof RingSettingsRequest\n   */\n  missed_call_timeout_ms?: number;\n}\n/**\n *\n * @export\n * @interface RingSettingsResponse\n */\nexport interface RingSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  auto_cancel_timeout_ms: number;\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  incoming_call_timeout_ms: number;\n  /**\n   *\n   * @type {number}\n   * @memberof RingSettingsResponse\n   */\n  missed_call_timeout_ms: number;\n}\n/**\n *\n * @export\n * @interface SDKUsageReport\n */\nexport interface SDKUsageReport {\n  /**\n   *\n   * @type {{ [key: string]: PerSDKUsageReport; }}\n   * @memberof SDKUsageReport\n   */\n  per_sdk_usage: { [key: string]: PerSDKUsageReport };\n}\n/**\n *\n * @export\n * @interface SDKUsageReportResponse\n */\nexport interface SDKUsageReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateSDKUsageReportResponse>}\n   * @memberof SDKUsageReportResponse\n   */\n  daily: Array<DailyAggregateSDKUsageReportResponse>;\n}\n/**\n *\n * @export\n * @interface SFUResponse\n */\nexport interface SFUResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  edge_name: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  url: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SFUResponse\n   */\n  ws_endpoint: string;\n}\n/**\n *\n * @export\n * @interface ScreensharingSettingsRequest\n */\nexport interface ScreensharingSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof ScreensharingSettingsRequest\n   */\n  target_resolution?: TargetResolution;\n}\n/**\n *\n * @export\n * @interface ScreensharingSettingsResponse\n */\nexport interface ScreensharingSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof ScreensharingSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof ScreensharingSettingsResponse\n   */\n  target_resolution?: TargetResolution;\n}\n/**\n * Send a call event to the other user\n * @export\n * @interface SendCallEventRequest\n */\nexport interface SendCallEventRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof SendCallEventRequest\n   */\n  custom?: { [key: string]: any };\n}\n/**\n *\n * @export\n * @interface SendCallEventResponse\n */\nexport interface SendCallEventResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof SendCallEventResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface SendReactionRequest\n */\nexport interface SendReactionRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof SendReactionRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof SendReactionRequest\n   */\n  emoji_code?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof SendReactionRequest\n   */\n  type: string;\n}\n/**\n * Basic response information\n * @export\n * @interface SendReactionResponse\n */\nexport interface SendReactionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof SendReactionResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {ReactionResponse}\n   * @memberof SendReactionResponse\n   */\n  reaction: ReactionResponse;\n}\n/**\n *\n * @export\n * @interface SessionSettingsRequest\n */\nexport interface SessionSettingsRequest {\n  /**\n   *\n   * @type {number}\n   * @memberof SessionSettingsRequest\n   */\n  inactivity_timeout_seconds: number;\n}\n/**\n *\n * @export\n * @interface SessionSettingsResponse\n */\nexport interface SessionSettingsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof SessionSettingsResponse\n   */\n  inactivity_timeout_seconds: number;\n}\n/**\n *\n * @export\n * @interface SortParamRequest\n */\nexport interface SortParamRequest {\n  /**\n   * Direction of sorting, 1 for Ascending, -1 for Descending, default is 1\n   * @type {number}\n   * @memberof SortParamRequest\n   */\n  direction?: number;\n  /**\n   * Name of field to sort by\n   * @type {string}\n   * @memberof SortParamRequest\n   */\n  field?: string;\n}\n/**\n *\n * @export\n * @interface StartClosedCaptionsRequest\n */\nexport interface StartClosedCaptionsRequest {\n  /**\n   * Enable transcriptions along with closed captions\n   * @type {boolean}\n   * @memberof StartClosedCaptionsRequest\n   */\n  enable_transcription?: boolean;\n  /**\n   * Which external storage to use for transcriptions (only applicable if enable_transcription is true)\n   * @type {string}\n   * @memberof StartClosedCaptionsRequest\n   */\n  external_storage?: string;\n  /**\n   * The spoken language in the call, if not provided the language defined in the transcription settings will be used\n   * @type {string}\n   * @memberof StartClosedCaptionsRequest\n   */\n  language?: string;\n}\n/**\n *\n * @export\n * @interface StartClosedCaptionsResponse\n */\nexport interface StartClosedCaptionsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof StartClosedCaptionsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartFrameRecordingRequest\n */\nexport interface StartFrameRecordingRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof StartFrameRecordingRequest\n   */\n  recording_external_storage?: string;\n}\n/**\n * StartFrameRecordingResponse is the response payload for the start frame recording endpoint.\n * @export\n * @interface StartFrameRecordingResponse\n */\nexport interface StartFrameRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartFrameRecordingResponse\n   */\n  duration: string;\n}\n/**\n * StartHLSBroadcastingResponse is the payload for starting an HLS broadcasting.\n * @export\n * @interface StartHLSBroadcastingResponse\n */\nexport interface StartHLSBroadcastingResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof StartHLSBroadcastingResponse\n   */\n  duration: string;\n  /**\n   * the URL of the HLS playlist\n   * @type {string}\n   * @memberof StartHLSBroadcastingResponse\n   */\n  playlist_url: string;\n}\n/**\n * StartRTMPBroadcastsRequest is the payload for starting RTMP broadcasts.\n * @export\n * @interface StartRTMPBroadcastsRequest\n */\nexport interface StartRTMPBroadcastsRequest {\n  /**\n   * List of broadcasts to start\n   * @type {Array<RTMPBroadcastRequest>}\n   * @memberof StartRTMPBroadcastsRequest\n   */\n  broadcasts: Array<RTMPBroadcastRequest>;\n}\n/**\n * StartRTMPBroadcastsResponse is the payload for starting an RTMP broadcast.\n * @export\n * @interface StartRTMPBroadcastsResponse\n */\nexport interface StartRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartRecordingRequest\n */\nexport interface StartRecordingRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof StartRecordingRequest\n   */\n  recording_external_storage?: string;\n}\n/**\n * StartRecordingResponse is the response payload for the start recording endpoint.\n * @export\n * @interface StartRecordingResponse\n */\nexport interface StartRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartRecordingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StartTranscriptionRequest\n */\nexport interface StartTranscriptionRequest {\n  /**\n   * Enable closed captions along with transcriptions\n   * @type {boolean}\n   * @memberof StartTranscriptionRequest\n   */\n  enable_closed_captions?: boolean;\n  /**\n   * The spoken language in the call, if not provided the language defined in the transcription settings will be used\n   * @type {string}\n   * @memberof StartTranscriptionRequest\n   */\n  language?: string;\n  /**\n   * Store transcriptions in this external storage\n   * @type {string}\n   * @memberof StartTranscriptionRequest\n   */\n  transcription_external_storage?: string;\n}\n/**\n *\n * @export\n * @interface StartTranscriptionResponse\n */\nexport interface StartTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StartTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StatsOptions\n */\nexport interface StatsOptions {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StatsOptions\n   */\n  enable_rtc_stats: boolean;\n  /**\n   *\n   * @type {number}\n   * @memberof StatsOptions\n   */\n  reporting_interval_ms: number;\n}\n/**\n *\n * @export\n * @interface StopAllRTMPBroadcastsResponse\n */\nexport interface StopAllRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopAllRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopClosedCaptionsRequest\n */\nexport interface StopClosedCaptionsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopClosedCaptionsRequest\n   */\n  stop_transcription?: boolean;\n}\n/**\n * Basic response information\n * @export\n * @interface StopClosedCaptionsResponse\n */\nexport interface StopClosedCaptionsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopClosedCaptionsResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopFrameRecordingResponse\n */\nexport interface StopFrameRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopFrameRecordingResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopHLSBroadcastingResponse\n */\nexport interface StopHLSBroadcastingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopHLSBroadcastingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopLiveRequest\n */\nexport interface StopLiveRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_closed_caption?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_hls?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_recording?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_rtmp_broadcasts?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopLiveRequest\n   */\n  continue_transcription?: boolean;\n}\n/**\n *\n * @export\n * @interface StopLiveResponse\n */\nexport interface StopLiveResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof StopLiveResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof StopLiveResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopRTMPBroadcastsResponse\n */\nexport interface StopRTMPBroadcastsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopRTMPBroadcastsResponse\n   */\n  duration: string;\n}\n/**\n * Basic response information\n * @export\n * @interface StopRecordingResponse\n */\nexport interface StopRecordingResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopRecordingResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface StopTranscriptionRequest\n */\nexport interface StopTranscriptionRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof StopTranscriptionRequest\n   */\n  stop_closed_captions?: boolean;\n}\n/**\n * Basic response information\n * @export\n * @interface StopTranscriptionResponse\n */\nexport interface StopTranscriptionResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof StopTranscriptionResponse\n   */\n  duration: string;\n}\n/**\n *\n * @export\n * @interface SubscriberStatsResponse\n */\nexport interface SubscriberStatsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  total: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  total_subscribed_duration_seconds: number;\n  /**\n   *\n   * @type {number}\n   * @memberof SubscriberStatsResponse\n   */\n  unique: number;\n}\n/**\n *\n * @export\n * @interface TargetResolution\n */\nexport interface TargetResolution {\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  bitrate?: number;\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof TargetResolution\n   */\n  width: number;\n}\n/**\n *\n * @export\n * @interface ThumbnailResponse\n */\nexport interface ThumbnailResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof ThumbnailResponse\n   */\n  image_url: string;\n}\n/**\n *\n * @export\n * @interface ThumbnailsSettingsRequest\n */\nexport interface ThumbnailsSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ThumbnailsSettingsRequest\n   */\n  enabled?: boolean;\n}\n/**\n *\n * @export\n * @interface ThumbnailsSettingsResponse\n */\nexport interface ThumbnailsSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof ThumbnailsSettingsResponse\n   */\n  enabled: boolean;\n}\n/**\n *\n * @export\n * @interface TrackStatsResponse\n */\nexport interface TrackStatsResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof TrackStatsResponse\n   */\n  duration_seconds: number;\n  /**\n   *\n   * @type {string}\n   * @memberof TrackStatsResponse\n   */\n  track_type: string;\n}\n/**\n *\n * @export\n * @interface TranscriptionSettingsRequest\n */\nexport interface TranscriptionSettingsRequest {\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  closed_caption_mode?: TranscriptionSettingsRequestClosedCaptionModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  language?: TranscriptionSettingsRequestLanguageEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsRequest\n   */\n  mode: TranscriptionSettingsRequestModeEnum;\n}\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestClosedCaptionModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsRequestClosedCaptionModeEnum =\n  (typeof TranscriptionSettingsRequestClosedCaptionModeEnum)[keyof typeof TranscriptionSettingsRequestClosedCaptionModeEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n} as const;\nexport type TranscriptionSettingsRequestLanguageEnum =\n  (typeof TranscriptionSettingsRequestLanguageEnum)[keyof typeof TranscriptionSettingsRequestLanguageEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsRequestModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsRequestModeEnum =\n  (typeof TranscriptionSettingsRequestModeEnum)[keyof typeof TranscriptionSettingsRequestModeEnum];\n\n/**\n *\n * @export\n * @interface TranscriptionSettingsResponse\n */\nexport interface TranscriptionSettingsResponse {\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  closed_caption_mode: TranscriptionSettingsResponseClosedCaptionModeEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  language: TranscriptionSettingsResponseLanguageEnum;\n  /**\n   *\n   * @type {string}\n   * @memberof TranscriptionSettingsResponse\n   */\n  mode: TranscriptionSettingsResponseModeEnum;\n}\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseClosedCaptionModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsResponseClosedCaptionModeEnum =\n  (typeof TranscriptionSettingsResponseClosedCaptionModeEnum)[keyof typeof TranscriptionSettingsResponseClosedCaptionModeEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseLanguageEnum = {\n  AUTO: 'auto',\n  EN: 'en',\n  FR: 'fr',\n  ES: 'es',\n  DE: 'de',\n  IT: 'it',\n  NL: 'nl',\n  PT: 'pt',\n  PL: 'pl',\n  CA: 'ca',\n  CS: 'cs',\n  DA: 'da',\n  EL: 'el',\n  FI: 'fi',\n  ID: 'id',\n  JA: 'ja',\n  RU: 'ru',\n  SV: 'sv',\n  TA: 'ta',\n  TH: 'th',\n  TR: 'tr',\n  HU: 'hu',\n  RO: 'ro',\n  ZH: 'zh',\n  AR: 'ar',\n  TL: 'tl',\n  HE: 'he',\n  HI: 'hi',\n  HR: 'hr',\n  KO: 'ko',\n  MS: 'ms',\n  NO: 'no',\n  UK: 'uk',\n} as const;\nexport type TranscriptionSettingsResponseLanguageEnum =\n  (typeof TranscriptionSettingsResponseLanguageEnum)[keyof typeof TranscriptionSettingsResponseLanguageEnum];\n\n/**\n * @export\n */\nexport const TranscriptionSettingsResponseModeEnum = {\n  AVAILABLE: 'available',\n  DISABLED: 'disabled',\n  AUTO_ON: 'auto-on',\n} as const;\nexport type TranscriptionSettingsResponseModeEnum =\n  (typeof TranscriptionSettingsResponseModeEnum)[keyof typeof TranscriptionSettingsResponseModeEnum];\n\n/**\n * UnblockUserRequest is the payload for unblocking a user.\n * @export\n * @interface UnblockUserRequest\n */\nexport interface UnblockUserRequest {\n  /**\n   * the user to unblock\n   * @type {string}\n   * @memberof UnblockUserRequest\n   */\n  user_id: string;\n}\n/**\n * UnblockUserResponse is the payload for unblocking a user.\n * @export\n * @interface UnblockUserResponse\n */\nexport interface UnblockUserResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UnblockUserResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent when a user is unblocked on a call,\n * this can be useful to notify the user that they can now join the call again\n * @export\n * @interface UnblockedUserEvent\n */\nexport interface UnblockedUserEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  created_at: string;\n  /**\n   * The type of event: \"call.unblocked_user\" in this case\n   * @type {string}\n   * @memberof UnblockedUserEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof UnblockedUserEvent\n   */\n  user: UserResponse;\n}\n/**\n * UnpinRequest is the payload for unpinning a message.\n * @export\n * @interface UnpinRequest\n */\nexport interface UnpinRequest {\n  /**\n   * the session ID of the user who pinned the message\n   * @type {string}\n   * @memberof UnpinRequest\n   */\n  session_id: string;\n  /**\n   * the user ID of the user who pinned the message\n   * @type {string}\n   * @memberof UnpinRequest\n   */\n  user_id: string;\n}\n/**\n * UnpinResponse is the payload for unpinning a message.\n * @export\n * @interface UnpinResponse\n */\nexport interface UnpinResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UnpinResponse\n   */\n  duration: string;\n}\n/**\n * Update call members\n * @export\n * @interface UpdateCallMembersRequest\n */\nexport interface UpdateCallMembersRequest {\n  /**\n   * List of userID to remove\n   * @type {Array<string>}\n   * @memberof UpdateCallMembersRequest\n   */\n  remove_members?: Array<string>;\n  /**\n   * List of members to update or insert\n   * @type {Array<MemberRequest>}\n   * @memberof UpdateCallMembersRequest\n   */\n  update_members?: Array<MemberRequest>;\n}\n/**\n * Basic response information\n * @export\n * @interface UpdateCallMembersResponse\n */\nexport interface UpdateCallMembersResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UpdateCallMembersResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof UpdateCallMembersResponse\n   */\n  members: Array<MemberResponse>;\n}\n/**\n * Request for updating a call\n * @export\n * @interface UpdateCallRequest\n */\nexport interface UpdateCallRequest {\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof UpdateCallRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   *\n   * @type {CallSettingsRequest}\n   * @memberof UpdateCallRequest\n   */\n  settings_override?: CallSettingsRequest;\n  /**\n   * the time the call is scheduled to start\n   * @type {string}\n   * @memberof UpdateCallRequest\n   */\n  starts_at?: string;\n}\n/**\n * Response for updating a call\n * @export\n * @interface UpdateCallResponse\n */\nexport interface UpdateCallResponse {\n  /**\n   *\n   * @type {CallResponse}\n   * @memberof UpdateCallResponse\n   */\n  call: CallResponse;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdateCallResponse\n   */\n  duration: string;\n  /**\n   *\n   * @type {Array<MemberResponse>}\n   * @memberof UpdateCallResponse\n   */\n  members: Array<MemberResponse>;\n  /**\n   *\n   * @type {MemberResponse}\n   * @memberof UpdateCallResponse\n   */\n  membership?: MemberResponse;\n  /**\n   *\n   * @type {Array<OwnCapability>}\n   * @memberof UpdateCallResponse\n   */\n  own_capabilities: Array<OwnCapability>;\n}\n/**\n *\n * @export\n * @interface UpdateUserPermissionsRequest\n */\nexport interface UpdateUserPermissionsRequest {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  grant_permissions?: Array<string>;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  revoke_permissions?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdateUserPermissionsRequest\n   */\n  user_id: string;\n}\n/**\n * Basic response information\n * @export\n * @interface UpdateUserPermissionsResponse\n */\nexport interface UpdateUserPermissionsResponse {\n  /**\n   * Duration of the request in milliseconds\n   * @type {string}\n   * @memberof UpdateUserPermissionsResponse\n   */\n  duration: string;\n}\n/**\n * This event is sent to notify about permission changes for a user, clients receiving this event should update their UI accordingly\n * @export\n * @interface UpdatedCallPermissionsEvent\n */\nexport interface UpdatedCallPermissionsEvent {\n  /**\n   *\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  call_cid: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  created_at: string;\n  /**\n   * The capabilities of the current user\n   * @type {Array<OwnCapability>}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  own_capabilities: Array<OwnCapability>;\n  /**\n   * The type of event: \"call.permissions_updated\" in this case\n   * @type {string}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponse}\n   * @memberof UpdatedCallPermissionsEvent\n   */\n  user: UserResponse;\n}\n/**\n *\n * @export\n * @interface UserFeedbackReport\n */\nexport interface UserFeedbackReport {\n  /**\n   *\n   * @type {{ [key: string]: number; }}\n   * @memberof UserFeedbackReport\n   */\n  count_by_rating: { [key: string]: number };\n  /**\n   *\n   * @type {number}\n   * @memberof UserFeedbackReport\n   */\n  unreported_count: number;\n}\n/**\n *\n * @export\n * @interface UserFeedbackReportResponse\n */\nexport interface UserFeedbackReportResponse {\n  /**\n   *\n   * @type {Array<DailyAggregateUserFeedbackReportResponse>}\n   * @memberof UserFeedbackReportResponse\n   */\n  daily: Array<DailyAggregateUserFeedbackReportResponse>;\n}\n/**\n *\n * @export\n * @interface UserRatingReportResponse\n */\nexport interface UserRatingReportResponse {\n  /**\n   *\n   * @type {number}\n   * @memberof UserRatingReportResponse\n   */\n  average: number;\n  /**\n   *\n   * @type {number}\n   * @memberof UserRatingReportResponse\n   */\n  count: number;\n}\n/**\n * User request object\n * @export\n * @interface UserRequest\n */\nexport interface UserRequest {\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserRequest\n   */\n  custom?: { [key: string]: any };\n  /**\n   * User ID\n   * @type {string}\n   * @memberof UserRequest\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserRequest\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof UserRequest\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof UserRequest\n   */\n  language?: string;\n  /**\n   * Optional name of user\n   * @type {string}\n   * @memberof UserRequest\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof UserRequest\n   */\n  privacy_settings?: object;\n}\n/**\n * User response object\n * @export\n * @interface UserResponse\n */\nexport interface UserResponse {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponse\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof UserResponse\n   */\n  created_at: string;\n  /**\n   * Custom data for this object\n   * @type {{ [key: string]: any; }}\n   * @memberof UserResponse\n   */\n  custom: { [key: string]: any };\n  /**\n   * Date of deactivation\n   * @type {string}\n   * @memberof UserResponse\n   */\n  deactivated_at?: string;\n  /**\n   * Date/time of deletion\n   * @type {string}\n   * @memberof UserResponse\n   */\n  deleted_at?: string;\n  /**\n   * Unique user identifier\n   * @type {string}\n   * @memberof UserResponse\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponse\n   */\n  image?: string;\n  /**\n   * Preferred language of a user\n   * @type {string}\n   * @memberof UserResponse\n   */\n  language: string;\n  /**\n   * Date of last activity\n   * @type {string}\n   * @memberof UserResponse\n   */\n  last_active?: string;\n  /**\n   * Optional name of user\n   * @type {string}\n   * @memberof UserResponse\n   */\n  name?: string;\n  /**\n   * Revocation date for tokens\n   * @type {string}\n   * @memberof UserResponse\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   * Determines the set of user permissions\n   * @type {string}\n   * @memberof UserResponse\n   */\n  role: string;\n  /**\n   * List of teams user is a part of\n   * @type {Array<string>}\n   * @memberof UserResponse\n   */\n  teams: Array<string>;\n  /**\n   * Date/time of the last update\n   * @type {string}\n   * @memberof UserResponse\n   */\n  updated_at: string;\n}\n/**\n *\n * @export\n * @interface UserResponsePrivacyFields\n */\nexport interface UserResponsePrivacyFields {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponsePrivacyFields\n   */\n  blocked_user_ids: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserResponsePrivacyFields\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  deactivated_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  deleted_at?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  id: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  image?: string;\n  /**\n   *\n   * @type {boolean}\n   * @memberof UserResponsePrivacyFields\n   */\n  invisible?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  language: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  last_active?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  name?: string;\n  /**\n   *\n   * @type {object}\n   * @memberof UserResponsePrivacyFields\n   */\n  privacy_settings?: object;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  revoke_tokens_issued_before?: string;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  role: string;\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof UserResponsePrivacyFields\n   */\n  teams: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof UserResponsePrivacyFields\n   */\n  updated_at: string;\n}\n/**\n * This event is sent when a user gets updated. The event contains information about the updated user.\n * @export\n * @interface UserUpdatedEvent\n */\nexport interface UserUpdatedEvent {\n  /**\n   * Date/time of creation\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  created_at: string;\n  /**\n   *\n   * @type {{ [key: string]: any; }}\n   * @memberof UserUpdatedEvent\n   */\n  custom: { [key: string]: any };\n  /**\n   *\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  received_at?: string;\n  /**\n   * The type of event: \"user.updated\" in this case\n   * @type {string}\n   * @memberof UserUpdatedEvent\n   */\n  type: string;\n  /**\n   *\n   * @type {UserResponsePrivacyFields}\n   * @memberof UserUpdatedEvent\n   */\n  user: UserResponsePrivacyFields;\n}\n/**\n *\n * @export\n * @interface VideoDimension\n */\nexport interface VideoDimension {\n  /**\n   *\n   * @type {number}\n   * @memberof VideoDimension\n   */\n  height: number;\n  /**\n   *\n   * @type {number}\n   * @memberof VideoDimension\n   */\n  width: number;\n}\n/**\n * @type VideoEvent\n * The discriminator object for all websocket events, it maps events' payload to the final type\n * @export\n */\nexport type VideoEvent =\n  | ({ type: 'call.accepted' } & CallAcceptedEvent)\n  | ({ type: 'call.blocked_user' } & BlockedUserEvent)\n  | ({ type: 'call.closed_caption' } & ClosedCaptionEvent)\n  | ({ type: 'call.closed_captions_failed' } & CallClosedCaptionsFailedEvent)\n  | ({ type: 'call.closed_captions_started' } & CallClosedCaptionsStartedEvent)\n  | ({ type: 'call.closed_captions_stopped' } & CallClosedCaptionsStoppedEvent)\n  | ({ type: 'call.created' } & CallCreatedEvent)\n  | ({ type: 'call.deleted' } & CallDeletedEvent)\n  | ({ type: 'call.ended' } & CallEndedEvent)\n  | ({ type: 'call.frame_recording_failed' } & CallFrameRecordingFailedEvent)\n  | ({ type: 'call.frame_recording_ready' } & CallFrameRecordingFrameReadyEvent)\n  | ({ type: 'call.frame_recording_started' } & CallFrameRecordingStartedEvent)\n  | ({ type: 'call.frame_recording_stopped' } & CallFrameRecordingStoppedEvent)\n  | ({ type: 'call.hls_broadcasting_failed' } & CallHLSBroadcastingFailedEvent)\n  | ({\n      type: 'call.hls_broadcasting_started';\n    } & CallHLSBroadcastingStartedEvent)\n  | ({\n      type: 'call.hls_broadcasting_stopped';\n    } & CallHLSBroadcastingStoppedEvent)\n  | ({ type: 'call.live_started' } & CallLiveStartedEvent)\n  | ({ type: 'call.member_added' } & CallMemberAddedEvent)\n  | ({ type: 'call.member_removed' } & CallMemberRemovedEvent)\n  | ({ type: 'call.member_updated' } & CallMemberUpdatedEvent)\n  | ({\n      type: 'call.member_updated_permission';\n    } & CallMemberUpdatedPermissionEvent)\n  | ({ type: 'call.missed' } & CallMissedEvent)\n  | ({ type: 'call.notification' } & CallNotificationEvent)\n  | ({ type: 'call.permission_request' } & PermissionRequestEvent)\n  | ({ type: 'call.permissions_updated' } & UpdatedCallPermissionsEvent)\n  | ({ type: 'call.reaction_new' } & CallReactionEvent)\n  | ({ type: 'call.recording_failed' } & CallRecordingFailedEvent)\n  | ({ type: 'call.recording_ready' } & CallRecordingReadyEvent)\n  | ({ type: 'call.recording_started' } & CallRecordingStartedEvent)\n  | ({ type: 'call.recording_stopped' } & CallRecordingStoppedEvent)\n  | ({ type: 'call.rejected' } & CallRejectedEvent)\n  | ({ type: 'call.ring' } & CallRingEvent)\n  | ({ type: 'call.rtmp_broadcast_failed' } & CallRtmpBroadcastFailedEvent)\n  | ({ type: 'call.rtmp_broadcast_started' } & CallRtmpBroadcastStartedEvent)\n  | ({ type: 'call.rtmp_broadcast_stopped' } & CallRtmpBroadcastStoppedEvent)\n  | ({ type: 'call.session_ended' } & CallSessionEndedEvent)\n  | ({\n      type: 'call.session_participant_count_updated';\n    } & CallSessionParticipantCountsUpdatedEvent)\n  | ({\n      type: 'call.session_participant_joined';\n    } & CallSessionParticipantJoinedEvent)\n  | ({\n      type: 'call.session_participant_left';\n    } & CallSessionParticipantLeftEvent)\n  | ({ type: 'call.session_started' } & CallSessionStartedEvent)\n  | ({ type: 'call.transcription_failed' } & CallTranscriptionFailedEvent)\n  | ({ type: 'call.transcription_ready' } & CallTranscriptionReadyEvent)\n  | ({ type: 'call.transcription_started' } & CallTranscriptionStartedEvent)\n  | ({ type: 'call.transcription_stopped' } & CallTranscriptionStoppedEvent)\n  | ({ type: 'call.unblocked_user' } & UnblockedUserEvent)\n  | ({ type: 'call.updated' } & CallUpdatedEvent)\n  | ({ type: 'call.user_muted' } & CallUserMutedEvent)\n  | ({ type: 'connection.error' } & ConnectionErrorEvent)\n  | ({ type: 'connection.ok' } & ConnectedEvent)\n  | ({ type: 'custom' } & CustomVideoEvent)\n  | ({ type: 'health.check' } & HealthCheckEvent)\n  | ({ type: 'user.updated' } & UserUpdatedEvent);\n/**\n *\n * @export\n * @interface VideoQuality\n */\nexport interface VideoQuality {\n  /**\n   *\n   * @type {VideoDimension}\n   * @memberof VideoQuality\n   */\n  resolution?: VideoDimension;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoQuality\n   */\n  usage_type?: string;\n}\n/**\n *\n * @export\n * @interface VideoSettingsRequest\n */\nexport interface VideoSettingsRequest {\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  access_request_enabled?: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  camera_default_on?: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoSettingsRequest\n   */\n  camera_facing?: VideoSettingsRequestCameraFacingEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsRequest\n   */\n  enabled?: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof VideoSettingsRequest\n   */\n  target_resolution?: TargetResolution;\n}\n\n/**\n * @export\n */\nexport const VideoSettingsRequestCameraFacingEnum = {\n  FRONT: 'front',\n  BACK: 'back',\n  EXTERNAL: 'external',\n} as const;\nexport type VideoSettingsRequestCameraFacingEnum =\n  (typeof VideoSettingsRequestCameraFacingEnum)[keyof typeof VideoSettingsRequestCameraFacingEnum];\n\n/**\n *\n * @export\n * @interface VideoSettingsResponse\n */\nexport interface VideoSettingsResponse {\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  access_request_enabled: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  camera_default_on: boolean;\n  /**\n   *\n   * @type {string}\n   * @memberof VideoSettingsResponse\n   */\n  camera_facing: VideoSettingsResponseCameraFacingEnum;\n  /**\n   *\n   * @type {boolean}\n   * @memberof VideoSettingsResponse\n   */\n  enabled: boolean;\n  /**\n   *\n   * @type {TargetResolution}\n   * @memberof VideoSettingsResponse\n   */\n  target_resolution: TargetResolution;\n}\n\n/**\n * @export\n */\nexport const VideoSettingsResponseCameraFacingEnum = {\n  FRONT: 'front',\n  BACK: 'back',\n  EXTERNAL: 'external',\n} as const;\nexport type VideoSettingsResponseCameraFacingEnum =\n  (typeof VideoSettingsResponseCameraFacingEnum)[keyof typeof VideoSettingsResponseCameraFacingEnum];\n\n/**\n * Websocket auth message\n * @export\n * @interface WSAuthMessage\n */\nexport interface WSAuthMessage {\n  /**\n   *\n   * @type {Array<string>}\n   * @memberof WSAuthMessage\n   */\n  products?: Array<string>;\n  /**\n   *\n   * @type {string}\n   * @memberof WSAuthMessage\n   */\n  token: string;\n  /**\n   *\n   * @type {ConnectUserDetailsRequest}\n   * @memberof WSAuthMessage\n   */\n  user_details: ConnectUserDetailsRequest;\n}\n","import { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { ConnectedEvent, UserRequest, VideoEvent } from '../../gen/coordinator';\nimport { AllSfuEvents } from '../../rtc';\n\nexport type UR = Record<string, unknown>;\n\nexport type User =\n  | (Omit<UserRequest, 'role'> & { type?: 'authenticated' })\n  | (Omit<UserRequest, 'role'> & { type: 'guest' })\n  | (Omit<UserRequest, 'id' | 'role'> & {\n      id?: '!anon';\n      type: 'anonymous';\n    });\n\nexport type UserWithId =\n  | (UserRequest & { type?: 'authenticated' })\n  | (UserRequest & { type: 'guest' })\n  | (UserRequest & {\n      id: '!anon';\n      type: 'anonymous';\n    });\n\nexport type { OwnUserResponse } from '../../gen/coordinator';\n\nexport type ConnectAPIResponse = Promise<void | ConnectedEvent>;\n\nexport type LogLevel = 'trace' | 'debug' | 'info' | 'warn' | 'error';\n\ntype ErrorResponseDetails = {\n  code: number;\n  messages: string[];\n};\n\nexport type APIErrorResponse = {\n  code: number;\n  duration: string;\n  message: string;\n  more_info: string;\n  StatusCode: number;\n  details?: ErrorResponseDetails;\n  unrecoverable?: boolean;\n};\n\nexport class ErrorFromResponse<T> extends Error {\n  public code: number | null;\n  public status: number;\n  public response: AxiosResponse<T>;\n  public name = 'ErrorFromResponse';\n  public unrecoverable: boolean | null;\n\n  constructor({\n    message,\n    code,\n    status,\n    response,\n    unrecoverable,\n  }: Pick<\n    ErrorFromResponse<T>,\n    'message' | 'code' | 'status' | 'response' | 'unrecoverable'\n  >) {\n    super(message);\n    this.code = code;\n    this.response = response;\n    this.status = status;\n    this.unrecoverable = unrecoverable;\n  }\n\n  // Vitest helper (serialized errors are too large to read)\n  // https://github.com/vitest-dev/vitest/blob/v3.1.3/packages/utils/src/error.ts#L60-L62\n  public toJSON() {\n    const extra = [\n      ['status', this.status],\n      ['code', this.code],\n      ['unrecoverable', this.unrecoverable],\n    ] as const;\n\n    const joinable = [];\n\n    for (const [key, value] of extra) {\n      if (typeof value !== 'undefined' && value !== null) {\n        joinable.push(`${key}: ${value}`);\n      }\n    }\n\n    return {\n      message: `(${joinable.join(', ')}) - ${this.message}`,\n      stack: this.stack,\n      name: this.name,\n    };\n  }\n}\n\nexport type ConnectionChangedEvent = {\n  type: 'connection.changed';\n  online: boolean;\n};\n\nexport type NetworkChangedEvent = {\n  type: 'network.changed';\n  online: boolean;\n};\n\nexport type TransportChangedEvent = {\n  type: 'transport.changed';\n  mode: 'longpoll';\n};\n\nexport type ConnectionRecoveredEvent = {\n  type: 'connection.recovered';\n};\n\nexport type StreamVideoEvent = (\n  | VideoEvent\n  | NetworkChangedEvent\n  | ConnectionChangedEvent\n  | TransportChangedEvent\n  | ConnectionRecoveredEvent\n) & { received_at?: string | Date };\n\n// TODO: we should use WSCallEvent here but that needs fixing\nexport type StreamCallEvent = Extract<StreamVideoEvent, { call_cid: string }>;\nexport type EventTypes = 'all' | VideoEvent['type'];\n\nexport type AllClientEventTypes = 'all' | StreamVideoEvent['type'];\nexport type AllClientEvents = {\n  [K in AllClientEventTypes]: Extract<StreamVideoEvent, { type: K }>;\n};\nexport type ClientEventListener<E extends keyof AllClientEvents> = (\n  event: AllClientEvents[E],\n) => void;\n\nexport type AllClientCallEvents = {\n  [K in EventTypes]: Extract<VideoEvent, { type: K }>;\n};\n\nexport type AllCallEvents = AllClientCallEvents & AllSfuEvents;\nexport type CallEventListener<E extends keyof AllCallEvents> = (\n  event: AllCallEvents[E],\n) => void;\n\nexport type Logger = (\n  logLevel: LogLevel,\n  message: string,\n  ...args: unknown[]\n) => void;\n\nexport type StreamClientOptions = Partial<AxiosRequestConfig> & {\n  /**\n   * Used to disable warnings that are triggered by using connectUser or connectAnonymousUser server-side.\n   */\n  allowServerSideConnect?: boolean;\n  axiosRequestConfig?: AxiosRequestConfig;\n  /**\n   * Base url to use for API\n   * such as https://chat-proxy-dublin.stream-io-api.com\n   */\n  baseURL?: string;\n  browser?: boolean;\n  logger?: Logger;\n  logLevel?: LogLevel;\n  /**\n   * The URL to use for the location hint.\n   */\n  locationHintUrl?: string;\n  /**\n   * The default timeout for requesting a location hint.\n   */\n  locationHintTimeout?: number;\n  /**\n   * The maximum number of attempts to request a location hint.\n   */\n  locationHintMaxAttempts?: number;\n  /**\n   * When true, user will be persisted on client. Otherwise if `connectUser` call fails, then you need to\n   * call `connectUser` again to retry.\n   * This is mainly useful for chat application working in offline mode, where you will need client.user to\n   * persist even if connectUser call fails.\n   */\n  persistUserOnConnectionFailure?: boolean;\n\n  /**\n   * The secret key for the API key. This is only needed for server side authentication.\n   */\n  secret?: string;\n\n  /**\n   * The WebSocket implementation to use. This is mainly useful for testing.\n   * In Node.js environment, you can use the `ws` package.\n   */\n  WebSocketImpl?: typeof WebSocket;\n\n  /**\n   * Create Web Worker to initiate timer events like health checks. Can possibly prevent\n   * timer throttling issues in inactive browser tabs.\n   */\n  enableTimerWorker?: boolean;\n\n  /**\n   * The client app identifier.\n   */\n  clientAppIdentifier?: ClientAppIdentifier;\n\n  /**\n   * The default timeout for WebSocket connections.\n   */\n  defaultWsTimeout?: number;\n\n  /**\n   * The maximum number of retries to connect a user.\n   */\n  maxConnectUserRetries?: number;\n\n  /**\n   * A callback to be called one the maxUserConnectRetries is exhausted.\n   * @param lastError the last error.\n   * @param allErrors all errors.\n   */\n  onConnectUserError?: (lastError: Error, allErrors: Error[]) => void;\n};\n\nexport type ClientAppIdentifier = {\n  sdkName?: 'react' | 'react-native' | 'plain-javascript' | (string & {});\n  sdkVersion?: string;\n  app?: string;\n  app_version?: string;\n  os?: string;\n  device_model?: string;\n};\n\nexport type TokenProvider = () => Promise<string>;\nexport type TokenOrProvider = null | string | TokenProvider | undefined;\n\nexport type BuiltInRejectReason = 'busy' | 'decline' | 'cancel' | 'timeout';\nexport type RejectReason = BuiltInRejectReason | (string & {});\n","/* eslint-disable */\nimport type {\n  JsonObject,\n  JsonReadOptions,\n  JsonValue,\n  JsonWriteOptions,\n} from '@protobuf-ts/runtime';\n// @generated by protobuf-ts 2.9.6 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"google/protobuf/struct.proto\" (package \"google.protobuf\", syntax proto3)\n// tslint:disable\n//\n// Protocol Buffers - Google's data interchange format\n// Copyright 2008 Google Inc.  All rights reserved.\n// https://developers.google.com/protocol-buffers/\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\nimport {\n  isJsonObject,\n  MessageType,\n  typeofJsonValue,\n} from '@protobuf-ts/runtime';\n\n/**\n * `Struct` represents a structured data value, consisting of fields\n * which map to dynamically typed values. In some languages, `Struct`\n * might be supported by a native representation. For example, in\n * scripting languages like JS a struct is represented as an\n * object. The details of that representation are described together\n * with the proto support for the language.\n *\n * The JSON representation for `Struct` is JSON object.\n *\n * @generated from protobuf message google.protobuf.Struct\n */\nexport interface Struct {\n  /**\n   * Unordered map of dynamically typed values.\n   *\n   * @generated from protobuf field: map<string, google.protobuf.Value> fields = 1;\n   */\n  fields: {\n    [key: string]: Value;\n  };\n}\n/**\n * `Value` represents a dynamically typed value which can be either\n * null, a number, a string, a boolean, a recursive struct value, or a\n * list of values. A producer of value is expected to set one of these\n * variants. Absence of any variant indicates an error.\n *\n * The JSON representation for `Value` is JSON value.\n *\n * @generated from protobuf message google.protobuf.Value\n */\nexport interface Value {\n  /**\n   * @generated from protobuf oneof: kind\n   */\n  kind:\n    | {\n        oneofKind: 'nullValue';\n        /**\n         * Represents a null value.\n         *\n         * @generated from protobuf field: google.protobuf.NullValue null_value = 1;\n         */\n        nullValue: NullValue;\n      }\n    | {\n        oneofKind: 'numberValue';\n        /**\n         * Represents a double value.\n         *\n         * @generated from protobuf field: double number_value = 2;\n         */\n        numberValue: number;\n      }\n    | {\n        oneofKind: 'stringValue';\n        /**\n         * Represents a string value.\n         *\n         * @generated from protobuf field: string string_value = 3;\n         */\n        stringValue: string;\n      }\n    | {\n        oneofKind: 'boolValue';\n        /**\n         * Represents a boolean value.\n         *\n         * @generated from protobuf field: bool bool_value = 4;\n         */\n        boolValue: boolean;\n      }\n    | {\n        oneofKind: 'structValue';\n        /**\n         * Represents a structured value.\n         *\n         * @generated from protobuf field: google.protobuf.Struct struct_value = 5;\n         */\n        structValue: Struct;\n      }\n    | {\n        oneofKind: 'listValue';\n        /**\n         * Represents a repeated `Value`.\n         *\n         * @generated from protobuf field: google.protobuf.ListValue list_value = 6;\n         */\n        listValue: ListValue;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * `ListValue` is a wrapper around a repeated field of values.\n *\n * The JSON representation for `ListValue` is JSON array.\n *\n * @generated from protobuf message google.protobuf.ListValue\n */\nexport interface ListValue {\n  /**\n   * Repeated field of dynamically typed values.\n   *\n   * @generated from protobuf field: repeated google.protobuf.Value values = 1;\n   */\n  values: Value[];\n}\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n *  The JSON representation for `NullValue` is JSON `null`.\n *\n * @generated from protobuf enum google.protobuf.NullValue\n */\nexport enum NullValue {\n  /**\n   * Null value.\n   *\n   * @generated from protobuf enum value: NULL_VALUE = 0;\n   */\n  NULL_VALUE = 0,\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass Struct$Type extends MessageType<Struct> {\n  constructor() {\n    super('google.protobuf.Struct', [\n      {\n        no: 1,\n        name: 'fields',\n        kind: 'map',\n        K: 9 /*ScalarType.STRING*/,\n        V: { kind: 'message', T: () => Value },\n      },\n    ]);\n  }\n  /**\n   * Encode `Struct` to JSON object.\n   */\n  internalJsonWrite(message: Struct, options: JsonWriteOptions): JsonValue {\n    let json: JsonObject = {};\n    for (let [k, v] of Object.entries(message.fields)) {\n      json[k] = Value.toJson(v);\n    }\n    return json;\n  }\n  /**\n   * Decode `Struct` from JSON object.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Struct,\n  ): Struct {\n    if (!isJsonObject(json))\n      throw new globalThis.Error(\n        'Unable to parse message ' +\n          this.typeName +\n          ' from JSON ' +\n          typeofJsonValue(json) +\n          '.',\n      );\n    if (!target) target = this.create();\n    for (let [k, v] of globalThis.Object.entries(json)) {\n      target.fields[k] = Value.fromJson(v);\n    }\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Struct\n */\nexport const Struct = new Struct$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Value$Type extends MessageType<Value> {\n  constructor() {\n    super('google.protobuf.Value', [\n      {\n        no: 1,\n        name: 'null_value',\n        kind: 'enum',\n        oneof: 'kind',\n        T: () => ['google.protobuf.NullValue', NullValue],\n      },\n      {\n        no: 2,\n        name: 'number_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 1 /*ScalarType.DOUBLE*/,\n      },\n      {\n        no: 3,\n        name: 'string_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'bool_value',\n        kind: 'scalar',\n        oneof: 'kind',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 5,\n        name: 'struct_value',\n        kind: 'message',\n        oneof: 'kind',\n        T: () => Struct,\n      },\n      {\n        no: 6,\n        name: 'list_value',\n        kind: 'message',\n        oneof: 'kind',\n        T: () => ListValue,\n      },\n    ]);\n  }\n  /**\n   * Encode `Value` to JSON value.\n   */\n  internalJsonWrite(message: Value, options: JsonWriteOptions): JsonValue {\n    if (message.kind.oneofKind === undefined) throw new globalThis.Error();\n    switch (message.kind.oneofKind) {\n      case undefined:\n        throw new globalThis.Error();\n      case 'boolValue':\n        return message.kind.boolValue;\n      case 'nullValue':\n        return null;\n      case 'numberValue':\n        let numberValue = message.kind.numberValue;\n        if (typeof numberValue == 'number' && !Number.isFinite(numberValue))\n          throw new globalThis.Error();\n        return numberValue;\n      case 'stringValue':\n        return message.kind.stringValue;\n      case 'listValue':\n        let listValueField = this.fields.find((f) => f.no === 6);\n        if (listValueField?.kind !== 'message') throw new globalThis.Error();\n        return listValueField.T().toJson(message.kind.listValue);\n      case 'structValue':\n        let structValueField = this.fields.find((f) => f.no === 5);\n        if (structValueField?.kind !== 'message') throw new globalThis.Error();\n        return structValueField.T().toJson(message.kind.structValue);\n    }\n  }\n  /**\n   * Decode `Value` from JSON value.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Value,\n  ): Value {\n    if (!target) target = this.create();\n    switch (typeof json) {\n      case 'number':\n        target.kind = { oneofKind: 'numberValue', numberValue: json };\n        break;\n      case 'string':\n        target.kind = { oneofKind: 'stringValue', stringValue: json };\n        break;\n      case 'boolean':\n        target.kind = { oneofKind: 'boolValue', boolValue: json };\n        break;\n      case 'object':\n        if (json === null) {\n          target.kind = {\n            oneofKind: 'nullValue',\n            nullValue: NullValue.NULL_VALUE,\n          };\n        } else if (globalThis.Array.isArray(json)) {\n          target.kind = {\n            oneofKind: 'listValue',\n            listValue: ListValue.fromJson(json),\n          };\n        } else {\n          target.kind = {\n            oneofKind: 'structValue',\n            structValue: Struct.fromJson(json),\n          };\n        }\n        break;\n      default:\n        throw new globalThis.Error(\n          'Unable to parse ' +\n            this.typeName +\n            ' from JSON ' +\n            typeofJsonValue(json),\n        );\n    }\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Value\n */\nexport const Value = new Value$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ListValue$Type extends MessageType<ListValue> {\n  constructor() {\n    super('google.protobuf.ListValue', [\n      {\n        no: 1,\n        name: 'values',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => Value,\n      },\n    ]);\n  }\n  /**\n   * Encode `ListValue` to JSON array.\n   */\n  internalJsonWrite(message: ListValue, options: JsonWriteOptions): JsonValue {\n    return message.values.map((v) => Value.toJson(v));\n  }\n  /**\n   * Decode `ListValue` from JSON array.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: ListValue,\n  ): ListValue {\n    if (!globalThis.Array.isArray(json))\n      throw new globalThis.Error(\n        'Unable to parse ' +\n          this.typeName +\n          ' from JSON ' +\n          typeofJsonValue(json),\n      );\n    if (!target) target = this.create();\n    let values = json.map((v) => Value.fromJson(v));\n    target.values.push(...values);\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.ListValue\n */\nexport const ListValue = new ListValue$Type();\n","/* eslint-disable */\nimport type {\n  JsonReadOptions,\n  JsonValue,\n  JsonWriteOptions,\n} from '@protobuf-ts/runtime';\n// @generated by protobuf-ts 2.9.6 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"google/protobuf/timestamp.proto\" (package \"google.protobuf\", syntax proto3)\n// tslint:disable\n//\n// Protocol Buffers - Google's data interchange format\n// Copyright 2008 Google Inc.  All rights reserved.\n// https://developers.google.com/protocol-buffers/\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//     * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\nimport { MessageType, PbLong, typeofJsonValue } from '@protobuf-ts/runtime';\n\n/**\n * A Timestamp represents a point in time independent of any time zone or local\n * calendar, encoded as a count of seconds and fractions of seconds at\n * nanosecond resolution. The count is relative to an epoch at UTC midnight on\n * January 1, 1970, in the proleptic Gregorian calendar which extends the\n * Gregorian calendar backwards to year one.\n *\n * All minutes are 60 seconds long. Leap seconds are \"smeared\" so that no leap\n * second table is needed for interpretation, using a [24-hour linear\n * smear](https://developers.google.com/time/smear).\n *\n * The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. By\n * restricting to that range, we ensure that we can convert to and from [RFC\n * 3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.\n *\n * # Examples\n *\n * Example 1: Compute Timestamp from POSIX `time()`.\n *\n *     Timestamp timestamp;\n *     timestamp.set_seconds(time(NULL));\n *     timestamp.set_nanos(0);\n *\n * Example 2: Compute Timestamp from POSIX `gettimeofday()`.\n *\n *     struct timeval tv;\n *     gettimeofday(&tv, NULL);\n *\n *     Timestamp timestamp;\n *     timestamp.set_seconds(tv.tv_sec);\n *     timestamp.set_nanos(tv.tv_usec * 1000);\n *\n * Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.\n *\n *     FILETIME ft;\n *     GetSystemTimeAsFileTime(&ft);\n *     UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;\n *\n *     // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z\n *     // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.\n *     Timestamp timestamp;\n *     timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));\n *     timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));\n *\n * Example 4: Compute Timestamp from Java `System.currentTimeMillis()`.\n *\n *     long millis = System.currentTimeMillis();\n *\n *     Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)\n *         .setNanos((int) ((millis % 1000) * 1000000)).build();\n *\n *\n * Example 5: Compute Timestamp from Java `Instant.now()`.\n *\n *     Instant now = Instant.now();\n *\n *     Timestamp timestamp =\n *         Timestamp.newBuilder().setSeconds(now.getEpochSecond())\n *             .setNanos(now.getNano()).build();\n *\n *\n * Example 6: Compute Timestamp from current time in Python.\n *\n *     timestamp = Timestamp()\n *     timestamp.GetCurrentTime()\n *\n * # JSON Mapping\n *\n * In JSON format, the Timestamp type is encoded as a string in the\n * [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is, the\n * format is \"{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z\"\n * where {year} is always expressed using four digits while {month}, {day},\n * {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional\n * seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),\n * are optional. The \"Z\" suffix indicates the timezone (\"UTC\"); the timezone\n * is required. A proto3 JSON serializer should always use UTC (as indicated by\n * \"Z\") when printing the Timestamp type and a proto3 JSON parser should be\n * able to accept both UTC and other timezones (as indicated by an offset).\n *\n * For example, \"2017-01-15T01:30:15.01Z\" encodes 15.01 seconds past\n * 01:30 UTC on January 15, 2017.\n *\n * In JavaScript, one can convert a Date object to this format using the\n * standard\n * [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)\n * method. In Python, a standard `datetime.datetime` object can be converted\n * to this format using\n * [`strftime`](https://docs.python.org/2/library/time.html#time.strftime) with\n * the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java, one can use\n * the Joda Time's [`ISODateTimeFormat.dateTime()`](\n * http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime%2D%2D\n * ) to obtain a formatter capable of generating timestamps in this format.\n *\n *\n *\n * @generated from protobuf message google.protobuf.Timestamp\n */\nexport interface Timestamp {\n  /**\n   * Represents seconds of UTC time since Unix epoch\n   * 1970-01-01T00:00:00Z. Must be from 0001-01-01T00:00:00Z to\n   * 9999-12-31T23:59:59Z inclusive.\n   *\n   * @generated from protobuf field: int64 seconds = 1;\n   */\n  seconds: string;\n  /**\n   * Non-negative fractions of a second at nanosecond resolution. Negative\n   * second values with fractions must still have non-negative nanos values\n   * that count forward in time. Must be from 0 to 999,999,999\n   * inclusive.\n   *\n   * @generated from protobuf field: int32 nanos = 2;\n   */\n  nanos: number;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass Timestamp$Type extends MessageType<Timestamp> {\n  constructor() {\n    super('google.protobuf.Timestamp', [\n      { no: 1, name: 'seconds', kind: 'scalar', T: 3 /*ScalarType.INT64*/ },\n      { no: 2, name: 'nanos', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n    ]);\n  }\n  /**\n   * Creates a new `Timestamp` for the current time.\n   */\n  now(): Timestamp {\n    const msg = this.create();\n    const ms = Date.now();\n    msg.seconds = PbLong.from(Math.floor(ms / 1000)).toString();\n    msg.nanos = (ms % 1000) * 1000000;\n    return msg;\n  }\n  /**\n   * Converts a `Timestamp` to a JavaScript Date.\n   */\n  toDate(message: Timestamp): Date {\n    return new Date(\n      PbLong.from(message.seconds).toNumber() * 1000 +\n        Math.ceil(message.nanos / 1000000),\n    );\n  }\n  /**\n   * Converts a JavaScript Date to a `Timestamp`.\n   */\n  fromDate(date: Date): Timestamp {\n    const msg = this.create();\n    const ms = date.getTime();\n    msg.seconds = PbLong.from(Math.floor(ms / 1000)).toString();\n    msg.nanos =\n      ((ms % 1000) + (ms < 0 && ms % 1000 !== 0 ? 1000 : 0)) * 1000000;\n    return msg;\n  }\n  /**\n   * In JSON format, the `Timestamp` type is encoded as a string\n   * in the RFC 3339 format.\n   */\n  internalJsonWrite(message: Timestamp, options: JsonWriteOptions): JsonValue {\n    let ms = PbLong.from(message.seconds).toNumber() * 1000;\n    if (\n      ms < Date.parse('0001-01-01T00:00:00Z') ||\n      ms > Date.parse('9999-12-31T23:59:59Z')\n    )\n      throw new Error(\n        'Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.',\n      );\n    if (message.nanos < 0)\n      throw new Error(\n        'Unable to encode invalid Timestamp to JSON. Nanos must not be negative.',\n      );\n    let z = 'Z';\n    if (message.nanos > 0) {\n      let nanosStr = (message.nanos + 1000000000).toString().substring(1);\n      if (nanosStr.substring(3) === '000000')\n        z = '.' + nanosStr.substring(0, 3) + 'Z';\n      else if (nanosStr.substring(6) === '000')\n        z = '.' + nanosStr.substring(0, 6) + 'Z';\n      else z = '.' + nanosStr + 'Z';\n    }\n    return new Date(ms).toISOString().replace('.000Z', z);\n  }\n  /**\n   * In JSON format, the `Timestamp` type is encoded as a string\n   * in the RFC 3339 format.\n   */\n  internalJsonRead(\n    json: JsonValue,\n    options: JsonReadOptions,\n    target?: Timestamp,\n  ): Timestamp {\n    if (typeof json !== 'string')\n      throw new Error(\n        'Unable to parse Timestamp from JSON ' + typeofJsonValue(json) + '.',\n      );\n    let matches = json.match(\n      /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/,\n    );\n    if (!matches)\n      throw new Error('Unable to parse Timestamp from JSON. Invalid format.');\n    let ms = Date.parse(\n      matches[1] +\n        '-' +\n        matches[2] +\n        '-' +\n        matches[3] +\n        'T' +\n        matches[4] +\n        ':' +\n        matches[5] +\n        ':' +\n        matches[6] +\n        (matches[8] ? matches[8] : 'Z'),\n    );\n    if (Number.isNaN(ms))\n      throw new Error('Unable to parse Timestamp from JSON. Invalid value.');\n    if (\n      ms < Date.parse('0001-01-01T00:00:00Z') ||\n      ms > Date.parse('9999-12-31T23:59:59Z')\n    )\n      throw new globalThis.Error(\n        'Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.',\n      );\n    if (!target) target = this.create();\n    target.seconds = PbLong.from(ms / 1000).toString();\n    target.nanos = 0;\n    if (matches[7])\n      target.nanos =\n        parseInt('1' + matches[7] + '0'.repeat(9 - matches[7].length)) -\n        1000000000;\n    return target;\n  }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Timestamp\n */\nexport const Timestamp = new Timestamp$Type();\n","// @generated by protobuf-ts 2.9.6 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/models/models.proto\" (package \"stream.video.sfu.models\", syntax proto3)\n// tslint:disable\nimport { MessageType } from '@protobuf-ts/runtime';\nimport { Struct } from '../../../google/protobuf/struct';\nimport { Timestamp } from '../../../google/protobuf/timestamp';\n\n/**\n * CallState is the current state of the call\n * as seen by an SFU.\n *\n * @generated from protobuf message stream.video.sfu.models.CallState\n */\nexport interface CallState {\n  /**\n   * participants is the list of participants in the call.\n   * In large calls, the list could be truncated in which\n   * case, the list of participants contains fewer participants\n   * than the counts returned in participant_count. Anonymous\n   * participants are **NOT** included in the list.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Participant participants = 1;\n   */\n  participants: Participant[];\n  /**\n   * started_at is the time the call session actually started.\n   *\n   * @generated from protobuf field: google.protobuf.Timestamp started_at = 2;\n   */\n  startedAt?: Timestamp;\n  /**\n   * participant_count contains the summary of the counts.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantCount participant_count = 3;\n   */\n  participantCount?: ParticipantCount;\n  /**\n   * the list of pins in the call.\n   * Pins are ordered in descending order (most important first).\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Pin pins = 4;\n   */\n  pins: Pin[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ParticipantCount\n */\nexport interface ParticipantCount {\n  /**\n   * Total number of participants in the call including\n   * the anonymous participants.\n   *\n   * @generated from protobuf field: uint32 total = 1;\n   */\n  total: number;\n  /**\n   * Total number of anonymous participants in the call.\n   *\n   * @generated from protobuf field: uint32 anonymous = 2;\n   */\n  anonymous: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Pin\n */\nexport interface Pin {\n  /**\n   * the user to pin\n   *\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * the user sesion_id to pin, if not provided, applies to all sessions\n   *\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n}\n/**\n * those who are online in the call\n *\n * @generated from protobuf message stream.video.sfu.models.Participant\n */\nexport interface Participant {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * map of track id to track type\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackType published_tracks = 3;\n   */\n  publishedTracks: TrackType[];\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp joined_at = 4;\n   */\n  joinedAt?: Timestamp;\n  /**\n   * @generated from protobuf field: string track_lookup_prefix = 5;\n   */\n  trackLookupPrefix: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ConnectionQuality connection_quality = 6;\n   */\n  connectionQuality: ConnectionQuality;\n  /**\n   * @generated from protobuf field: bool is_speaking = 7;\n   */\n  isSpeaking: boolean;\n  /**\n   * @generated from protobuf field: bool is_dominant_speaker = 8;\n   */\n  isDominantSpeaker: boolean;\n  /**\n   * @generated from protobuf field: float audio_level = 9;\n   */\n  audioLevel: number;\n  /**\n   * @generated from protobuf field: string name = 10;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string image = 11;\n   */\n  image: string;\n  /**\n   * @generated from protobuf field: google.protobuf.Struct custom = 12;\n   */\n  custom?: Struct;\n  /**\n   * @generated from protobuf field: repeated string roles = 13;\n   */\n  roles: string[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.StreamQuality\n */\nexport interface StreamQuality {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoQuality video_quality = 1;\n   */\n  videoQuality: VideoQuality;\n  /**\n   * @generated from protobuf field: string user_id = 2;\n   */\n  userId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.VideoDimension\n */\nexport interface VideoDimension {\n  /**\n   * @generated from protobuf field: uint32 width = 1;\n   */\n  width: number;\n  /**\n   * @generated from protobuf field: uint32 height = 2;\n   */\n  height: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.VideoLayer\n */\nexport interface VideoLayer {\n  /**\n   * for tracks with a single layer, this should be HIGH\n   *\n   * @generated from protobuf field: string rid = 1;\n   */\n  rid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 2;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * target bitrate, server will measure actual\n   *\n   * @generated from protobuf field: uint32 bitrate = 4;\n   */\n  bitrate: number;\n  /**\n   * @generated from protobuf field: uint32 fps = 5;\n   */\n  fps: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoQuality quality = 6;\n   */\n  quality: VideoQuality;\n}\n/**\n * SubscribeOption represents the configuration options for subscribing to a track.\n *\n * @generated from protobuf message stream.video.sfu.models.SubscribeOption\n */\nexport interface SubscribeOption {\n  /**\n   * The type of the track being subscribed (e.g., video, screenshare).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * The codecs supported by the subscriber for decoding tracks.\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Codec codecs = 2;\n   */\n  codecs: Codec[];\n}\n/**\n * PublishOption represents the configuration options for publishing a track.\n *\n * @generated from protobuf message stream.video.sfu.models.PublishOption\n */\nexport interface PublishOption {\n  /**\n   * The type of the track being published (e.g., video, screenshare).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * The codec to be used for encoding the track (e.g., VP8, VP9, H264).\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * The target bitrate for the published track, in bits per second.\n   *\n   * @generated from protobuf field: int32 bitrate = 3;\n   */\n  bitrate: number;\n  /**\n   * The target frames per second (FPS) for video encoding.\n   *\n   * @generated from protobuf field: int32 fps = 4;\n   */\n  fps: number;\n  /**\n   * The maximum number of spatial layers to send.\n   * - For SVC (e.g., VP9), spatial layers downscale by a factor of 2:\n   *   - 1 layer: full resolution\n   *   - 2 layers: full resolution + half resolution\n   *   - 3 layers: full resolution + half resolution + quarter resolution\n   * - For non-SVC codecs (e.g., VP8/H264), this determines the number of\n   *   encoded resolutions (e.g., quarter, half, full) sent for simulcast.\n   *\n   * @generated from protobuf field: int32 max_spatial_layers = 5;\n   */\n  maxSpatialLayers: number;\n  /**\n   * The maximum number of temporal layers for scalable video coding (SVC).\n   * Temporal layers allow varying frame rates for different bandwidths.\n   *\n   * @generated from protobuf field: int32 max_temporal_layers = 6;\n   */\n  maxTemporalLayers: number;\n  /**\n   * The dimensions of the video (e.g., width and height in pixels).\n   * Spatial layers are based on this base resolution. For example, if the base\n   * resolution is 1280x720:\n   * - Full resolution (1 layer) = 1280x720\n   * - Half resolution (2 layers) = 640x360\n   * - Quarter resolution (3 layers) = 320x180\n   *\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 7;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * The unique identifier for the publish request.\n   * - This `id` is assigned exclusively by the SFU. Any `id` set by the client\n   *   in the `PublishOption` will be ignored and overwritten by the SFU.\n   * - The primary purpose of this `id` is to uniquely identify each publish\n   *   request, even in scenarios where multiple publish requests for the same\n   *   `track_type` and `codec` are active simultaneously.\n   *   For example:\n   *     - A user may publish two tracks of the same type (e.g., video) and codec\n   *       (e.g., VP9) concurrently.\n   * - This uniqueness ensures that individual requests can be managed\n   *   independently. For instance, an `id` is critical when stopping a specific\n   *   publish request without affecting others.\n   *\n   * @generated from protobuf field: int32 id = 8;\n   */\n  id: number;\n  /**\n   * If true, instructs the publisher to send only the highest available simulcast layer,\n   * disabling all lower layers. This applies to simulcast encodings.\n   * For SVC codecs, prefer using the L1T3 (single spatial, 3 temporal layers) mode instead.\n   *\n   * @generated from protobuf field: bool use_single_layer = 9;\n   */\n  useSingleLayer: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Codec\n */\nexport interface Codec {\n  /**\n   * @generated from protobuf field: uint32 payload_type = 16;\n   */\n  payloadType: number;\n  /**\n   * @generated from protobuf field: string name = 10;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: uint32 clock_rate = 14;\n   */\n  clockRate: number;\n  /**\n   * @generated from protobuf field: string encoding_parameters = 15;\n   */\n  encodingParameters: string;\n  /**\n   * @generated from protobuf field: string fmtp = 12;\n   */\n  fmtp: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ICETrickle\n */\nexport interface ICETrickle {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string ice_candidate = 2;\n   */\n  iceCandidate: string;\n  /**\n   * @generated from protobuf field: string session_id = 3;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.TrackInfo\n */\nexport interface TrackInfo {\n  /**\n   * @generated from protobuf field: string track_id = 1;\n   */\n  trackId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 2;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.VideoLayer layers = 5;\n   */\n  layers: VideoLayer[];\n  /**\n   * @generated from protobuf field: string mid = 6;\n   */\n  mid: string;\n  /**\n   * for audio tracks\n   *\n   * @generated from protobuf field: bool dtx = 7;\n   */\n  dtx: boolean;\n  /**\n   * @generated from protobuf field: bool stereo = 8;\n   */\n  stereo: boolean;\n  /**\n   * @generated from protobuf field: bool red = 9;\n   */\n  red: boolean;\n  /**\n   * @generated from protobuf field: bool muted = 10;\n   */\n  muted: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 11;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 12;\n   */\n  publishOptionId: number;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Error\n */\nexport interface Error {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ErrorCode code = 1;\n   */\n  code: ErrorCode;\n  /**\n   * @generated from protobuf field: string message = 2;\n   */\n  message: string;\n  /**\n   * @generated from protobuf field: bool should_retry = 3;\n   */\n  shouldRetry: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.ClientDetails\n */\nexport interface ClientDetails {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Sdk sdk = 1;\n   */\n  sdk?: Sdk;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.OS os = 2;\n   */\n  os?: OS;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Browser browser = 3;\n   */\n  browser?: Browser;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Device device = 4;\n   */\n  device?: Device;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Sdk\n */\nexport interface Sdk {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.SdkType type = 1;\n   */\n  type: SdkType;\n  /**\n   * @generated from protobuf field: string major = 2;\n   */\n  major: string;\n  /**\n   * @generated from protobuf field: string minor = 3;\n   */\n  minor: string;\n  /**\n   * @generated from protobuf field: string patch = 4;\n   */\n  patch: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.OS\n */\nexport interface OS {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n  /**\n   * @generated from protobuf field: string architecture = 3;\n   */\n  architecture: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Browser\n */\nexport interface Browser {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.RTMPIngress\n */\nexport interface RTMPIngress {\n  /**\n   * Video dimensions and frame rate\n   *\n   * @generated from protobuf field: uint32 width = 1;\n   */\n  width: number;\n  /**\n   * @generated from protobuf field: uint32 height = 2;\n   */\n  height: number;\n  /**\n   * @generated from protobuf field: double frame_rate = 3;\n   */\n  frameRate: number;\n  /**\n   * Client info\n   *\n   * @generated from protobuf field: string software = 4;\n   */\n  software: string; // e.g. \"obs-studio\"\n  /**\n   * @generated from protobuf field: string version = 5;\n   */\n  version: string; // e.g. \"29.1.3\"\n  /**\n   * @generated from protobuf field: string encoder = 6;\n   */\n  encoder: string; // e.g. \"x264\" or \"NVIDIA NVENC\"\n  /**\n   * Connection info\n   *\n   * @generated from protobuf field: string remote_addr = 7;\n   */\n  remoteAddr: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Device\n */\nexport interface Device {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: string version = 2;\n   */\n  version: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.Call\n */\nexport interface Call {\n  /**\n   * the call type\n   *\n   * @generated from protobuf field: string type = 1;\n   */\n  type: string;\n  /**\n   * the call id\n   *\n   * @generated from protobuf field: string id = 2;\n   */\n  id: string;\n  /**\n   * the id of the user that created this call\n   *\n   * @generated from protobuf field: string created_by_user_id = 3;\n   */\n  createdByUserId: string;\n  /**\n   * the id of the current host for this call\n   *\n   * @generated from protobuf field: string host_user_id = 4;\n   */\n  hostUserId: string;\n  /**\n   * @generated from protobuf field: google.protobuf.Struct custom = 5;\n   */\n  custom?: Struct;\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp created_at = 6;\n   */\n  createdAt?: Timestamp;\n  /**\n   * @generated from protobuf field: google.protobuf.Timestamp updated_at = 7;\n   */\n  updatedAt?: Timestamp;\n}\n/**\n * CallGrants represents the set of permissions given\n * to the user for the current call.\n *\n * @generated from protobuf message stream.video.sfu.models.CallGrants\n */\nexport interface CallGrants {\n  /**\n   * @generated from protobuf field: bool can_publish_audio = 1;\n   */\n  canPublishAudio: boolean;\n  /**\n   * @generated from protobuf field: bool can_publish_video = 2;\n   */\n  canPublishVideo: boolean;\n  /**\n   * @generated from protobuf field: bool can_screenshare = 3;\n   */\n  canScreenshare: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.InputDevices\n */\nexport interface InputDevices {\n  /**\n   * @generated from protobuf field: repeated string available_devices = 1;\n   */\n  availableDevices: string[];\n  /**\n   * @generated from protobuf field: string current_device = 2;\n   */\n  currentDevice: string;\n  /**\n   * @generated from protobuf field: bool is_permitted = 3;\n   */\n  isPermitted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AndroidState\n */\nexport interface AndroidState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AndroidThermalState thermal_state = 1;\n   */\n  thermalState: AndroidThermalState;\n  /**\n   * @generated from protobuf field: bool is_power_saver_mode = 2;\n   */\n  isPowerSaverMode: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.models.AppleState\n */\nexport interface AppleState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.AppleThermalState thermal_state = 1;\n   */\n  thermalState: AppleThermalState;\n  /**\n   * https://developer.apple.com/documentation/foundation/processinfo/1617047-islowpowermodeenabled\n   *\n   * @generated from protobuf field: bool is_low_power_mode_enabled = 2;\n   */\n  isLowPowerModeEnabled: boolean;\n}\n/**\n * PerformanceStats represents the encoding/decoding statistics for a track.\n *\n * @generated from protobuf message stream.video.sfu.models.PerformanceStats\n */\nexport interface PerformanceStats {\n  /**\n   * the type of the track (e.g., video, audio, screen share)\n   *\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * the codec used for the track\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * the average encode/decode time in ms\n   *\n   * @generated from protobuf field: float avg_frame_time_ms = 3;\n   */\n  avgFrameTimeMs: number;\n  /**\n   * the average fps for the track\n   *\n   * @generated from protobuf field: float avg_fps = 4;\n   */\n  avgFps: number;\n  /**\n   * the track dimensions\n   *\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension video_dimension = 5;\n   */\n  videoDimension?: VideoDimension;\n  /**\n   * the target bitrate for the track, only for published tracks\n   *\n   * @generated from protobuf field: int32 target_bitrate = 6;\n   */\n  targetBitrate: number;\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.PeerType\n */\nexport enum PeerType {\n  /**\n   * todo fix me (marcelo)\n   *\n   * @generated from protobuf enum value: PEER_TYPE_PUBLISHER_UNSPECIFIED = 0;\n   */\n  PUBLISHER_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: PEER_TYPE_SUBSCRIBER = 1;\n   */\n  SUBSCRIBER = 1,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.ConnectionQuality\n */\nexport enum ConnectionQuality {\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_POOR = 1;\n   */\n  POOR = 1,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_GOOD = 2;\n   */\n  GOOD = 2,\n  /**\n   * @generated from protobuf enum value: CONNECTION_QUALITY_EXCELLENT = 3;\n   */\n  EXCELLENT = 3,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.VideoQuality\n */\nexport enum VideoQuality {\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_LOW_UNSPECIFIED = 0;\n   */\n  LOW_UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_MID = 1;\n   */\n  MID = 1,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_HIGH = 2;\n   */\n  HIGH = 2,\n  /**\n   * @generated from protobuf enum value: VIDEO_QUALITY_OFF = 3;\n   */\n  OFF = 3,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackType\n */\nexport enum TrackType {\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_AUDIO = 1;\n   */\n  AUDIO = 1,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_VIDEO = 2;\n   */\n  VIDEO = 2,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE = 3;\n   */\n  SCREEN_SHARE = 3,\n  /**\n   * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE_AUDIO = 4;\n   */\n  SCREEN_SHARE_AUDIO = 4,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.ErrorCode\n */\nexport enum ErrorCode {\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_NOT_FOUND = 100;\n   */\n  PUBLISH_TRACK_NOT_FOUND = 100,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACKS_MISMATCH = 101;\n   */\n  PUBLISH_TRACKS_MISMATCH = 101,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_OUT_OF_ORDER = 102;\n   */\n  PUBLISH_TRACK_OUT_OF_ORDER = 102,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103;\n   */\n  PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_LIVE_ENDED = 104;\n   */\n  LIVE_ENDED = 104,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_NOT_FOUND = 200;\n   */\n  PARTICIPANT_NOT_FOUND = 200,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING_OUT = 201;\n   */\n  PARTICIPANT_MIGRATING_OUT = 201,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATION_FAILED = 202;\n   */\n  PARTICIPANT_MIGRATION_FAILED = 202,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING = 203;\n   */\n  PARTICIPANT_MIGRATING = 203,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_RECONNECT_FAILED = 204;\n   */\n  PARTICIPANT_RECONNECT_FAILED = 204,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205;\n   */\n  PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_CALL_NOT_FOUND = 300;\n   */\n  CALL_NOT_FOUND = 300,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_REQUEST_VALIDATION_FAILED = 400;\n   */\n  REQUEST_VALIDATION_FAILED = 400,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_UNAUTHENTICATED = 401;\n   */\n  UNAUTHENTICATED = 401,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_PERMISSION_DENIED = 403;\n   */\n  PERMISSION_DENIED = 403,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_TOO_MANY_REQUESTS = 429;\n   */\n  TOO_MANY_REQUESTS = 429,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_INTERNAL_SERVER_ERROR = 500;\n   */\n  INTERNAL_SERVER_ERROR = 500,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_SFU_SHUTTING_DOWN = 600;\n   */\n  SFU_SHUTTING_DOWN = 600,\n  /**\n   * @generated from protobuf enum value: ERROR_CODE_SFU_FULL = 700;\n   */\n  SFU_FULL = 700,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.SdkType\n */\nexport enum SdkType {\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_REACT = 1;\n   */\n  REACT = 1,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_ANGULAR = 2;\n   */\n  ANGULAR = 2,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_ANDROID = 3;\n   */\n  ANDROID = 3,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_IOS = 4;\n   */\n  IOS = 4,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_FLUTTER = 5;\n   */\n  FLUTTER = 5,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_REACT_NATIVE = 6;\n   */\n  REACT_NATIVE = 6,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_UNITY = 7;\n   */\n  UNITY = 7,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_GO = 8;\n   */\n  GO = 8,\n  /**\n   * @generated from protobuf enum value: SDK_TYPE_PLAIN_JAVASCRIPT = 9;\n   */\n  PLAIN_JAVASCRIPT = 9,\n}\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackUnpublishReason\n */\nexport enum TrackUnpublishReason {\n  /**\n   * Default value which is used when the specific reason\n   * for muting the track is not known.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Represents user muting their tracks.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_USER_MUTED = 1;\n   */\n  USER_MUTED = 1,\n  /**\n   * Represents muting the track because the permission to\n   * publish the track has been revoked.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_PERMISSION_REVOKED = 2;\n   */\n  PERMISSION_REVOKED = 2,\n  /**\n   * Represents muting the track due to moderation actions.\n   * This is different from permission revoked because the\n   * participant can unmute themselves here whereas in case\n   * of \"permission revoke\" it is not possible until the\n   * call permissions are updated.\n   *\n   * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_MODERATION = 3;\n   */\n  MODERATION = 3,\n}\n/**\n * GoAwayReason represents the reason for the SFU to\n * disconnect the client.\n *\n * @generated from protobuf enum stream.video.sfu.models.GoAwayReason\n */\nexport enum GoAwayReason {\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_SHUTTING_DOWN = 1;\n   */\n  SHUTTING_DOWN = 1,\n  /**\n   * @generated from protobuf enum value: GO_AWAY_REASON_REBALANCE = 2;\n   */\n  REBALANCE = 2,\n}\n/**\n * CallEndedReason represents the reason for the call to end.\n *\n * @generated from protobuf enum stream.video.sfu.models.CallEndedReason\n */\nexport enum CallEndedReason {\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_ENDED = 1;\n   */\n  ENDED = 1,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_LIVE_ENDED = 2;\n   */\n  LIVE_ENDED = 2,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_KICKED = 3;\n   */\n  KICKED = 3,\n  /**\n   * @generated from protobuf enum value: CALL_ENDED_REASON_SESSION_ENDED = 4;\n   */\n  SESSION_ENDED = 4,\n}\n/**\n * WebsocketReconnectStrategy defines the ws strategies available for handling reconnections.\n *\n * @generated from protobuf enum stream.video.sfu.models.WebsocketReconnectStrategy\n */\nexport enum WebsocketReconnectStrategy {\n  /**\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * Sent after reaching the maximum reconnection attempts, or any other unrecoverable error leading to permanent disconnect.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_DISCONNECT = 1;\n   */\n  DISCONNECT = 1,\n  /**\n   * SDK should maintaining existing publisher/subscriber pc instances\n   * and establish a new WebSocket connection.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_FAST = 2;\n   */\n  FAST = 2,\n  /**\n   * SDK should obtain new credentials from the coordinator, drops existing pc instances, set a new session_id and initializes\n   * a completely new WebSocket connection, ensuring a comprehensive reset.\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_REJOIN = 3;\n   */\n  REJOIN = 3,\n  /**\n   * SDK should migrate to a new SFU instance\n   *\n   * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_MIGRATE = 4;\n   */\n  MIGRATE = 4,\n}\n/**\n * AndroidThermalState is reported by the Android API. The full list of values is documented here\n * https://developer.android.com/reference/android/os/PowerManager.html#getCurrentThermalStatus()\n *\n * @generated from protobuf enum stream.video.sfu.models.AndroidThermalState\n */\nexport enum AndroidThermalState {\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_NONE = 1;\n   */\n  NONE = 1,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_LIGHT = 2;\n   */\n  LIGHT = 2,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_MODERATE = 3;\n   */\n  MODERATE = 3,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_SEVERE = 4;\n   */\n  SEVERE = 4,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_CRITICAL = 5;\n   */\n  CRITICAL = 5,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_EMERGENCY = 6;\n   */\n  EMERGENCY = 6,\n  /**\n   * @generated from protobuf enum value: ANDROID_THERMAL_STATE_SHUTDOWN = 7;\n   */\n  SHUTDOWN = 7,\n}\n/**\n * AppleThermalState is the thermal state as reported by Apple devices when available or applicable to the platform.\n * The full list of states (enum) is available here: https://developer.apple.com/documentation/foundation/processinfo/thermalstate\n *\n * @generated from protobuf enum stream.video.sfu.models.AppleThermalState\n */\nexport enum AppleThermalState {\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_UNSPECIFIED = 0;\n   */\n  UNSPECIFIED = 0,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_NOMINAL = 1;\n   */\n  NOMINAL = 1,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_FAIR = 2;\n   */\n  FAIR = 2,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_SERIOUS = 3;\n   */\n  SERIOUS = 3,\n  /**\n   * @generated from protobuf enum value: APPLE_THERMAL_STATE_CRITICAL = 4;\n   */\n  CRITICAL = 4,\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallState$Type extends MessageType<CallState> {\n  constructor() {\n    super('stream.video.sfu.models.CallState', [\n      {\n        no: 1,\n        name: 'participants',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => Participant,\n      },\n      { no: 2, name: 'started_at', kind: 'message', T: () => Timestamp },\n      {\n        no: 3,\n        name: 'participant_count',\n        kind: 'message',\n        T: () => ParticipantCount,\n      },\n      {\n        no: 4,\n        name: 'pins',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => Pin,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallState\n */\nexport const CallState = new CallState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantCount$Type extends MessageType<ParticipantCount> {\n  constructor() {\n    super('stream.video.sfu.models.ParticipantCount', [\n      { no: 1, name: 'total', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'anonymous', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ParticipantCount\n */\nexport const ParticipantCount = new ParticipantCount$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Pin$Type extends MessageType<Pin> {\n  constructor() {\n    super('stream.video.sfu.models.Pin', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Pin\n */\nexport const Pin = new Pin$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Participant$Type extends MessageType<Participant> {\n  constructor() {\n    super('stream.video.sfu.models.Participant', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'published_tracks',\n        kind: 'enum',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'joined_at', kind: 'message', T: () => Timestamp },\n      {\n        no: 5,\n        name: 'track_lookup_prefix',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 6,\n        name: 'connection_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ConnectionQuality',\n          ConnectionQuality,\n          'CONNECTION_QUALITY_',\n        ],\n      },\n      { no: 7, name: 'is_speaking', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      {\n        no: 8,\n        name: 'is_dominant_speaker',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      { no: 9, name: 'audio_level', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      { no: 10, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 11, name: 'image', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 12, name: 'custom', kind: 'message', T: () => Struct },\n      {\n        no: 13,\n        name: 'roles',\n        kind: 'scalar',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Participant\n */\nexport const Participant = new Participant$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StreamQuality$Type extends MessageType<StreamQuality> {\n  constructor() {\n    super('stream.video.sfu.models.StreamQuality', [\n      {\n        no: 1,\n        name: 'video_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.VideoQuality',\n          VideoQuality,\n          'VIDEO_QUALITY_',\n        ],\n      },\n      { no: 2, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.StreamQuality\n */\nexport const StreamQuality = new StreamQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoDimension$Type extends MessageType<VideoDimension> {\n  constructor() {\n    super('stream.video.sfu.models.VideoDimension', [\n      { no: 1, name: 'width', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'height', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoDimension\n */\nexport const VideoDimension = new VideoDimension$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayer$Type extends MessageType<VideoLayer> {\n  constructor() {\n    super('stream.video.sfu.models.VideoLayer', [\n      { no: 1, name: 'rid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      { no: 4, name: 'bitrate', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 5, name: 'fps', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      {\n        no: 6,\n        name: 'quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.VideoQuality',\n          VideoQuality,\n          'VIDEO_QUALITY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoLayer\n */\nexport const VideoLayer = new VideoLayer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscribeOption$Type extends MessageType<SubscribeOption> {\n  constructor() {\n    super('stream.video.sfu.models.SubscribeOption', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'codecs',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => Codec,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.SubscribeOption\n */\nexport const SubscribeOption = new SubscribeOption$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublishOption$Type extends MessageType<PublishOption> {\n  constructor() {\n    super('stream.video.sfu.models.PublishOption', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      { no: 3, name: 'bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      { no: 4, name: 'fps', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 5,\n        name: 'max_spatial_layers',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 6,\n        name: 'max_temporal_layers',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 7,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      { no: 8, name: 'id', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 9,\n        name: 'use_single_layer',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.PublishOption\n */\nexport const PublishOption = new PublishOption$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Codec$Type extends MessageType<Codec> {\n  constructor() {\n    super('stream.video.sfu.models.Codec', [\n      {\n        no: 16,\n        name: 'payload_type',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      { no: 10, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 14,\n        name: 'clock_rate',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 15,\n        name: 'encoding_parameters',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 12, name: 'fmtp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Codec\n */\nexport const Codec = new Codec$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends MessageType<ICETrickle> {\n  constructor() {\n    super('stream.video.sfu.models.ICETrickle', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      {\n        no: 2,\n        name: 'ice_candidate',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 3, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ICETrickle\n */\nexport const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackInfo$Type extends MessageType<TrackInfo> {\n  constructor() {\n    super('stream.video.sfu.models.TrackInfo', [\n      { no: 1, name: 'track_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 5,\n        name: 'layers',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => VideoLayer,\n      },\n      { no: 6, name: 'mid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 7, name: 'dtx', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 8, name: 'stereo', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 9, name: 'red', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 10, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 11, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 12,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.TrackInfo\n */\nexport const TrackInfo = new TrackInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends MessageType<Error> {\n  constructor() {\n    super('stream.video.sfu.models.Error', [\n      {\n        no: 1,\n        name: 'code',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ErrorCode',\n          ErrorCode,\n          'ERROR_CODE_',\n        ],\n      },\n      { no: 2, name: 'message', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'should_retry', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Error\n */\nexport const Error = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ClientDetails$Type extends MessageType<ClientDetails> {\n  constructor() {\n    super('stream.video.sfu.models.ClientDetails', [\n      { no: 1, name: 'sdk', kind: 'message', T: () => Sdk },\n      { no: 2, name: 'os', kind: 'message', T: () => OS },\n      { no: 3, name: 'browser', kind: 'message', T: () => Browser },\n      { no: 4, name: 'device', kind: 'message', T: () => Device },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ClientDetails\n */\nexport const ClientDetails = new ClientDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Sdk$Type extends MessageType<Sdk> {\n  constructor() {\n    super('stream.video.sfu.models.Sdk', [\n      {\n        no: 1,\n        name: 'type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.SdkType', SdkType, 'SDK_TYPE_'],\n      },\n      { no: 2, name: 'major', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'minor', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 4, name: 'patch', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Sdk\n */\nexport const Sdk = new Sdk$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass OS$Type extends MessageType<OS> {\n  constructor() {\n    super('stream.video.sfu.models.OS', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'architecture',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.OS\n */\nexport const OS = new OS$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Browser$Type extends MessageType<Browser> {\n  constructor() {\n    super('stream.video.sfu.models.Browser', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Browser\n */\nexport const Browser = new Browser$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass RTMPIngress$Type extends MessageType<RTMPIngress> {\n  constructor() {\n    super('stream.video.sfu.models.RTMPIngress', [\n      { no: 1, name: 'width', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 2, name: 'height', kind: 'scalar', T: 13 /*ScalarType.UINT32*/ },\n      { no: 3, name: 'frame_rate', kind: 'scalar', T: 1 /*ScalarType.DOUBLE*/ },\n      { no: 4, name: 'software', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 5, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 6, name: 'encoder', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 7,\n        name: 'remote_addr',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.RTMPIngress\n */\nexport const RTMPIngress = new RTMPIngress$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Device$Type extends MessageType<Device> {\n  constructor() {\n    super('stream.video.sfu.models.Device', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'version', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Device\n */\nexport const Device = new Device$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Call$Type extends MessageType<Call> {\n  constructor() {\n    super('stream.video.sfu.models.Call', [\n      { no: 1, name: 'type', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'created_by_user_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'host_user_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 5, name: 'custom', kind: 'message', T: () => Struct },\n      { no: 6, name: 'created_at', kind: 'message', T: () => Timestamp },\n      { no: 7, name: 'updated_at', kind: 'message', T: () => Timestamp },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Call\n */\nexport const Call = new Call$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrants$Type extends MessageType<CallGrants> {\n  constructor() {\n    super('stream.video.sfu.models.CallGrants', [\n      {\n        no: 1,\n        name: 'can_publish_audio',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 2,\n        name: 'can_publish_video',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 3,\n        name: 'can_screenshare',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallGrants\n */\nexport const CallGrants = new CallGrants$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass InputDevices$Type extends MessageType<InputDevices> {\n  constructor() {\n    super('stream.video.sfu.models.InputDevices', [\n      {\n        no: 1,\n        name: 'available_devices',\n        kind: 'scalar',\n        repeat: 2 /*RepeatType.UNPACKED*/,\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 2,\n        name: 'current_device',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 3, name: 'is_permitted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.InputDevices\n */\nexport const InputDevices = new InputDevices$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AndroidState$Type extends MessageType<AndroidState> {\n  constructor() {\n    super('stream.video.sfu.models.AndroidState', [\n      {\n        no: 1,\n        name: 'thermal_state',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AndroidThermalState',\n          AndroidThermalState,\n          'ANDROID_THERMAL_STATE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'is_power_saver_mode',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AndroidState\n */\nexport const AndroidState = new AndroidState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AppleState$Type extends MessageType<AppleState> {\n  constructor() {\n    super('stream.video.sfu.models.AppleState', [\n      {\n        no: 1,\n        name: 'thermal_state',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.AppleThermalState',\n          AppleThermalState,\n          'APPLE_THERMAL_STATE_',\n        ],\n      },\n      {\n        no: 2,\n        name: 'is_low_power_mode_enabled',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.AppleState\n */\nexport const AppleState = new AppleState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PerformanceStats$Type extends MessageType<PerformanceStats> {\n  constructor() {\n    super('stream.video.sfu.models.PerformanceStats', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'avg_frame_time_ms',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      { no: 4, name: 'avg_fps', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      {\n        no: 5,\n        name: 'video_dimension',\n        kind: 'message',\n        T: () => VideoDimension,\n      },\n      {\n        no: 6,\n        name: 'target_bitrate',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.PerformanceStats\n */\nexport const PerformanceStats = new PerformanceStats$Type();\n","// @generated by protobuf-ts 2.9.6 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\nimport {\n  AndroidState,\n  AppleState,\n  Error,\n  ICETrickle,\n  InputDevices,\n  PeerType,\n  PerformanceStats,\n  RTMPIngress,\n  TrackInfo,\n  TrackType,\n  VideoDimension,\n  WebsocketReconnectStrategy,\n} from '../models/models';\nimport { ServiceType } from '@protobuf-ts/runtime-rpc';\nimport { MessageType } from '@protobuf-ts/runtime';\n\n/**\n * @generated from protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */\nexport interface StartNoiseCancellationRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */\nexport interface StartNoiseCancellationResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */\nexport interface StopNoiseCancellationRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */\nexport interface StopNoiseCancellationResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.Reconnection\n */\nexport interface Reconnection {\n  /**\n   * @generated from protobuf field: float time_seconds = 1;\n   */\n  timeSeconds: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy strategy = 2;\n   */\n  strategy: WebsocketReconnectStrategy;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.Telemetry\n */\nexport interface Telemetry {\n  /**\n   * @generated from protobuf oneof: data\n   */\n  data:\n    | {\n        oneofKind: 'connectionTimeSeconds';\n        /**\n         * @generated from protobuf field: float connection_time_seconds = 1;\n         */\n        connectionTimeSeconds: number;\n      }\n    | {\n        oneofKind: 'reconnection';\n        /**\n         * @generated from protobuf field: stream.video.sfu.signal.Reconnection reconnection = 2;\n         */\n        reconnection: Reconnection;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendStatsRequest\n */\nexport interface SendStatsRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: string subscriber_stats = 2;\n   */\n  subscriberStats: string;\n  /**\n   * @generated from protobuf field: string publisher_stats = 3;\n   */\n  publisherStats: string;\n  /**\n   * @generated from protobuf field: string webrtc_version = 4;\n   */\n  webrtcVersion: string;\n  /**\n   * @generated from protobuf field: string sdk = 5;\n   */\n  sdk: string;\n  /**\n   * @generated from protobuf field: string sdk_version = 6;\n   */\n  sdkVersion: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.InputDevices audio_devices = 7;\n   */\n  audioDevices?: InputDevices;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.InputDevices video_devices = 8;\n   */\n  videoDevices?: InputDevices;\n  /**\n   * @generated from protobuf oneof: device_state\n   */\n  deviceState:\n    | {\n        oneofKind: 'android';\n        /**\n         * @generated from protobuf field: stream.video.sfu.models.AndroidState android = 9;\n         */\n        android: AndroidState;\n      }\n    | {\n        oneofKind: 'apple';\n        /**\n         * @generated from protobuf field: stream.video.sfu.models.AppleState apple = 10;\n         */\n        apple: AppleState;\n      }\n    | {\n        oneofKind: undefined;\n      };\n  /**\n   * @generated from protobuf field: stream.video.sfu.signal.Telemetry telemetry = 11;\n   */\n  telemetry?: Telemetry;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.RTMPIngress rtmp = 12;\n   */\n  rtmp?: RTMPIngress;\n  /**\n   * @deprecated\n   * @generated from protobuf field: string subscriber_rtc_stats = 13 [deprecated = true];\n   */\n  subscriberRtcStats: string;\n  /**\n   * @deprecated\n   * @generated from protobuf field: string publisher_rtc_stats = 14 [deprecated = true];\n   */\n  publisherRtcStats: string;\n  /**\n   * @generated from protobuf field: string rtc_stats = 15;\n   */\n  rtcStats: string;\n  /**\n   * Encode stats for the publisher\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.PerformanceStats encode_stats = 16;\n   */\n  encodeStats: PerformanceStats[];\n  /**\n   * Decode stats for the subscriber\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.PerformanceStats decode_stats = 17;\n   */\n  decodeStats: PerformanceStats[];\n  /**\n   * user_session id can change during reconnects, this helps us to\n   * identify the user across reconnects and should remain consistent until the user explicitly\n   * disconnects, is kicked or the call is ended.\n   *\n   * @generated from protobuf field: string unified_session_id = 18;\n   */\n  unifiedSessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendStatsResponse\n */\nexport interface SendStatsResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICERestartRequest\n */\nexport interface ICERestartRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 2;\n   */\n  peerType: PeerType;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICERestartResponse\n */\nexport interface ICERestartResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 1;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */\nexport interface UpdateMuteStatesRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackMuteState mute_states = 3;\n   */\n  muteStates: TrackMuteState[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */\nexport interface UpdateMuteStatesResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.TrackMuteState\n */\nexport interface TrackMuteState {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 1;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: bool muted = 2;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.AudioMuteChanged\n */\nexport interface AudioMuteChanged {\n  /**\n   * @generated from protobuf field: bool muted = 1;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.VideoMuteChanged\n */\nexport interface VideoMuteChanged {\n  /**\n   * @generated from protobuf field: bool muted = 2;\n   */\n  muted: boolean;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */\nexport interface UpdateSubscriptionsRequest {\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails tracks = 3;\n   */\n  tracks: TrackSubscriptionDetails[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */\nexport interface UpdateSubscriptionsResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */\nexport interface TrackSubscriptionDetails {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.VideoDimension dimension = 4;\n   */\n  dimension?: VideoDimension;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendAnswerRequest\n */\nexport interface SendAnswerRequest {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string sdp = 2;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 3;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SendAnswerResponse\n */\nexport interface SendAnswerResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.ICETrickleResponse\n */\nexport interface ICETrickleResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SetPublisherRequest\n */\nexport interface SetPublisherRequest {\n  /**\n   * sdp offer\n   *\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo tracks = 3;\n   */\n  tracks: TrackInfo[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.signal.SetPublisherResponse\n */\nexport interface SetPublisherResponse {\n  /**\n   * sdp answer\n   *\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: bool ice_restart = 3;\n   */\n  iceRestart: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationRequest$Type extends MessageType<StartNoiseCancellationRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.StartNoiseCancellationRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */\nexport const StartNoiseCancellationRequest =\n  new StartNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationResponse$Type extends MessageType<StartNoiseCancellationResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.StartNoiseCancellationResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */\nexport const StartNoiseCancellationResponse =\n  new StartNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationRequest$Type extends MessageType<StopNoiseCancellationRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.StopNoiseCancellationRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */\nexport const StopNoiseCancellationRequest =\n  new StopNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationResponse$Type extends MessageType<StopNoiseCancellationResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.StopNoiseCancellationResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */\nexport const StopNoiseCancellationResponse =\n  new StopNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Reconnection$Type extends MessageType<Reconnection> {\n  constructor() {\n    super('stream.video.sfu.signal.Reconnection', [\n      {\n        no: 1,\n        name: 'time_seconds',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      {\n        no: 2,\n        name: 'strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.Reconnection\n */\nexport const Reconnection = new Reconnection$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Telemetry$Type extends MessageType<Telemetry> {\n  constructor() {\n    super('stream.video.sfu.signal.Telemetry', [\n      {\n        no: 1,\n        name: 'connection_time_seconds',\n        kind: 'scalar',\n        oneof: 'data',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      {\n        no: 2,\n        name: 'reconnection',\n        kind: 'message',\n        oneof: 'data',\n        T: () => Reconnection,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.Telemetry\n */\nexport const Telemetry = new Telemetry$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsRequest$Type extends MessageType<SendStatsRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SendStatsRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'subscriber_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 3,\n        name: 'publisher_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'webrtc_version',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 5, name: 'sdk', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 6,\n        name: 'sdk_version',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 7, name: 'audio_devices', kind: 'message', T: () => InputDevices },\n      { no: 8, name: 'video_devices', kind: 'message', T: () => InputDevices },\n      {\n        no: 9,\n        name: 'android',\n        kind: 'message',\n        oneof: 'deviceState',\n        T: () => AndroidState,\n      },\n      {\n        no: 10,\n        name: 'apple',\n        kind: 'message',\n        oneof: 'deviceState',\n        T: () => AppleState,\n      },\n      { no: 11, name: 'telemetry', kind: 'message', T: () => Telemetry },\n      { no: 12, name: 'rtmp', kind: 'message', T: () => RTMPIngress },\n      {\n        no: 13,\n        name: 'subscriber_rtc_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 14,\n        name: 'publisher_rtc_stats',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 15, name: 'rtc_stats', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 16,\n        name: 'encode_stats',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => PerformanceStats,\n      },\n      {\n        no: 17,\n        name: 'decode_stats',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => PerformanceStats,\n      },\n      {\n        no: 18,\n        name: 'unified_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsRequest\n */\nexport const SendStatsRequest = new SendStatsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsResponse$Type extends MessageType<SendStatsResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SendStatsResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsResponse\n */\nexport const SendStatsResponse = new SendStatsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartRequest$Type extends MessageType<ICERestartRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.ICERestartRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 2,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartRequest\n */\nexport const ICERestartRequest = new ICERestartRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartResponse$Type extends MessageType<ICERestartResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.ICERestartResponse', [\n      { no: 1, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartResponse\n */\nexport const ICERestartResponse = new ICERestartResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesRequest$Type extends MessageType<UpdateMuteStatesRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateMuteStatesRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'mute_states',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackMuteState,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */\nexport const UpdateMuteStatesRequest = new UpdateMuteStatesRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesResponse$Type extends MessageType<UpdateMuteStatesResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateMuteStatesResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */\nexport const UpdateMuteStatesResponse = new UpdateMuteStatesResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackMuteState$Type extends MessageType<TrackMuteState> {\n  constructor() {\n    super('stream.video.sfu.signal.TrackMuteState', [\n      {\n        no: 1,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 2, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackMuteState\n */\nexport const TrackMuteState = new TrackMuteState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMuteChanged$Type extends MessageType<AudioMuteChanged> {\n  constructor() {\n    super('stream.video.sfu.signal.AudioMuteChanged', [\n      { no: 1, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.AudioMuteChanged\n */\nexport const AudioMuteChanged = new AudioMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMuteChanged$Type extends MessageType<VideoMuteChanged> {\n  constructor() {\n    super('stream.video.sfu.signal.VideoMuteChanged', [\n      { no: 2, name: 'muted', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.VideoMuteChanged\n */\nexport const VideoMuteChanged = new VideoMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsRequest$Type extends MessageType<UpdateSubscriptionsRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateSubscriptionsRequest', [\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'tracks',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */\nexport const UpdateSubscriptionsRequest = new UpdateSubscriptionsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsResponse$Type extends MessageType<UpdateSubscriptionsResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.UpdateSubscriptionsResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */\nexport const UpdateSubscriptionsResponse =\n  new UpdateSubscriptionsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackSubscriptionDetails$Type extends MessageType<TrackSubscriptionDetails> {\n  constructor() {\n    super('stream.video.sfu.signal.TrackSubscriptionDetails', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'dimension', kind: 'message', T: () => VideoDimension },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */\nexport const TrackSubscriptionDetails = new TrackSubscriptionDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerRequest$Type extends MessageType<SendAnswerRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SendAnswerRequest', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      { no: 2, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerRequest\n */\nexport const SendAnswerRequest = new SendAnswerRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerResponse$Type extends MessageType<SendAnswerResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SendAnswerResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerResponse\n */\nexport const SendAnswerResponse = new SendAnswerResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickleResponse$Type extends MessageType<ICETrickleResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.ICETrickleResponse', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICETrickleResponse\n */\nexport const ICETrickleResponse = new ICETrickleResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherRequest$Type extends MessageType<SetPublisherRequest> {\n  constructor() {\n    super('stream.video.sfu.signal.SetPublisherRequest', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'tracks',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackInfo,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherRequest\n */\nexport const SetPublisherRequest = new SetPublisherRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherResponse$Type extends MessageType<SetPublisherResponse> {\n  constructor() {\n    super('stream.video.sfu.signal.SetPublisherResponse', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'ice_restart', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 4, name: 'error', kind: 'message', T: () => Error },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherResponse\n */\nexport const SetPublisherResponse = new SetPublisherResponse$Type();\n/**\n * @generated ServiceType for protobuf service stream.video.sfu.signal.SignalServer\n */\nexport const SignalServer = new ServiceType(\n  'stream.video.sfu.signal.SignalServer',\n  [\n    {\n      name: 'SetPublisher',\n      options: {},\n      I: SetPublisherRequest,\n      O: SetPublisherResponse,\n    },\n    {\n      name: 'SendAnswer',\n      options: {},\n      I: SendAnswerRequest,\n      O: SendAnswerResponse,\n    },\n    { name: 'IceTrickle', options: {}, I: ICETrickle, O: ICETrickleResponse },\n    {\n      name: 'UpdateSubscriptions',\n      options: {},\n      I: UpdateSubscriptionsRequest,\n      O: UpdateSubscriptionsResponse,\n    },\n    {\n      name: 'UpdateMuteStates',\n      options: {},\n      I: UpdateMuteStatesRequest,\n      O: UpdateMuteStatesResponse,\n    },\n    {\n      name: 'IceRestart',\n      options: {},\n      I: ICERestartRequest,\n      O: ICERestartResponse,\n    },\n    {\n      name: 'SendStats',\n      options: {},\n      I: SendStatsRequest,\n      O: SendStatsResponse,\n    },\n    {\n      name: 'StartNoiseCancellation',\n      options: {},\n      I: StartNoiseCancellationRequest,\n      O: StartNoiseCancellationResponse,\n    },\n    {\n      name: 'StopNoiseCancellation',\n      options: {},\n      I: StopNoiseCancellationRequest,\n      O: StopNoiseCancellationResponse,\n    },\n  ],\n);\n","import { normalizeMethodInfo } from \"./reflection-info\";\nexport class ServiceType {\n    constructor(typeName, methods, options) {\n        this.typeName = typeName;\n        this.methods = methods.map(i => normalizeMethodInfo(i, this));\n        this.options = options !== null && options !== void 0 ? options : {};\n    }\n}\n","import { lowerCamelCase } from \"@protobuf-ts/runtime\";\n/**\n * Turns PartialMethodInfo into MethodInfo.\n */\nexport function normalizeMethodInfo(method, service) {\n    var _a, _b, _c;\n    let m = method;\n    m.service = service;\n    m.localName = (_a = m.localName) !== null && _a !== void 0 ? _a : lowerCamelCase(m.name);\n    // noinspection PointlessBooleanExpressionJS\n    m.serverStreaming = !!m.serverStreaming;\n    // noinspection PointlessBooleanExpressionJS\n    m.clientStreaming = !!m.clientStreaming;\n    m.options = (_b = m.options) !== null && _b !== void 0 ? _b : {};\n    m.idempotency = (_c = m.idempotency) !== null && _c !== void 0 ? _c : undefined;\n    return m;\n}\n/**\n * Read custom method options from a generated service client.\n *\n * @deprecated use readMethodOption()\n */\nexport function readMethodOptions(service, methodName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = service.methods.find((m, i) => m.localName === methodName || i === methodName)) === null || _a === void 0 ? void 0 : _a.options;\n    return options && options[extensionName] ? extensionType.fromJson(options[extensionName]) : undefined;\n}\nexport function readMethodOption(service, methodName, extensionName, extensionType) {\n    var _a;\n    const options = (_a = service.methods.find((m, i) => m.localName === methodName || i === methodName)) === null || _a === void 0 ? void 0 : _a.options;\n    if (!options) {\n        return undefined;\n    }\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\nexport function readServiceOption(service, extensionName, extensionType) {\n    const options = service.options;\n    if (!options) {\n        return undefined;\n    }\n    const optionVal = options[extensionName];\n    if (optionVal === undefined) {\n        return optionVal;\n    }\n    return extensionType ? extensionType.fromJson(optionVal) : optionVal;\n}\n","// @generated by protobuf-ts 2.9.6 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/event/events.proto\" (package \"stream.video.sfu.event\", syntax proto3)\n// tslint:disable\nimport { MessageType } from '@protobuf-ts/runtime';\nimport {\n  CallEndedReason,\n  CallGrants,\n  CallState,\n  ClientDetails,\n  Codec,\n  ConnectionQuality,\n  Error as Error$,\n  GoAwayReason,\n  ICETrickle as ICETrickle$,\n  Participant,\n  ParticipantCount,\n  PeerType,\n  Pin,\n  PublishOption,\n  SubscribeOption,\n  TrackInfo,\n  TrackType,\n  TrackUnpublishReason,\n  WebsocketReconnectStrategy,\n} from '../models/models';\nimport { TrackSubscriptionDetails } from '../signal_rpc/signal';\n\n/**\n * SFUEvent is a message that is sent from the SFU to the client.\n *\n * @generated from protobuf message stream.video.sfu.event.SfuEvent\n */\nexport interface SfuEvent {\n  /**\n   * @generated from protobuf oneof: event_payload\n   */\n  eventPayload:\n    | {\n        oneofKind: 'subscriberOffer';\n        /**\n         * SubscriberOffer sends the SDP offer for establishing the\n         * subscriber PeerConnection.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.SubscriberOffer subscriber_offer = 1;\n         */\n        subscriberOffer: SubscriberOffer;\n      }\n    | {\n        oneofKind: 'publisherAnswer';\n        /**\n         * PublisherAnswer sends the SDP answer to the offer sent by\n         * the client for establishing the Publisher PeerConnection.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.PublisherAnswer publisher_answer = 2;\n         */\n        publisherAnswer: PublisherAnswer;\n      }\n    | {\n        oneofKind: 'connectionQualityChanged';\n        /**\n         * ConnectionQualityChanged is sent to inform the connection\n         * quality of the participants in the call. It does not have\n         * to contain the full list of call participants in it.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ConnectionQualityChanged connection_quality_changed = 3;\n         */\n        connectionQualityChanged: ConnectionQualityChanged;\n      }\n    | {\n        oneofKind: 'audioLevelChanged';\n        /**\n         * AudioLevelChanged is sent for change in audio levels of\n         * the participants.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.AudioLevelChanged audio_level_changed = 4;\n         */\n        audioLevelChanged: AudioLevelChanged;\n      }\n    | {\n        oneofKind: 'iceTrickle';\n        /**\n         * ICETrickle contains the ICE candidate required to establish\n         * the ICE transport: part of establishing the PeerConnection\n         * and also for ICE restarts.\n         *\n         * @generated from protobuf field: stream.video.sfu.models.ICETrickle ice_trickle = 5;\n         */\n        iceTrickle: ICETrickle$;\n      }\n    | {\n        oneofKind: 'changePublishQuality';\n        /**\n         * ChangePublishQuality advises the publisher to switch on/off\n         * various qualities of their video stream based on the subscription.\n         * This is done to save the bandwidth and the CPU of the publisher.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ChangePublishQuality change_publish_quality = 6;\n         */\n        changePublishQuality: ChangePublishQuality;\n      }\n    | {\n        oneofKind: 'participantJoined';\n        /**\n         * ParticipantJoined notifies the client that a new participant\n         * has joined the call. This is not sent for anonymous users.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantJoined participant_joined = 10;\n         */\n        participantJoined: ParticipantJoined;\n      }\n    | {\n        oneofKind: 'participantLeft';\n        /**\n         * ParticipantLeft notifies the client that a call participant\n         * has left the call. This is not sent for anonymous users.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantLeft participant_left = 11;\n         */\n        participantLeft: ParticipantLeft;\n      }\n    | {\n        oneofKind: 'dominantSpeakerChanged';\n        /**\n         * DominantSpeakerChanged notifies the client about the current\n         * dominant speaker. This is required for certain use cases like\n         * the spotlight view.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.DominantSpeakerChanged dominant_speaker_changed = 12;\n         */\n        dominantSpeakerChanged: DominantSpeakerChanged;\n      }\n    | {\n        oneofKind: 'joinResponse';\n        /**\n         * JoinResponse acknowledges a participant successfully joining\n         * the call. This is sent in response to the JoinRequest.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.JoinResponse join_response = 13;\n         */\n        joinResponse: JoinResponse;\n      }\n    | {\n        oneofKind: 'healthCheckResponse';\n        /**\n         * HealthCheckResponse is sent in response to the HealthCheckRequest.\n         * It contains the participant count in the call.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.HealthCheckResponse health_check_response = 14;\n         */\n        healthCheckResponse: HealthCheckResponse;\n      }\n    | {\n        oneofKind: 'trackPublished';\n        /**\n         * TrackPublished is sent when a new track (like audio, video, screenshare)\n         * is published by a participant in the call. It is also sent on mute/unmute.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.TrackPublished track_published = 16;\n         */\n        trackPublished: TrackPublished;\n      }\n    | {\n        oneofKind: 'trackUnpublished';\n        /**\n         * TrackUnpublished is sent when a track (like audio, video, screenshare)\n         * is no longer published. It is sent on muting a track or when the participant\n         * is leaving the call.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.TrackUnpublished track_unpublished = 17;\n         */\n        trackUnpublished: TrackUnpublished;\n      }\n    | {\n        oneofKind: 'error';\n        /**\n         * Error is used to communicate any error related to the participant. The\n         * error code and the message explain what went wrong. Whether the participant\n         * can retry is also indicated.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.Error error = 18;\n         */\n        error: Error;\n      }\n    | {\n        oneofKind: 'callGrantsUpdated';\n        /**\n         * CallGrantsUpdated tells what tracks a participant is allowed to publish.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.CallGrantsUpdated call_grants_updated = 19;\n         */\n        callGrantsUpdated: CallGrantsUpdated;\n      }\n    | {\n        oneofKind: 'goAway';\n        /**\n         * GoAway tells the client to migrate away from the SFU it is connected to.\n         * The reason field indicates why this message was sent.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.GoAway go_away = 20;\n         */\n        goAway: GoAway;\n      }\n    | {\n        oneofKind: 'iceRestart';\n        /**\n         * ICERestart tells the client to perform ICE restart.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ICERestart ice_restart = 21;\n         */\n        iceRestart: ICERestart;\n      }\n    | {\n        oneofKind: 'pinsUpdated';\n        /**\n         * PinsChanged is sent the list of pins in the call changes. This event contains the entire list of pins.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.PinsChanged pins_updated = 22;\n         */\n        pinsUpdated: PinsChanged;\n      }\n    | {\n        oneofKind: 'callEnded';\n        /**\n         * CallEnded is sent by the SFU to the client to signal that the call has ended.\n         * The reason may specify why the call has ended.\n         *\n         * @generated from protobuf field: stream.video.sfu.event.CallEnded call_ended = 23;\n         */\n        callEnded: CallEnded;\n      }\n    | {\n        oneofKind: 'participantUpdated';\n        /**\n         * ParticipantUpdated is sent when user data is updated\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantUpdated participant_updated = 24;\n         */\n        participantUpdated: ParticipantUpdated;\n      }\n    | {\n        oneofKind: 'participantMigrationComplete';\n        /**\n         * ParticipantMigrationComplete is sent when the participant migration is complete\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ParticipantMigrationComplete participant_migration_complete = 25;\n         */\n        participantMigrationComplete: ParticipantMigrationComplete;\n      }\n    | {\n        oneofKind: 'changePublishOptions';\n        /**\n         * ChangePublishOptions is sent to signal the change in publish options such as a new codec or simulcast layers\n         *\n         * @generated from protobuf field: stream.video.sfu.event.ChangePublishOptions change_publish_options = 27;\n         */\n        changePublishOptions: ChangePublishOptions;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ChangePublishOptions\n */\nexport interface ChangePublishOptions {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption publish_options = 1;\n   */\n  publishOptions: PublishOption[];\n  /**\n   * @generated from protobuf field: string reason = 2;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ChangePublishOptionsComplete\n */\nexport interface ChangePublishOptionsComplete {}\n/**\n * @generated from protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */\nexport interface ParticipantMigrationComplete {}\n/**\n * @generated from protobuf message stream.video.sfu.event.PinsChanged\n */\nexport interface PinsChanged {\n  /**\n   * the list of pins in the call.\n   * Pins are ordered in descending order (most important first).\n   *\n   * @generated from protobuf field: repeated stream.video.sfu.models.Pin pins = 1;\n   */\n  pins: Pin[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.Error\n */\nexport interface Error {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Error error = 4;\n   */\n  error?: Error$;\n  /**\n   * returns the reconnect strategy to be used by the client\n   *\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy reconnect_strategy = 5;\n   */\n  reconnectStrategy: WebsocketReconnectStrategy;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ICETrickle\n */\nexport interface ICETrickle {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n  /**\n   * @generated from protobuf field: string ice_candidate = 2;\n   */\n  iceCandidate: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ICERestart\n */\nexport interface ICERestart {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.PeerType peer_type = 1;\n   */\n  peerType: PeerType;\n}\n/**\n * SfuRequest is a message that is sent from the client to the SFU.\n *\n * @generated from protobuf message stream.video.sfu.event.SfuRequest\n */\nexport interface SfuRequest {\n  /**\n   * @generated from protobuf oneof: request_payload\n   */\n  requestPayload:\n    | {\n        oneofKind: 'joinRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.JoinRequest join_request = 1;\n         */\n        joinRequest: JoinRequest;\n      }\n    | {\n        oneofKind: 'healthCheckRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.HealthCheckRequest health_check_request = 2;\n         */\n        healthCheckRequest: HealthCheckRequest;\n      }\n    | {\n        oneofKind: 'leaveCallRequest';\n        /**\n         * @generated from protobuf field: stream.video.sfu.event.LeaveCallRequest leave_call_request = 3;\n         */\n        leaveCallRequest: LeaveCallRequest;\n      }\n    | {\n        oneofKind: undefined;\n      };\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.LeaveCallRequest\n */\nexport interface LeaveCallRequest {\n  /**\n   * @generated from protobuf field: string session_id = 1;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: string reason = 2;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.HealthCheckRequest\n */\nexport interface HealthCheckRequest {}\n/**\n * @generated from protobuf message stream.video.sfu.event.HealthCheckResponse\n */\nexport interface HealthCheckResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ParticipantCount participant_count = 1;\n   */\n  participantCount?: ParticipantCount;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.TrackPublished\n */\nexport interface TrackPublished {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType type = 3;\n   */\n  type: TrackType;\n  /**\n   * Participant information here is included as an optimisation\n   * for large calls where broadcasting on every participant join\n   * is expensive. You should **NOT** assume that this will always\n   * be available though you can use it to update the participant\n   * list when it is there.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 4;\n   */\n  participant?: Participant;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.TrackUnpublished\n */\nexport interface TrackUnpublished {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType type = 3;\n   */\n  type: TrackType;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackUnpublishReason cause = 4;\n   */\n  cause: TrackUnpublishReason;\n  /**\n   * Participant information here is included as an optimisation\n   * for large calls where broadcasting on every participant join\n   * is expensive. You should **NOT** assume that this will always\n   * be available though you can use it to update the participant\n   * list when it is there.\n   *\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 5;\n   */\n  participant?: Participant;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.JoinRequest\n */\nexport interface JoinRequest {\n  /**\n   * @generated from protobuf field: string token = 1;\n   */\n  token: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * dumb SDP that allow us to extract subscriber's decode codecs\n   *\n   * @generated from protobuf field: string subscriber_sdp = 3;\n   */\n  subscriberSdp: string;\n  /**\n   * @generated from protobuf field: string publisher_sdp = 8;\n   */\n  publisherSdp: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ClientDetails client_details = 4;\n   */\n  clientDetails?: ClientDetails;\n  /**\n   * Deprecated: use ReconnectDetails instead\n   *\n   * @deprecated\n   * @generated from protobuf field: stream.video.sfu.event.Migration migration = 5 [deprecated = true];\n   */\n  migration?: Migration;\n  /**\n   * Fast reconnect flag explicitly indicates that if the participant session\n   * and the associated state is still present in the SFU, the client is ready\n   * to restore the PeerConnection with an ICE restart. If the SFU replies with\n   * \"reconnected: true\" in its JoinResponse, then it is safe to perform an ICE\n   * restart or else the existing PeerConnections must be cleaned up.\n   *\n   * For the SFU, fast_reconnect:false indicates that even if it has the state\n   * cached, the client state is not in sync and hence it must be cleaned up before\n   * proceeding further.\n   *\n   * @deprecated\n   * @generated from protobuf field: bool fast_reconnect = 6 [deprecated = true];\n   */\n  fastReconnect: boolean;\n  /**\n   * @generated from protobuf field: stream.video.sfu.event.ReconnectDetails reconnect_details = 7;\n   */\n  reconnectDetails?: ReconnectDetails;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption preferred_publish_options = 9;\n   */\n  preferredPublishOptions: PublishOption[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.SubscribeOption preferred_subscribe_options = 10;\n   */\n  preferredSubscribeOptions: SubscribeOption[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ReconnectDetails\n */\nexport interface ReconnectDetails {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.WebsocketReconnectStrategy strategy = 1;\n   */\n  strategy: WebsocketReconnectStrategy;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo announced_tracks = 3;\n   */\n  announcedTracks: TrackInfo[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 4;\n   */\n  subscriptions: TrackSubscriptionDetails[];\n  /**\n   * @generated from protobuf field: uint32 reconnect_attempt = 5;\n   */\n  reconnectAttempt: number;\n  /**\n   * @generated from protobuf field: string from_sfu_id = 6;\n   */\n  fromSfuId: string;\n  /**\n   * only set in case of rejoin\n   *\n   * @generated from protobuf field: string previous_session_id = 7;\n   */\n  previousSessionId: string;\n  /**\n   * the reconnect reason\n   *\n   * @generated from protobuf field: string reason = 8;\n   */\n  reason: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.Migration\n */\nexport interface Migration {\n  /**\n   * @generated from protobuf field: string from_sfu_id = 1;\n   */\n  fromSfuId: string;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.TrackInfo announced_tracks = 2;\n   */\n  announcedTracks: TrackInfo[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 3;\n   */\n  subscriptions: TrackSubscriptionDetails[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.JoinResponse\n */\nexport interface JoinResponse {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallState call_state = 1;\n   */\n  callState?: CallState;\n  /**\n   * @generated from protobuf field: bool reconnected = 2;\n   */\n  reconnected: boolean;\n  /**\n   * @generated from protobuf field: int32 fast_reconnect_deadline_seconds = 3;\n   */\n  fastReconnectDeadlineSeconds: number;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.models.PublishOption publish_options = 4;\n   */\n  publishOptions: PublishOption[];\n}\n/**\n * ParticipantJoined is fired when a user joins a call\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantJoined\n */\nexport interface ParticipantJoined {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * ParticipantJoined is fired when a user leaves a call\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantLeft\n */\nexport interface ParticipantLeft {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * ParticipantUpdated is fired when user data is updated\n *\n * @generated from protobuf message stream.video.sfu.event.ParticipantUpdated\n */\nexport interface ParticipantUpdated {\n  /**\n   * @generated from protobuf field: string call_cid = 1;\n   */\n  callCid: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Participant participant = 2;\n   */\n  participant?: Participant;\n}\n/**\n * SubscriberOffer is sent when the SFU adds tracks to a subscription\n *\n * @generated from protobuf message stream.video.sfu.event.SubscriberOffer\n */\nexport interface SubscriberOffer {\n  /**\n   * @generated from protobuf field: bool ice_restart = 1;\n   */\n  iceRestart: boolean;\n  /**\n   * @generated from protobuf field: string sdp = 2;\n   */\n  sdp: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.PublisherAnswer\n */\nexport interface PublisherAnswer {\n  /**\n   * @generated from protobuf field: string sdp = 1;\n   */\n  sdp: string;\n}\n/**\n * ConnectionQuality is sent to inform about connection quality changes\n * eg. thierry's connection is not good -> render a red icon Zoom style\n *\n * @generated from protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */\nexport interface ConnectionQualityChanged {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.ConnectionQualityInfo connection_quality_updates = 1;\n   */\n  connectionQualityUpdates: ConnectionQualityInfo[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */\nexport interface ConnectionQualityInfo {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.ConnectionQuality connection_quality = 3;\n   */\n  connectionQuality: ConnectionQuality;\n}\n/**\n * DominantSpeakerChanged is sent by the SFU to notify when there is a new dominant speaker in the call\n *\n * @generated from protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */\nexport interface DominantSpeakerChanged {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.AudioLevel\n */\nexport interface AudioLevel {\n  /**\n   * @generated from protobuf field: string user_id = 1;\n   */\n  userId: string;\n  /**\n   * @generated from protobuf field: string session_id = 2;\n   */\n  sessionId: string;\n  /**\n   * 0.0 means complete silence, 1.0 loudest\n   *\n   * @generated from protobuf field: float level = 3;\n   */\n  level: number;\n  /**\n   * @generated from protobuf field: bool is_speaking = 4;\n   */\n  isSpeaking: boolean;\n}\n/**\n * AudioLevelChanged is sent by the SFU to notify about audio levels by user\n *\n * @generated from protobuf message stream.video.sfu.event.AudioLevelChanged\n */\nexport interface AudioLevelChanged {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.AudioLevel audio_levels = 1;\n   */\n  audioLevels: AudioLevel[];\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.AudioSender\n */\nexport interface AudioSender {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 3;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 4;\n   */\n  publishOptionId: number;\n}\n/**\n * VideoLayerSetting is used to specify various parameters of a particular encoding in simulcast.\n * The parameters are specified here - https://developer.mozilla.org/en-US/docs/Web/API/RTCRtpEncodingParameters\n * SDKs use these parameters sent from the server to dynamically adjust these parameters to save CPU, bandwidth\n *\n * @generated from protobuf message stream.video.sfu.event.VideoLayerSetting\n */\nexport interface VideoLayerSetting {\n  /**\n   * @generated from protobuf field: string name = 1;\n   */\n  name: string;\n  /**\n   * @generated from protobuf field: bool active = 2;\n   */\n  active: boolean;\n  /**\n   * @generated from protobuf field: int32 max_bitrate = 3;\n   */\n  maxBitrate: number;\n  /**\n   * @generated from protobuf field: float scale_resolution_down_by = 4;\n   */\n  scaleResolutionDownBy: number;\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 6;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: uint32 max_framerate = 7;\n   */\n  maxFramerate: number;\n  /**\n   * @generated from protobuf field: string scalability_mode = 8;\n   */\n  scalabilityMode: string;\n}\n/**\n * @generated from protobuf message stream.video.sfu.event.VideoSender\n */\nexport interface VideoSender {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.Codec codec = 2;\n   */\n  codec?: Codec;\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.VideoLayerSetting layers = 3;\n   */\n  layers: VideoLayerSetting[];\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.TrackType track_type = 4;\n   */\n  trackType: TrackType;\n  /**\n   * @generated from protobuf field: int32 publish_option_id = 5;\n   */\n  publishOptionId: number;\n}\n/**\n * sent to users when they need to change the quality of their video\n *\n * @generated from protobuf message stream.video.sfu.event.ChangePublishQuality\n */\nexport interface ChangePublishQuality {\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.AudioSender audio_senders = 1;\n   */\n  audioSenders: AudioSender[];\n  /**\n   * @generated from protobuf field: repeated stream.video.sfu.event.VideoSender video_senders = 2;\n   */\n  videoSenders: VideoSender[];\n}\n/**\n * CallGrants is sent to users when there is a change in the call permissions\n * to publish audio, video or share the screen for a user or a role. This is\n * idempotent and can be sent at any time. Only the current_grants in the latest\n * message should be considered. In other words, this is not dependent on any\n * other message (including previous call_grants_updated message)\n *\n * When this message is received, the client (say, React component) should mute\n * the tracks which are not allowed anymore. For example, if the message has\n * grants {audio:true, video:false} while the user is publishing video, then the\n * client component should mute the video track and gray out the video button.\n * This way, the user will not be able to publish video until the permissions\n * are granted again. Also, muting the track on the client side will prevent\n * the SFU from receiving the video track and will save bandwidth.\n *\n * In simple words, this is exactly the same as muting a track on the client.\n * Here, instead of the user instructing the client, SFU would be doing it.\n *\n * @generated from protobuf message stream.video.sfu.event.CallGrantsUpdated\n */\nexport interface CallGrantsUpdated {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallGrants current_grants = 1;\n   */\n  currentGrants?: CallGrants;\n  /**\n   * @generated from protobuf field: string message = 2;\n   */\n  message: string;\n}\n/**\n * Go away is sent by the SFU to the client to signal to migrate away from the SFU.\n * The evict reason may specify why the user is being evicted.\n *\n * @generated from protobuf message stream.video.sfu.event.GoAway\n */\nexport interface GoAway {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.GoAwayReason reason = 1;\n   */\n  reason: GoAwayReason;\n}\n/**\n * CallEnded is sent by the SFU to the client to signal that the call has ended.\n * The reason may specify why the call has ended.\n *\n * @generated from protobuf message stream.video.sfu.event.CallEnded\n */\nexport interface CallEnded {\n  /**\n   * @generated from protobuf field: stream.video.sfu.models.CallEndedReason reason = 1;\n   */\n  reason: CallEndedReason;\n}\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuEvent$Type extends MessageType<SfuEvent> {\n  constructor() {\n    super('stream.video.sfu.event.SfuEvent', [\n      {\n        no: 1,\n        name: 'subscriber_offer',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => SubscriberOffer,\n      },\n      {\n        no: 2,\n        name: 'publisher_answer',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => PublisherAnswer,\n      },\n      {\n        no: 3,\n        name: 'connection_quality_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ConnectionQualityChanged,\n      },\n      {\n        no: 4,\n        name: 'audio_level_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => AudioLevelChanged,\n      },\n      {\n        no: 5,\n        name: 'ice_trickle',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ICETrickle$,\n      },\n      {\n        no: 6,\n        name: 'change_publish_quality',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ChangePublishQuality,\n      },\n      {\n        no: 10,\n        name: 'participant_joined',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantJoined,\n      },\n      {\n        no: 11,\n        name: 'participant_left',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantLeft,\n      },\n      {\n        no: 12,\n        name: 'dominant_speaker_changed',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => DominantSpeakerChanged,\n      },\n      {\n        no: 13,\n        name: 'join_response',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => JoinResponse,\n      },\n      {\n        no: 14,\n        name: 'health_check_response',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => HealthCheckResponse,\n      },\n      {\n        no: 16,\n        name: 'track_published',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => TrackPublished,\n      },\n      {\n        no: 17,\n        name: 'track_unpublished',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => TrackUnpublished,\n      },\n      {\n        no: 18,\n        name: 'error',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => Error,\n      },\n      {\n        no: 19,\n        name: 'call_grants_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => CallGrantsUpdated,\n      },\n      {\n        no: 20,\n        name: 'go_away',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => GoAway,\n      },\n      {\n        no: 21,\n        name: 'ice_restart',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ICERestart,\n      },\n      {\n        no: 22,\n        name: 'pins_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => PinsChanged,\n      },\n      {\n        no: 23,\n        name: 'call_ended',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => CallEnded,\n      },\n      {\n        no: 24,\n        name: 'participant_updated',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantUpdated,\n      },\n      {\n        no: 25,\n        name: 'participant_migration_complete',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ParticipantMigrationComplete,\n      },\n      {\n        no: 27,\n        name: 'change_publish_options',\n        kind: 'message',\n        oneof: 'eventPayload',\n        T: () => ChangePublishOptions,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuEvent\n */\nexport const SfuEvent = new SfuEvent$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishOptions$Type extends MessageType<ChangePublishOptions> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishOptions', [\n      {\n        no: 1,\n        name: 'publish_options',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => PublishOption,\n      },\n      { no: 2, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishOptions\n */\nexport const ChangePublishOptions = new ChangePublishOptions$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishOptionsComplete$Type extends MessageType<ChangePublishOptionsComplete> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishOptionsComplete', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishOptionsComplete\n */\nexport const ChangePublishOptionsComplete =\n  new ChangePublishOptionsComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantMigrationComplete$Type extends MessageType<ParticipantMigrationComplete> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantMigrationComplete', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */\nexport const ParticipantMigrationComplete =\n  new ParticipantMigrationComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PinsChanged$Type extends MessageType<PinsChanged> {\n  constructor() {\n    super('stream.video.sfu.event.PinsChanged', [\n      {\n        no: 1,\n        name: 'pins',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => Pin,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PinsChanged\n */\nexport const PinsChanged = new PinsChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends MessageType<Error> {\n  constructor() {\n    super('stream.video.sfu.event.Error', [\n      { no: 4, name: 'error', kind: 'message', T: () => Error$ },\n      {\n        no: 5,\n        name: 'reconnect_strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Error\n */\nexport const Error = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends MessageType<ICETrickle> {\n  constructor() {\n    super('stream.video.sfu.event.ICETrickle', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n      {\n        no: 2,\n        name: 'ice_candidate',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICETrickle\n */\nexport const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestart$Type extends MessageType<ICERestart> {\n  constructor() {\n    super('stream.video.sfu.event.ICERestart', [\n      {\n        no: 1,\n        name: 'peer_type',\n        kind: 'enum',\n        T: () => ['stream.video.sfu.models.PeerType', PeerType, 'PEER_TYPE_'],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICERestart\n */\nexport const ICERestart = new ICERestart$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuRequest$Type extends MessageType<SfuRequest> {\n  constructor() {\n    super('stream.video.sfu.event.SfuRequest', [\n      {\n        no: 1,\n        name: 'join_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => JoinRequest,\n      },\n      {\n        no: 2,\n        name: 'health_check_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => HealthCheckRequest,\n      },\n      {\n        no: 3,\n        name: 'leave_call_request',\n        kind: 'message',\n        oneof: 'requestPayload',\n        T: () => LeaveCallRequest,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuRequest\n */\nexport const SfuRequest = new SfuRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass LeaveCallRequest$Type extends MessageType<LeaveCallRequest> {\n  constructor() {\n    super('stream.video.sfu.event.LeaveCallRequest', [\n      { no: 1, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.LeaveCallRequest\n */\nexport const LeaveCallRequest = new LeaveCallRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckRequest$Type extends MessageType<HealthCheckRequest> {\n  constructor() {\n    super('stream.video.sfu.event.HealthCheckRequest', []);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckRequest\n */\nexport const HealthCheckRequest = new HealthCheckRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckResponse$Type extends MessageType<HealthCheckResponse> {\n  constructor() {\n    super('stream.video.sfu.event.HealthCheckResponse', [\n      {\n        no: 1,\n        name: 'participant_count',\n        kind: 'message',\n        T: () => ParticipantCount,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckResponse\n */\nexport const HealthCheckResponse = new HealthCheckResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackPublished$Type extends MessageType<TrackPublished> {\n  constructor() {\n    super('stream.video.sfu.event.TrackPublished', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      { no: 4, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackPublished\n */\nexport const TrackPublished = new TrackPublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackUnpublished$Type extends MessageType<TrackUnpublished> {\n  constructor() {\n    super('stream.video.sfu.event.TrackUnpublished', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 4,\n        name: 'cause',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackUnpublishReason',\n          TrackUnpublishReason,\n          'TRACK_UNPUBLISH_REASON_',\n        ],\n      },\n      { no: 5, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackUnpublished\n */\nexport const TrackUnpublished = new TrackUnpublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinRequest$Type extends MessageType<JoinRequest> {\n  constructor() {\n    super('stream.video.sfu.event.JoinRequest', [\n      { no: 1, name: 'token', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'subscriber_sdp',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 8,\n        name: 'publisher_sdp',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 4,\n        name: 'client_details',\n        kind: 'message',\n        T: () => ClientDetails,\n      },\n      { no: 5, name: 'migration', kind: 'message', T: () => Migration },\n      {\n        no: 6,\n        name: 'fast_reconnect',\n        kind: 'scalar',\n        T: 8 /*ScalarType.BOOL*/,\n      },\n      {\n        no: 7,\n        name: 'reconnect_details',\n        kind: 'message',\n        T: () => ReconnectDetails,\n      },\n      {\n        no: 9,\n        name: 'preferred_publish_options',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => PublishOption,\n      },\n      {\n        no: 10,\n        name: 'preferred_subscribe_options',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => SubscribeOption,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinRequest\n */\nexport const JoinRequest = new JoinRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ReconnectDetails$Type extends MessageType<ReconnectDetails> {\n  constructor() {\n    super('stream.video.sfu.event.ReconnectDetails', [\n      {\n        no: 1,\n        name: 'strategy',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.WebsocketReconnectStrategy',\n          WebsocketReconnectStrategy,\n          'WEBSOCKET_RECONNECT_STRATEGY_',\n        ],\n      },\n      {\n        no: 3,\n        name: 'announced_tracks',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackInfo,\n      },\n      {\n        no: 4,\n        name: 'subscriptions',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n      {\n        no: 5,\n        name: 'reconnect_attempt',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 6,\n        name: 'from_sfu_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 7,\n        name: 'previous_session_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      { no: 8, name: 'reason', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ReconnectDetails\n */\nexport const ReconnectDetails = new ReconnectDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Migration$Type extends MessageType<Migration> {\n  constructor() {\n    super('stream.video.sfu.event.Migration', [\n      {\n        no: 1,\n        name: 'from_sfu_id',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n      {\n        no: 2,\n        name: 'announced_tracks',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackInfo,\n      },\n      {\n        no: 3,\n        name: 'subscriptions',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => TrackSubscriptionDetails,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Migration\n */\nexport const Migration = new Migration$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinResponse$Type extends MessageType<JoinResponse> {\n  constructor() {\n    super('stream.video.sfu.event.JoinResponse', [\n      { no: 1, name: 'call_state', kind: 'message', T: () => CallState },\n      { no: 2, name: 'reconnected', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      {\n        no: 3,\n        name: 'fast_reconnect_deadline_seconds',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n      {\n        no: 4,\n        name: 'publish_options',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => PublishOption,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinResponse\n */\nexport const JoinResponse = new JoinResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantJoined$Type extends MessageType<ParticipantJoined> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantJoined', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantJoined\n */\nexport const ParticipantJoined = new ParticipantJoined$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantLeft$Type extends MessageType<ParticipantLeft> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantLeft', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantLeft\n */\nexport const ParticipantLeft = new ParticipantLeft$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantUpdated$Type extends MessageType<ParticipantUpdated> {\n  constructor() {\n    super('stream.video.sfu.event.ParticipantUpdated', [\n      { no: 1, name: 'call_cid', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'participant', kind: 'message', T: () => Participant },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantUpdated\n */\nexport const ParticipantUpdated = new ParticipantUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscriberOffer$Type extends MessageType<SubscriberOffer> {\n  constructor() {\n    super('stream.video.sfu.event.SubscriberOffer', [\n      { no: 1, name: 'ice_restart', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 2, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SubscriberOffer\n */\nexport const SubscriberOffer = new SubscriberOffer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublisherAnswer$Type extends MessageType<PublisherAnswer> {\n  constructor() {\n    super('stream.video.sfu.event.PublisherAnswer', [\n      { no: 1, name: 'sdp', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PublisherAnswer\n */\nexport const PublisherAnswer = new PublisherAnswer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityChanged$Type extends MessageType<ConnectionQualityChanged> {\n  constructor() {\n    super('stream.video.sfu.event.ConnectionQualityChanged', [\n      {\n        no: 1,\n        name: 'connection_quality_updates',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => ConnectionQualityInfo,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */\nexport const ConnectionQualityChanged = new ConnectionQualityChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityInfo$Type extends MessageType<ConnectionQualityInfo> {\n  constructor() {\n    super('stream.video.sfu.event.ConnectionQualityInfo', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      {\n        no: 3,\n        name: 'connection_quality',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.ConnectionQuality',\n          ConnectionQuality,\n          'CONNECTION_QUALITY_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */\nexport const ConnectionQualityInfo = new ConnectionQualityInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass DominantSpeakerChanged$Type extends MessageType<DominantSpeakerChanged> {\n  constructor() {\n    super('stream.video.sfu.event.DominantSpeakerChanged', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */\nexport const DominantSpeakerChanged = new DominantSpeakerChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevel$Type extends MessageType<AudioLevel> {\n  constructor() {\n    super('stream.video.sfu.event.AudioLevel', [\n      { no: 1, name: 'user_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'session_id', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 3, name: 'level', kind: 'scalar', T: 2 /*ScalarType.FLOAT*/ },\n      { no: 4, name: 'is_speaking', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevel\n */\nexport const AudioLevel = new AudioLevel$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevelChanged$Type extends MessageType<AudioLevelChanged> {\n  constructor() {\n    super('stream.video.sfu.event.AudioLevelChanged', [\n      {\n        no: 1,\n        name: 'audio_levels',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => AudioLevel,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevelChanged\n */\nexport const AudioLevelChanged = new AudioLevelChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioSender$Type extends MessageType<AudioSender> {\n  constructor() {\n    super('stream.video.sfu.event.AudioSender', [\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 4,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioSender\n */\nexport const AudioSender = new AudioSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayerSetting$Type extends MessageType<VideoLayerSetting> {\n  constructor() {\n    super('stream.video.sfu.event.VideoLayerSetting', [\n      { no: 1, name: 'name', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n      { no: 2, name: 'active', kind: 'scalar', T: 8 /*ScalarType.BOOL*/ },\n      { no: 3, name: 'max_bitrate', kind: 'scalar', T: 5 /*ScalarType.INT32*/ },\n      {\n        no: 4,\n        name: 'scale_resolution_down_by',\n        kind: 'scalar',\n        T: 2 /*ScalarType.FLOAT*/,\n      },\n      { no: 6, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 7,\n        name: 'max_framerate',\n        kind: 'scalar',\n        T: 13 /*ScalarType.UINT32*/,\n      },\n      {\n        no: 8,\n        name: 'scalability_mode',\n        kind: 'scalar',\n        T: 9 /*ScalarType.STRING*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoLayerSetting\n */\nexport const VideoLayerSetting = new VideoLayerSetting$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoSender$Type extends MessageType<VideoSender> {\n  constructor() {\n    super('stream.video.sfu.event.VideoSender', [\n      { no: 2, name: 'codec', kind: 'message', T: () => Codec },\n      {\n        no: 3,\n        name: 'layers',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => VideoLayerSetting,\n      },\n      {\n        no: 4,\n        name: 'track_type',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.TrackType',\n          TrackType,\n          'TRACK_TYPE_',\n        ],\n      },\n      {\n        no: 5,\n        name: 'publish_option_id',\n        kind: 'scalar',\n        T: 5 /*ScalarType.INT32*/,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoSender\n */\nexport const VideoSender = new VideoSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishQuality$Type extends MessageType<ChangePublishQuality> {\n  constructor() {\n    super('stream.video.sfu.event.ChangePublishQuality', [\n      {\n        no: 1,\n        name: 'audio_senders',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => AudioSender,\n      },\n      {\n        no: 2,\n        name: 'video_senders',\n        kind: 'message',\n        repeat: 1 /*RepeatType.PACKED*/,\n        T: () => VideoSender,\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishQuality\n */\nexport const ChangePublishQuality = new ChangePublishQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrantsUpdated$Type extends MessageType<CallGrantsUpdated> {\n  constructor() {\n    super('stream.video.sfu.event.CallGrantsUpdated', [\n      { no: 1, name: 'current_grants', kind: 'message', T: () => CallGrants },\n      { no: 2, name: 'message', kind: 'scalar', T: 9 /*ScalarType.STRING*/ },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallGrantsUpdated\n */\nexport const CallGrantsUpdated = new CallGrantsUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass GoAway$Type extends MessageType<GoAway> {\n  constructor() {\n    super('stream.video.sfu.event.GoAway', [\n      {\n        no: 1,\n        name: 'reason',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.GoAwayReason',\n          GoAwayReason,\n          'GO_AWAY_REASON_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.GoAway\n */\nexport const GoAway = new GoAway$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallEnded$Type extends MessageType<CallEnded> {\n  constructor() {\n    super('stream.video.sfu.event.CallEnded', [\n      {\n        no: 1,\n        name: 'reason',\n        kind: 'enum',\n        T: () => [\n          'stream.video.sfu.models.CallEndedReason',\n          CallEndedReason,\n          'CALL_ENDED_REASON_',\n        ],\n      },\n    ]);\n  }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallEnded\n */\nexport const CallEnded = new CallEnded$Type();\n","import type {\n  Participant,\n  VideoDimension,\n} from './gen/video/sfu/models/models';\nimport type {\n  JoinCallRequest,\n  MemberResponse,\n  OwnCapability,\n  ReactionResponse,\n} from './gen/coordinator';\nimport type { StreamClient } from './coordinator/connection/client';\nimport type { Comparator } from './sorting';\nimport type { StreamVideoWriteableStateStore } from './store';\nimport { AxiosError } from 'axios';\nimport { RejectReason } from './coordinator/connection/types';\n\nexport type StreamReaction = Pick<\n  ReactionResponse,\n  'type' | 'emoji_code' | 'custom'\n>;\n\nexport enum VisibilityState {\n  UNKNOWN = 'UNKNOWN',\n  VISIBLE = 'VISIBLE',\n  INVISIBLE = 'INVISIBLE',\n}\n\nexport enum DebounceType {\n  IMMEDIATE = 20,\n  FAST = 100,\n  MEDIUM = 600,\n  SLOW = 1200,\n}\n\nexport interface StreamVideoParticipant extends Participant {\n  /**\n   * The participant's audio stream, if they are publishing audio and\n   * we have subscribed to it.\n   */\n  audioStream?: MediaStream;\n\n  /**\n   * The participant's video stream, if they are sharing their video,\n   * and we are subscribed to it.\n   */\n  videoStream?: MediaStream;\n\n  /**\n   * The participant's screen share stream, if they are sharing their screen,\n   * and we are subscribed to it.\n   */\n  screenShareStream?: MediaStream;\n\n  /**\n   * The participant's screen audio stream, if they are sharing their audio,\n   * and we are subscribed to it.\n   */\n  screenShareAudioStream?: MediaStream;\n\n  /**\n   * The preferred video dimensions for this participant.\n   * Set it to `undefined` to unsubscribe from this participant's video.\n   */\n  videoDimension?: VideoDimension;\n\n  /**\n   * The preferred screen share dimensions for this participant.\n   * Set it to `undefined` to unsubscribe from this participant's screen share.\n   */\n  screenShareDimension?: VideoDimension;\n\n  /**\n   * True if the participant is the local participant.\n   */\n  isLocalParticipant?: boolean;\n\n  /**\n   * The pin state of the participant.\n   */\n  pin?: ParticipantPin;\n\n  /**\n   * The last reaction this user has sent to this call.\n   * Integrators can batch/collect past reactions and show them to the UI.\n   */\n  reaction?: StreamReaction;\n\n  /**\n   * The visibility state of the participant's tracks within a defined viewport.\n   */\n  viewportVisibilityState?: Record<VideoTrackType, VisibilityState>;\n\n  /**\n   * The volume of the participant's audio stream (from 0 to 1).\n   * Set it to `undefined` to use the default volume.\n   *\n   * Note: this value is not applicable in React Native.\n   */\n  audioVolume?: number;\n}\n\nexport type VideoTrackType = 'videoTrack' | 'screenShareTrack';\nexport type AudioTrackType = 'audioTrack' | 'screenShareAudioTrack';\nexport type TrackMuteType =\n  | 'audio'\n  | 'video'\n  | 'screenshare'\n  | 'screenshare_audio';\n\n/**\n * Represents a participant's pin state.\n */\nexport type ParticipantPin = {\n  /**\n   * Set to true if the participant is pinned by the local user.\n   * False if the participant is pinned server-side, by the call moderator.\n   */\n  isLocalPin: boolean;\n\n  /**\n   * Timestamp when the participant is pinned.\n   */\n  pinnedAt: number;\n};\n\nexport type ClosedCaptionsSettings = {\n  /**\n   * The time in milliseconds to keep a closed caption in the state (visible).\n   * Default is 2700 ms.\n   */\n  visibilityDurationMs?: number;\n  /**\n   * The maximum number of closed captions to keep in the state (visible).\n   * When the maximum number is reached, the oldest closed caption is removed.\n   *\n   * Default is 2.\n   */\n  maxVisibleCaptions?: number;\n};\n\n/**\n * A partial representation of the StreamVideoParticipant.\n */\nexport type StreamVideoParticipantPatch = Partial<StreamVideoParticipant>;\n\n/**\n * A collection of {@link StreamVideoParticipantPatch} organized by sessionId.\n */\nexport type StreamVideoParticipantPatches = {\n  [sessionId: string]: StreamVideoParticipantPatch;\n};\n\nexport type SubscriptionChange = {\n  /**\n   * The video dimension to request.\n   * Set it to `undefined` in case you want to unsubscribe.\n   */\n  dimension: VideoDimension | undefined;\n};\n\nexport type SubscriptionChanges = {\n  [sessionId: string]: SubscriptionChange;\n};\n\n/**\n * A preferred codec to use when publishing a video or audio track.\n * @internal\n */\nexport type PreferredCodec = 'vp8' | 'h264' | 'vp9' | 'av1';\n\n/**\n * A collection of track publication options.\n * @internal\n */\nexport type ClientPublishOptions = {\n  /**\n   * The preferred codec to use when publishing the video stream.\n   */\n  preferredCodec?: PreferredCodec;\n  /**\n   * The fmtp line for the video codec.\n   */\n  fmtpLine?: string;\n  /**\n   * The preferred bitrate to use when publishing the video stream.\n   */\n  preferredBitrate?: number;\n  /**\n   * The maximum number of simulcast layers to use when publishing the video stream.\n   */\n  maxSimulcastLayers?: number;\n  /**\n   * The preferred subscription (incoming video stream) codec.\n   */\n  subscriberCodec?: PreferredCodec;\n  /**\n   * The fmtp line for the subscriber codec.\n   */\n  subscriberFmtpLine?: string;\n  /**\n   * Screen share settings.\n   */\n  screenShareSettings?: ScreenShareSettings;\n};\n\nexport type ScreenShareSettings = {\n  /**\n   * Limits the maximum framerate (in frames per second) of the screen share.\n   * Defaults to 30.\n   */\n  maxFramerate?: number;\n\n  /**\n   * Limits the maximum bitrate (in bits per second) of the screen share.\n   * Defaults to 3000000 (3Mbps).\n   */\n  maxBitrate?: number;\n};\n\nexport type CallLeaveOptions = {\n  /**\n   * If true, the caller will get a `call.rejected` event.\n   * Has an effect only if the call is in the `ringing` state.\n   */\n  reject?: boolean;\n\n  /**\n   * The reason for leaving the call.\n   * This will be sent as the `reason` field in the `call.rejected` event.\n   */\n  reason?: RejectReason;\n\n  /**\n   * You can provide extra information about why the call is being left and/or rejected, used for logging purposes.\n   */\n  message?: string;\n};\n\n/**\n * The options to pass to {@link Call} constructor.\n */\nexport type CallConstructor = {\n  /**\n   * The streamClient instance to use.\n   */\n  streamClient: StreamClient;\n\n  /**\n   * The Call type.\n   */\n  type: string;\n\n  /**\n   * The Call ID.\n   */\n  id: string;\n\n  /**\n   * An optional list of {@link MemberResponse} from the backend.\n   * If provided, the call will be initialized with the data from this object.\n   * This is useful when initializing a new \"pending call\" from an event.\n   */\n  members?: MemberResponse[];\n\n  /**\n   * An optional list of {@link OwnCapability} coming from the backed.\n   * If provided, the call will be initialized with the data from this object.\n   * This is useful when initializing a new \"pending call\" from an event.\n   */\n  ownCapabilities?: OwnCapability[];\n\n  /**\n   * Flags the call as a ringing call.\n   * @default false\n   */\n  ringing?: boolean;\n\n  /**\n   * Set to true if this call instance should receive updates from the backend.\n   *\n   * @default false.\n   */\n  watching?: boolean;\n\n  /**\n   * The default comparator to use when sorting participants.\n   */\n  sortParticipantsBy?: Comparator<StreamVideoParticipant>;\n\n  /**\n   * The state store of the client\n   */\n  clientStore: StreamVideoWriteableStateStore;\n};\n\n/**\n * The options to pass to {@link Call.join} method.\n */\nexport type JoinCallData = Omit<JoinCallRequest, 'location'>;\nexport { AxiosError };\n","// @generated by protobuf-ts 2.9.6 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\nimport type {\n  RpcOptions,\n  RpcTransport,\n  ServiceInfo,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport { stackIntercept } from '@protobuf-ts/runtime-rpc';\nimport type {\n  ICERestartRequest,\n  ICERestartResponse,\n  ICETrickleResponse,\n  SendAnswerRequest,\n  SendAnswerResponse,\n  SendStatsRequest,\n  SendStatsResponse,\n  SetPublisherRequest,\n  SetPublisherResponse,\n  StartNoiseCancellationRequest,\n  StartNoiseCancellationResponse,\n  StopNoiseCancellationRequest,\n  StopNoiseCancellationResponse,\n  UpdateMuteStatesRequest,\n  UpdateMuteStatesResponse,\n  UpdateSubscriptionsRequest,\n  UpdateSubscriptionsResponse,\n} from './signal';\nimport { SignalServer } from './signal';\nimport type { ICETrickle } from '../models/models';\n\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */\nexport interface ISignalServerClient {\n  /**\n   * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n   *\n   * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n   */\n  setPublisher(\n    input: SetPublisherRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SetPublisherRequest, SetPublisherResponse>;\n  /**\n   * answer is sent by the client to the SFU after receiving a subscriber_offer.\n   *\n   * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n   */\n  sendAnswer(\n    input: SendAnswerRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendAnswerRequest, SendAnswerResponse>;\n  /**\n   * SendICECandidate sends an ICE candidate to the client\n   *\n   * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n   */\n  iceTrickle(\n    input: ICETrickle,\n    options?: RpcOptions,\n  ): UnaryCall<ICETrickle, ICETrickleResponse>;\n  /**\n   * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n   * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n   *\n   * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n   */\n  updateSubscriptions(\n    input: UpdateSubscriptionsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateSubscriptionsRequest, UpdateSubscriptionsResponse>;\n  /**\n   * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n   */\n  updateMuteStates(\n    input: UpdateMuteStatesRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateMuteStatesRequest, UpdateMuteStatesResponse>;\n  /**\n   * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n   */\n  iceRestart(\n    input: ICERestartRequest,\n    options?: RpcOptions,\n  ): UnaryCall<ICERestartRequest, ICERestartResponse>;\n  /**\n   * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n   */\n  sendStats(\n    input: SendStatsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendStatsRequest, SendStatsResponse>;\n  /**\n   * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n   */\n  startNoiseCancellation(\n    input: StartNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StartNoiseCancellationRequest, StartNoiseCancellationResponse>;\n  /**\n   * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n   */\n  stopNoiseCancellation(\n    input: StopNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StopNoiseCancellationRequest, StopNoiseCancellationResponse>;\n}\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */\nexport class SignalServerClient implements ISignalServerClient, ServiceInfo {\n  typeName = SignalServer.typeName;\n  methods = SignalServer.methods;\n  options = SignalServer.options;\n  constructor(private readonly _transport: RpcTransport) {}\n  /**\n   * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n   *\n   * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n   */\n  setPublisher(\n    input: SetPublisherRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SetPublisherRequest, SetPublisherResponse> {\n    const method = this.methods[0],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SetPublisherRequest, SetPublisherResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * answer is sent by the client to the SFU after receiving a subscriber_offer.\n   *\n   * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n   */\n  sendAnswer(\n    input: SendAnswerRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendAnswerRequest, SendAnswerResponse> {\n    const method = this.methods[1],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SendAnswerRequest, SendAnswerResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * SendICECandidate sends an ICE candidate to the client\n   *\n   * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n   */\n  iceTrickle(\n    input: ICETrickle,\n    options?: RpcOptions,\n  ): UnaryCall<ICETrickle, ICETrickleResponse> {\n    const method = this.methods[2],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<ICETrickle, ICETrickleResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n   * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n   *\n   * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n   */\n  updateSubscriptions(\n    input: UpdateSubscriptionsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateSubscriptionsRequest, UpdateSubscriptionsResponse> {\n    const method = this.methods[3],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      UpdateSubscriptionsRequest,\n      UpdateSubscriptionsResponse\n    >('unary', this._transport, method, opt, input);\n  }\n  /**\n   * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n   */\n  updateMuteStates(\n    input: UpdateMuteStatesRequest,\n    options?: RpcOptions,\n  ): UnaryCall<UpdateMuteStatesRequest, UpdateMuteStatesResponse> {\n    const method = this.methods[4],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<UpdateMuteStatesRequest, UpdateMuteStatesResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n   */\n  iceRestart(\n    input: ICERestartRequest,\n    options?: RpcOptions,\n  ): UnaryCall<ICERestartRequest, ICERestartResponse> {\n    const method = this.methods[5],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<ICERestartRequest, ICERestartResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n   */\n  sendStats(\n    input: SendStatsRequest,\n    options?: RpcOptions,\n  ): UnaryCall<SendStatsRequest, SendStatsResponse> {\n    const method = this.methods[6],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<SendStatsRequest, SendStatsResponse>(\n      'unary',\n      this._transport,\n      method,\n      opt,\n      input,\n    );\n  }\n  /**\n   * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n   */\n  startNoiseCancellation(\n    input: StartNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StartNoiseCancellationRequest, StartNoiseCancellationResponse> {\n    const method = this.methods[7],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      StartNoiseCancellationRequest,\n      StartNoiseCancellationResponse\n    >('unary', this._transport, method, opt, input);\n  }\n  /**\n   * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n   */\n  stopNoiseCancellation(\n    input: StopNoiseCancellationRequest,\n    options?: RpcOptions,\n  ): UnaryCall<StopNoiseCancellationRequest, StopNoiseCancellationResponse> {\n    const method = this.methods[8],\n      opt = this._transport.mergeOptions(options);\n    return stackIntercept<\n      StopNoiseCancellationRequest,\n      StopNoiseCancellationResponse\n    >('unary', this._transport, method, opt, input);\n  }\n}\n","import {\n  MethodInfo,\n  NextUnaryFn,\n  RpcInterceptor,\n  RpcOptions,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport {\n  TwirpFetchTransport,\n  TwirpOptions,\n} from '@protobuf-ts/twirp-transport';\nimport { SignalServerClient } from '../gen/video/sfu/signal_rpc/signal.client';\nimport { Logger, LogLevel } from '../coordinator/connection/types';\nimport type { Trace } from '../stats';\n\nconst defaultOptions: TwirpOptions = {\n  baseUrl: '',\n  sendJson: true,\n  timeout: 5 * 1000, // ms.\n  jsonOptions: {\n    ignoreUnknownFields: true,\n  },\n};\n\nexport const withHeaders = (\n  headers: Record<string, string>,\n): RpcInterceptor => {\n  return {\n    interceptUnary(\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall {\n      options.meta = { ...options.meta, ...headers };\n      return next(method, input, options);\n    },\n  };\n};\n\nexport const withRequestLogger = (\n  logger: Logger,\n  level: LogLevel,\n): RpcInterceptor => {\n  return {\n    interceptUnary: (\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall => {\n      let invocation: UnaryCall | undefined;\n      try {\n        invocation = next(method, input, options);\n      } finally {\n        logger(level, `Invoked SFU RPC method ${method.name}`, {\n          request: invocation?.request,\n          headers: invocation?.requestHeaders,\n          response: invocation?.response,\n        });\n      }\n      return invocation;\n    },\n  };\n};\n\nexport const withRequestTracer = (trace: Trace): RpcInterceptor => {\n  type RpcMethodNames = {\n    [K in keyof SignalServerClient as Capitalize<K>]: boolean;\n  };\n\n  const exclusions: Record<string, boolean | undefined> = {\n    SendStats: true,\n  } satisfies Partial<RpcMethodNames>;\n  return {\n    interceptUnary(\n      next: NextUnaryFn,\n      method: MethodInfo,\n      input: object,\n      options: RpcOptions,\n    ): UnaryCall {\n      if (exclusions[method.name as keyof RpcMethodNames]) {\n        return next(method, input, options);\n      }\n      try {\n        trace(method.name, input);\n        return next(method, input, options);\n      } catch (err) {\n        trace(`${method.name}OnFailure`, [input, err]);\n        throw err;\n      }\n    },\n  };\n};\n\n/**\n * Creates new SignalServerClient instance.\n *\n * @param options the twirp options.\n */\nexport const createSignalClient = (options?: TwirpOptions) => {\n  const transport = new TwirpFetchTransport({\n    ...defaultOptions,\n    ...options,\n  });\n\n  return new SignalServerClient(transport);\n};\n","import type { AxiosResponse } from 'axios';\nimport type { APIErrorResponse } from './types';\nimport type { ConnectionErrorEvent } from '../../gen/coordinator';\n\nexport const sleep = (m: number) => new Promise((r) => setTimeout(r, m));\n\nexport function isFunction<T>(value: Function | T): value is Function {\n  return (\n    value &&\n    (Object.prototype.toString.call(value) === '[object Function]' ||\n      'function' === typeof value ||\n      value instanceof Function)\n  );\n}\n\n/**\n * A map of known error codes.\n */\nexport const KnownCodes = {\n  TOKEN_EXPIRED: 40,\n  WS_CLOSED_SUCCESS: 1000,\n};\n\n/**\n * retryInterval - A retry interval which increases acc to number of failures\n *\n * @return {number} Duration to wait in milliseconds\n */\nexport function retryInterval(numberOfFailures: number): number {\n  // try to reconnect in 0.25-5 seconds (random to spread out the load from failures)\n  const max = Math.min(500 + numberOfFailures * 2000, 5000);\n  const min = Math.min(Math.max(250, (numberOfFailures - 1) * 2000), 5000);\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction hex(bytes: Uint8Array): string {\n  let s = '';\n  for (let i = 0; i < bytes.length; i++) {\n    s += bytes[i].toString(16).padStart(2, '0');\n  }\n  return s;\n}\n\n// https://tools.ietf.org/html/rfc4122\nexport function generateUUIDv4() {\n  const bytes = getRandomBytes(16);\n  bytes[6] = (bytes[6] & 0x0f) | 0x40; // version\n  bytes[8] = (bytes[8] & 0xbf) | 0x80; // variant\n\n  return [\n    hex(bytes.subarray(0, 4)),\n    hex(bytes.subarray(4, 6)),\n    hex(bytes.subarray(6, 8)),\n    hex(bytes.subarray(8, 10)),\n    hex(bytes.subarray(10, 16)),\n  ].join('-');\n}\n\nconst getRandomValues = (() => {\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    return crypto.getRandomValues.bind(crypto);\n  }\n  return function getRandomValuesWithMathRandom(bytes: Uint8Array): void {\n    const max = Math.pow(2, (8 * bytes.byteLength) / bytes.length);\n    for (let i = 0; i < bytes.length; i++) {\n      bytes[i] = Math.random() * max;\n    }\n  };\n})();\n\nfunction getRandomBytes(length: number): Uint8Array {\n  const bytes = new Uint8Array(length);\n  getRandomValues(bytes);\n  return bytes;\n}\n\n/**\n * listenForConnectionChanges - Adds an event listener fired on browser going online or offline\n */\nexport function addConnectionEventListeners(cb: (e: Event) => void) {\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    window.addEventListener('offline', cb);\n    window.addEventListener('online', cb);\n  }\n}\n\nexport function removeConnectionEventListeners(cb: (e: Event) => void) {\n  if (typeof window !== 'undefined' && window.removeEventListener) {\n    window.removeEventListener('offline', cb);\n    window.removeEventListener('online', cb);\n  }\n}\n\nexport function isErrorResponse(\n  res: AxiosResponse<unknown>,\n): res is AxiosResponse<APIErrorResponse> {\n  return !res.status || res.status < 200 || 300 <= res.status;\n}\n\n// Type guards to check WebSocket error type\nexport function isCloseEvent(\n  res: CloseEvent | ConnectionErrorEvent,\n): res is CloseEvent {\n  return (res as CloseEvent).code !== undefined;\n}\n","/**\n * Checks whether we are using React Native\n */\nexport const isReactNative = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.product?.toLowerCase() === 'reactnative';\n};\n","import { Logger, LogLevel } from './coordinator/connection/types';\nimport { isReactNative } from './helpers/platforms';\n\n// log levels, sorted by verbosity\nexport const logLevels: Record<LogLevel, number> = Object.freeze({\n  trace: 0,\n  debug: 1,\n  info: 2,\n  warn: 3,\n  error: 4,\n});\n\nlet logger: Logger | undefined;\nlet level: LogLevel = 'info';\n\nexport const logToConsole: Logger = (logLevel, message, ...args) => {\n  let logMethod;\n  switch (logLevel) {\n    case 'error':\n      if (isReactNative()) {\n        message = `ERROR: ${message}`;\n        logMethod = console.info;\n        break;\n      }\n      logMethod = console.error;\n      break;\n    case 'warn':\n      if (isReactNative()) {\n        message = `WARN: ${message}`;\n        logMethod = console.info;\n        break;\n      }\n      logMethod = console.warn;\n      break;\n    case 'info':\n      logMethod = console.info;\n      break;\n    case 'trace':\n      logMethod = console.trace;\n      break;\n    default:\n      logMethod = console.log;\n      break;\n  }\n\n  logMethod(message, ...args);\n};\n\nexport const setLogger = (l: Logger, lvl?: LogLevel) => {\n  logger = l;\n  if (lvl) {\n    setLogLevel(lvl);\n  }\n};\n\nexport const setLogLevel = (l: LogLevel) => {\n  level = l;\n};\n\nexport const getLogLevel = (): LogLevel => level;\n\nexport const getLogger = (withTags?: string[]) => {\n  const loggerMethod = logger || logToConsole;\n  const tags = (withTags || []).filter(Boolean).join(':');\n  const result: Logger = (logLevel, message, ...args) => {\n    if (logLevels[logLevel] >= logLevels[level]) {\n      loggerMethod(logLevel, `[${tags}]: ${message}`, ...args);\n    }\n  };\n  return result;\n};\n","import {\n  FinishedUnaryCall,\n  RpcError,\n  UnaryCall,\n} from '@protobuf-ts/runtime-rpc';\nimport { TwirpErrorCode } from '@protobuf-ts/twirp-transport';\nimport { retryInterval, sleep } from '../coordinator/connection/utils';\nimport { Error as SfuError } from '../gen/video/sfu/models/models';\nimport { getLogger } from '../logger';\n\n/**\n * An internal interface which asserts that \"retryable\" SFU responses\n * contain a field called \"error\".\n * Ideally, this should be coming from the Protobuf definitions.\n */\nexport interface SfuResponseWithError {\n  /**\n   * An optional error field which should be present in all SFU responses.\n   */\n  error?: SfuError;\n}\n\n/**\n * Creates a closure which wraps the given RPC call and retries invoking\n * the RPC until it succeeds or the maximum number of retries is reached.\n *\n * For each retry, there would be a delay to avoid request bursts toward the SFU.\n *\n * @param rpc the closure around the RPC call to execute.\n * @param signal the signal to abort the RPC call and retries loop.\n */\nexport const retryable = async <\n  I extends object,\n  O extends SfuResponseWithError,\n>(\n  rpc: () => UnaryCall<I, O>,\n  signal?: AbortSignal,\n): Promise<FinishedUnaryCall<I, O>> => {\n  let attempt = 0;\n  let result: FinishedUnaryCall<I, O> | undefined = undefined;\n  do {\n    if (attempt > 0) await sleep(retryInterval(attempt));\n    try {\n      result = await rpc();\n    } catch (err) {\n      const isRequestCancelled =\n        err instanceof RpcError &&\n        err.code === TwirpErrorCode[TwirpErrorCode.cancelled];\n      const isAborted = signal?.aborted ?? false;\n      if (isRequestCancelled || isAborted) throw err;\n      getLogger(['sfu-client', 'rpc'])('debug', `rpc failed (${attempt})`, err);\n      attempt++;\n    }\n  } while (!result || result.response.error?.shouldRetry);\n\n  return result;\n};\n","/**\n * Returns a generic SDP for the given direction.\n * We use this SDP to send it as part of our JoinRequest so that the SFU\n * can use it to determine the client's codec capabilities.\n *\n * @param direction the direction of the transceiver.\n */\nexport const getGenericSdp = async (direction: RTCRtpTransceiverDirection) => {\n  const tempPc = new RTCPeerConnection();\n  tempPc.addTransceiver('video', { direction });\n  tempPc.addTransceiver('audio', { direction });\n\n  const offer = await tempPc.createOffer();\n  const sdp = offer.sdp ?? '';\n\n  tempPc.getTransceivers().forEach((t) => {\n    t.stop?.();\n  });\n  tempPc.close();\n  return sdp;\n};\n\n/**\n * Returns whether the codec is an SVC codec.\n *\n * @param codecOrMimeType the codec to check.\n */\nexport const isSvcCodec = (codecOrMimeType: string | undefined) => {\n  if (!codecOrMimeType) return false;\n  codecOrMimeType = codecOrMimeType.toLowerCase();\n  return (\n    codecOrMimeType === 'vp9' ||\n    codecOrMimeType === 'av1' ||\n    codecOrMimeType === 'video/vp9' ||\n    codecOrMimeType === 'video/av1'\n  );\n};\n","import { CallEventListener, EventTypes } from '../coordinator/connection/types';\nimport type { SfuEvent } from '../gen/video/sfu/event/events';\nimport { getLogger } from '../logger';\n\nexport type SfuEventKinds = NonNullable<SfuEvent['eventPayload']['oneofKind']>;\nexport type AllSfuEvents = {\n  [K in SfuEventKinds]: K extends keyof Extract<\n    SfuEvent['eventPayload'],\n    { oneofKind: K }\n  >\n    ? Extract<SfuEvent['eventPayload'], { oneofKind: K }>[K]\n    : never;\n};\n\nexport type DispatchableMessage<K extends SfuEventKinds> = {\n  eventPayload: {\n    oneofKind: K;\n  } & {\n    [Key in K]: AllSfuEvents[Key];\n  };\n};\n\nconst sfuEventKinds: Record<SfuEventKinds, undefined> = {\n  subscriberOffer: undefined,\n  publisherAnswer: undefined,\n  connectionQualityChanged: undefined,\n  audioLevelChanged: undefined,\n  iceTrickle: undefined,\n  changePublishQuality: undefined,\n  participantJoined: undefined,\n  participantLeft: undefined,\n  dominantSpeakerChanged: undefined,\n  joinResponse: undefined,\n  healthCheckResponse: undefined,\n  trackPublished: undefined,\n  trackUnpublished: undefined,\n  error: undefined,\n  callGrantsUpdated: undefined,\n  goAway: undefined,\n  iceRestart: undefined,\n  pinsUpdated: undefined,\n  callEnded: undefined,\n  participantUpdated: undefined,\n  participantMigrationComplete: undefined,\n  changePublishOptions: undefined,\n};\n\nexport const isSfuEvent = (\n  eventName: SfuEventKinds | EventTypes,\n): eventName is SfuEventKinds => {\n  return Object.prototype.hasOwnProperty.call(sfuEventKinds, eventName);\n};\n\nexport class Dispatcher {\n  private readonly logger = getLogger(['Dispatcher']);\n  private subscribers: Partial<\n    Record<SfuEventKinds, CallEventListener<any>[] | undefined>\n  > = {};\n\n  dispatch = <K extends SfuEventKinds>(\n    message: DispatchableMessage<K>,\n    logTag: string = '0',\n  ) => {\n    const eventKind = message.eventPayload.oneofKind;\n    if (!eventKind) return;\n    const payload = message.eventPayload[eventKind];\n    this.logger('debug', `Dispatching ${eventKind}, tag=${logTag}`, payload);\n    const listeners = this.subscribers[eventKind];\n    if (!listeners) return;\n    for (const fn of listeners) {\n      try {\n        fn(payload);\n      } catch (e) {\n        this.logger('warn', 'Listener failed with error', e);\n      }\n    }\n  };\n\n  on = <E extends keyof AllSfuEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    (this.subscribers[eventName] ??= []).push(fn as never);\n    return () => {\n      this.off(eventName, fn);\n    };\n  };\n\n  off = <E extends keyof AllSfuEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    this.subscribers[eventName] = (this.subscribers[eventName] || []).filter(\n      (f) => f !== fn,\n    );\n  };\n}\n","import { ReplaySubject } from 'rxjs';\nimport { ICETrickle } from '../gen/video/sfu/event/events';\nimport { PeerType } from '../gen/video/sfu/models/models';\nimport { getLogger } from '../logger';\n\n/**\n * A buffer for ICE Candidates. Used for ICE Trickle:\n * - https://bloggeek.me/webrtcglossary/trickle-ice/\n */\nexport class IceTrickleBuffer {\n  readonly subscriberCandidates = new ReplaySubject<RTCIceCandidateInit>();\n  readonly publisherCandidates = new ReplaySubject<RTCIceCandidateInit>();\n\n  push = (iceTrickle: ICETrickle) => {\n    const iceCandidate = toIceCandidate(iceTrickle);\n    if (!iceCandidate) return;\n\n    if (iceTrickle.peerType === PeerType.SUBSCRIBER) {\n      this.subscriberCandidates.next(iceCandidate);\n    } else if (iceTrickle.peerType === PeerType.PUBLISHER_UNSPECIFIED) {\n      this.publisherCandidates.next(iceCandidate);\n    } else {\n      const logger = getLogger(['sfu-client']);\n      logger('warn', `ICETrickle, Unknown peer type`, iceTrickle);\n    }\n  };\n\n  dispose = () => {\n    this.subscriberCandidates.complete();\n    this.publisherCandidates.complete();\n  };\n}\n\nconst toIceCandidate = (\n  iceTrickle: ICETrickle,\n): RTCIceCandidateInit | undefined => {\n  try {\n    return JSON.parse(iceTrickle.iceCandidate);\n  } catch (e) {\n    const logger = getLogger(['sfu-client']);\n    logger('error', `Failed to parse ICE Trickle`, e, iceTrickle);\n    return undefined;\n  }\n};\n","interface PendingPromise {\n  promise: Promise<unknown>;\n  onContinued: () => void;\n}\n\ntype AsyncWrapper<P extends unknown[], T> = (\n  tag: string | symbol,\n  cb: (...args: P) => Promise<T>,\n) => {\n  cb: () => Promise<T>;\n  onContinued: () => void;\n};\n\n/**\n * Runs async functions serially. Useful for wrapping async actions that\n * should never run simultaneously: if marked with the same tag, functions\n * will run one after another.\n *\n * @param tag Async functions with the same tag will run serially. Async functions\n * with different tags can run in parallel.\n * @param cb Async function to run.\n * @returns Promise that resolves when async functions returns.\n */\nexport const withoutConcurrency = createRunner(wrapWithContinuationTracking);\n\n/**\n * Runs async functions serially, and cancels all other actions with the same tag\n * when a new action is scheduled. Useful for wrapping async actions that override\n * each other (e.g. enabling and disabling camera).\n *\n * If an async function hasn't started yet and was canceled, it will never run.\n * If an async function is already running and was canceled, it will be notified\n * via an abort signal passed as an argument.\n *\n * @param tag Async functions with the same tag will run serially and are canceled\n * when a new action with the same tag is scheduled.\n * @param cb Async function to run. Receives AbortSignal as the only argument.\n * @returns Promise that resolves when async functions returns. If the function didn't\n * start and was canceled, will resolve with 'canceled'. If the function started to run,\n * it's up to the function to decide how to react to cancelation.\n */\nexport const withCancellation = createRunner(wrapWithCancellation);\n\nconst pendingPromises = new Map<string | symbol, PendingPromise>();\n\nexport function hasPending(tag: string | symbol) {\n  return pendingPromises.has(tag);\n}\n\nexport async function settled(tag: string | symbol) {\n  let pending: PendingPromise | undefined;\n  while ((pending = pendingPromises.get(tag))) {\n    await pending.promise;\n  }\n}\n\n/**\n * Implements common functionality of running async functions serially, by chaining\n * their promises one after another.\n *\n * Before running, async function is \"wrapped\" using the provided wrapper. This wrapper\n * can add additional steps to run before or after the function.\n *\n * When async function is scheduled to run, the previous function is notified\n * by calling the associated onContinued callback. This behavior of this callback\n * is defined by the wrapper.\n */\nfunction createRunner<P extends unknown[], T>(wrapper: AsyncWrapper<P, T>) {\n  return function run(tag: string | symbol, cb: (...args: P) => Promise<T>) {\n    const { cb: wrapped, onContinued } = wrapper(tag, cb);\n    const pending = pendingPromises.get(tag);\n    pending?.onContinued();\n    const promise = pending\n      ? pending.promise.then(wrapped, wrapped)\n      : wrapped();\n    pendingPromises.set(tag, { promise, onContinued });\n    return promise;\n  };\n}\n\n/**\n * Wraps an async function with an additional step run after the function:\n * if the function is the last in the queue, it cleans up the whole chain\n * of promises after finishing.\n */\nfunction wrapWithContinuationTracking<T>(\n  tag: string | symbol,\n  cb: () => Promise<T>,\n) {\n  let hasContinuation = false;\n  const wrapped = () =>\n    cb().finally(() => {\n      if (!hasContinuation) {\n        pendingPromises.delete(tag);\n      }\n    });\n  const onContinued = () => (hasContinuation = true);\n  return { cb: wrapped, onContinued };\n}\n\n/**\n * Wraps an async function with additional functionalilty:\n * 1. Associates an abort signal with every function, that is passed to it\n *    as an argument. When a new function is scheduled to run after the current\n *    one, current signal is aborted.\n * 2. If current function didn't start and was aborted, in will never start.\n * 3. If the function is the last in the queue, it cleans up the whole chain\n *    of promises after finishing.\n */\nfunction wrapWithCancellation<T>(\n  tag: string | symbol,\n  cb: (signal: AbortSignal) => Promise<T | 'canceled'>,\n) {\n  const ac = new AbortController();\n  const wrapped = () => {\n    if (ac.signal.aborted) {\n      return Promise.resolve('canceled' as const);\n    }\n\n    return cb(ac.signal).finally(() => {\n      if (!ac.signal.aborted) {\n        pendingPromises.delete(tag);\n      }\n    });\n  };\n  const onContinued = () => ac.abort();\n  return { cb: wrapped, onContinued };\n}\n","import { BehaviorSubject, combineLatest, Observable, Subject } from 'rxjs';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { getLogger } from '../logger';\n\ntype FunctionPatch<T> = (currentValue: T) => T;\n\n/**\n * A value or a function which takes the current value and returns a new value.\n */\nexport type Patch<T> = T | FunctionPatch<T>;\n\n/**\n * Checks if the provided update is a function patch.\n *\n * @param update the value to check.\n */\nconst isFunctionPatch = <T>(update: Patch<T>): update is FunctionPatch<T> =>\n  typeof update === 'function';\n\n/**\n * Gets the current value of an observable, or undefined if the observable has\n * not emitted a value yet.\n *\n * @param observable$ the observable to get the value from.\n */\nexport const getCurrentValue = <T>(observable$: Observable<T>) => {\n  let value!: T;\n  let err: Error | undefined = undefined;\n  combineLatest([observable$])\n    .subscribe({\n      next: ([v]) => {\n        value = v;\n      },\n      error: (e) => {\n        err = e;\n      },\n    })\n    .unsubscribe();\n\n  if (err) throw err;\n  return value;\n};\n\n/**\n * Updates the value of the provided Subject.\n * An `update` can either be a new value or a function which takes\n * the current value and returns a new value.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n * @return the updated value.\n */\nexport const setCurrentValue = <T>(subject: Subject<T>, update: Patch<T>) => {\n  const next = isFunctionPatch(update)\n    ? update(getCurrentValue(subject))\n    : update;\n\n  subject.next(next);\n  return next;\n};\n\n/**\n * Updates the value of the provided Subject and returns the previous value\n * and a function to roll back the update.\n * This is useful when you want to optimistically update a value\n * and roll back the update if an error occurs.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n */\nexport const updateValue = <T>(\n  subject: BehaviorSubject<T>,\n  update: Patch<T>,\n) => {\n  const lastValue = subject.getValue();\n  const value = setCurrentValue(subject, update);\n  return {\n    lastValue,\n    value,\n    rollback: () => setCurrentValue(subject, lastValue),\n  };\n};\n\n/**\n * Creates a subscription and returns a function to unsubscribe.\n *\n * @param observable the observable to subscribe to.\n * @param handler the handler to call when the observable emits a value.\n * @param onError an optional error handler.\n */\nexport const createSubscription = <T>(\n  observable: Observable<T>,\n  handler: (value: T) => void,\n  onError: (error: any) => void = (error) =>\n    getLogger(['RxUtils'])('warn', 'An observable emitted an error', error),\n) => {\n  const subscription = observable.subscribe({ next: handler, error: onError });\n  return () => {\n    subscription.unsubscribe();\n  };\n};\n\n/**\n * Creates a subscription and returns a function to unsubscribe. Makes sure that\n * only one async handler runs at the same time. If updates come in quicker than\n * it takes for the current handler to finish, other handlers will wait.\n *\n * @param observable the observable to subscribe to.\n * @param handler the async handler to call when the observable emits a value.\n */\nexport const createSafeAsyncSubscription = <T>(\n  observable: Observable<T>,\n  handler: (value: T) => Promise<void>,\n) => {\n  const tag = Symbol();\n  return createSubscription(observable, (value) => {\n    withoutConcurrency(tag, () => handler(value));\n  });\n};\n","/**\n * Represents the state of the current call.\n */\nexport enum CallingState {\n  /**\n   * The call is in an unknown state.\n   */\n  UNKNOWN = 'unknown',\n\n  /**\n   * The call is in an idle state.\n   */\n  IDLE = 'idle',\n\n  /**\n   * The call is in the process of ringing.\n   * (User hasn't accepted nor rejected the call yet.)\n   */\n  RINGING = 'ringing',\n\n  /**\n   * The call is in the process of joining.\n   */\n  JOINING = 'joining',\n\n  /**\n   * The call is currently active.\n   */\n  JOINED = 'joined',\n\n  /**\n   * The call has been left.\n   */\n  LEFT = 'left',\n\n  /**\n   * The call is in the process of reconnecting.\n   */\n  RECONNECTING = 'reconnecting',\n\n  /**\n   * The call is in the process of migrating from one node to another.\n   */\n  MIGRATING = 'migrating',\n\n  /**\n   * The call has failed to reconnect.\n   */\n  RECONNECTING_FAILED = 'reconnecting-failed',\n\n  /**\n   * The call is in offline mode.\n   */\n  OFFLINE = 'offline',\n}\n","import { BehaviorSubject, Observable } from 'rxjs';\nimport type { Patch } from './rxUtils';\nimport * as RxUtils from './rxUtils';\nimport { Call } from '../Call';\nimport { CallingState } from './CallingState';\nimport type { OwnUserResponse } from '../gen/coordinator';\nimport { getLogger } from '../logger';\n\nexport class StreamVideoWriteableStateStore {\n  /**\n   * A store keeping data of a successfully connected user over WS to the coordinator server.\n   */\n  connectedUserSubject = new BehaviorSubject<OwnUserResponse | undefined>(\n    undefined,\n  );\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  callsSubject = new BehaviorSubject<Call[]>([]);\n\n  constructor() {\n    this.connectedUserSubject.subscribe(async (user) => {\n      // leave all calls when the user disconnects.\n      if (!user) {\n        const logger = getLogger(['client-state']);\n        for (const call of this.calls) {\n          if (call.state.callingState === CallingState.LEFT) continue;\n\n          logger('info', `User disconnected, leaving call: ${call.cid}`);\n          await call\n            .leave({ message: 'client.disconnectUser() called' })\n            .catch((err) => {\n              logger('error', `Error leaving call: ${call.cid}`, err);\n            });\n        }\n      }\n    });\n  }\n\n  /**\n   * The currently connected user.\n   */\n  get connectedUser(): OwnUserResponse | undefined {\n    return RxUtils.getCurrentValue(this.connectedUserSubject);\n  }\n\n  /**\n   * Sets the currently connected user.\n   *\n   * @internal\n   * @param user the user to set as connected.\n   */\n  setConnectedUser = (user: Patch<OwnUserResponse | undefined>) => {\n    return RxUtils.setCurrentValue(this.connectedUserSubject, user);\n  };\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  get calls(): Call[] {\n    return RxUtils.getCurrentValue(this.callsSubject);\n  }\n\n  /**\n   * Sets the list of {@link Call} objects created/tracked by this client.\n   * @param calls\n   */\n  setCalls = (calls: Patch<Call[]>) => {\n    return RxUtils.setCurrentValue(this.callsSubject, calls);\n  };\n\n  /**\n   * Adds a {@link Call} object to the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param call the call to add.\n   */\n  registerCall = (call: Call) => {\n    if (!this.calls.find((c) => c.cid === call.cid)) {\n      this.setCalls((calls) => [...calls, call]);\n    }\n  };\n\n  /**\n   * Removes a {@link Call} object from the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param call the call to remove\n   */\n  unregisterCall = (call: Call) => {\n    const logger = getLogger(['client-state']);\n    logger('trace', `Unregistering call: ${call.cid}`);\n    return this.setCalls((calls) => calls.filter((c) => c !== call));\n  };\n\n  /**\n   * Finds a {@link Call} object in the list of {@link Call} objects created/tracked by this client.\n   *\n   * @param type the type of call to find.\n   * @param id the id of the call to find.\n   */\n  findCall = (type: string, id: string) => {\n    return this.calls.find((c) => c.type === type && c.id === id);\n  };\n}\n\n/**\n * A reactive store that exposes state variables in a reactive manner.\n * You can subscribe to changes of the different state variables.\n * This central store contains all the state variables related to [`StreamVideoClient`](./StreamVideClient.md) and [`Call`](./Call.md).\n */\nexport class StreamVideoReadOnlyStateStore {\n  /**\n   * Data describing a user successfully connected over WS to coordinator server.\n   */\n  connectedUser$: Observable<OwnUserResponse | undefined>;\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  calls$: Observable<Call[]>;\n\n  /**\n   * This method allows you the get the current value of a state variable.\n   *\n   * @param observable the observable to get the current value of.\n   * @returns the current value of the observable.\n   */\n  getCurrentValue = RxUtils.getCurrentValue;\n\n  constructor(store: StreamVideoWriteableStateStore) {\n    // convert and expose subjects as observables\n    this.connectedUser$ = store.connectedUserSubject.asObservable();\n    this.calls$ = store.callsSubject.asObservable();\n  }\n\n  /**\n   * The current user connected over WS to the backend.\n   */\n  get connectedUser(): OwnUserResponse | undefined {\n    return RxUtils.getCurrentValue(this.connectedUser$);\n  }\n\n  /**\n   * A list of {@link Call} objects created/tracked by this client.\n   */\n  get calls(): Call[] {\n    return RxUtils.getCurrentValue(this.calls$);\n  }\n}\n","/**\n * Defines a comparator function which can be used for sorting items.\n */\nexport type Comparator<T> = (a: T, b: T) => -1 | 0 | 1;\n\n/**\n * Creates a new combined {@link Comparator<T>} which sorts items by the given comparators.\n * The comparators are applied in the order they are given (left -> right).\n *\n * @param comparators the comparators to use for sorting.\n * @returns a combined {@link Comparator<T>}.\n */\nexport const combineComparators = <T>(\n  ...comparators: Comparator<T>[]\n): Comparator<T> => {\n  return (a, b) => {\n    for (const comparator of comparators) {\n      const result = comparator(a, b);\n      if (result !== 0) return result;\n    }\n    return 0;\n  };\n};\n\n/**\n * Creates a new comparator which sorts items in descending order.\n *\n * @example\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const byValueDesc = descending(byValue);\n *\n * @param comparator the comparator to wrap.\n */\nexport const descending = <T>(comparator: Comparator<T>): Comparator<T> => {\n  return (a, b) => comparator(b, a);\n};\n\n/**\n * Creates a new comparator which conditionally applies the given comparator.\n *\n * @example\n * const shouldSortByValue = (a, b) => a % 2 === 0; // return false to turn it off\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const comparator = conditional(shouldSortByValue)(byValue);\n *\n * @param predicate the predicate to use for determining whether to apply the comparator.\n */\nexport const conditional = <T>(predicate: (a: T, b: T) => boolean) => {\n  return (comparator: Comparator<T>): Comparator<T> => {\n    return (a, b) => {\n      if (!predicate(a, b)) return 0;\n      return comparator(a, b);\n    };\n  };\n};\n\n/**\n * A no-op comparator which always returns 0.\n */\nexport const noopComparator = <T>(): Comparator<T> => {\n  return () => 0;\n};\n","import { StreamVideoParticipant } from '../types';\nimport { TrackType } from '../gen/video/sfu/models/models';\n\n/**\n * Check if a participant has a video.\n *\n * @param p the participant to check.\n */\nexport const hasVideo = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.VIDEO);\n\n/**\n * Check if a participant has audio.\n *\n * @param p the participant to check.\n */\nexport const hasAudio = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.AUDIO);\n\n/**\n * Check if a participant is screen sharing.\n *\n * @param p the participant to check.\n */\nexport const hasScreenShare = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.SCREEN_SHARE);\n\n/**\n * Check if a participant is screen sharing audio.\n *\n * @param p the participant to check.\n */\nexport const hasScreenShareAudio = (p: StreamVideoParticipant): boolean =>\n  p.publishedTracks.includes(TrackType.SCREEN_SHARE_AUDIO);\n\n/**\n * Check if the participant is pinned.\n *\n * @param p the participant.\n */\nexport const isPinned = (p: StreamVideoParticipant): boolean =>\n  !!p.pin && (p.pin.isLocalPin || p.pin.pinnedAt > 0);\n","import { Comparator } from './';\nimport { StreamVideoParticipant } from '../types';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasVideo,\n} from '../helpers/participantUtils';\n\n/**\n * A comparator which sorts participants by the fact that they are the dominant speaker or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const dominantSpeaker: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isDominantSpeaker && !b.isDominantSpeaker) return -1;\n  if (!a.isDominantSpeaker && b.isDominantSpeaker) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by the fact that they are speaking or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const speaking: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isSpeaking && !b.isSpeaking) return -1;\n  if (!a.isSpeaking && b.isSpeaking) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by screen sharing status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const screenSharing: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (hasScreenShare(a) && !hasScreenShare(b)) return -1;\n  if (!hasScreenShare(a) && hasScreenShare(b)) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by video status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const publishingVideo: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (hasVideo(a) && !hasVideo(b)) return -1;\n  if (!hasVideo(a) && hasVideo(b)) return 1;\n  return 0;\n};\n\n/**\n * A comparator which sorts participants by audio status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const publishingAudio: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (hasAudio(a) && !hasAudio(b)) return -1;\n  if (!hasAudio(a) && hasAudio(b)) return 1;\n  return 0;\n};\n\n/**\n * A comparator which prioritizes participants who are pinned.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const pinned: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.pin && b.pin) {\n    if (!a.pin.isLocalPin && b.pin.isLocalPin) return -1;\n    if (a.pin.isLocalPin && !b.pin.isLocalPin) return 1;\n    if (a.pin.pinnedAt > b.pin.pinnedAt) return -1;\n    if (a.pin.pinnedAt < b.pin.pinnedAt) return 1;\n  }\n\n  if (a.pin && !b.pin) return -1;\n  if (!a.pin && b.pin) return 1;\n\n  return 0;\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific reaction.\n *\n * @param type the reaction type.\n */\nexport const reactionType = (\n  type: string,\n): Comparator<StreamVideoParticipant> => {\n  return (a, b) => {\n    if (a.reaction?.type === type && b.reaction?.type !== type) return -1;\n    if (a.reaction?.type !== type && b.reaction?.type === type) return 1;\n    return 0;\n  };\n};\n\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific role.\n *\n * @param roles the roles to prioritize.\n */\nexport const role =\n  (...roles: string[]): Comparator<StreamVideoParticipant> =>\n  (a, b) => {\n    if (hasAnyRole(a, roles) && !hasAnyRole(b, roles)) return -1;\n    if (!hasAnyRole(a, roles) && hasAnyRole(b, roles)) return 1;\n    return 0;\n  };\n\n/**\n * A comparator which sorts participants by name.\n *\n * @param a the first participant.\n * @param b the second participant.\n */\nexport const name: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.name < b.name) return -1;\n  if (a.name > b.name) return 1;\n  return 0;\n};\n\nconst hasAnyRole = (p: StreamVideoParticipant, roles: string[]) =>\n  (p.roles || []).some((r) => roles.includes(r));\n","import { StreamVideoParticipant, VisibilityState } from '../types';\nimport { combineComparators, conditional } from './comparator';\nimport {\n  dominantSpeaker,\n  pinned,\n  publishingAudio,\n  publishingVideo,\n  reactionType,\n  role,\n  screenSharing,\n  speaking,\n} from './participants';\n\n// a comparator decorator which applies the decorated comparator only if the\n// participant is invisible.\n// This ensures stable sorting when all participants are visible.\nconst ifInvisibleBy = conditional(\n  (a: StreamVideoParticipant, b: StreamVideoParticipant) =>\n    a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE,\n);\n\n/**\n * A comparator that applies the decorated comparator when a participant is\n * either invisible or its visibility state isn't known.\n * For visible participants, it ensures stable sorting.\n */\nconst ifInvisibleOrUnknownBy = conditional(\n  (a: StreamVideoParticipant, b: StreamVideoParticipant) =>\n    a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    a.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE ||\n    b.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN,\n);\n\n/**\n * The default sorting preset.\n */\nexport const defaultSortPreset = combineComparators(\n  pinned,\n  screenSharing,\n  ifInvisibleBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n  // ifInvisibleBy(name),\n);\n\n/**\n * The sorting preset for speaker layout.\n */\nexport const speakerLayoutSortPreset = combineComparators(\n  pinned,\n  screenSharing,\n  dominantSpeaker,\n  ifInvisibleBy(\n    combineComparators(\n      speaking,\n      reactionType('raised-hand'),\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n  // ifInvisibleBy(name),\n);\n\n/**\n * The sorting preset for layouts that don't render all participants but\n * instead, render them in pages.\n */\nexport const paginatedLayoutSortPreset = combineComparators(\n  pinned,\n  ifInvisibleOrUnknownBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n  // ifInvisibleOrUnknownBy(name),\n);\n\n/**\n * The sorting preset for livestreams and audio rooms.\n */\nexport const livestreamOrAudioRoomSortPreset = combineComparators(\n  ifInvisibleBy(\n    combineComparators(\n      dominantSpeaker,\n      speaking,\n      reactionType('raised-hand'),\n      publishingVideo,\n      publishingAudio,\n    ),\n  ),\n  role('admin', 'host', 'speaker'),\n  // name,\n);\n","import {\n  BehaviorSubject,\n  distinctUntilChanged,\n  map,\n  Observable,\n  shareReplay,\n} from 'rxjs';\nimport type { Patch } from './rxUtils';\nimport * as RxUtils from './rxUtils';\nimport { CallingState } from './CallingState';\nimport {\n  type ClosedCaptionsSettings,\n  type StreamVideoParticipant,\n  type StreamVideoParticipantPatch,\n  type StreamVideoParticipantPatches,\n  type SubscriptionChanges,\n  VideoTrackType,\n  VisibilityState,\n} from '../types';\nimport { CallStatsReport } from '../stats';\nimport {\n  BlockedUserEvent,\n  CallClosedCaption,\n  CallIngressResponse,\n  CallMemberAddedEvent,\n  CallMemberRemovedEvent,\n  CallMemberUpdatedEvent,\n  CallMemberUpdatedPermissionEvent,\n  CallReactionEvent,\n  CallResponse,\n  CallSessionParticipantCountsUpdatedEvent,\n  CallSessionParticipantJoinedEvent,\n  CallSessionParticipantLeftEvent,\n  CallSessionResponse,\n  CallSettingsResponse,\n  ClosedCaptionEvent,\n  EgressResponse,\n  MemberResponse,\n  OwnCapability,\n  ThumbnailResponse,\n  UnblockedUserEvent,\n  UpdatedCallPermissionsEvent,\n  UserResponse,\n  VideoEvent,\n} from '../gen/coordinator';\nimport { Timestamp } from '../gen/google/protobuf/timestamp';\nimport { ReconnectDetails } from '../gen/video/sfu/event/events';\nimport {\n  CallState as SfuCallState,\n  Pin,\n  TrackType,\n} from '../gen/video/sfu/models/models';\nimport { Comparator, defaultSortPreset } from '../sorting';\nimport { getLogger } from '../logger';\nimport { hasScreenShare } from '../helpers/participantUtils';\n\n/**\n * Returns the default egress object - when no egress data is available.\n */\nconst defaultEgress: EgressResponse = {\n  broadcasting: false,\n  hls: { playlist_url: '', status: '' },\n  rtmps: [],\n};\n\ntype OrphanedTrack = {\n  id: string;\n  trackLookupPrefix: string;\n  trackType: TrackType;\n  track: MediaStream;\n};\n\n/**\n * Holds the state of the current call.\n * @react You don't have to use this class directly, as we are exposing the state through Hooks.\n */\nexport class CallState {\n  private backstageSubject = new BehaviorSubject<boolean>(true);\n  private blockedUserIdsSubject = new BehaviorSubject<string[]>([]);\n  private createdAtSubject = new BehaviorSubject<Date>(new Date());\n  private endedAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private startsAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private updatedAtSubject = new BehaviorSubject<Date>(new Date());\n  private createdBySubject = new BehaviorSubject<UserResponse | undefined>(\n    undefined,\n  );\n  private customSubject = new BehaviorSubject<Record<string, any>>({});\n  private egressSubject = new BehaviorSubject<EgressResponse | undefined>(\n    undefined,\n  );\n  private ingressSubject = new BehaviorSubject<CallIngressResponse | undefined>(\n    undefined,\n  );\n  private recordingSubject = new BehaviorSubject<boolean>(false);\n  private sessionSubject = new BehaviorSubject<CallSessionResponse | undefined>(\n    undefined,\n  );\n  private settingsSubject = new BehaviorSubject<\n    CallSettingsResponse | undefined\n  >(undefined);\n  private transcribingSubject = new BehaviorSubject<boolean>(false);\n  private captioningSubject = new BehaviorSubject<boolean>(false);\n  private endedBySubject = new BehaviorSubject<UserResponse | undefined>(\n    undefined,\n  );\n  private thumbnailsSubject = new BehaviorSubject<\n    ThumbnailResponse | undefined\n  >(undefined);\n  private membersSubject = new BehaviorSubject<MemberResponse[]>([]);\n  private ownCapabilitiesSubject = new BehaviorSubject<OwnCapability[]>([]);\n  private callingStateSubject = new BehaviorSubject<CallingState>(\n    CallingState.UNKNOWN,\n  );\n  private startedAtSubject = new BehaviorSubject<Date | undefined>(undefined);\n  private participantCountSubject = new BehaviorSubject<number>(0);\n  private anonymousParticipantCountSubject = new BehaviorSubject<number>(0);\n  private participantsSubject = new BehaviorSubject<StreamVideoParticipant[]>(\n    [],\n  );\n  private callStatsReportSubject = new BehaviorSubject<\n    CallStatsReport | undefined\n  >(undefined);\n  private closedCaptionsSubject = new BehaviorSubject<CallClosedCaption[]>([]);\n\n  // These are tracks that were delivered to the Subscriber's onTrack event\n  // that we couldn't associate with a participant yet.\n  // This happens when the participantJoined event hasn't been received yet.\n  // We keep these tracks around until we can associate them with a participant.\n  private orphanedTracks: OrphanedTrack[] = [];\n\n  // Derived state\n\n  /**\n   * The time the call session actually started.\n   * Useful for displaying the call duration.\n   */\n  startedAt$: Observable<Date | undefined>;\n\n  /**\n   * The server-side counted number of participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  participantCount$: Observable<number>;\n\n  /**\n   * The server-side counted number of anonymous participants connected to the current call.\n   * This number excludes the regular participants.\n   */\n  anonymousParticipantCount$: Observable<number>;\n\n  /**\n   * All participants of the current call (this includes the current user and other participants as well).\n   */\n  participants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * Remote participants of the current call (this includes every participant except the logged-in user).\n   */\n  remoteParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * The local participant of the current call (the logged-in user).\n   */\n  localParticipant$: Observable<StreamVideoParticipant | undefined>;\n\n  /**\n   * Pinned participants of the current call.\n   */\n  pinnedParticipants$: Observable<StreamVideoParticipant[]>;\n\n  /**\n   * The currently elected dominant speaker in the current call.\n   */\n  dominantSpeaker$: Observable<StreamVideoParticipant | undefined>;\n\n  /**\n   * Emits true whenever there is an active screen sharing session within\n   * the current call. Useful for displaying a \"screen sharing\" indicator and\n   * switching the layout to a screen sharing layout.\n   *\n   * The actual screen sharing track isn't exposed here, but can be retrieved\n   * from the list of call participants. We also don't want to be limiting\n   * to the number of share screen tracks are displayed in a call.\n   */\n  hasOngoingScreenShare$: Observable<boolean>;\n\n  /**\n   * The latest stats report of the current call.\n   * When stats gathering is enabled, this observable will emit a new value\n   * at a regular (configurable) interval.\n   *\n   * Consumers of this observable can implement their own batching logic\n   * in case they want to show historical stats data.\n   */\n  callStatsReport$: Observable<CallStatsReport | undefined>;\n\n  /**\n   * The list of members in the current call.\n   */\n  members$: Observable<MemberResponse[]>;\n\n  /**\n   * The list of capabilities of the current user.\n   */\n  ownCapabilities$: Observable<OwnCapability[]>;\n\n  /**\n   * The calling state.\n   */\n  callingState$: Observable<CallingState>;\n\n  /**\n   * The backstage state.\n   */\n  backstage$: Observable<boolean>;\n\n  /**\n   * Will provide the list of blocked user IDs.\n   */\n  blockedUserIds$: Observable<string[]>;\n\n  /**\n   * Will provide the time when this call has been created.\n   */\n  createdAt$: Observable<Date>;\n\n  /**\n   * Will provide the time when this call has been ended.\n   */\n  endedAt$: Observable<Date | undefined>;\n\n  /**\n   * Will provide the time when this call has been scheduled to start.\n   */\n  startsAt$: Observable<Date | undefined>;\n\n  /**\n   * Will provide the time when this call has been updated.\n   */\n  updatedAt$: Observable<Date>;\n\n  /**\n   * Will provide the user who created this call.\n   */\n  createdBy$: Observable<UserResponse | undefined>;\n\n  /**\n   * Will provide the custom data of this call.\n   */\n  custom$: Observable<Record<string, any>>;\n\n  /**\n   * Will provide the egress data of this call.\n   */\n  egress$: Observable<EgressResponse | undefined>;\n\n  /**\n   * Will provide the ingress data of this call.\n   */\n  ingress$: Observable<CallIngressResponse | undefined>;\n\n  /**\n   * Will provide the recording state of this call.\n   */\n  recording$: Observable<boolean>;\n\n  /**\n   * Will provide the session data of this call.\n   */\n  session$: Observable<CallSessionResponse | undefined>;\n\n  /**\n   * Will provide the settings of this call.\n   */\n  settings$: Observable<CallSettingsResponse | undefined>;\n\n  /**\n   * Will provide the transcribing state of this call.\n   */\n  transcribing$: Observable<boolean>;\n\n  /**\n   * Will provide the closed captioning state of this call.\n   */\n  captioning$: Observable<boolean>;\n\n  /**\n   * Will provide the user who ended this call.\n   */\n  endedBy$: Observable<UserResponse | undefined>;\n\n  /**\n   * Will provide the thumbnails of this call.\n   */\n  thumbnails$: Observable<ThumbnailResponse | undefined>;\n\n  /**\n   * The queue of closed captions.\n   */\n  closedCaptions$: Observable<CallClosedCaption[]>;\n\n  readonly logger = getLogger(['CallState']);\n\n  /**\n   * A list of comparators that are used to sort the participants.\n   */\n  private sortParticipantsBy = defaultSortPreset;\n\n  /**\n   * The closed captions configuration.\n   */\n  private closedCaptionsSettings: ClosedCaptionsSettings | undefined;\n  private closedCaptionsTasks = new Map<string, NodeJS.Timeout>();\n\n  private readonly eventHandlers: {\n    [EventType in VideoEvent['type']]:\n      | ((event: Extract<VideoEvent, { type: EventType }>) => void)\n      | undefined;\n  };\n\n  /**\n   * Creates a new instance of the CallState class.\n   *\n   */\n  constructor() {\n    this.participants$ = this.participantsSubject.asObservable().pipe(\n      // maintain stable-sort by mutating the participants stored\n      // in the original subject\n      map((ps) => ps.sort(this.sortParticipantsBy)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.localParticipant$ = this.participants$.pipe(\n      map((participants) => participants.find((p) => p.isLocalParticipant)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.remoteParticipants$ = this.participants$.pipe(\n      map((participants) => participants.filter((p) => !p.isLocalParticipant)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.pinnedParticipants$ = this.participants$.pipe(\n      map((participants) => participants.filter((p) => !!p.pin)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.dominantSpeaker$ = this.participants$.pipe(\n      map((participants) => participants.find((p) => p.isDominantSpeaker)),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    this.hasOngoingScreenShare$ = this.participants$.pipe(\n      map((participants) => participants.some((p) => hasScreenShare(p))),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    // dates\n    this.createdAt$ = this.createdAtSubject.asObservable();\n    this.endedAt$ = this.endedAtSubject.asObservable();\n    this.startsAt$ = this.startsAtSubject.asObservable();\n    this.startedAt$ = this.startedAtSubject.asObservable();\n    this.updatedAt$ = this.updatedAtSubject.asObservable();\n\n    this.callStatsReport$ = this.callStatsReportSubject.asObservable();\n    this.members$ = this.membersSubject.asObservable();\n\n    // complex objects should work as streams of data\n    this.createdBy$ = this.createdBySubject.asObservable();\n    this.custom$ = this.customSubject.asObservable();\n    this.egress$ = this.egressSubject.asObservable();\n    this.ingress$ = this.ingressSubject.asObservable();\n    this.session$ = this.sessionSubject.asObservable();\n    this.settings$ = this.settingsSubject.asObservable();\n    this.endedBy$ = this.endedBySubject.asObservable();\n    this.thumbnails$ = this.thumbnailsSubject.asObservable();\n    this.closedCaptions$ = this.closedCaptionsSubject.asObservable();\n\n    /**\n     * Performs shallow comparison of two arrays.\n     * Expects primitive values: [1, 2, 3] is equal to [2, 1, 3].\n     */\n    const isShallowEqual = <T>(a: Array<T>, b: Array<T>): boolean => {\n      if (a.length !== b.length) return false;\n      for (const item of a) if (!b.includes(item)) return false;\n      for (const item of b) if (!a.includes(item)) return false;\n      return true;\n    };\n\n    /**\n     * Creates an Observable from the given subject by piping to the\n     * `distinctUntilChanged()` operator.\n     */\n    const duc = <T>(\n      subject: BehaviorSubject<T>,\n      comparator?: (a: T, b: T) => boolean,\n    ): Observable<T> =>\n      subject.asObservable().pipe(distinctUntilChanged(comparator));\n\n    // primitive values should only emit once the value they hold changes\n    this.anonymousParticipantCount$ = duc(\n      this.anonymousParticipantCountSubject,\n    );\n    this.blockedUserIds$ = duc(this.blockedUserIdsSubject, isShallowEqual);\n    this.backstage$ = duc(this.backstageSubject);\n    this.callingState$ = duc(this.callingStateSubject);\n    this.ownCapabilities$ = duc(this.ownCapabilitiesSubject, isShallowEqual);\n    this.participantCount$ = duc(this.participantCountSubject);\n    this.recording$ = duc(this.recordingSubject);\n    this.transcribing$ = duc(this.transcribingSubject);\n    this.captioning$ = duc(this.captioningSubject);\n\n    this.eventHandlers = {\n      // these events are not updating the call state:\n      'call.frame_recording_ready': undefined,\n      'call.permission_request': undefined,\n      'call.recording_ready': undefined,\n      'call.rtmp_broadcast_failed': undefined,\n      'call.rtmp_broadcast_started': undefined,\n      'call.rtmp_broadcast_stopped': undefined,\n      'call.transcription_ready': undefined,\n      'call.user_muted': undefined,\n      'connection.error': undefined,\n      'connection.ok': undefined,\n      'health.check': undefined,\n      'user.updated': undefined,\n      custom: undefined,\n\n      // events that update call state:\n      'call.accepted': (e) => this.updateFromCallResponse(e.call),\n      'call.blocked_user': this.blockUser,\n      'call.closed_caption': this.updateFromClosedCaptions,\n      'call.closed_captions_failed': () => {\n        this.setCurrentValue(this.captioningSubject, false);\n      },\n      'call.closed_captions_started': () => {\n        this.setCurrentValue(this.captioningSubject, true);\n      },\n      'call.closed_captions_stopped': () => {\n        this.setCurrentValue(this.captioningSubject, false);\n      },\n      'call.created': (e) => this.updateFromCallResponse(e.call),\n      'call.deleted': (e) => this.updateFromCallResponse(e.call),\n      'call.ended': (e) => {\n        this.updateFromCallResponse(e.call);\n        this.setCurrentValue(this.endedBySubject, e.user);\n      },\n      'call.frame_recording_failed': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.frame_recording_started': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.frame_recording_stopped': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.hls_broadcasting_failed': this.updateFromHLSBroadcastingFailed,\n      'call.hls_broadcasting_started': (e) => {\n        this.updateFromCallResponse(e.call);\n      },\n      'call.hls_broadcasting_stopped': this.updateFromHLSBroadcastStopped,\n      'call.live_started': (e) => this.updateFromCallResponse(e.call),\n      'call.member_added': this.updateFromMemberAdded,\n      'call.member_removed': this.updateFromMemberRemoved,\n      'call.member_updated_permission': this.updateMembers,\n      'call.member_updated': this.updateMembers,\n      'call.notification': (e) => {\n        this.updateFromCallResponse(e.call);\n        this.setMembers(e.members);\n      },\n      'call.permissions_updated': this.updateOwnCapabilities,\n      'call.reaction_new': this.updateParticipantReaction,\n      'call.recording_started': () =>\n        this.setCurrentValue(this.recordingSubject, true),\n      'call.recording_stopped': () =>\n        this.setCurrentValue(this.recordingSubject, false),\n      'call.recording_failed': () =>\n        this.setCurrentValue(this.recordingSubject, false),\n      'call.rejected': (e) => this.updateFromCallResponse(e.call),\n      'call.ring': (e) => this.updateFromCallResponse(e.call),\n      'call.missed': (e) => this.updateFromCallResponse(e.call),\n      'call.session_ended': (e) => this.updateFromCallResponse(e.call),\n      'call.session_participant_count_updated':\n        this.updateFromSessionParticipantCountUpdate,\n      'call.session_participant_joined':\n        this.updateFromSessionParticipantJoined,\n      'call.session_participant_left': this.updateFromSessionParticipantLeft,\n      'call.session_started': (e) => this.updateFromCallResponse(e.call),\n      'call.transcription_started': () => {\n        this.setCurrentValue(this.transcribingSubject, true);\n      },\n      'call.transcription_stopped': () => {\n        this.setCurrentValue(this.transcribingSubject, false);\n      },\n      'call.transcription_failed': () => {\n        this.setCurrentValue(this.transcribingSubject, false);\n      },\n      'call.unblocked_user': this.unblockUser,\n      'call.updated': (e) => this.updateFromCallResponse(e.call),\n    };\n  }\n\n  /**\n   * Runs the cleanup tasks.\n   */\n  dispose = () => {\n    for (const [ccKey, taskId] of this.closedCaptionsTasks.entries()) {\n      clearTimeout(taskId);\n      this.closedCaptionsTasks.delete(ccKey);\n    }\n  };\n\n  /**\n   * Sets the list of criteria that are used to sort the participants.\n   * To disable sorting, you can pass `noopComparator()`.\n   *\n   * @param comparator the comparator to use to sort the participants.\n   */\n  setSortParticipantsBy = (comparator: Comparator<StreamVideoParticipant>) => {\n    this.sortParticipantsBy = comparator;\n    // trigger re-sorting of participants\n    this.setCurrentValue(this.participantsSubject, (ps) => ps);\n  };\n\n  /**\n   * Gets the current value of an observable, or undefined if the observable has\n   * not emitted a value yet.\n   *\n   * @param observable$ the observable to get the value from.\n   */\n  getCurrentValue = RxUtils.getCurrentValue;\n\n  /**\n   * Updates the value of the provided Subject.\n   * An `update` can either be a new value or a function which takes\n   * the current value and returns a new value.\n   *\n   * @internal\n   *\n   * @param subject the subject to update.\n   * @param update the update to apply to the subject.\n   * @return the updated value.\n   */\n  setCurrentValue = RxUtils.setCurrentValue;\n\n  /**\n   * The server-side counted number of participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  get participantCount() {\n    return this.getCurrentValue(this.participantCount$);\n  }\n\n  /**\n   * Sets the number of participants in the current call.\n   *\n   * @internal\n   * @param count the number of participants.\n   */\n  setParticipantCount = (count: Patch<number>) => {\n    return this.setCurrentValue(this.participantCountSubject, count);\n  };\n\n  /**\n   * The time the call session actually started.\n   * Useful for displaying the call duration.\n   */\n  get startedAt() {\n    return this.getCurrentValue(this.startedAt$);\n  }\n\n  /**\n   * Sets the time the call session actually started.\n   *\n   * @internal\n   * @param startedAt the time the call session actually started.\n   */\n  setStartedAt = (startedAt: Patch<Date | undefined>) => {\n    return this.setCurrentValue(this.startedAtSubject, startedAt);\n  };\n\n  /**\n   * Returns whether closed captions are enabled in the current call.\n   */\n  get captioning() {\n    return this.getCurrentValue(this.captioning$);\n  }\n\n  /**\n   * Sets the closed captioning state of the current call.\n   *\n   * @internal\n   * @param captioning the closed captioning state.\n   */\n  setCaptioning = (captioning: boolean) => {\n    return RxUtils.updateValue(this.captioningSubject, captioning);\n  };\n\n  /**\n   * The server-side counted number of anonymous participants connected to the current call.\n   * This number includes the anonymous participants as well.\n   */\n  get anonymousParticipantCount() {\n    return this.getCurrentValue(this.anonymousParticipantCount$);\n  }\n\n  /**\n   * Sets the number of anonymous participants in the current call.\n   *\n   * @internal\n   * @param count the number of anonymous participants.\n   */\n  setAnonymousParticipantCount = (count: Patch<number>) => {\n    return this.setCurrentValue(this.anonymousParticipantCountSubject, count);\n  };\n\n  /**\n   * The list of participants in the current call.\n   */\n  get participants() {\n    return this.getCurrentValue(this.participants$);\n  }\n\n  /**\n   * Sets the list of participants in the current call.\n   *\n   * @internal\n   *\n   * @param participants the list of participants.\n   */\n  setParticipants = (participants: Patch<StreamVideoParticipant[]>) => {\n    return this.setCurrentValue(this.participantsSubject, participants);\n  };\n\n  /**\n   * The local participant in the current call.\n   */\n  get localParticipant() {\n    return this.getCurrentValue(this.localParticipant$);\n  }\n\n  /**\n   * The list of remote participants in the current call.\n   */\n  get remoteParticipants() {\n    return this.getCurrentValue(this.remoteParticipants$);\n  }\n\n  /**\n   * The dominant speaker in the current call.\n   */\n  get dominantSpeaker() {\n    return this.getCurrentValue(this.dominantSpeaker$);\n  }\n\n  /**\n   * The list of pinned participants in the current call.\n   */\n  get pinnedParticipants() {\n    return this.getCurrentValue(this.pinnedParticipants$);\n  }\n\n  /**\n   * Tell if there is an ongoing screen share in this call.\n   */\n  get hasOngoingScreenShare() {\n    return this.getCurrentValue(this.hasOngoingScreenShare$);\n  }\n\n  /**\n   * The calling state.\n   */\n  get callingState() {\n    return this.getCurrentValue(this.callingState$);\n  }\n\n  /**\n   * Sets the calling state.\n   *\n   * @internal\n   * @param state the new calling state.\n   */\n  setCallingState = (state: Patch<CallingState>) => {\n    return this.setCurrentValue(this.callingStateSubject, state);\n  };\n\n  /**\n   * The call stats report.\n   */\n  get callStatsReport() {\n    return this.getCurrentValue(this.callStatsReport$);\n  }\n\n  /**\n   * Sets the call stats report.\n   *\n   * @internal\n   * @param report the report to set.\n   */\n  setCallStatsReport = (report: Patch<CallStatsReport | undefined>) => {\n    return this.setCurrentValue(this.callStatsReportSubject, report);\n  };\n\n  /**\n   * The members of the current call.\n   */\n  get members() {\n    return this.getCurrentValue(this.members$);\n  }\n\n  /**\n   * Sets the members of the current call.\n   *\n   * @internal\n   * @param members the members to set.\n   */\n  setMembers = (members: Patch<MemberResponse[]>) => {\n    this.setCurrentValue(this.membersSubject, members);\n  };\n\n  /**\n   * The capabilities of the current user for the current call.\n   */\n  get ownCapabilities() {\n    return this.getCurrentValue(this.ownCapabilities$);\n  }\n\n  /**\n   * Sets the own capabilities.\n   *\n   * @internal\n   * @param capabilities the capabilities to set.\n   */\n  setOwnCapabilities = (capabilities: Patch<OwnCapability[]>) => {\n    return this.setCurrentValue(this.ownCapabilitiesSubject, capabilities);\n  };\n\n  /**\n   * The backstage state.\n   */\n  get backstage() {\n    return this.getCurrentValue(this.backstage$);\n  }\n\n  /**\n   * Sets the backstage state.\n   * @param backstage the backstage state.\n   */\n  setBackstage = (backstage: Patch<boolean>) => {\n    return this.setCurrentValue(this.backstageSubject, backstage);\n  };\n\n  /**\n   * Will provide the list of blocked user IDs.\n   */\n  get blockedUserIds() {\n    return this.getCurrentValue(this.blockedUserIds$);\n  }\n\n  /**\n   * Will provide the time when this call has been created.\n   */\n  get createdAt() {\n    return this.getCurrentValue(this.createdAt$);\n  }\n\n  /**\n   * Will provide the time when this call has been ended.\n   */\n  get endedAt() {\n    return this.getCurrentValue(this.endedAt$);\n  }\n\n  /**\n   * Sets the time when this call has been ended.\n   * @param endedAt the time when this call has been ended.\n   */\n  setEndedAt = (endedAt: Patch<Date | undefined>) => {\n    return this.setCurrentValue(this.endedAtSubject, endedAt);\n  };\n\n  /**\n   * Will provide the time when this call has been scheduled to start.\n   */\n  get startsAt() {\n    return this.getCurrentValue(this.startsAt$);\n  }\n\n  /**\n   * Will provide the time when this call has been updated.\n   */\n  get updatedAt() {\n    return this.getCurrentValue(this.updatedAt$);\n  }\n\n  /**\n   * Will provide the user who created this call.\n   */\n  get createdBy() {\n    return this.getCurrentValue(this.createdBy$);\n  }\n\n  /**\n   * Will provide the custom data of this call.\n   */\n  get custom() {\n    return this.getCurrentValue(this.custom$);\n  }\n\n  /**\n   * Will provide the egress data of this call.\n   */\n  get egress() {\n    return this.getCurrentValue(this.egress$);\n  }\n\n  /**\n   * Will provide the ingress data of this call.\n   */\n  get ingress() {\n    return this.getCurrentValue(this.ingress$);\n  }\n\n  /**\n   * Will provide the recording state of this call.\n   */\n  get recording() {\n    return this.getCurrentValue(this.recording$);\n  }\n\n  /**\n   * Will provide the session data of this call.\n   */\n  get session() {\n    return this.getCurrentValue(this.session$);\n  }\n\n  /**\n   * Will provide the settings of this call.\n   */\n  get settings() {\n    return this.getCurrentValue(this.settings$);\n  }\n\n  /**\n   * Will provide the transcribing state of this call.\n   */\n  get transcribing() {\n    return this.getCurrentValue(this.transcribing$);\n  }\n\n  /**\n   * Will provide the user who ended this call.\n   */\n  get endedBy() {\n    return this.getCurrentValue(this.endedBy$);\n  }\n\n  /**\n   * Will provide the thumbnails of this call, if enabled in the call settings.\n   */\n  get thumbnails() {\n    return this.getCurrentValue(this.thumbnails$);\n  }\n\n  /**\n   * Returns the current queue of closed captions.\n   */\n  get closedCaptions() {\n    return this.getCurrentValue(this.closedCaptions$);\n  }\n\n  /**\n   * Will try to find the participant with the given sessionId in the current call.\n   *\n   * @param sessionId the sessionId of the participant to find.\n   * @returns the participant with the given sessionId or undefined if not found.\n   */\n  findParticipantBySessionId = (\n    sessionId: string,\n  ): StreamVideoParticipant | undefined => {\n    return this.participants.find((p) => p.sessionId === sessionId);\n  };\n\n  /**\n   * Returns a new lookup table of participants indexed by their session ID.\n   */\n  getParticipantLookupBySessionId = () => {\n    return this.participants.reduce<{\n      [sessionId: string]: StreamVideoParticipant | undefined;\n    }>((lookupTable, participant) => {\n      lookupTable[participant.sessionId] = participant;\n      return lookupTable;\n    }, {});\n  };\n\n  /**\n   * Updates a participant in the current call identified by the given `sessionId`.\n   * If the participant can't be found, this operation is no-op.\n   *\n   * @internal\n   *\n   * @param sessionId the session ID of the participant to update.\n   * @param patch the patch to apply to the participant.\n   * @returns the updated participant or `undefined` if the participant couldn't be found.\n   */\n  updateParticipant = (\n    sessionId: string,\n    patch:\n      | StreamVideoParticipantPatch\n      | ((p: StreamVideoParticipant) => StreamVideoParticipantPatch),\n  ) => {\n    const participant = this.findParticipantBySessionId(sessionId);\n    if (!participant) {\n      this.logger('warn', `Participant with sessionId ${sessionId} not found`);\n      return;\n    }\n\n    const thePatch = typeof patch === 'function' ? patch(participant) : patch;\n    const updatedParticipant: StreamVideoParticipant = {\n      ...participant,\n      ...thePatch,\n    };\n    return this.setParticipants((participants) =>\n      participants.map((p) =>\n        p.sessionId === sessionId ? updatedParticipant : p,\n      ),\n    );\n  };\n\n  /**\n   * Updates a participant in the current call identified by the given `sessionId`.\n   * If a participant with matching `sessionId` can't be found, the provided\n   * `participant` is added to the list of participants.\n   *\n   * @param sessionId the session ID of the participant to update.\n   * @param participant the participant to update or add.\n   */\n  updateOrAddParticipant = (\n    sessionId: string,\n    participant: StreamVideoParticipant,\n  ) => {\n    return this.setParticipants((participants) => {\n      let add = true;\n      const nextParticipants = participants.map((p) => {\n        if (p.sessionId === sessionId) {\n          add = false;\n          return {\n            ...p,\n            ...participant,\n          };\n        }\n        return p;\n      });\n      if (add) nextParticipants.push(participant);\n      return nextParticipants;\n    });\n  };\n\n  /**\n   * Updates all participants in the current call whose session ID is in the given `sessionIds`.\n   * If no patches are provided, this operation is no-op.\n   *\n   * @internal\n   *\n   * @param patch the patch to apply to the participants.\n   * @returns all participants, with all patch applied.\n   */\n  updateParticipants = (patch: StreamVideoParticipantPatches) => {\n    if (Object.keys(patch).length === 0) return this.participants;\n    return this.setParticipants((participants) =>\n      participants.map((p) => {\n        const thePatch = patch[p.sessionId];\n        if (thePatch) {\n          return {\n            ...p,\n            ...thePatch,\n          };\n        }\n        return p;\n      }),\n    );\n  };\n\n  /**\n   * Update track subscription configuration for one or more participants.\n   * You have to create a subscription for each participant for all the different kinds of tracks you want to receive.\n   * You can only subscribe for tracks after the participant started publishing the given kind of track.\n   *\n   * @param trackType the kind of subscription to update.\n   * @param changes the list of subscription changes to do.\n   */\n  updateParticipantTracks = (\n    trackType: VideoTrackType,\n    changes: SubscriptionChanges,\n  ) => {\n    return this.updateParticipants(\n      Object.entries(changes).reduce<StreamVideoParticipantPatches>(\n        (acc, [sessionId, change]) => {\n          if (change.dimension) {\n            change.dimension.height = Math.ceil(change.dimension.height);\n            change.dimension.width = Math.ceil(change.dimension.width);\n          }\n          const prop: keyof StreamVideoParticipant | undefined =\n            trackType === 'videoTrack'\n              ? 'videoDimension'\n              : trackType === 'screenShareTrack'\n                ? 'screenShareDimension'\n                : undefined;\n          if (prop) {\n            acc[sessionId] = {\n              [prop]: change.dimension,\n            };\n          }\n          return acc;\n        },\n        {},\n      ),\n    );\n  };\n\n  /**\n   * Updates the call state with the data received from the server.\n   *\n   * @internal\n   *\n   * @param event the video event that our backend sent us.\n   */\n  updateFromEvent = (event: VideoEvent) => {\n    const update = this.eventHandlers[event.type];\n    if (update) {\n      update(event as any);\n    }\n  };\n\n  /**\n   * Updates the participant pinned state with server side pinning data.\n   *\n   * @param pins the latest pins from the server.\n   */\n  setServerSidePins = (pins: Pin[]) => {\n    const pinsLookup = pins.reduce<{ [sessionId: string]: number | undefined }>(\n      (lookup, pin) => {\n        lookup[pin.sessionId] = Date.now();\n        return lookup;\n      },\n      {},\n    );\n\n    return this.setParticipants((participants) =>\n      participants.map((participant) => {\n        const serverSidePinnedAt = pinsLookup[participant.sessionId];\n        // the participant is newly pinned\n        if (serverSidePinnedAt) {\n          return {\n            ...participant,\n            pin: {\n              isLocalPin: false,\n              pinnedAt: serverSidePinnedAt,\n            },\n          };\n        }\n        // the participant is no longer pinned server side\n        // we need to reset the pin\n        if (participant.pin && !participant.pin.isLocalPin) {\n          return {\n            ...participant,\n            pin: undefined,\n          };\n        }\n        // no changes to be applied\n        return participant;\n      }),\n    );\n  };\n\n  /**\n   * Adds an orphaned track to the call state.\n   *\n   * @internal\n   *\n   * @param orphanedTrack the orphaned track to add.\n   */\n  registerOrphanedTrack = (orphanedTrack: OrphanedTrack) => {\n    this.orphanedTracks.push(orphanedTrack);\n  };\n\n  /**\n   * Removes an orphaned track from the call state.\n   *\n   * @internal\n   *\n   * @param id the ID of the orphaned track to remove.\n   */\n  removeOrphanedTrack = (id: string) => {\n    this.orphanedTracks = this.orphanedTracks.filter((o) => o.id !== id);\n  };\n\n  /**\n   * Takes all orphaned tracks with the given track lookup prefix.\n   * All orphaned tracks with the given track lookup prefix are removed from the call state.\n   *\n   * @internal\n   *\n   * @param trackLookupPrefix the track lookup prefix to match the orphaned tracks by.\n   */\n  takeOrphanedTracks = (trackLookupPrefix: string): OrphanedTrack[] => {\n    const orphans = this.orphanedTracks.filter(\n      (orphan) => orphan.trackLookupPrefix === trackLookupPrefix,\n    );\n    if (orphans.length > 0) {\n      this.orphanedTracks = this.orphanedTracks.filter(\n        (orphan) => orphan.trackLookupPrefix !== trackLookupPrefix,\n      );\n    }\n    return orphans;\n  };\n\n  /**\n   * Updates the closed captions settings.\n   *\n   * @param config the new closed captions settings.\n   */\n  updateClosedCaptionSettings = (config: Partial<ClosedCaptionsSettings>) => {\n    this.closedCaptionsSettings = { ...this.closedCaptionsSettings, ...config };\n  };\n\n  /**\n   * Updates the call state with the data received from the server.\n   *\n   * @internal\n   *\n   * @param call the call response from the server.\n   */\n  updateFromCallResponse = (call: CallResponse) => {\n    this.setBackstage(call.backstage);\n    this.setCurrentValue(this.blockedUserIdsSubject, call.blocked_user_ids);\n    this.setCurrentValue(this.createdAtSubject, new Date(call.created_at));\n    this.setCurrentValue(this.updatedAtSubject, new Date(call.updated_at));\n    this.setCurrentValue(\n      this.startsAtSubject,\n      call.starts_at ? new Date(call.starts_at) : undefined,\n    );\n    this.setEndedAt(call.ended_at ? new Date(call.ended_at) : undefined);\n    this.setCurrentValue(this.createdBySubject, call.created_by);\n    this.setCurrentValue(this.customSubject, call.custom);\n    this.setCurrentValue(this.egressSubject, call.egress);\n    this.setCurrentValue(this.ingressSubject, call.ingress);\n    this.setCurrentValue(this.recordingSubject, call.recording);\n    const s = this.setCurrentValue(this.sessionSubject, call.session);\n    this.updateParticipantCountFromSession(s);\n    this.setCurrentValue(this.settingsSubject, call.settings);\n    this.setCurrentValue(this.transcribingSubject, call.transcribing);\n    this.setCurrentValue(this.captioningSubject, call.captioning);\n    this.setCurrentValue(this.thumbnailsSubject, call.thumbnails);\n  };\n\n  /**\n   * Updates the call state with the data received from the SFU server.\n   *\n   * @internal\n   *\n   * @param callState the call state from the SFU server.\n   * @param currentSessionId the session ID of the current user.\n   * @param reconnectDetails optional reconnect details.\n   */\n  updateFromSfuCallState = (\n    callState: SfuCallState,\n    currentSessionId: string,\n    reconnectDetails?: ReconnectDetails,\n  ) => {\n    const { participants, participantCount, startedAt, pins } = callState;\n    const localPublishedTracks =\n      reconnectDetails?.announcedTracks.map((t) => t.trackType) ?? [];\n    this.setParticipants(() => {\n      const participantLookup = this.getParticipantLookupBySessionId();\n      return participants.map<StreamVideoParticipant>((p) => {\n        // We need to preserve the local state of the participant\n        // (e.g. videoDimension, visibilityState, pinnedAt, etc.)\n        // as it doesn't exist on the server.\n        const existingParticipant = participantLookup[p.sessionId];\n        const isLocalParticipant = p.sessionId === currentSessionId;\n        return Object.assign({}, existingParticipant, p, {\n          isLocalParticipant,\n          publishedTracks: isLocalParticipant\n            ? localPublishedTracks\n            : p.publishedTracks,\n          viewportVisibilityState:\n            existingParticipant?.viewportVisibilityState ?? {\n              videoTrack: VisibilityState.UNKNOWN,\n              screenShareTrack: VisibilityState.UNKNOWN,\n            },\n        } satisfies Partial<StreamVideoParticipant>);\n      });\n    });\n\n    this.setParticipantCount(participantCount?.total || 0);\n    this.setAnonymousParticipantCount(participantCount?.anonymous || 0);\n    this.setStartedAt(startedAt ? Timestamp.toDate(startedAt) : new Date());\n    this.setServerSidePins(pins);\n  };\n\n  private updateFromMemberRemoved = (event: CallMemberRemovedEvent) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) =>\n      members.filter((m) => event.members.indexOf(m.user_id) === -1),\n    );\n  };\n\n  private updateFromMemberAdded = (event: CallMemberAddedEvent) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) => [\n      ...members,\n      ...event.members,\n    ]);\n  };\n\n  private updateFromHLSBroadcastStopped = () => {\n    this.setCurrentValue(this.egressSubject, (egress = defaultEgress) => ({\n      ...egress,\n      broadcasting: false,\n      hls: {\n        ...egress.hls!,\n        status: '',\n      },\n    }));\n  };\n\n  private updateFromHLSBroadcastingFailed = () => {\n    this.setCurrentValue(this.egressSubject, (egress = defaultEgress) => ({\n      ...egress,\n      broadcasting: false,\n      hls: {\n        ...egress.hls!,\n        status: '',\n      },\n    }));\n  };\n\n  private updateParticipantCountFromSession = (\n    session: CallSessionResponse | undefined,\n  ) => {\n    // when in JOINED state, we should use the participant count coming through\n    // the SFU healthcheck event, as it's more accurate.\n    if (!session || this.callingState === CallingState.JOINED) return;\n    const byRoleCount = Object.values(\n      session.participants_count_by_role,\n    ).reduce((total, countByRole) => total + countByRole, 0);\n    const participantCount = Math.max(byRoleCount, session.participants.length);\n    this.setParticipantCount(participantCount);\n    this.setAnonymousParticipantCount(session.anonymous_participant_count || 0);\n  };\n\n  private updateFromSessionParticipantCountUpdate = (\n    event: CallSessionParticipantCountsUpdatedEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      return {\n        ...session,\n        anonymous_participant_count: event.anonymous_participant_count,\n        participants_count_by_role: event.participants_count_by_role,\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateFromSessionParticipantLeft = (\n    event: CallSessionParticipantLeftEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      const { participants, participants_count_by_role } = session;\n      const { user, user_session_id } = event.participant;\n      return {\n        ...session,\n        participants: participants.filter(\n          (p) => p.user_session_id !== user_session_id,\n        ),\n        participants_count_by_role: {\n          ...participants_count_by_role,\n          [user.role]: Math.max(\n            0,\n            (participants_count_by_role[user.role] || 0) - 1,\n          ),\n        },\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateFromSessionParticipantJoined = (\n    event: CallSessionParticipantJoinedEvent,\n  ) => {\n    const s = this.setCurrentValue(this.sessionSubject, (session) => {\n      if (!session) return session;\n      const { participants, participants_count_by_role } = session;\n      const { user, user_session_id } = event.participant;\n      // It could happen that the backend delivers the same participant more than once.\n      // Once with the call.session_started event and once again with the\n      // call.session_participant_joined event. In this case,\n      // we should update the existing participant and prevent duplicating it.\n      let shouldInsertParticipant = true;\n      const updatedParticipants = participants.map((p) => {\n        if (p.user_session_id === user_session_id) {\n          shouldInsertParticipant = false;\n          return event.participant;\n        }\n        return p;\n      });\n      if (shouldInsertParticipant) {\n        // this is a new array, we can safely push the new participant\n        updatedParticipants.push(event.participant);\n      }\n\n      // If we are updating an existing participant, we don't want to increment\n      // the participant_by_role count.\n      const increment = shouldInsertParticipant ? 1 : 0;\n      return {\n        ...session,\n        participants: updatedParticipants,\n        participants_count_by_role: {\n          ...participants_count_by_role,\n          [user.role]: (participants_count_by_role[user.role] || 0) + increment,\n        },\n      };\n    });\n    this.updateParticipantCountFromSession(s);\n  };\n\n  private updateMembers = (\n    event: CallMemberUpdatedEvent | CallMemberUpdatedPermissionEvent,\n  ) => {\n    this.updateFromCallResponse(event.call);\n    this.setCurrentValue(this.membersSubject, (members) =>\n      members.map((member) => {\n        const memberUpdate = event.members.find(\n          (m) => m.user_id === member.user_id,\n        );\n        return memberUpdate ? memberUpdate : member;\n      }),\n    );\n  };\n\n  private updateParticipantReaction = (event: CallReactionEvent) => {\n    const { user, custom, type, emoji_code } = event.reaction;\n    this.setParticipants((participants) => {\n      return participants.map((p) => {\n        // skip if the reaction is not for this participant\n        if (p.userId !== user.id) return p;\n        // update the participant with the new reaction\n        return {\n          ...p,\n          reaction: {\n            type,\n            emoji_code,\n            custom,\n          },\n        };\n      });\n    });\n  };\n\n  private unblockUser = (event: UnblockedUserEvent) => {\n    this.setCurrentValue(this.blockedUserIdsSubject, (current) => {\n      if (!current) return current;\n      return current.filter((id) => id !== event.user.id);\n    });\n  };\n\n  private blockUser = (event: BlockedUserEvent) => {\n    this.setCurrentValue(this.blockedUserIdsSubject, (current) => [\n      ...(current || []),\n      event.user.id,\n    ]);\n  };\n\n  private updateOwnCapabilities = (event: UpdatedCallPermissionsEvent) => {\n    if (event.user.id === this.localParticipant?.userId) {\n      this.setCurrentValue(this.ownCapabilitiesSubject, event.own_capabilities);\n    }\n  };\n\n  private updateFromClosedCaptions = (event: ClosedCaptionEvent) => {\n    this.setCurrentValue(this.closedCaptionsSubject, (queue) => {\n      const { closed_caption } = event;\n\n      const keyOf = (c: CallClosedCaption) => `${c.speaker_id}/${c.start_time}`;\n      const currentKey = keyOf(closed_caption);\n\n      const duplicate = queue.some((caption) => keyOf(caption) === currentKey);\n      if (duplicate) return queue;\n\n      const nextQueue = [...queue, closed_caption];\n\n      const { visibilityDurationMs = 2700, maxVisibleCaptions = 2 } =\n        this.closedCaptionsSettings || {};\n      // schedule the removal of the closed caption after the retention time\n      if (visibilityDurationMs > 0) {\n        const taskId = setTimeout(() => {\n          this.setCurrentValue(this.closedCaptionsSubject, (captions) =>\n            captions.filter((caption) => caption !== closed_caption),\n          );\n          this.closedCaptionsTasks.delete(currentKey);\n        }, visibilityDurationMs);\n        this.closedCaptionsTasks.set(currentKey, taskId);\n\n        // cancel the cleanup tasks for the closed captions that are no longer in the queue\n        for (let i = 0; i < nextQueue.length - maxVisibleCaptions; i++) {\n          const key = keyOf(nextQueue[i]);\n          const task = this.closedCaptionsTasks.get(key);\n          clearTimeout(task);\n          this.closedCaptionsTasks.delete(key);\n        }\n      }\n\n      // trim the queue\n      return nextQueue.slice(-maxVisibleCaptions);\n    });\n  };\n}\n","import { ClientDetails, Sdk, SdkType } from '../gen/video/sfu/models/models';\n\n/**\n * Flatten the stats report into an array of stats objects.\n *\n * @param report the report to flatten.\n */\nexport const flatten = (report: RTCStatsReport) => {\n  const stats: RTCStats[] = [];\n  report.forEach((s) => {\n    stats.push(s);\n  });\n  return stats;\n};\n\n/**\n * Dump the provided MediaStream into a JSON object.\n */\nexport const dumpStream = (stream: MediaStream) => ({\n  id: stream.id,\n  tracks: stream.getTracks().map((track) => ({\n    id: track.id,\n    kind: track.kind,\n    label: track.label,\n    enabled: track.enabled,\n    muted: track.muted,\n    readyState: track.readyState,\n  })),\n});\n\nexport const getSdkSignature = (clientDetails: ClientDetails) => {\n  const { sdk, ...platform } = clientDetails;\n  const sdkName = getSdkName(sdk);\n  const sdkVersion = getSdkVersion(sdk);\n\n  return {\n    sdkName,\n    sdkVersion,\n    ...platform,\n  };\n};\n\nexport const getSdkName = (sdk: Sdk | undefined) => {\n  return sdk && sdk.type === SdkType.REACT\n    ? 'stream-react'\n    : sdk && sdk.type === SdkType.REACT_NATIVE\n      ? 'stream-react-native'\n      : 'stream-js';\n};\n\nexport const getSdkVersion = (sdk: Sdk | undefined) => {\n  return sdk ? `${sdk.major}.${sdk.minor}.${sdk.patch}` : '0.0.0-development';\n};\n","/**\n * Checks whether the current browser is Safari.\n */\nexport const isSafari = () => {\n  if (typeof navigator === 'undefined') return false;\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent || '');\n};\n\n/**\n * Checks whether the current browser is Firefox.\n */\nexport const isFirefox = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent?.includes('Firefox');\n};\n\n/**\n * Checks whether the current browser is Google Chrome.\n */\nexport const isChrome = () => {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent?.includes('Chrome');\n};\n","import type {\n  AggregatedStatsReport,\n  BaseStats,\n  ParticipantsStatsReport,\n  RTCCodecStats,\n  RTCMediaSourceStats,\n  StatsReport,\n} from './types';\nimport { CallState } from '../store';\nimport { Publisher, Subscriber } from '../rtc';\nimport { getLogger } from '../logger';\nimport { flatten } from './utils';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { isFirefox } from '../helpers/browsers';\n\nexport type StatsReporterOpts = {\n  subscriber: Subscriber;\n  publisher?: Publisher;\n  state: CallState;\n  datacenter: string;\n  pollingIntervalInMs?: number;\n};\n\ntype PeerConnectionKind = 'subscriber' | 'publisher';\n\nexport type StatsReporter = {\n  /**\n   * Will turn on stats reporting for a given sessionId.\n   *\n   * @param sessionId the session id.\n   */\n  startReportingStatsFor: (sessionId: string) => void;\n\n  /**\n   * Will turn off stats reporting for a given sessionId.\n   *\n   * @param sessionId the session id.\n   */\n  stopReportingStatsFor: (sessionId: string) => void;\n\n  /**\n   * Helper method for retrieving stats for a given peer connection kind\n   * and media stream flowing through it.\n   *\n   * @param kind the peer connection kind (subscriber or publisher).\n   * @param mediaStream the media stream.\n   */\n  getStatsForStream: (\n    kind: PeerConnectionKind,\n    tracks: MediaStreamTrack[],\n  ) => Promise<StatsReport[]>;\n\n  /**\n   * Helper method for retrieving raw stats for a given peer connection kind.\n   *\n   * @param kind the peer connection kind (subscriber or publisher).\n   * @param selector the track selector. If not provided, stats for all tracks will be returned.\n   */\n  getRawStatsForTrack: (\n    kind: PeerConnectionKind,\n    selector?: MediaStreamTrack,\n  ) => Promise<RTCStatsReport | undefined>;\n\n  /**\n   * Stops the stats reporter and releases all resources.\n   */\n  stop: () => void;\n};\n\n/**\n * Creates a new StatsReporter instance that collects metrics about the ongoing call and reports them to the state store\n */\nexport const createStatsReporter = ({\n  subscriber,\n  publisher,\n  state,\n  datacenter,\n  pollingIntervalInMs = 2000,\n}: StatsReporterOpts): StatsReporter => {\n  const logger = getLogger(['stats']);\n  const getRawStatsForTrack = async (\n    kind: PeerConnectionKind,\n    selector?: MediaStreamTrack,\n  ) => {\n    if (kind === 'subscriber' && subscriber) {\n      return subscriber.getStats(selector);\n    } else if (kind === 'publisher' && publisher) {\n      return publisher.getStats(selector);\n    } else {\n      return undefined;\n    }\n  };\n\n  const getStatsForStream = async (\n    kind: PeerConnectionKind,\n    tracks: MediaStreamTrack[],\n  ) => {\n    const pc = kind === 'subscriber' ? subscriber : publisher;\n    if (!pc) return [];\n    const statsForStream: StatsReport[] = [];\n    for (const track of tracks) {\n      const report = await pc.getStats(track);\n      const stats = transform(report, {\n        trackKind: track.kind as 'audio' | 'video',\n        kind,\n        publisher: undefined,\n      });\n      statsForStream.push(stats);\n    }\n    return statsForStream;\n  };\n\n  const startReportingStatsFor = (sessionId: string) => {\n    sessionIdsToTrack.add(sessionId);\n    void run();\n  };\n\n  const stopReportingStatsFor = (sessionId: string) => {\n    sessionIdsToTrack.delete(sessionId);\n    void run();\n  };\n\n  const sessionIdsToTrack = new Set<string>();\n\n  /**\n   * The main stats reporting loop.\n   */\n  const run = async () => {\n    const participantStats: ParticipantsStatsReport = {};\n    if (sessionIdsToTrack.size > 0) {\n      const sessionIds = new Set(sessionIdsToTrack);\n      for (const participant of state.participants) {\n        if (!sessionIds.has(participant.sessionId)) continue;\n        const {\n          audioStream,\n          isLocalParticipant,\n          sessionId,\n          userId,\n          videoStream,\n        } = participant;\n        const kind = isLocalParticipant ? 'publisher' : 'subscriber';\n        try {\n          const tracks = isLocalParticipant\n            ? publisher?.getPublishedTracks() || []\n            : [\n                ...(videoStream?.getVideoTracks() || []),\n                ...(audioStream?.getAudioTracks() || []),\n              ];\n          participantStats[sessionId] = await getStatsForStream(kind, tracks);\n        } catch (e) {\n          logger('warn', `Failed to collect ${kind} stats for ${userId}`, e);\n        }\n      }\n    }\n\n    const [subscriberRawStats, publisherRawStats] = await Promise.all([\n      getRawStatsForTrack('subscriber'),\n      publisher ? getRawStatsForTrack('publisher') : undefined,\n    ]);\n\n    const process = (report: RTCStatsReport, kind: PeerConnectionKind) =>\n      aggregate(transform(report, { kind, trackKind: 'video', publisher }));\n\n    const subscriberStats = subscriberRawStats\n      ? process(subscriberRawStats, 'subscriber')\n      : getEmptyStats();\n    const publisherStats = publisherRawStats\n      ? process(publisherRawStats, 'publisher')\n      : getEmptyStats();\n\n    state.setCallStatsReport({\n      datacenter,\n      publisherStats,\n      subscriberStats,\n      subscriberRawStats,\n      publisherRawStats,\n      participants: participantStats,\n      timestamp: Date.now(),\n    });\n  };\n\n  let timeoutId: NodeJS.Timeout | undefined;\n  if (pollingIntervalInMs > 0) {\n    const loop = async () => {\n      await run().catch((e) => {\n        logger('debug', 'Failed to collect stats', e);\n      });\n      timeoutId = setTimeout(loop, pollingIntervalInMs);\n    };\n    void loop();\n  }\n\n  const stop = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  };\n\n  return {\n    getRawStatsForTrack,\n    getStatsForStream,\n    startReportingStatsFor,\n    stopReportingStatsFor,\n    stop,\n  };\n};\n\nexport type StatsTransformOpts = {\n  /**\n   * The kind of track we are transforming stats for.\n   */\n  trackKind: 'audio' | 'video';\n  /**\n   * The kind of peer connection we are transforming stats for.\n   */\n  kind: PeerConnectionKind;\n  /**\n   * The publisher instance.\n   */\n  publisher: Publisher | undefined;\n};\n\n/**\n * Transforms raw RTC stats into a slimmer and uniform across browsers format.\n *\n * @param report the report to transform.\n * @param opts the transform options.\n */\nconst transform = (\n  report: RTCStatsReport,\n  opts: StatsTransformOpts,\n): StatsReport => {\n  const { trackKind, kind, publisher } = opts;\n  const direction = kind === 'subscriber' ? 'inbound-rtp' : 'outbound-rtp';\n  const stats = flatten(report);\n  const streams = stats\n    .filter(\n      (stat) =>\n        stat.type === direction &&\n        (stat as RTCRtpStreamStats).kind === trackKind,\n    )\n    .map((stat): BaseStats => {\n      const rtcStreamStats = stat as RTCInboundRtpStreamStats &\n        RTCOutboundRtpStreamStats;\n\n      const codec = stats.find(\n        (s) => s.type === 'codec' && s.id === rtcStreamStats.codecId,\n      ) as RTCCodecStats | undefined;\n\n      const transport = stats.find(\n        (s) => s.type === 'transport' && s.id === rtcStreamStats.transportId,\n      ) as RTCTransportStats | undefined;\n\n      let roundTripTime: number | undefined;\n      if (transport && transport.dtlsState === 'connected') {\n        const candidatePair = stats.find(\n          (s) =>\n            s.type === 'candidate-pair' &&\n            s.id === transport.selectedCandidatePairId,\n        ) as RTCIceCandidatePairStats | undefined;\n        roundTripTime = candidatePair?.currentRoundTripTime;\n      }\n\n      let trackType: TrackType | undefined;\n      if (kind === 'publisher' && publisher) {\n        const firefox = isFirefox();\n        const mediaSource = stats.find(\n          (s) =>\n            s.type === 'media-source' &&\n            // Firefox doesn't have mediaSourceId, so we need to guess the media source\n            (firefox ? true : s.id === rtcStreamStats.mediaSourceId),\n        ) as RTCMediaSourceStats | undefined;\n        if (mediaSource) {\n          trackType = publisher.getTrackType(mediaSource.trackIdentifier);\n        }\n      }\n\n      return {\n        bytesSent: rtcStreamStats.bytesSent,\n        bytesReceived: rtcStreamStats.bytesReceived,\n        codec: codec?.mimeType,\n        currentRoundTripTime: roundTripTime,\n        frameHeight: rtcStreamStats.frameHeight,\n        frameWidth: rtcStreamStats.frameWidth,\n        framesPerSecond: rtcStreamStats.framesPerSecond,\n        jitter: rtcStreamStats.jitter,\n        kind: rtcStreamStats.kind,\n        mediaSourceId: rtcStreamStats.mediaSourceId,\n        qualityLimitationReason: rtcStreamStats.qualityLimitationReason,\n        rid: rtcStreamStats.rid,\n        ssrc: rtcStreamStats.ssrc,\n        trackType,\n      };\n    });\n\n  return {\n    rawStats: report,\n    streams,\n    timestamp: Date.now(),\n  };\n};\n\nconst getEmptyStats = (stats?: StatsReport): AggregatedStatsReport => {\n  return {\n    rawReport: stats ?? { streams: [], timestamp: Date.now() },\n    totalBytesSent: 0,\n    totalBytesReceived: 0,\n    averageJitterInMs: 0,\n    averageRoundTripTimeInMs: 0,\n    qualityLimitationReasons: 'none',\n    highestFrameWidth: 0,\n    highestFrameHeight: 0,\n    highestFramesPerSecond: 0,\n    codec: '',\n    codecPerTrackType: {},\n    timestamp: Date.now(),\n  };\n};\n\n/**\n * Aggregates generic stats.\n *\n * @param stats the stats to aggregate.\n */\nconst aggregate = (stats: StatsReport): AggregatedStatsReport => {\n  const aggregatedStats = getEmptyStats(stats);\n\n  let maxArea = -1;\n  const area = (w: number, h: number) => w * h;\n\n  const qualityLimitationReasons = new Set<string>();\n  const streams = stats.streams;\n  const report = streams.reduce((acc, stream) => {\n    acc.totalBytesSent += stream.bytesSent || 0;\n    acc.totalBytesReceived += stream.bytesReceived || 0;\n    acc.averageJitterInMs += stream.jitter || 0;\n    acc.averageRoundTripTimeInMs += stream.currentRoundTripTime || 0;\n\n    // naive calculation of the highest resolution\n    const streamArea = area(stream.frameWidth || 0, stream.frameHeight || 0);\n    if (streamArea > maxArea) {\n      acc.highestFrameWidth = stream.frameWidth || 0;\n      acc.highestFrameHeight = stream.frameHeight || 0;\n      acc.highestFramesPerSecond = stream.framesPerSecond || 0;\n      maxArea = streamArea;\n    }\n\n    qualityLimitationReasons.add(stream.qualityLimitationReason || '');\n    return acc;\n  }, aggregatedStats);\n\n  if (streams.length > 0) {\n    report.averageJitterInMs = Math.round(\n      (report.averageJitterInMs / streams.length) * 1000,\n    );\n    report.averageRoundTripTimeInMs = Math.round(\n      (report.averageRoundTripTimeInMs / streams.length) * 1000,\n    );\n    // we take the first codec we find, as it should be the same for all streams\n    report.codec = streams[0].codec || '';\n    report.codecPerTrackType = streams.reduce(\n      (acc, stream) => {\n        if (stream.trackType) {\n          acc[stream.trackType] = stream.codec || '';\n        }\n        return acc;\n      },\n      {} as Record<TrackType, string>,\n    );\n  }\n\n  const qualityLimitationReason = [\n    qualityLimitationReasons.has('cpu') && 'cpu',\n    qualityLimitationReasons.has('bandwidth') && 'bandwidth',\n    qualityLimitationReasons.has('other') && 'other',\n  ]\n    .filter(Boolean)\n    .join(', ');\n  if (qualityLimitationReason) {\n    report.qualityLimitationReasons = qualityLimitationReason;\n  }\n\n  return report;\n};\n","import {\n  AndroidThermalState,\n  AppleThermalState,\n  ClientDetails,\n  Device,\n  OS,\n  Sdk,\n  SdkType,\n} from '../gen/video/sfu/models/models';\nimport { SendStatsRequest } from '../gen/video/sfu/signal_rpc/signal';\nimport { isReactNative } from './platforms';\nimport { UAParser } from 'ua-parser-js';\n\ntype WebRTCInfoType = {\n  version: string;\n};\n\nconst version = process.env.PKG_VERSION || '0.0.0';\nconst [major, minor, patch] = version.split('.');\n\nlet sdkInfo: Sdk | undefined = {\n  type: SdkType.PLAIN_JAVASCRIPT,\n  major,\n  minor,\n  patch,\n};\n\nlet osInfo: OS | undefined;\nlet deviceInfo: Device | undefined;\nlet webRtcInfo: WebRTCInfoType | undefined;\nlet deviceState: SendStatsRequest['deviceState'] = { oneofKind: undefined };\n\nexport const setSdkInfo = (info: Sdk) => {\n  sdkInfo = info;\n};\n\nexport const getSdkInfo = () => {\n  return sdkInfo;\n};\n\nexport const setOSInfo = (info: OS) => {\n  osInfo = info;\n};\n\nexport const setDeviceInfo = (info: Device) => {\n  deviceInfo = info;\n};\n\nexport const getWebRTCInfo = () => {\n  return webRtcInfo;\n};\n\nexport const setWebRTCInfo = (info: WebRTCInfoType) => {\n  webRtcInfo = info;\n};\n\nexport const setThermalState = (state: string) => {\n  if (!osInfo) {\n    deviceState = { oneofKind: undefined };\n    return;\n  }\n\n  if (osInfo.name === 'android') {\n    const thermalState =\n      AndroidThermalState[state as keyof typeof AndroidThermalState] ||\n      AndroidThermalState.UNSPECIFIED;\n\n    deviceState = {\n      oneofKind: 'android',\n      android: {\n        thermalState,\n        isPowerSaverMode:\n          deviceState?.oneofKind === 'android' &&\n          deviceState.android.isPowerSaverMode,\n      },\n    };\n  }\n\n  if (osInfo.name.toLowerCase() === 'ios') {\n    const thermalState =\n      AppleThermalState[state as keyof typeof AppleThermalState] ||\n      AppleThermalState.UNSPECIFIED;\n\n    deviceState = {\n      oneofKind: 'apple',\n      apple: {\n        thermalState,\n        isLowPowerModeEnabled:\n          deviceState?.oneofKind === 'apple' &&\n          deviceState.apple.isLowPowerModeEnabled,\n      },\n    };\n  }\n};\n\nexport const setPowerState = (powerMode: boolean) => {\n  if (!osInfo) {\n    deviceState = { oneofKind: undefined };\n    return;\n  }\n\n  if (osInfo.name === 'android') {\n    deviceState = {\n      oneofKind: 'android',\n      android: {\n        thermalState:\n          deviceState?.oneofKind === 'android'\n            ? deviceState.android.thermalState\n            : AndroidThermalState.UNSPECIFIED,\n        isPowerSaverMode: powerMode,\n      },\n    };\n  }\n\n  if (osInfo.name.toLowerCase() === 'ios') {\n    deviceState = {\n      oneofKind: 'apple',\n      apple: {\n        thermalState:\n          deviceState?.oneofKind === 'apple'\n            ? deviceState.apple.thermalState\n            : AppleThermalState.UNSPECIFIED,\n        isLowPowerModeEnabled: powerMode,\n      },\n    };\n  }\n};\n\nexport const getDeviceState = () => {\n  return deviceState;\n};\n\nexport const getClientDetails = async (): Promise<ClientDetails> => {\n  if (isReactNative()) {\n    // Since RN doesn't support web, sharing browser info is not required\n    return {\n      sdk: sdkInfo,\n      os: osInfo,\n      device: deviceInfo,\n    };\n  }\n\n  // @ts-expect-error - userAgentData is not yet in the TS types\n  const userAgentDataApi = navigator.userAgentData;\n  let userAgentData:\n    | { platform?: string; platformVersion?: string }\n    | undefined;\n  if (userAgentDataApi && userAgentDataApi.getHighEntropyValues) {\n    try {\n      userAgentData = await userAgentDataApi.getHighEntropyValues([\n        'platform',\n        'platformVersion',\n      ]);\n    } catch {\n      // Ignore the error\n    }\n  }\n\n  const userAgent = new UAParser(navigator.userAgent);\n  const { browser, os, device, cpu } = userAgent.getResult();\n  return {\n    sdk: sdkInfo,\n    browser: {\n      name: browser.name || navigator.userAgent,\n      version: browser.version || '',\n    },\n    os: {\n      name: userAgentData?.platform || os.name || '',\n      version: userAgentData?.platformVersion || os.version || '',\n      architecture: cpu.architecture || '',\n    },\n    device: {\n      name: [device.vendor, device.model, device.type]\n        .filter(Boolean)\n        .join(' '),\n      version: '',\n    },\n  };\n};\n","import { combineLatest } from 'rxjs';\nimport { StreamSfuClient } from '../StreamSfuClient';\nimport { OwnCapability, StatsOptions } from '../gen/coordinator';\nimport { getLogger } from '../logger';\nimport { Publisher, Subscriber } from '../rtc';\nimport { Tracer, TraceRecord } from './rtc';\nimport { flatten, getSdkName, getSdkVersion } from './utils';\nimport { getDeviceState, getWebRTCInfo } from '../helpers/client-details';\nimport {\n  ClientDetails,\n  InputDevices,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { CameraManager, MicrophoneManager } from '../devices';\nimport { createSubscription } from '../store/rxUtils';\nimport { CallState } from '../store';\nimport { Telemetry } from '../gen/video/sfu/signal_rpc/signal';\n\nexport type SfuStatsReporterOptions = {\n  options: StatsOptions;\n  clientDetails: ClientDetails;\n  subscriber: Subscriber;\n  publisher?: Publisher;\n  microphone: MicrophoneManager;\n  camera: CameraManager;\n  state: CallState;\n  tracer: Tracer;\n  unifiedSessionId: string;\n};\n\nexport class SfuStatsReporter {\n  private readonly logger = getLogger(['SfuStatsReporter']);\n\n  readonly options: StatsOptions;\n\n  private readonly sfuClient: StreamSfuClient;\n  private readonly subscriber: Subscriber;\n  private readonly publisher?: Publisher;\n  private readonly microphone: MicrophoneManager;\n  private readonly camera: CameraManager;\n  private readonly state: CallState;\n  private readonly tracer: Tracer;\n  private readonly unifiedSessionId: string;\n\n  private intervalId: NodeJS.Timeout | undefined;\n  private timeoutId: NodeJS.Timeout | undefined;\n  private unsubscribeDevicePermissionsSubscription?: () => void;\n  private unsubscribeListDevicesSubscription?: () => void;\n  private readonly sdkName: string;\n  private readonly sdkVersion: string;\n  private readonly webRTCVersion: string;\n  private readonly inputDevices = new Map<'mic' | 'camera', InputDevices>();\n\n  constructor(\n    sfuClient: StreamSfuClient,\n    {\n      options,\n      clientDetails,\n      subscriber,\n      publisher,\n      microphone,\n      camera,\n      state,\n      tracer,\n      unifiedSessionId,\n    }: SfuStatsReporterOptions,\n  ) {\n    this.sfuClient = sfuClient;\n    this.options = options;\n    this.subscriber = subscriber;\n    this.publisher = publisher;\n    this.microphone = microphone;\n    this.camera = camera;\n    this.state = state;\n    this.tracer = tracer;\n    this.unifiedSessionId = unifiedSessionId;\n\n    const { sdk, browser } = clientDetails;\n    this.sdkName = getSdkName(sdk);\n    this.sdkVersion = getSdkVersion(sdk);\n\n    // use the WebRTC version if set by the SDK (React Native) otherwise,\n    // use the browser version as a fallback\n    const webRTCInfo = getWebRTCInfo();\n    this.webRTCVersion =\n      webRTCInfo?.version ||\n      `${browser?.name || ''}-${browser?.version || ''}` ||\n      'N/A';\n  }\n\n  private observeDevice = (\n    device: CameraManager | MicrophoneManager,\n    kind: 'mic' | 'camera',\n  ) => {\n    const { browserPermissionState$ } = device.state;\n    this.unsubscribeDevicePermissionsSubscription?.();\n    this.unsubscribeDevicePermissionsSubscription = createSubscription(\n      combineLatest([browserPermissionState$, this.state.ownCapabilities$]),\n      ([browserPermissionState, ownCapabilities]) => {\n        // cleanup the previous listDevices() subscription in case\n        // permissions or capabilities have changed.\n        // we will subscribe again if everything is in order.\n        this.unsubscribeListDevicesSubscription?.();\n        const hasCapability =\n          kind === 'mic'\n            ? ownCapabilities.includes(OwnCapability.SEND_AUDIO)\n            : ownCapabilities.includes(OwnCapability.SEND_VIDEO);\n        if (browserPermissionState !== 'granted' || !hasCapability) {\n          this.inputDevices.set(kind, {\n            currentDevice: '',\n            availableDevices: [],\n            isPermitted: false,\n          });\n          return;\n        }\n        this.unsubscribeListDevicesSubscription = createSubscription(\n          combineLatest([device.listDevices(), device.state.selectedDevice$]),\n          ([devices, deviceId]) => {\n            const selected = devices.find((d) => d.deviceId === deviceId);\n            this.inputDevices.set(kind, {\n              currentDevice: selected?.label || deviceId || '',\n              availableDevices: devices.map((d) => d.label),\n              isPermitted: true,\n            });\n          },\n        );\n      },\n    );\n  };\n\n  sendConnectionTime = (connectionTimeSeconds: number) => {\n    this.sendTelemetryData({\n      data: {\n        oneofKind: 'connectionTimeSeconds',\n        connectionTimeSeconds,\n      },\n    });\n  };\n\n  sendReconnectionTime = (\n    strategy: WebsocketReconnectStrategy,\n    timeSeconds: number,\n  ) => {\n    this.sendTelemetryData({\n      data: {\n        oneofKind: 'reconnection',\n        reconnection: { strategy, timeSeconds },\n      },\n    });\n  };\n\n  private sendTelemetryData = (telemetryData: Telemetry) => {\n    // intentionally not awaiting the promise here\n    // to avoid impeding with the ongoing actions.\n    this.run(telemetryData).catch((err) => {\n      this.logger('warn', 'Failed to send telemetry data', err);\n    });\n  };\n\n  private run = async (telemetry?: Telemetry) => {\n    const [subscriberStats, publisherStats] = await Promise.all([\n      this.subscriber.stats.get(),\n      this.publisher?.stats.get(),\n    ]);\n\n    this.subscriber.tracer?.trace('getstats', subscriberStats.delta);\n    if (publisherStats) {\n      this.publisher?.tracer?.trace('getstats', publisherStats.delta);\n    }\n\n    const subscriberTrace = this.subscriber.tracer?.take();\n    const publisherTrace = this.publisher?.tracer?.take();\n    const tracer = this.tracer.take();\n    const sfuTrace = this.sfuClient.getTrace();\n    const traces: TraceRecord[] = [\n      ...tracer.snapshot,\n      ...(sfuTrace?.snapshot ?? []),\n      ...(publisherTrace?.snapshot ?? []),\n      ...(subscriberTrace?.snapshot ?? []),\n    ];\n\n    try {\n      await this.sfuClient.sendStats({\n        sdk: this.sdkName,\n        sdkVersion: this.sdkVersion,\n        webrtcVersion: this.webRTCVersion,\n        subscriberStats: JSON.stringify(flatten(subscriberStats.stats)),\n        publisherStats: publisherStats\n          ? JSON.stringify(flatten(publisherStats.stats))\n          : '[]',\n        subscriberRtcStats: '',\n        publisherRtcStats: '',\n        rtcStats: JSON.stringify(traces),\n        encodeStats: publisherStats?.performanceStats ?? [],\n        decodeStats: subscriberStats.performanceStats,\n        audioDevices: this.inputDevices.get('mic'),\n        videoDevices: this.inputDevices.get('camera'),\n        unifiedSessionId: this.unifiedSessionId,\n        deviceState: getDeviceState(),\n        telemetry,\n      });\n    } catch (err) {\n      publisherTrace?.rollback();\n      subscriberTrace?.rollback();\n      tracer.rollback();\n      sfuTrace?.rollback();\n      throw err;\n    }\n  };\n\n  start = () => {\n    if (this.options.reporting_interval_ms <= 0) return;\n\n    this.observeDevice(this.microphone, 'mic');\n    this.observeDevice(this.camera, 'camera');\n\n    clearInterval(this.intervalId);\n    this.intervalId = setInterval(() => {\n      this.run().catch((err) => {\n        this.logger('warn', 'Failed to report stats', err);\n      });\n    }, this.options.reporting_interval_ms);\n  };\n\n  stop = () => {\n    this.unsubscribeDevicePermissionsSubscription?.();\n    this.unsubscribeDevicePermissionsSubscription = undefined;\n    this.unsubscribeListDevicesSubscription?.();\n    this.unsubscribeListDevicesSubscription = undefined;\n\n    this.inputDevices.clear();\n    clearInterval(this.intervalId);\n    this.intervalId = undefined;\n    clearTimeout(this.timeoutId);\n    this.timeoutId = undefined;\n  };\n\n  flush = () => {\n    this.run().catch((err) => {\n      this.logger('warn', 'Failed to flush report stats', err);\n    });\n  };\n\n  scheduleOne = (timeout: number) => {\n    clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(() => {\n      this.run().catch((err) => {\n        this.logger('warn', 'Failed to report stats', err);\n      });\n    }, timeout);\n  };\n}\n","import type { RTCStatsDataType, Trace } from './types';\n\nexport const traceRTCPeerConnection = (pc: RTCPeerConnection, trace: Trace) => {\n  pc.addEventListener('icecandidate', (e) => {\n    trace('onicecandidate', e.candidate);\n  });\n  pc.addEventListener('track', (e) => {\n    const streams = e.streams.map((stream) => `stream:${stream.id}`);\n    trace('ontrack', `${e.track.kind}:${e.track.id} ${streams}`);\n  });\n  pc.addEventListener('signalingstatechange', () => {\n    trace('signalingstatechange', pc.signalingState);\n  });\n  pc.addEventListener('iceconnectionstatechange', () => {\n    trace('iceconnectionstatechange', pc.iceConnectionState);\n  });\n  pc.addEventListener('icegatheringstatechange', () => {\n    trace('icegatheringstatechange', pc.iceGatheringState);\n  });\n  pc.addEventListener('connectionstatechange', () => {\n    trace('connectionstatechange', pc.connectionState);\n  });\n  pc.addEventListener('negotiationneeded', () => {\n    trace('negotiationneeded', undefined);\n  });\n  pc.addEventListener('datachannel', ({ channel }) => {\n    trace('datachannel', [channel.id, channel.label]);\n  });\n\n  const origClose = pc.close;\n  pc.close = function tracedClose() {\n    trace('close', undefined);\n    return origClose.call(this);\n  };\n\n  for (const method of [\n    'createOffer',\n    'createAnswer',\n    'setLocalDescription',\n    'setRemoteDescription',\n    'addIceCandidate',\n  ] as const) {\n    const original = pc[method];\n    if (!original) continue;\n\n    // @ts-expect-error we don't use deprecated APIs\n    pc[method] = async function tracedMethod(...args: any[]) {\n      try {\n        trace(method, args);\n        // @ts-expect-error improper types\n        const result = await original.apply(this, args);\n        trace(`${method}OnSuccess`, result as RTCStatsDataType);\n        return result;\n      } catch (err) {\n        trace(`${method}OnFailure`, (err as Error).toString());\n        throw err;\n      }\n    };\n  }\n};\n","import {\n  Codec,\n  PeerType,\n  PerformanceStats,\n  TrackType,\n} from '../../gen/video/sfu/models/models';\nimport type { RTCCodecStats, RTCMediaSourceStats } from '../types';\nimport type { ComputedStats } from './types';\n\n/**\n * StatsTracer is a class that collects and processes WebRTC stats.\n * It is used to track the performance of the WebRTC connection\n * and to provide information about the media streams.\n * It is used by both the Publisher and Subscriber classes.\n *\n * @internal\n */\nexport class StatsTracer {\n  private readonly pc: RTCPeerConnection;\n  private readonly peerType: PeerType;\n  private readonly trackIdToTrackType: Map<string, TrackType>;\n\n  private costOverrides?: Map<TrackType, number>;\n\n  private previousStats: Record<string, RTCStats> = {};\n  private frameTimeHistory: number[] = [];\n  private fpsHistory: number[] = [];\n\n  /**\n   * Creates a new StatsTracer instance.\n   */\n  constructor(\n    pc: RTCPeerConnection,\n    peerType: PeerType,\n    trackIdToTrackType: Map<string, TrackType>,\n  ) {\n    this.pc = pc;\n    this.peerType = peerType;\n    this.trackIdToTrackType = trackIdToTrackType;\n  }\n\n  /**\n   * Get the stats from the RTCPeerConnection.\n   * When called, it will return the stats for the current connection.\n   * It will also return the delta between the current stats and the previous stats.\n   * This is used to track the performance of the connection.\n   *\n   * @internal\n   */\n  get = async (): Promise<ComputedStats> => {\n    const stats = await this.pc.getStats();\n    const currentStats = toObject(stats);\n\n    const performanceStats = this.withOverrides(\n      this.peerType === PeerType.SUBSCRIBER\n        ? this.getDecodeStats(currentStats)\n        : this.getEncodeStats(currentStats),\n    );\n\n    const delta = deltaCompression(this.previousStats, currentStats);\n\n    // store the current data for the next iteration\n    this.previousStats = currentStats;\n    this.frameTimeHistory = this.frameTimeHistory.slice(-2);\n    this.fpsHistory = this.fpsHistory.slice(-2);\n\n    return { performanceStats, delta, stats };\n  };\n\n  /**\n   * Collects encode stats from the RTCPeerConnection.\n   */\n  private getEncodeStats = (\n    currentStats: Record<string, RTCStats>,\n  ): PerformanceStats[] => {\n    const encodeStats: PerformanceStats[] = [];\n    for (const rtp of Object.values(currentStats)) {\n      if (rtp.type !== 'outbound-rtp') continue;\n\n      const {\n        codecId,\n        framesSent = 0,\n        kind,\n        id,\n        totalEncodeTime = 0,\n        framesPerSecond = 0,\n        frameHeight = 0,\n        frameWidth = 0,\n        targetBitrate = 0,\n        mediaSourceId,\n      } = rtp as RTCOutboundRtpStreamStats;\n\n      if (kind === 'audio' || !this.previousStats[id]) continue;\n      const prevRtp = this.previousStats[id] as RTCOutboundRtpStreamStats;\n\n      const deltaTotalEncodeTime =\n        totalEncodeTime - (prevRtp.totalEncodeTime || 0);\n      const deltaFramesSent = framesSent - (prevRtp.framesSent || 0);\n      const framesEncodeTime =\n        deltaFramesSent > 0\n          ? (deltaTotalEncodeTime / deltaFramesSent) * 1000\n          : 0;\n\n      this.frameTimeHistory.push(framesEncodeTime);\n      this.fpsHistory.push(framesPerSecond);\n\n      let trackType = TrackType.VIDEO;\n      if (mediaSourceId && currentStats[mediaSourceId]) {\n        const mediaSource = currentStats[mediaSourceId] as RTCMediaSourceStats;\n        trackType =\n          this.trackIdToTrackType.get(mediaSource.trackIdentifier) || trackType;\n      }\n\n      encodeStats.push({\n        trackType,\n        codec: getCodecFromStats(currentStats, codecId),\n        avgFrameTimeMs: average(this.frameTimeHistory),\n        avgFps: average(this.fpsHistory),\n        targetBitrate: Math.round(targetBitrate),\n        videoDimension: { width: frameWidth, height: frameHeight },\n      });\n    }\n\n    return encodeStats;\n  };\n\n  /**\n   * Collects decode stats from the RTCPeerConnection.\n   */\n  private getDecodeStats = (\n    currentStats: Record<string, RTCStats>,\n  ): PerformanceStats[] => {\n    let rtp: RTCInboundRtpStreamStats | undefined = undefined;\n    let max = 0;\n    for (const item of Object.values(currentStats)) {\n      if (item.type !== 'inbound-rtp') continue;\n      const rtpItem = item as RTCInboundRtpStreamStats;\n      const { kind, frameWidth = 0, frameHeight = 0 } = rtpItem;\n      const area = frameWidth * frameHeight;\n      if (kind === 'video' && area > max) {\n        rtp = rtpItem;\n        max = area;\n      }\n    }\n\n    if (!rtp || !this.previousStats[rtp.id]) return [];\n    const prevRtp = this.previousStats[rtp.id] as RTCInboundRtpStreamStats;\n\n    const {\n      framesDecoded = 0,\n      framesPerSecond = 0,\n      totalDecodeTime = 0,\n      trackIdentifier,\n    } = rtp;\n    const deltaTotalDecodeTime =\n      totalDecodeTime - (prevRtp.totalDecodeTime || 0);\n    const deltaFramesDecoded = framesDecoded - (prevRtp.framesDecoded || 0);\n\n    const framesDecodeTime =\n      deltaFramesDecoded > 0\n        ? (deltaTotalDecodeTime / deltaFramesDecoded) * 1000\n        : 0;\n\n    this.frameTimeHistory.push(framesDecodeTime);\n    this.fpsHistory.push(framesPerSecond);\n\n    const trackType =\n      this.trackIdToTrackType.get(trackIdentifier) || TrackType.VIDEO;\n\n    return [\n      PerformanceStats.create({\n        trackType,\n        codec: getCodecFromStats(currentStats, rtp.codecId),\n        avgFrameTimeMs: average(this.frameTimeHistory),\n        avgFps: average(this.fpsHistory),\n        videoDimension: { width: rtp.frameWidth, height: rtp.frameHeight },\n      }),\n    ];\n  };\n\n  /**\n   * Applies cost overrides to the performance stats.\n   * This is used to override the default encode/decode times with custom values.\n   * This is useful for testing and debugging purposes, and it shouldn't be used in production.\n   */\n  private withOverrides = (\n    performanceStats: PerformanceStats[],\n  ): PerformanceStats[] => {\n    if (this.costOverrides) {\n      for (const s of performanceStats) {\n        const override = this.costOverrides.get(s.trackType);\n        if (override !== undefined) {\n          // override the average encode/decode time with the provided cost.\n          // format: [override].[original-frame-time]\n          s.avgFrameTimeMs = override + (s.avgFrameTimeMs || 0) / 1000;\n        }\n      }\n    }\n    return performanceStats;\n  };\n\n  /**\n   * Set the encode/decode cost for a specific track type.\n   * This is used to override the default encode/decode times with custom values.\n   * This is useful for testing and debugging purposes, and it shouldn't be used in production.\n   *\n   * @internal\n   */\n  setCost = (cost: number, trackType = TrackType.VIDEO) => {\n    if (!this.costOverrides) this.costOverrides = new Map();\n    this.costOverrides.set(trackType, cost);\n  };\n}\n\n/**\n * Convert the stat report to an object.\n *\n * @param report the stat report to convert.\n */\nconst toObject = (report: RTCStatsReport): Record<string, RTCStats> => {\n  const obj: Record<string, RTCStats> = {};\n  report.forEach((v, k) => {\n    obj[k] = v;\n  });\n  return obj;\n};\n\n/**\n * Apply delta compression to the stats report.\n * Reduces size by ~90%.\n * To reduce further, report keys could be compressed.\n */\nconst deltaCompression = (\n  oldStats: Record<any, any>,\n  newStats: Record<any, any>,\n): Record<any, any> => {\n  newStats = JSON.parse(JSON.stringify(newStats));\n\n  for (const [id, report] of Object.entries(newStats)) {\n    delete report.id;\n    if (!oldStats[id]) continue;\n\n    for (const [name, value] of Object.entries(report)) {\n      if (value === oldStats[id][name]) {\n        delete report[name];\n      }\n    }\n  }\n\n  let timestamp = -Infinity;\n  const values = Object.values(newStats);\n  for (const report of values) {\n    if (report.timestamp > timestamp) {\n      timestamp = report.timestamp;\n    }\n  }\n  for (const report of values) {\n    if (report.timestamp === timestamp) {\n      report.timestamp = 0;\n    }\n  }\n  newStats.timestamp = timestamp;\n  return newStats;\n};\n\n/**\n * Calculates an average value.\n */\nconst average = (arr: number[]) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\n/**\n * Create a Codec object from the codec stats.\n *\n * @param stats the stats report.\n * @param codecId the codec ID to look for.\n */\nconst getCodecFromStats = (\n  stats: Record<string, RTCStats>,\n  codecId: string | undefined,\n): Codec | undefined => {\n  if (!codecId || !stats[codecId]) return;\n  const codecStats = stats[codecId] as RTCCodecStats;\n  return Codec.create({\n    name: codecStats.mimeType.split('/').pop(), // video/av1 -> av1\n    clockRate: codecStats.clockRate,\n    payloadType: codecStats.payloadType,\n    fmtp: codecStats.sdpFmtpLine,\n  });\n};\n","import type { Trace, TraceRecord, TraceSlice } from './types';\n\nexport class Tracer {\n  private buffer: TraceRecord[] = [];\n  private enabled = true;\n  private readonly id: string | null;\n\n  constructor(id: string | null) {\n    this.id = id;\n  }\n\n  setEnabled = (enabled: boolean) => {\n    if (this.enabled === enabled) return;\n    this.enabled = enabled;\n    this.buffer = [];\n  };\n\n  trace: Trace = (tag, data) => {\n    if (!this.enabled) return;\n    this.buffer.push([tag, this.id, data, Date.now()]);\n  };\n\n  take = (): TraceSlice => {\n    const snapshot = this.buffer;\n    this.buffer = [];\n    return {\n      snapshot,\n      rollback: () => {\n        this.buffer.unshift(...snapshot);\n      },\n    };\n  };\n\n  dispose = () => {\n    this.buffer = [];\n  };\n}\n","import { getLogger } from '../logger';\nimport type {\n  CallEventListener,\n  Logger,\n} from '../coordinator/connection/types';\nimport { CallingState, CallState } from '../store';\nimport { createSafeAsyncSubscription } from '../store/rxUtils';\nimport { PeerType, TrackType } from '../gen/video/sfu/models/models';\nimport { StreamSfuClient } from '../StreamSfuClient';\nimport { AllSfuEvents, Dispatcher } from './Dispatcher';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { StatsTracer, Tracer, traceRTCPeerConnection } from '../stats';\n\nexport type BasePeerConnectionOpts = {\n  sfuClient: StreamSfuClient;\n  state: CallState;\n  connectionConfig?: RTCConfiguration;\n  dispatcher: Dispatcher;\n  onUnrecoverableError?: (reason: string) => void;\n  logTag: string;\n  enableTracing: boolean;\n};\n\n/**\n * A base class for the `Publisher` and `Subscriber` classes.\n * @internal\n */\nexport abstract class BasePeerConnection {\n  protected readonly logger: Logger;\n  protected readonly peerType: PeerType;\n  protected readonly pc: RTCPeerConnection;\n  protected readonly state: CallState;\n  protected readonly dispatcher: Dispatcher;\n  protected sfuClient: StreamSfuClient;\n\n  protected onUnrecoverableError?: (reason: string) => void;\n  protected isIceRestarting = false;\n  private isDisposed = false;\n\n  protected trackIdToTrackType = new Map<string, TrackType>();\n\n  readonly tracer?: Tracer;\n  readonly stats: StatsTracer;\n  private readonly subscriptions: (() => void)[] = [];\n  private unsubscribeIceTrickle?: () => void;\n  protected readonly lock = Math.random().toString(36).slice(2);\n\n  /**\n   * Constructs a new `BasePeerConnection` instance.\n   */\n  protected constructor(\n    peerType: PeerType,\n    {\n      sfuClient,\n      connectionConfig,\n      state,\n      dispatcher,\n      onUnrecoverableError,\n      logTag,\n      enableTracing,\n    }: BasePeerConnectionOpts,\n  ) {\n    this.peerType = peerType;\n    this.sfuClient = sfuClient;\n    this.state = state;\n    this.dispatcher = dispatcher;\n    this.onUnrecoverableError = onUnrecoverableError;\n    this.logger = getLogger([\n      peerType === PeerType.SUBSCRIBER ? 'Subscriber' : 'Publisher',\n      logTag,\n    ]);\n    this.pc = new RTCPeerConnection(connectionConfig);\n    this.pc.addEventListener('icecandidate', this.onIceCandidate);\n    this.pc.addEventListener('icecandidateerror', this.onIceCandidateError);\n    this.pc.addEventListener(\n      'iceconnectionstatechange',\n      this.onIceConnectionStateChange,\n    );\n    this.pc.addEventListener('icegatheringstatechange', this.onIceGatherChange);\n    this.pc.addEventListener('signalingstatechange', this.onSignalingChange);\n    this.pc.addEventListener(\n      'connectionstatechange',\n      this.onConnectionStateChange,\n    );\n    this.stats = new StatsTracer(this.pc, peerType, this.trackIdToTrackType);\n    if (enableTracing) {\n      const tag = `${logTag}-${peerType === PeerType.SUBSCRIBER ? 'sub' : 'pub'}`;\n      this.tracer = new Tracer(tag);\n      this.tracer.trace('create', {\n        url: sfuClient.edgeName,\n        ...connectionConfig,\n      });\n      traceRTCPeerConnection(this.pc, this.tracer.trace);\n    }\n  }\n\n  /**\n   * Disposes the `RTCPeerConnection` instance.\n   */\n  dispose() {\n    this.onUnrecoverableError = undefined;\n    this.isDisposed = true;\n    this.detachEventHandlers();\n    this.pc.close();\n    this.tracer?.dispose();\n  }\n\n  /**\n   * Detaches the event handlers from the `RTCPeerConnection`.\n   */\n  detachEventHandlers() {\n    this.pc.removeEventListener('icecandidate', this.onIceCandidate);\n    this.pc.removeEventListener('icecandidateerror', this.onIceCandidateError);\n    this.pc.removeEventListener('signalingstatechange', this.onSignalingChange);\n    this.pc.removeEventListener(\n      'iceconnectionstatechange',\n      this.onIceConnectionStateChange,\n    );\n    this.pc.removeEventListener(\n      'icegatheringstatechange',\n      this.onIceGatherChange,\n    );\n    this.unsubscribeIceTrickle?.();\n    this.subscriptions.forEach((unsubscribe) => unsubscribe());\n  }\n\n  /**\n   * Performs an ICE restart on the `RTCPeerConnection`.\n   */\n  protected abstract restartIce(): Promise<void>;\n\n  /**\n   * Handles events synchronously.\n   * Consecutive events are queued and executed one after the other.\n   */\n  protected on = <E extends keyof AllSfuEvents>(\n    event: E,\n    fn: CallEventListener<E>,\n  ): void => {\n    this.subscriptions.push(\n      this.dispatcher.on(event, (e) => {\n        const lockKey = `pc.${this.lock}.${event}`;\n        withoutConcurrency(lockKey, async () => fn(e)).catch((err) => {\n          if (this.isDisposed) return;\n          this.logger('warn', `Error handling ${event}`, err);\n        });\n      }),\n    );\n  };\n\n  /**\n   * Appends the trickled ICE candidates to the `RTCPeerConnection`.\n   */\n  protected addTrickledIceCandidates = () => {\n    const { iceTrickleBuffer } = this.sfuClient;\n    const observable =\n      this.peerType === PeerType.SUBSCRIBER\n        ? iceTrickleBuffer.subscriberCandidates\n        : iceTrickleBuffer.publisherCandidates;\n\n    this.unsubscribeIceTrickle?.();\n    this.unsubscribeIceTrickle = createSafeAsyncSubscription(\n      observable,\n      async (candidate) => {\n        return this.pc.addIceCandidate(candidate).catch((e) => {\n          if (this.isDisposed) return;\n          this.logger('warn', `ICE candidate error`, e, candidate);\n        });\n      },\n    );\n  };\n\n  /**\n   * Sets the SFU client to use.\n   *\n   * @param sfuClient the SFU client to use.\n   */\n  setSfuClient = (sfuClient: StreamSfuClient) => {\n    this.sfuClient = sfuClient;\n  };\n\n  /**\n   * Returns the result of the `RTCPeerConnection.getStats()` method\n   * @param selector an optional `MediaStreamTrack` to get the stats for.\n   */\n  getStats = (selector?: MediaStreamTrack | null) => {\n    return this.pc.getStats(selector);\n  };\n\n  /**\n   * Maps the given track ID to the corresponding track type.\n   */\n  getTrackType = (trackId: string): TrackType | undefined => {\n    return this.trackIdToTrackType.get(trackId);\n  };\n\n  /**\n   * Handles the ICECandidate event and\n   * Initiates an ICE Trickle process with the SFU.\n   */\n  private onIceCandidate = (e: RTCPeerConnectionIceEvent) => {\n    const { candidate } = e;\n    if (!candidate) {\n      this.logger('debug', 'null ice candidate');\n      return;\n    }\n\n    const iceCandidate = this.asJSON(candidate);\n    this.sfuClient\n      .iceTrickle({ peerType: this.peerType, iceCandidate })\n      .catch((err) => {\n        if (this.isDisposed) return;\n        this.logger('warn', `ICETrickle failed`, err);\n      });\n  };\n\n  /**\n   * Converts the ICE candidate to a JSON string.\n   */\n  private asJSON = (candidate: RTCIceCandidate): string => {\n    if (!candidate.usernameFragment) {\n      // react-native-webrtc doesn't include usernameFragment in the candidate\n      const segments = candidate.candidate.split(' ');\n      const ufragIndex = segments.findIndex((s) => s === 'ufrag') + 1;\n      const usernameFragment = segments[ufragIndex];\n      return JSON.stringify({ ...candidate, usernameFragment });\n    }\n    return JSON.stringify(candidate.toJSON());\n  };\n\n  /**\n   * Handles the ConnectionStateChange event.\n   */\n  private onConnectionStateChange = async () => {\n    const state = this.pc.connectionState;\n    this.logger('debug', `Connection state changed`, state);\n    if (!this.tracer) return;\n    if (state === 'connected' || state === 'failed') {\n      try {\n        const stats = await this.stats.get();\n        this.tracer.trace('getstats', stats.delta);\n      } catch (err) {\n        this.tracer.trace('getstatsOnFailure', (err as Error).toString());\n      }\n    }\n  };\n\n  /**\n   * Handles the ICE connection state change event.\n   */\n  private onIceConnectionStateChange = () => {\n    const state = this.pc.iceConnectionState;\n    this.logger('debug', `ICE connection state changed`, state);\n\n    if (this.state.callingState === CallingState.OFFLINE) return;\n    if (this.state.callingState === CallingState.RECONNECTING) return;\n\n    // do nothing when ICE is restarting\n    if (this.isIceRestarting) return;\n\n    if (state === 'failed') {\n      this.onUnrecoverableError?.('ICE connection failed');\n    } else if (state === 'disconnected') {\n      this.logger('debug', `Attempting to restart ICE`);\n      this.restartIce().catch((e) => {\n        const reason = `ICE restart failed`;\n        this.logger('error', reason, e);\n        this.onUnrecoverableError?.(`${reason}: ${e}`);\n      });\n    }\n  };\n\n  /**\n   * Handles the ICE candidate error event.\n   */\n  private onIceCandidateError = (e: Event) => {\n    const errorMessage =\n      e instanceof RTCPeerConnectionIceErrorEvent &&\n      `${e.errorCode}: ${e.errorText}`;\n    const iceState = this.pc.iceConnectionState;\n    const logLevel =\n      iceState === 'connected' || iceState === 'checking' ? 'debug' : 'warn';\n    this.logger(logLevel, `ICE Candidate error`, errorMessage);\n  };\n\n  /**\n   * Handles the ICE gathering state change event.\n   */\n  private onIceGatherChange = () => {\n    this.logger('debug', `ICE Gathering State`, this.pc.iceGatheringState);\n  };\n\n  /**\n   * Handles the signaling state change event.\n   */\n  private onSignalingChange = () => {\n    this.logger('debug', `Signaling state changed`, this.pc.signalingState);\n  };\n}\n","import { PublishOption } from '../gen/video/sfu/models/models';\nimport { OptimalVideoLayer } from './videoLayers';\n\ntype TransceiverId = {\n  publishOption: PublishOption;\n  transceiver: RTCRtpTransceiver;\n};\ntype TrackLayersCache = {\n  publishOption: PublishOption;\n  layers: OptimalVideoLayer[];\n};\n\nexport class TransceiverCache {\n  private readonly cache: TransceiverId[] = [];\n  private readonly layers: TrackLayersCache[] = [];\n\n  /**\n   * An array maintaining the order how transceivers were added to the peer connection.\n   * This is needed because some browsers (Firefox) don't reliably report\n   * trackId and `mid` parameters.\n   */\n  private readonly transceiverOrder: RTCRtpTransceiver[] = [];\n\n  /**\n   * Adds a transceiver to the cache.\n   */\n  add = (publishOption: PublishOption, transceiver: RTCRtpTransceiver) => {\n    this.cache.push({ publishOption, transceiver });\n    this.transceiverOrder.push(transceiver);\n  };\n\n  /**\n   * Gets the transceiver for the given publish option.\n   */\n  get = (publishOption: PublishOption): RTCRtpTransceiver | undefined => {\n    return this.findTransceiver(publishOption)?.transceiver;\n  };\n\n  /**\n   * Checks if the cache has the given publish option.\n   */\n  has = (publishOption: PublishOption): boolean => {\n    return !!this.get(publishOption);\n  };\n\n  /**\n   * Finds the first transceiver that satisfies the given predicate.\n   */\n  find = (\n    predicate: (item: TransceiverId) => boolean,\n  ): TransceiverId | undefined => {\n    return this.cache.find(predicate);\n  };\n\n  /**\n   * Provides all the items in the cache.\n   */\n  items = (): TransceiverId[] => {\n    return this.cache;\n  };\n\n  /**\n   * Init index of the transceiver in the cache.\n   */\n  indexOf = (transceiver: RTCRtpTransceiver): number => {\n    return this.transceiverOrder.indexOf(transceiver);\n  };\n\n  /**\n   * Gets cached video layers for the given track.\n   */\n  getLayers = (\n    publishOption: PublishOption,\n  ): OptimalVideoLayer[] | undefined => {\n    const entry = this.layers.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n    return entry?.layers;\n  };\n\n  /**\n   * Sets the video layers for the given track.\n   */\n  setLayers = (\n    publishOption: PublishOption,\n    layers: OptimalVideoLayer[] = [],\n  ) => {\n    const entry = this.findLayer(publishOption);\n    if (entry) {\n      entry.layers = layers;\n    } else {\n      this.layers.push({ publishOption, layers });\n    }\n  };\n\n  private findTransceiver = (publishOption: Partial<PublishOption>) => {\n    return this.cache.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n  };\n\n  private findLayer = (publishOption: PublishOption) => {\n    return this.layers.find(\n      (item) =>\n        item.publishOption.id === publishOption.id &&\n        item.publishOption.trackType === publishOption.trackType,\n    );\n  };\n}\n","import { getLogger } from '../logger';\n\nexport const ensureExhausted = (x: never, message: string) => {\n  getLogger(['helpers'])('warn', message, x);\n};\n","import { TrackType } from '../../gen/video/sfu/models/models';\nimport { TrackMuteType } from '../../types';\nimport { ensureExhausted } from '../../helpers/ensureExhausted';\n\nexport const trackTypeToParticipantStreamKey = (\n  trackType: TrackType,\n):\n  | 'audioStream'\n  | 'videoStream'\n  | 'screenShareStream'\n  | 'screenShareAudioStream'\n  | undefined => {\n  switch (trackType) {\n    case TrackType.SCREEN_SHARE:\n      return 'screenShareStream';\n    case TrackType.SCREEN_SHARE_AUDIO:\n      return 'screenShareAudioStream';\n    case TrackType.VIDEO:\n      return 'videoStream';\n    case TrackType.AUDIO:\n      return 'audioStream';\n    case TrackType.UNSPECIFIED:\n      throw new Error('Track type is unspecified');\n    default:\n      ensureExhausted(trackType, 'Unknown track type');\n  }\n};\n\nexport const muteTypeToTrackType = (\n  muteType: TrackMuteType,\n): TrackType | undefined => {\n  switch (muteType) {\n    case 'audio':\n      return TrackType.AUDIO;\n    case 'video':\n      return TrackType.VIDEO;\n    case 'screenshare':\n      return TrackType.SCREEN_SHARE;\n    case 'screenshare_audio':\n      return TrackType.SCREEN_SHARE_AUDIO;\n    default:\n      ensureExhausted(muteType, 'Unknown mute type');\n  }\n};\n\nexport const toTrackType = (trackType: string): TrackType | undefined => {\n  switch (trackType) {\n    case 'TRACK_TYPE_AUDIO':\n      return TrackType.AUDIO;\n    case 'TRACK_TYPE_VIDEO':\n      return TrackType.VIDEO;\n    case 'TRACK_TYPE_SCREEN_SHARE':\n      return TrackType.SCREEN_SHARE;\n    case 'TRACK_TYPE_SCREEN_SHARE_AUDIO':\n      return TrackType.SCREEN_SHARE_AUDIO;\n    default:\n      return undefined;\n  }\n};\n\nexport const isAudioTrackType = (trackType: TrackType): boolean =>\n  trackType === TrackType.AUDIO || trackType === TrackType.SCREEN_SHARE_AUDIO;\n","import { isSvcCodec } from './codecs';\nimport {\n  PublishOption,\n  VideoDimension,\n  VideoLayer,\n  VideoQuality,\n} from '../gen/video/sfu/models/models';\nimport { isAudioTrackType } from './helpers/tracks';\n\nexport type OptimalVideoLayer = RTCRtpEncodingParameters & {\n  width: number;\n  height: number;\n  // NOTE OL: should be part of RTCRtpEncodingParameters\n  scalabilityMode?: string;\n};\n\nconst defaultBitratePerRid: Record<string, number> = {\n  q: 300000,\n  h: 750000,\n  f: 1250000,\n};\n\n/**\n * In SVC, we need to send only one video encoding (layer).\n * this layer will have the additional spatial and temporal layers\n * defined via the scalabilityMode property.\n *\n * @param layers the layers to process.\n */\nexport const toSvcEncodings = (\n  layers: OptimalVideoLayer[] | undefined,\n): RTCRtpEncodingParameters[] | undefined => {\n  if (!layers) return;\n  // we take the highest quality layer, and we assign it to `q` encoder.\n  const withRid = (rid: string) => (l: OptimalVideoLayer) => l.rid === rid;\n  const highestLayer =\n    layers.find(withRid('f')) ||\n    layers.find(withRid('h')) ||\n    layers.find(withRid('q'));\n  return [{ ...highestLayer, rid: 'q' }];\n};\n\n/**\n * Converts the rid to a video quality.\n */\nexport const ridToVideoQuality = (rid: string): VideoQuality => {\n  return rid === 'q'\n    ? VideoQuality.LOW_UNSPECIFIED\n    : rid === 'h'\n      ? VideoQuality.MID\n      : VideoQuality.HIGH; // default to HIGH\n};\n\n/**\n * Converts the given video layers to SFU video layers.\n */\nexport const toVideoLayers = (\n  layers: OptimalVideoLayer[] | undefined = [],\n): VideoLayer[] => {\n  return layers.map<VideoLayer>((layer) => ({\n    rid: layer.rid || '',\n    bitrate: layer.maxBitrate || 0,\n    fps: layer.maxFramerate || 0,\n    quality: ridToVideoQuality(layer.rid || ''),\n    videoDimension: { width: layer.width, height: layer.height },\n  }));\n};\n\n/**\n * Converts the spatial and temporal layers to a scalability mode.\n */\nconst toScalabilityMode = (spatialLayers: number, temporalLayers: number) =>\n  `L${spatialLayers}T${temporalLayers}${spatialLayers > 1 ? '_KEY' : ''}`;\n\n/**\n * Determines the most optimal video layers for the given track.\n *\n * @param videoTrack the video track to find optimal layers for.\n * @param publishOption the publish options for the track.\n */\nexport const computeVideoLayers = (\n  videoTrack: MediaStreamTrack,\n  publishOption: PublishOption,\n): OptimalVideoLayer[] | undefined => {\n  if (isAudioTrackType(publishOption.trackType)) return;\n  const optimalVideoLayers: OptimalVideoLayer[] = [];\n  const settings = videoTrack.getSettings();\n  const { width = 0, height = 0 } = settings;\n  const {\n    bitrate,\n    codec,\n    fps,\n    maxSpatialLayers = 3,\n    maxTemporalLayers = 3,\n    videoDimension = { width: 1280, height: 720 },\n    useSingleLayer,\n  } = publishOption;\n  const maxBitrate = getComputedMaxBitrate(\n    videoDimension,\n    width,\n    height,\n    bitrate,\n  );\n  let downscaleFactor = 1;\n  let bitrateFactor = 1;\n  const svcCodec = isSvcCodec(codec?.name);\n  for (const rid of ['f', 'h', 'q'].slice(0, maxSpatialLayers)) {\n    const layer: OptimalVideoLayer = {\n      active: true,\n      rid,\n      width: Math.round(width / downscaleFactor),\n      height: Math.round(height / downscaleFactor),\n      maxBitrate:\n        Math.round(maxBitrate / bitrateFactor) || defaultBitratePerRid[rid],\n      maxFramerate: fps,\n    };\n    if (svcCodec) {\n      // for SVC codecs, we need to set the scalability mode, and the\n      // codec will handle the rest (layers, temporal layers, etc.)\n      layer.scalabilityMode = toScalabilityMode(\n        useSingleLayer ? 1 : maxSpatialLayers,\n        maxTemporalLayers,\n      );\n    } else {\n      // for non-SVC codecs, we need to downscale proportionally (simulcast)\n      layer.scaleResolutionDownBy = downscaleFactor;\n    }\n\n    downscaleFactor *= 2;\n    bitrateFactor *= 2;\n\n    // Reversing the order [f, h, q] to [q, h, f] as Chrome uses encoding index\n    // when deciding which layer to disable when CPU or bandwidth is constrained.\n    // Encodings should be ordered in increasing spatial resolution order.\n    optimalVideoLayers.unshift(layer);\n  }\n\n  // for simplicity, we start with all layers enabled, then this function\n  // will clear/reassign the layers that are not needed\n  return withSimulcastConstraints(settings, optimalVideoLayers, useSingleLayer);\n};\n\n/**\n * Computes the maximum bitrate for a given resolution.\n * If the current resolution is lower than the target resolution,\n * we want to proportionally reduce the target bitrate.\n * If the current resolution is higher than the target resolution,\n * we want to use the target bitrate.\n *\n * @param targetResolution the target resolution.\n * @param currentWidth the current width of the track.\n * @param currentHeight the current height of the track.\n * @param bitrate the target bitrate.\n */\nexport const getComputedMaxBitrate = (\n  targetResolution: VideoDimension,\n  currentWidth: number,\n  currentHeight: number,\n  bitrate: number,\n): number => {\n  // if the current resolution is lower than the target resolution,\n  // we want to proportionally reduce the target bitrate\n  const { width: targetWidth, height: targetHeight } = targetResolution;\n  if (currentWidth < targetWidth || currentHeight < targetHeight) {\n    const currentPixels = currentWidth * currentHeight;\n    const targetPixels = targetWidth * targetHeight;\n    const reductionFactor = currentPixels / targetPixels;\n    return Math.round(bitrate * reductionFactor);\n  }\n  return bitrate;\n};\n\n/**\n * Browsers have different simulcast constraints for different video resolutions.\n *\n * This function modifies the provided list of video layers according to the\n * current implementation of simulcast constraints in the Chromium based browsers.\n *\n * https://chromium.googlesource.com/external/webrtc/+/refs/heads/main/media/engine/simulcast.cc#90\n */\nconst withSimulcastConstraints = (\n  settings: MediaTrackSettings,\n  optimalVideoLayers: OptimalVideoLayer[],\n  useSingleLayer: boolean,\n) => {\n  let layers: OptimalVideoLayer[];\n\n  const size = Math.max(settings.width || 0, settings.height || 0);\n  if (size <= 320) {\n    // provide only one layer 320x240 (q), the one with the highest quality\n    layers = optimalVideoLayers.filter((layer) => layer.rid === 'f');\n  } else if (size <= 640) {\n    // provide two layers, 160x120 (q) and 640x480 (h)\n    layers = optimalVideoLayers.filter((layer) => layer.rid !== 'h');\n  } else {\n    // provide three layers for sizes > 640x480\n    layers = optimalVideoLayers;\n  }\n\n  const ridMapping = ['q', 'h', 'f'];\n  return layers.map<OptimalVideoLayer>((layer, index, arr) => ({\n    ...layer,\n    rid: ridMapping[index], // reassign rid\n    active: useSingleLayer && index < arr.length - 1 ? false : layer.active,\n  }));\n};\n","import { parse } from 'sdp-transform';\n\n/**\n * Extracts the mid from the transceiver or the SDP.\n *\n * @param transceiver the transceiver.\n * @param transceiverInitIndex the index of the transceiver in the transceiver's init array.\n * @param sdp the SDP.\n */\nexport const extractMid = (\n  transceiver: RTCRtpTransceiver,\n  transceiverInitIndex: number,\n  sdp: string | undefined,\n): string => {\n  if (transceiver.mid) return transceiver.mid;\n  if (!sdp) return String(transceiverInitIndex);\n\n  const track = transceiver.sender.track!;\n  const parsedSdp = parse(sdp);\n  const media = parsedSdp.media.find((m) => {\n    return (\n      m.type === track.kind &&\n      // if `msid` is not present, we assume that the track is the first one\n      (m.msid?.includes(track.id) ?? true)\n    );\n  });\n  if (typeof media?.mid !== 'undefined') return String(media.mid);\n  if (transceiverInitIndex < 0) return '';\n  return String(transceiverInitIndex);\n};\n","import {\n  BasePeerConnection,\n  BasePeerConnectionOpts,\n} from './BasePeerConnection';\nimport { TransceiverCache } from './TransceiverCache';\nimport {\n  PeerType,\n  PublishOption,\n  TrackInfo,\n  TrackType,\n} from '../gen/video/sfu/models/models';\nimport { VideoSender } from '../gen/video/sfu/event/events';\nimport {\n  computeVideoLayers,\n  toSvcEncodings,\n  toVideoLayers,\n} from './videoLayers';\nimport { isSvcCodec } from './codecs';\nimport { isAudioTrackType } from './helpers/tracks';\nimport { extractMid } from './helpers/sdp';\nimport { withoutConcurrency } from '../helpers/concurrency';\nimport { isReactNative } from '../helpers/platforms';\n\nexport type PublisherConstructorOpts = BasePeerConnectionOpts & {\n  publishOptions: PublishOption[];\n};\n\n/**\n * The `Publisher` is responsible for publishing/unpublishing media streams to/from the SFU\n *\n * @internal\n */\nexport class Publisher extends BasePeerConnection {\n  private readonly transceiverCache = new TransceiverCache();\n  private readonly clonedTracks = new Set<MediaStreamTrack>();\n  private publishOptions: PublishOption[];\n\n  /**\n   * Constructs a new `Publisher` instance.\n   */\n  constructor({ publishOptions, ...baseOptions }: PublisherConstructorOpts) {\n    super(PeerType.PUBLISHER_UNSPECIFIED, baseOptions);\n    this.publishOptions = publishOptions;\n\n    this.on('iceRestart', (iceRestart) => {\n      if (iceRestart.peerType !== PeerType.PUBLISHER_UNSPECIFIED) return;\n      this.restartIce().catch((err) => {\n        const reason = `ICE restart failed`;\n        this.logger('warn', reason, err);\n        this.onUnrecoverableError?.(`${reason}: ${err}`);\n      });\n    });\n\n    this.on('changePublishQuality', async (event) => {\n      for (const videoSender of event.videoSenders) {\n        await this.changePublishQuality(videoSender);\n      }\n    });\n\n    this.on('changePublishOptions', (event) => {\n      this.publishOptions = event.publishOptions;\n      return this.syncPublishOptions();\n    });\n  }\n\n  /**\n   * Disposes this Publisher instance.\n   */\n  dispose() {\n    super.dispose();\n    this.stopAllTracks();\n    this.clonedTracks.clear();\n  }\n\n  /**\n   * Starts publishing the given track of the given media stream.\n   *\n   * Consecutive calls to this method will replace the stream.\n   * The previous stream will be stopped.\n   *\n   * @param track the track to publish.\n   * @param trackType the track type to publish.\n   */\n  publish = async (track: MediaStreamTrack, trackType: TrackType) => {\n    if (!this.publishOptions.some((o) => o.trackType === trackType)) {\n      throw new Error(`No publish options found for ${TrackType[trackType]}`);\n    }\n\n    for (const publishOption of this.publishOptions) {\n      if (publishOption.trackType !== trackType) continue;\n\n      // create a clone of the track as otherwise the same trackId will\n      // appear in the SDP in multiple transceivers\n      const trackToPublish = this.cloneTrack(track);\n\n      const transceiver = this.transceiverCache.get(publishOption);\n      if (!transceiver) {\n        await this.addTransceiver(trackToPublish, publishOption);\n      } else {\n        const previousTrack = transceiver.sender.track;\n        await this.updateTransceiver(transceiver, trackToPublish, trackType);\n        if (!isReactNative()) {\n          this.stopTrack(previousTrack);\n        }\n      }\n    }\n  };\n\n  /**\n   * Adds a new transceiver carrying the given track to the peer connection.\n   */\n  private addTransceiver = async (\n    track: MediaStreamTrack,\n    publishOption: PublishOption,\n  ) => {\n    const videoEncodings = computeVideoLayers(track, publishOption);\n    const sendEncodings = isSvcCodec(publishOption.codec?.name)\n      ? toSvcEncodings(videoEncodings)\n      : videoEncodings;\n    const transceiver = this.pc.addTransceiver(track, {\n      direction: 'sendonly',\n      sendEncodings,\n    });\n\n    const params = transceiver.sender.getParameters();\n    params.degradationPreference = 'maintain-framerate';\n    await transceiver.sender.setParameters(params);\n\n    const trackType = publishOption.trackType;\n    this.logger('debug', `Added ${TrackType[trackType]} transceiver`);\n    this.transceiverCache.add(publishOption, transceiver);\n    this.trackIdToTrackType.set(track.id, trackType);\n\n    await this.negotiate();\n  };\n\n  /**\n   * Updates the transceiver with the given track and track type.\n   */\n  private updateTransceiver = async (\n    transceiver: RTCRtpTransceiver,\n    track: MediaStreamTrack | null,\n    trackType: TrackType,\n  ) => {\n    const sender = transceiver.sender;\n    if (sender.track) this.trackIdToTrackType.delete(sender.track.id);\n    await sender.replaceTrack(track);\n    if (track) this.trackIdToTrackType.set(track.id, trackType);\n  };\n\n  /**\n   * Synchronizes the current Publisher state with the provided publish options.\n   */\n  private syncPublishOptions = async () => {\n    // enable publishing with new options -> [av1, vp9]\n    for (const publishOption of this.publishOptions) {\n      const { trackType } = publishOption;\n      if (!this.isPublishing(trackType)) continue;\n      if (this.transceiverCache.has(publishOption)) continue;\n\n      const item = this.transceiverCache.find(\n        (i) =>\n          !!i.transceiver.sender.track &&\n          i.publishOption.trackType === trackType,\n      );\n      if (!item || !item.transceiver) continue;\n\n      // take the track from the existing transceiver for the same track type,\n      // clone it and publish it with the new publish options\n      const track = this.cloneTrack(item.transceiver.sender.track!);\n      await this.addTransceiver(track, publishOption);\n    }\n\n    // stop publishing with options not required anymore -> [vp9]\n    for (const item of this.transceiverCache.items()) {\n      const { publishOption, transceiver } = item;\n      const hasPublishOption = this.publishOptions.some(\n        (option) =>\n          option.id === publishOption.id &&\n          option.trackType === publishOption.trackType,\n      );\n      if (hasPublishOption) continue;\n      // it is safe to stop the track here, it is a clone\n      this.stopTrack(transceiver.sender.track);\n      await this.updateTransceiver(transceiver, null, publishOption.trackType);\n    }\n  };\n\n  /**\n   * Returns true if the given track type is currently being published to the SFU.\n   *\n   * @param trackType the track type to check.\n   */\n  isPublishing = (trackType: TrackType): boolean => {\n    for (const item of this.transceiverCache.items()) {\n      if (item.publishOption.trackType !== trackType) continue;\n\n      const track = item.transceiver.sender.track;\n      if (!track) continue;\n\n      if (track.readyState === 'live' && track.enabled) return true;\n    }\n    return false;\n  };\n\n  /**\n   * Stops the cloned track that is being published to the SFU.\n   */\n  stopTracks = (...trackTypes: TrackType[]) => {\n    for (const item of this.transceiverCache.items()) {\n      const { publishOption, transceiver } = item;\n      if (!trackTypes.includes(publishOption.trackType)) continue;\n      this.stopTrack(transceiver.sender.track);\n    }\n  };\n\n  /**\n   * Stops all the cloned tracks that are being published to the SFU.\n   */\n  stopAllTracks = () => {\n    for (const { transceiver } of this.transceiverCache.items()) {\n      this.stopTrack(transceiver.sender.track);\n    }\n    for (const track of this.clonedTracks) {\n      this.stopTrack(track);\n    }\n  };\n\n  private changePublishQuality = async (videoSender: VideoSender) => {\n    const { trackType, layers, publishOptionId } = videoSender;\n    const enabledLayers = layers.filter((l) => l.active);\n\n    const tag = 'Update publish quality:';\n    this.logger('info', `${tag} requested layers by SFU:`, enabledLayers);\n\n    const transceiverId = this.transceiverCache.find(\n      (t) =>\n        t.publishOption.id === publishOptionId &&\n        t.publishOption.trackType === trackType,\n    );\n    const sender = transceiverId?.transceiver.sender;\n    if (!sender) {\n      return this.logger('warn', `${tag} no video sender found.`);\n    }\n\n    const params = sender.getParameters();\n    if (params.encodings.length === 0) {\n      return this.logger('warn', `${tag} there are no encodings set.`);\n    }\n\n    const codecInUse = transceiverId?.publishOption.codec?.name;\n    const usesSvcCodec = codecInUse && isSvcCodec(codecInUse);\n\n    let changed = false;\n    for (const encoder of params.encodings) {\n      const layer = usesSvcCodec\n        ? // for SVC, we only have one layer (q) and often rid is omitted\n          enabledLayers[0]\n        : // for non-SVC, we need to find the layer by rid (simulcast)\n          (enabledLayers.find((l) => l.name === encoder.rid) ??\n          (params.encodings.length === 1 ? enabledLayers[0] : undefined));\n\n      // flip 'active' flag only when necessary\n      const shouldActivate = !!layer?.active;\n      if (shouldActivate !== encoder.active) {\n        encoder.active = shouldActivate;\n        changed = true;\n      }\n\n      // skip the rest of the settings if the layer is disabled or not found\n      if (!layer) continue;\n\n      const {\n        maxFramerate,\n        scaleResolutionDownBy,\n        maxBitrate,\n        scalabilityMode,\n      } = layer;\n      if (\n        scaleResolutionDownBy >= 1 &&\n        scaleResolutionDownBy !== encoder.scaleResolutionDownBy\n      ) {\n        encoder.scaleResolutionDownBy = scaleResolutionDownBy;\n        changed = true;\n      }\n      if (maxBitrate > 0 && maxBitrate !== encoder.maxBitrate) {\n        encoder.maxBitrate = maxBitrate;\n        changed = true;\n      }\n      if (maxFramerate > 0 && maxFramerate !== encoder.maxFramerate) {\n        encoder.maxFramerate = maxFramerate;\n        changed = true;\n      }\n      // @ts-expect-error scalabilityMode is not in the typedefs yet\n      if (scalabilityMode && scalabilityMode !== encoder.scalabilityMode) {\n        // @ts-expect-error scalabilityMode is not in the typedefs yet\n        encoder.scalabilityMode = scalabilityMode;\n        changed = true;\n      }\n    }\n\n    const activeEncoders = params.encodings.filter((e) => e.active);\n    if (!changed) {\n      return this.logger('info', `${tag} no change:`, activeEncoders);\n    }\n\n    await sender.setParameters(params);\n    this.logger('info', `${tag} enabled rids:`, activeEncoders);\n  };\n\n  /**\n   * Restarts the ICE connection and renegotiates with the SFU.\n   */\n  restartIce = async (): Promise<void> => {\n    this.logger('debug', 'Restarting ICE connection');\n    const signalingState = this.pc.signalingState;\n    if (this.isIceRestarting || signalingState === 'have-local-offer') {\n      this.logger('debug', 'ICE restart is already in progress');\n      return;\n    }\n    await this.negotiate({ iceRestart: true });\n  };\n\n  /**\n   * Initiates a new offer/answer exchange with the currently connected SFU.\n   *\n   * @param options the optional offer options to use.\n   */\n  private negotiate = async (options?: RTCOfferOptions): Promise<void> => {\n    return withoutConcurrency(`publisher.negotiate.${this.lock}`, async () => {\n      const offer = await this.pc.createOffer(options);\n      const tracks = this.getAnnouncedTracks(offer.sdp);\n      if (!tracks.length) throw new Error(`Can't negotiate without any tracks`);\n\n      try {\n        this.isIceRestarting = options?.iceRestart ?? false;\n        await this.pc.setLocalDescription(offer);\n\n        const { sdp = '' } = offer;\n        const { response } = await this.sfuClient.setPublisher({ sdp, tracks });\n        if (response.error) throw new Error(response.error.message);\n\n        const { sdp: answerSdp } = response;\n        await this.pc.setRemoteDescription({ type: 'answer', sdp: answerSdp });\n      } finally {\n        this.isIceRestarting = false;\n      }\n\n      this.addTrickledIceCandidates();\n    });\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   */\n  getPublishedTracks = (): MediaStreamTrack[] => {\n    const tracks: MediaStreamTrack[] = [];\n    for (const { transceiver } of this.transceiverCache.items()) {\n      const track = transceiver.sender.track;\n      if (track && track.readyState === 'live') tracks.push(track);\n    }\n    return tracks;\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   * @param sdp an optional SDP to extract the `mid` from.\n   */\n  getAnnouncedTracks = (sdp: string | undefined): TrackInfo[] => {\n    const trackInfos: TrackInfo[] = [];\n    for (const bundle of this.transceiverCache.items()) {\n      const { transceiver, publishOption } = bundle;\n      const track = transceiver.sender.track;\n      if (!track) continue;\n\n      trackInfos.push(this.toTrackInfo(transceiver, publishOption, sdp));\n    }\n    return trackInfos;\n  };\n\n  /**\n   * Returns a list of tracks that are currently being published.\n   * This method shall be used for the reconnection flow.\n   * There we shouldn't announce the tracks that have been stopped due to a codec switch.\n   */\n  getAnnouncedTracksForReconnect = (): TrackInfo[] => {\n    const sdp = this.pc.localDescription?.sdp;\n    const trackInfos: TrackInfo[] = [];\n    for (const publishOption of this.publishOptions) {\n      const transceiver = this.transceiverCache.get(publishOption);\n      if (!transceiver || !transceiver.sender.track) continue;\n\n      trackInfos.push(this.toTrackInfo(transceiver, publishOption, sdp));\n    }\n    return trackInfos;\n  };\n\n  /**\n   * Converts the given transceiver to a `TrackInfo` object.\n   */\n  private toTrackInfo = (\n    transceiver: RTCRtpTransceiver,\n    publishOption: PublishOption,\n    sdp: string | undefined,\n  ): TrackInfo => {\n    const track = transceiver.sender.track!;\n    const isTrackLive = track.readyState === 'live';\n    const layers = isTrackLive\n      ? computeVideoLayers(track, publishOption)\n      : this.transceiverCache.getLayers(publishOption);\n    this.transceiverCache.setLayers(publishOption, layers);\n\n    const isAudioTrack = isAudioTrackType(publishOption.trackType);\n    const isStereo = isAudioTrack && track.getSettings().channelCount === 2;\n    const transceiverIndex = this.transceiverCache.indexOf(transceiver);\n    const audioSettings = this.state.settings?.audio;\n\n    return {\n      trackId: track.id,\n      layers: toVideoLayers(layers),\n      trackType: publishOption.trackType,\n      mid: extractMid(transceiver, transceiverIndex, sdp),\n      stereo: isStereo,\n      dtx: isAudioTrack && !!audioSettings?.opus_dtx_enabled,\n      red: isAudioTrack && !!audioSettings?.redundant_coding_enabled,\n      muted: !isTrackLive,\n      codec: publishOption.codec,\n      publishOptionId: publishOption.id,\n    };\n  };\n\n  private cloneTrack = (track: MediaStreamTrack): MediaStreamTrack => {\n    const clone = track.clone();\n    this.clonedTracks.add(clone);\n    return clone;\n  };\n\n  private stopTrack = (track: MediaStreamTrack | null | undefined) => {\n    if (!track) return;\n    track.stop();\n    this.clonedTracks.delete(track);\n  };\n}\n","import {\n  BasePeerConnection,\n  BasePeerConnectionOpts,\n} from './BasePeerConnection';\nimport { PeerType } from '../gen/video/sfu/models/models';\nimport { SubscriberOffer } from '../gen/video/sfu/event/events';\nimport { toTrackType, trackTypeToParticipantStreamKey } from './helpers/tracks';\n\n/**\n * A wrapper around the `RTCPeerConnection` that handles the incoming\n * media streams from the SFU.\n *\n * @internal\n */\nexport class Subscriber extends BasePeerConnection {\n  /**\n   * Constructs a new `Subscriber` instance.\n   */\n  constructor(opts: BasePeerConnectionOpts) {\n    super(PeerType.SUBSCRIBER, opts);\n    this.pc.addEventListener('track', this.handleOnTrack);\n\n    this.on('subscriberOffer', async (subscriberOffer) => {\n      return this.negotiate(subscriberOffer).catch((err) => {\n        this.logger('error', `Negotiation failed.`, err);\n      });\n    });\n  }\n\n  /**\n   * Detaches the event handlers from the `RTCPeerConnection`.\n   * This is useful when we want to replace the `RTCPeerConnection`\n   * instance with a new one (in case of migration).\n   */\n  detachEventHandlers() {\n    super.detachEventHandlers();\n    this.pc.removeEventListener('track', this.handleOnTrack);\n  }\n\n  /**\n   * Restarts the ICE connection and renegotiates with the SFU.\n   */\n  restartIce = async () => {\n    this.logger('debug', 'Restarting ICE connection');\n    if (this.pc.signalingState === 'have-remote-offer') {\n      this.logger('debug', 'ICE restart is already in progress');\n      return;\n    }\n    if (this.pc.connectionState === 'new') {\n      this.logger(\n        'debug',\n        `ICE connection is not yet established, skipping restart.`,\n      );\n      return;\n    }\n    const previousIsIceRestarting = this.isIceRestarting;\n    try {\n      this.isIceRestarting = true;\n      await this.sfuClient.iceRestart({\n        peerType: PeerType.SUBSCRIBER,\n      });\n    } catch (e) {\n      // restore the previous state, as our intent for restarting ICE failed\n      this.isIceRestarting = previousIsIceRestarting;\n      throw e;\n    }\n  };\n\n  private handleOnTrack = (e: RTCTrackEvent) => {\n    const [primaryStream] = e.streams;\n    // example: `e3f6aaf8-b03d-4911-be36-83f47d37a76a:TRACK_TYPE_VIDEO`\n    const [trackId, rawTrackType] = primaryStream.id.split(':');\n    const participantToUpdate = this.state.participants.find(\n      (p) => p.trackLookupPrefix === trackId,\n    );\n    this.logger(\n      'debug',\n      `[onTrack]: Got remote ${rawTrackType} track for userId: ${participantToUpdate?.userId}`,\n      e.track.id,\n      e.track,\n    );\n\n    const trackDebugInfo = `${participantToUpdate?.userId} ${rawTrackType}:${trackId}`;\n    e.track.addEventListener('mute', () => {\n      this.logger('info', `[onTrack]: Track muted: ${trackDebugInfo}`);\n    });\n\n    e.track.addEventListener('unmute', () => {\n      this.logger('info', `[onTrack]: Track unmuted: ${trackDebugInfo}`);\n    });\n\n    e.track.addEventListener('ended', () => {\n      this.logger('info', `[onTrack]: Track ended: ${trackDebugInfo}`);\n      this.state.removeOrphanedTrack(primaryStream.id);\n    });\n\n    const trackType = toTrackType(rawTrackType);\n    if (!trackType) {\n      return this.logger('error', `Unknown track type: ${rawTrackType}`);\n    }\n\n    this.trackIdToTrackType.set(e.track.id, trackType);\n\n    if (!participantToUpdate) {\n      this.logger(\n        'warn',\n        `[onTrack]: Received track for unknown participant: ${trackId}`,\n        e,\n      );\n      this.state.registerOrphanedTrack({\n        id: primaryStream.id,\n        trackLookupPrefix: trackId,\n        track: primaryStream,\n        trackType,\n      });\n      return;\n    }\n\n    const streamKindProp = trackTypeToParticipantStreamKey(trackType);\n    if (!streamKindProp) {\n      this.logger('error', `Unknown track type: ${rawTrackType}`);\n      return;\n    }\n\n    // get the previous stream to dispose it later\n    // usually this happens during migration, when the stream is replaced\n    // with a new one but the old one is still in the state\n    const previousStream = participantToUpdate[streamKindProp];\n\n    // replace the previous stream with the new one, prevents flickering\n    this.state.updateParticipant(participantToUpdate.sessionId, {\n      [streamKindProp]: primaryStream,\n    });\n\n    // now, dispose the previous stream if it exists\n    if (previousStream) {\n      this.logger(\n        'info',\n        `[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${participantToUpdate.userId}`,\n      );\n      previousStream.getTracks().forEach((t) => {\n        t.stop();\n        previousStream.removeTrack(t);\n      });\n    }\n  };\n\n  private negotiate = async (subscriberOffer: SubscriberOffer) => {\n    await this.pc.setRemoteDescription({\n      type: 'offer',\n      sdp: subscriberOffer.sdp,\n    });\n\n    this.addTrickledIceCandidates();\n\n    const answer = await this.pc.createAnswer();\n    await this.pc.setLocalDescription(answer);\n\n    await this.sfuClient.sendAnswer({\n      peerType: PeerType.SUBSCRIBER,\n      sdp: answer.sdp || '',\n    });\n\n    this.isIceRestarting = false;\n  };\n}\n","export interface SafePromise<T> {\n  (): Promise<T>;\n  checkPending(): boolean;\n}\n\ntype Fulfillment<T> =\n  | {\n      status: 'resolved';\n      result: T;\n    }\n  | {\n      status: 'rejected';\n      error: unknown;\n    };\n\n/**\n * Saving a long-lived reference to a promise that can reject can be unsafe,\n * since rejecting the promise causes an unhandled rejection error (even if the\n * rejection is handled everywhere promise result is expected).\n *\n * To avoid that, we add both resolution and rejection handlers to the promise.\n * That way, the saved promise never rejects. A callback is provided as return\n * value to build a *new* promise, that resolves and rejects along with\n * the original promise.\n * @param promise Promise to wrap, which possibly rejects\n * @returns Callback to build a new promise, which resolves and rejects along\n * with the original promise\n */\nexport function makeSafePromise<T>(promise: Promise<T>): SafePromise<T> {\n  let isPending = true;\n\n  const safePromise: Promise<Fulfillment<T>> = promise\n    .then(\n      (result) => ({ status: 'resolved' as const, result }),\n      (error) => ({ status: 'rejected' as const, error }),\n    )\n    .finally(() => (isPending = false));\n\n  const unwrapPromise = () =>\n    safePromise.then((fulfillment) => {\n      if (fulfillment.status === 'rejected') throw fulfillment.error;\n      return fulfillment.result;\n    });\n\n  unwrapPromise.checkPending = () => isPending;\n  return unwrapPromise;\n}\n\nexport type PromiseWithResolvers<T> = {\n  promise: Promise<T>;\n  resolve: (value: T | PromiseLike<T>) => void;\n  reject: (reason: any) => void;\n  isResolved: () => boolean;\n  isRejected: () => boolean;\n};\n\n/**\n * Creates a new promise with resolvers.\n *\n * Based on:\n * - https://github.com/tc39/proposal-promise-with-resolvers/blob/main/polyfills.js\n */\nexport const promiseWithResolvers = <T = void>(): PromiseWithResolvers<T> => {\n  let resolve: (value: T | PromiseLike<T>) => void;\n  let reject: (reason: any) => void;\n  const promise = new Promise<T>((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n\n  let isResolved = false;\n  let isRejected = false;\n\n  const resolver = (value: T | PromiseLike<T>) => {\n    isResolved = true;\n    resolve(value);\n  };\n\n  const rejecter = (reason: any) => {\n    isRejected = true;\n    reject(reason);\n  };\n\n  return {\n    promise,\n    resolve: resolver,\n    reject: rejecter,\n    isResolved: () => isResolved,\n    isRejected: () => isRejected,\n  };\n};\n","const uninitialized = Symbol('uninitialized');\n\n/**\n * Lazily creates a value using a provided factory\n */\nexport function lazy<T>(factory: () => T): () => T {\n  let value: T | typeof uninitialized = uninitialized;\n  return () => {\n    if (value === uninitialized) {\n      value = factory();\n    }\n\n    return value;\n  };\n}\n","// Do not modify this file manually. Instead, edit worker.ts\n// and the run ./generate-timer-worker.sh\nexport const timerWorker = {\n  src: `const timerIdMapping = new Map();\nself.addEventListener('message', (event) => {\n    const request = event.data;\n    switch (request.type) {\n        case 'setTimeout':\n        case 'setInterval':\n            timerIdMapping.set(request.id, (request.type === 'setTimeout' ? setTimeout : setInterval)(() => {\n                tick(request.id);\n                if (request.type === 'setTimeout') {\n                    timerIdMapping.delete(request.id);\n                }\n            }, request.timeout));\n            break;\n        case 'clearTimeout':\n        case 'clearInterval':\n            (request.type === 'clearTimeout' ? clearTimeout : clearInterval)(timerIdMapping.get(request.id));\n            timerIdMapping.delete(request.id);\n            break;\n    }\n});\nfunction tick(id) {\n    const message = { type: 'tick', id };\n    self.postMessage(message);\n}`,\n};\n","import { lazy } from '../helpers/lazy';\nimport { getLogger } from '../logger';\nimport { TimerWorkerEvent, TimerWorkerRequest } from './types';\nimport { timerWorker } from './worker.build';\n\nclass TimerWorker {\n  private currentTimerId = 1;\n  private callbacks = new Map<number, () => void>();\n  private worker: Worker | undefined;\n  private fallback = false;\n\n  setup({ useTimerWorker = true }: { useTimerWorker?: boolean } = {}): void {\n    if (!useTimerWorker) {\n      this.fallback = true;\n      return;\n    }\n\n    try {\n      const source = timerWorker.src;\n      const blob = new Blob([source], {\n        type: 'application/javascript; charset=utf-8',\n      });\n      const script = URL.createObjectURL(blob);\n      this.worker = new Worker(script, { name: 'str-timer-worker' });\n      this.worker.addEventListener('message', (event) => {\n        const { type, id } = event.data as TimerWorkerEvent;\n        if (type === 'tick') {\n          this.callbacks.get(id)?.();\n        }\n      });\n    } catch (err: any) {\n      getLogger(['timer-worker'])('error', err);\n      this.fallback = true;\n    }\n  }\n\n  destroy(): void {\n    this.callbacks.clear();\n    this.worker?.terminate();\n    this.worker = undefined;\n    this.fallback = false;\n  }\n\n  get ready() {\n    return this.fallback || Boolean(this.worker);\n  }\n\n  setInterval(callback: () => void, timeout: number): number {\n    return this.setTimer('setInterval', callback, timeout);\n  }\n\n  clearInterval(id?: number): void {\n    this.clearTimer('clearInterval', id);\n  }\n\n  setTimeout(callback: () => void, timeout: number): number {\n    return this.setTimer('setTimeout', callback, timeout);\n  }\n\n  clearTimeout(id?: number): void {\n    this.clearTimer('clearTimeout', id);\n  }\n\n  private setTimer(\n    type: 'setTimeout' | 'setInterval',\n    callback: () => void,\n    timeout: number,\n  ) {\n    if (!this.ready) {\n      this.setup();\n    }\n\n    if (this.fallback) {\n      return (type === 'setTimeout' ? setTimeout : setInterval)(\n        callback,\n        timeout,\n      ) as unknown as number;\n    }\n\n    const id = this.getTimerId();\n\n    this.callbacks.set(id, () => {\n      callback();\n\n      // Timeouts are one-off operations, so no need to keep callback reference\n      // after timer has fired\n      if (type === 'setTimeout') {\n        this.callbacks.delete(id);\n      }\n    });\n\n    this.sendMessage({ type, id, timeout });\n    return id;\n  }\n\n  private clearTimer(type: 'clearTimeout' | 'clearInterval', id?: number) {\n    if (!id) {\n      return;\n    }\n\n    if (!this.ready) {\n      this.setup();\n    }\n\n    if (this.fallback) {\n      (type === 'clearTimeout' ? clearTimeout : clearInterval)(id);\n      return;\n    }\n\n    this.callbacks.delete(id);\n    this.sendMessage({ type, id });\n  }\n\n  private getTimerId() {\n    return this.currentTimerId++;\n  }\n\n  private sendMessage(message: TimerWorkerRequest) {\n    if (!this.worker) {\n      throw new Error(\"Cannot use timer worker before it's set up\");\n    }\n\n    this.worker.postMessage(message);\n  }\n}\n\nlet timerWorkerEnabled = false;\n\nexport const enableTimerWorker = () => {\n  timerWorkerEnabled = true;\n};\n\nexport const getTimers = lazy(() => {\n  const instance = new TimerWorker();\n  instance.setup({ useTimerWorker: timerWorkerEnabled });\n  return instance;\n});\n","import { SignalServerClient } from './gen/video/sfu/signal_rpc/signal.client';\nimport {\n  createSignalClient,\n  retryable,\n  withHeaders,\n  withRequestLogger,\n  withRequestTracer,\n} from './rpc';\nimport {\n  createWebSocketSignalChannel,\n  Dispatcher,\n  IceTrickleBuffer,\n  SfuEventKinds,\n} from './rtc';\nimport {\n  JoinRequest,\n  JoinResponse,\n  SfuRequest,\n} from './gen/video/sfu/event/events';\nimport {\n  ICERestartRequest,\n  SendAnswerRequest,\n  SendStatsRequest,\n  SetPublisherRequest,\n  TrackMuteState,\n  TrackSubscriptionDetails,\n} from './gen/video/sfu/signal_rpc/signal';\nimport { ICETrickle } from './gen/video/sfu/models/models';\nimport { StreamClient } from './coordinator/connection/client';\nimport { generateUUIDv4 } from './coordinator/connection/utils';\nimport { Credentials } from './gen/coordinator';\nimport { Logger } from './coordinator/connection/types';\nimport { getLogger, getLogLevel } from './logger';\nimport {\n  makeSafePromise,\n  PromiseWithResolvers,\n  promiseWithResolvers,\n  SafePromise,\n} from './helpers/promise';\nimport { getTimers } from './timers';\nimport { Tracer, TraceSlice } from './stats';\n\nexport type StreamSfuClientConstructor = {\n  /**\n   * The event dispatcher instance to use.\n   */\n  dispatcher: Dispatcher;\n\n  /**\n   * The credentials to use for the connection.\n   */\n  credentials: Credentials;\n\n  /**\n   * `sessionId` to use for the connection.\n   */\n  sessionId?: string;\n\n  /**\n   * A log tag to use for logging. Useful for debugging multiple instances.\n   */\n  logTag: string;\n\n  /**\n   * The timeout in milliseconds for waiting for the `joinResponse`.\n   * Defaults to 5000ms.\n   */\n  joinResponseTimeout?: number;\n\n  /**\n   * Callback for when the WebSocket connection is closed.\n   */\n  onSignalClose?: (reason: string) => void;\n\n  /**\n   * The StreamClient instance to use for the connection.\n   */\n  streamClient: StreamClient;\n\n  /**\n   * Flag to enable tracing.\n   */\n  enableTracing: boolean;\n};\n\n/**\n * The client used for exchanging information with the SFU.\n */\nexport class StreamSfuClient {\n  /**\n   * A buffer for ICE Candidates that are received before\n   * the Publisher and Subscriber Peer Connections are ready to handle them.\n   */\n  readonly iceTrickleBuffer = new IceTrickleBuffer();\n\n  /**\n   * The `sessionId` of the currently connected participant.\n   */\n  readonly sessionId: string;\n\n  /**\n   * The `edgeName` representing the edge the client is connected to.\n   */\n  readonly edgeName: string;\n\n  /**\n   * Holds the current WebSocket connection to the SFU.\n   */\n  private signalWs!: WebSocket;\n\n  /**\n   * Promise that resolves when the WebSocket connection is ready (open).\n   */\n  private signalReady!: SafePromise<WebSocket>;\n\n  /**\n   * Flag to indicate if the client is in the process of leaving the call.\n   * This is set to `true` when the user initiates the leave process.\n   */\n  isLeaving = false;\n\n  /**\n   * Flag to indicate if the client is in the process of closing the connection.\n   */\n  isClosing = false;\n\n  private readonly rpc: SignalServerClient;\n  private keepAliveInterval?: number;\n  private connectionCheckTimeout?: NodeJS.Timeout;\n  private migrateAwayTimeout?: NodeJS.Timeout;\n  private pingIntervalInMs = 10 * 1000;\n  private unhealthyTimeoutInMs = this.pingIntervalInMs + 5 * 1000;\n  private lastMessageTimestamp?: Date;\n  private readonly tracer?: Tracer;\n  private readonly unsubscribeIceTrickle: () => void;\n  private readonly unsubscribeNetworkChanged: () => void;\n  private readonly onSignalClose: ((reason: string) => void) | undefined;\n  private readonly logger: Logger;\n  private readonly logTag: string;\n  private readonly credentials: Credentials;\n  private readonly dispatcher: Dispatcher;\n  private readonly joinResponseTimeout: number;\n  private networkAvailableTask: PromiseWithResolvers<void> | undefined;\n  /**\n   * Promise that resolves when the JoinResponse is received.\n   * Rejects after a certain threshold if the response is not received.\n   */\n  private joinResponseTask = promiseWithResolvers<JoinResponse>();\n\n  /**\n   * Promise that resolves when the migration is complete.\n   * Rejects after a certain threshold if the migration is not complete.\n   */\n  private migrationTask?: PromiseWithResolvers<void>;\n\n  /**\n   * A controller to abort the current requests.\n   */\n  private readonly abortController = new AbortController();\n\n  /**\n   * The normal closure code. Used for controlled shutdowns.\n   */\n  static NORMAL_CLOSURE = 1000;\n  /**\n   * The error code used when the SFU connection is unhealthy.\n   * Usually, this means that no message has been received from the SFU for\n   * a certain amount of time (`connectionCheckTimeout`).\n   */\n  static ERROR_CONNECTION_UNHEALTHY = 4001;\n  /**\n   * The error code used when the SFU connection is disposed because a new\n   * connection is established or is about to be established.\n   * Here, we don't use 1000 (normal closure) because we don't want the\n   * SFU to clean up the resources associated with the current participant.\n   */\n  static DISPOSE_OLD_SOCKET = 4002;\n\n  /**\n   * Constructs a new SFU client.\n   */\n  constructor({\n    dispatcher,\n    credentials,\n    sessionId,\n    logTag,\n    joinResponseTimeout = 5000,\n    onSignalClose,\n    streamClient,\n    enableTracing,\n  }: StreamSfuClientConstructor) {\n    this.dispatcher = dispatcher;\n    this.sessionId = sessionId || generateUUIDv4();\n    this.onSignalClose = onSignalClose;\n    this.credentials = credentials;\n    const { server, token } = credentials;\n    this.edgeName = server.edge_name;\n    this.joinResponseTimeout = joinResponseTimeout;\n    this.logTag = logTag;\n    this.logger = getLogger(['SfuClient', logTag]);\n    this.tracer = enableTracing\n      ? new Tracer(`${logTag}-${this.edgeName}`)\n      : undefined;\n    this.rpc = createSignalClient({\n      baseUrl: server.url,\n      interceptors: [\n        withHeaders({ Authorization: `Bearer ${token}` }),\n        this.tracer && withRequestTracer(this.tracer.trace),\n        getLogLevel() === 'trace' && withRequestLogger(this.logger, 'trace'),\n      ].filter((v) => !!v),\n    });\n\n    // Special handling for the ICETrickle kind of events.\n    // The SFU might trigger these events before the initial RTC\n    // connection is established or \"JoinResponse\" received.\n    // In that case, those events (ICE candidates) need to be buffered\n    // and later added to the appropriate PeerConnection\n    // once the remoteDescription is known and set.\n    this.unsubscribeIceTrickle = dispatcher.on('iceTrickle', (iceTrickle) => {\n      this.iceTrickleBuffer.push(iceTrickle);\n    });\n\n    // listen to network changes to handle offline state\n    // we shouldn't attempt to recover websocket connection when offline\n    this.unsubscribeNetworkChanged = streamClient.on('network.changed', (e) => {\n      if (!e.online) {\n        this.networkAvailableTask = promiseWithResolvers();\n      } else {\n        this.networkAvailableTask?.resolve();\n      }\n    });\n\n    this.createWebSocket();\n  }\n\n  private createWebSocket = () => {\n    const eventsToTrace: Partial<Record<SfuEventKinds, boolean>> = {\n      callEnded: true,\n      changePublishQuality: true,\n      error: true,\n      goAway: true,\n    };\n    this.signalWs = createWebSocketSignalChannel({\n      logTag: this.logTag,\n      endpoint: `${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,\n      onMessage: (message) => {\n        this.lastMessageTimestamp = new Date();\n        this.scheduleConnectionCheck();\n        const eventKind = message.eventPayload.oneofKind;\n        if (eventsToTrace[eventKind]) {\n          this.tracer?.trace(eventKind, message);\n        }\n        this.dispatcher.dispatch(message, this.logTag);\n      },\n    });\n\n    this.signalReady = makeSafePromise(\n      Promise.race<WebSocket>([\n        new Promise((resolve, reject) => {\n          const onOpen = () => {\n            this.signalWs.removeEventListener('open', onOpen);\n            resolve(this.signalWs);\n          };\n\n          this.signalWs.addEventListener('open', onOpen);\n\n          this.signalWs.addEventListener('close', (e) => {\n            this.handleWebSocketClose(e);\n            // Normally, this shouldn't have any effect, because WS should never emit 'close'\n            // before emitting 'open'. However, strager things have happened, and we don't\n            // want to leave signalReady in pending state.\n            reject(new Error('SFU WS closed unexpectedly'));\n          });\n        }),\n\n        new Promise((resolve, reject) => {\n          setTimeout(\n            () => reject(new Error('SFU WS connection timed out')),\n            this.joinResponseTimeout,\n          );\n        }),\n      ]),\n    );\n  };\n\n  private cleanUpWebSocket = () => {\n    this.signalWs.removeEventListener('close', this.handleWebSocketClose);\n  };\n\n  get isHealthy() {\n    return (\n      this.signalWs.readyState === WebSocket.OPEN &&\n      this.joinResponseTask.isResolved()\n    );\n  }\n\n  get joinTask() {\n    return this.joinResponseTask.promise;\n  }\n\n  private handleWebSocketClose = (e: CloseEvent) => {\n    this.signalWs.removeEventListener('close', this.handleWebSocketClose);\n    getTimers().clearInterval(this.keepAliveInterval);\n    clearTimeout(this.connectionCheckTimeout);\n    this.onSignalClose?.(`${e.code} ${e.reason}`);\n  };\n\n  close = (code: number = StreamSfuClient.NORMAL_CLOSURE, reason?: string) => {\n    this.isClosing = true;\n    if (this.signalWs.readyState === WebSocket.OPEN) {\n      this.logger('debug', `Closing SFU WS connection: ${code} - ${reason}`);\n      this.signalWs.close(code, `js-client: ${reason}`);\n      this.cleanUpWebSocket();\n    }\n    this.dispose();\n  };\n\n  private dispose = () => {\n    this.logger('debug', 'Disposing SFU client');\n    this.unsubscribeIceTrickle();\n    this.unsubscribeNetworkChanged();\n    clearInterval(this.keepAliveInterval);\n    clearTimeout(this.connectionCheckTimeout);\n    clearTimeout(this.migrateAwayTimeout);\n    this.abortController.abort();\n    this.migrationTask?.resolve();\n    this.iceTrickleBuffer.dispose();\n  };\n\n  getTrace = (): TraceSlice | undefined => {\n    return this.tracer?.take();\n  };\n\n  leaveAndClose = async (reason: string) => {\n    await this.joinTask;\n    try {\n      this.isLeaving = true;\n      await this.notifyLeave(reason);\n    } catch (err) {\n      this.logger('debug', 'Error notifying SFU about leaving call', err);\n    }\n\n    this.close(StreamSfuClient.NORMAL_CLOSURE, reason.substring(0, 115));\n  };\n\n  updateSubscriptions = async (tracks: TrackSubscriptionDetails[]) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.updateSubscriptions({ sessionId: this.sessionId, tracks }),\n      this.abortController.signal,\n    );\n  };\n\n  setPublisher = async (data: Omit<SetPublisherRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.setPublisher({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  sendAnswer = async (data: Omit<SendAnswerRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.sendAnswer({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  iceTrickle = async (data: Omit<ICETrickle, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.iceTrickle({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  iceRestart = async (data: Omit<ICERestartRequest, 'sessionId'>) => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.iceRestart({ ...data, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  updateMuteStates = async (muteStates: TrackMuteState[]) => {\n    await this.joinTask;\n    return retryable(\n      () =>\n        this.rpc.updateMuteStates({ muteStates, sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  sendStats = async (stats: Omit<SendStatsRequest, 'sessionId'>) => {\n    await this.joinTask;\n    // NOTE: we don't retry sending stats\n    return this.rpc.sendStats({ ...stats, sessionId: this.sessionId });\n  };\n\n  startNoiseCancellation = async () => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.startNoiseCancellation({ sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  stopNoiseCancellation = async () => {\n    await this.joinTask;\n    return retryable(\n      () => this.rpc.stopNoiseCancellation({ sessionId: this.sessionId }),\n      this.abortController.signal,\n    );\n  };\n\n  enterMigration = async (opts: { timeout?: number } = {}) => {\n    this.isLeaving = true;\n    const { timeout = 7 * 1000 } = opts;\n\n    this.migrationTask?.reject(new Error('Cancelled previous migration'));\n    const task = (this.migrationTask = promiseWithResolvers());\n    const unsubscribe = this.dispatcher.on(\n      'participantMigrationComplete',\n      () => {\n        unsubscribe();\n        clearTimeout(this.migrateAwayTimeout);\n        task.resolve();\n      },\n    );\n    this.migrateAwayTimeout = setTimeout(() => {\n      unsubscribe();\n      task.reject(\n        new Error(\n          `Migration (${this.logTag}) failed to complete in ${timeout}ms`,\n        ),\n      );\n    }, timeout);\n\n    return task.promise;\n  };\n\n  join = async (\n    data: Omit<JoinRequest, 'sessionId' | 'token'>,\n  ): Promise<JoinResponse> => {\n    // wait for the signal web socket to be ready before sending \"joinRequest\"\n    await this.signalReady();\n    if (\n      this.joinResponseTask.isResolved() ||\n      this.joinResponseTask.isRejected()\n    ) {\n      // we need to lock the RPC requests until we receive a JoinResponse.\n      // that's why we have this primitive lock mechanism.\n      // the client starts with already initialized joinResponseTask,\n      // and this code creates a new one for the next join request.\n      this.joinResponseTask = promiseWithResolvers<JoinResponse>();\n    }\n\n    // capture a reference to the current joinResponseTask as it might\n    // be replaced with a new one in case a second join request is made\n    const current = this.joinResponseTask;\n\n    let timeoutId: NodeJS.Timeout | undefined = undefined;\n    const unsubscribe = this.dispatcher.on('joinResponse', (joinResponse) => {\n      this.logger('debug', 'Received joinResponse', joinResponse);\n      clearTimeout(timeoutId);\n      unsubscribe();\n      this.keepAlive();\n      current.resolve(joinResponse);\n    });\n\n    timeoutId = setTimeout(() => {\n      unsubscribe();\n      current.reject(new Error('Waiting for \"joinResponse\" has timed out'));\n    }, this.joinResponseTimeout);\n\n    const joinRequest = SfuRequest.create({\n      requestPayload: {\n        oneofKind: 'joinRequest',\n        joinRequest: JoinRequest.create({\n          ...data,\n          sessionId: this.sessionId,\n          token: this.credentials.token,\n        }),\n      },\n    });\n\n    this.tracer?.trace('joinRequest', joinRequest);\n    await this.send(joinRequest);\n\n    return current.promise;\n  };\n\n  private ping = async () => {\n    return this.send(\n      SfuRequest.create({\n        requestPayload: {\n          oneofKind: 'healthCheckRequest',\n          healthCheckRequest: {},\n        },\n      }),\n    );\n  };\n\n  private notifyLeave = async (reason: string) => {\n    return this.send(\n      SfuRequest.create({\n        requestPayload: {\n          oneofKind: 'leaveCallRequest',\n          leaveCallRequest: {\n            sessionId: this.sessionId,\n            reason,\n          },\n        },\n      }),\n    );\n  };\n\n  private send = async (message: SfuRequest) => {\n    await this.signalReady(); // wait for the signal ws to be open\n    const msgJson = SfuRequest.toJson(message);\n    if (this.signalWs.readyState !== WebSocket.OPEN) {\n      this.logger('debug', 'Signal WS is not open. Skipping message', msgJson);\n      return;\n    }\n    this.logger('debug', `Sending message to: ${this.edgeName}`, msgJson);\n    this.signalWs.send(SfuRequest.toBinary(message));\n  };\n\n  private keepAlive = () => {\n    const timers = getTimers();\n    timers.clearInterval(this.keepAliveInterval);\n    this.keepAliveInterval = timers.setInterval(() => {\n      this.ping().catch((e) => {\n        this.logger('error', 'Error sending healthCheckRequest to SFU', e);\n      });\n    }, this.pingIntervalInMs);\n  };\n\n  private scheduleConnectionCheck = () => {\n    clearTimeout(this.connectionCheckTimeout);\n    this.connectionCheckTimeout = setTimeout(() => {\n      if (this.lastMessageTimestamp) {\n        const timeSinceLastMessage =\n          new Date().getTime() - this.lastMessageTimestamp.getTime();\n\n        if (timeSinceLastMessage > this.unhealthyTimeoutInMs) {\n          this.close(\n            StreamSfuClient.ERROR_CONNECTION_UNHEALTHY,\n            `SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`,\n          );\n        }\n      }\n    }, this.unhealthyTimeoutInMs);\n  };\n}\n","import { SfuEvent } from '../gen/video/sfu/event/events';\nimport { getLogger } from '../logger';\nimport { DispatchableMessage, SfuEventKinds } from './Dispatcher';\n\nexport const createWebSocketSignalChannel = (opts: {\n  endpoint: string;\n  onMessage: <K extends SfuEventKinds>(message: DispatchableMessage<K>) => void;\n  logTag: string;\n}) => {\n  const { endpoint, onMessage, logTag } = opts;\n  const logger = getLogger(['SfuClientWS', logTag]);\n  logger('debug', 'Creating signaling WS channel:', endpoint);\n  const ws = new WebSocket(endpoint);\n  ws.binaryType = 'arraybuffer'; // do we need this?\n\n  ws.addEventListener('error', (e) => {\n    logger('error', 'Signaling WS channel error', e);\n  });\n\n  ws.addEventListener('close', (e) => {\n    logger('info', 'Signaling WS channel is closed', e);\n  });\n\n  ws.addEventListener('open', (e) => {\n    logger('info', 'Signaling WS channel is open', e);\n  });\n\n  ws.addEventListener('message', (e) => {\n    try {\n      const message =\n        e.data instanceof ArrayBuffer\n          ? SfuEvent.fromBinary(new Uint8Array(e.data))\n          : SfuEvent.fromJsonString(e.data.toString());\n\n      onMessage(message as DispatchableMessage<SfuEventKinds>);\n    } catch (err) {\n      logger(\n        'error',\n        'Failed to decode a message. Check whether the Proto models match.',\n        { event: e, error: err },\n      );\n    }\n  });\n  return ws;\n};\n","import { CallingState } from '../store';\nimport { Call } from '../Call';\nimport {\n  CallAcceptedEvent,\n  CallRejectedEvent,\n  OwnCapability,\n} from '../gen/coordinator';\nimport { CallEnded } from '../gen/video/sfu/event/events';\nimport { CallEndedReason } from '../gen/video/sfu/models/models';\n\n/**\n * Event handler that watched the delivery of `call.accepted`.\n * Once the event is received, the call is joined.\n */\nexport const watchCallAccepted = (call: Call) => {\n  return async function onCallAccepted(event: CallAcceptedEvent) {\n    // We want to discard the event if it's from the current user\n    if (event.user.id === call.currentUserId) return;\n    const { state } = call;\n    if (\n      event.call.created_by.id === call.currentUserId &&\n      state.callingState === CallingState.RINGING\n    ) {\n      await call.join();\n    }\n  };\n};\n\n/**\n * Event handler that watches delivery of `call.rejected` Websocket event.\n * Once the event is received, the call is left.\n */\nexport const watchCallRejected = (call: Call) => {\n  return async function onCallRejected(event: CallRejectedEvent) {\n    // We want to discard the event if it's from the current user\n    if (event.user.id === call.currentUserId) return;\n    const { call: eventCall } = event;\n    const { session: callSession } = eventCall;\n\n    if (!callSession) {\n      call.logger(\n        'warn',\n        'No call session provided. Ignoring call.rejected event.',\n        event,\n      );\n      return;\n    }\n\n    const rejectedBy = callSession.rejected_by;\n    const { members, callingState } = call.state;\n    if (callingState !== CallingState.RINGING) {\n      call.logger(\n        'info',\n        'Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.',\n        event,\n      );\n      return;\n    }\n    if (call.isCreatedByMe) {\n      const everyoneElseRejected = members\n        .filter((m) => m.user_id !== call.currentUserId)\n        .every((m) => rejectedBy[m.user_id]);\n      if (everyoneElseRejected) {\n        call.logger('info', 'everyone rejected, leaving the call');\n        await call.leave({\n          reject: true,\n          reason: 'cancel',\n          message: 'ring: everyone rejected',\n        });\n      }\n    } else {\n      if (rejectedBy[eventCall.created_by.id]) {\n        call.logger('info', 'call creator rejected, leaving call');\n        await call.leave({ message: 'ring: creator rejected' });\n      }\n    }\n  };\n};\n\n/**\n * Event handler that watches the delivery of `call.ended` Websocket event.\n */\nexport const watchCallEnded = (call: Call) => {\n  return function onCallEnded() {\n    const { callingState } = call.state;\n    if (\n      callingState !== CallingState.IDLE &&\n      callingState !== CallingState.LEFT\n    ) {\n      call\n        .leave({ message: 'call.ended event received', reject: false })\n        .catch((err) => {\n          call.logger('error', 'Failed to leave call after call.ended ', err);\n        });\n    }\n  };\n};\n\n/**\n * Watches for `callEnded` events.\n */\nexport const watchSfuCallEnded = (call: Call) => {\n  return call.on('callEnded', async (e: CallEnded) => {\n    if (call.state.callingState === CallingState.LEFT) return;\n    try {\n      if (e.reason === CallEndedReason.LIVE_ENDED) {\n        call.state.setBackstage(true);\n\n        // don't leave the call if the user has permission to join backstage\n        const { hasPermission } = call.permissionsContext;\n        if (hasPermission(OwnCapability.JOIN_BACKSTAGE)) return;\n      }\n      // `call.ended` event arrived after the call is already left\n      // and all event handlers are detached. We need to manually\n      // update the call state to reflect the call has ended.\n      call.state.setEndedAt(new Date());\n      const reason = CallEndedReason[e.reason];\n      await call.leave({ message: `callEnded received: ${reason}` });\n    } catch (err) {\n      call.logger(\n        'error',\n        'Failed to leave call after being ended by the SFU',\n        err,\n      );\n    }\n  });\n};\n","import { CallState } from '../store';\nimport type { CallGrantsUpdated } from '../gen/video/sfu/event/events';\nimport { OwnCapability } from '../gen/coordinator';\n\n/**\n * Event handler that watches for `callGrantsUpdated` events.\n *\n * @param state the call state to update.\n */\nexport const watchCallGrantsUpdated = (state: CallState) => {\n  return function onCallGrantsUpdated(event: CallGrantsUpdated) {\n    const { currentGrants } = event;\n    if (currentGrants) {\n      const { canPublishAudio, canPublishVideo, canScreenshare } =\n        currentGrants;\n\n      const update: Partial<Record<OwnCapability, boolean>> = {\n        [OwnCapability.SEND_AUDIO]: canPublishAudio,\n        [OwnCapability.SEND_VIDEO]: canPublishVideo,\n        [OwnCapability.SCREENSHARE]: canScreenshare,\n      };\n\n      const nextCapabilities = state.ownCapabilities.filter(\n        (capability) => update[capability] !== false,\n      );\n      Object.entries(update).forEach(([capability, value]) => {\n        if (value && !nextCapabilities.includes(capability as OwnCapability)) {\n          nextCapabilities.push(capability as OwnCapability);\n        }\n      });\n\n      state.setOwnCapabilities(nextCapabilities);\n    }\n  };\n};\n","import { Dispatcher } from '../rtc';\nimport { Call } from '../Call';\nimport { CallState } from '../store';\nimport { StreamVideoParticipantPatches } from '../types';\nimport { getLogger } from '../logger';\nimport type { PinsChanged } from '../gen/video/sfu/event/events';\nimport {\n  ErrorCode,\n  WebsocketReconnectStrategy,\n} from '../gen/video/sfu/models/models';\nimport { OwnCapability } from '../gen/coordinator';\n\nexport const watchConnectionQualityChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('connectionQualityChanged', (e) => {\n    const { connectionQualityUpdates } = e;\n    if (!connectionQualityUpdates) return;\n    state.updateParticipants(\n      connectionQualityUpdates.reduce<StreamVideoParticipantPatches>(\n        (patches, update) => {\n          const { sessionId, connectionQuality } = update;\n          patches[sessionId] = {\n            connectionQuality,\n          };\n          return patches;\n        },\n        {},\n      ),\n    );\n  });\n};\n\n/**\n * Updates the approximate number of participants in the call by peeking at the\n * health check events that our SFU sends.\n */\nexport const watchParticipantCountChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('healthCheckResponse', (e) => {\n    const { participantCount } = e;\n    if (participantCount) {\n      state.setParticipantCount(participantCount.total);\n      state.setAnonymousParticipantCount(participantCount.anonymous);\n    }\n  });\n};\n\nexport const watchLiveEnded = (dispatcher: Dispatcher, call: Call) => {\n  return dispatcher.on('error', (e) => {\n    if (e.error && e.error.code !== ErrorCode.LIVE_ENDED) return;\n\n    call.state.setBackstage(true);\n    if (!call.permissionsContext.hasPermission(OwnCapability.JOIN_BACKSTAGE)) {\n      call.leave({ message: 'live ended' }).catch((err) => {\n        call.logger('error', 'Failed to leave call after live ended', err);\n      });\n    }\n  });\n};\n\n/**\n * Watches and logs the errors reported by the currently connected SFU.\n */\nexport const watchSfuErrorReports = (dispatcher: Dispatcher) => {\n  return dispatcher.on('error', (e) => {\n    if (!e.error) return;\n    const logger = getLogger(['SfuClient']);\n    const { error, reconnectStrategy } = e;\n    logger('error', 'SFU reported error', {\n      code: ErrorCode[error.code],\n      reconnectStrategy: WebsocketReconnectStrategy[reconnectStrategy],\n      message: error.message,\n      shouldRetry: error.shouldRetry,\n    });\n  });\n};\n\n/**\n * Watches for `pinsUpdated` events and updates the pinned state of participants\n * in the call.\n */\nexport const watchPinsUpdated = (state: CallState) => {\n  return function onPinsUpdated(e: PinsChanged) {\n    const { pins } = e;\n    state.setServerSidePins(pins);\n  };\n};\n","import { Call } from '../Call';\nimport {\n  TrackType,\n  TrackUnpublishReason,\n} from '../gen/video/sfu/models/models';\n\n/**\n * An event handler that handles soft mutes.\n *\n * @param call the call.\n */\nexport const handleRemoteSoftMute = (call: Call) => {\n  return call.on('trackUnpublished', async (event) => {\n    const { cause, type, sessionId } = event;\n    const { localParticipant } = call.state;\n    if (\n      cause === TrackUnpublishReason.MODERATION &&\n      sessionId === localParticipant?.sessionId\n    ) {\n      const logger = call.logger;\n      logger(\n        'info',\n        `Local participant's ${TrackType[type]} track is muted remotely`,\n      );\n      try {\n        if (type === TrackType.VIDEO) {\n          await call.camera.disable();\n        } else if (type === TrackType.AUDIO) {\n          await call.microphone.disable();\n        } else if (\n          type === TrackType.SCREEN_SHARE ||\n          type === TrackType.SCREEN_SHARE_AUDIO\n        ) {\n          await call.screenShare.disable();\n        } else {\n          logger(\n            'warn',\n            'Unsupported track type to soft mute',\n            TrackType[type],\n          );\n        }\n      } catch (error) {\n        logger('error', 'Failed to stop publishing', error);\n      }\n    }\n  });\n};\n","/**\n * Adds unique values to an array.\n *\n * @param arr the array to add to.\n * @param values the values to add.\n */\nexport const pushToIfMissing = <T>(arr: T[], ...values: T[]): T[] => {\n  for (const v of values) {\n    if (!arr.includes(v)) {\n      arr.push(v);\n    }\n  }\n  return arr;\n};\n","import type {\n  ParticipantJoined,\n  ParticipantLeft,\n  ParticipantUpdated,\n  TrackPublished,\n  TrackUnpublished,\n} from '../gen/video/sfu/event/events';\nimport type { Participant } from '../gen/video/sfu/models/models';\nimport {\n  StreamVideoParticipant,\n  StreamVideoParticipantPatch,\n  VisibilityState,\n} from '../types';\nimport { CallState } from '../store';\nimport { trackTypeToParticipantStreamKey } from '../rtc';\nimport { pushToIfMissing } from '../helpers/array';\n\n/**\n * An event responder which handles the `participantJoined` event.\n */\nexport const watchParticipantJoined = (state: CallState) => {\n  return function onParticipantJoined(e: ParticipantJoined) {\n    const { participant } = e;\n    if (!participant) return;\n    // `state.updateOrAddParticipant` acts as a safeguard against\n    // potential duplicate events from the SFU.\n    //\n    // Although the SFU should not send duplicate events, we have seen\n    // some race conditions in the past during the `join-flow`.\n    // The SFU would send participant info as part of the `join`\n    // response and then follow up with a `participantJoined` event for\n    // already announced participants.\n    const orphanedTracks = reconcileOrphanedTracks(state, participant);\n    state.updateOrAddParticipant(\n      participant.sessionId,\n      Object.assign<\n        StreamVideoParticipant,\n        StreamVideoParticipantPatch | undefined,\n        Partial<StreamVideoParticipant>\n      >(participant, orphanedTracks, {\n        viewportVisibilityState: {\n          videoTrack: VisibilityState.UNKNOWN,\n          screenShareTrack: VisibilityState.UNKNOWN,\n        },\n      }),\n    );\n  };\n};\n\n/**\n * An event responder which handles the `participantLeft` event.\n */\nexport const watchParticipantLeft = (state: CallState) => {\n  return function onParticipantLeft(e: ParticipantLeft) {\n    const { participant } = e;\n    if (!participant) return;\n\n    state.setParticipants((participants) =>\n      participants.filter((p) => p.sessionId !== participant.sessionId),\n    );\n  };\n};\n\n/**\n * An event responder which handles the `participantUpdated` event.\n */\nexport const watchParticipantUpdated = (state: CallState) => {\n  return function onParticipantUpdated(e: ParticipantUpdated) {\n    const { participant } = e;\n    if (!participant) return;\n    state.updateParticipant(participant.sessionId, participant);\n  };\n};\n\n/**\n * An event responder which handles the `trackPublished` event.\n * The SFU will send this event when a participant publishes a track.\n */\nexport const watchTrackPublished = (state: CallState) => {\n  return function onTrackPublished(e: TrackPublished) {\n    const { type, sessionId } = e;\n    // An optimization for large calls.\n    // After a certain threshold, the SFU would stop emitting `participantJoined`\n    // events, and instead, it would only provide the participant's information\n    // once they start publishing a track.\n    if (e.participant) {\n      const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n      const participant = Object.assign(e.participant, orphanedTracks);\n      state.updateOrAddParticipant(sessionId, participant);\n    } else {\n      state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: pushToIfMissing([...p.publishedTracks], type),\n      }));\n    }\n  };\n};\n\n/**\n * An event responder which handles the `trackUnpublished` event.\n * The SFU will send this event when a participant unpublishes a track.\n */\nexport const watchTrackUnpublished = (state: CallState) => {\n  return function onTrackUnpublished(e: TrackUnpublished) {\n    const { type, sessionId } = e;\n    // An optimization for large calls. See `watchTrackPublished`.\n    if (e.participant) {\n      const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n      const participant = Object.assign(e.participant, orphanedTracks);\n      state.updateOrAddParticipant(sessionId, participant);\n    } else {\n      state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: p.publishedTracks.filter((t) => t !== type),\n      }));\n    }\n  };\n};\n\n/**\n * Reconciles orphaned tracks (if any) for the given participant.\n *\n * @param state the call state.\n * @param participant the participant.\n */\nconst reconcileOrphanedTracks = (\n  state: CallState,\n  participant: Participant,\n): StreamVideoParticipantPatch | undefined => {\n  const orphanTracks = state.takeOrphanedTracks(participant.trackLookupPrefix);\n  if (!orphanTracks.length) return;\n  const reconciledTracks: StreamVideoParticipantPatch = {};\n  for (const orphan of orphanTracks) {\n    const key = trackTypeToParticipantStreamKey(orphan.trackType);\n    if (!key) continue;\n    reconciledTracks[key] = orphan.track;\n  }\n  return reconciledTracks;\n};\n","import { Dispatcher } from '../rtc';\nimport { CallState } from '../store';\nimport { StreamVideoParticipantPatches } from '../types';\n\n/**\n * Watches for `dominantSpeakerChanged` events.\n */\nexport const watchDominantSpeakerChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('dominantSpeakerChanged', (e) => {\n    const { sessionId } = e;\n    if (sessionId === state.dominantSpeaker?.sessionId) return;\n    state.setParticipants((participants) =>\n      participants.map((participant) => {\n        // mark the new dominant speaker\n        if (participant.sessionId === sessionId) {\n          return {\n            ...participant,\n            isDominantSpeaker: true,\n          };\n        }\n        // unmark the old dominant speaker\n        if (participant.isDominantSpeaker) {\n          return {\n            ...participant,\n            isDominantSpeaker: false,\n          };\n        }\n        return participant; // no change\n      }),\n    );\n  });\n};\n\n/**\n * Watches for `audioLevelChanged` events.\n */\nexport const watchAudioLevelChanged = (\n  dispatcher: Dispatcher,\n  state: CallState,\n) => {\n  return dispatcher.on('audioLevelChanged', (e) => {\n    const { audioLevels } = e;\n    state.updateParticipants(\n      audioLevels.reduce<StreamVideoParticipantPatches>((patches, current) => {\n        patches[current.sessionId] = {\n          audioLevel: current.level,\n          isSpeaking: current.isSpeaking,\n        };\n        return patches;\n      }, {}),\n    );\n  });\n};\n","import { Call } from '../Call';\nimport { Dispatcher } from '../rtc';\nimport {\n  handleRemoteSoftMute,\n  watchAudioLevelChanged,\n  watchCallAccepted,\n  watchCallEnded,\n  watchCallGrantsUpdated,\n  watchCallRejected,\n  watchConnectionQualityChanged,\n  watchDominantSpeakerChanged,\n  watchLiveEnded,\n  watchParticipantCountChanged,\n  watchParticipantJoined,\n  watchParticipantLeft,\n  watchParticipantUpdated,\n  watchPinsUpdated,\n  watchSfuCallEnded,\n  watchSfuErrorReports,\n  watchTrackPublished,\n  watchTrackUnpublished,\n} from '../events';\nimport {\n  AllCallEvents,\n  AllClientCallEvents,\n  CallEventListener,\n} from '../coordinator/connection/types';\n\ntype RingCallEvents = Extract<\n  AllClientCallEvents,\n  'call.accepted' | 'call.rejected' | 'call.missed'\n>;\n\n/**\n * Registers the default event handlers for a call during its lifecycle.\n *\n * @param call the call to register event handlers for.\n * @param dispatcher the dispatcher.\n */\nexport const registerEventHandlers = (call: Call, dispatcher: Dispatcher) => {\n  const state = call.state;\n  const eventHandlers = [\n    call.on('call.ended', watchCallEnded(call)),\n    watchSfuCallEnded(call),\n\n    watchLiveEnded(dispatcher, call),\n    watchSfuErrorReports(dispatcher),\n    watchConnectionQualityChanged(dispatcher, state),\n    watchParticipantCountChanged(dispatcher, state),\n\n    call.on('participantJoined', watchParticipantJoined(state)),\n    call.on('participantLeft', watchParticipantLeft(state)),\n    call.on('participantUpdated', watchParticipantUpdated(state)),\n\n    call.on('trackPublished', watchTrackPublished(state)),\n    call.on('trackUnpublished', watchTrackUnpublished(state)),\n\n    watchAudioLevelChanged(dispatcher, state),\n    watchDominantSpeakerChanged(dispatcher, state),\n\n    call.on('callGrantsUpdated', watchCallGrantsUpdated(state)),\n    call.on('pinsUpdated', watchPinsUpdated(state)),\n\n    handleRemoteSoftMute(call),\n  ];\n\n  if (call.ringing) {\n    // these events are only relevant when the call is ringing\n    eventHandlers.push(registerRingingCallEventHandlers(call));\n  }\n\n  return () => {\n    eventHandlers.forEach((unsubscribe) => unsubscribe());\n  };\n};\n\n/**\n * Registers event handlers for a call that is of ringing type.\n *\n * @param call the call to register event handlers for.\n */\nexport const registerRingingCallEventHandlers = (call: Call) => {\n  const coordinatorRingEvents: {\n    [key in RingCallEvents]: (\n      call: Call,\n    ) => CallEventListener<AllCallEvents[key]>;\n  } = {\n    'call.accepted': watchCallAccepted(call),\n    'call.rejected': watchCallRejected(call),\n  };\n\n  const eventHandlers = Object.keys(coordinatorRingEvents).map((event) => {\n    const eventName = event as RingCallEvents;\n    return call.on(eventName, coordinatorRingEvents[eventName]);\n  });\n\n  return () => {\n    eventHandlers.forEach((unsubscribe) => unsubscribe());\n  };\n};\n","const DEFAULT_THRESHOLD = 0.35;\n\nexport type EntryHandler = (entry: IntersectionObserverEntry) => void;\n\nexport type Unobserve = () => void;\n\nexport type Observe = (\n  element: HTMLElement,\n  entryHandler: EntryHandler,\n) => Unobserve;\n\nexport class ViewportTracker {\n  /**\n   * @private\n   */\n  private elementHandlerMap: Map<\n    HTMLElement,\n    (entry: IntersectionObserverEntry) => void\n  > = new Map();\n  /**\n   * @private\n   */\n  private observer: IntersectionObserver | null = null;\n  // in React children render before viewport is set, add\n  // them to the queue and observe them once the observer is ready\n  /**\n   * @private\n   */\n  private queueSet: Set<readonly [HTMLElement, EntryHandler]> = new Set();\n\n  /**\n   * Method to set scrollable viewport as root for the IntersectionObserver, returns\n   * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n   *\n   * @param viewportElement\n   * @param options\n   * @returns Unobserve\n   */\n  public setViewport = (\n    viewportElement: HTMLElement,\n    options?: Pick<IntersectionObserverInit, 'threshold' | 'rootMargin'>,\n  ) => {\n    const cleanup = () => {\n      this.observer?.disconnect();\n      this.observer = null;\n      this.elementHandlerMap.clear();\n    };\n\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          const handler = this.elementHandlerMap.get(\n            entry.target as HTMLElement,\n          );\n          handler?.(entry);\n        });\n      },\n      {\n        root: viewportElement,\n        ...options,\n        threshold: options?.threshold ?? DEFAULT_THRESHOLD,\n      },\n    );\n\n    if (this.queueSet.size) {\n      this.queueSet.forEach(([queueElement, queueHandler]) => {\n        // check if element which requested observation is\n        // a child of a viewport element, skip if isn't\n        if (!viewportElement.contains(queueElement)) return;\n\n        this.observer!.observe(queueElement);\n        this.elementHandlerMap.set(queueElement, queueHandler);\n      });\n      this.queueSet.clear();\n    }\n\n    return cleanup;\n  };\n\n  /**\n   * Method to set element to observe and handler to be triggered whenever IntersectionObserver\n   * detects a possible change in element's visibility within specified viewport, returns\n   * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n   *\n   * @param element\n   * @param handler\n   * @returns Unobserve\n   */\n  public observe: Observe = (element, handler) => {\n    const queueItem = [element, handler] as const;\n\n    const cleanup = () => {\n      this.elementHandlerMap.delete(element);\n      this.observer?.unobserve(element);\n      this.queueSet.delete(queueItem);\n    };\n\n    if (this.elementHandlerMap.has(element)) return cleanup;\n\n    if (!this.observer) {\n      this.queueSet.add(queueItem);\n      return cleanup;\n    }\n\n    if (this.observer.root!.contains(element)) {\n      this.elementHandlerMap.set(element, handler);\n      this.observer.observe(element);\n    }\n\n    return cleanup;\n  };\n}\n","import {\n  AudioTrackType,\n  DebounceType,\n  StreamVideoParticipant,\n  VideoTrackType,\n  VisibilityState,\n} from '../types';\nimport { TrackType, VideoDimension } from '../gen/video/sfu/models/models';\nimport {\n  BehaviorSubject,\n  combineLatest,\n  distinctUntilChanged,\n  distinctUntilKeyChanged,\n  map,\n  shareReplay,\n  takeWhile,\n} from 'rxjs';\nimport { ViewportTracker } from './ViewportTracker';\nimport { getLogger } from '../logger';\nimport { isFirefox, isSafari } from './browsers';\nimport {\n  hasScreenShare,\n  hasScreenShareAudio,\n  hasVideo,\n} from './participantUtils';\nimport type { TrackSubscriptionDetails } from '../gen/video/sfu/signal_rpc/signal';\nimport type { CallState } from '../store';\nimport type { StreamSfuClient } from '../StreamSfuClient';\nimport { SpeakerManager } from '../devices';\nimport { getCurrentValue, setCurrentValue } from '../store/rxUtils';\n\nconst DEFAULT_VIEWPORT_VISIBILITY_STATE: Record<\n  VideoTrackType,\n  VisibilityState\n> = {\n  videoTrack: VisibilityState.UNKNOWN,\n  screenShareTrack: VisibilityState.UNKNOWN,\n} as const;\n\ntype VideoTrackSubscriptionOverride =\n  | {\n      enabled: true;\n      dimension: VideoDimension;\n    }\n  | { enabled: false };\n\nconst globalOverrideKey = Symbol('globalOverrideKey');\n\ninterface VideoTrackSubscriptionOverrides {\n  [sessionId: string]: VideoTrackSubscriptionOverride | undefined;\n  [globalOverrideKey]?: VideoTrackSubscriptionOverride;\n}\n\n/**\n * A manager class that handles dynascale related tasks like:\n *\n * - binding video elements to session ids\n * - binding audio elements to session ids\n * - tracking element visibility\n * - updating subscriptions based on viewport visibility\n * - updating subscriptions based on video element dimensions\n * - updating subscriptions based on published tracks\n */\nexport class DynascaleManager {\n  /**\n   * The viewport tracker instance.\n   */\n  readonly viewportTracker = new ViewportTracker();\n\n  private logger = getLogger(['DynascaleManager']);\n  private callState: CallState;\n  private speaker: SpeakerManager;\n  private sfuClient: StreamSfuClient | undefined;\n  private pendingSubscriptionsUpdate: NodeJS.Timeout | null = null;\n\n  private videoTrackSubscriptionOverridesSubject =\n    new BehaviorSubject<VideoTrackSubscriptionOverrides>({});\n\n  videoTrackSubscriptionOverrides$ =\n    this.videoTrackSubscriptionOverridesSubject.asObservable();\n\n  incomingVideoSettings$ = this.videoTrackSubscriptionOverrides$.pipe(\n    map((overrides) => {\n      const { [globalOverrideKey]: globalSettings, ...participants } =\n        overrides;\n      return {\n        enabled: globalSettings?.enabled !== false,\n        preferredResolution: globalSettings?.enabled\n          ? globalSettings.dimension\n          : undefined,\n        participants: Object.fromEntries(\n          Object.entries(participants).map(\n            ([sessionId, participantOverride]) => [\n              sessionId,\n              {\n                enabled: participantOverride?.enabled !== false,\n                preferredResolution: participantOverride?.enabled\n                  ? participantOverride.dimension\n                  : undefined,\n              },\n            ],\n          ),\n        ),\n        isParticipantVideoEnabled: (sessionId: string) =>\n          overrides[sessionId]?.enabled ??\n          overrides[globalOverrideKey]?.enabled ??\n          true,\n      };\n    }),\n    shareReplay(1),\n  );\n\n  /**\n   * Creates a new DynascaleManager instance.\n   */\n  constructor(callState: CallState, speaker: SpeakerManager) {\n    this.callState = callState;\n    this.speaker = speaker;\n  }\n\n  setSfuClient(sfuClient: StreamSfuClient | undefined) {\n    this.sfuClient = sfuClient;\n  }\n\n  get trackSubscriptions() {\n    const subscriptions: TrackSubscriptionDetails[] = [];\n    for (const p of this.callState.remoteParticipants) {\n      // NOTE: audio tracks don't have to be requested explicitly\n      // as the SFU will implicitly subscribe us to all of them,\n      // once they become available.\n      if (p.videoDimension && hasVideo(p)) {\n        const override =\n          this.videoTrackSubscriptionOverrides[p.sessionId] ??\n          this.videoTrackSubscriptionOverrides[globalOverrideKey];\n\n        if (override?.enabled !== false) {\n          subscriptions.push({\n            userId: p.userId,\n            sessionId: p.sessionId,\n            trackType: TrackType.VIDEO,\n            dimension: override?.dimension ?? p.videoDimension,\n          });\n        }\n      }\n      if (p.screenShareDimension && hasScreenShare(p)) {\n        subscriptions.push({\n          userId: p.userId,\n          sessionId: p.sessionId,\n          trackType: TrackType.SCREEN_SHARE,\n          dimension: p.screenShareDimension,\n        });\n      }\n      if (hasScreenShareAudio(p)) {\n        subscriptions.push({\n          userId: p.userId,\n          sessionId: p.sessionId,\n          trackType: TrackType.SCREEN_SHARE_AUDIO,\n        });\n      }\n    }\n    return subscriptions;\n  }\n\n  get videoTrackSubscriptionOverrides() {\n    return getCurrentValue(this.videoTrackSubscriptionOverrides$);\n  }\n\n  setVideoTrackSubscriptionOverrides = (\n    override: VideoTrackSubscriptionOverride | undefined,\n    sessionIds?: string[],\n  ) => {\n    if (!sessionIds) {\n      return setCurrentValue(\n        this.videoTrackSubscriptionOverridesSubject,\n        override ? { [globalOverrideKey]: override } : {},\n      );\n    }\n\n    return setCurrentValue(\n      this.videoTrackSubscriptionOverridesSubject,\n      (overrides) => ({\n        ...overrides,\n        ...Object.fromEntries(sessionIds.map((id) => [id, override])),\n      }),\n    );\n  };\n\n  applyTrackSubscriptions = (\n    debounceType: DebounceType = DebounceType.SLOW,\n  ) => {\n    if (this.pendingSubscriptionsUpdate) {\n      clearTimeout(this.pendingSubscriptionsUpdate);\n    }\n\n    const updateSubscriptions = () => {\n      this.pendingSubscriptionsUpdate = null;\n      this.sfuClient\n        ?.updateSubscriptions(this.trackSubscriptions)\n        .catch((err: unknown) => {\n          this.logger('debug', `Failed to update track subscriptions`, err);\n        });\n    };\n\n    if (debounceType) {\n      this.pendingSubscriptionsUpdate = setTimeout(\n        updateSubscriptions,\n        debounceType,\n      );\n    } else {\n      updateSubscriptions();\n    }\n  };\n\n  /**\n   * Will begin tracking the given element for visibility changes within the\n   * configured viewport element (`call.setViewport`).\n   *\n   * @param element the element to track.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   * @returns Untrack.\n   */\n  trackElementVisibility = <T extends HTMLElement>(\n    element: T,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const cleanup = this.viewportTracker.observe(element, (entry) => {\n      this.callState.updateParticipant(sessionId, (participant) => {\n        const previousVisibilityState =\n          participant.viewportVisibilityState ??\n          DEFAULT_VIEWPORT_VISIBILITY_STATE;\n\n        // observer triggers when the element is \"moved\" to be a fullscreen element\n        // keep it VISIBLE if that happens to prevent fullscreen with placeholder\n        const isVisible =\n          entry.isIntersecting || document.fullscreenElement === element\n            ? VisibilityState.VISIBLE\n            : VisibilityState.INVISIBLE;\n        return {\n          ...participant,\n          viewportVisibilityState: {\n            ...previousVisibilityState,\n            [trackType]: isVisible,\n          },\n        };\n      });\n    });\n\n    return () => {\n      cleanup();\n      // reset visibility state to UNKNOWN upon cleanup\n      // so that the layouts that are not actively observed\n      // can still function normally (runtime layout switching)\n      this.callState.updateParticipant(sessionId, (participant) => {\n        const previousVisibilityState =\n          participant.viewportVisibilityState ??\n          DEFAULT_VIEWPORT_VISIBILITY_STATE;\n        return {\n          ...participant,\n          viewportVisibilityState: {\n            ...previousVisibilityState,\n            [trackType]: VisibilityState.UNKNOWN,\n          },\n        };\n      });\n    };\n  };\n\n  /**\n   * Sets the viewport element to track bound video elements for visibility.\n   *\n   * @param element the viewport element.\n   */\n  setViewport = <T extends HTMLElement>(element: T) => {\n    return this.viewportTracker.setViewport(element);\n  };\n\n  /**\n   * Binds a DOM <video> element to the given session id.\n   * This method will make sure that the video element will play\n   * the correct video stream for the given session id.\n   *\n   * Under the hood, it would also keep track of the video element dimensions\n   * and update the subscription accordingly in order to optimize the bandwidth.\n   *\n   * If a \"viewport\" is configured, the video element will be automatically\n   * tracked for visibility and the subscription will be updated accordingly.\n   *\n   * @param videoElement the video element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   */\n  bindVideoElement = (\n    videoElement: HTMLVideoElement,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const boundParticipant =\n      this.callState.findParticipantBySessionId(sessionId);\n    if (!boundParticipant) return;\n\n    const requestTrackWithDimensions = (\n      debounceType: DebounceType,\n      dimension: VideoDimension | undefined,\n    ) => {\n      if (dimension && (dimension.width === 0 || dimension.height === 0)) {\n        // ignore 0x0 dimensions. this can happen when the video element\n        // is not visible (e.g., has display: none).\n        // we treat this as \"unsubscription\" as we don't want to keep\n        // consuming bandwidth for a video that is not visible on the screen.\n        this.logger('debug', `Ignoring 0x0 dimension`, boundParticipant);\n        dimension = undefined;\n      }\n      this.callState.updateParticipantTracks(trackType, {\n        [sessionId]: { dimension },\n      });\n      this.applyTrackSubscriptions(debounceType);\n    };\n\n    const participant$ = this.callState.participants$.pipe(\n      map(\n        (participants) =>\n          participants.find(\n            (participant) => participant.sessionId === sessionId,\n          ) as StreamVideoParticipant,\n      ),\n      takeWhile((participant) => !!participant),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    /**\n     * Since the video elements are now being removed from the DOM (React SDK) upon\n     * visibility change, this subscription is not in use an stays here only for the\n     * plain JS integrations where integrators might choose not to remove the video\n     * elements from the DOM.\n     */\n    // keep copy for resize observer handler\n    let viewportVisibilityState: VisibilityState | undefined;\n    const viewportVisibilityStateSubscription =\n      boundParticipant.isLocalParticipant\n        ? null\n        : participant$\n            .pipe(\n              map((p) => p.viewportVisibilityState?.[trackType]),\n              distinctUntilChanged(),\n            )\n            .subscribe((nextViewportVisibilityState) => {\n              // skip initial trigger\n              if (!viewportVisibilityState) {\n                viewportVisibilityState =\n                  nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                return;\n              }\n              viewportVisibilityState =\n                nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n\n              if (nextViewportVisibilityState === VisibilityState.INVISIBLE) {\n                return requestTrackWithDimensions(\n                  DebounceType.MEDIUM,\n                  undefined,\n                );\n              }\n\n              requestTrackWithDimensions(DebounceType.MEDIUM, {\n                width: videoElement.clientWidth,\n                height: videoElement.clientHeight,\n              });\n            });\n\n    let lastDimensions: VideoDimension | undefined;\n    const resizeObserver = boundParticipant.isLocalParticipant\n      ? null\n      : new ResizeObserver(() => {\n          const currentDimensions = {\n            width: videoElement.clientWidth,\n            height: videoElement.clientHeight,\n          };\n\n          // skip initial trigger\n          if (!lastDimensions) {\n            lastDimensions = currentDimensions;\n            return;\n          }\n\n          if (\n            (lastDimensions.width === currentDimensions.width &&\n              lastDimensions.height === currentDimensions.height) ||\n            viewportVisibilityState === VisibilityState.INVISIBLE\n          ) {\n            return;\n          }\n\n          const relativeDelta = Math.max(\n            currentDimensions.width / lastDimensions.width,\n            currentDimensions.height / lastDimensions.height,\n          );\n          // Low quality video in an upscaled video element is very noticable.\n          // We try to upscale faster, and downscale slower. We also update debounce\n          // more if the size change is not significant, gurading against fast-firing\n          // resize events.\n          const debounceType =\n            relativeDelta > 1.2 ? DebounceType.IMMEDIATE : DebounceType.MEDIUM;\n          requestTrackWithDimensions(debounceType, {\n            width: videoElement.clientWidth,\n            height: videoElement.clientHeight,\n          });\n          lastDimensions = currentDimensions;\n        });\n    resizeObserver?.observe(videoElement);\n\n    // element renders and gets bound - track subscription gets\n    // triggered first other ones get skipped on initial subscriptions\n    const publishedTracksSubscription = boundParticipant.isLocalParticipant\n      ? null\n      : participant$\n          .pipe(\n            distinctUntilKeyChanged('publishedTracks'),\n            map((p) =>\n              trackType === 'videoTrack' ? hasVideo(p) : hasScreenShare(p),\n            ),\n            distinctUntilChanged(),\n          )\n          .subscribe((isPublishing) => {\n            if (isPublishing) {\n              // the participant just started to publish a track\n              requestTrackWithDimensions(DebounceType.IMMEDIATE, {\n                width: videoElement.clientWidth,\n                height: videoElement.clientHeight,\n              });\n            } else {\n              // the participant just stopped publishing a track\n              requestTrackWithDimensions(DebounceType.FAST, undefined);\n            }\n          });\n\n    videoElement.autoplay = true;\n    videoElement.playsInline = true;\n\n    // explicitly marking the element as muted will allow autoplay to work\n    // without prior user interaction:\n    // https://developer.mozilla.org/en-US/docs/Web/Media/Autoplay_guide\n    videoElement.muted = true;\n\n    const streamSubscription = participant$\n      .pipe(\n        distinctUntilKeyChanged(\n          trackType === 'videoTrack' ? 'videoStream' : 'screenShareStream',\n        ),\n      )\n      .subscribe((p) => {\n        const source =\n          trackType === 'videoTrack' ? p.videoStream : p.screenShareStream;\n        if (videoElement.srcObject === source) return;\n        videoElement.srcObject = source ?? null;\n        if (isSafari() || isFirefox()) {\n          setTimeout(() => {\n            videoElement.srcObject = source ?? null;\n            videoElement.play().catch((e) => {\n              this.logger('warn', `Failed to play stream`, e);\n            });\n            // we add extra delay until we attempt to force-play\n            // the participant's media stream in Firefox and Safari,\n            // as they seem to have some timing issues\n          }, 25);\n        }\n      });\n\n    return () => {\n      requestTrackWithDimensions(DebounceType.FAST, undefined);\n      viewportVisibilityStateSubscription?.unsubscribe();\n      publishedTracksSubscription?.unsubscribe();\n      streamSubscription.unsubscribe();\n      resizeObserver?.disconnect();\n    };\n  };\n\n  /**\n   * Binds a DOM <audio> element to the given session id.\n   *\n   * This method will make sure that the audio element will\n   * play the correct audio stream for the given session id.\n   *\n   * @param audioElement the audio element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of audio.\n   * @returns a cleanup function that will unbind the audio element.\n   */\n  bindAudioElement = (\n    audioElement: HTMLAudioElement,\n    sessionId: string,\n    trackType: AudioTrackType,\n  ) => {\n    const participant = this.callState.findParticipantBySessionId(sessionId);\n    if (!participant || participant.isLocalParticipant) return;\n\n    const participant$ = this.callState.participants$.pipe(\n      map(\n        (participants) =>\n          participants.find(\n            (p) => p.sessionId === sessionId,\n          ) as StreamVideoParticipant,\n      ),\n      takeWhile((p) => !!p),\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n    );\n\n    const updateMediaStreamSubscription = participant$\n      .pipe(\n        distinctUntilKeyChanged(\n          trackType === 'screenShareAudioTrack'\n            ? 'screenShareAudioStream'\n            : 'audioStream',\n        ),\n      )\n      .subscribe((p) => {\n        const source =\n          trackType === 'screenShareAudioTrack'\n            ? p.screenShareAudioStream\n            : p.audioStream;\n        if (audioElement.srcObject === source) return;\n\n        setTimeout(() => {\n          audioElement.srcObject = source ?? null;\n          if (audioElement.srcObject) {\n            audioElement.play().catch((e) => {\n              this.logger('warn', `Failed to play stream`, e);\n            });\n\n            // audio output device shall be set after the audio element is played\n            // otherwise, the browser will not pick it up, and will always\n            // play audio through the system's default device\n            const { selectedDevice } = this.speaker.state;\n            if (selectedDevice && 'setSinkId' in audioElement) {\n              audioElement.setSinkId(selectedDevice);\n            }\n          }\n        });\n      });\n\n    const sinkIdSubscription = !('setSinkId' in audioElement)\n      ? null\n      : this.speaker.state.selectedDevice$.subscribe((deviceId) => {\n          if (deviceId) {\n            audioElement.setSinkId(deviceId);\n          }\n        });\n\n    const volumeSubscription = combineLatest([\n      this.speaker.state.volume$,\n      participant$.pipe(distinctUntilKeyChanged('audioVolume')),\n    ]).subscribe(([volume, p]) => {\n      audioElement.volume = p.audioVolume ?? volume;\n    });\n\n    audioElement.autoplay = true;\n\n    return () => {\n      sinkIdSubscription?.unsubscribe();\n      volumeSubscription.unsubscribe();\n      updateMediaStreamSubscription.unsubscribe();\n    };\n  };\n}\n","import { CallSettingsResponse, OwnCapability } from '../gen/coordinator';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { ensureExhausted } from '../helpers/ensureExhausted';\n\n/**\n * Stores the permissions for the current user and exposes\n * a few helper methods which make it easier to work with permissions.\n *\n * This is an internal class meant to be used in combination with\n * a {@link Call} instance.\n *\n * @internal\n */\nexport class PermissionsContext {\n  private permissions: OwnCapability[] = [];\n  private settings?: CallSettingsResponse;\n\n  /**\n   * Sets the permissions for the current user.\n   *\n   * @param permissions the permissions to set.\n   */\n  setPermissions = (permissions: OwnCapability[]) => {\n    this.permissions = permissions || [];\n  };\n\n  /**\n   * Sets the settings for the bound call.\n   * @param settings\n   */\n  setCallSettings = (settings: CallSettingsResponse) => {\n    this.settings = settings;\n  };\n\n  /**\n   * Checks if the current user has a specific permission.\n   *\n   * @param permission the permission to check for.\n   */\n  hasPermission = (permission: OwnCapability) => {\n    return this.permissions.includes(permission);\n  };\n\n  /**\n   * Helper method that checks whether the current user has the permission\n   * to publish the given track type.\n   */\n  canPublish = (trackType: TrackType) => {\n    switch (trackType) {\n      case TrackType.AUDIO:\n        return this.hasPermission(OwnCapability.SEND_AUDIO);\n      case TrackType.VIDEO:\n        return this.hasPermission(OwnCapability.SEND_VIDEO);\n      case TrackType.SCREEN_SHARE:\n      case TrackType.SCREEN_SHARE_AUDIO:\n        return this.hasPermission(OwnCapability.SCREENSHARE);\n      case TrackType.UNSPECIFIED:\n        return false;\n      default:\n        ensureExhausted(trackType, 'Unknown track type');\n    }\n  };\n\n  /**\n   * Checks if the current user can request a specific permission\n   * within the call.\n   *\n   * @param permission the permission to check for.\n   * @param settings the call settings to check against (optional).\n   */\n  canRequest = (\n    permission: OwnCapability,\n    settings: CallSettingsResponse | undefined = this.settings,\n  ) => {\n    if (!settings) return false;\n\n    const { audio, video, screensharing } = settings;\n    switch (permission) {\n      case OwnCapability.SEND_AUDIO:\n        return audio.access_request_enabled;\n      case OwnCapability.SEND_VIDEO:\n        return video.access_request_enabled;\n      case OwnCapability.SCREENSHARE:\n        return screensharing.access_request_enabled;\n      default:\n        return false;\n    }\n  };\n}\n","import { StreamVideoParticipant } from './types';\nimport {\n  Comparator,\n  defaultSortPreset,\n  livestreamOrAudioRoomSortPreset,\n} from './sorting';\n\n/**\n * The options for a {@link CallType}.\n */\nexport type CallTypeOptions = {\n  /**\n   * The {@link Comparator} to use to sorting the participants in the call.\n   */\n  sortParticipantsBy?: Comparator<StreamVideoParticipant>;\n};\n\n/**\n * Represents a call type.\n */\nexport class CallType {\n  /**\n   * The name of the call type.\n   */\n  name: string;\n\n  /**\n   * The options for the call type.\n   */\n  options: CallTypeOptions;\n\n  /**\n   * Constructs a new CallType.\n   *\n   * @param name the name of the call type.\n   * @param options the options for the call type.\n   */\n  constructor(\n    name: string,\n    options: CallTypeOptions = {\n      sortParticipantsBy: defaultSortPreset,\n    },\n  ) {\n    this.name = name;\n    this.options = options;\n  }\n}\n\n/**\n * A registry of {@link CallType}s.\n * You can register and unregister call types.\n */\nclass CallTypesRegistry {\n  /**\n   * The call types registered in this registry.\n   * @private\n   */\n  private readonly callTypes: { [key: string]: CallType };\n\n  /**\n   * Constructs a new CallTypesRegistry.\n   *\n   * @param callTypes the initial call types to register.\n   */\n  constructor(callTypes: CallType[]) {\n    this.callTypes = callTypes.reduce<{ [key: string]: CallType }>(\n      (acc, callType) => {\n        acc[callType.name] = callType;\n        return acc;\n      },\n      {},\n    );\n  }\n\n  /**\n   * Registers a new call type.\n   *\n   * @param callType the call type to register.\n   */\n  register = (callType: CallType) => {\n    this.callTypes[callType.name] = callType;\n  };\n\n  /**\n   * Unregisters a call type.\n   *\n   * @param name the name of the call type to unregister.\n   */\n  unregister = (name: string) => {\n    delete this.callTypes[name];\n  };\n\n  /**\n   * Gets a call type by name.\n   *\n   * @param name the name of the call type to get.\n   */\n  get = (name: string): CallType => {\n    if (!this.callTypes[name]) {\n      this.register(new CallType(name));\n    }\n    return this.callTypes[name];\n  };\n}\n\n/**\n * The default call types registry.\n * You can use this instance to dynamically register and unregister call types.\n */\nexport const CallTypes = new CallTypesRegistry([\n  new CallType('default', {\n    sortParticipantsBy: defaultSortPreset,\n  }),\n  new CallType('development', {\n    sortParticipantsBy: defaultSortPreset,\n  }),\n  new CallType('livestream', {\n    sortParticipantsBy: livestreamOrAudioRoomSortPreset,\n  }),\n  new CallType('audio_room', {\n    sortParticipantsBy: livestreamOrAudioRoomSortPreset,\n  }),\n]);\n","import { fromEventPattern, map } from 'rxjs';\nimport { isReactNative } from '../helpers/platforms';\nimport { getLogger } from '../logger';\nimport { disposeOfMediaStream } from './devices';\nimport { withoutConcurrency } from '../helpers/concurrency';\n\ninterface BrowserPermissionConfig {\n  constraints: DisplayMediaStreamOptions;\n  queryName: PermissionName;\n}\n\nexport type BrowserPermissionState = PermissionState | 'prompting';\n\nexport class BrowserPermission {\n  private ready: Promise<void>;\n  private disposeController = new AbortController();\n  private state: BrowserPermissionState | undefined;\n  private wasPrompted: boolean = false;\n  private listeners = new Set<(state: BrowserPermissionState) => void>();\n  private logger = getLogger(['permissions']);\n\n  constructor(private readonly permission: BrowserPermissionConfig) {\n    const signal = this.disposeController.signal;\n\n    this.ready = (async () => {\n      const assumeGranted = () => {\n        this.setState('prompt');\n      };\n\n      if (!canQueryPermissions()) {\n        return assumeGranted();\n      }\n\n      try {\n        const status = await navigator.permissions.query({\n          name: permission.queryName,\n        });\n\n        if (!signal.aborted) {\n          this.setState(status.state);\n          status.addEventListener('change', () => this.setState(status.state), {\n            signal,\n          });\n        }\n      } catch (err) {\n        this.logger('debug', 'Failed to query permission status', err);\n        assumeGranted();\n      }\n    })();\n  }\n\n  dispose() {\n    this.state = undefined;\n    this.disposeController.abort();\n  }\n\n  async getState() {\n    await this.ready;\n    if (!this.state) {\n      throw new Error('BrowserPermission instance possibly disposed');\n    }\n    return this.state;\n  }\n\n  async prompt({\n    forcePrompt = false,\n    throwOnNotAllowed = false,\n  }: { forcePrompt?: boolean; throwOnNotAllowed?: boolean } = {}) {\n    return await withoutConcurrency(\n      `permission-prompt-${this.permission.queryName}`,\n      async () => {\n        if (\n          (await this.getState()) !== 'prompt' ||\n          (this.wasPrompted && !forcePrompt)\n        ) {\n          const isGranted = this.state === 'granted';\n\n          if (!isGranted && throwOnNotAllowed) {\n            throw new Error(\n              'Permission was not granted previously, and prompting again is not allowed',\n            );\n          }\n\n          return isGranted;\n        }\n\n        try {\n          this.wasPrompted = true;\n          this.setState('prompting');\n          const stream = await navigator.mediaDevices.getUserMedia(\n            this.permission.constraints,\n          );\n          disposeOfMediaStream(stream);\n          this.setState('granted');\n          return true;\n        } catch (e) {\n          if (\n            e &&\n            typeof e === 'object' &&\n            'name' in e &&\n            (e.name === 'NotAllowedError' || e.name === 'SecurityError')\n          ) {\n            this.logger('info', 'Browser permission was not granted', {\n              permission: this.permission,\n            });\n            this.setState('denied');\n\n            if (throwOnNotAllowed) {\n              throw e;\n            }\n\n            return false;\n          }\n\n          this.logger('error', `Failed to getUserMedia`, {\n            error: e,\n            permission: this.permission,\n          });\n          this.setState('prompt');\n          throw e;\n        }\n      },\n    );\n  }\n\n  listen(cb: (state: BrowserPermissionState) => void) {\n    this.listeners.add(cb);\n    if (this.state) cb(this.state);\n    return () => this.listeners.delete(cb);\n  }\n\n  asObservable() {\n    return this.getStateObservable().pipe(\n      // In some browsers, the 'change' event doesn't reliably emit and hence,\n      // permissionState stays in 'prompt' state forever.\n      // Typically, this happens when a user grants one-time permission.\n      // Instead of checking if a permission is granted, we check if it isn't denied\n      map((state) => state !== 'denied'),\n    );\n  }\n\n  asStateObservable() {\n    return this.getStateObservable();\n  }\n\n  getIsPromptingObservable() {\n    return this.getStateObservable().pipe(\n      map((state) => state === 'prompting'),\n    );\n  }\n\n  private getStateObservable() {\n    return fromEventPattern<BrowserPermissionState>(\n      (handler) => this.listen(handler),\n      (handler, unlisten) => unlisten(),\n    );\n  }\n\n  private setState(state: BrowserPermissionState) {\n    if (this.state !== state) {\n      this.state = state;\n      this.listeners.forEach((listener) => listener(state));\n    }\n  }\n}\n\nfunction canQueryPermissions() {\n  return (\n    !isReactNative() &&\n    typeof navigator !== 'undefined' &&\n    !!navigator.permissions?.query\n  );\n}\n","import {\n  concatMap,\n  debounceTime,\n  from,\n  fromEvent,\n  map,\n  merge,\n  shareReplay,\n  startWith,\n} from 'rxjs';\nimport { getLogger } from '../logger';\nimport { BrowserPermission } from './BrowserPermission';\nimport { lazy } from '../helpers/lazy';\nimport { isFirefox } from '../helpers/browsers';\nimport { dumpStream, Tracer } from '../stats';\n\n/**\n * Returns an Observable that emits the list of available devices\n * that meet the given constraints.\n *\n * @param permission a BrowserPermission instance.\n * @param kind the kind of devices to enumerate.\n */\nconst getDevices = (permission: BrowserPermission, kind: MediaDeviceKind) => {\n  return from(\n    (async () => {\n      let devices = await navigator.mediaDevices.enumerateDevices();\n      // for privacy reasons, most browsers don't give you device labels\n      // unless you have a corresponding camera or microphone permission\n      const shouldPromptForBrowserPermission = devices.some(\n        (device) => device.kind === kind && device.label === '',\n      );\n      if (shouldPromptForBrowserPermission && (await permission.prompt())) {\n        devices = await navigator.mediaDevices.enumerateDevices();\n      }\n      return devices.filter(\n        (device) =>\n          device.kind === kind &&\n          device.label !== '' &&\n          device.deviceId !== 'default',\n      );\n    })(),\n  );\n};\n\n/**\n * Tells if the browser supports audio output change on 'audio' elements,\n * see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId.\n */\nexport const checkIfAudioOutputChangeSupported = () => {\n  if (typeof document === 'undefined') return false;\n  const element = document.createElement('audio');\n  return 'setSinkId' in element;\n};\n\n/**\n * The default constraints used to request audio devices.\n */\nconst audioDeviceConstraints = {\n  audio: {\n    autoGainControl: true,\n    noiseSuppression: true,\n    echoCancellation: true,\n  },\n} satisfies MediaStreamConstraints;\n\n/**\n * The default constraints used to request video devices.\n */\nconst videoDeviceConstraints = {\n  video: {\n    width: 1280,\n    height: 720,\n  },\n} satisfies MediaStreamConstraints;\n\n/**\n * Keeps track of the browser permission to use microphone. This permission also\n * affects an ability to enumerate audio devices.\n */\nexport const getAudioBrowserPermission = lazy(\n  () =>\n    new BrowserPermission({\n      constraints: audioDeviceConstraints,\n      queryName: 'microphone' as PermissionName,\n    }),\n);\n\n/**\n * Keeps track of the browser permission to use camera. This permission also\n * affects an ability to enumerate video devices.\n */\nexport const getVideoBrowserPermission = lazy(\n  () =>\n    new BrowserPermission({\n      constraints: videoDeviceConstraints,\n      queryName: 'camera' as PermissionName,\n    }),\n);\n\nconst getDeviceChangeObserver = lazy(() => {\n  // 'addEventListener' is not available in React Native, returning\n  // an observable that will never fire\n  if (!navigator.mediaDevices.addEventListener) return from([]);\n  return fromEvent(navigator.mediaDevices, 'devicechange').pipe(\n    map(() => undefined),\n    debounceTime(500),\n  );\n});\n\n/**\n * Prompts the user for a permission to use audio devices (if not already granted\n * and was not prompted before) and lists the available 'audioinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getAudioDevices = lazy(() => {\n  return merge(\n    getDeviceChangeObserver(),\n    getAudioBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() => getDevices(getAudioBrowserPermission(), 'audioinput')),\n    shareReplay(1),\n  );\n});\n\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'videoinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getVideoDevices = lazy(() => {\n  return merge(\n    getDeviceChangeObserver(),\n    getVideoBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() => getDevices(getVideoBrowserPermission(), 'videoinput')),\n    shareReplay(1),\n  );\n});\n\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'audiooutput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */\nexport const getAudioOutputDevices = lazy(() => {\n  return merge(\n    getDeviceChangeObserver(),\n    getAudioBrowserPermission().asObservable(),\n  ).pipe(\n    startWith(undefined),\n    concatMap(() => getDevices(getAudioBrowserPermission(), 'audiooutput')),\n    shareReplay(1),\n  );\n});\n\nlet getUserMediaExecId = 0;\nconst getStream = async (\n  constraints: MediaStreamConstraints,\n  tracer: Tracer | undefined,\n) => {\n  const tag = `navigator.mediaDevices.getUserMedia.${getUserMediaExecId++}.`;\n  try {\n    tracer?.trace(tag, constraints);\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    tracer?.trace(`${tag}OnSuccess`, dumpStream(stream));\n    if (isFirefox()) {\n      // When enumerating devices, Firefox will hide device labels unless there's been\n      // an active user media stream on the page. So we force device list updates after\n      // every successful getUserMedia call.\n      navigator.mediaDevices.dispatchEvent(new Event('devicechange'));\n    }\n    return stream;\n  } catch (error) {\n    tracer?.trace(`${tag}OnFailure`, (error as Error).name);\n    throw error;\n  }\n};\n\nfunction isNotFoundOrOverconstrainedError(error: unknown) {\n  if (!error || typeof error !== 'object') {\n    return false;\n  }\n\n  if ('name' in error && typeof error.name === 'string') {\n    const name = error.name;\n    if (['OverconstrainedError', 'NotFoundError'].includes(name)) {\n      return true;\n    }\n  }\n\n  if ('message' in error && typeof error.message === 'string') {\n    const message = error.message;\n    if (message.startsWith('OverconstrainedError')) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Returns an audio media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @param trackConstraints the constraints to use when requesting the stream.\n * @param tracer the tracer to use for tracing the stream creation.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */\nexport const getAudioStream = async (\n  trackConstraints?: MediaTrackConstraints,\n  tracer?: Tracer,\n): Promise<MediaStream> => {\n  const constraints: MediaStreamConstraints = {\n    audio: {\n      ...audioDeviceConstraints.audio,\n      ...trackConstraints,\n    },\n  };\n\n  try {\n    await getAudioBrowserPermission().prompt({\n      throwOnNotAllowed: true,\n      forcePrompt: true,\n    });\n    return await getStream(constraints, tracer);\n  } catch (error) {\n    if (isNotFoundOrOverconstrainedError(error) && trackConstraints?.deviceId) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { deviceId, ...relaxedConstraints } = trackConstraints;\n      getLogger(['devices'])(\n        'warn',\n        'Failed to get audio stream, will try again with relaxed constraints',\n        { error, constraints, relaxedConstraints },\n      );\n      return getAudioStream(relaxedConstraints);\n    }\n\n    getLogger(['devices'])('error', 'Failed to get audio stream', {\n      error,\n      constraints,\n    });\n    throw error;\n  }\n};\n\n/**\n * Returns a video media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @param trackConstraints the constraints to use when requesting the stream.\n * @param tracer the tracer to use for tracing the stream creation.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */\nexport const getVideoStream = async (\n  trackConstraints?: MediaTrackConstraints,\n  tracer?: Tracer,\n): Promise<MediaStream> => {\n  const constraints: MediaStreamConstraints = {\n    video: {\n      ...videoDeviceConstraints.video,\n      ...trackConstraints,\n    },\n  };\n  try {\n    await getVideoBrowserPermission().prompt({\n      throwOnNotAllowed: true,\n      forcePrompt: true,\n    });\n    return await getStream(constraints, tracer);\n  } catch (error) {\n    if (isNotFoundOrOverconstrainedError(error) && trackConstraints?.deviceId) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { deviceId, ...relaxedConstraints } = trackConstraints;\n      getLogger(['devices'])(\n        'warn',\n        'Failed to get video stream, will try again with relaxed constraints',\n        { error, constraints, relaxedConstraints },\n      );\n      return getVideoStream(relaxedConstraints);\n    }\n\n    getLogger(['devices'])('error', 'Failed to get video stream', {\n      error,\n      constraints,\n    });\n    throw error;\n  }\n};\n\nlet getDisplayMediaExecId = 0;\n\n/**\n * Prompts the user for a permission to share a screen.\n * If the user grants the permission, a screen sharing stream is returned. Throws otherwise.\n *\n * The callers of this API are responsible to handle the possible errors.\n *\n * @param options any additional options to pass to the [`getDisplayMedia`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) API.\n * @param tracer the tracer to use for tracing the stream creation.\n */\nexport const getScreenShareStream = async (\n  options?: DisplayMediaStreamOptions,\n  tracer?: Tracer | undefined,\n) => {\n  const tag = `navigator.mediaDevices.getDisplayMedia.${getDisplayMediaExecId++}.`;\n  try {\n    tracer?.trace(tag, options);\n    const stream = await navigator.mediaDevices.getDisplayMedia({\n      video: true,\n      audio: {\n        channelCount: {\n          ideal: 2,\n        },\n        echoCancellation: false,\n        autoGainControl: false,\n        noiseSuppression: false,\n      },\n      // @ts-expect-error - not present in types yet\n      systemAudio: 'include',\n      ...options,\n    });\n    tracer?.trace(`${tag}OnSuccess`, dumpStream(stream));\n    return stream;\n  } catch (e) {\n    tracer?.trace(`${tag}OnFailure`, (e as Error).name);\n    getLogger(['devices'])('error', 'Failed to get screen share stream', e);\n    throw e;\n  }\n};\n\nexport const deviceIds$ =\n  typeof navigator !== 'undefined' &&\n  typeof navigator.mediaDevices !== 'undefined'\n    ? getDeviceChangeObserver().pipe(\n        startWith(undefined),\n        concatMap(() => navigator.mediaDevices.enumerateDevices()),\n        shareReplay(1),\n      )\n    : undefined;\n\n/**\n * Deactivates MediaStream (stops and removes tracks) to be later garbage collected\n *\n * @param stream MediaStream\n * @returns void\n */\nexport const disposeOfMediaStream = (stream: MediaStream) => {\n  if (!stream.active) return;\n  stream.getTracks().forEach((track) => {\n    track.stop();\n  });\n  // @ts-expect-error release() is present in react-native-webrtc and must be called to dispose the stream\n  if (typeof stream.release === 'function') {\n    // @ts-expect-error - release() is present in react-native-webrtc\n    stream.release();\n  }\n};\n","import { asyncScheduler } from '../scheduler/async';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction, SchedulerAction, SchedulerLike } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Emits a notification from the source Observable only after a particular time span\n * has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link delay}, but passes only the most\n * recent notification from each burst of emissions.</span>\n *\n * ![](debounceTime.png)\n *\n * `debounceTime` delays notifications emitted by the source Observable, but drops\n * previous pending delayed emissions if a new notification arrives on the source\n * Observable. This operator keeps track of the most recent notification from the\n * source Observable, and emits that only when `dueTime` has passed\n * without any other notification appearing on the source Observable. If a new value\n * appears before `dueTime` silence occurs, the previous notification will be dropped\n * and will not be emitted and a new `dueTime` is scheduled.\n * If the completing event happens during `dueTime` the last cached notification\n * is emitted before the completion event is forwarded to the output observable.\n * If the error event happens during `dueTime` or after it only the error event is\n * forwarded to the output observable. The cache notification is not emitted in this case.\n *\n * This is a rate-limiting operator, because it is impossible for more than one\n * notification to be emitted in any time window of duration `dueTime`, but it is also\n * a delay-like operator since output emissions do not occur at the same time as\n * they did on the source Observable. Optionally takes a {@link SchedulerLike} for\n * managing timers.\n *\n * ## Example\n *\n * Emit the most recent click after a burst of clicks\n *\n * ```ts\n * import { fromEvent, debounceTime } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(debounceTime(1000));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link audit}\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link sample}\n * @see {@link sampleTime}\n * @see {@link throttle}\n * @see {@link throttleTime}\n *\n * @param dueTime The timeout duration in milliseconds (or the time unit determined\n * internally by the optional `scheduler`) for the window of time required to wait\n * for emission silence before emitting the most recent source value.\n * @param scheduler The {@link SchedulerLike} to use for managing the timers that\n * handle the timeout for each value.\n * @return A function that returns an Observable that delays the emissions of\n * the source Observable by the specified `dueTime`, and may drop some values\n * if they occur too frequently.\n */\nexport function debounceTime<T>(dueTime: number, scheduler: SchedulerLike = asyncScheduler): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let activeTask: Subscription | null = null;\n    let lastValue: T | null = null;\n    let lastTime: number | null = null;\n\n    const emit = () => {\n      if (activeTask) {\n        // We have a value! Free up memory first, then emit the value.\n        activeTask.unsubscribe();\n        activeTask = null;\n        const value = lastValue!;\n        lastValue = null;\n        subscriber.next(value);\n      }\n    };\n    function emitWhenIdle(this: SchedulerAction<unknown>) {\n      // This is called `dueTime` after the first value\n      // but we might have received new values during this window!\n\n      const targetTime = lastTime! + dueTime;\n      const now = scheduler.now();\n      if (now < targetTime) {\n        // On that case, re-schedule to the new target\n        activeTask = this.schedule(undefined, targetTime - now);\n        subscriber.add(activeTask);\n        return;\n      }\n\n      emit();\n    }\n\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value: T) => {\n          lastValue = value;\n          lastTime = scheduler.now();\n\n          // Only set up a task if it's not already up\n          if (!activeTask) {\n            activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n            subscriber.add(activeTask);\n          }\n        },\n        () => {\n          // Source completed.\n          // Emit any pending debounced values then complete\n          emit();\n          subscriber.complete();\n        },\n        // Pass all errors through to consumer.\n        undefined,\n        () => {\n          // Finalization.\n          lastValue = activeTask = null;\n        }\n      )\n    );\n  });\n}\n","/**\n * Checks if the current platform is a mobile device.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\n */\nexport const isMobile = () => /Mobi/i.test(navigator.userAgent);\n","import { combineLatest, Observable, pairwise } from 'rxjs';\nimport { Call } from '../Call';\nimport { CallingState } from '../store';\nimport { createSubscription } from '../store/rxUtils';\nimport { InputMediaDeviceManagerState } from './InputMediaDeviceManagerState';\nimport { isMobile } from '../helpers/compatibility';\nimport { isReactNative } from '../helpers/platforms';\nimport { Logger } from '../coordinator/connection/types';\nimport { getLogger } from '../logger';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { deviceIds$, disposeOfMediaStream } from './devices';\nimport {\n  settled,\n  withCancellation,\n  withoutConcurrency,\n} from '../helpers/concurrency';\nimport {\n  MediaStreamFilter,\n  MediaStreamFilterEntry,\n  MediaStreamFilterRegistrationResult,\n} from './filters';\n\nexport abstract class InputMediaDeviceManager<\n  T extends InputMediaDeviceManagerState<C>,\n  C = MediaTrackConstraints,\n> {\n  /**\n   * if true, stops the media stream when call is left\n   */\n  stopOnLeave = true;\n  logger: Logger;\n\n  state: T;\n\n  protected readonly call: Call;\n  protected readonly trackType: TrackType;\n  protected subscriptions: Function[] = [];\n  private isTrackStoppedDueToTrackEnd = false;\n  private filters: MediaStreamFilterEntry[] = [];\n  private statusChangeConcurrencyTag = Symbol('statusChangeConcurrencyTag');\n  private filterRegistrationConcurrencyTag = Symbol(\n    'filterRegistrationConcurrencyTag',\n  );\n\n  protected constructor(call: Call, state: T, trackType: TrackType) {\n    this.call = call;\n    this.state = state;\n    this.trackType = trackType;\n    this.logger = getLogger([`${TrackType[trackType].toLowerCase()} manager`]);\n    if (\n      deviceIds$ &&\n      !isReactNative() &&\n      (this.trackType === TrackType.AUDIO || this.trackType === TrackType.VIDEO)\n    ) {\n      this.handleDisconnectedOrReplacedDevices();\n    }\n  }\n\n  /**\n   * Lists the available audio/video devices\n   *\n   * Note: It prompts the user for a permission to use devices (if not already granted)\n   *\n   * @returns an Observable that will be updated if a device is connected or disconnected\n   */\n  listDevices() {\n    return this.getDevices();\n  }\n\n  /**\n   * Returns `true` when this device is in enabled state.\n   */\n  get enabled() {\n    return this.state.status === 'enabled';\n  }\n\n  /**\n   * Starts stream.\n   */\n  async enable() {\n    this.state.prevStatus = this.state.optimisticStatus;\n    if (this.state.optimisticStatus === 'enabled') {\n      return;\n    }\n    this.state.setPendingStatus('enabled');\n\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      try {\n        await this.unmuteStream();\n        this.state.setStatus('enabled');\n      } finally {\n        if (!signal.aborted) {\n          this.state.setPendingStatus(this.state.status);\n        }\n      }\n    });\n  }\n\n  /**\n   * Stops or pauses the stream based on state.disableMode\n   * @param {boolean} [forceStop=false] when true, stops the tracks regardless of the state.disableMode\n   */\n  async disable(forceStop: boolean = false) {\n    this.state.prevStatus = this.state.optimisticStatus;\n    if (!forceStop && this.state.optimisticStatus === 'disabled') {\n      return;\n    }\n\n    this.state.setPendingStatus('disabled');\n\n    await withCancellation(this.statusChangeConcurrencyTag, async (signal) => {\n      try {\n        const stopTracks =\n          forceStop || this.state.disableMode === 'stop-tracks';\n        await this.muteStream(stopTracks);\n        this.state.setStatus('disabled');\n      } finally {\n        if (!signal.aborted) {\n          this.state.setPendingStatus(this.state.status);\n        }\n      }\n    });\n  }\n\n  /**\n   * Returns a promise that resolves when all pe\n   */\n  async statusChangeSettled() {\n    await settled(this.statusChangeConcurrencyTag);\n  }\n\n  /**\n   * If status was previously enabled, it will re-enable the device.\n   */\n  async resume() {\n    if (\n      this.state.prevStatus === 'enabled' &&\n      this.state.status !== 'enabled'\n    ) {\n      await this.enable();\n    }\n  }\n\n  /**\n   * If the current device status is disabled, it will enable the device,\n   * else it will disable it.\n   */\n  async toggle() {\n    if (this.state.optimisticStatus === 'enabled') {\n      return await this.disable();\n    } else {\n      return await this.enable();\n    }\n  }\n\n  /**\n   * Registers a filter that will be applied to the stream.\n   *\n   * The registered filter will get the existing stream, and it should return\n   * a new stream with the applied filter.\n   *\n   * @param filter the filter to register.\n   * @returns MediaStreamFilterRegistrationResult\n   */\n  registerFilter(\n    filter: MediaStreamFilter,\n  ): MediaStreamFilterRegistrationResult {\n    const entry: MediaStreamFilterEntry = {\n      start: filter,\n      stop: undefined,\n    };\n    this.call.tracer.trace(`registerFilter.${TrackType[this.trackType]}`, null);\n    const registered = withoutConcurrency(\n      this.filterRegistrationConcurrencyTag,\n      async () => {\n        await settled(this.statusChangeConcurrencyTag);\n        this.filters.push(entry);\n        await this.applySettingsToStream();\n      },\n    );\n\n    return {\n      registered,\n      unregister: () =>\n        withoutConcurrency(this.filterRegistrationConcurrencyTag, async () => {\n          await settled(this.statusChangeConcurrencyTag);\n          entry.stop?.();\n          this.filters = this.filters.filter((f) => f !== entry);\n          await this.applySettingsToStream();\n        }),\n    };\n  }\n\n  /**\n   * Will set the default constraints for the device.\n   *\n   * @param constraints the constraints to set.\n   */\n  setDefaultConstraints(constraints: C) {\n    this.state.setDefaultConstraints(constraints);\n  }\n\n  /**\n   * Selects a device.\n   *\n   * Note: This method is not supported in React Native\n   * @param deviceId the device id to select.\n   */\n  async select(deviceId: string | undefined) {\n    if (isReactNative()) {\n      throw new Error(\n        'This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.',\n      );\n    }\n    const prevDeviceId = this.state.selectedDevice;\n    if (deviceId === prevDeviceId) {\n      return;\n    }\n    try {\n      this.state.setDevice(deviceId);\n      await this.applySettingsToStream();\n    } catch (error) {\n      this.state.setDevice(prevDeviceId);\n      throw error;\n    }\n  }\n\n  /**\n   * Disposes the manager.\n   *\n   * @internal\n   */\n  dispose = () => {\n    this.subscriptions.forEach((s) => s());\n  };\n\n  protected async applySettingsToStream() {\n    await withCancellation(this.statusChangeConcurrencyTag, async () => {\n      if (this.enabled) {\n        await this.muteStream();\n        await this.unmuteStream();\n      }\n    });\n  }\n\n  protected abstract getDevices(): Observable<MediaDeviceInfo[]>;\n\n  protected abstract getStream(constraints: C): Promise<MediaStream>;\n\n  protected publishStream(stream: MediaStream): Promise<void> {\n    return this.call.publish(stream, this.trackType);\n  }\n\n  protected stopPublishStream(): Promise<void> {\n    return this.call.stopPublish(this.trackType);\n  }\n\n  protected getTracks(): MediaStreamTrack[] {\n    return this.state.mediaStream?.getTracks() ?? [];\n  }\n\n  protected async muteStream(stopTracks: boolean = true) {\n    const mediaStream = this.state.mediaStream;\n    if (!mediaStream) return;\n    this.logger('debug', `${stopTracks ? 'Stopping' : 'Disabling'} stream`);\n    if (this.call.state.callingState === CallingState.JOINED) {\n      await this.stopPublishStream();\n    }\n    this.muteLocalStream(stopTracks);\n    const allEnded = this.getTracks().every((t) => t.readyState === 'ended');\n    if (allEnded) {\n      // @ts-expect-error release() is present in react-native-webrtc\n      if (typeof mediaStream.release === 'function') {\n        // @ts-expect-error called to dispose the stream in RN\n        mediaStream.release();\n      }\n      this.state.setMediaStream(undefined, undefined);\n      this.filters.forEach((entry) => entry.stop?.());\n    }\n  }\n\n  private disableTracks() {\n    this.getTracks().forEach((track) => {\n      if (track.enabled) track.enabled = false;\n    });\n  }\n\n  private enableTracks() {\n    this.getTracks().forEach((track) => {\n      if (!track.enabled) track.enabled = true;\n    });\n  }\n\n  private stopTracks() {\n    this.getTracks().forEach((track) => {\n      if (track.readyState === 'live') track.stop();\n    });\n  }\n\n  private muteLocalStream(stopTracks: boolean) {\n    if (!this.state.mediaStream) {\n      return;\n    }\n    if (stopTracks) {\n      this.stopTracks();\n    } else {\n      this.disableTracks();\n    }\n  }\n\n  protected async unmuteStream() {\n    this.logger('debug', 'Starting stream');\n    let stream: MediaStream;\n    let rootStream: Promise<MediaStream> | undefined;\n\n    try {\n      if (\n        this.state.mediaStream &&\n        this.getTracks().every((t) => t.readyState === 'live')\n      ) {\n        stream = this.state.mediaStream;\n        this.enableTracks();\n      } else {\n        const defaultConstraints = this.state.defaultConstraints;\n        const constraints: MediaTrackConstraints = {\n          ...defaultConstraints,\n          deviceId: this.state.selectedDevice\n            ? { exact: this.state.selectedDevice }\n            : undefined,\n        };\n\n        /**\n         * Chains two media streams together.\n         *\n         * In our case, filters MediaStreams are derived from their parent MediaStream.\n         * However, once a child filter's track is stopped,\n         * the tracks of the parent MediaStream aren't automatically stopped.\n         * This leads to a situation where the camera indicator light is still on\n         * even though the user stopped publishing video.\n         *\n         * This function works around this issue by stopping the parent MediaStream's tracks\n         * as well once the child filter's tracks are stopped.\n         *\n         * It works by patching the stop() method of the child filter's tracks to also stop\n         * the parent MediaStream's tracks of the same type. Here we assume that\n         * the parent MediaStream has only one track of each type.\n         *\n         * @param parentStream the parent MediaStream. Omit for the root stream.\n         */\n        const chainWith =\n          (parentStream?: Promise<MediaStream>) =>\n          async (filterStream: MediaStream): Promise<MediaStream> => {\n            if (!parentStream) return filterStream;\n            // TODO OL: take care of track.enabled property as well\n            const parent = await parentStream;\n            filterStream.getTracks().forEach((track) => {\n              const originalStop = track.stop;\n              track.stop = function stop() {\n                originalStop.call(track);\n                parent.getTracks().forEach((parentTrack) => {\n                  if (parentTrack.kind === track.kind) {\n                    parentTrack.stop();\n                  }\n                });\n              };\n            });\n\n            parent.getTracks().forEach((parentTrack) => {\n              // When the parent stream abruptly ends, we propagate the event\n              // to the filter stream.\n              // This usually happens when the camera/microphone permissions\n              // are revoked or when the device is disconnected.\n              const handleParentTrackEnded = () => {\n                filterStream.getTracks().forEach((track) => {\n                  if (parentTrack.kind !== track.kind) return;\n                  track.stop();\n                  track.dispatchEvent(new Event('ended')); // propagate the event\n                });\n              };\n              parentTrack.addEventListener('ended', handleParentTrackEnded);\n              this.subscriptions.push(() => {\n                parentTrack.removeEventListener(\n                  'ended',\n                  handleParentTrackEnded,\n                );\n              });\n            });\n\n            return filterStream;\n          };\n\n        // the rootStream represents the stream coming from the actual device\n        // e.g. camera or microphone stream\n        rootStream = this.getStream(constraints as C);\n        // we publish the last MediaStream of the chain\n        stream = await this.filters.reduce(\n          (parent, entry) =>\n            parent\n              .then((inputStream) => {\n                const { stop, output } = entry.start(inputStream);\n                entry.stop = stop;\n                return output;\n              })\n              .then(chainWith(parent), (error) => {\n                this.logger(\n                  'warn',\n                  'Filter failed to start and will be ignored',\n                  error,\n                );\n                return parent;\n              }),\n          rootStream,\n        );\n      }\n      if (this.call.state.callingState === CallingState.JOINED) {\n        await this.publishStream(stream);\n      }\n      if (this.state.mediaStream !== stream) {\n        this.state.setMediaStream(stream, await rootStream);\n        const handleTrackEnded = async () => {\n          await this.statusChangeSettled();\n          if (this.enabled) {\n            this.isTrackStoppedDueToTrackEnd = true;\n            setTimeout(() => {\n              this.isTrackStoppedDueToTrackEnd = false;\n            }, 2000);\n            await this.disable();\n          }\n        };\n        const createTrackMuteHandler = (muted: boolean) => () => {\n          if (!isMobile() || this.trackType !== TrackType.VIDEO) return;\n          this.call.notifyTrackMuteState(muted, this.trackType).catch((err) => {\n            this.logger('warn', 'Error while notifying track mute state', err);\n          });\n        };\n        stream.getTracks().forEach((track) => {\n          const muteHandler = createTrackMuteHandler(true);\n          const unmuteHandler = createTrackMuteHandler(false);\n          track.addEventListener('mute', muteHandler);\n          track.addEventListener('unmute', unmuteHandler);\n          track.addEventListener('ended', handleTrackEnded);\n          this.subscriptions.push(() => {\n            track.removeEventListener('mute', muteHandler);\n            track.removeEventListener('unmute', unmuteHandler);\n            track.removeEventListener('ended', handleTrackEnded);\n          });\n        });\n      }\n    } catch (err) {\n      if (rootStream) {\n        disposeOfMediaStream(await rootStream);\n      }\n\n      throw err;\n    }\n  }\n\n  private get mediaDeviceKind() {\n    if (this.trackType === TrackType.AUDIO) {\n      return 'audioinput';\n    }\n    if (this.trackType === TrackType.VIDEO) {\n      return 'videoinput';\n    }\n    return '';\n  }\n\n  private handleDisconnectedOrReplacedDevices() {\n    this.subscriptions.push(\n      createSubscription(\n        combineLatest([\n          deviceIds$!.pipe(pairwise()),\n          this.state.selectedDevice$,\n        ]),\n        async ([[prevDevices, currentDevices], deviceId]) => {\n          try {\n            if (!deviceId) return;\n            await this.statusChangeSettled();\n\n            let isDeviceDisconnected = false;\n            let isDeviceReplaced = false;\n            const currentDevice = this.findDevice(currentDevices, deviceId);\n            const prevDevice = this.findDevice(prevDevices, deviceId);\n            if (!currentDevice && prevDevice) {\n              isDeviceDisconnected = true;\n            } else if (\n              currentDevice &&\n              prevDevice &&\n              currentDevice.deviceId === prevDevice.deviceId &&\n              currentDevice.groupId !== prevDevice.groupId\n            ) {\n              isDeviceReplaced = true;\n            }\n\n            if (isDeviceDisconnected) {\n              await this.disable();\n              await this.select(undefined);\n            }\n            if (isDeviceReplaced) {\n              if (\n                this.isTrackStoppedDueToTrackEnd &&\n                this.state.status === 'disabled'\n              ) {\n                await this.enable();\n                this.isTrackStoppedDueToTrackEnd = false;\n              } else {\n                await this.applySettingsToStream();\n              }\n            }\n          } catch (err) {\n            this.logger(\n              'warn',\n              'Unexpected error while handling disconnected or replaced device',\n              err,\n            );\n          }\n        },\n      ),\n    );\n  }\n\n  private findDevice(devices: MediaDeviceInfo[], deviceId: string) {\n    const kind = this.mediaDeviceKind;\n    return devices.find((d) => d.deviceId === deviceId && d.kind === kind);\n  }\n}\n","import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Groups pairs of consecutive emissions together and emits them as an array of\n * two values.\n *\n * <span class=\"informal\">Puts the current value and previous value together as\n * an array, and emits that.</span>\n *\n * ![](pairwise.png)\n *\n * The Nth emission from the source Observable will cause the output Observable\n * to emit an array [(N-1)th, Nth] of the previous and the current value, as a\n * pair. For this reason, `pairwise` emits on the second and subsequent\n * emissions from the source Observable, but not on the first emission, because\n * there is no previous value in that case.\n *\n * ## Example\n *\n * On every click (starting from the second), emit the relative distance to the previous click\n *\n * ```ts\n * import { fromEvent, pairwise, map } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const pairs = clicks.pipe(pairwise());\n * const distance = pairs.pipe(\n *   map(([first, second]) => {\n *     const x0 = first.clientX;\n *     const y0 = first.clientY;\n *     const x1 = second.clientX;\n *     const y1 = second.clientY;\n *     return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n *   })\n * );\n *\n * distance.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n *\n * @return A function that returns an Observable of pairs (as arrays) of\n * consecutive values from the source Observable.\n */\nexport function pairwise<T>(): OperatorFunction<T, [T, T]> {\n  return operate((source, subscriber) => {\n    let prev: T;\n    let hasPrev = false;\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        const p = prev;\n        prev = value;\n        hasPrev && subscriber.next([p, value]);\n        hasPrev = true;\n      })\n    );\n  });\n}\n","import {\n  BehaviorSubject,\n  distinctUntilChanged,\n  Observable,\n  of,\n  shareReplay,\n} from 'rxjs';\nimport { RxUtils } from '../store';\nimport { BrowserPermission, BrowserPermissionState } from './BrowserPermission';\n\nexport type InputDeviceStatus = 'enabled' | 'disabled' | undefined;\nexport type TrackDisableMode = 'stop-tracks' | 'disable-tracks';\n\nexport abstract class InputMediaDeviceManagerState<C = MediaTrackConstraints> {\n  protected statusSubject = new BehaviorSubject<InputDeviceStatus>(undefined);\n  protected optimisticStatusSubject = new BehaviorSubject<InputDeviceStatus>(\n    undefined,\n  );\n  protected mediaStreamSubject = new BehaviorSubject<MediaStream | undefined>(\n    undefined,\n  );\n  protected selectedDeviceSubject = new BehaviorSubject<string | undefined>(\n    undefined,\n  );\n  protected defaultConstraintsSubject = new BehaviorSubject<C | undefined>(\n    undefined,\n  );\n\n  /**\n   * @internal\n   */\n  prevStatus: InputDeviceStatus;\n\n  /**\n   * An Observable that emits the current media stream, or `undefined` if the device is currently disabled.\n   *\n   */\n  mediaStream$ = this.mediaStreamSubject.asObservable();\n\n  /**\n   * An Observable that emits the currently selected device\n   */\n  selectedDevice$ = this.selectedDeviceSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the device status\n   */\n  status$ = this.statusSubject.asObservable().pipe(distinctUntilChanged());\n\n  /**\n   * An Observable the reflects the requested device status. Useful for optimistic UIs\n   */\n  optimisticStatus$ = this.optimisticStatusSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * The default constraints for the device.\n   */\n  defaultConstraints$ = this.defaultConstraintsSubject.asObservable();\n\n  /**\n   * An observable that will emit `true` if browser/system permission\n   * is granted (or at least hasn't been denied), `false` otherwise.\n   */\n  hasBrowserPermission$: Observable<boolean>;\n\n  /**\n   * An observable that emits with browser permission state changes.\n   * Gives more granular visiblity than hasBrowserPermission$.\n   */\n  browserPermissionState$: Observable<BrowserPermissionState>;\n\n  /**\n   * An observable that emits `true` when SDK is prompting for browser permission\n   * (i.e. browser's UI for allowing or disallowing device access is visible)\n   */\n  isPromptingPermission$: Observable<boolean>;\n\n  /**\n   * Constructs new InputMediaDeviceManagerState instance.\n   *\n   * @param disableMode the disable mode to use.\n   * @param permission the BrowserPermission to use for querying.\n   * `undefined` means no permission is required.\n   */\n  constructor(\n    public readonly disableMode: TrackDisableMode = 'stop-tracks',\n    permission?: BrowserPermission,\n  ) {\n    this.hasBrowserPermission$ = permission\n      ? permission.asObservable().pipe(shareReplay(1))\n      : of(true);\n\n    this.browserPermissionState$ = permission\n      ? permission.asStateObservable().pipe(shareReplay(1))\n      : of('prompt');\n\n    this.isPromptingPermission$ = permission\n      ? permission.getIsPromptingObservable().pipe(shareReplay(1))\n      : of(false);\n  }\n\n  /**\n   * The device status\n   */\n  get status() {\n    return RxUtils.getCurrentValue(this.status$);\n  }\n\n  /**\n   * The requested device status. Useful for optimistic UIs\n   */\n  get optimisticStatus() {\n    return RxUtils.getCurrentValue(this.optimisticStatus$);\n  }\n\n  /**\n   * The currently selected device\n   */\n  get selectedDevice() {\n    return RxUtils.getCurrentValue(this.selectedDevice$);\n  }\n\n  /**\n   * The current media stream, or `undefined` if the device is currently disabled.\n   */\n  get mediaStream() {\n    return RxUtils.getCurrentValue(this.mediaStream$);\n  }\n\n  /**\n   * @internal\n   * @param status\n   */\n  setStatus(status: InputDeviceStatus) {\n    RxUtils.setCurrentValue(this.statusSubject, status);\n  }\n\n  /**\n   * @internal\n   * @param pendingStatus\n   */\n  setPendingStatus(pendingStatus: InputDeviceStatus) {\n    RxUtils.setCurrentValue(this.optimisticStatusSubject, pendingStatus);\n  }\n\n  /**\n   * Updates the `mediaStream` state variable.\n   *\n   * @internal\n   * @param stream the stream to set.\n   * @param rootStream the root stream, applicable when filters are used\n   * as this is the stream that holds the actual deviceId information.\n   */\n  setMediaStream(\n    stream: MediaStream | undefined,\n    rootStream: MediaStream | undefined,\n  ) {\n    RxUtils.setCurrentValue(this.mediaStreamSubject, stream);\n    if (rootStream) {\n      this.setDevice(this.getDeviceIdFromStream(rootStream));\n    }\n  }\n\n  /**\n   * @internal\n   * @param deviceId the device id to set.\n   */\n  setDevice(deviceId: string | undefined) {\n    RxUtils.setCurrentValue(this.selectedDeviceSubject, deviceId);\n  }\n\n  /**\n   * Gets the default constraints for the device.\n   */\n  get defaultConstraints() {\n    return RxUtils.getCurrentValue(this.defaultConstraints$);\n  }\n\n  /**\n   * Sets the default constraints for the device.\n   *\n   * @internal\n   * @param constraints the constraints to set.\n   */\n  setDefaultConstraints(constraints: C | undefined) {\n    RxUtils.setCurrentValue(this.defaultConstraintsSubject, constraints);\n  }\n\n  protected abstract getDeviceIdFromStream(\n    stream: MediaStream,\n  ): string | undefined;\n}\n","import { BehaviorSubject, distinctUntilChanged, Observable } from 'rxjs';\nimport { InputMediaDeviceManagerState } from './InputMediaDeviceManagerState';\nimport { isReactNative } from '../helpers/platforms';\nimport { getVideoBrowserPermission } from './devices';\nimport { RxUtils } from '../store';\n\nexport type CameraDirection = 'front' | 'back' | undefined;\n\nexport class CameraManagerState extends InputMediaDeviceManagerState {\n  private directionSubject = new BehaviorSubject<CameraDirection>(undefined);\n\n  /**\n   * Observable that emits the preferred camera direction\n   * front - means the camera facing the user\n   * back - means the camera facing the environment\n   */\n  direction$: Observable<CameraDirection>;\n\n  constructor() {\n    super('stop-tracks', getVideoBrowserPermission());\n    this.direction$ = this.directionSubject\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  /**\n   * The preferred camera direction\n   * front - means the camera facing the user\n   * back - means the camera facing the environment\n   */\n  get direction() {\n    return RxUtils.getCurrentValue(this.direction$);\n  }\n\n  /**\n   * @internal\n   */\n  setDirection(direction: CameraDirection) {\n    RxUtils.setCurrentValue(this.directionSubject, direction);\n  }\n\n  /**\n   * @internal\n   */\n  setMediaStream(\n    stream: MediaStream | undefined,\n    rootStream: MediaStream | undefined,\n  ): void {\n    super.setMediaStream(stream, rootStream);\n    if (stream) {\n      // RN getSettings() doesn't return facingMode, so we don't verify camera direction\n      const direction = isReactNative()\n        ? this.direction\n        : stream.getVideoTracks()[0]?.getSettings().facingMode === 'environment'\n          ? 'back'\n          : 'front';\n      this.setDirection(direction);\n    }\n  }\n\n  protected getDeviceIdFromStream(stream: MediaStream): string | undefined {\n    const [track] = stream.getVideoTracks();\n    return track?.getSettings().deviceId;\n  }\n}\n","import { Observable } from 'rxjs';\nimport { Call } from '../Call';\nimport { CameraDirection, CameraManagerState } from './CameraManagerState';\nimport { InputMediaDeviceManager } from './InputMediaDeviceManager';\nimport { getVideoDevices, getVideoStream } from './devices';\nimport { OwnCapability, VideoSettingsResponse } from '../gen/coordinator';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { isMobile } from '../helpers/compatibility';\nimport { isReactNative } from '../helpers/platforms';\n\nexport class CameraManager extends InputMediaDeviceManager<CameraManagerState> {\n  private targetResolution = {\n    width: 1280,\n    height: 720,\n  };\n\n  /**\n   * Constructs a new CameraManager.\n   *\n   * @param call the call instance.\n   */\n  constructor(call: Call) {\n    super(call, new CameraManagerState(), TrackType.VIDEO);\n  }\n\n  private isDirectionSupportedByDevice() {\n    return isReactNative() || isMobile();\n  }\n\n  /**\n   * Select the camera direction.\n   *\n   * @param direction the direction of the camera to select.\n   */\n  async selectDirection(direction: Exclude<CameraDirection, undefined>) {\n    if (!this.isDirectionSupportedByDevice()) {\n      this.logger('warn', 'Setting direction is not supported on this device');\n      return;\n    }\n\n    // providing both device id and direction doesn't work, so we deselect the device\n    this.state.setDirection(direction);\n    this.state.setDevice(undefined);\n\n    if (isReactNative()) {\n      const videoTrack = this.getTracks()[0] as MediaStreamTrack | undefined;\n      await videoTrack?.applyConstraints({\n        facingMode: direction === 'front' ? 'user' : 'environment',\n      });\n      return;\n    }\n\n    this.getTracks().forEach((track) => track.stop());\n    try {\n      await this.unmuteStream();\n    } catch (error) {\n      if (error instanceof Error && error.name === 'NotReadableError') {\n        // the camera is already in use, and the device can't use it unless it's released.\n        // in that case, we need to stop the stream and start it again.\n        await this.muteStream();\n        await this.unmuteStream();\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Flips the camera direction: if it's front it will change to back, if it's back, it will change to front.\n   *\n   * Note: if there is no available camera with the desired direction, this method will do nothing.\n   * @returns\n   */\n  async flip() {\n    const newDirection = this.state.direction === 'front' ? 'back' : 'front';\n    await this.selectDirection(newDirection);\n  }\n\n  /**\n   * @internal\n   */\n  async selectTargetResolution(resolution: { width: number; height: number }) {\n    this.targetResolution.height = resolution.height;\n    this.targetResolution.width = resolution.width;\n    if (this.state.optimisticStatus === 'enabled') {\n      try {\n        await this.statusChangeSettled();\n      } catch (error) {\n        // couldn't enable device, target resolution will be applied the next time user attempts to start the device\n        this.logger('warn', 'could not apply target resolution', error);\n      }\n    }\n    if (this.enabled && this.state.mediaStream) {\n      const [videoTrack] = this.state.mediaStream.getVideoTracks();\n      if (!videoTrack) return;\n      const { width, height } = videoTrack.getSettings();\n      if (\n        width !== this.targetResolution.width ||\n        height !== this.targetResolution.height\n      ) {\n        await this.applySettingsToStream();\n        this.logger(\n          'debug',\n          `${width}x${height} target resolution applied to media stream`,\n        );\n      }\n    }\n  }\n\n  /**\n   * Applies the video settings to the camera.\n   *\n   * @param settings the video settings to apply.\n   * @param publish whether to publish the stream after applying the settings.\n   */\n  async apply(settings: VideoSettingsResponse, publish: boolean) {\n    const hasPublishedVideo = !!this.call.state.localParticipant?.videoStream;\n    const hasPermission = this.call.permissionsContext.hasPermission(\n      OwnCapability.SEND_AUDIO,\n    );\n    if (hasPublishedVideo || !hasPermission) return;\n\n    // Wait for any in progress camera operation\n    await this.statusChangeSettled();\n\n    const { target_resolution, camera_facing, camera_default_on } = settings;\n    await this.selectTargetResolution(target_resolution);\n\n    // Set camera direction if it's not yet set\n    if (!this.state.direction && !this.state.selectedDevice) {\n      this.state.setDirection(camera_facing === 'front' ? 'front' : 'back');\n    }\n\n    if (!publish) return;\n\n    const { mediaStream } = this.state;\n    if (this.enabled && mediaStream) {\n      // The camera is already enabled (e.g. lobby screen). Publish the stream\n      await this.publishStream(mediaStream);\n    } else if (this.state.status === undefined && camera_default_on) {\n      // Start camera if backend config specifies, and there is no local setting\n      await this.enable();\n    }\n  }\n\n  protected getDevices(): Observable<MediaDeviceInfo[]> {\n    return getVideoDevices();\n  }\n\n  protected getStream(\n    constraints: MediaTrackConstraints,\n  ): Promise<MediaStream> {\n    constraints.width = this.targetResolution.width;\n    constraints.height = this.targetResolution.height;\n    // We can't set both device id and facing mode\n    // Device id has higher priority\n\n    if (\n      !constraints.deviceId &&\n      this.state.direction &&\n      this.isDirectionSupportedByDevice()\n    ) {\n      constraints.facingMode =\n        this.state.direction === 'front' ? 'user' : 'environment';\n    }\n    return getVideoStream(constraints, this.call.tracer);\n  }\n}\n","import { BehaviorSubject, distinctUntilChanged, Observable } from 'rxjs';\nimport {\n  InputMediaDeviceManagerState,\n  TrackDisableMode,\n} from './InputMediaDeviceManagerState';\nimport { getAudioBrowserPermission } from './devices';\nimport { RxUtils } from '../store';\n\nexport class MicrophoneManagerState extends InputMediaDeviceManagerState {\n  private speakingWhileMutedSubject = new BehaviorSubject<boolean>(false);\n\n  /**\n   * An Observable that emits `true` if the user's microphone is muted but they'are speaking.\n   *\n   * This feature is not available in the React Native SDK.\n   */\n  speakingWhileMuted$: Observable<boolean>;\n\n  constructor(disableMode: TrackDisableMode) {\n    super(disableMode, getAudioBrowserPermission());\n\n    this.speakingWhileMuted$ = this.speakingWhileMutedSubject\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  /**\n   * `true` if the user's microphone is muted but they'are speaking.\n   *\n   * This feature is not available in the React Native SDK.\n   */\n  get speakingWhileMuted() {\n    return RxUtils.getCurrentValue(this.speakingWhileMuted$);\n  }\n\n  /**\n   * @internal\n   */\n  setSpeakingWhileMuted(isSpeaking: boolean) {\n    RxUtils.setCurrentValue(this.speakingWhileMutedSubject, isSpeaking);\n  }\n\n  protected getDeviceIdFromStream(stream: MediaStream): string | undefined {\n    const [track] = stream.getAudioTracks();\n    return track?.getSettings().deviceId;\n  }\n}\n","export type SoundDetectorOptions = {\n  /**\n   * Defines how often the detector should check whether a sound is present.\n   * Defaults to 500ms.\n   */\n  detectionFrequencyInMs?: number;\n\n  /**\n   * Defines the audio level threshold before a \"change\" is emitted.\n   * Defaults to 150. This value should be in the range of 0-255.\n   */\n  audioLevelThreshold?: number;\n\n  /**\n   * See https://developer.mozilla.org/en-US/docs/web/api/analysernode/fftsize\n   *\n   * Defaults to 128.\n   */\n  fftSize?: number;\n\n  /**\n   * Defines whether the provided audio stream should be stopped (destroyed)\n   * when the sound detector is stopped.\n   *\n   * Defaults to `true`.\n   */\n  destroyStreamOnStop?: boolean;\n};\n\nexport type SoundDetectorState = {\n  isSoundDetected: boolean;\n  /**\n   * Represented as percentage (0-100) where 100% is defined by `audioLevelThreshold` property.\n   * Decrease time between samples (to 50-100ms) with `detectionFrequencyInMs` property.\n   */\n  audioLevel: number;\n};\n\nexport type SoundStateChangeHandler = (state: SoundDetectorState) => void;\n\nconst DETECTION_FREQUENCY_IN_MS = 500;\nconst AUDIO_LEVEL_THRESHOLD = 150;\nconst FFT_SIZE = 128;\n\n/**\n * Creates a new sound detector.\n *\n * @param audioStream the audio stream to observe. Depending on the provided configuration, this stream might be destroyed when the sound detector is stopped.\n * @param onSoundDetectedStateChanged a callback which is called when the sound state changes.\n * @param options custom options for the sound detector.\n * @returns a clean-up function which once invoked stops the sound detector.\n */\nexport const createSoundDetector = (\n  audioStream: MediaStream,\n  onSoundDetectedStateChanged: SoundStateChangeHandler,\n  options: SoundDetectorOptions = {},\n) => {\n  const {\n    detectionFrequencyInMs = DETECTION_FREQUENCY_IN_MS,\n    audioLevelThreshold = AUDIO_LEVEL_THRESHOLD,\n    fftSize = FFT_SIZE,\n    destroyStreamOnStop = true,\n  } = options;\n\n  const audioContext = new AudioContext();\n  const analyser = audioContext.createAnalyser();\n  analyser.fftSize = fftSize;\n\n  const microphone = audioContext.createMediaStreamSource(audioStream);\n  microphone.connect(analyser);\n\n  const intervalId = setInterval(() => {\n    const data = new Uint8Array(analyser.frequencyBinCount);\n    analyser.getByteFrequencyData(data);\n\n    const isSoundDetected = data.some((value) => value >= audioLevelThreshold);\n\n    const averagedDataValue = data.reduce((pv, cv) => pv + cv, 0) / data.length;\n\n    const percentage =\n      averagedDataValue > audioLevelThreshold\n        ? 100\n        : Math.round((averagedDataValue / audioLevelThreshold) * 100);\n\n    // When the track is disabled, it takes time for the buffer to empty\n    // This check will ensure that we don't send anything if the track is disabled\n    if (audioStream.getAudioTracks()[0]?.enabled) {\n      onSoundDetectedStateChanged({ isSoundDetected, audioLevel: percentage });\n    } else {\n      onSoundDetectedStateChanged({ isSoundDetected: false, audioLevel: 0 });\n    }\n  }, detectionFrequencyInMs);\n\n  return async function stop() {\n    clearInterval(intervalId);\n\n    // clean-up the AudioContext elements\n    microphone.disconnect();\n    analyser.disconnect();\n    if (audioContext.state !== 'closed') {\n      await audioContext.close();\n    }\n\n    // stop the stream\n    if (destroyStreamOnStop) {\n      audioStream.getTracks().forEach((track) => {\n        track.stop();\n        audioStream.removeTrack(track);\n      });\n    }\n  };\n};\n","import { BaseStats } from '../stats';\nimport { SoundStateChangeHandler } from './sound-detector';\nimport { flatten } from '../stats/utils';\nimport { getLogger } from '../logger';\n\nexport class RNSpeechDetector {\n  private pc1 = new RTCPeerConnection({});\n  private pc2 = new RTCPeerConnection({});\n  private audioStream: MediaStream | undefined;\n\n  /**\n   * Starts the speech detection.\n   */\n  public async start(onSoundDetectedStateChanged: SoundStateChangeHandler) {\n    try {\n      this.cleanupAudioStream();\n      const audioStream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n      });\n      this.audioStream = audioStream;\n\n      this.pc1.addEventListener('icecandidate', async (e) => {\n        await this.pc2.addIceCandidate(\n          e.candidate as RTCIceCandidateInit | undefined,\n        );\n      });\n      this.pc2.addEventListener('icecandidate', async (e) => {\n        await this.pc1.addIceCandidate(\n          e.candidate as RTCIceCandidateInit | undefined,\n        );\n      });\n      this.pc2.addEventListener('track', (e) => {\n        e.streams[0].getTracks().forEach((track) => {\n          // In RN, the remote track is automatically added to the audio output device\n          // so we need to mute it to avoid hearing the audio back\n          // @ts-expect-error _setVolume is a private method in react-native-webrtc\n          track._setVolume(0);\n        });\n      });\n\n      audioStream\n        .getTracks()\n        .forEach((track) => this.pc1.addTrack(track, audioStream));\n      const offer = await this.pc1.createOffer({});\n      await this.pc2.setRemoteDescription(offer);\n      await this.pc1.setLocalDescription(offer);\n      const answer = await this.pc2.createAnswer();\n      await this.pc1.setRemoteDescription(answer);\n      await this.pc2.setLocalDescription(answer);\n      const unsub = this.onSpeakingDetectedStateChange(\n        onSoundDetectedStateChanged,\n      );\n      return () => {\n        unsub();\n        this.stop();\n      };\n    } catch (error) {\n      const logger = getLogger(['RNSpeechDetector']);\n      logger('error', 'error handling permissions: ', error);\n      return () => {};\n    }\n  }\n\n  /**\n   * Stops the speech detection and releases all allocated resources.\n   */\n  private stop() {\n    this.pc1.close();\n    this.pc2.close();\n    this.cleanupAudioStream();\n  }\n\n  /**\n   * Public method that detects the audio levels and returns the status.\n   */\n  private onSpeakingDetectedStateChange(\n    onSoundDetectedStateChanged: SoundStateChangeHandler,\n  ) {\n    const initialBaselineNoiseLevel = 0.13;\n    let baselineNoiseLevel = initialBaselineNoiseLevel;\n    let speechDetected = false;\n    let speechTimer: NodeJS.Timeout | undefined;\n    let silenceTimer: NodeJS.Timeout | undefined;\n    const audioLevelHistory: number[] = []; // Store recent audio levels for smoother detection\n    const historyLength = 10;\n    const silenceThreshold = 1.1;\n    const resetThreshold = 0.9;\n    const speechTimeout = 500; // Speech is set to true after 500ms of audio detection\n    const silenceTimeout = 5000; // Reset baseline after 5 seconds of silence\n\n    const checkAudioLevel = async () => {\n      try {\n        const stats = (await this.pc1.getStats()) as RTCStatsReport;\n        const report = flatten(stats);\n        // Audio levels are present inside stats of type `media-source` and of kind `audio`\n        const audioMediaSourceStats = report.find(\n          (stat) =>\n            stat.type === 'media-source' &&\n            (stat as RTCRtpStreamStats).kind === 'audio',\n        ) as BaseStats;\n        if (audioMediaSourceStats) {\n          const { audioLevel } = audioMediaSourceStats;\n          if (audioLevel) {\n            // Update audio level history (with max historyLength sized array)\n            audioLevelHistory.push(audioLevel);\n            if (audioLevelHistory.length > historyLength) {\n              audioLevelHistory.shift();\n            }\n\n            // Calculate average audio level\n            const avgAudioLevel =\n              audioLevelHistory.reduce((a, b) => a + b, 0) /\n              audioLevelHistory.length;\n\n            // Update baseline (if necessary) based on silence detection\n            if (avgAudioLevel < baselineNoiseLevel * silenceThreshold) {\n              if (!silenceTimer) {\n                silenceTimer = setTimeout(() => {\n                  baselineNoiseLevel = Math.min(\n                    avgAudioLevel * resetThreshold,\n                    initialBaselineNoiseLevel,\n                  );\n                }, silenceTimeout);\n              }\n            } else {\n              clearTimeout(silenceTimer);\n              silenceTimer = undefined;\n            }\n\n            // Speech detection with hysteresis\n            if (avgAudioLevel > baselineNoiseLevel * 1.5) {\n              if (!speechDetected) {\n                speechDetected = true;\n                onSoundDetectedStateChanged({\n                  isSoundDetected: true,\n                  audioLevel,\n                });\n              }\n\n              clearTimeout(speechTimer);\n\n              speechTimer = setTimeout(() => {\n                speechDetected = false;\n                onSoundDetectedStateChanged({\n                  isSoundDetected: false,\n                  audioLevel: 0,\n                });\n              }, speechTimeout);\n            }\n          }\n        }\n      } catch (error) {\n        const logger = getLogger(['RNSpeechDetector']);\n        logger('error', 'error checking audio level from stats', error);\n      }\n    };\n\n    // Call checkAudioLevel periodically (every 100ms)\n    const intervalId = setInterval(checkAudioLevel, 100);\n\n    return () => {\n      clearInterval(intervalId);\n      clearTimeout(speechTimer);\n      clearTimeout(silenceTimer);\n    };\n  }\n\n  private cleanupAudioStream() {\n    if (!this.audioStream) {\n      return;\n    }\n    this.audioStream.getTracks().forEach((track) => track.stop());\n    if (\n      // @ts-expect-error release() is present in react-native-webrtc\n      typeof this.audioStream.release === 'function'\n    ) {\n      // @ts-expect-error called to dispose the stream in RN\n      this.audioStream.release();\n    }\n  }\n}\n","import { combineLatest, Observable } from 'rxjs';\nimport type { INoiseCancellation } from '@stream-io/audio-filters-web';\nimport { Call } from '../Call';\nimport { InputMediaDeviceManager } from './InputMediaDeviceManager';\nimport { MicrophoneManagerState } from './MicrophoneManagerState';\nimport { TrackDisableMode } from './InputMediaDeviceManagerState';\nimport { getAudioDevices, getAudioStream } from './devices';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { createSoundDetector } from '../helpers/sound-detector';\nimport { isReactNative } from '../helpers/platforms';\nimport {\n  AudioSettingsResponse,\n  NoiseCancellationSettingsModeEnum,\n  OwnCapability,\n} from '../gen/coordinator';\nimport { CallingState } from '../store';\nimport {\n  createSafeAsyncSubscription,\n  createSubscription,\n} from '../store/rxUtils';\nimport { RNSpeechDetector } from '../helpers/RNSpeechDetector';\nimport { withoutConcurrency } from '../helpers/concurrency';\n\nexport class MicrophoneManager extends InputMediaDeviceManager<MicrophoneManagerState> {\n  private speakingWhileMutedNotificationEnabled = true;\n  private soundDetectorConcurrencyTag = Symbol('soundDetectorConcurrencyTag');\n  private soundDetectorCleanup?: Function;\n  private rnSpeechDetector: RNSpeechDetector | undefined;\n  private noiseCancellation: INoiseCancellation | undefined;\n  private noiseCancellationChangeUnsubscribe: (() => void) | undefined;\n  private noiseCancellationRegistration?: Promise<void>;\n  private unregisterNoiseCancellation?: () => Promise<void>;\n\n  constructor(call: Call, disableMode: TrackDisableMode = 'stop-tracks') {\n    super(call, new MicrophoneManagerState(disableMode), TrackType.AUDIO);\n\n    this.subscriptions.push(\n      createSafeAsyncSubscription(\n        combineLatest([\n          this.call.state.callingState$,\n          this.call.state.ownCapabilities$,\n          this.state.selectedDevice$,\n          this.state.status$,\n        ]),\n        async ([callingState, ownCapabilities, deviceId, status]) => {\n          try {\n            if (callingState === CallingState.LEFT) {\n              await this.stopSpeakingWhileMutedDetection();\n            }\n            if (callingState !== CallingState.JOINED) return;\n            if (!this.speakingWhileMutedNotificationEnabled) return;\n\n            if (ownCapabilities.includes(OwnCapability.SEND_AUDIO)) {\n              if (status === 'disabled') {\n                await this.startSpeakingWhileMutedDetection(deviceId);\n              } else {\n                await this.stopSpeakingWhileMutedDetection();\n              }\n            } else {\n              await this.stopSpeakingWhileMutedDetection();\n            }\n          } catch (err) {\n            this.logger('warn', 'Could not enable speaking while muted', err);\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.push(\n      createSubscription(this.call.state.callingState$, (callingState) => {\n        // do nothing when noise filtering isn't turned on\n        if (!this.noiseCancellationRegistration || !this.noiseCancellation)\n          return;\n\n        const autoOn =\n          this.call.state.settings?.audio.noise_cancellation?.mode ===\n          NoiseCancellationSettingsModeEnum.AUTO_ON;\n\n        if (autoOn && callingState === CallingState.JOINED) {\n          this.noiseCancellationRegistration\n            .then(() => {\n              if (this.noiseCancellation?.canAutoEnable) {\n                return this.noiseCancellation.canAutoEnable();\n              }\n              return true;\n            })\n            .then((canAutoEnable) => {\n              if (canAutoEnable) {\n                this.noiseCancellation?.enable();\n              }\n            })\n            .catch((err) => {\n              this.logger('warn', `Failed to enable noise cancellation`, err);\n              return this.call.notifyNoiseCancellationStopped();\n            });\n        } else if (callingState === CallingState.LEFT) {\n          this.noiseCancellationRegistration\n            .then(() => this.noiseCancellation?.disable())\n            .catch((err) => {\n              this.logger('warn', `Failed to disable noise cancellation`, err);\n            });\n        }\n      }),\n    );\n  }\n\n  /**\n   * Enables noise cancellation for the microphone.\n   *\n   * @param noiseCancellation - a noise cancellation instance to use.\n   */\n  async enableNoiseCancellation(noiseCancellation: INoiseCancellation) {\n    const { ownCapabilities, settings } = this.call.state;\n    const hasNoiseCancellationCapability = ownCapabilities.includes(\n      OwnCapability.ENABLE_NOISE_CANCELLATION,\n    );\n    if (!hasNoiseCancellationCapability) {\n      throw new Error('Noise cancellation is not available.');\n    }\n    const noiseCancellationSettings = settings?.audio.noise_cancellation;\n    if (\n      !noiseCancellationSettings ||\n      noiseCancellationSettings.mode ===\n        NoiseCancellationSettingsModeEnum.DISABLED\n    ) {\n      throw new Error('Noise cancellation is disabled for this call type.');\n    }\n    try {\n      this.noiseCancellation = noiseCancellation;\n\n      // listen for change events and notify the SFU\n      this.noiseCancellationChangeUnsubscribe = this.noiseCancellation.on(\n        'change',\n        (enabled: boolean) => {\n          this.call.tracer.trace('noiseCancellation.enabled', enabled);\n          if (enabled) {\n            this.call.notifyNoiseCancellationStarting().catch((err) => {\n              this.logger('warn', `notifyNoiseCancellationStart failed`, err);\n            });\n          } else {\n            this.call.notifyNoiseCancellationStopped().catch((err) => {\n              this.logger('warn', `notifyNoiseCancellationStop failed`, err);\n            });\n          }\n        },\n      );\n\n      if (isReactNative()) {\n        // no filter registration in React Native, its done in the native code on app init\n        this.noiseCancellationRegistration = Promise.resolve();\n      } else {\n        const registrationResult = this.registerFilter(\n          noiseCancellation.toFilter(),\n        );\n        this.noiseCancellationRegistration = registrationResult.registered;\n        this.unregisterNoiseCancellation = registrationResult.unregister;\n        await this.noiseCancellationRegistration;\n      }\n\n      // handles an edge case where a noise cancellation is enabled after\n      // the participant as joined the call -> we immediately enable NC\n      if (\n        noiseCancellationSettings.mode ===\n          NoiseCancellationSettingsModeEnum.AUTO_ON &&\n        this.call.state.callingState === CallingState.JOINED\n      ) {\n        let canAutoEnable = true;\n        if (noiseCancellation.canAutoEnable) {\n          canAutoEnable = await noiseCancellation.canAutoEnable();\n        }\n        if (canAutoEnable) {\n          noiseCancellation.enable();\n        }\n      }\n    } catch (e) {\n      this.logger('warn', 'Failed to enable noise cancellation', e);\n      await this.disableNoiseCancellation().catch((err) => {\n        this.logger('warn', 'Failed to disable noise cancellation', err);\n      });\n    }\n  }\n\n  /**\n   * Disables noise cancellation for the microphone.\n   */\n  async disableNoiseCancellation() {\n    await (this.unregisterNoiseCancellation?.() ?? Promise.resolve())\n      .then(() => this.noiseCancellation?.disable())\n      .then(() => this.noiseCancellationChangeUnsubscribe?.())\n      .catch((err) => {\n        this.logger('warn', 'Failed to unregister noise cancellation', err);\n      });\n\n    await this.call.notifyNoiseCancellationStopped();\n  }\n\n  /**\n   * Enables speaking while muted notification.\n   */\n  async enableSpeakingWhileMutedNotification() {\n    this.speakingWhileMutedNotificationEnabled = true;\n    if (this.state.status === 'disabled') {\n      await this.startSpeakingWhileMutedDetection(this.state.selectedDevice);\n    }\n  }\n\n  /**\n   * Disables speaking while muted notification.\n   */\n  async disableSpeakingWhileMutedNotification() {\n    this.speakingWhileMutedNotificationEnabled = false;\n    await this.stopSpeakingWhileMutedDetection();\n  }\n\n  /**\n   * Applies the audio settings to the microphone.\n   * @param settings the audio settings to apply.\n   * @param publish whether to publish the stream after applying the settings.\n   */\n  async apply(settings: AudioSettingsResponse, publish: boolean) {\n    if (!publish) return;\n\n    const hasPublishedAudio = !!this.call.state.localParticipant?.audioStream;\n    const hasPermission = this.call.permissionsContext.hasPermission(\n      OwnCapability.SEND_AUDIO,\n    );\n    if (hasPublishedAudio || !hasPermission) return;\n\n    // Wait for any in progress mic operation\n    await this.statusChangeSettled();\n\n    // Publish media stream that was set before we joined\n    const { mediaStream } = this.state;\n    if (this.enabled && mediaStream) {\n      // The mic is already enabled (e.g. lobby screen). Publish the stream\n      await this.publishStream(mediaStream);\n    } else if (this.state.status === undefined && settings.mic_default_on) {\n      // Start mic if backend config specifies, and there is no local setting\n      await this.enable();\n    }\n  }\n\n  protected getDevices(): Observable<MediaDeviceInfo[]> {\n    return getAudioDevices();\n  }\n\n  protected getStream(\n    constraints: MediaTrackConstraints,\n  ): Promise<MediaStream> {\n    return getAudioStream(constraints, this.call.tracer);\n  }\n\n  private async startSpeakingWhileMutedDetection(deviceId?: string) {\n    await withoutConcurrency(this.soundDetectorConcurrencyTag, async () => {\n      await this.stopSpeakingWhileMutedDetection();\n      if (isReactNative()) {\n        this.rnSpeechDetector = new RNSpeechDetector();\n        const unsubscribe = await this.rnSpeechDetector.start((event) => {\n          this.state.setSpeakingWhileMuted(event.isSoundDetected);\n        });\n        this.soundDetectorCleanup = () => {\n          unsubscribe();\n          this.rnSpeechDetector = undefined;\n        };\n      } else {\n        // Need to start a new stream that's not connected to publisher\n        const stream = await this.getStream({\n          deviceId: { exact: deviceId },\n        });\n        this.soundDetectorCleanup = createSoundDetector(stream, (event) => {\n          this.state.setSpeakingWhileMuted(event.isSoundDetected);\n        });\n      }\n    });\n  }\n\n  private async stopSpeakingWhileMutedDetection() {\n    await withoutConcurrency(this.soundDetectorConcurrencyTag, async () => {\n      if (!this.soundDetectorCleanup) return;\n      const soundDetectorCleanup = this.soundDetectorCleanup;\n      this.soundDetectorCleanup = undefined;\n      this.state.setSpeakingWhileMuted(false);\n      await soundDetectorCleanup();\n    });\n  }\n}\n","import { BehaviorSubject, distinctUntilChanged } from 'rxjs';\nimport { InputMediaDeviceManagerState } from './InputMediaDeviceManagerState';\nimport { ScreenShareSettings } from '../types';\nimport { RxUtils } from '../store';\n\nexport class ScreenShareState extends InputMediaDeviceManagerState<DisplayMediaStreamOptions> {\n  private audioEnabledSubject = new BehaviorSubject<boolean>(true);\n  private settingsSubject = new BehaviorSubject<\n    ScreenShareSettings | undefined\n  >(undefined);\n\n  /**\n   * An Observable that emits the current screen share audio status.\n   */\n  audioEnabled$ = this.audioEnabledSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  /**\n   * An Observable that emits the current screen share settings.\n   */\n  settings$ = this.settingsSubject.asObservable();\n\n  /**\n   * @internal\n   */\n  protected getDeviceIdFromStream = (\n    stream: MediaStream,\n  ): string | undefined => {\n    const [track] = stream.getTracks();\n    return track?.getSettings().deviceId;\n  };\n\n  /**\n   * The current screen share audio status.\n   */\n  get audioEnabled() {\n    return RxUtils.getCurrentValue(this.audioEnabled$);\n  }\n\n  /**\n   * Set the current screen share audio status.\n   */\n  setAudioEnabled(isEnabled: boolean) {\n    RxUtils.setCurrentValue(this.audioEnabledSubject, isEnabled);\n  }\n\n  /**\n   * The current screen share settings.\n   */\n  get settings() {\n    return RxUtils.getCurrentValue(this.settings$);\n  }\n\n  /**\n   * Set the current screen share settings.\n   *\n   * @param settings the screen share settings to set.\n   */\n  setSettings(settings: ScreenShareSettings | undefined) {\n    RxUtils.setCurrentValue(this.settingsSubject, settings);\n  }\n}\n","import { Observable, of } from 'rxjs';\nimport { InputMediaDeviceManager } from './InputMediaDeviceManager';\nimport { ScreenShareState } from './ScreenShareState';\nimport { Call } from '../Call';\nimport { TrackType } from '../gen/video/sfu/models/models';\nimport { getScreenShareStream } from './devices';\nimport { ScreenShareSettings } from '../types';\nimport { createSubscription } from '../store/rxUtils';\n\nexport class ScreenShareManager extends InputMediaDeviceManager<\n  ScreenShareState,\n  DisplayMediaStreamOptions\n> {\n  constructor(call: Call) {\n    super(call, new ScreenShareState(), TrackType.SCREEN_SHARE);\n\n    this.subscriptions.push(\n      createSubscription(call.state.settings$, (settings) => {\n        const maybeTargetResolution = settings?.screensharing.target_resolution;\n\n        if (maybeTargetResolution) {\n          this.setDefaultConstraints({\n            video: {\n              width: maybeTargetResolution.width,\n              height: maybeTargetResolution.height,\n            },\n          });\n        }\n      }),\n    );\n  }\n\n  /**\n   * Will enable screen share audio options on supported platforms.\n   *\n   * Note: for ongoing screen share, audio won't be enabled until you\n   * re-publish the screen share stream.\n   */\n  enableScreenShareAudio(): void {\n    this.state.setAudioEnabled(true);\n  }\n\n  /**\n   * Will disable screen share audio options on supported platforms.\n   */\n  async disableScreenShareAudio(): Promise<void> {\n    this.state.setAudioEnabled(false);\n    if (this.call.publisher?.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n      await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO);\n    }\n  }\n\n  /**\n   * Returns the current screen share settings.\n   */\n  getSettings(): ScreenShareSettings | undefined {\n    return this.state.settings;\n  }\n\n  /**\n   * Sets the current screen share settings.\n   *\n   * @param settings the settings to set.\n   */\n  setSettings(settings: ScreenShareSettings | undefined): void {\n    this.state.setSettings(settings);\n  }\n\n  protected getDevices(): Observable<MediaDeviceInfo[]> {\n    return of([]); // there are no devices to be listed for Screen Share\n  }\n\n  protected getStream(\n    constraints: DisplayMediaStreamOptions,\n  ): Promise<MediaStream> {\n    if (!this.state.audioEnabled) {\n      constraints.audio = false;\n    }\n    return getScreenShareStream(constraints, this.call.tracer);\n  }\n\n  protected async stopPublishStream(): Promise<void> {\n    return this.call.stopPublish(\n      TrackType.SCREEN_SHARE,\n      TrackType.SCREEN_SHARE_AUDIO,\n    );\n  }\n\n  /**\n   * Overrides the default `select` method to throw an error.\n   */\n  async select(): Promise<void> {\n    throw new Error('Not supported');\n  }\n}\n","import { BehaviorSubject, distinctUntilChanged, Observable } from 'rxjs';\nimport { RxUtils } from '../store';\nimport { checkIfAudioOutputChangeSupported } from './devices';\nimport { Tracer } from '../stats';\n\nexport class SpeakerState {\n  protected selectedDeviceSubject = new BehaviorSubject<string>('');\n  protected volumeSubject = new BehaviorSubject<number>(1);\n  /**\n   * [Tells if the browser supports audio output change on 'audio' elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId).\n   */\n  readonly isDeviceSelectionSupported = checkIfAudioOutputChangeSupported();\n\n  /**\n   * An Observable that emits the currently selected device\n   *\n   * Note: this feature is not supported in React Native\n   */\n  selectedDevice$: Observable<string>;\n\n  /**\n   * An Observable that emits the currently selected volume\n   *\n   * Note: this feature is not supported in React Native\n   */\n  volume$: Observable<number>;\n\n  private tracer: Tracer;\n\n  constructor(tracer: Tracer) {\n    this.tracer = tracer;\n    this.selectedDevice$ = this.selectedDeviceSubject\n      .asObservable()\n      .pipe(distinctUntilChanged());\n    this.volume$ = this.volumeSubject\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  /**\n   * The currently selected device\n   *\n   * Note: this feature is not supported in React Native\n   */\n  get selectedDevice() {\n    return RxUtils.getCurrentValue(this.selectedDevice$);\n  }\n\n  /**\n   * The currently selected volume\n   *\n   * Note: this feature is not supported in React Native\n   */\n  get volume() {\n    return RxUtils.getCurrentValue(this.volume$);\n  }\n\n  /**\n   * @internal\n   * @param deviceId\n   */\n  setDevice(deviceId: string) {\n    RxUtils.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    this.tracer.trace('navigator.mediaDevices.setSinkId', deviceId);\n  }\n\n  /**\n   * @internal\n   * @param volume\n   */\n  setVolume(volume: number) {\n    RxUtils.setCurrentValue(this.volumeSubject, volume);\n  }\n}\n","import { combineLatest, Subscription } from 'rxjs';\nimport { Call } from '../Call';\nimport { isReactNative } from '../helpers/platforms';\nimport { SpeakerState } from './SpeakerState';\nimport { deviceIds$, getAudioOutputDevices } from './devices';\n\nexport class SpeakerManager {\n  readonly state: SpeakerState;\n  private subscriptions: Subscription[] = [];\n  private readonly call: Call;\n\n  constructor(call: Call) {\n    this.call = call;\n    this.state = new SpeakerState(call.tracer);\n    if (deviceIds$ && !isReactNative()) {\n      this.subscriptions.push(\n        combineLatest([deviceIds$!, this.state.selectedDevice$]).subscribe(\n          ([devices, deviceId]) => {\n            if (!deviceId) {\n              return;\n            }\n            const device = devices.find(\n              (d) => d.deviceId === deviceId && d.kind === 'audiooutput',\n            );\n            if (!device) {\n              this.select('');\n            }\n          },\n        ),\n      );\n    }\n  }\n\n  /**\n   * Lists the available audio output devices\n   *\n   * Note: It prompts the user for a permission to use devices (if not already granted)\n   * Note: This method is not supported in React Native\n   *\n   * @returns an Observable that will be updated if a device is connected or disconnected\n   */\n  listDevices() {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    return getAudioOutputDevices();\n  }\n\n  /**\n   * Select a device.\n   *\n   * Note: This method is not supported in React Native\n   *\n   * @param deviceId empty string means the system default\n   */\n  select(deviceId: string) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    this.state.setDevice(deviceId);\n  }\n\n  /**\n   * Disposes the manager.\n   *\n   * @internal\n   */\n  dispose = () => {\n    this.subscriptions.forEach((s) => s.unsubscribe());\n  };\n\n  /**\n   * Set the volume of the audio elements\n   * @param volume a number between 0 and 1.\n   *\n   * Note: This method is not supported in React Native\n   */\n  setVolume(volume: number) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    if (volume && (volume < 0 || volume > 1)) {\n      throw new Error('Volume must be between 0 and 1');\n    }\n    this.state.setVolume(volume);\n  }\n\n  /**\n   * Set the volume of a participant.\n   *\n   * Note: This method is not supported in React Native.\n   *\n   * @param sessionId the participant's session id.\n   * @param volume a number between 0 and 1. Set it to `undefined` to use the default volume.\n   */\n  setParticipantVolume(sessionId: string, volume: number | undefined) {\n    if (isReactNative()) {\n      throw new Error(\n        'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n      );\n    }\n    if (volume && (volume < 0 || volume > 1)) {\n      throw new Error('Volume must be between 0 and 1, or undefined');\n    }\n    this.call.state.updateParticipant(sessionId, { audioVolume: volume });\n  }\n}\n","import { StreamSfuClient } from './StreamSfuClient';\nimport {\n  Dispatcher,\n  getGenericSdp,\n  isAudioTrackType,\n  isSfuEvent,\n  muteTypeToTrackType,\n  Publisher,\n  Subscriber,\n  toRtcConfiguration,\n  trackTypeToParticipantStreamKey,\n} from './rtc';\nimport {\n  registerEventHandlers,\n  registerRingingCallEventHandlers,\n} from './events/callEventHandlers';\nimport {\n  CallingState,\n  CallState,\n  StreamVideoWriteableStateStore,\n} from './store';\nimport {\n  createSafeAsyncSubscription,\n  createSubscription,\n  getCurrentValue,\n} from './store/rxUtils';\nimport type {\n  AcceptCallResponse,\n  BlockUserRequest,\n  BlockUserResponse,\n  CallRingEvent,\n  CallSettingsResponse,\n  CollectUserFeedbackRequest,\n  CollectUserFeedbackResponse,\n  Credentials,\n  DeleteCallRequest,\n  DeleteCallResponse,\n  EndCallResponse,\n  GetCallReportResponse,\n  GetCallResponse,\n  GetOrCreateCallRequest,\n  GetOrCreateCallResponse,\n  GoLiveRequest,\n  GoLiveResponse,\n  JoinCallRequest,\n  JoinCallResponse,\n  ListRecordingsResponse,\n  ListTranscriptionsResponse,\n  MuteUsersRequest,\n  MuteUsersResponse,\n  PinRequest,\n  PinResponse,\n  QueryCallMembersRequest,\n  QueryCallMembersResponse,\n  RejectCallRequest,\n  RejectCallResponse,\n  RequestPermissionRequest,\n  RequestPermissionResponse,\n  SendCallEventRequest,\n  SendCallEventResponse,\n  SendReactionRequest,\n  SendReactionResponse,\n  StartClosedCaptionsRequest,\n  StartClosedCaptionsResponse,\n  StartFrameRecordingRequest,\n  StartFrameRecordingResponse,\n  StartHLSBroadcastingResponse,\n  StartRecordingRequest,\n  StartRecordingResponse,\n  StartRTMPBroadcastsRequest,\n  StartRTMPBroadcastsResponse,\n  StartTranscriptionRequest,\n  StartTranscriptionResponse,\n  StatsOptions,\n  StopAllRTMPBroadcastsResponse,\n  StopClosedCaptionsRequest,\n  StopClosedCaptionsResponse,\n  StopFrameRecordingResponse,\n  StopHLSBroadcastingResponse,\n  StopLiveRequest,\n  StopLiveResponse,\n  StopRecordingResponse,\n  StopRTMPBroadcastsResponse,\n  StopTranscriptionResponse,\n  UnblockUserRequest,\n  UnblockUserResponse,\n  UnpinRequest,\n  UnpinResponse,\n  UpdateCallMembersRequest,\n  UpdateCallMembersResponse,\n  UpdateCallRequest,\n  UpdateCallResponse,\n  UpdateUserPermissionsRequest,\n  UpdateUserPermissionsResponse,\n  VideoDimension,\n} from './gen/coordinator';\nimport { OwnCapability } from './gen/coordinator';\nimport {\n  AudioTrackType,\n  CallConstructor,\n  CallLeaveOptions,\n  ClientPublishOptions,\n  ClosedCaptionsSettings,\n  JoinCallData,\n  TrackMuteType,\n  VideoTrackType,\n} from './types';\nimport { BehaviorSubject, Subject, takeWhile } from 'rxjs';\nimport { ReconnectDetails } from './gen/video/sfu/event/events';\nimport {\n  ClientDetails,\n  Codec,\n  PublishOption,\n  SubscribeOption,\n  TrackType,\n  WebsocketReconnectStrategy,\n} from './gen/video/sfu/models/models';\nimport {\n  createStatsReporter,\n  getSdkSignature,\n  SfuStatsReporter,\n  StatsReporter,\n  Tracer,\n} from './stats';\nimport { DynascaleManager } from './helpers/DynascaleManager';\nimport { PermissionsContext } from './permissions';\nimport { CallTypes } from './CallType';\nimport { StreamClient } from './coordinator/connection/client';\nimport { retryInterval, sleep } from './coordinator/connection/utils';\nimport {\n  AllCallEvents,\n  CallEventListener,\n  ErrorFromResponse,\n  Logger,\n  RejectReason,\n  StreamCallEvent,\n} from './coordinator/connection/types';\nimport { getClientDetails } from './helpers/client-details';\nimport { getLogger } from './logger';\nimport {\n  CameraManager,\n  MicrophoneManager,\n  ScreenShareManager,\n  SpeakerManager,\n} from './devices';\nimport { hasPending, withoutConcurrency } from './helpers/concurrency';\nimport { ensureExhausted } from './helpers/ensureExhausted';\nimport { pushToIfMissing } from './helpers/array';\nimport {\n  makeSafePromise,\n  PromiseWithResolvers,\n  promiseWithResolvers,\n} from './helpers/promise';\nimport { GetCallStatsResponse } from './gen/shims';\n\n/**\n * An object representation of a `Call`.\n */\nexport class Call {\n  /**\n   * The type of the call.\n   */\n  readonly type: string;\n\n  /**\n   * The ID of the call.\n   */\n  readonly id: string;\n\n  /**\n   * The call CID.\n   */\n  readonly cid: string;\n\n  /**\n   * The state of this call.\n   */\n  readonly state = new CallState();\n\n  /**\n   * Flag indicating whether this call is \"watched\" and receives\n   * updates from the backend.\n   */\n  watching: boolean;\n\n  /**\n   * Device manager for the camera\n   */\n  readonly camera: CameraManager;\n\n  /**\n   * Device manager for the microphone.\n   */\n  readonly microphone: MicrophoneManager;\n\n  /**\n   * Device manager for the speaker.\n   */\n  readonly speaker: SpeakerManager;\n\n  /**\n   * Device manager for the screen.\n   */\n  readonly screenShare: ScreenShareManager;\n\n  /**\n   * The DynascaleManager instance.\n   */\n  readonly dynascaleManager: DynascaleManager;\n\n  subscriber?: Subscriber;\n  publisher?: Publisher;\n\n  /**\n   * Flag telling whether this call is a \"ringing\" call.\n   */\n  private readonly ringingSubject: Subject<boolean>;\n\n  /**\n   * The permissions context of this call.\n   */\n  readonly permissionsContext = new PermissionsContext();\n  readonly tracer = new Tracer(null);\n  readonly logger: Logger;\n\n  /**\n   * The event dispatcher instance dedicated to this Call instance.\n   * @private\n   */\n  private readonly dispatcher = new Dispatcher();\n\n  private clientPublishOptions?: ClientPublishOptions;\n  private currentPublishOptions?: PublishOption[];\n  private statsReporter?: StatsReporter;\n  private sfuStatsReporter?: SfuStatsReporter;\n  private dropTimeout: ReturnType<typeof setTimeout> | undefined;\n\n  private readonly clientStore: StreamVideoWriteableStateStore;\n  public readonly streamClient: StreamClient;\n  private sfuClient?: StreamSfuClient;\n  private sfuClientTag = 0;\n  private unifiedSessionId?: string;\n\n  private readonly reconnectConcurrencyTag = Symbol('reconnectConcurrencyTag');\n  private reconnectAttempts = 0;\n  private reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n  private reconnectReason = '';\n  private fastReconnectDeadlineSeconds: number = 0;\n  private disconnectionTimeoutSeconds: number = 0;\n  private lastOfflineTimestamp: number = 0;\n  private networkAvailableTask: PromiseWithResolvers<void> | undefined;\n  // maintain the order of publishing tracks to restore them after a reconnection\n  // it shouldn't contain duplicates\n  private trackPublishOrder: TrackType[] = [];\n  private joinCallData?: JoinCallData;\n  private hasJoinedOnce = false;\n  private deviceSettingsAppliedOnce = false;\n  private credentials?: Credentials;\n\n  private initialized = false;\n  private readonly joinLeaveConcurrencyTag = Symbol('joinLeaveConcurrencyTag');\n\n  /**\n   * A list hooks/functions to invoke when the call is left.\n   * A typical use case is to clean up some global event handlers.\n   * @private\n   */\n  private readonly leaveCallHooks: Set<Function> = new Set();\n\n  private readonly streamClientBasePath: string;\n  private streamClientEventHandlers = new Map<Function, () => void>();\n\n  /**\n   * Constructs a new `Call` instance.\n   *\n   * NOTE: Don't call the constructor directly, instead\n   * Use the [`StreamVideoClient.call`](./StreamVideoClient.md/#call)\n   * method to construct a `Call` instance.\n   */\n  constructor({\n    type,\n    id,\n    streamClient,\n    members,\n    ownCapabilities,\n    sortParticipantsBy,\n    clientStore,\n    ringing = false,\n    watching = false,\n  }: CallConstructor) {\n    this.type = type;\n    this.id = id;\n    this.cid = `${type}:${id}`;\n    this.ringingSubject = new BehaviorSubject(ringing);\n    this.watching = watching;\n    this.streamClient = streamClient;\n    this.clientStore = clientStore;\n    this.streamClientBasePath = `/call/${this.type}/${this.id}`;\n    this.logger = getLogger(['Call']);\n\n    const callTypeConfig = CallTypes.get(type);\n    const participantSorter =\n      sortParticipantsBy || callTypeConfig.options.sortParticipantsBy;\n    if (participantSorter) {\n      this.state.setSortParticipantsBy(participantSorter);\n    }\n\n    this.state.setMembers(members || []);\n    this.state.setOwnCapabilities(ownCapabilities || []);\n    this.state.setCallingState(\n      ringing ? CallingState.RINGING : CallingState.IDLE,\n    );\n\n    this.camera = new CameraManager(this);\n    this.microphone = new MicrophoneManager(this);\n    this.speaker = new SpeakerManager(this);\n    this.screenShare = new ScreenShareManager(this);\n    this.dynascaleManager = new DynascaleManager(this.state, this.speaker);\n  }\n\n  /**\n   * Sets up the call instance.\n   *\n   * @internal an internal method and should not be used outside the SDK.\n   */\n  setup = async () => {\n    await withoutConcurrency(this.joinLeaveConcurrencyTag, async () => {\n      if (this.initialized) return;\n\n      this.leaveCallHooks.add(\n        this.on('all', (event) => {\n          // update state with the latest event data\n          this.state.updateFromEvent(event);\n        }),\n      );\n\n      this.leaveCallHooks.add(\n        this.on('changePublishOptions', (event) => {\n          this.currentPublishOptions = event.publishOptions;\n        }),\n      );\n\n      this.leaveCallHooks.add(registerEventHandlers(this, this.dispatcher));\n      this.registerEffects();\n      this.registerReconnectHandlers();\n\n      if (this.state.callingState === CallingState.LEFT) {\n        this.state.setCallingState(CallingState.IDLE);\n      }\n\n      this.initialized = true;\n    });\n  };\n\n  private registerEffects = () => {\n    this.leaveCallHooks.add(\n      // handles updating the permissions context when the settings change.\n      createSubscription(this.state.settings$, (settings) => {\n        if (!settings) return;\n        this.permissionsContext.setCallSettings(settings);\n      }),\n    );\n\n    this.leaveCallHooks.add(\n      // handle the case when the user permissions are modified.\n      createSafeAsyncSubscription(\n        this.state.ownCapabilities$,\n        this.handleOwnCapabilitiesUpdated,\n      ),\n    );\n\n    this.leaveCallHooks.add(\n      // handles the case when the user is blocked by the call owner.\n      createSubscription(this.state.blockedUserIds$, async (blockedUserIds) => {\n        if (!blockedUserIds || blockedUserIds.length === 0) return;\n        const currentUserId = this.currentUserId;\n        if (currentUserId && blockedUserIds.includes(currentUserId)) {\n          this.logger('info', 'Leaving call because of being blocked');\n          await this.leave({ message: 'user blocked' }).catch((err) => {\n            this.logger('error', 'Error leaving call after being blocked', err);\n          });\n        }\n      }),\n    );\n\n    this.leaveCallHooks.add(\n      // cancel auto-drop when call is accepted or rejected\n      createSubscription(this.state.session$, (session) => {\n        if (!this.ringing) return;\n\n        const receiverId = this.clientStore.connectedUser?.id;\n        if (!receiverId) return;\n\n        const isAcceptedByMe = Boolean(session?.accepted_by[receiverId]);\n        const isRejectedByMe = Boolean(session?.rejected_by[receiverId]);\n\n        if (isAcceptedByMe || isRejectedByMe) {\n          this.cancelAutoDrop();\n        }\n\n        const isAcceptedElsewhere =\n          isAcceptedByMe && this.state.callingState === CallingState.RINGING;\n\n        if (\n          (isAcceptedElsewhere || isRejectedByMe) &&\n          !hasPending(this.joinLeaveConcurrencyTag)\n        ) {\n          this.leave().catch(() => {\n            this.logger(\n              'error',\n              'Could not leave a call that was accepted or rejected elsewhere',\n            );\n          });\n        }\n      }),\n    );\n\n    this.leaveCallHooks.add(\n      // \"ringing\" mode effects and event handlers\n      createSubscription(this.ringingSubject, (isRinging) => {\n        if (!isRinging) return;\n        const callSession = this.state.session;\n        const receiver_id = this.clientStore.connectedUser?.id;\n        const ended_at = callSession?.ended_at;\n        const created_by_id = this.state.createdBy?.id;\n        const rejected_by = callSession?.rejected_by;\n        const accepted_by = callSession?.accepted_by;\n        let leaveCallIdle = false;\n        if (ended_at) {\n          // call was ended before it was accepted or rejected so we should leave it to idle\n          leaveCallIdle = true;\n        } else if (created_by_id && rejected_by) {\n          if (rejected_by[created_by_id]) {\n            // call was cancelled by the caller\n            leaveCallIdle = true;\n          }\n        } else if (receiver_id && rejected_by) {\n          if (rejected_by[receiver_id]) {\n            // call was rejected by the receiver in some other device\n            leaveCallIdle = true;\n          }\n        } else if (receiver_id && accepted_by) {\n          if (accepted_by[receiver_id]) {\n            // call was accepted by the receiver in some other device\n            leaveCallIdle = true;\n          }\n        }\n        if (leaveCallIdle) {\n          if (this.state.callingState !== CallingState.IDLE) {\n            this.state.setCallingState(CallingState.IDLE);\n          }\n        } else {\n          if (this.state.callingState === CallingState.IDLE) {\n            this.state.setCallingState(CallingState.RINGING);\n          }\n          this.scheduleAutoDrop();\n          this.leaveCallHooks.add(registerRingingCallEventHandlers(this));\n        }\n      }),\n    );\n  };\n\n  private handleOwnCapabilitiesUpdated = async (\n    ownCapabilities: OwnCapability[],\n  ) => {\n    // update the permission context.\n    this.permissionsContext.setPermissions(ownCapabilities);\n\n    if (!this.publisher) return;\n\n    // check if the user still has publishing permissions and stop publishing if not.\n    const permissionToTrackType = {\n      [OwnCapability.SEND_AUDIO]: TrackType.AUDIO,\n      [OwnCapability.SEND_VIDEO]: TrackType.VIDEO,\n      [OwnCapability.SCREENSHARE]: TrackType.SCREEN_SHARE,\n    };\n    for (const [permission, trackType] of Object.entries(\n      permissionToTrackType,\n    )) {\n      const hasPermission = this.permissionsContext.hasPermission(\n        permission as OwnCapability,\n      );\n      if (hasPermission) continue;\n      try {\n        switch (trackType) {\n          case TrackType.AUDIO:\n            if (this.microphone.enabled) await this.microphone.disable();\n            break;\n          case TrackType.VIDEO:\n            if (this.camera.enabled) await this.camera.disable();\n            break;\n          case TrackType.SCREEN_SHARE:\n            if (this.screenShare.enabled) await this.screenShare.disable();\n            break;\n        }\n      } catch (err) {\n        this.logger(\n          'error',\n          `Can't disable mic/camera/screenshare after revoked permissions`,\n          err,\n        );\n      }\n    }\n  };\n\n  /**\n   * You can subscribe to WebSocket events provided by the API. To remove a subscription, call the `off` method.\n   * Please note that subscribing to WebSocket events is an advanced use-case.\n   * For most use-cases, it should be enough to watch for state changes.\n   *\n   * @param eventName the event name.\n   * @param fn the event handler.\n   */\n  on = <E extends keyof AllCallEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    if (isSfuEvent(eventName)) {\n      return this.dispatcher.on(eventName, fn);\n    }\n\n    const offHandler = this.streamClient.on(eventName, (e) => {\n      const event = e as StreamCallEvent;\n      if (event.call_cid && event.call_cid === this.cid) {\n        fn(event as AllCallEvents[E]);\n      }\n    });\n\n    // keep the 'off' reference returned by the stream client\n    this.streamClientEventHandlers.set(fn, offHandler);\n    return () => {\n      this.off(eventName, fn);\n    };\n  };\n\n  /**\n   * Remove subscription for WebSocket events that were created by the `on` method.\n   *\n   * @param eventName the event name.\n   * @param fn the event handler.\n   */\n  off = <E extends keyof AllCallEvents>(\n    eventName: E,\n    fn: CallEventListener<E>,\n  ) => {\n    if (isSfuEvent(eventName)) {\n      return this.dispatcher.off(eventName, fn);\n    }\n\n    // unsubscribe from the stream client event by using the 'off' reference\n    const registeredOffHandler = this.streamClientEventHandlers.get(fn);\n    if (registeredOffHandler) {\n      registeredOffHandler();\n    }\n  };\n\n  /**\n   * Leave the call and stop the media streams that were published by the call.\n   */\n  leave = async ({ reject, reason, message }: CallLeaveOptions = {}) => {\n    await withoutConcurrency(this.joinLeaveConcurrencyTag, async () => {\n      const callingState = this.state.callingState;\n      if (callingState === CallingState.LEFT) {\n        throw new Error('Cannot leave call that has already been left.');\n      }\n\n      if (callingState === CallingState.JOINING) {\n        const waitUntilCallJoined = () => {\n          return new Promise<void>((resolve) => {\n            this.state.callingState$\n              .pipe(takeWhile((state) => state !== CallingState.JOINED, true))\n              .subscribe(() => resolve());\n          });\n        };\n        await waitUntilCallJoined();\n      }\n\n      if (callingState === CallingState.RINGING && reject !== false) {\n        if (reject) {\n          await this.reject(reason ?? 'decline');\n        } else {\n          // if reject was undefined, we still have to cancel the call automatically\n          // when I am the creator and everyone else left the call\n          const hasOtherParticipants = this.state.remoteParticipants.length > 0;\n          if (this.isCreatedByMe && !hasOtherParticipants) {\n            await this.reject('cancel');\n          }\n        }\n      }\n\n      this.statsReporter?.stop();\n      this.statsReporter = undefined;\n\n      this.sfuStatsReporter?.flush();\n      this.sfuStatsReporter?.stop();\n      this.sfuStatsReporter = undefined;\n\n      this.subscriber?.dispose();\n      this.subscriber = undefined;\n\n      this.publisher?.dispose();\n      this.publisher = undefined;\n\n      await this.sfuClient?.leaveAndClose(\n        message ?? reason ?? 'user is leaving the call',\n      );\n      this.sfuClient = undefined;\n      this.dynascaleManager.setSfuClient(undefined);\n\n      this.state.setCallingState(CallingState.LEFT);\n      this.state.setParticipants([]);\n      this.state.dispose();\n\n      // Call all leave call hooks, e.g. to clean up global event handlers\n      this.leaveCallHooks.forEach((hook) => hook());\n      this.initialized = false;\n      this.hasJoinedOnce = false;\n      this.unifiedSessionId = undefined;\n      this.ringingSubject.next(false);\n      this.cancelAutoDrop();\n      this.clientStore.unregisterCall(this);\n\n      this.camera.dispose();\n      this.microphone.dispose();\n      this.screenShare.dispose();\n      this.speaker.dispose();\n\n      const stopOnLeavePromises: Promise<void>[] = [];\n      if (this.camera.stopOnLeave) {\n        stopOnLeavePromises.push(this.camera.disable(true));\n      }\n      if (this.microphone.stopOnLeave) {\n        stopOnLeavePromises.push(this.microphone.disable(true));\n      }\n      if (this.screenShare.stopOnLeave) {\n        stopOnLeavePromises.push(this.screenShare.disable(true));\n      }\n      await Promise.all(stopOnLeavePromises);\n    });\n  };\n\n  /**\n   * A flag indicating whether the call is \"ringing\" type of call.\n   */\n  get ringing() {\n    return getCurrentValue(this.ringingSubject);\n  }\n\n  /**\n   * Retrieves the current user ID.\n   */\n  get currentUserId() {\n    return this.clientStore.connectedUser?.id;\n  }\n\n  /**\n   * A flag indicating whether the call was created by the current user.\n   */\n  get isCreatedByMe() {\n    return this.state.createdBy?.id === this.currentUserId;\n  }\n\n  /**\n   * Update from the call response from the \"call.ring\" event\n   * @internal\n   */\n  updateFromRingingEvent = async (event: CallRingEvent) => {\n    await this.setup();\n    // call.ring event excludes the call creator in the members list\n    // as the creator does not get the ring event\n    // so update the member list accordingly\n    const { created_by, settings } = event.call;\n    const creator = this.state.members.find((m) => m.user.id === created_by.id);\n    if (!creator) {\n      this.state.setMembers(event.members);\n    } else {\n      this.state.setMembers([creator, ...event.members]);\n    }\n    // update the call state with the latest event data\n    this.state.updateFromCallResponse(event.call);\n    this.watching = true;\n    this.ringingSubject.next(true);\n    // we remove the instance from the calls list to enable the following filter in useCalls hook\n    // const calls = useCalls().filter((c) => c.ringing);\n    const calls = this.clientStore.calls.filter((c) => c.cid !== this.cid);\n    this.clientStore.setCalls([this, ...calls]);\n    await this.applyDeviceConfig(settings, false);\n  };\n\n  /**\n   * Loads the information about the call.\n   *\n   * @param params.ring if set to true, a `call.ring` event will be sent to the call members.\n   * @param params.notify if set to true, a `call.notification` event will be sent to the call members.\n   * @param params.members_limit the total number of members to return as part of the response.\n   */\n  get = async (params?: {\n    ring?: boolean;\n    notify?: boolean;\n    members_limit?: number;\n  }) => {\n    await this.setup();\n    const response = await this.streamClient.get<GetCallResponse>(\n      this.streamClientBasePath,\n      params,\n    );\n\n    this.state.updateFromCallResponse(response.call);\n    this.state.setMembers(response.members);\n    this.state.setOwnCapabilities(response.own_capabilities);\n\n    if (params?.ring) {\n      // the call response can indicate where the call is still ringing or not\n      this.ringingSubject.next(true);\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    await this.applyDeviceConfig(response.call.settings, false);\n\n    return response;\n  };\n\n  /**\n   * Loads the information about the call and creates it if it doesn't exist.\n   *\n   * @param data the data to create the call with.\n   */\n  getOrCreate = async (data?: GetOrCreateCallRequest) => {\n    await this.setup();\n    const response = await this.streamClient.post<\n      GetOrCreateCallResponse,\n      GetOrCreateCallRequest\n    >(this.streamClientBasePath, data);\n\n    this.state.updateFromCallResponse(response.call);\n    this.state.setMembers(response.members);\n    this.state.setOwnCapabilities(response.own_capabilities);\n\n    if (data?.ring) {\n      // the call response can indicate where the call is still ringing or not\n      this.ringingSubject.next(true);\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    await this.applyDeviceConfig(response.call.settings, false);\n\n    return response;\n  };\n\n  /**\n   * Creates a call\n   *\n   * @param data the data to create the call with.\n   */\n  create = async (data?: GetOrCreateCallRequest) => {\n    return this.getOrCreate(data);\n  };\n\n  /**\n   * Deletes the call.\n   */\n  delete = async (\n    data: DeleteCallRequest = {},\n  ): Promise<DeleteCallResponse> => {\n    return this.streamClient.post<DeleteCallResponse, DeleteCallRequest>(\n      `${this.streamClientBasePath}/delete`,\n      data,\n    );\n  };\n\n  /**\n   * A shortcut for {@link Call.get} with `ring` parameter set to `true`.\n   * Will send a `call.ring` event to the call members.\n   */\n  ring = async (): Promise<GetCallResponse> => {\n    return await this.get({ ring: true });\n  };\n\n  /**\n   * A shortcut for {@link Call.get} with `notify` parameter set to `true`.\n   * Will send a `call.notification` event to the call members.\n   */\n  notify = async (): Promise<GetCallResponse> => {\n    return await this.get({ notify: true });\n  };\n\n  /**\n   * Marks the incoming call as accepted.\n   *\n   * This method should be used only for \"ringing\" call flows.\n   * {@link Call.join} invokes this method automatically for you when joining a call.\n   * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n   */\n  accept = async () => {\n    return this.streamClient.post<AcceptCallResponse>(\n      `${this.streamClientBasePath}/accept`,\n    );\n  };\n\n  /**\n   * Marks the incoming call as rejected.\n   *\n   * This method should be used only for \"ringing\" call flows.\n   * {@link Call.leave} invokes this method automatically for you when you leave or reject this call.\n   * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n   *\n   * @param reason the reason for rejecting the call.\n   */\n  reject = async (\n    reason: RejectReason = 'decline',\n  ): Promise<RejectCallResponse> => {\n    return this.streamClient.post<RejectCallResponse, RejectCallRequest>(\n      `${this.streamClientBasePath}/reject`,\n      { reason: reason },\n    );\n  };\n\n  /**\n   * Will start to watch for call related WebSocket events and initiate a call session with the server.\n   *\n   * @returns a promise which resolves once the call join-flow has finished.\n   */\n  join = async ({\n    maxJoinRetries = 3,\n    ...data\n  }: JoinCallData & {\n    maxJoinRetries?: number;\n  } = {}): Promise<void> => {\n    await this.setup();\n    const callingState = this.state.callingState;\n\n    if ([CallingState.JOINED, CallingState.JOINING].includes(callingState)) {\n      throw new Error(`Illegal State: call.join() shall be called only once`);\n    }\n\n    this.state.setCallingState(CallingState.JOINING);\n\n    maxJoinRetries = Math.max(maxJoinRetries, 1);\n    for (let attempt = 0; attempt < maxJoinRetries; attempt++) {\n      try {\n        this.logger('trace', `Joining call (${attempt})`, this.cid);\n        return await this.doJoin(data);\n      } catch (err) {\n        this.logger('warn', `Failed to join call (${attempt})`, this.cid);\n        if (attempt === maxJoinRetries - 1) {\n          // restore the previous call state if the join-flow fails\n          this.state.setCallingState(callingState);\n          throw err;\n        }\n      }\n\n      await sleep(retryInterval(attempt));\n    }\n  };\n\n  /**\n   * Will make a single attempt to watch for call related WebSocket events\n   * and initiate a call session with the server.\n   *\n   * @returns a promise which resolves once the call join-flow has finished.\n   */\n  doJoin = async (data?: JoinCallData): Promise<void> => {\n    const connectStartTime = Date.now();\n    const callingState = this.state.callingState;\n\n    this.joinCallData = data;\n\n    this.logger('debug', 'Starting join flow');\n    this.state.setCallingState(CallingState.JOINING);\n\n    const performingMigration =\n      this.reconnectStrategy === WebsocketReconnectStrategy.MIGRATE;\n    const performingRejoin =\n      this.reconnectStrategy === WebsocketReconnectStrategy.REJOIN;\n    const performingFastReconnect =\n      this.reconnectStrategy === WebsocketReconnectStrategy.FAST;\n\n    let statsOptions = this.sfuStatsReporter?.options;\n    if (\n      !this.credentials ||\n      !statsOptions ||\n      performingRejoin ||\n      performingMigration\n    ) {\n      try {\n        const joinResponse = await this.doJoinRequest(data);\n        this.credentials = joinResponse.credentials;\n        statsOptions = joinResponse.stats_options;\n      } catch (error) {\n        // prevent triggering reconnect flow if the state is OFFLINE\n        const avoidRestoreState =\n          this.state.callingState === CallingState.OFFLINE;\n\n        if (!avoidRestoreState) {\n          // restore the previous call state if the join-flow fails\n          this.state.setCallingState(callingState);\n        }\n        throw error;\n      }\n    }\n\n    const previousSfuClient = this.sfuClient;\n    const previousSessionId = previousSfuClient?.sessionId;\n    const isWsHealthy = !!previousSfuClient?.isHealthy;\n    const sfuClient =\n      performingRejoin || performingMigration || !isWsHealthy\n        ? new StreamSfuClient({\n            logTag: String(++this.sfuClientTag),\n            dispatcher: this.dispatcher,\n            credentials: this.credentials,\n            streamClient: this.streamClient,\n            enableTracing: statsOptions.enable_rtc_stats,\n            // a new session_id is necessary for the REJOIN strategy.\n            // we use the previous session_id if available\n            sessionId: performingRejoin ? undefined : previousSessionId,\n            onSignalClose: (reason) =>\n              this.handleSfuSignalClose(sfuClient, reason),\n          })\n        : previousSfuClient;\n    this.sfuClient = sfuClient;\n    this.dynascaleManager.setSfuClient(sfuClient);\n\n    const clientDetails = await getClientDetails();\n    // we don't need to send JoinRequest if we are re-using an existing healthy SFU client\n    if (previousSfuClient !== sfuClient) {\n      // prepare a generic SDP and send it to the SFU.\n      // these are throw-away SDPs that the SFU will use to determine\n      // the capabilities of the client (codec support, etc.)\n      const [subscriberSdp, publisherSdp] = await Promise.all([\n        getGenericSdp('recvonly'),\n        getGenericSdp('sendonly'),\n      ]);\n      const isReconnecting =\n        this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED;\n      const reconnectDetails = isReconnecting\n        ? this.getReconnectDetails(data?.migrating_from, previousSessionId)\n        : undefined;\n      const preferredPublishOptions = !isReconnecting\n        ? this.getPreferredPublishOptions()\n        : this.currentPublishOptions || [];\n      const preferredSubscribeOptions = !isReconnecting\n        ? this.getPreferredSubscribeOptions()\n        : [];\n\n      try {\n        const { callState, fastReconnectDeadlineSeconds, publishOptions } =\n          await sfuClient.join({\n            subscriberSdp,\n            publisherSdp,\n            clientDetails,\n            fastReconnect: performingFastReconnect,\n            reconnectDetails,\n            preferredPublishOptions,\n            preferredSubscribeOptions,\n          });\n\n        this.currentPublishOptions = publishOptions;\n        this.fastReconnectDeadlineSeconds = fastReconnectDeadlineSeconds;\n        if (callState) {\n          this.state.updateFromSfuCallState(\n            callState,\n            sfuClient.sessionId,\n            reconnectDetails,\n          );\n        }\n      } catch (error) {\n        this.logger('warn', 'Join SFU request failed', error);\n        sfuClient.close(\n          StreamSfuClient.ERROR_CONNECTION_UNHEALTHY,\n          'Join request failed, connection considered unhealthy',\n        );\n        // restore the previous call state if the join-flow fails\n        this.state.setCallingState(callingState);\n        throw error;\n      }\n    }\n\n    if (!performingMigration) {\n      // in MIGRATION, `JOINED` state is set in `this.reconnectMigrate()`\n      this.state.setCallingState(CallingState.JOINED);\n    }\n    this.hasJoinedOnce = true;\n\n    // when performing fast reconnect, or when we reuse the same SFU client,\n    // (ws remained healthy), we just need to restore the ICE connection\n    if (performingFastReconnect) {\n      // the SFU automatically issues an ICE restart on the subscriber\n      // we don't have to do it ourselves\n      await this.restoreICE(sfuClient, { includeSubscriber: false });\n    } else {\n      const connectionConfig = toRtcConfiguration(this.credentials.ice_servers);\n      this.initPublisherAndSubscriber({\n        sfuClient,\n        connectionConfig,\n        clientDetails,\n        statsOptions,\n        publishOptions: this.currentPublishOptions || [],\n        closePreviousInstances: !performingMigration,\n      });\n    }\n\n    // make sure we only track connection timing if we are not calling this method as part of a reconnection flow\n    if (!performingRejoin && !performingFastReconnect && !performingMigration) {\n      this.sfuStatsReporter?.sendConnectionTime(\n        (Date.now() - connectStartTime) / 1000,\n      );\n    }\n\n    if (performingRejoin && isWsHealthy) {\n      const strategy = WebsocketReconnectStrategy[this.reconnectStrategy];\n      await previousSfuClient?.leaveAndClose(\n        `Closing previous WS after reconnect with strategy: ${strategy}`,\n      );\n    } else if (!isWsHealthy) {\n      previousSfuClient?.close(\n        StreamSfuClient.DISPOSE_OLD_SOCKET,\n        'Closing unhealthy WS after reconnect',\n      );\n    }\n\n    // device settings should be applied only once, we don't have to\n    // re-apply them on later reconnections or server-side data fetches\n    if (!this.deviceSettingsAppliedOnce && this.state.settings) {\n      await this.applyDeviceConfig(this.state.settings, true);\n      this.deviceSettingsAppliedOnce = true;\n    }\n\n    // We shouldn't persist the `ring` and `notify` state after joining the call\n    // as it's a one-time event and clashes with the potential reconnection attempts.\n    // When reconnecting, if provided with `ring: true` or `notify: true`,\n    // we will spam the other participants with push notifications and `call.ring` events.\n    delete this.joinCallData?.ring;\n    delete this.joinCallData?.notify;\n    // reset the reconnect strategy to unspecified after a successful reconnection\n    this.reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n    this.reconnectReason = '';\n\n    this.logger('info', `Joined call ${this.cid}`);\n  };\n\n  /**\n   * Prepares Reconnect Details object.\n   * @internal\n   */\n  private getReconnectDetails = (\n    migratingFromSfuId: string | undefined,\n    previousSessionId: string | undefined,\n  ): ReconnectDetails => {\n    const strategy = this.reconnectStrategy;\n    const performingRejoin = strategy === WebsocketReconnectStrategy.REJOIN;\n    const announcedTracks =\n      this.publisher?.getAnnouncedTracksForReconnect() || [];\n    return {\n      strategy,\n      announcedTracks,\n      subscriptions: this.dynascaleManager.trackSubscriptions,\n      reconnectAttempt: this.reconnectAttempts,\n      fromSfuId: migratingFromSfuId || '',\n      previousSessionId: performingRejoin ? previousSessionId || '' : '',\n      reason: this.reconnectReason,\n    };\n  };\n\n  /**\n   * Prepares the preferred codec for the call.\n   * This is an experimental client feature and subject to change.\n   * @internal\n   */\n  private getPreferredPublishOptions = (): PublishOption[] => {\n    const { preferredCodec, fmtpLine, preferredBitrate, maxSimulcastLayers } =\n      this.clientPublishOptions || {};\n    if (!preferredCodec && !preferredBitrate && !maxSimulcastLayers) return [];\n\n    const codec = preferredCodec\n      ? Codec.create({ name: preferredCodec.split('/').pop(), fmtp: fmtpLine })\n      : undefined;\n\n    const preferredPublishOptions = [\n      PublishOption.create({\n        trackType: TrackType.VIDEO,\n        codec,\n        bitrate: preferredBitrate,\n        maxSpatialLayers: maxSimulcastLayers,\n      }),\n    ];\n\n    const screenShareSettings = this.screenShare.getSettings();\n    if (screenShareSettings) {\n      preferredPublishOptions.push(\n        PublishOption.create({\n          trackType: TrackType.SCREEN_SHARE,\n          fps: screenShareSettings.maxFramerate,\n          bitrate: screenShareSettings.maxBitrate,\n        }),\n      );\n    }\n\n    return preferredPublishOptions;\n  };\n\n  /**\n   * Prepares the preferred options for subscribing to tracks.\n   * This is an experimental client feature and subject to change.\n   * @internal\n   */\n  private getPreferredSubscribeOptions = (): SubscribeOption[] => {\n    const { subscriberCodec, subscriberFmtpLine } =\n      this.clientPublishOptions || {};\n    if (!subscriberCodec || !subscriberFmtpLine) return [];\n    return [\n      SubscribeOption.create({\n        trackType: TrackType.VIDEO,\n        codecs: [\n          { name: subscriberCodec.split('/').pop(), fmtp: subscriberFmtpLine },\n        ],\n      }),\n    ];\n  };\n\n  /**\n   * Performs an ICE restart on both the Publisher and Subscriber Peer Connections.\n   * Uses the provided SFU client to restore the ICE connection.\n   *\n   * This method can throw an error if the ICE restart fails.\n   * This error should be handled by the reconnect loop,\n   * and a new reconnection shall be attempted.\n   *\n   * @internal\n   */\n  private restoreICE = async (\n    nextSfuClient: StreamSfuClient,\n    opts: { includeSubscriber?: boolean; includePublisher?: boolean } = {},\n  ) => {\n    const { includeSubscriber = true, includePublisher = true } = opts;\n    if (this.subscriber) {\n      this.subscriber.setSfuClient(nextSfuClient);\n      if (includeSubscriber) {\n        await this.subscriber.restartIce();\n      }\n    }\n    if (this.publisher) {\n      this.publisher.setSfuClient(nextSfuClient);\n      if (includePublisher) {\n        await this.publisher.restartIce();\n      }\n    }\n  };\n\n  /**\n   * Initializes the Publisher and Subscriber Peer Connections.\n   * @internal\n   */\n  private initPublisherAndSubscriber = (opts: {\n    sfuClient: StreamSfuClient;\n    connectionConfig: RTCConfiguration;\n    statsOptions: StatsOptions;\n    clientDetails: ClientDetails;\n    publishOptions: PublishOption[];\n    closePreviousInstances: boolean;\n  }) => {\n    const {\n      sfuClient,\n      connectionConfig,\n      clientDetails,\n      statsOptions,\n      publishOptions,\n      closePreviousInstances,\n    } = opts;\n    const { enable_rtc_stats: enableTracing } = statsOptions;\n    if (closePreviousInstances && this.subscriber) {\n      this.subscriber.dispose();\n    }\n    this.subscriber = new Subscriber({\n      sfuClient,\n      dispatcher: this.dispatcher,\n      state: this.state,\n      connectionConfig,\n      logTag: String(this.sfuClientTag),\n      enableTracing,\n      onUnrecoverableError: (reason) => {\n        this.reconnect(WebsocketReconnectStrategy.REJOIN, reason).catch(\n          (err) => {\n            this.logger(\n              'warn',\n              `[Reconnect] Error reconnecting after a subscriber error: ${reason}`,\n              err,\n            );\n          },\n        );\n      },\n    });\n\n    // anonymous users can't publish anything hence, there is no need\n    // to create Publisher Peer Connection for them\n    const isAnonymous = this.streamClient.user?.type === 'anonymous';\n    if (!isAnonymous) {\n      if (closePreviousInstances && this.publisher) {\n        this.publisher.dispose();\n      }\n      this.publisher = new Publisher({\n        sfuClient,\n        dispatcher: this.dispatcher,\n        state: this.state,\n        connectionConfig,\n        publishOptions,\n        logTag: String(this.sfuClientTag),\n        enableTracing,\n        onUnrecoverableError: (reason) => {\n          this.reconnect(WebsocketReconnectStrategy.REJOIN, reason).catch(\n            (err) => {\n              this.logger(\n                'warn',\n                `[Reconnect] Error reconnecting after a publisher error: ${reason}`,\n                err,\n              );\n            },\n          );\n        },\n      });\n    }\n\n    this.statsReporter?.stop();\n    this.statsReporter = createStatsReporter({\n      subscriber: this.subscriber,\n      publisher: this.publisher,\n      state: this.state,\n      datacenter: sfuClient.edgeName,\n    });\n\n    this.tracer.setEnabled(enableTracing);\n    this.sfuStatsReporter?.stop();\n    if (statsOptions?.reporting_interval_ms > 0) {\n      this.unifiedSessionId ??= sfuClient.sessionId;\n      this.sfuStatsReporter = new SfuStatsReporter(sfuClient, {\n        clientDetails,\n        options: statsOptions,\n        subscriber: this.subscriber,\n        publisher: this.publisher,\n        microphone: this.microphone,\n        camera: this.camera,\n        state: this.state,\n        tracer: this.tracer,\n        unifiedSessionId: this.unifiedSessionId,\n      });\n      this.sfuStatsReporter.start();\n    }\n  };\n\n  /**\n   * Retrieves credentials for joining the call.\n   *\n   * @internal\n   *\n   * @param data the join call data.\n   */\n  doJoinRequest = async (data?: JoinCallData): Promise<JoinCallResponse> => {\n    const location = await this.streamClient.getLocationHint();\n    const request: JoinCallRequest = { ...data, location };\n    const joinResponse = await this.streamClient.post<\n      JoinCallResponse,\n      JoinCallRequest\n    >(`${this.streamClientBasePath}/join`, request);\n    this.state.updateFromCallResponse(joinResponse.call);\n    this.state.setMembers(joinResponse.members);\n    this.state.setOwnCapabilities(joinResponse.own_capabilities);\n\n    if (data?.ring) {\n      this.ringingSubject.next(true);\n    }\n\n    const isReconnecting =\n      this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED;\n\n    if (!isReconnecting && this.ringing && !this.isCreatedByMe) {\n      // signals other users that I have accepted the incoming call.\n      await this.accept();\n    }\n\n    if (this.streamClient._hasConnectionID()) {\n      this.watching = true;\n      this.clientStore.registerCall(this);\n    }\n\n    return joinResponse;\n  };\n\n  /**\n   * Handles the closing of the SFU signal connection.\n   *\n   * @internal\n   * @param sfuClient the SFU client instance that was closed.\n   * @param reason the reason for the closure.\n   */\n  private handleSfuSignalClose = (\n    sfuClient: StreamSfuClient,\n    reason: string,\n  ) => {\n    this.logger('debug', '[Reconnect] SFU signal connection closed');\n    const { callingState } = this.state;\n    if (\n      // SFU WS closed before we finished current join,\n      // no need to schedule reconnecting\n      callingState === CallingState.JOINING ||\n      // we are already in the process of reconnecting,\n      // no need to schedule another one\n      callingState === CallingState.RECONNECTING ||\n      // SFU WS closed as a result of unsuccessful join,\n      // and no further retries need to be made\n      callingState === CallingState.IDLE ||\n      callingState === CallingState.LEFT\n    )\n      return;\n    // normal close, no need to reconnect\n    if (sfuClient.isLeaving || sfuClient.isClosing) return;\n    this.reconnect(WebsocketReconnectStrategy.REJOIN, reason).catch((err) => {\n      this.logger('warn', '[Reconnect] Error reconnecting', err);\n    });\n  };\n\n  /**\n   * Handles the reconnection flow.\n   *\n   * @internal\n   *\n   * @param strategy the reconnection strategy to use.\n   * @param reason the reason for the reconnection.\n   */\n  private reconnect = async (\n    strategy: WebsocketReconnectStrategy,\n    reason: string,\n  ): Promise<void> => {\n    if (\n      this.state.callingState === CallingState.RECONNECTING ||\n      this.state.callingState === CallingState.MIGRATING ||\n      this.state.callingState === CallingState.RECONNECTING_FAILED\n    )\n      return;\n\n    return withoutConcurrency(this.reconnectConcurrencyTag, async () => {\n      const reconnectStartTime = Date.now();\n      this.reconnectStrategy = strategy;\n      this.reconnectReason = reason;\n\n      do {\n        if (\n          this.disconnectionTimeoutSeconds > 0 &&\n          (Date.now() - reconnectStartTime) / 1000 >\n            this.disconnectionTimeoutSeconds\n        ) {\n          this.logger(\n            'warn',\n            '[Reconnect] Stopping reconnection attempts after reaching disconnection timeout',\n          );\n          this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n          return;\n        }\n\n        // we don't increment reconnect attempts for the FAST strategy.\n        if (this.reconnectStrategy !== WebsocketReconnectStrategy.FAST) {\n          this.reconnectAttempts++;\n        }\n        const current = WebsocketReconnectStrategy[this.reconnectStrategy];\n        try {\n          // wait until the network is available\n          await this.networkAvailableTask?.promise;\n\n          this.logger(\n            'info',\n            `[Reconnect] Reconnecting with strategy ${WebsocketReconnectStrategy[this.reconnectStrategy]}`,\n          );\n\n          switch (this.reconnectStrategy) {\n            case WebsocketReconnectStrategy.UNSPECIFIED:\n            case WebsocketReconnectStrategy.DISCONNECT:\n              this.logger('debug', `[Reconnect] No-op strategy ${current}`);\n              break;\n            case WebsocketReconnectStrategy.FAST:\n              await this.reconnectFast();\n              break;\n            case WebsocketReconnectStrategy.REJOIN:\n              await this.reconnectRejoin();\n              break;\n            case WebsocketReconnectStrategy.MIGRATE:\n              await this.reconnectMigrate();\n              break;\n            default:\n              ensureExhausted(\n                this.reconnectStrategy,\n                'Unknown reconnection strategy',\n              );\n              break;\n          }\n          break; // do-while loop, reconnection worked, exit the loop\n        } catch (error) {\n          if (this.state.callingState === CallingState.OFFLINE) {\n            this.logger(\n              'trace',\n              `[Reconnect] Can't reconnect while offline, stopping reconnection attempts`,\n            );\n            break;\n            // we don't need to handle the error if the call is offline\n            // network change event will trigger the reconnection\n          }\n          if (error instanceof ErrorFromResponse && error.unrecoverable) {\n            this.logger(\n              'warn',\n              `[Reconnect] Can't reconnect due to coordinator unrecoverable error`,\n              error,\n            );\n            this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n            return;\n          }\n          this.logger(\n            'warn',\n            `[Reconnect] ${current} (${this.reconnectAttempts}) failed. Attempting with REJOIN`,\n            error,\n          );\n          await sleep(500);\n          this.reconnectStrategy = WebsocketReconnectStrategy.REJOIN;\n        }\n      } while (\n        this.state.callingState !== CallingState.JOINED &&\n        this.state.callingState !== CallingState.RECONNECTING_FAILED &&\n        this.state.callingState !== CallingState.LEFT\n      );\n      this.logger('info', '[Reconnect] Reconnection flow finished');\n    });\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"fast\" strategy.\n   * @internal\n   */\n  private reconnectFast = async () => {\n    const reconnectStartTime = Date.now();\n    this.reconnectStrategy = WebsocketReconnectStrategy.FAST;\n    this.state.setCallingState(CallingState.RECONNECTING);\n    await this.doJoin(this.joinCallData);\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.FAST,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"rejoin\" strategy.\n   * @internal\n   */\n  private reconnectRejoin = async () => {\n    const reconnectStartTime = Date.now();\n    this.reconnectStrategy = WebsocketReconnectStrategy.REJOIN;\n    this.state.setCallingState(CallingState.RECONNECTING);\n    await this.doJoin(this.joinCallData);\n    await this.restorePublishedTracks();\n    this.restoreSubscribedTracks();\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.REJOIN,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Initiates the reconnection flow with the \"migrate\" strategy.\n   * @internal\n   */\n  private reconnectMigrate = async () => {\n    const reconnectStartTime = Date.now();\n    const currentSfuClient = this.sfuClient;\n    if (!currentSfuClient) {\n      throw new Error('Cannot migrate without an active SFU client');\n    }\n\n    this.reconnectStrategy = WebsocketReconnectStrategy.MIGRATE;\n    this.state.setCallingState(CallingState.MIGRATING);\n    const currentSubscriber = this.subscriber;\n    const currentPublisher = this.publisher;\n\n    currentSubscriber?.detachEventHandlers();\n    currentPublisher?.detachEventHandlers();\n\n    const migrationTask = makeSafePromise(currentSfuClient.enterMigration());\n\n    try {\n      const currentSfu = currentSfuClient.edgeName;\n      await this.doJoin({ ...this.joinCallData, migrating_from: currentSfu });\n    } finally {\n      // cleanup the migration_from field after the migration is complete or failed\n      // as we don't want to keep dirty data in the join call data\n      delete this.joinCallData?.migrating_from;\n    }\n\n    await this.restorePublishedTracks();\n    this.restoreSubscribedTracks();\n\n    try {\n      // Wait for the migration to complete, then close the previous SFU client\n      // and the peer connection instances. In case of failure, the migration\n      // task would throw an error and REJOIN would be attempted.\n      await migrationTask();\n\n      // in MIGRATE, we can consider the call as joined only after\n      // `participantMigrationComplete` event is received, signaled by\n      // the `migrationTask`\n      this.state.setCallingState(CallingState.JOINED);\n    } finally {\n      currentSubscriber?.dispose();\n      currentPublisher?.dispose();\n\n      // and close the previous SFU client, without specifying close code\n      currentSfuClient.close(StreamSfuClient.NORMAL_CLOSURE, 'Migrating away');\n    }\n    this.sfuStatsReporter?.sendReconnectionTime(\n      WebsocketReconnectStrategy.MIGRATE,\n      (Date.now() - reconnectStartTime) / 1000,\n    );\n  };\n\n  /**\n   * Registers the various event handlers for reconnection.\n   *\n   * @internal\n   */\n  private registerReconnectHandlers = () => {\n    // handles the legacy \"goAway\" event\n    const unregisterGoAway = this.on('goAway', () => {\n      this.reconnect(WebsocketReconnectStrategy.MIGRATE, 'goAway').catch(\n        (err) => this.logger('warn', '[Reconnect] Error reconnecting', err),\n      );\n    });\n\n    // handles the \"error\" event, through which the SFU can request a reconnect\n    const unregisterOnError = this.on('error', (e) => {\n      const { reconnectStrategy: strategy, error } = e;\n      if (strategy === WebsocketReconnectStrategy.UNSPECIFIED) return;\n      if (strategy === WebsocketReconnectStrategy.DISCONNECT) {\n        this.leave({ message: 'SFU instructed to disconnect' }).catch((err) => {\n          this.logger('warn', `Can't leave call after disconnect request`, err);\n        });\n      } else {\n        this.reconnect(strategy, error?.message || 'SFU Error').catch((err) => {\n          this.logger('warn', '[Reconnect] Error reconnecting', err);\n        });\n      }\n    });\n\n    const unregisterNetworkChanged = this.streamClient.on(\n      'network.changed',\n      (e) => {\n        this.tracer.trace('network.changed', e);\n        if (!e.online) {\n          this.logger('debug', '[Reconnect] Going offline');\n          if (!this.hasJoinedOnce) return;\n          this.lastOfflineTimestamp = Date.now();\n          // create a new task that would resolve when the network is available\n          const networkAvailableTask = promiseWithResolvers();\n          networkAvailableTask.promise.then(() => {\n            let strategy = WebsocketReconnectStrategy.FAST;\n            if (this.lastOfflineTimestamp) {\n              const offline = (Date.now() - this.lastOfflineTimestamp) / 1000;\n              if (offline > this.fastReconnectDeadlineSeconds) {\n                // We shouldn't attempt FAST if we have exceeded the deadline.\n                // The SFU would have already wiped out the session.\n                strategy = WebsocketReconnectStrategy.REJOIN;\n              }\n            }\n\n            this.reconnect(strategy, 'Going online').catch((err) => {\n              this.logger(\n                'warn',\n                '[Reconnect] Error reconnecting after going online',\n                err,\n              );\n            });\n          });\n          this.networkAvailableTask = networkAvailableTask;\n          this.sfuStatsReporter?.stop();\n          this.state.setCallingState(CallingState.OFFLINE);\n        } else {\n          this.logger('debug', '[Reconnect] Going online');\n          this.sfuClient?.close(\n            StreamSfuClient.DISPOSE_OLD_SOCKET,\n            'Closing WS to reconnect after going online',\n          );\n          // we went online, release the previous waiters and reset the state\n          this.networkAvailableTask?.resolve();\n          this.networkAvailableTask = undefined;\n          this.sfuStatsReporter?.start();\n        }\n      },\n    );\n\n    this.leaveCallHooks\n      .add(unregisterGoAway)\n      .add(unregisterOnError)\n      .add(unregisterNetworkChanged);\n  };\n\n  /**\n   * Restores the published tracks after a reconnection.\n   * @internal\n   */\n  private restorePublishedTracks = async () => {\n    // the tracks need to be restored in their original order of publishing\n    // otherwise, we might get `m-lines order mismatch` errors\n    for (const trackType of this.trackPublishOrder) {\n      let mediaStream: MediaStream | undefined;\n      switch (trackType) {\n        case TrackType.AUDIO:\n          mediaStream = this.microphone.state.mediaStream;\n          break;\n        case TrackType.VIDEO:\n          mediaStream = this.camera.state.mediaStream;\n          break;\n        case TrackType.SCREEN_SHARE:\n          mediaStream = this.screenShare.state.mediaStream;\n          break;\n        // screen share audio can't exist without a screen share, so we handle it there\n        case TrackType.SCREEN_SHARE_AUDIO:\n        case TrackType.UNSPECIFIED:\n          break;\n        default:\n          ensureExhausted(trackType, 'Unknown track type');\n          break;\n      }\n\n      if (mediaStream) await this.publish(mediaStream, trackType);\n    }\n  };\n\n  /**\n   * Restores the subscribed tracks after a reconnection.\n   * @internal\n   */\n  private restoreSubscribedTracks = () => {\n    const { remoteParticipants } = this.state;\n    if (remoteParticipants.length <= 0) return;\n    this.dynascaleManager.applyTrackSubscriptions(undefined);\n  };\n\n  /**\n   * Starts publishing the given video stream to the call.\n   * @deprecated use `call.publish()`.\n   */\n  publishVideoStream = async (videoStream: MediaStream) => {\n    await this.publish(videoStream, TrackType.VIDEO);\n  };\n\n  /**\n   * Starts publishing the given audio stream to the call.\n   * @deprecated use `call.publish()`\n   */\n  publishAudioStream = async (audioStream: MediaStream) => {\n    await this.publish(audioStream, TrackType.AUDIO);\n  };\n\n  /**\n   * Starts publishing the given screen-share stream to the call.\n   * @deprecated use `call.publish()`\n   */\n  publishScreenShareStream = async (screenShareStream: MediaStream) => {\n    await this.publish(screenShareStream, TrackType.SCREEN_SHARE);\n  };\n\n  /**\n   * Publishes the given media stream.\n   *\n   * @param mediaStream the media stream to publish.\n   * @param trackType the type of the track to announce.\n   */\n  publish = async (mediaStream: MediaStream, trackType: TrackType) => {\n    if (!this.sfuClient) throw new Error(`Call not joined yet.`);\n    // joining is in progress, and we should wait until the client is ready\n    await this.sfuClient.joinTask;\n\n    if (!this.permissionsContext.canPublish(trackType)) {\n      throw new Error(`No permission to publish ${TrackType[trackType]}`);\n    }\n\n    if (!this.publisher) throw new Error('Publisher is not initialized');\n\n    const [track] = isAudioTrackType(trackType)\n      ? mediaStream.getAudioTracks()\n      : mediaStream.getVideoTracks();\n\n    if (!track) {\n      throw new Error(\n        `There is no ${TrackType[trackType]} track in the stream`,\n      );\n    }\n\n    if (track.readyState === 'ended') {\n      throw new Error(`Can't publish ended tracks.`);\n    }\n\n    pushToIfMissing(this.trackPublishOrder, trackType);\n    await this.publisher.publish(track, trackType);\n\n    const trackTypes = [trackType];\n    if (trackType === TrackType.SCREEN_SHARE) {\n      const [audioTrack] = mediaStream.getAudioTracks();\n      if (audioTrack) {\n        pushToIfMissing(this.trackPublishOrder, TrackType.SCREEN_SHARE_AUDIO);\n        await this.publisher.publish(audioTrack, TrackType.SCREEN_SHARE_AUDIO);\n        trackTypes.push(TrackType.SCREEN_SHARE_AUDIO);\n      }\n    }\n\n    if (track.kind === 'video') {\n      // schedules calibration report - the SFU will use the performance stats\n      // to adjust the quality thresholds as early as possible\n      this.sfuStatsReporter?.scheduleOne(3000);\n    }\n\n    await this.updateLocalStreamState(mediaStream, ...trackTypes);\n  };\n\n  /**\n   * Stops publishing the given track type to the call, if it is currently being published.\n   *\n   * @param trackTypes the track types to stop publishing.\n   */\n  stopPublish = async (...trackTypes: TrackType[]) => {\n    if (!this.sfuClient || !this.publisher) return;\n    this.publisher.stopTracks(...trackTypes);\n    await this.updateLocalStreamState(undefined, ...trackTypes);\n  };\n\n  /**\n   * Updates the call state with the new stream.\n   *\n   * @param mediaStream the new stream to update the call state with.\n   * If undefined, the stream will be removed from the call state.\n   * @param trackTypes the track types to update the call state with.\n   */\n  private updateLocalStreamState = async (\n    mediaStream: MediaStream | undefined,\n    ...trackTypes: TrackType[]\n  ) => {\n    if (!this.sfuClient || !this.sfuClient.sessionId) return;\n    await this.notifyTrackMuteState(!mediaStream, ...trackTypes);\n\n    const { sessionId } = this.sfuClient;\n    for (const trackType of trackTypes) {\n      const streamStateProp = trackTypeToParticipantStreamKey(trackType);\n      if (!streamStateProp) continue;\n\n      this.state.updateParticipant(sessionId, (p) => ({\n        publishedTracks: mediaStream\n          ? pushToIfMissing([...p.publishedTracks], trackType)\n          : p.publishedTracks.filter((t) => t !== trackType),\n        [streamStateProp]: mediaStream,\n      }));\n    }\n  };\n\n  /**\n   * Updates the preferred publishing options\n   *\n   * @internal\n   * @param options the options to use.\n   */\n  updatePublishOptions = (options: ClientPublishOptions) => {\n    this.logger(\n      'warn',\n      '[call.updatePublishOptions]: You are manually overriding the publish options for this call. ' +\n        'This is not recommended, and it can cause call stability/compatibility issues. Use with caution.',\n    );\n    if (this.state.callingState === CallingState.JOINED) {\n      this.logger(\n        'warn',\n        'Updating publish options after joining the call does not have an effect',\n      );\n    }\n    this.clientPublishOptions = { ...this.clientPublishOptions, ...options };\n  };\n\n  /**\n   * Notifies the SFU that a noise cancellation process has started.\n   *\n   * @internal\n   */\n  notifyNoiseCancellationStarting = async () => {\n    return this.sfuClient?.startNoiseCancellation().catch((err) => {\n      this.logger('warn', 'Failed to notify start of noise cancellation', err);\n    });\n  };\n\n  /**\n   * Notifies the SFU that a noise cancellation process has stopped.\n   *\n   * @internal\n   */\n  notifyNoiseCancellationStopped = async () => {\n    return this.sfuClient?.stopNoiseCancellation().catch((err) => {\n      this.logger('warn', 'Failed to notify stop of noise cancellation', err);\n    });\n  };\n\n  /**\n   * Notifies the SFU about the mute state of the given track types.\n   * @internal\n   */\n  notifyTrackMuteState = async (muted: boolean, ...trackTypes: TrackType[]) => {\n    if (!this.sfuClient) return;\n    await this.sfuClient.updateMuteStates(\n      trackTypes.map((trackType) => ({ trackType, muted })),\n    );\n  };\n\n  /**\n   * Will enhance the reported stats with additional participant-specific information (`callStatsReport$` state [store variable](./StreamVideoClient.md/#readonlystatestore)).\n   * This is usually helpful when detailed stats for a specific participant are needed.\n   *\n   * @param sessionId the sessionId to start reporting for.\n   */\n  startReportingStatsFor = (sessionId: string) => {\n    return this.statsReporter?.startReportingStatsFor(sessionId);\n  };\n\n  /**\n   * Opposite of `startReportingStatsFor`.\n   * Will turn off stats reporting for a specific participant.\n   *\n   * @param sessionId the sessionId to stop reporting for.\n   */\n  stopReportingStatsFor = (sessionId: string) => {\n    return this.statsReporter?.stopReportingStatsFor(sessionId);\n  };\n\n  /**\n   * Resets the last sent reaction for the user holding the given `sessionId`. This is a local action, it won't reset the reaction on the backend.\n   *\n   * @param sessionId the session id.\n   */\n  resetReaction = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      reaction: undefined,\n    });\n  };\n\n  /**\n   * Sets the list of criteria to sort the participants by.\n   *\n   * @param criteria the list of criteria to sort the participants by.\n   */\n  setSortParticipantsBy: CallState['setSortParticipantsBy'] = (criteria) => {\n    return this.state.setSortParticipantsBy(criteria);\n  };\n\n  /**\n   * Sends a reaction to the other call participants.\n   *\n   * @param reaction the reaction to send.\n   */\n  sendReaction = async (\n    reaction: SendReactionRequest,\n  ): Promise<SendReactionResponse> => {\n    return this.streamClient.post<SendReactionResponse, SendReactionRequest>(\n      `${this.streamClientBasePath}/reaction`,\n      reaction,\n    );\n  };\n\n  /**\n   * Blocks the user with the given `userId`.\n   *\n   * @param userId the id of the user to block.\n   */\n  blockUser = async (userId: string) => {\n    return this.streamClient.post<BlockUserResponse, BlockUserRequest>(\n      `${this.streamClientBasePath}/block`,\n      {\n        user_id: userId,\n      },\n    );\n  };\n\n  /**\n   * Unblocks the user with the given `userId`.\n   *\n   * @param userId the id of the user to unblock.\n   */\n  unblockUser = async (userId: string) => {\n    return this.streamClient.post<UnblockUserResponse, UnblockUserRequest>(\n      `${this.streamClientBasePath}/unblock`,\n      {\n        user_id: userId,\n      },\n    );\n  };\n\n  /**\n   * Mutes the current user.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteSelf = (type: TrackMuteType) => {\n    const myUserId = this.currentUserId;\n    if (myUserId) {\n      return this.muteUser(myUserId, type);\n    }\n  };\n\n  /**\n   * Mutes all the other participants.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteOthers = (type: TrackMuteType) => {\n    const trackType = muteTypeToTrackType(type);\n    if (!trackType) return;\n    const userIdsToMute: string[] = [];\n    for (const participant of this.state.remoteParticipants) {\n      if (participant.publishedTracks.includes(trackType)) {\n        userIdsToMute.push(participant.userId);\n      }\n    }\n\n    if (userIdsToMute.length > 0) {\n      return this.muteUser(userIdsToMute, type);\n    }\n  };\n\n  /**\n   * Mutes the user with the given `userId`.\n   *\n   * @param userId the id of the user to mute.\n   * @param type the type of the mute operation.\n   */\n  muteUser = (userId: string | string[], type: TrackMuteType) => {\n    return this.streamClient.post<MuteUsersResponse, MuteUsersRequest>(\n      `${this.streamClientBasePath}/mute_users`,\n      {\n        user_ids: Array.isArray(userId) ? userId : [userId],\n        [type]: true,\n      },\n    );\n  };\n\n  /**\n   * Will mute all users in the call.\n   *\n   * @param type the type of the mute operation.\n   */\n  muteAllUsers = (type: TrackMuteType) => {\n    return this.streamClient.post<MuteUsersResponse, MuteUsersRequest>(\n      `${this.streamClientBasePath}/mute_users`,\n      {\n        mute_all_users: true,\n        [type]: true,\n      },\n    );\n  };\n\n  /**\n   * Starts recording the call\n   */\n  startRecording = async (request?: StartRecordingRequest) => {\n    return this.streamClient.post<\n      StartRecordingResponse,\n      StartRecordingRequest\n    >(`${this.streamClientBasePath}/start_recording`, request ? request : {});\n  };\n\n  /**\n   * Stops recording the call\n   */\n  stopRecording = async () => {\n    return this.streamClient.post<StopRecordingResponse>(\n      `${this.streamClientBasePath}/stop_recording`,\n      {},\n    );\n  };\n\n  /**\n   * Starts the transcription of the call.\n   *\n   * @param request the request data.\n   */\n  startTranscription = async (\n    request?: StartTranscriptionRequest,\n  ): Promise<StartTranscriptionResponse> => {\n    return this.streamClient.post<\n      StartTranscriptionResponse,\n      StartTranscriptionRequest\n    >(`${this.streamClientBasePath}/start_transcription`, request);\n  };\n\n  /**\n   * Stops the transcription of the call.\n   */\n  stopTranscription = async (): Promise<StopTranscriptionResponse> => {\n    return this.streamClient.post<StopTranscriptionResponse>(\n      `${this.streamClientBasePath}/stop_transcription`,\n    );\n  };\n\n  /**\n   * Starts the closed captions of the call.\n   */\n  startClosedCaptions = async (\n    options?: StartClosedCaptionsRequest,\n  ): Promise<StartClosedCaptionsResponse> => {\n    const trx = this.state.setCaptioning(true); // optimistic update\n    try {\n      return await this.streamClient.post<\n        StartClosedCaptionsResponse,\n        StartClosedCaptionsRequest\n      >(`${this.streamClientBasePath}/start_closed_captions`, options);\n    } catch (err) {\n      trx.rollback(); // revert the optimistic update\n      throw err;\n    }\n  };\n\n  /**\n   * Stops the closed captions of the call.\n   */\n  stopClosedCaptions = async (\n    options?: StopClosedCaptionsRequest,\n  ): Promise<StopClosedCaptionsResponse> => {\n    const trx = this.state.setCaptioning(false); // optimistic update\n    try {\n      return await this.streamClient.post<\n        StopClosedCaptionsResponse,\n        StopClosedCaptionsRequest\n      >(`${this.streamClientBasePath}/stop_closed_captions`, options);\n    } catch (err) {\n      trx.rollback(); // revert the optimistic update\n      throw err;\n    }\n  };\n\n  /**\n   * Updates the closed caption settings.\n   *\n   * @param config the closed caption settings to apply\n   */\n  updateClosedCaptionSettings = (config: Partial<ClosedCaptionsSettings>) => {\n    this.state.updateClosedCaptionSettings(config);\n  };\n\n  /**\n   * Sends a `call.permission_request` event to all users connected to the call.\n   * The call settings object contains information about which permissions can be requested during a call\n   * (for example, a user might be allowed to request permission to publish audio, but not video).\n   */\n  requestPermissions = async (\n    data: RequestPermissionRequest,\n  ): Promise<RequestPermissionResponse> => {\n    const { permissions } = data;\n    const canRequestPermissions = permissions.every((permission) =>\n      this.permissionsContext.canRequest(permission as OwnCapability),\n    );\n    if (!canRequestPermissions) {\n      throw new Error(\n        `You are not allowed to request permissions: ${permissions.join(', ')}`,\n      );\n    }\n    return this.streamClient.post<\n      RequestPermissionResponse,\n      RequestPermissionRequest\n    >(`${this.streamClientBasePath}/request_permission`, data);\n  };\n\n  /**\n   * Allows you to grant certain permissions to a user in a call.\n   * The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * Supported permissions that can be granted are:\n   * - `send-audio`\n   * - `send-video`\n   * - `screenshare`\n   *\n   * @param userId the id of the user to grant permissions to.\n   * @param permissions the permissions to grant.\n   */\n  grantPermissions = async (userId: string, permissions: string[]) => {\n    return this.updateUserPermissions({\n      user_id: userId,\n      grant_permissions: permissions,\n    });\n  };\n\n  /**\n   * Allows you to revoke certain permissions from a user in a call.\n   * The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * Supported permissions that can be revoked are:\n   * - `send-audio`\n   * - `send-video`\n   * - `screenshare`\n   *\n   * @param userId the id of the user to revoke permissions from.\n   * @param permissions the permissions to revoke.\n   */\n  revokePermissions = async (userId: string, permissions: string[]) => {\n    return this.updateUserPermissions({\n      user_id: userId,\n      revoke_permissions: permissions,\n    });\n  };\n\n  /**\n   * Allows you to grant or revoke a specific permission to a user in a call. The permissions are specific to the call experience and do not survive the call itself.\n   *\n   * When revoking a permission, this endpoint will also mute the relevant track from the user. This is similar to muting a user with the difference that the user will not be able to unmute afterwards.\n   *\n   * Supported permissions that can be granted or revoked: `send-audio`, `send-video` and `screenshare`.\n   *\n   * `call.permissions_updated` event is sent to all members of the call.\n   *\n   */\n  updateUserPermissions = async (data: UpdateUserPermissionsRequest) => {\n    return this.streamClient.post<\n      UpdateUserPermissionsResponse,\n      UpdateUserPermissionsRequest\n    >(`${this.streamClientBasePath}/user_permissions`, data);\n  };\n\n  /**\n   * Starts the livestreaming of the call.\n   *\n   * @param data the request data.\n   * @param params the request params.\n   */\n  goLive = async (data: GoLiveRequest = {}, params?: { notify?: boolean }) => {\n    return this.streamClient.post<GoLiveResponse, GoLiveRequest>(\n      `${this.streamClientBasePath}/go_live`,\n      data,\n      params,\n    );\n  };\n\n  /**\n   * Stops the livestreaming of the call.\n   */\n  stopLive = async (data: StopLiveRequest = {}) => {\n    return this.streamClient.post<StopLiveResponse>(\n      `${this.streamClientBasePath}/stop_live`,\n      data,\n    );\n  };\n\n  /**\n   * Starts the broadcasting of the call.\n   */\n  startHLS = async () => {\n    return this.streamClient.post<StartHLSBroadcastingResponse>(\n      `${this.streamClientBasePath}/start_broadcasting`,\n      {},\n    );\n  };\n\n  /**\n   * Stops the broadcasting of the call.\n   */\n  stopHLS = async () => {\n    return this.streamClient.post<StopHLSBroadcastingResponse>(\n      `${this.streamClientBasePath}/stop_broadcasting`,\n      {},\n    );\n  };\n\n  /**\n   * Starts the RTMP-out broadcasting of the call.\n   */\n  startRTMPBroadcasts = async (\n    data: StartRTMPBroadcastsRequest,\n  ): Promise<StartRTMPBroadcastsResponse> => {\n    return this.streamClient.post<\n      StartRTMPBroadcastsResponse,\n      StartRTMPBroadcastsRequest\n    >(`${this.streamClientBasePath}/rtmp_broadcasts`, data);\n  };\n\n  /**\n   * Stops all RTMP-out broadcasting of the call.\n   */\n  stopAllRTMPBroadcasts = async (): Promise<StopAllRTMPBroadcastsResponse> => {\n    return this.streamClient.post<StopAllRTMPBroadcastsResponse>(\n      `${this.streamClientBasePath}/rtmp_broadcasts/stop`,\n    );\n  };\n\n  /**\n   * Stops the RTMP-out broadcasting of the call specified by it's name.\n   */\n  stopRTMPBroadcast = async (\n    name: string,\n  ): Promise<StopRTMPBroadcastsResponse> => {\n    return this.streamClient.post<StopRTMPBroadcastsResponse>(\n      `${this.streamClientBasePath}/rtmp_broadcasts/${name}/stop`,\n    );\n  };\n\n  /**\n   * Starts frame by frame recording.\n   * Sends call.frame_recording_started events\n   */\n  startFrameRecording = async (\n    data: StartFrameRecordingRequest,\n  ): Promise<StartFrameRecordingResponse> => {\n    return this.streamClient.post<\n      StartFrameRecordingResponse,\n      StartFrameRecordingRequest\n    >(`${this.streamClientBasePath}/start_frame_recording`, data);\n  };\n\n  /**\n   * Stops frame recording.\n   */\n  stopFrameRecording = async (): Promise<StopFrameRecordingResponse> => {\n    return this.streamClient.post<StopFrameRecordingResponse>(\n      `${this.streamClientBasePath}/stop_frame_recording`,\n    );\n  };\n\n  /**\n   * Updates the call settings or custom data.\n   *\n   * @param updates the updates to apply to the call.\n   */\n  update = async (updates: UpdateCallRequest) => {\n    const response = await this.streamClient.patch<\n      UpdateCallResponse,\n      UpdateCallRequest\n    >(`${this.streamClientBasePath}`, updates);\n\n    const { call, members, own_capabilities } = response;\n    this.state.updateFromCallResponse(call);\n    this.state.setMembers(members);\n    this.state.setOwnCapabilities(own_capabilities);\n\n    return response;\n  };\n\n  /**\n   * Ends the call. Once the call is ended, it cannot be re-joined.\n   */\n  endCall = async () => {\n    return this.streamClient.post<EndCallResponse>(\n      `${this.streamClientBasePath}/mark_ended`,\n    );\n  };\n\n  /**\n   * Pins the given session to the top of the participants list.\n   *\n   * @param sessionId the sessionId to pin.\n   */\n  pin = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      pin: {\n        isLocalPin: true,\n        pinnedAt: Date.now(),\n      },\n    });\n  };\n\n  /**\n   * Unpins the given session from the top of the participants list.\n   *\n   * @param sessionId the sessionId to unpin.\n   */\n  unpin = (sessionId: string) => {\n    this.state.updateParticipant(sessionId, {\n      pin: undefined,\n    });\n  };\n\n  /**\n   * Pins the given session to the top of the participants list for everyone\n   * in the call.\n   * You can execute this method only if you have the `pin-for-everyone` capability.\n   *\n   * @param request the request object.\n   */\n  pinForEveryone = async (request: PinRequest) => {\n    return this.streamClient.post<PinResponse, PinRequest>(\n      `${this.streamClientBasePath}/pin`,\n      request,\n    );\n  };\n\n  /**\n   * Unpins the given session from the top of the participants list for everyone\n   * in the call.\n   * You can execute this method only if you have the `pin-for-everyone` capability.\n   *\n   * @param request the request object.\n   */\n  unpinForEveryone = async (request: UnpinRequest) => {\n    return this.streamClient.post<UnpinResponse, UnpinRequest>(\n      `${this.streamClientBasePath}/unpin`,\n      request,\n    );\n  };\n\n  /**\n   * Query call members with filter query. The result won't be stored in call state.\n   * @param request\n   * @returns\n   */\n  queryMembers = (request?: Omit<QueryCallMembersRequest, 'type' | 'id'>) => {\n    return this.streamClient.post<\n      QueryCallMembersResponse,\n      QueryCallMembersRequest\n    >('/call/members', {\n      ...(request || {}),\n      id: this.id,\n      type: this.type,\n    });\n  };\n\n  /**\n   * Will update the call members.\n   *\n   * @param data the request data.\n   */\n  updateCallMembers = async (\n    data: UpdateCallMembersRequest,\n  ): Promise<UpdateCallMembersResponse> => {\n    return this.streamClient.post<\n      UpdateCallMembersResponse,\n      UpdateCallMembersRequest\n    >(`${this.streamClientBasePath}/members`, data);\n  };\n\n  /**\n   * Schedules an auto-drop timeout based on the call settings.\n   * Applicable only for ringing calls.\n   */\n  private scheduleAutoDrop = () => {\n    this.cancelAutoDrop();\n\n    const settings = this.state.settings;\n    if (!settings) return;\n    // ignore if the call is not ringing\n    if (this.state.callingState !== CallingState.RINGING) return;\n\n    const timeoutInMs = this.isCreatedByMe\n      ? settings.ring.auto_cancel_timeout_ms\n      : settings.ring.incoming_call_timeout_ms;\n\n    // 0 means no auto-drop\n    if (timeoutInMs <= 0) return;\n    this.dropTimeout = setTimeout(() => {\n      // the call might have stopped ringing by this point,\n      // e.g. it was already accepted and joined\n      if (this.state.callingState !== CallingState.RINGING) return;\n      this.leave({\n        reject: true,\n        reason: 'timeout',\n        message: `ringing timeout - ${this.isCreatedByMe ? 'no one accepted' : `user didn't interact with incoming call screen`}`,\n      }).catch((err) => {\n        this.logger('error', 'Failed to drop call', err);\n      });\n    }, timeoutInMs);\n  };\n\n  /**\n   * Cancels a scheduled auto-drop timeout.\n   */\n  private cancelAutoDrop = () => {\n    clearTimeout(this.dropTimeout);\n    this.dropTimeout = undefined;\n  };\n\n  /**\n   * Retrieves the list of recordings for the current call or call session.\n   *\n   * If `callSessionId` is provided, it will return the recordings for that call session.\n   * Otherwise, all recordings for the current call will be returned.\n   *\n   * @param callSessionId the call session id to retrieve recordings for.\n   */\n  queryRecordings = async (\n    callSessionId?: string,\n  ): Promise<ListRecordingsResponse> => {\n    let endpoint = this.streamClientBasePath;\n    if (callSessionId) {\n      endpoint = `${endpoint}/${callSessionId}`;\n    }\n    return this.streamClient.get<ListRecordingsResponse>(\n      `${endpoint}/recordings`,\n    );\n  };\n\n  /**\n   * Retrieves the list of transcriptions for the current call.\n   *\n   * @returns the list of transcriptions.\n   */\n  queryTranscriptions = async (): Promise<ListTranscriptionsResponse> => {\n    return this.streamClient.get<ListTranscriptionsResponse>(\n      `${this.streamClientBasePath}/transcriptions`,\n    );\n  };\n\n  /**\n   * Retrieve call statistics for a particular call session (historical).\n   * Here `callSessionID` is mandatory.\n   *\n   * @param callSessionID the call session ID to retrieve statistics for.\n   * @returns The call stats.\n   * @deprecated use `call.getCallReport` instead.\n   * @internal\n   */\n  getCallStats = async (callSessionID: string) => {\n    const endpoint = `${this.streamClientBasePath}/stats/${callSessionID}`;\n    return this.streamClient.get<GetCallStatsResponse>(endpoint);\n  };\n\n  /**\n   * Retrieve call report. If the `callSessionID` is not specified, then the\n   * report for the latest call session is retrieved. If it is specified, then\n   * the report for that particular session is retrieved if it exists.\n   *\n   * @param callSessionID the optional call session ID to retrieve statistics for\n   * @returns the call report\n   */\n  getCallReport = async (callSessionID: string = '') => {\n    const endpoint = `${this.streamClientBasePath}/report`;\n    const params = callSessionID !== '' ? { session_id: callSessionID } : {};\n    return this.streamClient.get<GetCallReportResponse>(endpoint, params);\n  };\n\n  /**\n   * Submit user feedback for the call\n   *\n   * @param rating Rating between 1 and 5 denoting the experience of the user in the call\n   * @param reason The reason/description for the rating\n   * @param custom Custom data\n   */\n  submitFeedback = async (\n    rating: number,\n    {\n      reason,\n      custom,\n    }: Pick<CollectUserFeedbackRequest, 'reason' | 'custom'> = {},\n  ): Promise<CollectUserFeedbackResponse> => {\n    const { sdkName, sdkVersion, ...platform } = getSdkSignature(\n      await getClientDetails(),\n    );\n    return this.streamClient.post<\n      CollectUserFeedbackResponse,\n      CollectUserFeedbackRequest\n    >(`${this.streamClientBasePath}/feedback`, {\n      rating,\n      reason,\n      user_session_id: this.sfuClient?.sessionId,\n      sdk: sdkName,\n      sdk_version: sdkVersion,\n      custom: {\n        ...custom,\n        'x-stream-platform-data': platform,\n      },\n    });\n  };\n\n  /**\n   * Sends a custom event to all call participants.\n   *\n   * @param payload the payload to send.\n   */\n  sendCustomEvent = async (payload: { [key: string]: any }) => {\n    return this.streamClient.post<SendCallEventResponse, SendCallEventRequest>(\n      `${this.streamClientBasePath}/event`,\n      { custom: payload },\n    );\n  };\n\n  /**\n   * Applies the device configuration from the backend.\n   *\n   * @internal\n   */\n  applyDeviceConfig = async (\n    settings: CallSettingsResponse,\n    publish: boolean,\n  ) => {\n    await this.camera.apply(settings.video, publish).catch((err) => {\n      this.logger('warn', 'Camera init failed', err);\n    });\n    await this.microphone.apply(settings.audio, publish).catch((err) => {\n      this.logger('warn', 'Mic init failed', err);\n    });\n  };\n\n  /**\n   * Will begin tracking the given element for visibility changes within the\n   * configured viewport element (`call.setViewport`).\n   *\n   * @param element the element to track.\n   * @param sessionId the session id.\n   * @param trackType the video mode.\n   */\n  trackElementVisibility = <T extends HTMLElement>(\n    element: T,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    return this.dynascaleManager.trackElementVisibility(\n      element,\n      sessionId,\n      trackType,\n    );\n  };\n\n  /**\n   * Sets the viewport element to track bound video elements for visibility.\n   *\n   * @param element the viewport element.\n   */\n  setViewport = <T extends HTMLElement>(element: T) => {\n    return this.dynascaleManager.setViewport(element);\n  };\n\n  /**\n   * Binds a DOM <video> element to the given session id.\n   * This method will make sure that the video element will play\n   * the correct video stream for the given session id.\n   *\n   * Under the hood, it would also keep track of the video element dimensions\n   * and update the subscription accordingly in order to optimize the bandwidth.\n   *\n   * If a \"viewport\" is configured, the video element will be automatically\n   * tracked for visibility and the subscription will be updated accordingly.\n   *\n   * @param videoElement the video element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of video.\n   */\n  bindVideoElement = (\n    videoElement: HTMLVideoElement,\n    sessionId: string,\n    trackType: VideoTrackType,\n  ) => {\n    const unbind = this.dynascaleManager.bindVideoElement(\n      videoElement,\n      sessionId,\n      trackType,\n    );\n\n    if (!unbind) return;\n    this.leaveCallHooks.add(unbind);\n    return () => {\n      this.leaveCallHooks.delete(unbind);\n      unbind();\n    };\n  };\n\n  /**\n   * Binds a DOM <audio> element to the given session id.\n   *\n   * This method will make sure that the audio element will\n   * play the correct audio stream for the given session id.\n   *\n   * @param audioElement the audio element to bind to.\n   * @param sessionId the session id.\n   * @param trackType the kind of audio.\n   */\n  bindAudioElement = (\n    audioElement: HTMLAudioElement,\n    sessionId: string,\n    trackType: AudioTrackType = 'audioTrack',\n  ) => {\n    const unbind = this.dynascaleManager.bindAudioElement(\n      audioElement,\n      sessionId,\n      trackType,\n    );\n\n    if (!unbind) return;\n    this.leaveCallHooks.add(unbind);\n    return () => {\n      this.leaveCallHooks.delete(unbind);\n      unbind();\n    };\n  };\n\n  /**\n   * Binds a DOM <img> element to this call's thumbnail (if enabled in settings).\n   *\n   * @param imageElement the image element to bind to.\n   * @param opts options for the binding.\n   */\n  bindCallThumbnailElement = (\n    imageElement: HTMLImageElement,\n    opts: {\n      fallbackImageSource?: string;\n    } = {},\n  ) => {\n    const handleError = () => {\n      imageElement.src =\n        opts.fallbackImageSource ||\n        'https://getstream.io/random_svg/?name=x&id=x';\n    };\n\n    const unsubscribe = createSubscription(\n      this.state.thumbnails$,\n      (thumbnails) => {\n        if (!thumbnails) return;\n        imageElement.addEventListener('error', handleError);\n\n        const thumbnailUrl = new URL(thumbnails.image_url);\n        thumbnailUrl.searchParams.set('w', String(imageElement.clientWidth));\n        thumbnailUrl.searchParams.set('h', String(imageElement.clientHeight));\n\n        imageElement.src = thumbnailUrl.toString();\n      },\n    );\n\n    return () => {\n      unsubscribe();\n      imageElement.removeEventListener('error', handleError);\n    };\n  };\n\n  /**\n   * Specify preference for incoming video resolution. The preference will\n   * be matched as close as possible, but actual resolution will depend\n   * on the video source quality and client network conditions. Will enable\n   * incoming video, if previously disabled.\n   *\n   * @param resolution preferred resolution, or `undefined` to clear preference\n   * @param sessionIds optionally specify session ids of the participants this\n   * preference has effect on. Affects all participants by default.\n   */\n  setPreferredIncomingVideoResolution = (\n    resolution: VideoDimension | undefined,\n    sessionIds?: string[],\n  ) => {\n    this.dynascaleManager.setVideoTrackSubscriptionOverrides(\n      resolution\n        ? {\n            enabled: true,\n            dimension: resolution,\n          }\n        : undefined,\n      sessionIds,\n    );\n    this.dynascaleManager.applyTrackSubscriptions();\n  };\n\n  /**\n   * Enables or disables incoming video from all remote call participants,\n   * and removes any preference for preferred resolution.\n   */\n  setIncomingVideoEnabled = (enabled: boolean) => {\n    this.dynascaleManager.setVideoTrackSubscriptionOverrides(\n      enabled ? undefined : { enabled: false },\n    );\n    this.dynascaleManager.applyTrackSubscriptions();\n  };\n\n  /**\n   * Sets the maximum amount of time a user can remain waiting for a reconnect\n   * after a network disruption\n   * @param timeoutSeconds Timeout in seconds, or 0 to keep reconnecting indefinetely\n   */\n  setDisconnectionTimeout = (timeoutSeconds: number) => {\n    this.disconnectionTimeoutSeconds = timeoutSeconds;\n  };\n}\n","import { ICEServer } from '../../gen/coordinator';\n\nexport const toRtcConfiguration = (config: ICEServer[]): RTCConfiguration => {\n  return {\n    bundlePolicy: 'max-bundle',\n    iceServers: config.map((ice) => ({\n      urls: ice.urls,\n      username: ice.username,\n      credential: ice.password,\n    })),\n  };\n};\n","import { StreamClient } from './client';\nimport {\n  addConnectionEventListeners,\n  isCloseEvent,\n  KnownCodes,\n  removeConnectionEventListeners,\n  retryInterval,\n  sleep,\n} from './utils';\nimport type { LogLevel, StreamVideoEvent, UR } from './types';\nimport type {\n  ConnectedEvent,\n  ConnectionErrorEvent,\n  WSAuthMessage,\n} from '../../gen/coordinator';\nimport { makeSafePromise, type SafePromise } from '../../helpers/promise';\nimport { getTimers } from '../../timers';\n\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */\nexport class StableWSConnection {\n  // local vars\n  connectionID?: string;\n  private connectionOpenSafe?: SafePromise<ConnectedEvent>;\n  consecutiveFailures: number;\n  pingInterval: number;\n  healthCheckTimeoutRef?: number;\n  isConnecting: boolean;\n  isDisconnected: boolean;\n  isHealthy: boolean;\n  isConnectionOpenResolved?: boolean;\n  lastEvent: Date | null;\n  connectionCheckTimeout: number;\n  connectionCheckTimeoutRef?: NodeJS.Timeout;\n  rejectConnectionOpen?: (\n    reason?: Error & {\n      code?: string | number;\n      isWSFailure?: boolean;\n      StatusCode?: string | number;\n    },\n  ) => void;\n  resolveConnectionOpen?: (value: ConnectedEvent) => void;\n  totalFailures: number;\n  ws?: WebSocket;\n  wsID: number;\n\n  client: StreamClient;\n\n  constructor(client: StreamClient) {\n    this.client = client;\n    /** consecutive failures influence the duration of the timeout */\n    this.consecutiveFailures = 0;\n    /** keep track of the total number of failures */\n    this.totalFailures = 0;\n    /** We only make 1 attempt to reconnect at the same time.. */\n    this.isConnecting = false;\n    /** To avoid reconnect if client is disconnected */\n    this.isDisconnected = false;\n    /** Boolean that indicates if the connection promise is resolved */\n    this.isConnectionOpenResolved = false;\n    /** Boolean that indicates if we have a working connection to the server */\n    this.isHealthy = false;\n    /** Incremented when a new WS connection is made */\n    this.wsID = 1;\n    /** Store the last event time for health checks */\n    this.lastEvent = null;\n    /** Send a health check message every 25 seconds */\n    this.pingInterval = 25 * 1000;\n    this.connectionCheckTimeout = this.pingInterval + 10 * 1000;\n\n    addConnectionEventListeners(this.onlineStatusChanged);\n  }\n\n  _log = (msg: string, extra: UR = {}, level: LogLevel = 'info') => {\n    this.client.logger(level, `connection:${msg}`, extra);\n  };\n\n  setClient = (client: StreamClient) => {\n    this.client = client;\n  };\n\n  /**\n   * connect - Connect to the WS URL\n   * the default 15s timeout allows between 2~3 tries\n   * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n   */\n  async connect(timeout = 15000) {\n    if (this.isConnecting) {\n      throw Error(\n        `You've called connect twice, can only attempt 1 connection at the time`,\n      );\n    }\n\n    this.isDisconnected = false;\n\n    try {\n      const healthCheck = await this._connect();\n      this.consecutiveFailures = 0;\n\n      this._log(\n        `connect() - Established ws connection with healthcheck: ${healthCheck}`,\n      );\n    } catch (error) {\n      this.isHealthy = false;\n      this.consecutiveFailures += 1;\n\n      if (\n        // @ts-expect-error type issue\n        error.code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        this._log(\n          'connect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n        this._reconnect({ refreshToken: true });\n      } else {\n        // @ts-expect-error type issue\n        if (!error.isWSFailure) {\n          // API rejected the connection and we should not retry\n          throw new Error(\n            JSON.stringify({\n              // @ts-expect-error type issue\n              code: error.code,\n              // @ts-expect-error type issue\n              StatusCode: error.StatusCode,\n              // @ts-expect-error type issue\n              message: error.message,\n              // @ts-expect-error type issue\n              isWSFailure: error.isWSFailure,\n            }),\n          );\n        }\n      }\n    }\n\n    return await this._waitForHealthy(timeout);\n  }\n\n  /**\n   * _waitForHealthy polls the promise connection to see if its resolved until it times out\n   * the default 15s timeout allows between 2~3 tries\n   * @param timeout duration(ms)\n   */\n  async _waitForHealthy(timeout = 15000) {\n    return Promise.race([\n      (async () => {\n        const interval = 50; // ms\n        for (let i = 0; i <= timeout; i += interval) {\n          try {\n            return await this.connectionOpen;\n          } catch (error: any) {\n            if (i === timeout) {\n              throw new Error(\n                JSON.stringify({\n                  code: error.code,\n                  StatusCode: error.StatusCode,\n                  message: error.message,\n                  isWSFailure: error.isWSFailure,\n                }),\n              );\n            }\n            await sleep(interval);\n          }\n        }\n      })(),\n      (async () => {\n        await sleep(timeout);\n        this.isConnecting = false;\n        throw new Error(\n          JSON.stringify({\n            code: '',\n            StatusCode: '',\n            message: 'initial WS connection could not be established',\n            isWSFailure: true,\n          }),\n        );\n      })(),\n    ]);\n  }\n\n  /**\n   * Builds and returns the url for websocket.\n   * @private\n   * @returns url string\n   */\n  _buildUrl = () => {\n    const params = new URLSearchParams();\n    params.set('api_key', this.client.key);\n    params.set('stream-auth-type', this.client.getAuthType());\n    params.set('X-Stream-Client', this.client.getUserAgent());\n\n    return `${this.client.wsBaseURL}/connect?${params.toString()}`;\n  };\n\n  /**\n   * disconnect - Disconnect the connection and doesn't recover...\n   *\n   */\n  disconnect(timeout?: number) {\n    this._log(\n      `disconnect() - Closing the websocket connection for wsID ${this.wsID}`,\n    );\n\n    this.wsID += 1;\n    this.isConnecting = false;\n    this.isDisconnected = true;\n\n    // start by removing all the listeners\n    if (this.healthCheckTimeoutRef) {\n      getTimers().clearInterval(this.healthCheckTimeoutRef);\n    }\n    if (this.connectionCheckTimeoutRef) {\n      clearInterval(this.connectionCheckTimeoutRef);\n    }\n\n    removeConnectionEventListeners(this.onlineStatusChanged);\n\n    this.isHealthy = false;\n\n    let isClosedPromise: Promise<void>;\n    // and finally close...\n    // Assigning to local here because we will remove it from this before the\n    // promise resolves.\n    const { ws } = this;\n    if (ws && ws.close && ws.readyState === ws.OPEN) {\n      isClosedPromise = new Promise((resolve) => {\n        const onclose = (event: CloseEvent) => {\n          this._log(\n            `disconnect() - resolving isClosedPromise ${\n              event ? 'with' : 'without'\n            } close frame`,\n            { event },\n          );\n          resolve();\n        };\n\n        ws.onclose = onclose;\n        // In case we don't receive close frame websocket server in time,\n        // lets not wait for more than 1 second.\n        setTimeout(onclose, timeout != null ? timeout : 1000);\n      });\n\n      this._log(\n        `disconnect() - Manually closed connection by calling client.disconnect()`,\n      );\n\n      ws.close(\n        KnownCodes.WS_CLOSED_SUCCESS,\n        'Manually closed connection by calling client.disconnect()',\n      );\n    } else {\n      this._log(\n        `disconnect() - ws connection doesn't exist or it is already closed.`,\n      );\n      isClosedPromise = Promise.resolve();\n    }\n\n    delete this.ws;\n\n    return isClosedPromise;\n  }\n\n  /**\n   * _connect - Connect to the WS endpoint\n   *\n   * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n   */\n  async _connect() {\n    if (this.isConnecting) return; // ignore _connect if it's currently trying to connect\n    this.isConnecting = true;\n    let isTokenReady = false;\n    try {\n      this._log(`_connect() - waiting for token`);\n      await this.client.tokenManager.tokenReady();\n      isTokenReady = true;\n    } catch {\n      // token provider has failed before, so try again\n    }\n\n    try {\n      if (!isTokenReady) {\n        this._log(\n          `_connect() - tokenProvider failed before, so going to retry`,\n        );\n        await this.client.tokenManager.loadToken();\n      }\n\n      if (!this.client.isConnectionIsPromisePending) {\n        this.client._setupConnectionIdPromise();\n      }\n      this._setupConnectionPromise();\n      const wsURL = this._buildUrl();\n      this._log(`_connect() - Connecting to ${wsURL}`);\n      const WS = this.client.options.WebSocketImpl ?? WebSocket;\n      this.ws = new WS(wsURL);\n      this.ws.onopen = this.onopen.bind(this, this.wsID);\n      this.ws.onclose = this.onclose.bind(this, this.wsID);\n      this.ws.onerror = this.onerror.bind(this, this.wsID);\n      this.ws.onmessage = this.onmessage.bind(this, this.wsID);\n      const response = await this.connectionOpen;\n      this.isConnecting = false;\n\n      if (response) {\n        this.connectionID = response.connection_id;\n        this.client.resolveConnectionId?.(this.connectionID);\n        return response;\n      }\n    } catch (err) {\n      this.client._setupConnectionIdPromise();\n      this.isConnecting = false;\n      // @ts-expect-error type issue\n      this._log(`_connect() - Error - `, err);\n      this.client.rejectConnectionId?.(err);\n      throw err;\n    }\n  }\n\n  /**\n   * _reconnect - Retry the connection to WS endpoint\n   *\n   * @param {{ interval?: number; refreshToken?: boolean }} options Following options are available\n   *\n   * - `interval`\t{int}\t\t\tnumber of ms that function should wait before reconnecting\n   * - `refreshToken` {boolean}\treload/refresh user token be refreshed before attempting reconnection.\n   */\n  async _reconnect(\n    options: { interval?: number; refreshToken?: boolean } = {},\n  ): Promise<void> {\n    this._log('_reconnect() - Initiating the reconnect');\n\n    // only allow 1 connection at the time\n    if (this.isConnecting || this.isHealthy) {\n      this._log('_reconnect() - Abort (1) since already connecting or healthy');\n      return;\n    }\n\n    // reconnect in case of on error or on close\n    // also reconnect if the health check cycle fails\n    let interval = options.interval;\n    if (!interval) {\n      interval = retryInterval(this.consecutiveFailures);\n    }\n    // reconnect, or try again after a little while...\n    await sleep(interval);\n\n    // Check once again if by some other call to _reconnect is active or connection is\n    // already restored, then no need to proceed.\n    if (this.isConnecting || this.isHealthy) {\n      this._log('_reconnect() - Abort (2) since already connecting or healthy');\n      return;\n    }\n\n    if (this.isDisconnected) {\n      this._log('_reconnect() - Abort (3) since disconnect() is called');\n      return;\n    }\n\n    this._log('_reconnect() - Destroying current WS connection');\n\n    // cleanup the old connection\n    this._destroyCurrentWSConnection();\n\n    if (options.refreshToken) {\n      await this.client.tokenManager.loadToken();\n    }\n\n    try {\n      await this._connect();\n      this._log('_reconnect() - Waiting for recoverCallBack');\n      // await this.client.recoverState();\n      this._log('_reconnect() - Finished recoverCallBack');\n\n      this.consecutiveFailures = 0;\n    } catch (error: any) {\n      this.isHealthy = false;\n      this.consecutiveFailures += 1;\n      if (\n        error.code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        this._log(\n          '_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n\n        return this._reconnect({ refreshToken: true });\n      }\n\n      // reconnect on WS failures, don't reconnect if there is a code bug\n      if (error.isWSFailure) {\n        this._log('_reconnect() - WS failure, so going to try to reconnect');\n\n        this._reconnect();\n      }\n    }\n    this._log('_reconnect() - == END ==');\n  }\n\n  /**\n   * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n   *\n   * @param {Event} event Event with type online or offline\n   *\n   */\n  onlineStatusChanged = (event: Event) => {\n    if (event.type === 'offline') {\n      // mark the connection as down\n      this._log('onlineStatusChanged() - Status changing to offline');\n      // we know that the app is offline so dispatch the unhealthy connection event immediately\n      this._setHealth(false, true);\n    } else if (event.type === 'online') {\n      // retry right now...\n      // We check this.isHealthy, not sure if it's always\n      // smart to create a new WS connection if the old one is still up and running.\n      // it's possible we didn't miss any messages, so this process is just expensive and not needed.\n      this._log(\n        `onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`,\n      );\n      if (!this.isHealthy) {\n        this._reconnect({ interval: 10 });\n      }\n    }\n  };\n\n  onopen = (wsID: number) => {\n    if (this.wsID !== wsID) return;\n\n    const user = this.client.user;\n    if (!user) {\n      this.client.logger('error', `User not set, can't connect to WS`);\n      return;\n    }\n\n    const token = this.client._getToken();\n    if (!token) {\n      this.client.logger('error', `Token not set, can't connect authenticate`);\n      return;\n    }\n\n    const authMessage = JSON.stringify({\n      token,\n      user_details: {\n        id: user.id,\n        name: user.name,\n        image: user.image,\n        custom: user.custom,\n      },\n    } as WSAuthMessage);\n\n    this._log(`onopen() - Sending auth message ${authMessage}`, {}, 'trace');\n\n    this.ws?.send(authMessage);\n    this._log('onopen() - onopen callback', { wsID });\n  };\n\n  onmessage = (wsID: number, event: MessageEvent) => {\n    if (this.wsID !== wsID) return;\n\n    this._log('onmessage() - onmessage callback', { event, wsID });\n    const data =\n      typeof event.data === 'string'\n        ? (JSON.parse(event.data) as StreamVideoEvent)\n        : null;\n\n    // we wait till the first message before we consider the connection open.\n    // the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n    // after that a ws.onclose.\n    if (\n      !this.isConnectionOpenResolved &&\n      data &&\n      data.type === 'connection.error'\n    ) {\n      this.isConnectionOpenResolved = true;\n      if (data.error) {\n        this.rejectConnectionOpen?.(this._errorFromWSEvent(data, false));\n        return;\n      }\n    }\n\n    // trigger the event..\n    this.lastEvent = new Date();\n\n    if (\n      data &&\n      (data.type === 'health.check' || data.type === 'connection.ok')\n    ) {\n      // the initial health-check should come from the client\n      this.scheduleNextPing();\n    }\n\n    if (data && data.type === 'connection.ok') {\n      this.resolveConnectionOpen?.(data);\n      this._setHealth(true);\n    }\n\n    if (data && data.type === 'connection.error' && data.error) {\n      const { code } = data.error;\n      this.isHealthy = false;\n      this.isConnecting = false;\n      this.consecutiveFailures += 1;\n      if (\n        code === KnownCodes.TOKEN_EXPIRED &&\n        !this.client.tokenManager.isStatic()\n      ) {\n        clearTimeout(this.connectionCheckTimeoutRef);\n        this._log(\n          'connect() - WS failure due to expired token, so going to try to reload token and reconnect',\n        );\n        this._reconnect({ refreshToken: true });\n      }\n    }\n\n    if (data) {\n      data.received_at = new Date();\n      this.client.dispatchEvent(data);\n    }\n    this.scheduleConnectionCheck();\n  };\n\n  onclose = (wsID: number, event: CloseEvent) => {\n    if (this.wsID !== wsID) return;\n\n    this._log('onclose() - onclose callback - ' + event.code, { event, wsID });\n\n    if (event.code === KnownCodes.WS_CLOSED_SUCCESS) {\n      // this is a permanent error raised by stream..\n      // usually caused by invalid auth details\n      const error = new Error(\n        `WS connection reject with error ${event.reason}`,\n      );\n\n      // @ts-expect-error type issue\n      error.reason = event.reason;\n      // @ts-expect-error type issue\n      error.code = event.code;\n      // @ts-expect-error type issue\n      error.wasClean = event.wasClean;\n      // @ts-expect-error type issue\n      error.target = event.target;\n\n      this.rejectConnectionOpen?.(error);\n      this._log(`onclose() - WS connection reject with error ${event.reason}`, {\n        event,\n      });\n    } else {\n      this.consecutiveFailures += 1;\n      this.totalFailures += 1;\n      this._setHealth(false);\n      this.isConnecting = false;\n\n      this.rejectConnectionOpen?.(this._errorFromWSEvent(event));\n\n      this._log(`onclose() - WS connection closed. Calling reconnect ...`, {\n        event,\n      });\n\n      // reconnect if its an abnormal failure\n      this._reconnect();\n    }\n  };\n\n  onerror = (wsID: number, event: Event) => {\n    if (this.wsID !== wsID) return;\n\n    this.consecutiveFailures += 1;\n    this.totalFailures += 1;\n    this._setHealth(false);\n    this.isConnecting = false;\n    this.rejectConnectionOpen?.(new Error(`WebSocket error: ${event}`));\n    this._log(`onerror() - WS connection resulted into error`, { event });\n\n    this._reconnect();\n  };\n\n  /**\n   * _setHealth - Sets the connection to healthy or unhealthy.\n   * Broadcasts an event in case the connection status changed.\n   *\n   * @param {boolean} healthy boolean indicating if the connection is healthy or not\n   * @param {boolean} dispatchImmediately boolean indicating to dispatch event immediately even if the connection is unhealthy\n   */\n  _setHealth = (healthy: boolean, dispatchImmediately = false) => {\n    if (healthy === this.isHealthy) return;\n\n    this.isHealthy = healthy;\n\n    if (this.isHealthy || dispatchImmediately) {\n      this.client.dispatchEvent({\n        type: 'connection.changed',\n        online: this.isHealthy,\n      });\n      return;\n    }\n\n    // we're offline, wait few seconds and fire and event if still offline\n    setTimeout(() => {\n      if (this.isHealthy) return;\n      this.client.dispatchEvent({\n        type: 'connection.changed',\n        online: this.isHealthy,\n      });\n    }, 5000);\n  };\n\n  /**\n   * _errorFromWSEvent - Creates an error object for the WS event\n   */\n  private _errorFromWSEvent = (\n    event: CloseEvent | ConnectionErrorEvent,\n    isWSFailure = true,\n  ) => {\n    let code: number;\n    let statusCode: number;\n    let message: string;\n    if (isCloseEvent(event)) {\n      code = event.code;\n      message = event.reason;\n      statusCode = 0;\n    } else {\n      const { error } = event;\n      code = error.code;\n      message = error.message;\n      statusCode = error.StatusCode;\n    }\n\n    const msg = `WS failed with code: ${code} and reason: ${message}`;\n    this._log(msg, { event }, 'warn');\n    const error = new Error(msg) as Error & {\n      code?: number;\n      isWSFailure?: boolean;\n      StatusCode?: number;\n    };\n    error.code = code;\n    /**\n     * StatusCode does not exist on any event types but has been left\n     * as is to preserve JS functionality during the TS implementation\n     */\n    error.StatusCode = statusCode;\n    error.isWSFailure = isWSFailure;\n    return error;\n  };\n\n  /**\n   * _destroyCurrentWSConnection - Removes the current WS connection\n   *\n   */\n  _destroyCurrentWSConnection() {\n    // increment the ID, meaning we will ignore all messages from the old\n    // ws connection from now on.\n    this.wsID += 1;\n\n    try {\n      this?.ws?.close();\n    } catch {\n      // we don't care\n    }\n  }\n\n  /**\n   * _setupPromise - sets up the this.connectOpen promise\n   */\n  _setupConnectionPromise = () => {\n    this.isConnectionOpenResolved = false;\n    /** a promise that is resolved once ws.open is called */\n    this.connectionOpenSafe = makeSafePromise(\n      new Promise<ConnectedEvent>((resolve, reject) => {\n        this.resolveConnectionOpen = resolve;\n        this.rejectConnectionOpen = reject;\n      }),\n    );\n  };\n\n  get connectionOpen() {\n    return this.connectionOpenSafe?.();\n  }\n\n  /**\n   * Schedules a next health check ping for websocket.\n   */\n  scheduleNextPing = () => {\n    const timers = getTimers();\n    if (this.healthCheckTimeoutRef) {\n      timers.clearTimeout(this.healthCheckTimeoutRef);\n    }\n\n    // 30 seconds is the recommended interval (messenger uses this)\n    this.healthCheckTimeoutRef = timers.setTimeout(() => {\n      // send the healthcheck..., server replies with a health check event\n      const data = [{ type: 'health.check', client_id: this.client.clientID }];\n      // try to send on the connection\n      try {\n        this.ws?.send(JSON.stringify(data));\n      } catch {\n        // error will already be detected elsewhere\n      }\n    }, this.pingInterval);\n  };\n\n  /**\n   * scheduleConnectionCheck - schedules a check for time difference between last received event and now.\n   * If the difference is more than 35 seconds, it means our health check logic has failed and websocket needs\n   * to be reconnected.\n   */\n  scheduleConnectionCheck = () => {\n    clearTimeout(this.connectionCheckTimeoutRef);\n    this.connectionCheckTimeoutRef = setTimeout(() => {\n      const now = new Date();\n      if (\n        this.lastEvent &&\n        now.getTime() - this.lastEvent.getTime() > this.connectionCheckTimeout\n      ) {\n        this._log('scheduleConnectionCheck - going to reconnect');\n        this._setHealth(false);\n        this._reconnect();\n      }\n    }, this.connectionCheckTimeout);\n  };\n}\n","export function getUserFromToken(token: string) {\n  const fragments = token.split('.');\n  if (fragments.length !== 3) {\n    return '';\n  }\n  const b64Payload = fragments[1];\n  const payload = decodeBase64(b64Payload);\n  const data = JSON.parse(payload);\n  return data.user_id as string | undefined;\n}\n\n// base-64 decoder throws exception if encoded string is not padded by '=' to make string length\n// in multiples of 4. So gonna use our own method for this purpose to keep backwards compatibility\n// https://github.com/beatgammit/base64-js/blob/master/index.js#L26\nconst decodeBase64 = (s: string): string => {\n  const e = {} as { [key: string]: number },\n    w = String.fromCharCode,\n    L = s.length;\n  let i,\n    b = 0,\n    c,\n    x,\n    l = 0,\n    a,\n    r = '';\n  const A = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (i = 0; i < 64; i++) {\n    e[A.charAt(i)] = i;\n  }\n  for (x = 0; x < L; x++) {\n    c = e[s.charAt(x)];\n    b = (b << 6) + c;\n    l += 6;\n    while (l >= 8) {\n      if ((a = (b >>> (l -= 8)) & 0xff) || x < L - 2) r += w(a);\n    }\n  }\n  return r;\n};\n","import { getUserFromToken } from './signing';\nimport { isFunction } from './utils';\nimport type { TokenOrProvider, UserWithId } from './types';\n\n/**\n * TokenManager\n *\n * Handles all the operations around user token.\n */\nexport class TokenManager {\n  private loadTokenPromise: Promise<string> | null = null;\n  private type: 'static' | 'provider' = 'static';\n  private readonly secret?: string;\n  private token?: string;\n  private tokenProvider?: TokenOrProvider;\n  private user?: UserWithId;\n  private isAnonymous?: boolean;\n\n  constructor(secret?: string) {\n    this.secret = secret;\n  }\n\n  /**\n   * Set the static string token or token provider.\n   * Token provider should return a token string or a promise which resolves to string token.\n   *\n   * @param {TokenOrProvider} tokenOrProvider - the token or token provider.\n   * @param {UserResponse} user - the user object.\n   * @param {boolean} isAnonymous - whether the user is anonymous or not.\n   */\n  setTokenOrProvider = async (\n    tokenOrProvider: TokenOrProvider,\n    user: UserWithId,\n    isAnonymous: boolean,\n  ) => {\n    this.user = user;\n    this.isAnonymous = isAnonymous;\n    this.validateToken(tokenOrProvider);\n\n    if (isFunction(tokenOrProvider)) {\n      this.tokenProvider = tokenOrProvider;\n      this.type = 'provider';\n    }\n\n    if (typeof tokenOrProvider === 'string') {\n      this.token = tokenOrProvider;\n      this.type = 'static';\n    }\n\n    await this.loadToken();\n  };\n\n  /**\n   * Resets the token manager.\n   * Useful for client disconnection or switching user.\n   */\n  reset = () => {\n    this.token = undefined;\n    this.tokenProvider = undefined;\n    this.type = 'static';\n    this.user = undefined;\n    this.loadTokenPromise = null;\n  };\n\n  // Validates the user token.\n  validateToken = (tokenOrProvider: TokenOrProvider) => {\n    // allow empty token for anon user\n    if (this.user && this.isAnonymous && !tokenOrProvider) return;\n\n    // Don't allow empty token for non-server side client.\n    if (!this.secret && !tokenOrProvider) {\n      throw new Error('User token can not be empty');\n    }\n\n    if (typeof tokenOrProvider !== 'string' && !isFunction(tokenOrProvider)) {\n      throw new Error('User token should either be a string or a function');\n    }\n\n    if (typeof tokenOrProvider === 'string') {\n      // Allow empty token for anonymous users\n      if (this.isAnonymous && tokenOrProvider === '') return;\n\n      const tokenUserId = getUserFromToken(tokenOrProvider);\n      if (\n        tokenOrProvider != null &&\n        (tokenUserId == null ||\n          tokenUserId === '' ||\n          (!this.isAnonymous && tokenUserId !== this.user!.id))\n      ) {\n        throw new Error(\n          'userToken does not have a user_id or is not matching with user.id',\n        );\n      }\n    }\n  };\n\n  // Resolves when token is ready. This function is simply to check if loadToken is in progress, in which\n  // case a function should wait.\n  tokenReady = () => this.loadTokenPromise;\n\n  // Fetches a token from tokenProvider function and sets in tokenManager.\n  // In case of static token, it will simply resolve to static token.\n  loadToken = () => {\n    this.loadTokenPromise = new Promise(async (resolve, reject) => {\n      if (this.type === 'static') {\n        return resolve(this.token as string);\n      }\n\n      if (this.tokenProvider && typeof this.tokenProvider !== 'string') {\n        try {\n          const token = await this.tokenProvider();\n          this.validateToken(token);\n          this.token = token;\n        } catch (e) {\n          return reject(\n            new Error(`Call to tokenProvider failed with message: ${e}`),\n          );\n        }\n        resolve(this.token);\n      }\n    });\n\n    return this.loadTokenPromise;\n  };\n\n  // Returns a current token\n  getToken = () => {\n    if (this.token) {\n      return this.token;\n    }\n\n    if (this.user && !this.token) {\n      return this.token;\n    }\n\n    throw new Error(\n      `User token is not set. Either client.connectUser wasn't called or client.disconnect was called`,\n    );\n  };\n\n  isStatic = () => this.type === 'static';\n}\n","import { getLogger } from '../../logger';\n\nexport const getLocationHint = async (\n  hintUrl = `https://hint.stream-io-video.com/`,\n  timeout = 2000,\n  maxAttempts = 3,\n): Promise<string> => {\n  const logger = getLogger(['location-hint']);\n\n  let attempt = 0;\n  let locationHint = 'ERR';\n  do {\n    const abortController = new AbortController();\n    const timeoutId = setTimeout(() => abortController.abort(), timeout);\n    try {\n      const response = await fetch(hintUrl, {\n        method: 'HEAD',\n        signal: abortController.signal,\n      });\n      const awsPop = response.headers.get('x-amz-cf-pop') || 'ERR';\n      logger('debug', `Location header: ${awsPop}`);\n      locationHint = awsPop.substring(0, 3); // AMS1-P2 -> AMS\n    } catch (e) {\n      logger('warn', `Failed to get location hint from ${hintUrl}`, e);\n      locationHint = 'ERR';\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  } while (locationHint === 'ERR' && ++attempt < maxAttempts);\n\n  return locationHint;\n};\n","import axios, {\n  AxiosError,\n  AxiosInstance,\n  AxiosRequestConfig,\n  AxiosResponse,\n} from 'axios';\nimport https from 'https';\nimport { StableWSConnection } from './connection';\nimport { TokenManager } from './token_manager';\nimport {\n  addConnectionEventListeners,\n  generateUUIDv4,\n  isErrorResponse,\n  isFunction,\n  KnownCodes,\n  removeConnectionEventListeners,\n  retryInterval,\n  sleep,\n} from './utils';\nimport {\n  AllClientEvents,\n  AllClientEventTypes,\n  APIErrorResponse,\n  ClientEventListener,\n  ConnectAPIResponse,\n  ErrorFromResponse,\n  Logger,\n  StreamClientOptions,\n  StreamVideoEvent,\n  TokenOrProvider,\n  User,\n  UserWithId,\n} from './types';\nimport { getLocationHint } from './location';\nimport {\n  ConnectedEvent,\n  CreateGuestRequest,\n  CreateGuestResponse,\n} from '../../gen/coordinator';\nimport { makeSafePromise, type SafePromise } from '../../helpers/promise';\nimport { getLogLevel } from '../../logger';\n\nexport class StreamClient {\n  _user?: UserWithId;\n  anonymous: boolean;\n  persistUserOnConnectionFailure?: boolean;\n  axiosInstance: AxiosInstance;\n  baseURL?: string;\n  browser: boolean;\n  clientID?: string;\n  key: string;\n  listeners: Partial<\n    Record<AllClientEventTypes, ClientEventListener<any>[] | undefined>\n  > = {};\n  logger: Logger;\n\n  private locationHint: Promise<string> | undefined;\n\n  node: boolean;\n  options: StreamClientOptions;\n  secret?: string;\n  connectUserTask: ConnectAPIResponse | null;\n  tokenManager: TokenManager;\n  user?: UserWithId;\n  private cachedUserAgent?: string;\n  userID?: string;\n  wsBaseURL?: string;\n  wsConnection: StableWSConnection | null;\n  private wsPromiseSafe: SafePromise<ConnectedEvent | undefined> | null;\n  consecutiveFailures: number;\n  defaultWSTimeout: number;\n  resolveConnectionId?: Function;\n  rejectConnectionId?: Function;\n  private connectionIdPromiseSafe?: SafePromise<string | undefined>;\n  guestUserCreatePromise?: Promise<CreateGuestResponse>;\n\n  /**\n   * Initialize a client.\n   *\n   * @param {string} key - the api key\n   * @param {StreamClientOptions} [options] - additional options, here you can pass custom options to axios instance\n   * @param {string} [options.secret] - the api secret\n   * @param {boolean} [options.browser] - enforce the client to be in browser mode\n   * @param {boolean} [options.warmUp] - default to false, if true, client will open a connection as soon as possible to speed up following requests\n   * @param {Logger} [options.Logger] - custom logger\n   * @param {number} [options.timeout] - default to 3000\n   * @param {httpsAgent} [options.httpsAgent] - custom httpsAgent, in node it's default to https.agent()\n   */\n  constructor(key: string, options?: StreamClientOptions) {\n    // set the key\n    this.key = key;\n\n    // set the secret\n    this.secret = options?.secret;\n\n    // set the options... and figure out defaults...\n    const inputOptions = options\n      ? options\n      : ({\n          browser: typeof window !== 'undefined',\n        } as Partial<StreamClientOptions>);\n\n    this.browser = inputOptions.browser || typeof window !== 'undefined';\n    this.node = !this.browser;\n\n    if (this.browser) {\n      this.locationHint = getLocationHint(\n        options?.locationHintUrl,\n        options?.locationHintTimeout,\n        options?.locationHintMaxAttempts,\n      );\n    }\n\n    this.options = {\n      timeout: 5000,\n      withCredentials: false, // making sure cookies are not sent\n      ...inputOptions,\n    };\n\n    if (this.node && !this.options.httpsAgent) {\n      this.options.httpsAgent = new https.Agent({\n        keepAlive: true,\n        keepAliveMsecs: 3000,\n      });\n    }\n\n    this.setBaseURL(\n      this.options.baseURL || 'https://video.stream-io-api.com/video',\n    );\n\n    this.axiosInstance = axios.create({\n      ...this.options,\n      baseURL: this.baseURL,\n    });\n\n    // WS connection is initialized when setUser is called\n    this.wsConnection = null;\n    this.wsPromiseSafe = null;\n    this.connectUserTask = null;\n\n    // mapping between channel groups and configs\n    this.anonymous = false;\n    this.persistUserOnConnectionFailure =\n      this.options?.persistUserOnConnectionFailure;\n\n    // If it is a server-side client, then lets initialize the tokenManager, since token will be\n    // generated from secret.\n    this.tokenManager = new TokenManager(this.secret);\n    this.consecutiveFailures = 0;\n\n    this.defaultWSTimeout = this.options.defaultWsTimeout ?? 15000;\n\n    this.logger = isFunction(inputOptions.logger)\n      ? inputOptions.logger\n      : () => null;\n  }\n\n  getAuthType = () => {\n    return this.anonymous ? 'anonymous' : 'jwt';\n  };\n\n  setBaseURL = (baseURL: string) => {\n    this.baseURL = baseURL;\n    this.wsBaseURL = this.baseURL\n      .replace('http', 'ws')\n      .replace(':3030', ':8800');\n  };\n\n  getLocationHint = async (\n    hintUrl?: string,\n    timeout?: number,\n  ): Promise<string> => {\n    const hint = await this.locationHint;\n    if (!hint || hint === 'ERR') {\n      this.locationHint = getLocationHint(\n        hintUrl ?? this.options.locationHintUrl,\n        timeout ?? this.options.locationHintTimeout,\n      );\n      return this.locationHint;\n    }\n    return hint;\n  };\n\n  _getConnectionID = () => this.wsConnection?.connectionID;\n\n  _hasConnectionID = () => Boolean(this._getConnectionID());\n\n  /**\n   * connectUser - Set the current user and open a WebSocket connection\n   *\n   * @param user Data about this user. IE {name: \"john\"}\n   * @param {TokenOrProvider} tokenOrProvider Token or provider\n   *\n   * @return {ConnectAPIResponse} Returns a promise that resolves when the connection is setup\n   */\n  connectUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ): ConnectAPIResponse => {\n    if (!user.id) {\n      throw new Error('The \"id\" field on the user is missing');\n    }\n\n    /**\n     * Calling connectUser multiple times is potentially the result of a  bad integration, however,\n     * If the user id remains the same we don't throw error\n     */\n    if (this.userID === user.id && this.connectUserTask) {\n      this.logger(\n        'warn',\n        'Consecutive calls to connectUser is detected, ideally you should only call this function once in your app.',\n      );\n      return this.connectUserTask;\n    }\n\n    if (this.userID) {\n      throw new Error(\n        'Use client.disconnect() before trying to connect as a different user. connectUser was called twice.',\n      );\n    }\n\n    if ((this.secret || this.node) && !this.options.allowServerSideConnect) {\n      this.logger(\n        'warn',\n        'Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/',\n      );\n    }\n\n    // we generate the client id client side\n    this.userID = user.id;\n    this.anonymous = false;\n    await this.tokenManager.setTokenOrProvider(tokenOrProvider, user, false);\n    this._setUser(user);\n\n    this.connectUserTask = this.openConnection();\n\n    try {\n      addConnectionEventListeners(this.updateNetworkConnectionStatus);\n      return await this.connectUserTask;\n    } catch (err) {\n      if (this.persistUserOnConnectionFailure) {\n        // cleanup client to allow the user to retry connectUser again\n        await this.closeConnection();\n      } else {\n        await this.disconnectUser();\n      }\n      throw err;\n    }\n  };\n\n  _setUser = (user: UserWithId) => {\n    /**\n     * This one is used by the frontend. This is a copy of the current user object stored on backend.\n     * It contains reserved properties and own user properties which are not present in `this._user`.\n     */\n    this.user = user;\n    this.userID = user.id;\n    // this one is actually used for requests. This is a copy of current user provided to `connectUser` function.\n    this._user = { ...user };\n  };\n\n  /**\n   * Disconnects the websocket connection, without removing the user set on client.\n   * client.closeConnection will not trigger default auto-retry mechanism for reconnection. You need\n   * to call client.openConnection to reconnect to websocket.\n   *\n   * This is mainly useful on mobile side. You can only receive push notifications\n   * if you don't have active websocket connection.\n   * So when your app goes to background, you can call `client.closeConnection`.\n   * And when app comes back to foreground, call `client.openConnection`.\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming succesful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  closeConnection = async (timeout?: number) => {\n    await this.wsConnection?.disconnect(timeout);\n  };\n\n  /**\n   * Creates a new WebSocket connection with the current user. Returns empty promise, if there is an active connection\n   */\n  openConnection = async () => {\n    if (!this.userID) {\n      throw Error(\n        'UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead',\n      );\n    }\n\n    const wsPromise = this.wsPromiseSafe?.();\n    if (this.wsConnection?.isConnecting && wsPromise) {\n      this.logger(\n        'info',\n        'client:openConnection() - connection already in progress',\n      );\n      return await wsPromise;\n    }\n\n    if (this.wsConnection?.isHealthy && this._hasConnectionID()) {\n      this.logger(\n        'info',\n        'client:openConnection() - openConnection called twice, healthy connection already exists',\n      );\n\n      return;\n    }\n\n    this._setupConnectionIdPromise();\n\n    this.clientID = `${this.userID}--${generateUUIDv4()}`;\n    const newWsPromise = this.connect();\n    this.wsPromiseSafe = makeSafePromise(newWsPromise);\n    return await newWsPromise;\n  };\n\n  /**\n   * Disconnects the websocket and removes the user from client.\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  disconnectUser = async (timeout?: number) => {\n    this.logger('info', 'client:disconnect() - Disconnecting the client');\n\n    // remove the user specific fields\n    delete this.user;\n    delete this._user;\n    delete this.userID;\n\n    this.anonymous = false;\n\n    await this.closeConnection(timeout);\n    removeConnectionEventListeners(this.updateNetworkConnectionStatus);\n\n    this.tokenManager.reset();\n\n    this.connectionIdPromiseSafe = undefined;\n    this.rejectConnectionId = undefined;\n    this.resolveConnectionId = undefined;\n  };\n\n  connectGuestUser = async (user: User & { type: 'guest' }) => {\n    this.guestUserCreatePromise = this.doAxiosRequest<\n      CreateGuestResponse,\n      CreateGuestRequest\n    >('post', '/guest', { user }, { publicEndpoint: true });\n\n    const response = await this.guestUserCreatePromise;\n    this.guestUserCreatePromise.finally(\n      () => (this.guestUserCreatePromise = undefined),\n    );\n\n    return this.connectUser(response.user, response.access_token);\n  };\n\n  /**\n   * connectAnonymousUser - Set an anonymous user and open a WebSocket connection\n   */\n  connectAnonymousUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ) => {\n    addConnectionEventListeners(this.updateNetworkConnectionStatus);\n    this._setupConnectionIdPromise();\n\n    this.anonymous = true;\n    await this.tokenManager.setTokenOrProvider(tokenOrProvider, user, true);\n\n    this._setUser(user);\n    // some endpoints require a connection_id to be resolved.\n    // as anonymous users aren't allowed to open WS connections, we just\n    // resolve the connection_id here.\n    this.resolveConnectionId?.();\n  };\n\n  /**\n   * on - Listen to events on all channels and users your watching\n   *\n   * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n   *\n   * @param eventName The event type to listen for (optional)\n   * @param callback The callback to call\n   *\n   * @return  Returns a function which, when called, unsubscribes the event handler.\n   */\n  on = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.logger('debug', `Adding listener for ${eventName} event`);\n    this.listeners[eventName]?.push(callback as ClientEventListener<any>);\n    return () => {\n      this.off(eventName, callback);\n    };\n  };\n\n  /**\n   * off - Remove the event handler\n   */\n  off = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.logger('debug', `Removing listener for ${eventName} event`);\n    this.listeners[eventName] = this.listeners[eventName]?.filter(\n      (value) => value !== callback,\n    );\n  };\n\n  /**\n   * sets up the this.connectionIdPromise\n   */\n  _setupConnectionIdPromise = () => {\n    /** a promise that is resolved once connection id is set */\n    this.connectionIdPromiseSafe = makeSafePromise(\n      new Promise<string | undefined>((resolve, reject) => {\n        this.resolveConnectionId = resolve;\n        this.rejectConnectionId = reject;\n      }),\n    );\n  };\n\n  get connectionIdPromise() {\n    return this.connectionIdPromiseSafe?.();\n  }\n\n  get isConnectionIsPromisePending() {\n    return this.connectionIdPromiseSafe?.checkPending() ?? false;\n  }\n\n  get wsPromise() {\n    return this.wsPromiseSafe?.();\n  }\n\n  _logApiRequest = (\n    type: string,\n    url: string,\n    data: unknown,\n    config: AxiosRequestConfig & {\n      config?: AxiosRequestConfig & { maxBodyLength?: number };\n    },\n  ) => {\n    if (getLogLevel() !== 'trace') return;\n    this.logger('trace', `client: ${type} - Request - ${url}`, {\n      payload: data,\n      config,\n    });\n  };\n\n  _logApiResponse = <T>(\n    type: string,\n    url: string,\n    response: AxiosResponse<T>,\n  ) => {\n    if (getLogLevel() !== 'trace') return;\n    this.logger(\n      'trace',\n      `client:${type} - Response - url: ${url} > status ${response.status}`,\n      {\n        response,\n      },\n    );\n  };\n\n  _logApiError = (type: string, url: string, error: unknown) => {\n    this.logger('error', `client:${type} - Error - url: ${url}`, {\n      url,\n      error,\n    });\n  };\n\n  doAxiosRequest = async <T, D = unknown>(\n    type: string,\n    url: string,\n    data?: D,\n    options: AxiosRequestConfig & {\n      config?: AxiosRequestConfig & { maxBodyLength?: number };\n    } & { publicEndpoint?: boolean } = {},\n  ): Promise<T> => {\n    if (!options.publicEndpoint) {\n      await Promise.all([\n        this.tokenManager.tokenReady(),\n        this.guestUserCreatePromise,\n      ]);\n      // we need to wait for presence of connection id before making requests\n      try {\n        await this.connectionIdPromise;\n      } catch {\n        // in case connection id was rejected\n        // reconnection maybe in progress\n        // we can wait for healthy connection to resolve, which rejects when 15s timeout is reached\n        await this.wsConnection?._waitForHealthy();\n        await this.connectionIdPromise;\n      }\n    }\n    const requestConfig = this._enrichAxiosOptions(options);\n    try {\n      let response: AxiosResponse<T>;\n      this._logApiRequest(type, url, data, requestConfig);\n      switch (type) {\n        case 'get':\n          response = await this.axiosInstance.get(url, requestConfig);\n          break;\n        case 'delete':\n          response = await this.axiosInstance.delete(url, requestConfig);\n          break;\n        case 'post':\n          response = await this.axiosInstance.post(url, data, requestConfig);\n          break;\n        case 'put':\n          response = await this.axiosInstance.put(url, data, requestConfig);\n          break;\n        case 'patch':\n          response = await this.axiosInstance.patch(url, data, requestConfig);\n          break;\n        case 'options':\n          response = await this.axiosInstance.options(url, requestConfig);\n          break;\n        default:\n          throw new Error('Invalid request type');\n      }\n      this._logApiResponse<T>(type, url, response);\n      this.consecutiveFailures = 0;\n      return this.handleResponse(response);\n    } catch (e: any /**TODO: generalize error types  */) {\n      e.client_request_id = requestConfig.headers?.['x-client-request-id'];\n      this.consecutiveFailures += 1;\n      if (e.response) {\n        this._logApiError(type, url, e.response);\n        /** connection_fallback depends on this token expiration logic */\n        if (\n          e.response.data.code === KnownCodes.TOKEN_EXPIRED &&\n          !this.tokenManager.isStatic()\n        ) {\n          if (this.consecutiveFailures > 1) {\n            await sleep(retryInterval(this.consecutiveFailures));\n          }\n          await this.tokenManager.loadToken();\n          return await this.doAxiosRequest<T, D>(type, url, data, options);\n        }\n        return this.handleResponse(e.response);\n      } else {\n        this._logApiError(type, url, e);\n\n        throw e as AxiosError<APIErrorResponse>;\n      }\n    }\n  };\n\n  get = <T>(url: string, params?: AxiosRequestConfig['params']) => {\n    return this.doAxiosRequest<T, unknown>('get', url, null, {\n      params,\n    });\n  };\n\n  put = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('put', url, data, { params });\n  };\n\n  post = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('post', url, data, { params });\n  };\n\n  patch = <T, D = unknown>(\n    url: string,\n    data?: D,\n    params?: AxiosRequestConfig['params'],\n  ) => {\n    return this.doAxiosRequest<T, D>('patch', url, data, { params });\n  };\n\n  delete = <T>(url: string, params?: AxiosRequestConfig['params']) => {\n    return this.doAxiosRequest<T, unknown>('delete', url, null, {\n      params,\n    });\n  };\n\n  errorFromResponse = (\n    response: AxiosResponse<APIErrorResponse>,\n  ): ErrorFromResponse<APIErrorResponse> => {\n    const { data, status } = response;\n    return new ErrorFromResponse<APIErrorResponse>({\n      message: `Stream error code ${data.code}: ${data.message}`,\n      code: data.code ?? null,\n      unrecoverable: data.unrecoverable ?? null,\n      response: response,\n      status: status,\n    });\n  };\n\n  handleResponse = <T>(response: AxiosResponse<T>) => {\n    const data = response.data;\n    if (isErrorResponse(response)) {\n      throw this.errorFromResponse(response);\n    }\n    return data;\n  };\n\n  dispatchEvent = (event: StreamVideoEvent) => {\n    this.logger('debug', `Dispatching event: ${event.type}`, event);\n    if (!this.listeners) return;\n\n    // call generic listeners\n    for (const listener of this.listeners.all || []) {\n      listener(event);\n    }\n\n    // call type specific listeners\n    for (const listener of this.listeners[event.type] || []) {\n      listener(event);\n    }\n  };\n\n  /**\n   * @private\n   */\n  connect = async () => {\n    if (!this.userID || !this._user) {\n      throw Error(\n        'Call connectUser or connectAnonymousUser before starting the connection',\n      );\n    }\n    if (!this.wsBaseURL) throw Error('Websocket base url not set');\n    if (!this.clientID) throw Error('clientID is not set');\n\n    // The StableWSConnection handles all the reconnection logic.\n    this.wsConnection = new StableWSConnection(this);\n\n    this.logger('info', 'StreamClient.connect: this.wsConnection.connect()');\n    return await this.wsConnection.connect(this.defaultWSTimeout);\n  };\n\n  getUserAgent = (): string => {\n    if (!this.cachedUserAgent) {\n      const { clientAppIdentifier = {} } = this.options;\n      const {\n        sdkName = 'js',\n        sdkVersion = process.env.PKG_VERSION || '0.0.0',\n        ...extras\n      } = clientAppIdentifier;\n\n      this.cachedUserAgent = [\n        `stream-video-${sdkName}-v${sdkVersion}`,\n        ...Object.entries(extras).map(([key, value]) => `${key}=${value}`),\n        `client_bundle=${process.env.CLIENT_BUNDLE || (this.node ? 'node' : 'browser')}`,\n      ].join('|');\n    }\n\n    return this.cachedUserAgent;\n  };\n\n  _enrichAxiosOptions = (\n    options: AxiosRequestConfig & { config?: AxiosRequestConfig } & {\n      publicEndpoint?: boolean;\n    } = {\n      params: {},\n      headers: {},\n      config: {},\n    },\n  ): AxiosRequestConfig => {\n    const token =\n      options.publicEndpoint && !this.user ? undefined : this._getToken();\n    const authorization = token ? { Authorization: token } : undefined;\n\n    if (!options.headers?.['x-client-request-id']) {\n      options.headers = {\n        ...options.headers,\n        'x-client-request-id': generateUUIDv4(),\n      };\n    }\n\n    return {\n      params: {\n        user_id: this.userID,\n        connection_id: this._getConnectionID(),\n        api_key: this.key,\n        ...options.params,\n      },\n      headers: {\n        ...authorization,\n        'stream-auth-type':\n          options.publicEndpoint && !this.user\n            ? 'anonymous'\n            : this.getAuthType(),\n        'X-Stream-Client': this.getUserAgent(),\n        ...options.headers,\n      },\n      ...options.config,\n      ...this.options.axiosRequestConfig,\n    };\n  };\n\n  _getToken = () => {\n    if (!this.tokenManager) return null;\n\n    return this.tokenManager.getToken();\n  };\n\n  updateNetworkConnectionStatus = (\n    event: { type: 'online' | 'offline' } | Event,\n  ) => {\n    if (event.type === 'offline') {\n      this.logger('debug', 'device went offline');\n      this.dispatchEvent({ type: 'network.changed', online: false });\n    } else if (event.type === 'online') {\n      this.logger('debug', 'device went online');\n      this.dispatchEvent({ type: 'network.changed', online: true });\n    }\n  };\n}\n","export default null;","import type {\n  ClientAppIdentifier,\n  StreamClientOptions,\n  TokenOrProvider,\n  User,\n} from '../coordinator/connection/types';\nimport { getLogger } from '../logger';\nimport { StreamClient } from '../coordinator/connection/client';\nimport { getSdkInfo } from './client-details';\nimport { SdkType } from '../gen/video/sfu/models/models';\nimport type { StreamVideoClientOptions } from '../StreamVideoClient';\n\n/**\n * Utility function to get the instance key.\n */\nexport const getInstanceKey = (apiKey: string, user: User) => {\n  return `${apiKey}/${user.id}`;\n};\n\n/**\n * Utility function to get the client app identifier.\n */\nconst getClientAppIdentifier = (\n  options?: StreamClientOptions,\n): ClientAppIdentifier => {\n  const appId = options?.clientAppIdentifier || {};\n  const sdkInfo = getSdkInfo();\n  if (sdkInfo) {\n    // ensure the sdk name and version are set correctly,\n    // overriding any user-provided values\n    appId.sdkName = SdkType[sdkInfo.type].toLowerCase();\n    appId.sdkVersion = `${sdkInfo.major}.${sdkInfo.minor}.${sdkInfo.patch}`;\n  }\n  return appId;\n};\n\n/**\n * Creates a coordinator client.\n */\nexport const createCoordinatorClient = (\n  apiKey: string,\n  options: StreamClientOptions | undefined,\n) => {\n  const clientAppIdentifier = getClientAppIdentifier(options);\n  const coordinatorLogger = getLogger(['coordinator']);\n  return new StreamClient(apiKey, {\n    persistUserOnConnectionFailure: true,\n    ...options,\n    clientAppIdentifier,\n    logger: coordinatorLogger,\n  });\n};\n\n/**\n * Creates a token provider and allows integrators to provide\n * a static token and a token provider at the same time.\n *\n * When both of them are provided, this function will create an internal\n * token provider that will use the static token on the first invocation\n * and the token provider on the later invocations.\n */\nexport const createTokenOrProvider = (\n  options: StreamVideoClientOptions,\n): TokenOrProvider => {\n  const { token, tokenProvider } = options;\n  if (token && tokenProvider) {\n    let initialTokenUsed = false;\n    return async function wrappedTokenProvider(): Promise<string> {\n      if (!initialTokenUsed) {\n        initialTokenUsed = true;\n        return token;\n      }\n      return tokenProvider();\n    };\n  }\n  return token || tokenProvider;\n};\n","import { Call } from './Call';\nimport { StreamClient } from './coordinator/connection/client';\nimport {\n  StreamVideoReadOnlyStateStore,\n  StreamVideoWriteableStateStore,\n} from './store';\nimport type {\n  ConnectedEvent,\n  CreateDeviceRequest,\n  CreateGuestRequest,\n  CreateGuestResponse,\n  GetEdgesResponse,\n  ListDevicesResponse,\n  QueryAggregateCallStatsRequest,\n  QueryAggregateCallStatsResponse,\n  QueryCallsRequest,\n  QueryCallsResponse,\n  QueryCallStatsRequest,\n  QueryCallStatsResponse,\n} from './gen/coordinator';\nimport {\n  AllClientEvents,\n  ClientEventListener,\n  Logger,\n  StreamClientOptions,\n  TokenOrProvider,\n  TokenProvider,\n  User,\n  UserWithId,\n} from './coordinator/connection/types';\nimport { retryInterval, sleep } from './coordinator/connection/utils';\nimport {\n  createCoordinatorClient,\n  createTokenOrProvider,\n  getInstanceKey,\n} from './helpers/clientUtils';\nimport { getLogger, logToConsole, setLogger } from './logger';\nimport { withoutConcurrency } from './helpers/concurrency';\nimport { enableTimerWorker } from './timers';\n\nexport type StreamVideoClientOptions = {\n  apiKey: string;\n  options?: StreamClientOptions;\n  user?: User;\n  token?: string;\n  tokenProvider?: TokenProvider;\n};\n\n/**\n * A `StreamVideoClient` instance lets you communicate with our API, and authenticate users.\n */\nexport class StreamVideoClient {\n  /**\n   * A reactive store that exposes all the state variables reactively.\n   * You can subscribe to changes of the different state variables.\n   * Our library is built in a way that all state changes are exposed in this store,\n   * o all UI changes in your application should be handled by subscribing to these variables.\n   *\n   * @deprecated use the `client.state` getter.\n   */\n  readonly readOnlyStateStore: StreamVideoReadOnlyStateStore;\n  readonly logger: Logger;\n\n  protected readonly writeableStateStore: StreamVideoWriteableStateStore;\n  streamClient: StreamClient;\n\n  private effectsRegistered = false;\n  private eventHandlersToUnregister: Array<() => void> = [];\n  private readonly connectionConcurrencyTag = Symbol(\n    'connectionConcurrencyTag',\n  );\n\n  private static _instances = new Map<string, StreamVideoClient>();\n\n  /**\n   * You should create only one instance of `StreamVideoClient`.\n   */\n  constructor(apiKey: string, opts?: StreamClientOptions);\n  constructor(args: StreamVideoClientOptions);\n  constructor(\n    apiKeyOrArgs: string | StreamVideoClientOptions,\n    opts?: StreamClientOptions,\n  ) {\n    const apiKey =\n      typeof apiKeyOrArgs === 'string' ? apiKeyOrArgs : apiKeyOrArgs.apiKey;\n    const clientOptions =\n      typeof apiKeyOrArgs === 'string' ? opts : apiKeyOrArgs.options;\n\n    if (clientOptions?.enableTimerWorker) enableTimerWorker();\n\n    const rootLogger = clientOptions?.logger || logToConsole;\n    setLogger(rootLogger, clientOptions?.logLevel || 'warn');\n\n    this.logger = getLogger(['client']);\n\n    this.streamClient = createCoordinatorClient(apiKey, clientOptions);\n\n    this.writeableStateStore = new StreamVideoWriteableStateStore();\n    this.readOnlyStateStore = new StreamVideoReadOnlyStateStore(\n      this.writeableStateStore,\n    );\n\n    if (typeof apiKeyOrArgs !== 'string' && apiKeyOrArgs.user) {\n      const user = apiKeyOrArgs.user;\n      if (user.type === 'anonymous') user.id = '!anon';\n      if (user.id) this.registerClientInstance(apiKey, user);\n\n      const tokenOrProvider = createTokenOrProvider(apiKeyOrArgs);\n      this.connectUser(user, tokenOrProvider).catch((err) => {\n        this.logger('error', 'Failed to connect', err);\n      });\n    }\n  }\n\n  /**\n   * Gets or creates a StreamVideoClient instance based on the given options.\n   */\n  static getOrCreateInstance(\n    args: StreamVideoClientOptions & { user: User },\n  ): StreamVideoClient {\n    const { apiKey, user, token, tokenProvider } = args;\n    if (!user.id && user.type !== 'anonymous') {\n      throw new Error('user.id is required for a non-anonymous user');\n    }\n\n    if (\n      !token &&\n      !tokenProvider &&\n      user.type !== 'anonymous' &&\n      user.type !== 'guest'\n    ) {\n      throw new Error(\n        'tokenProvider or token is required for a authenticated users',\n      );\n    }\n\n    return (\n      StreamVideoClient._instances.get(getInstanceKey(apiKey, user)) ||\n      new StreamVideoClient(args)\n    );\n  }\n\n  private registerClientInstance = (apiKey: string, user: User) => {\n    const instanceKey = getInstanceKey(apiKey, user);\n    if (StreamVideoClient._instances.has(instanceKey)) {\n      this.logger(\n        'warn',\n        `A StreamVideoClient already exists for ${user.id}; Prefer using getOrCreateInstance method`,\n      );\n    }\n    StreamVideoClient._instances.set(instanceKey, this);\n  };\n\n  /**\n   * Return the reactive state store, use this if you want to be notified about changes to the client state\n   */\n  get state() {\n    return this.readOnlyStateStore;\n  }\n\n  private registerEffects = () => {\n    if (this.effectsRegistered) return;\n\n    this.eventHandlersToUnregister.push(\n      this.on('connection.changed', (event) => {\n        if (!event.online) return;\n\n        const callsToReWatch = this.writeableStateStore.calls\n          .filter((call) => call.watching)\n          .map((call) => call.cid);\n        if (callsToReWatch.length <= 0) return;\n\n        this.logger('info', `Rewatching calls ${callsToReWatch.join(', ')}`);\n        this.queryCalls({\n          watch: true,\n          filter_conditions: { cid: { $in: callsToReWatch } },\n          sort: [{ field: 'cid', direction: 1 }],\n        }).catch((err) => {\n          this.logger('error', 'Failed to re-watch calls', err);\n        });\n      }),\n    );\n\n    this.eventHandlersToUnregister.push(\n      this.on('call.created', (event) => {\n        const { call, members } = event;\n        if (this.state.connectedUser?.id === call.created_by.id) {\n          this.logger(\n            'warn',\n            'Received `call.created` sent by the current user',\n          );\n          return;\n        }\n        this.logger('info', `New call created and registered: ${call.cid}`);\n        const newCall = new Call({\n          streamClient: this.streamClient,\n          type: call.type,\n          id: call.id,\n          members,\n          clientStore: this.writeableStateStore,\n        });\n        newCall.state.updateFromCallResponse(call);\n        this.writeableStateStore.registerCall(newCall);\n      }),\n    );\n\n    this.eventHandlersToUnregister.push(\n      this.on('call.ring', async (event) => {\n        const { call, members } = event;\n        if (this.state.connectedUser?.id === call.created_by.id) {\n          this.logger(\n            'debug',\n            'Received `call.ring` sent by the current user so ignoring the event',\n          );\n          return;\n        }\n        // if `call.created` was received before `call.ring`.\n        // the client already has the call instance and we just need to update the state\n        const theCall = this.writeableStateStore.findCall(call.type, call.id);\n        if (theCall) {\n          await theCall.updateFromRingingEvent(event);\n        } else {\n          // if client doesn't have the call instance, create the instance and fetch the latest state\n          // Note: related - we also have onRingingCall method to handle this case from push notifications\n          const newCallInstance = new Call({\n            streamClient: this.streamClient,\n            type: call.type,\n            id: call.id,\n            members,\n            clientStore: this.writeableStateStore,\n            ringing: true,\n          });\n          await newCallInstance.get();\n        }\n      }),\n    );\n\n    this.effectsRegistered = true;\n  };\n\n  /**\n   * Connects the given user to the client.\n   * Only one user can connect at a time, if you want to change users, call `disconnectUser` before connecting a new user.\n   * If the connection is successful, the connected user [state variable](#readonlystatestore) will be updated accordingly.\n   *\n   * @param user the user to connect.\n   * @param tokenOrProvider a token or a function that returns a token.\n   */\n  connectUser = async (\n    user: User,\n    tokenOrProvider?: TokenOrProvider,\n  ): Promise<void | ConnectedEvent> => {\n    if (user.type === 'anonymous') {\n      user.id = '!anon';\n      return this.connectAnonymousUser(user as UserWithId, tokenOrProvider);\n    }\n\n    const connectUserResponse = await withoutConcurrency(\n      this.connectionConcurrencyTag,\n      async () => {\n        const client = this.streamClient;\n        const { onConnectUserError, persistUserOnConnectionFailure } =\n          client.options;\n        let { maxConnectUserRetries = 5 } = client.options;\n        maxConnectUserRetries = Math.max(maxConnectUserRetries, 1);\n\n        const errorQueue: Error[] = [];\n        for (let attempt = 0; attempt < maxConnectUserRetries; attempt++) {\n          try {\n            this.logger('trace', `Connecting user (${attempt})`, user);\n            return user.type === 'guest'\n              ? await client.connectGuestUser(user)\n              : await client.connectUser(user, tokenOrProvider);\n          } catch (err) {\n            this.logger('warn', `Failed to connect a user (${attempt})`, err);\n            errorQueue.push(err as Error);\n            if (attempt === maxConnectUserRetries - 1) {\n              onConnectUserError?.(err as Error, errorQueue);\n              throw err;\n            }\n\n            // we need to force to disconnect the user if the client is\n            // configured to persist the user on connection failure\n            if (persistUserOnConnectionFailure) {\n              await client.disconnectUser();\n            }\n\n            await sleep(retryInterval(attempt));\n          }\n        }\n      },\n    );\n\n    // connectUserResponse will be void if connectUser called twice for the same user\n    if (connectUserResponse?.me) {\n      this.writeableStateStore.setConnectedUser(connectUserResponse.me);\n    }\n\n    this.registerEffects();\n\n    return connectUserResponse;\n  };\n\n  /**\n   * Disconnects the currently connected user from the client.\n   *\n   * If the connection is successfully disconnected, the connected user [state variable](#readonlystatestore) will be updated accordingly\n   *\n   * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n   *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n   */\n  disconnectUser = async (timeout?: number) => {\n    await withoutConcurrency(this.connectionConcurrencyTag, async () => {\n      const { user, key } = this.streamClient;\n      if (!user) return;\n\n      await this.streamClient.disconnectUser(timeout);\n\n      if (user.id) {\n        StreamVideoClient._instances.delete(getInstanceKey(key, user));\n      }\n      this.eventHandlersToUnregister.forEach((unregister) => unregister());\n      this.eventHandlersToUnregister = [];\n      this.effectsRegistered = false;\n      this.writeableStateStore.setConnectedUser(undefined);\n    });\n  };\n\n  /**\n   * You can subscribe to WebSocket events provided by the API.\n   * To remove a subscription, call the `off` method or, execute the returned unsubscribe function.\n   * Please note that subscribing to WebSocket events is an advanced use-case, for most use-cases it should be enough to watch for changes in the reactive [state store](#readonlystatestore).\n   *\n   * @param eventName the event name or 'all'.\n   * @param callback the callback which will be called when the event is emitted.\n   * @returns an unsubscribe function.\n   */\n  on = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    return this.streamClient.on(eventName, callback);\n  };\n\n  /**\n   * Remove subscription for WebSocket events that were created by the `on` method.\n   *\n   * @param eventName the event name.\n   * @param callback the callback which was passed to the `on` method.\n   */\n  off = <E extends keyof AllClientEvents>(\n    eventName: E,\n    callback: ClientEventListener<E>,\n  ) => {\n    return this.streamClient.off(eventName, callback);\n  };\n\n  /**\n   * Creates a new call.\n   *\n   * @param type the type of the call.\n   * @param id the id of the call.\n   */\n  call = (type: string, id: string) => {\n    return new Call({\n      streamClient: this.streamClient,\n      id: id,\n      type: type,\n      clientStore: this.writeableStateStore,\n    });\n  };\n\n  /**\n   * Creates a new guest user with the given data.\n   *\n   * @param data the data for the guest user.\n   */\n  createGuestUser = async (data: CreateGuestRequest) => {\n    return this.streamClient.doAxiosRequest<\n      CreateGuestResponse,\n      CreateGuestRequest\n    >('post', '/guest', data, { publicEndpoint: true });\n  };\n\n  /**\n   * Will query the API for calls matching the given filters.\n   *\n   * @param data the query data.\n   */\n  queryCalls = async (data: QueryCallsRequest = {}) => {\n    const response = await this.streamClient.post<\n      QueryCallsResponse,\n      QueryCallsRequest\n    >('/calls', data);\n    const calls = [];\n    for (const c of response.calls) {\n      const call = new Call({\n        streamClient: this.streamClient,\n        id: c.call.id,\n        type: c.call.type,\n        members: c.members,\n        ownCapabilities: c.own_capabilities,\n        watching: data.watch,\n        clientStore: this.writeableStateStore,\n      });\n      call.state.updateFromCallResponse(c.call);\n      await call.applyDeviceConfig(c.call.settings, false);\n      if (data.watch) {\n        await call.setup();\n        this.writeableStateStore.registerCall(call);\n      }\n      calls.push(call);\n    }\n    return {\n      ...response,\n      calls: calls,\n    };\n  };\n\n  /**\n   * Retrieve the list of available call statistics reports matching a particular condition.\n   *\n   * @param data Filter and sort conditions for retrieving available call report summaries.\n   * @returns List with summary of available call reports matching the condition.\n   */\n  queryCallStats = async (data: QueryCallStatsRequest = {}) => {\n    return this.streamClient.post<\n      QueryCallStatsResponse,\n      QueryCallStatsRequest\n    >(`/call/stats`, data);\n  };\n\n  /**\n   * Retrieve the list of available reports aggregated from the call stats.\n   *\n   * @param data Specify filter conditions like from and to (within last 30 days) and the report types\n   * @returns Requested reports with (mostly) raw daily data for each report type requested\n   */\n  queryAggregateCallStats = async (\n    data: QueryAggregateCallStatsRequest = {},\n  ) => {\n    return this.streamClient.post<\n      QueryAggregateCallStatsResponse,\n      QueryAggregateCallStatsRequest\n    >(`/stats`, data);\n  };\n\n  /**\n   * Returns a list of available data centers available for hosting calls.\n   */\n  edges = async () => {\n    return this.streamClient.get<GetEdgesResponse>(`/edges`);\n  };\n\n  /**\n   * addDevice - Adds a push device for a user.\n   *\n   * @param {string} id the device id\n   * @param {string} push_provider the push provider name (eg. apn, firebase)\n   * @param {string} push_provider_name user provided push provider name\n   * @param {string} [userID] the user id (defaults to current user)\n   * @param {boolean} [voip_token] enables use of VoIP token for push notifications on iOS platform\n   */\n  addDevice = async (\n    id: string,\n    push_provider: string,\n    push_provider_name?: string,\n    userID?: string,\n    voip_token?: boolean,\n  ) => {\n    return await this.streamClient.post<CreateDeviceRequest>('/devices', {\n      id,\n      push_provider,\n      voip_token,\n      ...(userID != null ? { user_id: userID } : {}),\n      ...(push_provider_name != null ? { push_provider_name } : {}),\n    });\n  };\n\n  /**\n   * addDevice - Adds a push device for a user.\n   *\n   * @param {string} id the device id\n   * @param {string} push_provider the push provider name (eg. apn, firebase)\n   * @param {string} push_provider_name user provided push provider name\n   * @param {string} [userID] the user id (defaults to current user)\n   */\n  addVoipDevice = async (\n    id: string,\n    push_provider: string,\n    push_provider_name: string,\n    userID?: string,\n  ) => {\n    return await this.addDevice(\n      id,\n      push_provider,\n      push_provider_name,\n      userID,\n      true,\n    );\n  };\n\n  /**\n   * getDevices - Returns the devices associated with a current user\n   * @param {string} [userID] User ID. Only works on serverside\n   */\n  getDevices = async (userID?: string) => {\n    return await this.streamClient.get<ListDevicesResponse>(\n      '/devices',\n      userID ? { user_id: userID } : {},\n    );\n  };\n\n  /**\n   * removeDevice - Removes the device with the given id.\n   *\n   * @param {string} id The device id\n   * @param {string} [userID] The user id. Only specify this for serverside requests\n   */\n  removeDevice = async (id: string, userID?: string) => {\n    return await this.streamClient.delete('/devices', {\n      id,\n      ...(userID ? { user_id: userID } : {}),\n    });\n  };\n\n  /**\n   * A callback that can be used to create ringing calls from push notifications. If the call already exists, it will do nothing.\n   * @param call_cid\n   * @returns\n   */\n  onRingingCall = async (call_cid: string) => {\n    // if we find the call and is already ringing, we don't need to create a new call\n    // as client would have received the call.ring state because the app had WS alive when receiving push notifications\n    let call = this.state.calls.find((c) => c.cid === call_cid && c.ringing);\n    if (!call) {\n      // if not it means that WS is not alive when receiving the push notifications and we need to fetch the call\n      const [callType, callId] = call_cid.split(':');\n      call = new Call({\n        streamClient: this.streamClient,\n        type: callType,\n        id: callId,\n        clientStore: this.writeableStateStore,\n        ringing: true,\n      });\n      await call.get();\n    }\n\n    return call;\n  };\n\n  /**\n   * Connects the given anonymous user to the client.\n   *\n   * @param user the user to connect.\n   * @param tokenOrProvider a token or a function that returns a token.\n   */\n  private connectAnonymousUser = async (\n    user: UserWithId,\n    tokenOrProvider: TokenOrProvider,\n  ) => {\n    return withoutConcurrency(this.connectionConcurrencyTag, () =>\n      this.streamClient.connectAnonymousUser(user, tokenOrProvider),\n    );\n  };\n}\n","import { isFunction } from \"./isFunction\";\n\n/**\n * Tests to see if the object is \"thennable\".\n * @param value the object to test\n */\nexport function isPromise(value: any): value is PromiseLike<any> {\n  return isFunction(value?.then);\n}\n","import { Subscription } from '../Subscription';\nimport { SchedulerAction, SchedulerLike } from '../types';\n\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay: number,\n  repeat: true\n): void;\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay?: number,\n  repeat?: false\n): Subscription;\n\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay = 0,\n  repeat = false\n): Subscription | void {\n  const scheduleSubscription = scheduler.schedule(function (this: SchedulerAction<any>) {\n    work();\n    if (repeat) {\n      parentSubscription.add(this.schedule(null, delay));\n    } else {\n      this.unsubscribe();\n    }\n  }, delay);\n\n  parentSubscription.add(scheduleSubscription);\n\n  if (!repeat) {\n    // Because user-land scheduler implementations are unlikely to properly reuse\n    // Actions for repeat scheduling, we can't trust that the returned subscription\n    // will control repeat subscription scenarios. So we're trying to avoid using them\n    // incorrectly within this library.\n    return scheduleSubscription;\n  }\n}\n","/**\n * This function takes one parameter and just returns it. Simply put,\n * this is like `<T>(x: T): T => x`.\n *\n * ## Examples\n *\n * This is useful in some cases when using things like `mergeMap`\n *\n * ```ts\n * import { interval, take, map, range, mergeMap, identity } from 'rxjs';\n *\n * const source$ = interval(1000).pipe(take(5));\n *\n * const result$ = source$.pipe(\n *   map(i => range(i)),\n *   mergeMap(identity) // same as mergeMap(x => x)\n * );\n *\n * result$.subscribe({\n *   next: console.log\n * });\n * ```\n *\n * Or when you want to selectively apply an operator\n *\n * ```ts\n * import { interval, take, identity } from 'rxjs';\n *\n * const shouldLimit = () => Math.random() < 0.5;\n *\n * const source$ = interval(1000);\n *\n * const result$ = source$.pipe(shouldLimit() ? take(5) : identity);\n *\n * result$.subscribe({\n *   next: console.log\n * });\n * ```\n *\n * @param x Any value that is returned by this function\n * @returns The value passed as the first parameter to this function\n */\nexport function identity<T>(x: T): T {\n  return x;\n}\n","export function getSymbolIterator(): symbol {\n  if (typeof Symbol !== 'function' || !Symbol.iterator) {\n    return '@@iterator' as any;\n  }\n\n  return Symbol.iterator;\n}\n\nexport const iterator = getSymbolIterator();\n","/**\n * Symbol.observable or a string \"@@observable\". Used for interop\n *\n * @deprecated We will no longer be exporting this symbol in upcoming versions of RxJS.\n * Instead polyfill and use Symbol.observable directly *or* use https://www.npmjs.com/package/symbol-observable\n */\nexport const observable: string | symbol = (() => (typeof Symbol === 'function' && Symbol.observable) || '@@observable')();\n","import { Subscriber } from './Subscriber';\nimport { ObservableNotification } from './types';\n\n/**\n * The {@link GlobalConfig} object for RxJS. It is used to configure things\n * like how to react on unhandled errors.\n */\nexport const config: GlobalConfig = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: undefined,\n  useDeprecatedSynchronousErrorHandling: false,\n  useDeprecatedNextContext: false,\n};\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like how to react on unhandled errors. Accessible via {@link config}\n * object.\n */\nexport interface GlobalConfig {\n  /**\n   * A registration point for unhandled errors from RxJS. These are errors that\n   * cannot were not handled by consuming code in the usual subscription path. For\n   * example, if you have this configured, and you subscribe to an observable without\n   * providing an error handler, errors from that subscription will end up here. This\n   * will _always_ be called asynchronously on another job in the runtime. This is because\n   * we do not want errors thrown in this user-configured handler to interfere with the\n   * behavior of the library.\n   */\n  onUnhandledError: ((err: any) => void) | null;\n\n  /**\n   * A registration point for notifications that cannot be sent to subscribers because they\n   * have completed, errored or have been explicitly unsubscribed. By default, next, complete\n   * and error notifications sent to stopped subscribers are noops. However, sometimes callers\n   * might want a different behavior. For example, with sources that attempt to report errors\n   * to stopped subscribers, a caller can configure RxJS to throw an unhandled error instead.\n   * This will _always_ be called asynchronously on another job in the runtime. This is because\n   * we do not want errors thrown in this user-configured handler to interfere with the\n   * behavior of the library.\n   */\n  onStoppedNotification: ((notification: ObservableNotification<any>, subscriber: Subscriber<any>) => void) | null;\n\n  /**\n   * The promise constructor used by default for {@link Observable#toPromise toPromise} and {@link Observable#forEach forEach}\n   * methods.\n   *\n   * @deprecated As of version 8, RxJS will no longer support this sort of injection of a\n   * Promise constructor. If you need a Promise implementation other than native promises,\n   * please polyfill/patch Promise as you see appropriate. Will be removed in v8.\n   */\n  Promise?: PromiseConstructorLike;\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BUY TIME\n   * FOR MIGRATION REASONS.\n   *\n   * @deprecated As of version 8, RxJS will no longer support synchronous throwing\n   * of unhandled errors. All errors will be thrown on a separate call stack to prevent bad\n   * behaviors described above. Will be removed in v8.\n   */\n  useDeprecatedSynchronousErrorHandling: boolean;\n\n  /**\n   * If true, enables an as-of-yet undocumented feature from v5: The ability to access\n   * `unsubscribe()` via `this` context in `next` functions created in observers passed\n   * to `subscribe`.\n   *\n   * This is being removed because the performance was severely problematic, and it could also cause\n   * issues when types other than POJOs are passed to subscribe as subscribers, as they will likely have\n   * their `this` context overwritten.\n   *\n   * @deprecated As of version 8, RxJS will no longer support altering the\n   * context of next functions provided as part of an observer to Subscribe. Instead,\n   * you will have access to a subscription or a signal or token that will allow you to do things like\n   * unsubscribe and test closed status. Will be removed in v8.\n   */\n  useDeprecatedNextContext: boolean;\n}\n","import { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { ObservableInput, ObservedValueOf, ReadableStreamLike } from '../types';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { Subscriber } from '../Subscriber';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\n\nexport function innerFrom<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\nexport function innerFrom<T>(input: ObservableInput<T>): Observable<T> {\n  if (input instanceof Observable) {\n    return input;\n  }\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return fromInteropObservable(input);\n    }\n    if (isArrayLike(input)) {\n      return fromArrayLike(input);\n    }\n    if (isPromise(input)) {\n      return fromPromise(input);\n    }\n    if (isAsyncIterable(input)) {\n      return fromAsyncIterable(input);\n    }\n    if (isIterable(input)) {\n      return fromIterable(input);\n    }\n    if (isReadableStreamLike(input)) {\n      return fromReadableStreamLike(input);\n    }\n  }\n\n  throw createInvalidObservableTypeError(input);\n}\n\n/**\n * Creates an RxJS Observable from an object that implements `Symbol.observable`.\n * @param obj An object that properly implements `Symbol.observable`.\n */\nexport function fromInteropObservable<T>(obj: any) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    const obs = obj[Symbol_observable]();\n    if (isFunction(obs.subscribe)) {\n      return obs.subscribe(subscriber);\n    }\n    // Should be caught by observable subscribe function error handling.\n    throw new TypeError('Provided object does not correctly implement Symbol.observable');\n  });\n}\n\n/**\n * Synchronously emits the values of an array like and completes.\n * This is exported because there are creation functions and operators that need to\n * make direct use of the same logic, and there's no reason to make them run through\n * `from` conditionals because we *know* they're dealing with an array.\n * @param array The array to emit values from\n */\nexport function fromArrayLike<T>(array: ArrayLike<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    // Loop over the array and emit each value. Note two things here:\n    // 1. We're making sure that the subscriber is not closed on each loop.\n    //    This is so we don't continue looping over a very large array after\n    //    something like a `take`, `takeWhile`, or other synchronous unsubscription\n    //    has already unsubscribed.\n    // 2. In this form, reentrant code can alter that array we're looping over.\n    //    This is a known issue, but considered an edge case. The alternative would\n    //    be to copy the array before executing the loop, but this has\n    //    performance implications.\n    for (let i = 0; i < array.length && !subscriber.closed; i++) {\n      subscriber.next(array[i]);\n    }\n    subscriber.complete();\n  });\n}\n\nexport function fromPromise<T>(promise: PromiseLike<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    promise\n      .then(\n        (value) => {\n          if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n          }\n        },\n        (err: any) => subscriber.error(err)\n      )\n      .then(null, reportUnhandledError);\n  });\n}\n\nexport function fromIterable<T>(iterable: Iterable<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    for (const value of iterable) {\n      subscriber.next(value);\n      if (subscriber.closed) {\n        return;\n      }\n    }\n    subscriber.complete();\n  });\n}\n\nexport function fromAsyncIterable<T>(asyncIterable: AsyncIterable<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    process(asyncIterable, subscriber).catch((err) => subscriber.error(err));\n  });\n}\n\nexport function fromReadableStreamLike<T>(readableStream: ReadableStreamLike<T>) {\n  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\n\nasync function process<T>(asyncIterable: AsyncIterable<T>, subscriber: Subscriber<T>) {\n  for await (const value of asyncIterable) {\n    subscriber.next(value);\n    // A side-effect may have closed our subscriber,\n    // check before the next iteration.\n    if (subscriber.closed) {\n      return;\n    }\n  }\n  subscriber.complete();\n}\n","import { SchedulerLike } from '../types';\nimport { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\n\nfunction last<T>(arr: T[]): T | undefined {\n  return arr[arr.length - 1];\n}\n\nexport function popResultSelector(args: any[]): ((...args: unknown[]) => unknown) | undefined {\n  return isFunction(last(args)) ? args.pop() : undefined;\n}\n\nexport function popScheduler(args: any[]): SchedulerLike | undefined {\n  return isScheduler(last(args)) ? args.pop() : undefined;\n}\n\nexport function popNumber(args: any[], defaultValue: number): number {\n  return typeof last(args) === 'number' ? args.pop()! : defaultValue;\n}\n","import { SchedulerLike } from '../types';\nimport { isFunction } from './isFunction';\n\nexport function isScheduler(value: any): value is SchedulerLike {\n  return value && isFunction(value.schedule);\n}\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.40\n   Copyright © 2012-2024 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.40',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /(?:honor)([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, 'Honor'], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (imo) ((?!tab)[\\w ]+?)(?: bui|\\))/i,                             // IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[05][fnuw]?s?)\\b/i                                   // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS/OpenHarmony\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","import { isFunction } from './isFunction';\n\nexport function isAsyncIterable<T>(obj: any): obj is AsyncIterable<T> {\n  return Symbol.asyncIterator && isFunction(obj?.[Symbol.asyncIterator]);\n}\n","/* tslint:disable:no-empty */\nexport function noop() { }\n","import { CompleteNotification, NextNotification, ErrorNotification } from './types';\n\n/**\n * A completion object optimized for memory use and created to be the\n * same \"shape\" as other notifications in v8.\n * @internal\n */\nexport const COMPLETE_NOTIFICATION = (() => createNotification('C', undefined, undefined) as CompleteNotification)();\n\n/**\n * Internal use only. Creates an optimized error notification that is the same \"shape\"\n * as other notifications.\n * @internal\n */\nexport function errorNotification(error: any): ErrorNotification {\n  return createNotification('E', undefined, error) as any;\n}\n\n/**\n * Internal use only. Creates an optimized next notification that is the same \"shape\"\n * as other notifications.\n * @internal\n */\nexport function nextNotification<T>(value: T) {\n  return createNotification('N', value, undefined) as NextNotification<T>;\n}\n\n/**\n * Ensures that all notifications created internally have the same \"shape\" in v8.\n *\n * TODO: This is only exported to support a crazy legacy test in `groupBy`.\n * @internal\n */\nexport function createNotification(kind: 'N' | 'E' | 'C', value: any, error: any) {\n  return {\n    kind,\n    value,\n    error,\n  };\n}\n","import { isFunction } from './util/isFunction';\nimport { Observer, ObservableNotification } from './types';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param next The `next` callback of an Observer.\n   * @param error The `error` callback of an\n   * Observer.\n   * @param complete The `complete` callback of an\n   * Observer.\n   * @return A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @deprecated Do not use. Will be removed in v8. There is no replacement for this\n   * method, and there is no reason to be creating instances of `Subscriber` directly.\n   * If you have a specific use case, please file an issue.\n   */\n  static create<T>(next?: (x?: T) => void, error?: (e?: any) => void, complete?: () => void): Subscriber<T> {\n    return new SafeSubscriber(next, error, complete);\n  }\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  protected isStopped: boolean = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  protected destination: Subscriber<any> | Observer<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   * There is no reason to directly create an instance of Subscriber. This type is exported for typings reasons.\n   */\n  constructor(destination?: Subscriber<any> | Observer<any>) {\n    super();\n    if (destination) {\n      this.destination = destination;\n      // Automatically chain subscriptions together here.\n      // if destination is a Subscription, then it is a Subscriber.\n      if (isSubscription(destination)) {\n        destination.add(this);\n      }\n    } else {\n      this.destination = EMPTY_OBSERVER;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param value The `next` value.\n   */\n  next(value: T): void {\n    if (this.isStopped) {\n      handleStoppedNotification(nextNotification(value), this);\n    } else {\n      this._next(value!);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param err The `error` exception.\n   */\n  error(err?: any): void {\n    if (this.isStopped) {\n      handleStoppedNotification(errorNotification(err), this);\n    } else {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   */\n  complete(): void {\n    if (this.isStopped) {\n      handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n    } else {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (!this.closed) {\n      this.isStopped = true;\n      super.unsubscribe();\n      this.destination = null!;\n    }\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    try {\n      this.destination.error(err);\n    } finally {\n      this.unsubscribe();\n    }\n  }\n\n  protected _complete(): void {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }\n}\n\n/**\n * This bind is captured here because we want to be able to have\n * compatibility with monoid libraries that tend to use a method named\n * `bind`. In particular, a library called Monio requires this.\n */\nconst _bind = Function.prototype.bind;\n\nfunction bind<Fn extends (...args: any[]) => any>(fn: Fn, thisArg: any): Fn {\n  return _bind.call(fn, thisArg);\n}\n\n/**\n * Internal optimization only, DO NOT EXPOSE.\n * @internal\n */\nclass ConsumerObserver<T> implements Observer<T> {\n  constructor(private partialObserver: Partial<Observer<T>>) {}\n\n  next(value: T): void {\n    const { partialObserver } = this;\n    if (partialObserver.next) {\n      try {\n        partialObserver.next(value);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  }\n\n  error(err: any): void {\n    const { partialObserver } = this;\n    if (partialObserver.error) {\n      try {\n        partialObserver.error(err);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    } else {\n      handleUnhandledError(err);\n    }\n  }\n\n  complete(): void {\n    const { partialObserver } = this;\n    if (partialObserver.complete) {\n      try {\n        partialObserver.complete();\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  }\n}\n\nexport class SafeSubscriber<T> extends Subscriber<T> {\n  constructor(\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\n    error?: ((e?: any) => void) | null,\n    complete?: (() => void) | null\n  ) {\n    super();\n\n    let partialObserver: Partial<Observer<T>>;\n    if (isFunction(observerOrNext) || !observerOrNext) {\n      // The first argument is a function, not an observer. The next\n      // two arguments *could* be observers, or they could be empty.\n      partialObserver = {\n        next: (observerOrNext ?? undefined) as ((value: T) => void) | undefined,\n        error: error ?? undefined,\n        complete: complete ?? undefined,\n      };\n    } else {\n      // The first argument is a partial observer.\n      let context: any;\n      if (this && config.useDeprecatedNextContext) {\n        // This is a deprecated path that made `this.unsubscribe()` available in\n        // next handler functions passed to subscribe. This only exists behind a flag\n        // now, as it is *very* slow.\n        context = Object.create(observerOrNext);\n        context.unsubscribe = () => this.unsubscribe();\n        partialObserver = {\n          next: observerOrNext.next && bind(observerOrNext.next, context),\n          error: observerOrNext.error && bind(observerOrNext.error, context),\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context),\n        };\n      } else {\n        // The \"normal\" path. Just use the partial observer directly.\n        partialObserver = observerOrNext;\n      }\n    }\n\n    // Wrap the partial observer to ensure it's a full observer, and\n    // make sure proper error handling is accounted for.\n    this.destination = new ConsumerObserver(partialObserver);\n  }\n}\n\nfunction handleUnhandledError(error: any) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    captureError(error);\n  } else {\n    // Ideal path, we report this as an unhandled error,\n    // which is thrown on a new call stack.\n    reportUnhandledError(error);\n  }\n}\n\n/**\n * An error handler used when no error handler was supplied\n * to the SafeSubscriber -- meaning no error handler was supplied\n * do the `subscribe` call on our observable.\n * @param err The error to handle\n */\nfunction defaultErrorHandler(err: any) {\n  throw err;\n}\n\n/**\n * A handler for notifications that cannot be sent to a stopped subscriber.\n * @param notification The notification being sent.\n * @param subscriber The stopped subscriber.\n */\nfunction handleStoppedNotification(notification: ObservableNotification<any>, subscriber: Subscriber<any>) {\n  const { onStoppedNotification } = config;\n  onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\n\n/**\n * The observer used as a stub for subscriptions where the user did not\n * pass any arguments to `subscribe`. Comes with the default error handling\n * behavior.\n */\nexport const EMPTY_OBSERVER: Readonly<Observer<any>> & { closed: true } = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop,\n};\n","import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction } from '../types';\nimport { isFunction } from './isFunction';\n\n/**\n * Used to determine if an object is an Observable with a lift function.\n */\nexport function hasLift(source: any): source is { lift: InstanceType<typeof Observable>['lift'] } {\n  return isFunction(source?.lift);\n}\n\n/**\n * Creates an `OperatorFunction`. Used to define operators throughout the library in a concise way.\n * @param init The logic to connect the liftedSource to the subscriber at the moment of subscription.\n */\nexport function operate<T, R>(\n  init: (liftedSource: Observable<T>, subscriber: Subscriber<R>) => (() => void) | void\n): OperatorFunction<T, R> {\n  return (source: Observable<T>) => {\n    if (hasLift(source)) {\n      return source.lift(function (this: Subscriber<R>, liftedSource: Observable<T>) {\n        try {\n          return init(liftedSource, this);\n        } catch (err) {\n          this.error(err);\n        }\n      });\n    }\n    throw new TypeError('Unable to lift unknown Observable type');\n  };\n}\n","// NOTE: separate `:not()` selectors has broader browser support than the newer\n//  `:not([inert], [inert] *)` (Feb 2023)\n// CAREFUL: JSDom does not support `:not([inert] *)` as a selector; using it causes\n//  the entire query to fail, resulting in no nodes found, which will break a lot\n//  of things... so we have to rely on JS to identify nodes inside an inert container\nconst candidateSelectors = [\n  'input:not([inert])',\n  'select:not([inert])',\n  'textarea:not([inert])',\n  'a[href]:not([inert])',\n  'button:not([inert])',\n  '[tabindex]:not(slot):not([inert])',\n  'audio[controls]:not([inert])',\n  'video[controls]:not([inert])',\n  '[contenteditable]:not([contenteditable=\"false\"]):not([inert])',\n  'details>summary:first-of-type:not([inert])',\n  'details:not([inert])',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst NoElement = typeof Element === 'undefined';\n\nconst matches = NoElement\n  ? function () {}\n  : Element.prototype.matches ||\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.webkitMatchesSelector;\n\nconst getRootNode =\n  !NoElement && Element.prototype.getRootNode\n    ? (element) => element?.getRootNode?.()\n    : (element) => element?.ownerDocument;\n\n/**\n * Determines if a node is inert or in an inert ancestor.\n * @param {Element} [node]\n * @param {boolean} [lookUp] If true and `node` is not inert, looks up at ancestors to\n *  see if any of them are inert. If false, only `node` itself is considered.\n * @returns {boolean} True if inert itself or by way of being in an inert ancestor.\n *  False if `node` is falsy.\n */\nconst isInert = function (node, lookUp = true) {\n  // CAREFUL: JSDom does not support inert at all, so we can't use the `HTMLElement.inert`\n  //  JS API property; we have to check the attribute, which can either be empty or 'true';\n  //  if it's `null` (not specified) or 'false', it's an active element\n  const inertAtt = node?.getAttribute?.('inert');\n  const inert = inertAtt === '' || inertAtt === 'true';\n\n  // NOTE: this could also be handled with `node.matches('[inert], :is([inert] *)')`\n  //  if it weren't for `matches()` not being a function on shadow roots; the following\n  //  code works for any kind of node\n  // CAREFUL: JSDom does not appear to support certain selectors like `:not([inert] *)`\n  //  so it likely would not support `:is([inert] *)` either...\n  const result = inert || (lookUp && node && isInert(node.parentNode)); // recursive\n\n  return result;\n};\n\n/**\n * Determines if a node's content is editable.\n * @param {Element} [node]\n * @returns True if it's content-editable; false if it's not or `node` is falsy.\n */\nconst isContentEditable = function (node) {\n  // CAREFUL: JSDom does not support the `HTMLElement.isContentEditable` API so we have\n  //  to use the attribute directly to check for this, which can either be empty or 'true';\n  //  if it's `null` (not specified) or 'false', it's a non-editable element\n  const attValue = node?.getAttribute?.('contenteditable');\n  return attValue === '' || attValue === 'true';\n};\n\n/**\n * @param {Element} el container to check in\n * @param {boolean} includeContainer add container to check\n * @param {(node: Element) => boolean} filter filter candidates\n * @returns {Element[]}\n */\nconst getCandidates = function (el, includeContainer, filter) {\n  // even if `includeContainer=false`, we still have to check it for inertness because\n  //  if it's inert, all its children are inert\n  if (isInert(el)) {\n    return [];\n  }\n\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\n/**\n * @callback GetShadowRoot\n * @param {Element} element to check for shadow root\n * @returns {ShadowRoot|boolean} ShadowRoot if available or boolean indicating if a shadowRoot is attached but not available.\n */\n\n/**\n * @callback ShadowRootFilter\n * @param {Element} shadowHostNode the element which contains shadow content\n * @returns {boolean} true if a shadow root could potentially contain valid candidates.\n */\n\n/**\n * @typedef {Object} CandidateScope\n * @property {Element} scopeParent contains inner candidates\n * @property {Element[]} candidates list of candidates found in the scope parent\n */\n\n/**\n * @typedef {Object} IterativeOptions\n * @property {GetShadowRoot|boolean} getShadowRoot true if shadow support is enabled; falsy if not;\n *  if a function, implies shadow support is enabled and either returns the shadow root of an element\n *  or a boolean stating if it has an undisclosed shadow root\n * @property {(node: Element) => boolean} filter filter candidates\n * @property {boolean} flatten if true then result will flatten any CandidateScope into the returned list\n * @property {ShadowRootFilter} shadowRootFilter filter shadow roots;\n */\n\n/**\n * @param {Element[]} elements list of element containers to match candidates from\n * @param {boolean} includeContainer add container list to check\n * @param {IterativeOptions} options\n * @returns {Array.<Element|CandidateScope>}\n */\nconst getCandidatesIteratively = function (\n  elements,\n  includeContainer,\n  options\n) {\n  const candidates = [];\n  const elementsToCheck = Array.from(elements);\n  while (elementsToCheck.length) {\n    const element = elementsToCheck.shift();\n    if (isInert(element, false)) {\n      // no need to look up since we're drilling down\n      // anything inside this container will also be inert\n      continue;\n    }\n\n    if (element.tagName === 'SLOT') {\n      // add shadow dom slot scope (slot itself cannot be focusable)\n      const assigned = element.assignedElements();\n      const content = assigned.length ? assigned : element.children;\n      const nestedCandidates = getCandidatesIteratively(content, true, options);\n      if (options.flatten) {\n        candidates.push(...nestedCandidates);\n      } else {\n        candidates.push({\n          scopeParent: element,\n          candidates: nestedCandidates,\n        });\n      }\n    } else {\n      // check candidate element\n      const validCandidate = matches.call(element, candidateSelector);\n      if (\n        validCandidate &&\n        options.filter(element) &&\n        (includeContainer || !elements.includes(element))\n      ) {\n        candidates.push(element);\n      }\n\n      // iterate over shadow content if possible\n      const shadowRoot =\n        element.shadowRoot ||\n        // check for an undisclosed shadow\n        (typeof options.getShadowRoot === 'function' &&\n          options.getShadowRoot(element));\n\n      // no inert look up because we're already drilling down and checking for inertness\n      //  on the way down, so all containers to this root node should have already been\n      //  vetted as non-inert\n      const validShadowRoot =\n        !isInert(shadowRoot, false) &&\n        (!options.shadowRootFilter || options.shadowRootFilter(element));\n\n      if (shadowRoot && validShadowRoot) {\n        // add shadow dom scope IIF a shadow root node was given; otherwise, an undisclosed\n        //  shadow exists, so look at light dom children as fallback BUT create a scope for any\n        //  child candidates found because they're likely slotted elements (elements that are\n        //  children of the web component element (which has the shadow), in the light dom, but\n        //  slotted somewhere _inside_ the undisclosed shadow) -- the scope is created below,\n        //  _after_ we return from this recursive call\n        const nestedCandidates = getCandidatesIteratively(\n          shadowRoot === true ? element.children : shadowRoot.children,\n          true,\n          options\n        );\n\n        if (options.flatten) {\n          candidates.push(...nestedCandidates);\n        } else {\n          candidates.push({\n            scopeParent: element,\n            candidates: nestedCandidates,\n          });\n        }\n      } else {\n        // there's not shadow so just dig into the element's (light dom) children\n        //  __without__ giving the element special scope treatment\n        elementsToCheck.unshift(...element.children);\n      }\n    }\n  }\n  return candidates;\n};\n\n/**\n * @private\n * Determines if the node has an explicitly specified `tabindex` attribute.\n * @param {HTMLElement} node\n * @returns {boolean} True if so; false if not.\n */\nconst hasTabIndex = function (node) {\n  return !isNaN(parseInt(node.getAttribute('tabindex'), 10));\n};\n\n/**\n * Determine the tab index of a given node.\n * @param {HTMLElement} node\n * @returns {number} Tab order (negative, 0, or positive number).\n * @throws {Error} If `node` is falsy.\n */\nconst getTabIndex = function (node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (node.tabIndex < 0) {\n    // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n    // `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n    // yet they are still part of the regular tab order; in FF, they get a default\n    // `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n    // order, consider their tab index to be 0.\n    // Also browsers do not return `tabIndex` correctly for contentEditable nodes;\n    // so if they don't have a tabindex attribute specifically set, assume it's 0.\n    if (\n      (/^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName) ||\n        isContentEditable(node)) &&\n      !hasTabIndex(node)\n    ) {\n      return 0;\n    }\n  }\n\n  return node.tabIndex;\n};\n\n/**\n * Determine the tab index of a given node __for sort order purposes__.\n * @param {HTMLElement} node\n * @param {boolean} [isScope] True for a custom element with shadow root or slot that, by default,\n *  has tabIndex -1, but needs to be sorted by document order in order for its content to be\n *  inserted into the correct sort position.\n * @returns {number} Tab order (negative, 0, or positive number).\n */\nconst getSortOrderTabIndex = function (node, isScope) {\n  const tabIndex = getTabIndex(node);\n\n  if (tabIndex < 0 && isScope && !hasTabIndex(node)) {\n    return 0;\n  }\n\n  return tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || getRootNode(node);\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\n// determines if a node is ultimately attached to the window's document\nconst isNodeAttached = function (node) {\n  // The root node is the shadow root if the node is in a shadow DOM; some document otherwise\n  //  (but NOT _the_ document; see second 'If' comment below for more).\n  // If rootNode is shadow root, it'll have a host, which is the element to which the shadow\n  //  is attached, and the one we need to check if it's in the document or not (because the\n  //  shadow, and all nodes it contains, is never considered in the document since shadows\n  //  behave like self-contained DOMs; but if the shadow's HOST, which is part of the document,\n  //  is hidden, or is not in the document itself but is detached, it will affect the shadow's\n  //  visibility, including all the nodes it contains). The host could be any normal node,\n  //  or a custom element (i.e. web component). Either way, that's the one that is considered\n  //  part of the document, not the shadow root, nor any of its children (i.e. the node being\n  //  tested).\n  // To further complicate things, we have to look all the way up until we find a shadow HOST\n  //  that is attached (or find none) because the node might be in nested shadows...\n  // If rootNode is not a shadow root, it won't have a host, and so rootNode should be the\n  //  document (per the docs) and while it's a Document-type object, that document does not\n  //  appear to be the same as the node's `ownerDocument` for some reason, so it's safer\n  //  to ignore the rootNode at this point, and use `node.ownerDocument`. Otherwise,\n  //  using `rootNode.contains(node)` will _always_ be true we'll get false-positives when\n  //  node is actually detached.\n  // NOTE: If `nodeRootHost` or `node` happens to be the `document` itself (which is possible\n  //  if a tabbable/focusable node was quickly added to the DOM, focused, and then removed\n  //  from the DOM as in https://github.com/focus-trap/focus-trap-react/issues/905), then\n  //  `ownerDocument` will be `null`, hence the optional chaining on it.\n  let nodeRoot = node && getRootNode(node);\n  let nodeRootHost = nodeRoot?.host;\n\n  // in some cases, a detached node will return itself as the root instead of a document or\n  //  shadow root object, in which case, we shouldn't try to look further up the host chain\n  let attached = false;\n  if (nodeRoot && nodeRoot !== node) {\n    attached = !!(\n      nodeRootHost?.ownerDocument?.contains(nodeRootHost) ||\n      node?.ownerDocument?.contains(node)\n    );\n\n    while (!attached && nodeRootHost) {\n      // since it's not attached and we have a root host, the node MUST be in a nested shadow DOM,\n      //  which means we need to get the host's host and check if that parent host is contained\n      //  in (i.e. attached to) the document\n      nodeRoot = getRootNode(nodeRootHost);\n      nodeRootHost = nodeRoot?.host;\n      attached = !!nodeRootHost?.ownerDocument?.contains(nodeRootHost);\n    }\n  }\n\n  return attached;\n};\n\nconst isZeroArea = function (node) {\n  const { width, height } = node.getBoundingClientRect();\n  return width === 0 && height === 0;\n};\nconst isHidden = function (node, { displayCheck, getShadowRoot }) {\n  // NOTE: visibility will be `undefined` if node is detached from the document\n  //  (see notes about this further down), which means we will consider it visible\n  //  (this is legacy behavior from a very long way back)\n  // NOTE: we check this regardless of `displayCheck=\"none\"` because this is a\n  //  _visibility_ check, not a _display_ check\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  if (\n    !displayCheck ||\n    displayCheck === 'full' ||\n    displayCheck === 'legacy-full'\n  ) {\n    if (typeof getShadowRoot === 'function') {\n      // figure out if we should consider the node to be in an undisclosed shadow and use the\n      //  'non-zero-area' fallback\n      const originalNode = node;\n      while (node) {\n        const parentElement = node.parentElement;\n        const rootNode = getRootNode(node);\n        if (\n          parentElement &&\n          !parentElement.shadowRoot &&\n          getShadowRoot(parentElement) === true // check if there's an undisclosed shadow\n        ) {\n          // node has an undisclosed shadow which means we can only treat it as a black box, so we\n          //  fall back to a non-zero-area test\n          return isZeroArea(node);\n        } else if (node.assignedSlot) {\n          // iterate up slot\n          node = node.assignedSlot;\n        } else if (!parentElement && rootNode !== node.ownerDocument) {\n          // cross shadow boundary\n          node = rootNode.host;\n        } else {\n          // iterate up normal dom\n          node = parentElement;\n        }\n      }\n\n      node = originalNode;\n    }\n    // else, `getShadowRoot` might be true, but all that does is enable shadow DOM support\n    //  (i.e. it does not also presume that all nodes might have undisclosed shadows); or\n    //  it might be a falsy value, which means shadow DOM support is disabled\n\n    // Since we didn't find it sitting in an undisclosed shadow (or shadows are disabled)\n    //  now we can just test to see if it would normally be visible or not, provided it's\n    //  attached to the main document.\n    // NOTE: We must consider case where node is inside a shadow DOM and given directly to\n    //  `isTabbable()` or `isFocusable()` -- regardless of `getShadowRoot` option setting.\n\n    if (isNodeAttached(node)) {\n      // this works wherever the node is: if there's at least one client rect, it's\n      //  somehow displayed; it also covers the CSS 'display: contents' case where the\n      //  node itself is hidden in place of its contents; and there's no need to search\n      //  up the hierarchy either\n      return !node.getClientRects().length;\n    }\n\n    // Else, the node isn't attached to the document, which means the `getClientRects()`\n    //  API will __always__ return zero rects (this can happen, for example, if React\n    //  is used to render nodes onto a detached tree, as confirmed in this thread:\n    //  https://github.com/facebook/react/issues/9117#issuecomment-284228870)\n    //\n    // It also means that even window.getComputedStyle(node).display will return `undefined`\n    //  because styles are only computed for nodes that are in the document.\n    //\n    // NOTE: THIS HAS BEEN THE CASE FOR YEARS. It is not new, nor is it caused by tabbable\n    //  somehow. Though it was never stated officially, anyone who has ever used tabbable\n    //  APIs on nodes in detached containers has actually implicitly used tabbable in what\n    //  was later (as of v5.2.0 on Apr 9, 2021) called `displayCheck=\"none\"` mode -- essentially\n    //  considering __everything__ to be visible because of the innability to determine styles.\n    //\n    // v6.0.0: As of this major release, the default 'full' option __no longer treats detached\n    //  nodes as visible with the 'none' fallback.__\n    if (displayCheck !== 'legacy-full') {\n      return true; // hidden\n    }\n    // else, fallback to 'none' mode and consider the node visible\n  } else if (displayCheck === 'non-zero-area') {\n    // NOTE: Even though this tests that the node's client rect is non-zero to determine\n    //  whether it's displayed, and that a detached node will __always__ have a zero-area\n    //  client rect, we don't special-case for whether the node is attached or not. In\n    //  this mode, we do want to consider nodes that have a zero area to be hidden at all\n    //  times, and that includes attached or not.\n    return isZeroArea(node);\n  }\n\n  // visible, as far as we can tell, or per current `displayCheck=none` mode, we assume\n  //  it's visible\n  return false;\n};\n\n// form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\nconst isDisabledFromFieldset = function (node) {\n  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName)) {\n    let parentNode = node.parentElement;\n    // check if `node` is contained in a disabled <fieldset>\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> among the children of the disabled <fieldset>\n        for (let i = 0; i < parentNode.children.length; i++) {\n          const child = parentNode.children.item(i);\n          // when the first <legend> (in document order) is found\n          if (child.tagName === 'LEGEND') {\n            // if its parent <fieldset> is not nested in another disabled <fieldset>,\n            // return whether `node` is a descendant of its first <legend>\n            return matches.call(parentNode, 'fieldset[disabled] *')\n              ? true\n              : !child.contains(node);\n          }\n        }\n        // the disabled <fieldset> containing `node` has no <legend>\n        return true;\n      }\n      parentNode = parentNode.parentElement;\n    }\n  }\n\n  // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (options, node) {\n  if (\n    node.disabled ||\n    // we must do an inert look up to filter out any elements inside an inert ancestor\n    //  because we're limited in the type of selectors we can use in JSDom (see related\n    //  note related to `candidateSelectors`)\n    isInert(node) ||\n    isHiddenInput(node) ||\n    isHidden(node, options) ||\n    // For a details element with a summary, the summary element gets the focus\n    isDetailsWithSummary(node) ||\n    isDisabledFromFieldset(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (options, node) {\n  if (\n    isNonTabbableRadio(node) ||\n    getTabIndex(node) < 0 ||\n    !isNodeMatchingSelectorFocusable(options, node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isValidShadowRootTabbable = function (shadowHostNode) {\n  const tabIndex = parseInt(shadowHostNode.getAttribute('tabindex'), 10);\n  if (isNaN(tabIndex) || tabIndex >= 0) {\n    return true;\n  }\n  // If a custom element has an explicit negative tabindex,\n  // browsers will not allow tab targeting said element's children.\n  return false;\n};\n\n/**\n * @param {Array.<Element|CandidateScope>} candidates\n * @returns Element[]\n */\nconst sortByOrder = function (candidates) {\n  const regularTabbables = [];\n  const orderedTabbables = [];\n  candidates.forEach(function (item, i) {\n    const isScope = !!item.scopeParent;\n    const element = isScope ? item.scopeParent : item;\n    const candidateTabindex = getSortOrderTabIndex(element, isScope);\n    const elements = isScope ? sortByOrder(item.candidates) : element;\n    if (candidateTabindex === 0) {\n      isScope\n        ? regularTabbables.push(...elements)\n        : regularTabbables.push(element);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        item: item,\n        isScope: isScope,\n        content: elements,\n      });\n    }\n  });\n\n  return orderedTabbables\n    .sort(sortOrderedTabbables)\n    .reduce((acc, sortable) => {\n      sortable.isScope\n        ? acc.push(...sortable.content)\n        : acc.push(sortable.content);\n      return acc;\n    }, [])\n    .concat(regularTabbables);\n};\n\nconst tabbable = function (container, options) {\n  options = options || {};\n\n  let candidates;\n  if (options.getShadowRoot) {\n    candidates = getCandidatesIteratively(\n      [container],\n      options.includeContainer,\n      {\n        filter: isNodeMatchingSelectorTabbable.bind(null, options),\n        flatten: false,\n        getShadowRoot: options.getShadowRoot,\n        shadowRootFilter: isValidShadowRootTabbable,\n      }\n    );\n  } else {\n    candidates = getCandidates(\n      container,\n      options.includeContainer,\n      isNodeMatchingSelectorTabbable.bind(null, options)\n    );\n  }\n  return sortByOrder(candidates);\n};\n\nconst focusable = function (container, options) {\n  options = options || {};\n\n  let candidates;\n  if (options.getShadowRoot) {\n    candidates = getCandidatesIteratively(\n      [container],\n      options.includeContainer,\n      {\n        filter: isNodeMatchingSelectorFocusable.bind(null, options),\n        flatten: true,\n        getShadowRoot: options.getShadowRoot,\n      }\n    );\n  } else {\n    candidates = getCandidates(\n      container,\n      options.includeContainer,\n      isNodeMatchingSelectorFocusable.bind(null, options)\n    );\n  }\n\n  return candidates;\n};\n\nconst isTabbable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable, getTabIndex };\n","import { isShadowRoot, isHTMLElement } from '@floating-ui/utils/dom';\nimport * as React from 'react';\nimport { useLayoutEffect, useEffect } from 'react';\nimport { floor } from '@floating-ui/utils';\nimport { tabbable } from 'tabbable';\n\n// Avoid Chrome DevTools blue warning.\nfunction getPlatform() {\n  const uaData = navigator.userAgentData;\n  if (uaData != null && uaData.platform) {\n    return uaData.platform;\n  }\n  return navigator.platform;\n}\nfunction getUserAgent() {\n  const uaData = navigator.userAgentData;\n  if (uaData && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(_ref => {\n      let {\n        brand,\n        version\n      } = _ref;\n      return brand + \"/\" + version;\n    }).join(' ');\n  }\n  return navigator.userAgent;\n}\nfunction isSafari() {\n  // Chrome DevTools does not complain about navigator.vendor\n  return /apple/i.test(navigator.vendor);\n}\nfunction isAndroid() {\n  const re = /android/i;\n  return re.test(getPlatform()) || re.test(getUserAgent());\n}\nfunction isMac() {\n  return getPlatform().toLowerCase().startsWith('mac') && !navigator.maxTouchPoints;\n}\nfunction isJSDOM() {\n  return getUserAgent().includes('jsdom/');\n}\n\nconst FOCUSABLE_ATTRIBUTE = 'data-floating-ui-focusable';\nconst TYPEABLE_SELECTOR = \"input:not([type='hidden']):not([disabled]),\" + \"[contenteditable]:not([contenteditable='false']),textarea:not([disabled])\";\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\n\nfunction activeElement(doc) {\n  let activeElement = doc.activeElement;\n  while (((_activeElement = activeElement) == null || (_activeElement = _activeElement.shadowRoot) == null ? void 0 : _activeElement.activeElement) != null) {\n    var _activeElement;\n    activeElement = activeElement.shadowRoot.activeElement;\n  }\n  return activeElement;\n}\nfunction contains(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n\n  // then fallback to custom implementation with Shadow DOM support\n  if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    while (next) {\n      if (parent === next) {\n        return true;\n      }\n      // @ts-ignore\n      next = next.parentNode || next.host;\n    }\n  }\n\n  // Give up, the result is false\n  return false;\n}\nfunction getTarget(event) {\n  if ('composedPath' in event) {\n    return event.composedPath()[0];\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support\n  // `composedPath()`, but browsers without shadow DOM don't.\n  return event.target;\n}\nfunction isEventTargetWithin(event, node) {\n  if (node == null) {\n    return false;\n  }\n  if ('composedPath' in event) {\n    return event.composedPath().includes(node);\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support composedPath, but browsers without shadow dom don't\n  const e = event;\n  return e.target != null && node.contains(e.target);\n}\nfunction isRootElement(element) {\n  return element.matches('html,body');\n}\nfunction getDocument(node) {\n  return (node == null ? void 0 : node.ownerDocument) || document;\n}\nfunction isTypeableElement(element) {\n  return isHTMLElement(element) && element.matches(TYPEABLE_SELECTOR);\n}\nfunction isTypeableCombobox(element) {\n  if (!element) return false;\n  return element.getAttribute('role') === 'combobox' && isTypeableElement(element);\n}\nfunction matchesFocusVisible(element) {\n  // We don't want to block focus from working with `visibleOnly`\n  // (JSDOM doesn't match `:focus-visible` when the element has `:focus`)\n  if (!element || isJSDOM()) return true;\n  try {\n    return element.matches(':focus-visible');\n  } catch (_e) {\n    return true;\n  }\n}\nfunction getFloatingFocusElement(floatingElement) {\n  if (!floatingElement) {\n    return null;\n  }\n  // Try to find the element that has `{...getFloatingProps()}` spread on it.\n  // This indicates the floating element is acting as a positioning wrapper, and\n  // so focus should be managed on the child element with the event handlers and\n  // aria props.\n  return floatingElement.hasAttribute(FOCUSABLE_ATTRIBUTE) ? floatingElement : floatingElement.querySelector(\"[\" + FOCUSABLE_ATTRIBUTE + \"]\") || floatingElement;\n}\n\nfunction getNodeChildren(nodes, id, onlyOpenChildren) {\n  if (onlyOpenChildren === void 0) {\n    onlyOpenChildren = true;\n  }\n  let allChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && ((_node$context = node.context) == null ? void 0 : _node$context.open);\n  });\n  let currentChildren = allChildren;\n  while (currentChildren.length) {\n    currentChildren = onlyOpenChildren ? nodes.filter(node => {\n      var _currentChildren;\n      return (_currentChildren = currentChildren) == null ? void 0 : _currentChildren.some(n => {\n        var _node$context2;\n        return node.parentId === n.id && ((_node$context2 = node.context) == null ? void 0 : _node$context2.open);\n      });\n    }) : nodes;\n    allChildren = allChildren.concat(currentChildren);\n  }\n  return allChildren;\n}\nfunction getDeepestNode(nodes, id) {\n  let deepestNodeId;\n  let maxDepth = -1;\n  function findDeepest(nodeId, depth) {\n    if (depth > maxDepth) {\n      deepestNodeId = nodeId;\n      maxDepth = depth;\n    }\n    const children = getNodeChildren(nodes, nodeId);\n    children.forEach(child => {\n      findDeepest(child.id, depth + 1);\n    });\n  }\n  findDeepest(id, 0);\n  return nodes.find(node => node.id === deepestNodeId);\n}\nfunction getNodeAncestors(nodes, id) {\n  var _nodes$find;\n  let allAncestors = [];\n  let currentParentId = (_nodes$find = nodes.find(node => node.id === id)) == null ? void 0 : _nodes$find.parentId;\n  while (currentParentId) {\n    const currentNode = nodes.find(node => node.id === currentParentId);\n    currentParentId = currentNode == null ? void 0 : currentNode.parentId;\n    if (currentNode) {\n      allAncestors = allAncestors.concat(currentNode);\n    }\n  }\n  return allAncestors;\n}\n\nfunction stopEvent(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction isReactEvent(event) {\n  return 'nativeEvent' in event;\n}\n\n// License: https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/utils/src/isVirtualEvent.ts\nfunction isVirtualClick(event) {\n  // FIXME: Firefox is now emitting a deprecation warning for `mozInputSource`.\n  // Try to find a workaround for this. `react-aria` source still has the check.\n  if (event.mozInputSource === 0 && event.isTrusted) {\n    return true;\n  }\n  if (isAndroid() && event.pointerType) {\n    return event.type === 'click' && event.buttons === 1;\n  }\n  return event.detail === 0 && !event.pointerType;\n}\nfunction isVirtualPointerEvent(event) {\n  if (isJSDOM()) return false;\n  return !isAndroid() && event.width === 0 && event.height === 0 || isAndroid() && event.width === 1 && event.height === 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'mouse' ||\n  // iOS VoiceOver returns 0.333• for width/height.\n  event.width < 1 && event.height < 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'touch';\n}\nfunction isMouseLikePointerType(pointerType, strict) {\n  // On some Linux machines with Chromium, mouse inputs return a `pointerType`\n  // of \"pen\": https://github.com/floating-ui/floating-ui/issues/2015\n  const values = ['mouse', 'pen'];\n  if (!strict) {\n    values.push('', undefined);\n  }\n  return values.includes(pointerType);\n}\n\nvar index = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\nconst useInsertionEffect = SafeReact.useInsertionEffect;\nconst useSafeInsertionEffect = useInsertionEffect || (fn => fn());\nfunction useEffectEvent(callback) {\n  const ref = React.useRef(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      throw new Error('Cannot call an event handler while rendering.');\n    }\n  });\n  useSafeInsertionEffect(() => {\n    ref.current = callback;\n  });\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return ref.current == null ? void 0 : ref.current(...args);\n  }, []);\n}\n\nfunction isDifferentGridRow(index, cols, prevRow) {\n  return Math.floor(index / cols) !== prevRow;\n}\nfunction isIndexOutOfListBounds(listRef, index) {\n  return index < 0 || index >= listRef.current.length;\n}\nfunction getMinListIndex(listRef, disabledIndices) {\n  return findNonDisabledListIndex(listRef, {\n    disabledIndices\n  });\n}\nfunction getMaxListIndex(listRef, disabledIndices) {\n  return findNonDisabledListIndex(listRef, {\n    decrement: true,\n    startingIndex: listRef.current.length,\n    disabledIndices\n  });\n}\nfunction findNonDisabledListIndex(listRef, _temp) {\n  let {\n    startingIndex = -1,\n    decrement = false,\n    disabledIndices,\n    amount = 1\n  } = _temp === void 0 ? {} : _temp;\n  let index = startingIndex;\n  do {\n    index += decrement ? -amount : amount;\n  } while (index >= 0 && index <= listRef.current.length - 1 && isListIndexDisabled(listRef, index, disabledIndices));\n  return index;\n}\nfunction getGridNavigatedIndex(listRef, _ref) {\n  let {\n    event,\n    orientation,\n    loop,\n    rtl,\n    cols,\n    disabledIndices,\n    minIndex,\n    maxIndex,\n    prevIndex,\n    stopEvent: stop = false\n  } = _ref;\n  let nextIndex = prevIndex;\n  if (event.key === ARROW_UP) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = maxIndex;\n    } else {\n      nextIndex = findNonDisabledListIndex(listRef, {\n        startingIndex: nextIndex,\n        amount: cols,\n        decrement: true,\n        disabledIndices\n      });\n      if (loop && (prevIndex - cols < minIndex || nextIndex < 0)) {\n        const col = prevIndex % cols;\n        const maxCol = maxIndex % cols;\n        const offset = maxIndex - (maxCol - col);\n        if (maxCol === col) {\n          nextIndex = maxIndex;\n        } else {\n          nextIndex = maxCol > col ? offset : offset - cols;\n        }\n      }\n    }\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n  if (event.key === ARROW_DOWN) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = minIndex;\n    } else {\n      nextIndex = findNonDisabledListIndex(listRef, {\n        startingIndex: prevIndex,\n        amount: cols,\n        disabledIndices\n      });\n      if (loop && prevIndex + cols > maxIndex) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex % cols - cols,\n          amount: cols,\n          disabledIndices\n        });\n      }\n    }\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n\n  // Remains on the same row/column.\n  if (orientation === 'both') {\n    const prevRow = floor(prevIndex / cols);\n    if (event.key === (rtl ? ARROW_LEFT : ARROW_RIGHT)) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== cols - 1) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex,\n          disabledIndices\n        });\n        if (loop && isDifferentGridRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledListIndex(listRef, {\n            startingIndex: prevIndex - prevIndex % cols - 1,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      }\n      if (isDifferentGridRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    if (event.key === (rtl ? ARROW_RIGHT : ARROW_LEFT)) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== 0) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex,\n          decrement: true,\n          disabledIndices\n        });\n        if (loop && isDifferentGridRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledListIndex(listRef, {\n            startingIndex: prevIndex + (cols - prevIndex % cols),\n            decrement: true,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex + (cols - prevIndex % cols),\n          decrement: true,\n          disabledIndices\n        });\n      }\n      if (isDifferentGridRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    const lastRow = floor(maxIndex / cols) === prevRow;\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      if (loop && lastRow) {\n        nextIndex = event.key === (rtl ? ARROW_RIGHT : ARROW_LEFT) ? maxIndex : findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      } else {\n        nextIndex = prevIndex;\n      }\n    }\n  }\n  return nextIndex;\n}\n\n/** For each cell index, gets the item index that occupies that cell */\nfunction createGridCellMap(sizes, cols, dense) {\n  const cellMap = [];\n  let startIndex = 0;\n  sizes.forEach((_ref2, index) => {\n    let {\n      width,\n      height\n    } = _ref2;\n    if (width > cols) {\n      if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(\"[Floating UI]: Invalid grid - item width at index \" + index + \" is greater than grid columns\");\n      }\n    }\n    let itemPlaced = false;\n    if (dense) {\n      startIndex = 0;\n    }\n    while (!itemPlaced) {\n      const targetCells = [];\n      for (let i = 0; i < width; i++) {\n        for (let j = 0; j < height; j++) {\n          targetCells.push(startIndex + i + j * cols);\n        }\n      }\n      if (startIndex % cols + width <= cols && targetCells.every(cell => cellMap[cell] == null)) {\n        targetCells.forEach(cell => {\n          cellMap[cell] = index;\n        });\n        itemPlaced = true;\n      } else {\n        startIndex++;\n      }\n    }\n  });\n\n  // convert into a non-sparse array\n  return [...cellMap];\n}\n\n/** Gets cell index of an item's corner or -1 when index is -1. */\nfunction getGridCellIndexOfCorner(index, sizes, cellMap, cols, corner) {\n  if (index === -1) return -1;\n  const firstCellIndex = cellMap.indexOf(index);\n  const sizeItem = sizes[index];\n  switch (corner) {\n    case 'tl':\n      return firstCellIndex;\n    case 'tr':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + sizeItem.width - 1;\n    case 'bl':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + (sizeItem.height - 1) * cols;\n    case 'br':\n      return cellMap.lastIndexOf(index);\n  }\n}\n\n/** Gets all cell indices that correspond to the specified indices */\nfunction getGridCellIndices(indices, cellMap) {\n  return cellMap.flatMap((index, cellIndex) => indices.includes(index) ? [cellIndex] : []);\n}\nfunction isListIndexDisabled(listRef, index, disabledIndices) {\n  if (disabledIndices) {\n    return disabledIndices.includes(index);\n  }\n  const element = listRef.current[index];\n  return element == null || element.hasAttribute('disabled') || element.getAttribute('aria-disabled') === 'true';\n}\n\nconst getTabbableOptions = () => ({\n  getShadowRoot: true,\n  displayCheck:\n  // JSDOM does not support the `tabbable` library. To solve this we can\n  // check if `ResizeObserver` is a real function (not polyfilled), which\n  // determines if the current environment is JSDOM-like.\n  typeof ResizeObserver === 'function' && ResizeObserver.toString().includes('[native code]') ? 'full' : 'none'\n});\nfunction getTabbableIn(container, dir) {\n  const list = tabbable(container, getTabbableOptions());\n  const len = list.length;\n  if (len === 0) return;\n  const active = activeElement(getDocument(container));\n  const index = list.indexOf(active);\n  const nextIndex = index === -1 ? dir === 1 ? 0 : len - 1 : index + dir;\n  return list[nextIndex];\n}\nfunction getNextTabbable(referenceElement) {\n  return getTabbableIn(getDocument(referenceElement).body, 1) || referenceElement;\n}\nfunction getPreviousTabbable(referenceElement) {\n  return getTabbableIn(getDocument(referenceElement).body, -1) || referenceElement;\n}\nfunction isOutsideEvent(event, container) {\n  const containerElement = container || event.currentTarget;\n  const relatedTarget = event.relatedTarget;\n  return !relatedTarget || !contains(containerElement, relatedTarget);\n}\nfunction disableFocusInside(container) {\n  const tabbableElements = tabbable(container, getTabbableOptions());\n  tabbableElements.forEach(element => {\n    element.dataset.tabindex = element.getAttribute('tabindex') || '';\n    element.setAttribute('tabindex', '-1');\n  });\n}\nfunction enableFocusInside(container) {\n  const elements = container.querySelectorAll('[data-tabindex]');\n  elements.forEach(element => {\n    const tabindex = element.dataset.tabindex;\n    delete element.dataset.tabindex;\n    if (tabindex) {\n      element.setAttribute('tabindex', tabindex);\n    } else {\n      element.removeAttribute('tabindex');\n    }\n  });\n}\n\nexport { activeElement, contains, createGridCellMap, disableFocusInside, enableFocusInside, findNonDisabledListIndex, getDeepestNode, getDocument, getFloatingFocusElement, getGridCellIndexOfCorner, getGridCellIndices, getGridNavigatedIndex, getMaxListIndex, getMinListIndex, getNextTabbable, getNodeAncestors, getNodeChildren, getPlatform, getPreviousTabbable, getTabbableOptions, getTarget, getUserAgent, isAndroid, isDifferentGridRow, isEventTargetWithin, isIndexOutOfListBounds, isJSDOM, isListIndexDisabled, isMac, isMouseLikePointerType, isOutsideEvent, isReactEvent, isRootElement, isSafari, isTypeableCombobox, isTypeableElement, isVirtualClick, isVirtualPointerEvent, matchesFocusVisible, stopEvent, useEffectEvent, useLatestRef, index as useModernLayoutEffect };\n","import * as React from 'react';\nimport { useModernLayoutEffect, useEffectEvent, getMinListIndex, getMaxListIndex, createGridCellMap, isListIndexDisabled, getGridNavigatedIndex, getGridCellIndexOfCorner, getGridCellIndices, findNonDisabledListIndex, isIndexOutOfListBounds, useLatestRef, getDocument as getDocument$1, isMouseLikePointerType, contains as contains$1, isSafari, enableFocusInside, isOutsideEvent, getPreviousTabbable, getNextTabbable, disableFocusInside, isTypeableCombobox, getFloatingFocusElement, getTabbableOptions, getNodeAncestors, activeElement, getNodeChildren as getNodeChildren$1, stopEvent, getTarget as getTarget$1, isVirtualClick, isVirtualPointerEvent, getPlatform, isTypeableElement, isReactEvent, isRootElement, isEventTargetWithin, matchesFocusVisible, isMac, getDeepestNode, getUserAgent } from '@floating-ui/react/utils';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { getComputedStyle, isElement, isShadowRoot, getNodeName, isHTMLElement, getWindow, isLastTraversableNode, getParentNode, isWebKit } from '@floating-ui/utils/dom';\nimport { tabbable, isTabbable, focusable } from 'tabbable';\nimport * as ReactDOM from 'react-dom';\nimport { getOverflowAncestors, useFloating as useFloating$1, offset, detectOverflow } from '@floating-ui/react-dom';\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, getOverflowAncestors, hide, inline, limitShift, offset, platform, shift, size } from '@floating-ui/react-dom';\nimport { evaluate, max, round, min } from '@floating-ui/utils';\n\n/**\n * Merges an array of refs into a single memoized callback ref or `null`.\n * @see https://floating-ui.com/docs/react-utils#usemergerefs\n */\nfunction useMergeRefs(refs) {\n  const cleanupRef = React.useRef(undefined);\n  const refEffect = React.useCallback(instance => {\n    const cleanups = refs.map(ref => {\n      if (ref == null) {\n        return;\n      }\n      if (typeof ref === 'function') {\n        const refCallback = ref;\n        const refCleanup = refCallback(instance);\n        return typeof refCleanup === 'function' ? refCleanup : () => {\n          refCallback(null);\n        };\n      }\n      ref.current = instance;\n      return () => {\n        ref.current = null;\n      };\n    });\n    return () => {\n      cleanups.forEach(refCleanup => refCleanup == null ? void 0 : refCleanup());\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n  return React.useMemo(() => {\n    if (refs.every(ref => ref == null)) {\n      return null;\n    }\n    return value => {\n      if (cleanupRef.current) {\n        cleanupRef.current();\n        cleanupRef.current = undefined;\n      }\n      if (value != null) {\n        cleanupRef.current = refEffect(value);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\nfunction sortByDocumentPosition(a, b) {\n  const position = a.compareDocumentPosition(b);\n  if (position & Node.DOCUMENT_POSITION_FOLLOWING || position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n    return -1;\n  }\n  if (position & Node.DOCUMENT_POSITION_PRECEDING || position & Node.DOCUMENT_POSITION_CONTAINS) {\n    return 1;\n  }\n  return 0;\n}\nconst FloatingListContext = /*#__PURE__*/React.createContext({\n  register: () => {},\n  unregister: () => {},\n  map: /*#__PURE__*/new Map(),\n  elementsRef: {\n    current: []\n  }\n});\n/**\n * Provides context for a list of items within the floating element.\n * @see https://floating-ui.com/docs/FloatingList\n */\nfunction FloatingList(props) {\n  const {\n    children,\n    elementsRef,\n    labelsRef\n  } = props;\n  const [nodes, setNodes] = React.useState(() => new Set());\n  const register = React.useCallback(node => {\n    setNodes(prevSet => new Set(prevSet).add(node));\n  }, []);\n  const unregister = React.useCallback(node => {\n    setNodes(prevSet => {\n      const set = new Set(prevSet);\n      set.delete(node);\n      return set;\n    });\n  }, []);\n  const map = React.useMemo(() => {\n    const newMap = new Map();\n    const sortedNodes = Array.from(nodes.keys()).sort(sortByDocumentPosition);\n    sortedNodes.forEach((node, index) => {\n      newMap.set(node, index);\n    });\n    return newMap;\n  }, [nodes]);\n  return /*#__PURE__*/jsx(FloatingListContext.Provider, {\n    value: React.useMemo(() => ({\n      register,\n      unregister,\n      map,\n      elementsRef,\n      labelsRef\n    }), [register, unregister, map, elementsRef, labelsRef]),\n    children: children\n  });\n}\n/**\n * Used to register a list item and its index (DOM position) in the\n * `FloatingList`.\n * @see https://floating-ui.com/docs/FloatingList#uselistitem\n */\nfunction useListItem(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    label\n  } = props;\n  const {\n    register,\n    unregister,\n    map,\n    elementsRef,\n    labelsRef\n  } = React.useContext(FloatingListContext);\n  const [index, setIndex] = React.useState(null);\n  const componentRef = React.useRef(null);\n  const ref = React.useCallback(node => {\n    componentRef.current = node;\n    if (index !== null) {\n      elementsRef.current[index] = node;\n      if (labelsRef) {\n        var _node$textContent;\n        const isLabelDefined = label !== undefined;\n        labelsRef.current[index] = isLabelDefined ? label : (_node$textContent = node == null ? void 0 : node.textContent) != null ? _node$textContent : null;\n      }\n    }\n  }, [index, elementsRef, labelsRef, label]);\n  useModernLayoutEffect(() => {\n    const node = componentRef.current;\n    if (node) {\n      register(node);\n      return () => {\n        unregister(node);\n      };\n    }\n  }, [register, unregister]);\n  useModernLayoutEffect(() => {\n    const index = componentRef.current ? map.get(componentRef.current) : null;\n    if (index != null) {\n      setIndex(index);\n    }\n  }, [map]);\n  return React.useMemo(() => ({\n    ref,\n    index: index == null ? -1 : index\n  }), [index, ref]);\n}\n\nconst FOCUSABLE_ATTRIBUTE = 'data-floating-ui-focusable';\nconst ACTIVE_KEY = 'active';\nconst SELECTED_KEY = 'selected';\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\n\nfunction renderJsx(render, computedProps) {\n  if (typeof render === 'function') {\n    return render(computedProps);\n  }\n  if (render) {\n    return /*#__PURE__*/React.cloneElement(render, computedProps);\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    ...computedProps\n  });\n}\nconst CompositeContext = /*#__PURE__*/React.createContext({\n  activeIndex: 0,\n  onNavigate: () => {}\n});\nconst horizontalKeys = [ARROW_LEFT, ARROW_RIGHT];\nconst verticalKeys = [ARROW_UP, ARROW_DOWN];\nconst allKeys = [...horizontalKeys, ...verticalKeys];\n\n/**\n * Creates a single tab stop whose items are navigated by arrow keys, which\n * provides list navigation outside of floating element contexts.\n *\n * This is useful to enable navigation of a list of items that aren’t part of a\n * floating element. A menubar is an example of a composite, with each reference\n * element being an item.\n * @see https://floating-ui.com/docs/Composite\n */\nconst Composite = /*#__PURE__*/React.forwardRef(function Composite(props, forwardedRef) {\n  const {\n    render,\n    orientation = 'both',\n    loop = true,\n    rtl = false,\n    cols = 1,\n    disabledIndices,\n    activeIndex: externalActiveIndex,\n    onNavigate: externalSetActiveIndex,\n    itemSizes,\n    dense = false,\n    ...domProps\n  } = props;\n  const [internalActiveIndex, internalSetActiveIndex] = React.useState(0);\n  const activeIndex = externalActiveIndex != null ? externalActiveIndex : internalActiveIndex;\n  const onNavigate = useEffectEvent(externalSetActiveIndex != null ? externalSetActiveIndex : internalSetActiveIndex);\n  const elementsRef = React.useRef([]);\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const contextValue = React.useMemo(() => ({\n    activeIndex,\n    onNavigate\n  }), [activeIndex, onNavigate]);\n  const isGrid = cols > 1;\n  function handleKeyDown(event) {\n    if (!allKeys.includes(event.key)) return;\n    let nextIndex = activeIndex;\n    const minIndex = getMinListIndex(elementsRef, disabledIndices);\n    const maxIndex = getMaxListIndex(elementsRef, disabledIndices);\n    const horizontalEndKey = rtl ? ARROW_LEFT : ARROW_RIGHT;\n    const horizontalStartKey = rtl ? ARROW_RIGHT : ARROW_LEFT;\n    if (isGrid) {\n      const sizes = itemSizes || Array.from({\n        length: elementsRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = createGridCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isListIndexDisabled(elementsRef, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isListIndexDisabled(elementsRef, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      const maybeNextIndex = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex ? elementsRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        rtl,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getGridCellIndices([...(disabledIndices || elementsRef.current.map((_, index) => isListIndexDisabled(elementsRef, index) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getGridCellIndexOfCorner(activeIndex > maxIndex ? minIndex : activeIndex, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction we're\n        // moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === horizontalEndKey ? 'tr' : 'tl')\n      })];\n      if (maybeNextIndex != null) {\n        nextIndex = maybeNextIndex;\n      }\n    }\n    const toEndKeys = {\n      horizontal: [horizontalEndKey],\n      vertical: [ARROW_DOWN],\n      both: [horizontalEndKey, ARROW_DOWN]\n    }[orientation];\n    const toStartKeys = {\n      horizontal: [horizontalStartKey],\n      vertical: [ARROW_UP],\n      both: [horizontalStartKey, ARROW_UP]\n    }[orientation];\n    const preventedKeys = isGrid ? allKeys : {\n      horizontal: horizontalKeys,\n      vertical: verticalKeys,\n      both: allKeys\n    }[orientation];\n    if (nextIndex === activeIndex && [...toEndKeys, ...toStartKeys].includes(event.key)) {\n      if (loop && nextIndex === maxIndex && toEndKeys.includes(event.key)) {\n        nextIndex = minIndex;\n      } else if (loop && nextIndex === minIndex && toStartKeys.includes(event.key)) {\n        nextIndex = maxIndex;\n      } else {\n        nextIndex = findNonDisabledListIndex(elementsRef, {\n          startingIndex: nextIndex,\n          decrement: toStartKeys.includes(event.key),\n          disabledIndices\n        });\n      }\n    }\n    if (nextIndex !== activeIndex && !isIndexOutOfListBounds(elementsRef, nextIndex)) {\n      var _elementsRef$current$;\n      event.stopPropagation();\n      if (preventedKeys.includes(event.key)) {\n        event.preventDefault();\n      }\n      onNavigate(nextIndex);\n      (_elementsRef$current$ = elementsRef.current[nextIndex]) == null || _elementsRef$current$.focus();\n    }\n  }\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: forwardedRef,\n    'aria-orientation': orientation === 'both' ? undefined : orientation,\n    onKeyDown(e) {\n      domProps.onKeyDown == null || domProps.onKeyDown(e);\n      renderElementProps.onKeyDown == null || renderElementProps.onKeyDown(e);\n      handleKeyDown(e);\n    }\n  };\n  return /*#__PURE__*/jsx(CompositeContext.Provider, {\n    value: contextValue,\n    children: /*#__PURE__*/jsx(FloatingList, {\n      elementsRef: elementsRef,\n      children: renderJsx(render, computedProps)\n    })\n  });\n});\n/**\n * @see https://floating-ui.com/docs/Composite\n */\nconst CompositeItem = /*#__PURE__*/React.forwardRef(function CompositeItem(props, forwardedRef) {\n  const {\n    render,\n    ...domProps\n  } = props;\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const {\n    activeIndex,\n    onNavigate\n  } = React.useContext(CompositeContext);\n  const {\n    ref,\n    index\n  } = useListItem();\n  const mergedRef = useMergeRefs([ref, forwardedRef, renderElementProps.ref]);\n  const isActive = activeIndex === index;\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: mergedRef,\n    tabIndex: isActive ? 0 : -1,\n    'data-active': isActive ? '' : undefined,\n    onFocus(e) {\n      domProps.onFocus == null || domProps.onFocus(e);\n      renderElementProps.onFocus == null || renderElementProps.onFocus(e);\n      onNavigate(index);\n    }\n  };\n  return renderJsx(render, computedProps);\n});\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nlet serverHandoffComplete = false;\nlet count = 0;\nconst genId = () => // Ensure the id is unique with multiple independent versions of Floating UI\n// on <React 18\n\"floating-ui-\" + Math.random().toString(36).slice(2, 6) + count++;\nfunction useFloatingId() {\n  const [id, setId] = React.useState(() => serverHandoffComplete ? genId() : undefined);\n  useModernLayoutEffect(() => {\n    if (id == null) {\n      setId(genId());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  React.useEffect(() => {\n    serverHandoffComplete = true;\n  }, []);\n  return id;\n}\nconst useReactId = SafeReact.useId;\n\n/**\n * Uses React 18's built-in `useId()` when available, or falls back to a\n * slightly less performant (requiring a double render) implementation for\n * earlier React versions.\n * @see https://floating-ui.com/docs/react-utils#useid\n */\nconst useId = useReactId || useFloatingId;\n\nlet devMessageSet;\nif (process.env.NODE_ENV !== \"production\") {\n  devMessageSet = /*#__PURE__*/new Set();\n}\nfunction warn() {\n  var _devMessageSet;\n  for (var _len = arguments.length, messages = new Array(_len), _key = 0; _key < _len; _key++) {\n    messages[_key] = arguments[_key];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet = devMessageSet) != null && _devMessageSet.has(message))) {\n    var _devMessageSet2;\n    (_devMessageSet2 = devMessageSet) == null || _devMessageSet2.add(message);\n    console.warn(message);\n  }\n}\nfunction error() {\n  var _devMessageSet3;\n  for (var _len2 = arguments.length, messages = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    messages[_key2] = arguments[_key2];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet3 = devMessageSet) != null && _devMessageSet3.has(message))) {\n    var _devMessageSet4;\n    (_devMessageSet4 = devMessageSet) == null || _devMessageSet4.add(message);\n    console.error(message);\n  }\n}\n\n/**\n * Renders a pointing arrow triangle.\n * @see https://floating-ui.com/docs/FloatingArrow\n */\nconst FloatingArrow = /*#__PURE__*/React.forwardRef(function FloatingArrow(props, ref) {\n  const {\n    context: {\n      placement,\n      elements: {\n        floating\n      },\n      middlewareData: {\n        arrow,\n        shift\n      }\n    },\n    width = 14,\n    height = 7,\n    tipRadius = 0,\n    strokeWidth = 0,\n    staticOffset,\n    stroke,\n    d,\n    style: {\n      transform,\n      ...restStyle\n    } = {},\n    ...rest\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!ref) {\n      warn('The `ref` prop is required for `FloatingArrow`.');\n    }\n  }\n  const clipPathId = useId();\n  const [isRTL, setIsRTL] = React.useState(false);\n\n  // https://github.com/floating-ui/floating-ui/issues/2932\n  useModernLayoutEffect(() => {\n    if (!floating) return;\n    const isRTL = getComputedStyle(floating).direction === 'rtl';\n    if (isRTL) {\n      setIsRTL(true);\n    }\n  }, [floating]);\n  if (!floating) {\n    return null;\n  }\n  const [side, alignment] = placement.split('-');\n  const isVerticalSide = side === 'top' || side === 'bottom';\n  let computedStaticOffset = staticOffset;\n  if (isVerticalSide && shift != null && shift.x || !isVerticalSide && shift != null && shift.y) {\n    computedStaticOffset = null;\n  }\n\n  // Strokes must be double the border width, this ensures the stroke's width\n  // works as you'd expect.\n  const computedStrokeWidth = strokeWidth * 2;\n  const halfStrokeWidth = computedStrokeWidth / 2;\n  const svgX = width / 2 * (tipRadius / -8 + 1);\n  const svgY = height / 2 * tipRadius / 4;\n  const isCustomShape = !!d;\n  const yOffsetProp = computedStaticOffset && alignment === 'end' ? 'bottom' : 'top';\n  let xOffsetProp = computedStaticOffset && alignment === 'end' ? 'right' : 'left';\n  if (computedStaticOffset && isRTL) {\n    xOffsetProp = alignment === 'end' ? 'left' : 'right';\n  }\n  const arrowX = (arrow == null ? void 0 : arrow.x) != null ? computedStaticOffset || arrow.x : '';\n  const arrowY = (arrow == null ? void 0 : arrow.y) != null ? computedStaticOffset || arrow.y : '';\n  const dValue = d || 'M0,0' + (\" H\" + width) + (\" L\" + (width - svgX) + \",\" + (height - svgY)) + (\" Q\" + width / 2 + \",\" + height + \" \" + svgX + \",\" + (height - svgY)) + ' Z';\n  const rotation = {\n    top: isCustomShape ? 'rotate(180deg)' : '',\n    left: isCustomShape ? 'rotate(90deg)' : 'rotate(-90deg)',\n    bottom: isCustomShape ? '' : 'rotate(180deg)',\n    right: isCustomShape ? 'rotate(-90deg)' : 'rotate(90deg)'\n  }[side];\n  return /*#__PURE__*/jsxs(\"svg\", {\n    ...rest,\n    \"aria-hidden\": true,\n    ref: ref,\n    width: isCustomShape ? width : width + computedStrokeWidth,\n    height: width,\n    viewBox: \"0 0 \" + width + \" \" + (height > width ? height : width),\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      [xOffsetProp]: arrowX,\n      [yOffsetProp]: arrowY,\n      [side]: isVerticalSide || isCustomShape ? '100%' : \"calc(100% - \" + computedStrokeWidth / 2 + \"px)\",\n      transform: [rotation, transform].filter(t => !!t).join(' '),\n      ...restStyle\n    },\n    children: [computedStrokeWidth > 0 && /*#__PURE__*/jsx(\"path\", {\n      clipPath: \"url(#\" + clipPathId + \")\",\n      fill: \"none\",\n      stroke: stroke\n      // Account for the stroke on the fill path rendered below.\n      ,\n      strokeWidth: computedStrokeWidth + (d ? 0 : 1),\n      d: dValue\n    }), /*#__PURE__*/jsx(\"path\", {\n      stroke: computedStrokeWidth && !d ? rest.fill : 'none',\n      d: dValue\n    }), /*#__PURE__*/jsx(\"clipPath\", {\n      id: clipPathId,\n      children: /*#__PURE__*/jsx(\"rect\", {\n        x: -halfStrokeWidth,\n        y: halfStrokeWidth * (isCustomShape ? -1 : 1),\n        width: width + computedStrokeWidth,\n        height: width\n      })\n    })]\n  });\n});\n\nfunction createEventEmitter() {\n  const map = new Map();\n  return {\n    emit(event, data) {\n      var _map$get;\n      (_map$get = map.get(event)) == null || _map$get.forEach(listener => listener(data));\n    },\n    on(event, listener) {\n      if (!map.has(event)) {\n        map.set(event, new Set());\n      }\n      map.get(event).add(listener);\n    },\n    off(event, listener) {\n      var _map$get2;\n      (_map$get2 = map.get(event)) == null || _map$get2.delete(listener);\n    }\n  };\n}\n\nconst FloatingNodeContext = /*#__PURE__*/React.createContext(null);\nconst FloatingTreeContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the parent node id for nested floating elements, if available.\n * Returns `null` for top-level floating elements.\n */\nconst useFloatingParentNodeId = () => {\n  var _React$useContext;\n  return ((_React$useContext = React.useContext(FloatingNodeContext)) == null ? void 0 : _React$useContext.id) || null;\n};\n\n/**\n * Returns the nearest floating tree context, if available.\n */\nconst useFloatingTree = () => React.useContext(FloatingTreeContext);\n\n/**\n * Registers a node into the `FloatingTree`, returning its id.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction useFloatingNodeId(customParentId) {\n  const id = useId();\n  const tree = useFloatingTree();\n  const reactParentId = useFloatingParentNodeId();\n  const parentId = customParentId || reactParentId;\n  useModernLayoutEffect(() => {\n    if (!id) return;\n    const node = {\n      id,\n      parentId\n    };\n    tree == null || tree.addNode(node);\n    return () => {\n      tree == null || tree.removeNode(node);\n    };\n  }, [tree, id, parentId]);\n  return id;\n}\n/**\n * Provides parent node context for nested floating elements.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingNode(props) {\n  const {\n    children,\n    id\n  } = props;\n  const parentId = useFloatingParentNodeId();\n  return /*#__PURE__*/jsx(FloatingNodeContext.Provider, {\n    value: React.useMemo(() => ({\n      id,\n      parentId\n    }), [id, parentId]),\n    children: children\n  });\n}\n/**\n * Provides context for nested floating elements when they are not children of\n * each other on the DOM.\n * This is not necessary in all cases, except when there must be explicit communication between parent and child floating elements. It is necessary for:\n * - The `bubbles` option in the `useDismiss()` Hook\n * - Nested virtual list navigation\n * - Nested floating elements that each open on hover\n * - Custom communication between parent and child floating elements\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingTree(props) {\n  const {\n    children\n  } = props;\n  const nodesRef = React.useRef([]);\n  const addNode = React.useCallback(node => {\n    nodesRef.current = [...nodesRef.current, node];\n  }, []);\n  const removeNode = React.useCallback(node => {\n    nodesRef.current = nodesRef.current.filter(n => n !== node);\n  }, []);\n  const [events] = React.useState(() => createEventEmitter());\n  return /*#__PURE__*/jsx(FloatingTreeContext.Provider, {\n    value: React.useMemo(() => ({\n      nodesRef,\n      addNode,\n      removeNode,\n      events\n    }), [addNode, removeNode, events]),\n    children: children\n  });\n}\n\nfunction createAttribute(name) {\n  return \"data-floating-ui-\" + name;\n}\n\nfunction clearTimeoutIfSet(timeoutRef) {\n  if (timeoutRef.current !== -1) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = -1;\n  }\n}\n\nconst safePolygonIdentifier = /*#__PURE__*/createAttribute('safe-polygon');\nfunction getDelay(value, prop, pointerType) {\n  if (pointerType && !isMouseLikePointerType(pointerType)) {\n    return 0;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'function') {\n    const result = value();\n    if (typeof result === 'number') {\n      return result;\n    }\n    return result == null ? void 0 : result[prop];\n  }\n  return value == null ? void 0 : value[prop];\n}\nfunction getRestMs(value) {\n  if (typeof value === 'function') {\n    return value();\n  }\n  return value;\n}\n/**\n * Opens the floating element while hovering over the reference element, like\n * CSS `:hover`.\n * @see https://floating-ui.com/docs/useHover\n */\nfunction useHover(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    events,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    delay = 0,\n    handleClose = null,\n    mouseOnly = false,\n    restMs = 0,\n    move = true\n  } = props;\n  const tree = useFloatingTree();\n  const parentId = useFloatingParentNodeId();\n  const handleCloseRef = useLatestRef(handleClose);\n  const delayRef = useLatestRef(delay);\n  const openRef = useLatestRef(open);\n  const restMsRef = useLatestRef(restMs);\n  const pointerTypeRef = React.useRef();\n  const timeoutRef = React.useRef(-1);\n  const handlerRef = React.useRef();\n  const restTimeoutRef = React.useRef(-1);\n  const blockMouseMoveRef = React.useRef(true);\n  const performedPointerEventsMutationRef = React.useRef(false);\n  const unbindMouseMoveRef = React.useRef(() => {});\n  const restTimeoutPendingRef = React.useRef(false);\n  const isHoverOpen = React.useCallback(() => {\n    var _dataRef$current$open;\n    const type = (_dataRef$current$open = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open.type;\n    return (type == null ? void 0 : type.includes('mouse')) && type !== 'mousedown';\n  }, [dataRef]);\n\n  // When closing before opening, clear the delay timeouts to cancel it\n  // from showing.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        open\n      } = _ref;\n      if (!open) {\n        clearTimeoutIfSet(timeoutRef);\n        clearTimeoutIfSet(restTimeoutRef);\n        blockMouseMoveRef.current = true;\n        restTimeoutPendingRef.current = false;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [enabled, events]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    if (!handleCloseRef.current) return;\n    if (!open) return;\n    function onLeave(event) {\n      if (isHoverOpen()) {\n        onOpenChange(false, event, 'hover');\n      }\n    }\n    const html = getDocument$1(elements.floating).documentElement;\n    html.addEventListener('mouseleave', onLeave);\n    return () => {\n      html.removeEventListener('mouseleave', onLeave);\n    };\n  }, [elements.floating, open, onOpenChange, enabled, handleCloseRef, isHoverOpen]);\n  const closeWithDelay = React.useCallback(function (event, runElseBranch, reason) {\n    if (runElseBranch === void 0) {\n      runElseBranch = true;\n    }\n    if (reason === void 0) {\n      reason = 'hover';\n    }\n    const closeDelay = getDelay(delayRef.current, 'close', pointerTypeRef.current);\n    if (closeDelay && !handlerRef.current) {\n      clearTimeoutIfSet(timeoutRef);\n      timeoutRef.current = window.setTimeout(() => onOpenChange(false, event, reason), closeDelay);\n    } else if (runElseBranch) {\n      clearTimeoutIfSet(timeoutRef);\n      onOpenChange(false, event, reason);\n    }\n  }, [delayRef, onOpenChange]);\n  const cleanupMouseMoveHandler = useEffectEvent(() => {\n    unbindMouseMoveRef.current();\n    handlerRef.current = undefined;\n  });\n  const clearPointerEvents = useEffectEvent(() => {\n    if (performedPointerEventsMutationRef.current) {\n      const body = getDocument$1(elements.floating).body;\n      body.style.pointerEvents = '';\n      body.removeAttribute(safePolygonIdentifier);\n      performedPointerEventsMutationRef.current = false;\n    }\n  });\n  const isClickLikeOpenEvent = useEffectEvent(() => {\n    return dataRef.current.openEvent ? ['click', 'mousedown'].includes(dataRef.current.openEvent.type) : false;\n  });\n\n  // Registering the mouse events on the reference directly to bypass React's\n  // delegation system. If the cursor was on a disabled element and then entered\n  // the reference (no gap), `mouseenter` doesn't fire in the delegation system.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onReferenceMouseEnter(event) {\n      clearTimeoutIfSet(timeoutRef);\n      blockMouseMoveRef.current = false;\n      if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current) || getRestMs(restMsRef.current) > 0 && !getDelay(delayRef.current, 'open')) {\n        return;\n      }\n      const openDelay = getDelay(delayRef.current, 'open', pointerTypeRef.current);\n      if (openDelay) {\n        timeoutRef.current = window.setTimeout(() => {\n          if (!openRef.current) {\n            onOpenChange(true, event, 'hover');\n          }\n        }, openDelay);\n      } else if (!open) {\n        onOpenChange(true, event, 'hover');\n      }\n    }\n    function onReferenceMouseLeave(event) {\n      if (isClickLikeOpenEvent()) {\n        clearPointerEvents();\n        return;\n      }\n      unbindMouseMoveRef.current();\n      const doc = getDocument$1(elements.floating);\n      clearTimeoutIfSet(restTimeoutRef);\n      restTimeoutPendingRef.current = false;\n      if (handleCloseRef.current && dataRef.current.floatingContext) {\n        // Prevent clearing `onScrollMouseLeave` timeout.\n        if (!open) {\n          clearTimeoutIfSet(timeoutRef);\n        }\n        handlerRef.current = handleCloseRef.current({\n          ...dataRef.current.floatingContext,\n          tree,\n          x: event.clientX,\n          y: event.clientY,\n          onClose() {\n            clearPointerEvents();\n            cleanupMouseMoveHandler();\n            if (!isClickLikeOpenEvent()) {\n              closeWithDelay(event, true, 'safe-polygon');\n            }\n          }\n        });\n        const handler = handlerRef.current;\n        doc.addEventListener('mousemove', handler);\n        unbindMouseMoveRef.current = () => {\n          doc.removeEventListener('mousemove', handler);\n        };\n        return;\n      }\n\n      // Allow interactivity without `safePolygon` on touch devices. With a\n      // pointer, a short close delay is an alternative, so it should work\n      // consistently.\n      const shouldClose = pointerTypeRef.current === 'touch' ? !contains$1(elements.floating, event.relatedTarget) : true;\n      if (shouldClose) {\n        closeWithDelay(event);\n      }\n    }\n\n    // Ensure the floating element closes after scrolling even if the pointer\n    // did not move.\n    // https://github.com/floating-ui/floating-ui/discussions/1692\n    function onScrollMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      if (!dataRef.current.floatingContext) return;\n      handleCloseRef.current == null || handleCloseRef.current({\n        ...dataRef.current.floatingContext,\n        tree,\n        x: event.clientX,\n        y: event.clientY,\n        onClose() {\n          clearPointerEvents();\n          cleanupMouseMoveHandler();\n          if (!isClickLikeOpenEvent()) {\n            closeWithDelay(event);\n          }\n        }\n      })(event);\n    }\n    function onFloatingMouseEnter() {\n      clearTimeoutIfSet(timeoutRef);\n    }\n    function onFloatingMouseLeave(event) {\n      if (!isClickLikeOpenEvent()) {\n        closeWithDelay(event, false);\n      }\n    }\n    if (isElement(elements.domReference)) {\n      const reference = elements.domReference;\n      const floating = elements.floating;\n      if (open) {\n        reference.addEventListener('mouseleave', onScrollMouseLeave);\n      }\n      if (move) {\n        reference.addEventListener('mousemove', onReferenceMouseEnter, {\n          once: true\n        });\n      }\n      reference.addEventListener('mouseenter', onReferenceMouseEnter);\n      reference.addEventListener('mouseleave', onReferenceMouseLeave);\n      if (floating) {\n        floating.addEventListener('mouseleave', onScrollMouseLeave);\n        floating.addEventListener('mouseenter', onFloatingMouseEnter);\n        floating.addEventListener('mouseleave', onFloatingMouseLeave);\n      }\n      return () => {\n        if (open) {\n          reference.removeEventListener('mouseleave', onScrollMouseLeave);\n        }\n        if (move) {\n          reference.removeEventListener('mousemove', onReferenceMouseEnter);\n        }\n        reference.removeEventListener('mouseenter', onReferenceMouseEnter);\n        reference.removeEventListener('mouseleave', onReferenceMouseLeave);\n        if (floating) {\n          floating.removeEventListener('mouseleave', onScrollMouseLeave);\n          floating.removeEventListener('mouseenter', onFloatingMouseEnter);\n          floating.removeEventListener('mouseleave', onFloatingMouseLeave);\n        }\n      };\n    }\n  }, [elements, enabled, context, mouseOnly, move, closeWithDelay, cleanupMouseMoveHandler, clearPointerEvents, onOpenChange, open, openRef, tree, delayRef, handleCloseRef, dataRef, isClickLikeOpenEvent, restMsRef]);\n\n  // Block pointer-events of every element other than the reference and floating\n  // while the floating element is open and has a `handleClose` handler. Also\n  // handles nested floating elements.\n  // https://github.com/floating-ui/floating-ui/issues/1722\n  useModernLayoutEffect(() => {\n    var _handleCloseRef$curre;\n    if (!enabled) return;\n    if (open && (_handleCloseRef$curre = handleCloseRef.current) != null && _handleCloseRef$curre.__options.blockPointerEvents && isHoverOpen()) {\n      performedPointerEventsMutationRef.current = true;\n      const floatingEl = elements.floating;\n      if (isElement(elements.domReference) && floatingEl) {\n        var _tree$nodesRef$curren;\n        const body = getDocument$1(elements.floating).body;\n        body.setAttribute(safePolygonIdentifier, '');\n        const ref = elements.domReference;\n        const parentFloating = tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren.elements.floating;\n        if (parentFloating) {\n          parentFloating.style.pointerEvents = '';\n        }\n        body.style.pointerEvents = 'none';\n        ref.style.pointerEvents = 'auto';\n        floatingEl.style.pointerEvents = 'auto';\n        return () => {\n          body.style.pointerEvents = '';\n          ref.style.pointerEvents = '';\n          floatingEl.style.pointerEvents = '';\n        };\n      }\n    }\n  }, [enabled, open, parentId, elements, tree, handleCloseRef, isHoverOpen]);\n  useModernLayoutEffect(() => {\n    if (!open) {\n      pointerTypeRef.current = undefined;\n      restTimeoutPendingRef.current = false;\n      cleanupMouseMoveHandler();\n      clearPointerEvents();\n    }\n  }, [open, cleanupMouseMoveHandler, clearPointerEvents]);\n  React.useEffect(() => {\n    return () => {\n      cleanupMouseMoveHandler();\n      clearTimeoutIfSet(timeoutRef);\n      clearTimeoutIfSet(restTimeoutRef);\n      clearPointerEvents();\n    };\n  }, [enabled, elements.domReference, cleanupMouseMoveHandler, clearPointerEvents]);\n  const reference = React.useMemo(() => {\n    function setPointerRef(event) {\n      pointerTypeRef.current = event.pointerType;\n    }\n    return {\n      onPointerDown: setPointerRef,\n      onPointerEnter: setPointerRef,\n      onMouseMove(event) {\n        const {\n          nativeEvent\n        } = event;\n        function handleMouseMove() {\n          if (!blockMouseMoveRef.current && !openRef.current) {\n            onOpenChange(true, nativeEvent, 'hover');\n          }\n        }\n        if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current)) {\n          return;\n        }\n        if (open || getRestMs(restMsRef.current) === 0) {\n          return;\n        }\n\n        // Ignore insignificant movements to account for tremors.\n        if (restTimeoutPendingRef.current && event.movementX ** 2 + event.movementY ** 2 < 2) {\n          return;\n        }\n        clearTimeoutIfSet(restTimeoutRef);\n        if (pointerTypeRef.current === 'touch') {\n          handleMouseMove();\n        } else {\n          restTimeoutPendingRef.current = true;\n          restTimeoutRef.current = window.setTimeout(handleMouseMove, getRestMs(restMsRef.current));\n        }\n      }\n    };\n  }, [mouseOnly, onOpenChange, open, openRef, restMsRef]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst NOOP = () => {};\nconst FloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  delay: 0,\n  initialDelay: 0,\n  timeoutMs: 0,\n  currentId: null,\n  setCurrentId: NOOP,\n  setState: NOOP,\n  isInstantPhase: false\n});\n\n/**\n * @deprecated\n * Use the return value of `useDelayGroup()` instead.\n */\nconst useDelayGroupContext = () => React.useContext(FloatingDelayGroupContext);\n/**\n * Provides context for a group of floating elements that should share a\n * `delay`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction FloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const [state, setState] = React.useReducer((prev, next) => ({\n    ...prev,\n    ...next\n  }), {\n    delay,\n    timeoutMs,\n    initialDelay: delay,\n    currentId: null,\n    isInstantPhase: false\n  });\n  const initialCurrentIdRef = React.useRef(null);\n  const setCurrentId = React.useCallback(currentId => {\n    setState({\n      currentId\n    });\n  }, []);\n  useModernLayoutEffect(() => {\n    if (state.currentId) {\n      if (initialCurrentIdRef.current === null) {\n        initialCurrentIdRef.current = state.currentId;\n      } else if (!state.isInstantPhase) {\n        setState({\n          isInstantPhase: true\n        });\n      }\n    } else {\n      if (state.isInstantPhase) {\n        setState({\n          isInstantPhase: false\n        });\n      }\n      initialCurrentIdRef.current = null;\n    }\n  }, [state.currentId, state.isInstantPhase]);\n  return /*#__PURE__*/jsx(FloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      ...state,\n      setState,\n      setCurrentId\n    }), [state, setCurrentId]),\n    children: children\n  });\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `FloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    id: optionId,\n    enabled = true\n  } = options;\n  const id = optionId != null ? optionId : floatingId;\n  const groupContext = useDelayGroupContext();\n  const {\n    currentId,\n    setCurrentId,\n    initialDelay,\n    setState,\n    timeoutMs\n  } = groupContext;\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!currentId) return;\n    setState({\n      delay: {\n        open: 1,\n        close: getDelay(initialDelay, 'close')\n      }\n    });\n    if (currentId !== id) {\n      onOpenChange(false);\n    }\n  }, [enabled, id, onOpenChange, setState, currentId, initialDelay]);\n  useModernLayoutEffect(() => {\n    function unset() {\n      onOpenChange(false);\n      setState({\n        delay: initialDelay,\n        currentId: null\n      });\n    }\n    if (!enabled) return;\n    if (!currentId) return;\n    if (!open && currentId === id) {\n      if (timeoutMs) {\n        const timeout = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeout);\n        };\n      }\n      unset();\n    }\n  }, [enabled, open, setState, currentId, id, onOpenChange, initialDelay, timeoutMs]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (setCurrentId === NOOP || !open) return;\n    setCurrentId(id);\n  }, [enabled, open, setCurrentId, id]);\n  return groupContext;\n}\n\nconst NextFloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  hasProvider: false,\n  timeoutMs: 0,\n  delayRef: {\n    current: 0\n  },\n  initialDelayRef: {\n    current: 0\n  },\n  timeoutIdRef: {\n    current: -1\n  },\n  currentIdRef: {\n    current: null\n  },\n  currentContextRef: {\n    current: null\n  }\n});\n/**\n * Experimental next version of `FloatingDelayGroup` to become the default\n * in the future. This component is not yet stable.\n * Provides context for a group of floating elements that should share a\n * `delay`. Unlike `FloatingDelayGroup`, `useNextDelayGroup` with this\n * component does not cause a re-render of unrelated consumers of the\n * context when the delay changes.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction NextFloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const delayRef = React.useRef(delay);\n  const initialDelayRef = React.useRef(delay);\n  const currentIdRef = React.useRef(null);\n  const currentContextRef = React.useRef(null);\n  const timeoutIdRef = React.useRef(-1);\n  return /*#__PURE__*/jsx(NextFloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      hasProvider: true,\n      delayRef,\n      initialDelayRef,\n      currentIdRef,\n      timeoutMs,\n      currentContextRef,\n      timeoutIdRef\n    }), [timeoutMs]),\n    children: children\n  });\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `NextFloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useNextDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    enabled = true\n  } = options;\n  const groupContext = React.useContext(NextFloatingDelayGroupContext);\n  const {\n    currentIdRef,\n    delayRef,\n    timeoutMs,\n    initialDelayRef,\n    currentContextRef,\n    hasProvider,\n    timeoutIdRef\n  } = groupContext;\n  const [isInstantPhase, setIsInstantPhase] = React.useState(false);\n  useModernLayoutEffect(() => {\n    function unset() {\n      var _currentContextRef$cu;\n      setIsInstantPhase(false);\n      (_currentContextRef$cu = currentContextRef.current) == null || _currentContextRef$cu.setIsInstantPhase(false);\n      currentIdRef.current = null;\n      currentContextRef.current = null;\n      delayRef.current = initialDelayRef.current;\n    }\n    if (!enabled) return;\n    if (!currentIdRef.current) return;\n    if (!open && currentIdRef.current === floatingId) {\n      setIsInstantPhase(false);\n      if (timeoutMs) {\n        timeoutIdRef.current = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeoutIdRef.current);\n        };\n      }\n      unset();\n    }\n  }, [enabled, open, floatingId, currentIdRef, delayRef, timeoutMs, initialDelayRef, currentContextRef, timeoutIdRef]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!open) return;\n    const prevContext = currentContextRef.current;\n    const prevId = currentIdRef.current;\n    currentContextRef.current = {\n      onOpenChange,\n      setIsInstantPhase\n    };\n    currentIdRef.current = floatingId;\n    delayRef.current = {\n      open: 0,\n      close: getDelay(initialDelayRef.current, 'close')\n    };\n    if (prevId !== null && prevId !== floatingId) {\n      clearTimeoutIfSet(timeoutIdRef);\n      setIsInstantPhase(true);\n      prevContext == null || prevContext.setIsInstantPhase(true);\n      prevContext == null || prevContext.onOpenChange(false);\n    } else {\n      setIsInstantPhase(false);\n      prevContext == null || prevContext.setIsInstantPhase(false);\n    }\n  }, [enabled, open, floatingId, onOpenChange, currentIdRef, delayRef, timeoutMs, initialDelayRef, currentContextRef, timeoutIdRef]);\n  useModernLayoutEffect(() => {\n    return () => {\n      currentContextRef.current = null;\n    };\n  }, [currentContextRef]);\n  return React.useMemo(() => ({\n    hasProvider,\n    delayRef,\n    isInstantPhase\n  }), [hasProvider, delayRef, isInstantPhase]);\n}\n\nlet rafId = 0;\nfunction enqueueFocus(el, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    preventScroll = false,\n    cancelPrevious = true,\n    sync = false\n  } = options;\n  cancelPrevious && cancelAnimationFrame(rafId);\n  const exec = () => el == null ? void 0 : el.focus({\n    preventScroll\n  });\n  if (sync) {\n    exec();\n  } else {\n    rafId = requestAnimationFrame(exec);\n  }\n}\n\nfunction contains(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n\n  // then fallback to custom implementation with Shadow DOM support\n  if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    while (next) {\n      if (parent === next) {\n        return true;\n      }\n      // @ts-ignore\n      next = next.parentNode || next.host;\n    }\n  }\n\n  // Give up, the result is false\n  return false;\n}\nfunction getTarget(event) {\n  if ('composedPath' in event) {\n    return event.composedPath()[0];\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support\n  // `composedPath()`, but browsers without shadow DOM don't.\n  return event.target;\n}\nfunction getDocument(node) {\n  return (node == null ? void 0 : node.ownerDocument) || document;\n}\n\n// Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\nlet counterMap = /*#__PURE__*/new WeakMap();\nlet uncontrolledElementsSet = /*#__PURE__*/new WeakSet();\nlet markerMap = {};\nlet lockCount$1 = 0;\nconst supportsInert = () => typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\nconst unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nconst correctElements = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) {\n    return target;\n  }\n  const correctedTarget = unwrapHost(target);\n  if (parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  return null;\n}).filter(x => x != null);\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  const markerName = 'data-floating-ui-inert';\n  const controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  const avoidElements = correctElements(body, uncorrectedAvoidElements);\n  const elementsToKeep = new Set();\n  const elementsToStop = new Set(avoidElements);\n  const hiddenElements = [];\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n  const markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n    elementsToKeep.add(el);\n    el.parentNode && keep(el.parentNode);\n  }\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    [].forEach.call(parent.children, node => {\n      if (getNodeName(node) === 'script') return;\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        const attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n        const alreadyHidden = attr !== null && attr !== 'false';\n        const currentCounterValue = counterMap.get(node) || 0;\n        const counterValue = controlAttribute ? currentCounterValue + 1 : currentCounterValue;\n        const markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, controlAttribute === 'inert' ? '' : 'true');\n        }\n      }\n    });\n  }\n  lockCount$1++;\n  return () => {\n    hiddenElements.forEach(element => {\n      const currentCounterValue = counterMap.get(element) || 0;\n      const counterValue = controlAttribute ? currentCounterValue - 1 : currentCounterValue;\n      const markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n        uncontrolledElementsSet.delete(element);\n      }\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount$1--;\n    if (!lockCount$1) {\n      counterMap = new WeakMap();\n      counterMap = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\nfunction markOthers(avoidElements, ariaHidden, inert) {\n  if (ariaHidden === void 0) {\n    ariaHidden = false;\n  }\n  if (inert === void 0) {\n    inert = false;\n  }\n  const body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live]'))), body, ariaHidden, inert);\n}\n\nconst HIDDEN_STYLES = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  padding: 0,\n  position: 'fixed',\n  whiteSpace: 'nowrap',\n  width: '1px',\n  top: 0,\n  left: 0\n};\nconst FocusGuard = /*#__PURE__*/React.forwardRef(function FocusGuard(props, ref) {\n  const [role, setRole] = React.useState();\n  useModernLayoutEffect(() => {\n    if (isSafari()) {\n      // Unlike other screen readers such as NVDA and JAWS, the virtual cursor\n      // on VoiceOver does trigger the onFocus event, so we can use the focus\n      // trap element. On Safari, only buttons trigger the onFocus event.\n      // NB: \"group\" role in the Sandbox no longer appears to work, must be a\n      // button role.\n      setRole('button');\n    }\n  }, []);\n  const restProps = {\n    ref,\n    tabIndex: 0,\n    // Role is only for VoiceOver\n    role,\n    'aria-hidden': role ? undefined : true,\n    [createAttribute('focus-guard')]: '',\n    style: HIDDEN_STYLES\n  };\n  return /*#__PURE__*/jsx(\"span\", {\n    ...props,\n    ...restProps\n  });\n});\n\nconst PortalContext = /*#__PURE__*/React.createContext(null);\nconst attr = /*#__PURE__*/createAttribute('portal');\n/**\n * @see https://floating-ui.com/docs/FloatingPortal#usefloatingportalnode\n */\nfunction useFloatingPortalNode(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    id,\n    root\n  } = props;\n  const uniqueId = useId();\n  const portalContext = usePortalContext();\n  const [portalNode, setPortalNode] = React.useState(null);\n  const portalNodeRef = React.useRef(null);\n  useModernLayoutEffect(() => {\n    return () => {\n      portalNode == null || portalNode.remove();\n      // Allow the subsequent layout effects to create a new node on updates.\n      // The portal node will still be cleaned up on unmount.\n      // https://github.com/floating-ui/floating-ui/issues/2454\n      queueMicrotask(() => {\n        portalNodeRef.current = null;\n      });\n    };\n  }, [portalNode]);\n  useModernLayoutEffect(() => {\n    // Wait for the uniqueId to be generated before creating the portal node in\n    // React <18 (using `useFloatingId` instead of the native `useId`).\n    // https://github.com/floating-ui/floating-ui/issues/2778\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    const existingIdRoot = id ? document.getElementById(id) : null;\n    if (!existingIdRoot) return;\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    existingIdRoot.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, uniqueId]);\n  useModernLayoutEffect(() => {\n    // Wait for the root to exist before creating the portal node. The root must\n    // be stored in state, not a ref, for this to work reactively.\n    if (root === null) return;\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    let container = root || (portalContext == null ? void 0 : portalContext.portalNode);\n    if (container && !isElement(container)) container = container.current;\n    container = container || document.body;\n    let idWrapper = null;\n    if (id) {\n      idWrapper = document.createElement('div');\n      idWrapper.id = id;\n      container.appendChild(idWrapper);\n    }\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    container = idWrapper || container;\n    container.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, root, uniqueId, portalContext]);\n  return portalNode;\n}\n/**\n * Portals the floating element into a given container element — by default,\n * outside of the app root and into the body.\n * This is necessary to ensure the floating element can appear outside any\n * potential parent containers that cause clipping (such as `overflow: hidden`),\n * while retaining its location in the React tree.\n * @see https://floating-ui.com/docs/FloatingPortal\n */\nfunction FloatingPortal(props) {\n  const {\n    children,\n    id,\n    root,\n    preserveTabOrder = true\n  } = props;\n  const portalNode = useFloatingPortalNode({\n    id,\n    root\n  });\n  const [focusManagerState, setFocusManagerState] = React.useState(null);\n  const beforeOutsideRef = React.useRef(null);\n  const afterOutsideRef = React.useRef(null);\n  const beforeInsideRef = React.useRef(null);\n  const afterInsideRef = React.useRef(null);\n  const modal = focusManagerState == null ? void 0 : focusManagerState.modal;\n  const open = focusManagerState == null ? void 0 : focusManagerState.open;\n  const shouldRenderGuards =\n  // The FocusManager and therefore floating element are currently open/\n  // rendered.\n  !!focusManagerState &&\n  // Guards are only for non-modal focus management.\n  !focusManagerState.modal &&\n  // Don't render if unmount is transitioning.\n  focusManagerState.open && preserveTabOrder && !!(root || portalNode);\n\n  // https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/TabbablePortal.tsx\n  React.useEffect(() => {\n    if (!portalNode || !preserveTabOrder || modal) {\n      return;\n    }\n\n    // Make sure elements inside the portal element are tabbable only when the\n    // portal has already been focused, either by tabbing into a focus trap\n    // element outside or using the mouse.\n    function onFocus(event) {\n      if (portalNode && isOutsideEvent(event)) {\n        const focusing = event.type === 'focusin';\n        const manageFocus = focusing ? enableFocusInside : disableFocusInside;\n        manageFocus(portalNode);\n      }\n    }\n    // Listen to the event on the capture phase so they run before the focus\n    // trap elements onFocus prop is called.\n    portalNode.addEventListener('focusin', onFocus, true);\n    portalNode.addEventListener('focusout', onFocus, true);\n    return () => {\n      portalNode.removeEventListener('focusin', onFocus, true);\n      portalNode.removeEventListener('focusout', onFocus, true);\n    };\n  }, [portalNode, preserveTabOrder, modal]);\n  React.useEffect(() => {\n    if (!portalNode) return;\n    if (open) return;\n    enableFocusInside(portalNode);\n  }, [open, portalNode]);\n  return /*#__PURE__*/jsxs(PortalContext.Provider, {\n    value: React.useMemo(() => ({\n      preserveTabOrder,\n      beforeOutsideRef,\n      afterOutsideRef,\n      beforeInsideRef,\n      afterInsideRef,\n      portalNode,\n      setFocusManagerState\n    }), [preserveTabOrder, portalNode]),\n    children: [shouldRenderGuards && portalNode && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"outside\",\n      ref: beforeOutsideRef,\n      onFocus: event => {\n        if (isOutsideEvent(event, portalNode)) {\n          var _beforeInsideRef$curr;\n          (_beforeInsideRef$curr = beforeInsideRef.current) == null || _beforeInsideRef$curr.focus();\n        } else {\n          const domReference = focusManagerState ? focusManagerState.domReference : null;\n          const prevTabbable = getPreviousTabbable(domReference);\n          prevTabbable == null || prevTabbable.focus();\n        }\n      }\n    }), shouldRenderGuards && portalNode && /*#__PURE__*/jsx(\"span\", {\n      \"aria-owns\": portalNode.id,\n      style: HIDDEN_STYLES\n    }), portalNode && /*#__PURE__*/ReactDOM.createPortal(children, portalNode), shouldRenderGuards && portalNode && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"outside\",\n      ref: afterOutsideRef,\n      onFocus: event => {\n        if (isOutsideEvent(event, portalNode)) {\n          var _afterInsideRef$curre;\n          (_afterInsideRef$curre = afterInsideRef.current) == null || _afterInsideRef$curre.focus();\n        } else {\n          const domReference = focusManagerState ? focusManagerState.domReference : null;\n          const nextTabbable = getNextTabbable(domReference);\n          nextTabbable == null || nextTabbable.focus();\n          (focusManagerState == null ? void 0 : focusManagerState.closeOnFocusOut) && (focusManagerState == null ? void 0 : focusManagerState.onOpenChange(false, event.nativeEvent, 'focus-out'));\n        }\n      }\n    })]\n  });\n}\nconst usePortalContext = () => React.useContext(PortalContext);\n\nfunction useLiteMergeRefs(refs) {\n  return React.useMemo(() => {\n    return value => {\n      refs.forEach(ref => {\n        if (ref) {\n          ref.current = value;\n        }\n      });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\nconst LIST_LIMIT = 20;\nlet previouslyFocusedElements = [];\nfunction addPreviouslyFocusedElement(element) {\n  previouslyFocusedElements = previouslyFocusedElements.filter(el => el.isConnected);\n  if (element && getNodeName(element) !== 'body') {\n    previouslyFocusedElements.push(element);\n    if (previouslyFocusedElements.length > LIST_LIMIT) {\n      previouslyFocusedElements = previouslyFocusedElements.slice(-20);\n    }\n  }\n}\nfunction getPreviouslyFocusedElement() {\n  return previouslyFocusedElements.slice().reverse().find(el => el.isConnected);\n}\nfunction getFirstTabbableElement(container) {\n  const tabbableOptions = getTabbableOptions();\n  if (isTabbable(container, tabbableOptions)) {\n    return container;\n  }\n  return tabbable(container, tabbableOptions)[0] || container;\n}\nfunction handleTabIndex(floatingFocusElement, orderRef) {\n  var _floatingFocusElement;\n  if (!orderRef.current.includes('floating') && !((_floatingFocusElement = floatingFocusElement.getAttribute('role')) != null && _floatingFocusElement.includes('dialog'))) {\n    return;\n  }\n  const options = getTabbableOptions();\n  const focusableElements = focusable(floatingFocusElement, options);\n  const tabbableContent = focusableElements.filter(element => {\n    const dataTabIndex = element.getAttribute('data-tabindex') || '';\n    return isTabbable(element, options) || element.hasAttribute('data-tabindex') && !dataTabIndex.startsWith('-');\n  });\n  const tabIndex = floatingFocusElement.getAttribute('tabindex');\n  if (orderRef.current.includes('floating') || tabbableContent.length === 0) {\n    if (tabIndex !== '0') {\n      floatingFocusElement.setAttribute('tabindex', '0');\n    }\n  } else if (tabIndex !== '-1' || floatingFocusElement.hasAttribute('data-tabindex') && floatingFocusElement.getAttribute('data-tabindex') !== '-1') {\n    floatingFocusElement.setAttribute('tabindex', '-1');\n    floatingFocusElement.setAttribute('data-tabindex', '-1');\n  }\n}\nconst VisuallyHiddenDismiss = /*#__PURE__*/React.forwardRef(function VisuallyHiddenDismiss(props, ref) {\n  return /*#__PURE__*/jsx(\"button\", {\n    ...props,\n    type: \"button\",\n    ref: ref,\n    tabIndex: -1,\n    style: HIDDEN_STYLES\n  });\n});\n/**\n * Provides focus management for the floating element.\n * @see https://floating-ui.com/docs/FloatingFocusManager\n */\nfunction FloatingFocusManager(props) {\n  const {\n    context,\n    children,\n    disabled = false,\n    order = ['content'],\n    guards: _guards = true,\n    initialFocus = 0,\n    returnFocus = true,\n    restoreFocus = false,\n    modal = true,\n    visuallyHiddenDismiss = false,\n    closeOnFocusOut = true,\n    outsideElementsInert = false,\n    getInsideElements: _getInsideElements = () => []\n  } = props;\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements: {\n      domReference,\n      floating\n    }\n  } = context;\n  const getNodeId = useEffectEvent(() => {\n    var _dataRef$current$floa;\n    return (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n  });\n  const getInsideElements = useEffectEvent(_getInsideElements);\n  const ignoreInitialFocus = typeof initialFocus === 'number' && initialFocus < 0;\n  // If the reference is a combobox and is typeable (e.g. input/textarea),\n  // there are different focus semantics. The guards should not be rendered, but\n  // aria-hidden should be applied to all nodes still. Further, the visually\n  // hidden dismiss button should only appear at the end of the list, not the\n  // start.\n  const isUntrappedTypeableCombobox = isTypeableCombobox(domReference) && ignoreInitialFocus;\n\n  // Force the guards to be rendered if the `inert` attribute is not supported.\n  const inertSupported = supportsInert();\n  const guards = inertSupported ? _guards : true;\n  const useInert = !guards || inertSupported && outsideElementsInert;\n  const orderRef = useLatestRef(order);\n  const initialFocusRef = useLatestRef(initialFocus);\n  const returnFocusRef = useLatestRef(returnFocus);\n  const tree = useFloatingTree();\n  const portalContext = usePortalContext();\n  const startDismissButtonRef = React.useRef(null);\n  const endDismissButtonRef = React.useRef(null);\n  const preventReturnFocusRef = React.useRef(false);\n  const isPointerDownRef = React.useRef(false);\n  const tabbableIndexRef = React.useRef(-1);\n  const isInsidePortal = portalContext != null;\n  const floatingFocusElement = getFloatingFocusElement(floating);\n  const getTabbableContent = useEffectEvent(function (container) {\n    if (container === void 0) {\n      container = floatingFocusElement;\n    }\n    return container ? tabbable(container, getTabbableOptions()) : [];\n  });\n  const getTabbableElements = useEffectEvent(container => {\n    const content = getTabbableContent(container);\n    return orderRef.current.map(type => {\n      if (domReference && type === 'reference') {\n        return domReference;\n      }\n      if (floatingFocusElement && type === 'floating') {\n        return floatingFocusElement;\n      }\n      return content;\n    }).filter(Boolean).flat();\n  });\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!modal) return;\n    function onKeyDown(event) {\n      if (event.key === 'Tab') {\n        // The focus guards have nothing to focus, so we need to stop the event.\n        if (contains$1(floatingFocusElement, activeElement(getDocument$1(floatingFocusElement))) && getTabbableContent().length === 0 && !isUntrappedTypeableCombobox) {\n          stopEvent(event);\n        }\n        const els = getTabbableElements();\n        const target = getTarget$1(event);\n        if (orderRef.current[0] === 'reference' && target === domReference) {\n          stopEvent(event);\n          if (event.shiftKey) {\n            enqueueFocus(els[els.length - 1]);\n          } else {\n            enqueueFocus(els[1]);\n          }\n        }\n        if (orderRef.current[1] === 'floating' && target === floatingFocusElement && event.shiftKey) {\n          stopEvent(event);\n          enqueueFocus(els[0]);\n        }\n      }\n    }\n    const doc = getDocument$1(floatingFocusElement);\n    doc.addEventListener('keydown', onKeyDown);\n    return () => {\n      doc.removeEventListener('keydown', onKeyDown);\n    };\n  }, [disabled, domReference, floatingFocusElement, modal, orderRef, isUntrappedTypeableCombobox, getTabbableContent, getTabbableElements]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!floating) return;\n    function handleFocusIn(event) {\n      const target = getTarget$1(event);\n      const tabbableContent = getTabbableContent();\n      const tabbableIndex = tabbableContent.indexOf(target);\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n    }\n    floating.addEventListener('focusin', handleFocusIn);\n    return () => {\n      floating.removeEventListener('focusin', handleFocusIn);\n    };\n  }, [disabled, floating, getTabbableContent]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!closeOnFocusOut) return;\n\n    // In Safari, buttons lose focus when pressing them.\n    function handlePointerDown() {\n      isPointerDownRef.current = true;\n      setTimeout(() => {\n        isPointerDownRef.current = false;\n      });\n    }\n    function handleFocusOutside(event) {\n      const relatedTarget = event.relatedTarget;\n      const currentTarget = event.currentTarget;\n      queueMicrotask(() => {\n        const nodeId = getNodeId();\n        const movedToUnrelatedNode = !(contains$1(domReference, relatedTarget) || contains$1(floating, relatedTarget) || contains$1(relatedTarget, floating) || contains$1(portalContext == null ? void 0 : portalContext.portalNode, relatedTarget) || relatedTarget != null && relatedTarget.hasAttribute(createAttribute('focus-guard')) || tree && (getNodeChildren$1(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context, _node$context2;\n          return contains$1((_node$context = node.context) == null ? void 0 : _node$context.elements.floating, relatedTarget) || contains$1((_node$context2 = node.context) == null ? void 0 : _node$context2.elements.domReference, relatedTarget);\n        }) || getNodeAncestors(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context3, _node$context4, _node$context5;\n          return [(_node$context3 = node.context) == null ? void 0 : _node$context3.elements.floating, getFloatingFocusElement((_node$context4 = node.context) == null ? void 0 : _node$context4.elements.floating)].includes(relatedTarget) || ((_node$context5 = node.context) == null ? void 0 : _node$context5.elements.domReference) === relatedTarget;\n        })));\n        if (currentTarget === domReference && floatingFocusElement) {\n          handleTabIndex(floatingFocusElement, orderRef);\n        }\n\n        // Restore focus to the previous tabbable element index to prevent\n        // focus from being lost outside the floating tree.\n        if (restoreFocus && movedToUnrelatedNode && activeElement(getDocument$1(floatingFocusElement)) === getDocument$1(floatingFocusElement).body) {\n          // Let `FloatingPortal` effect knows that focus is still inside the\n          // floating tree.\n          if (isHTMLElement(floatingFocusElement)) {\n            floatingFocusElement.focus();\n          }\n          const prevTabbableIndex = tabbableIndexRef.current;\n          const tabbableContent = getTabbableContent();\n          const nodeToFocus = tabbableContent[prevTabbableIndex] || tabbableContent[tabbableContent.length - 1] || floatingFocusElement;\n          if (isHTMLElement(nodeToFocus)) {\n            nodeToFocus.focus();\n          }\n        }\n\n        // Focus did not move inside the floating tree, and there are no tabbable\n        // portal guards to handle closing.\n        if ((isUntrappedTypeableCombobox ? true : !modal) && relatedTarget && movedToUnrelatedNode && !isPointerDownRef.current &&\n        // Fix React 18 Strict Mode returnFocus due to double rendering.\n        relatedTarget !== getPreviouslyFocusedElement()) {\n          preventReturnFocusRef.current = true;\n          onOpenChange(false, event, 'focus-out');\n        }\n      });\n    }\n    if (floating && isHTMLElement(domReference)) {\n      domReference.addEventListener('focusout', handleFocusOutside);\n      domReference.addEventListener('pointerdown', handlePointerDown);\n      floating.addEventListener('focusout', handleFocusOutside);\n      return () => {\n        domReference.removeEventListener('focusout', handleFocusOutside);\n        domReference.removeEventListener('pointerdown', handlePointerDown);\n        floating.removeEventListener('focusout', handleFocusOutside);\n      };\n    }\n  }, [disabled, domReference, floating, floatingFocusElement, modal, tree, portalContext, onOpenChange, closeOnFocusOut, restoreFocus, getTabbableContent, isUntrappedTypeableCombobox, getNodeId, orderRef]);\n  const beforeGuardRef = React.useRef(null);\n  const afterGuardRef = React.useRef(null);\n  const mergedBeforeGuardRef = useLiteMergeRefs([beforeGuardRef, portalContext == null ? void 0 : portalContext.beforeInsideRef]);\n  const mergedAfterGuardRef = useLiteMergeRefs([afterGuardRef, portalContext == null ? void 0 : portalContext.afterInsideRef]);\n  React.useEffect(() => {\n    var _portalContext$portal, _ancestors$find;\n    if (disabled) return;\n    if (!floating) return;\n\n    // Don't hide portals nested within the parent portal.\n    const portalNodes = Array.from((portalContext == null || (_portalContext$portal = portalContext.portalNode) == null ? void 0 : _portalContext$portal.querySelectorAll(\"[\" + createAttribute('portal') + \"]\")) || []);\n    const ancestors = tree ? getNodeAncestors(tree.nodesRef.current, getNodeId()) : [];\n    const ancestorFloatingNodes = tree && !modal ? ancestors.map(node => {\n      var _node$context6;\n      return (_node$context6 = node.context) == null ? void 0 : _node$context6.elements.floating;\n    }) : [];\n    const rootAncestorComboboxDomReference = (_ancestors$find = ancestors.find(node => {\n      var _node$context7;\n      return isTypeableCombobox(((_node$context7 = node.context) == null ? void 0 : _node$context7.elements.domReference) || null);\n    })) == null || (_ancestors$find = _ancestors$find.context) == null ? void 0 : _ancestors$find.elements.domReference;\n    const insideElements = [floating, rootAncestorComboboxDomReference, ...portalNodes, ...ancestorFloatingNodes, ...getInsideElements(), startDismissButtonRef.current, endDismissButtonRef.current, beforeGuardRef.current, afterGuardRef.current, portalContext == null ? void 0 : portalContext.beforeOutsideRef.current, portalContext == null ? void 0 : portalContext.afterOutsideRef.current, orderRef.current.includes('reference') || isUntrappedTypeableCombobox ? domReference : null].filter(x => x != null);\n    const cleanup = modal || isUntrappedTypeableCombobox ? markOthers(insideElements, !useInert, useInert) : markOthers(insideElements);\n    return () => {\n      cleanup();\n    };\n  }, [disabled, domReference, floating, modal, orderRef, portalContext, isUntrappedTypeableCombobox, guards, useInert, tree, getNodeId, getInsideElements]);\n  useModernLayoutEffect(() => {\n    if (disabled || !isHTMLElement(floatingFocusElement)) return;\n    const doc = getDocument$1(floatingFocusElement);\n    const previouslyFocusedElement = activeElement(doc);\n\n    // Wait for any layout effect state setters to execute to set `tabIndex`.\n    queueMicrotask(() => {\n      const focusableElements = getTabbableElements(floatingFocusElement);\n      const initialFocusValue = initialFocusRef.current;\n      const elToFocus = (typeof initialFocusValue === 'number' ? focusableElements[initialFocusValue] : initialFocusValue.current) || floatingFocusElement;\n      const focusAlreadyInsideFloatingEl = contains$1(floatingFocusElement, previouslyFocusedElement);\n      if (!ignoreInitialFocus && !focusAlreadyInsideFloatingEl && open) {\n        enqueueFocus(elToFocus, {\n          preventScroll: elToFocus === floatingFocusElement\n        });\n      }\n    });\n  }, [disabled, open, floatingFocusElement, ignoreInitialFocus, getTabbableElements, initialFocusRef]);\n  useModernLayoutEffect(() => {\n    if (disabled || !floatingFocusElement) return;\n    let preventReturnFocusScroll = false;\n    const doc = getDocument$1(floatingFocusElement);\n    const previouslyFocusedElement = activeElement(doc);\n    addPreviouslyFocusedElement(previouslyFocusedElement);\n\n    // Dismissing via outside press should always ignore `returnFocus` to\n    // prevent unwanted scrolling.\n    function onOpenChange(_ref) {\n      let {\n        reason,\n        event,\n        nested\n      } = _ref;\n      if (['hover', 'safe-polygon'].includes(reason) && event.type === 'mouseleave') {\n        preventReturnFocusRef.current = true;\n      }\n      if (reason !== 'outside-press') return;\n      if (nested) {\n        preventReturnFocusRef.current = false;\n        preventReturnFocusScroll = true;\n      } else if (isVirtualClick(event) || isVirtualPointerEvent(event)) {\n        preventReturnFocusRef.current = false;\n      } else {\n        let isPreventScrollSupported = false;\n        document.createElement('div').focus({\n          get preventScroll() {\n            isPreventScrollSupported = true;\n            return false;\n          }\n        });\n        if (isPreventScrollSupported) {\n          preventReturnFocusRef.current = false;\n          preventReturnFocusScroll = true;\n        } else {\n          preventReturnFocusRef.current = true;\n        }\n      }\n    }\n    events.on('openchange', onOpenChange);\n    const fallbackEl = doc.createElement('span');\n    fallbackEl.setAttribute('tabindex', '-1');\n    fallbackEl.setAttribute('aria-hidden', 'true');\n    Object.assign(fallbackEl.style, HIDDEN_STYLES);\n    if (isInsidePortal && domReference) {\n      domReference.insertAdjacentElement('afterend', fallbackEl);\n    }\n    function getReturnElement() {\n      if (typeof returnFocusRef.current === 'boolean') {\n        const el = domReference || getPreviouslyFocusedElement();\n        return el && el.isConnected ? el : fallbackEl;\n      }\n      return returnFocusRef.current.current || fallbackEl;\n    }\n    return () => {\n      events.off('openchange', onOpenChange);\n      const activeEl = activeElement(doc);\n      const isFocusInsideFloatingTree = contains$1(floating, activeEl) || tree && getNodeChildren$1(tree.nodesRef.current, getNodeId()).some(node => {\n        var _node$context8;\n        return contains$1((_node$context8 = node.context) == null ? void 0 : _node$context8.elements.floating, activeEl);\n      });\n      const returnElement = getReturnElement();\n      queueMicrotask(() => {\n        // This is `returnElement`, if it's tabbable, or its first tabbable child.\n        const tabbableReturnElement = getFirstTabbableElement(returnElement);\n        if (\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        returnFocusRef.current && !preventReturnFocusRef.current && isHTMLElement(tabbableReturnElement) && (\n        // If the focus moved somewhere else after mount, avoid returning focus\n        // since it likely entered a different element which should be\n        // respected: https://github.com/floating-ui/floating-ui/issues/2607\n        tabbableReturnElement !== activeEl && activeEl !== doc.body ? isFocusInsideFloatingTree : true)) {\n          tabbableReturnElement.focus({\n            preventScroll: preventReturnFocusScroll\n          });\n        }\n        fallbackEl.remove();\n      });\n    };\n  }, [disabled, floating, floatingFocusElement, returnFocusRef, dataRef, events, tree, isInsidePortal, domReference, getNodeId]);\n  React.useEffect(() => {\n    // The `returnFocus` cleanup behavior is inside a microtask; ensure we\n    // wait for it to complete before resetting the flag.\n    queueMicrotask(() => {\n      preventReturnFocusRef.current = false;\n    });\n  }, [disabled]);\n\n  // Synchronize the `context` & `modal` value to the FloatingPortal context.\n  // It will decide whether or not it needs to render its own guards.\n  useModernLayoutEffect(() => {\n    if (disabled) return;\n    if (!portalContext) return;\n    portalContext.setFocusManagerState({\n      modal,\n      closeOnFocusOut,\n      open,\n      onOpenChange,\n      domReference\n    });\n    return () => {\n      portalContext.setFocusManagerState(null);\n    };\n  }, [disabled, portalContext, modal, open, onOpenChange, closeOnFocusOut, domReference]);\n  useModernLayoutEffect(() => {\n    if (disabled) return;\n    if (!floatingFocusElement) return;\n    handleTabIndex(floatingFocusElement, orderRef);\n  }, [disabled, floatingFocusElement, orderRef]);\n  function renderDismissButton(location) {\n    if (disabled || !visuallyHiddenDismiss || !modal) {\n      return null;\n    }\n    return /*#__PURE__*/jsx(VisuallyHiddenDismiss, {\n      ref: location === 'start' ? startDismissButtonRef : endDismissButtonRef,\n      onClick: event => onOpenChange(false, event.nativeEvent),\n      children: typeof visuallyHiddenDismiss === 'string' ? visuallyHiddenDismiss : 'Dismiss'\n    });\n  }\n  const shouldRenderGuards = !disabled && guards && (modal ? !isUntrappedTypeableCombobox : true) && (isInsidePortal || modal);\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [shouldRenderGuards && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"inside\",\n      ref: mergedBeforeGuardRef,\n      onFocus: event => {\n        if (modal) {\n          const els = getTabbableElements();\n          enqueueFocus(order[0] === 'reference' ? els[0] : els[els.length - 1]);\n        } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n          preventReturnFocusRef.current = false;\n          if (isOutsideEvent(event, portalContext.portalNode)) {\n            const nextTabbable = getNextTabbable(domReference);\n            nextTabbable == null || nextTabbable.focus();\n          } else {\n            var _portalContext$before;\n            (_portalContext$before = portalContext.beforeOutsideRef.current) == null || _portalContext$before.focus();\n          }\n        }\n      }\n    }), !isUntrappedTypeableCombobox && renderDismissButton('start'), children, renderDismissButton('end'), shouldRenderGuards && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"inside\",\n      ref: mergedAfterGuardRef,\n      onFocus: event => {\n        if (modal) {\n          enqueueFocus(getTabbableElements()[0]);\n        } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n          if (closeOnFocusOut) {\n            preventReturnFocusRef.current = true;\n          }\n          if (isOutsideEvent(event, portalContext.portalNode)) {\n            const prevTabbable = getPreviousTabbable(domReference);\n            prevTabbable == null || prevTabbable.focus();\n          } else {\n            var _portalContext$afterO;\n            (_portalContext$afterO = portalContext.afterOutsideRef.current) == null || _portalContext$afterO.focus();\n          }\n        }\n      }\n    })]\n  });\n}\n\nlet lockCount = 0;\nfunction enableScrollLock() {\n  const isIOS = /iP(hone|ad|od)|iOS/.test(getPlatform());\n  const bodyStyle = document.body.style;\n  // RTL <body> scrollbar\n  const scrollbarX = Math.round(document.documentElement.getBoundingClientRect().left) + document.documentElement.scrollLeft;\n  const paddingProp = scrollbarX ? 'paddingLeft' : 'paddingRight';\n  const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n  const scrollX = bodyStyle.left ? parseFloat(bodyStyle.left) : window.scrollX;\n  const scrollY = bodyStyle.top ? parseFloat(bodyStyle.top) : window.scrollY;\n  bodyStyle.overflow = 'hidden';\n  if (scrollbarWidth) {\n    bodyStyle[paddingProp] = scrollbarWidth + \"px\";\n  }\n\n  // Only iOS doesn't respect `overflow: hidden` on document.body, and this\n  // technique has fewer side effects.\n  if (isIOS) {\n    var _window$visualViewpor, _window$visualViewpor2;\n    // iOS 12 does not support `visualViewport`.\n    const offsetLeft = ((_window$visualViewpor = window.visualViewport) == null ? void 0 : _window$visualViewpor.offsetLeft) || 0;\n    const offsetTop = ((_window$visualViewpor2 = window.visualViewport) == null ? void 0 : _window$visualViewpor2.offsetTop) || 0;\n    Object.assign(bodyStyle, {\n      position: 'fixed',\n      top: -(scrollY - Math.floor(offsetTop)) + \"px\",\n      left: -(scrollX - Math.floor(offsetLeft)) + \"px\",\n      right: '0'\n    });\n  }\n  return () => {\n    Object.assign(bodyStyle, {\n      overflow: '',\n      [paddingProp]: ''\n    });\n    if (isIOS) {\n      Object.assign(bodyStyle, {\n        position: '',\n        top: '',\n        left: '',\n        right: ''\n      });\n      window.scrollTo(scrollX, scrollY);\n    }\n  };\n}\nlet cleanup = () => {};\n\n/**\n * Provides base styling for a fixed overlay element to dim content or block\n * pointer events behind a floating element.\n * It's a regular `<div>`, so it can be styled via any CSS solution you prefer.\n * @see https://floating-ui.com/docs/FloatingOverlay\n */\nconst FloatingOverlay = /*#__PURE__*/React.forwardRef(function FloatingOverlay(props, ref) {\n  const {\n    lockScroll = false,\n    ...rest\n  } = props;\n  useModernLayoutEffect(() => {\n    if (!lockScroll) return;\n    lockCount++;\n    if (lockCount === 1) {\n      cleanup = enableScrollLock();\n    }\n    return () => {\n      lockCount--;\n      if (lockCount === 0) {\n        cleanup();\n      }\n    };\n  }, [lockScroll]);\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: ref,\n    ...rest,\n    style: {\n      position: 'fixed',\n      overflow: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      ...rest.style\n    }\n  });\n});\n\nfunction isButtonTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'BUTTON';\n}\nfunction isAnchorTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'A';\n}\nfunction isSpaceIgnored(element) {\n  return isTypeableElement(element);\n}\n/**\n * Opens or closes the floating element when clicking the reference element.\n * @see https://floating-ui.com/docs/useClick\n */\nfunction useClick(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    elements: {\n      domReference\n    }\n  } = context;\n  const {\n    enabled = true,\n    event: eventOption = 'click',\n    toggle = true,\n    ignoreMouse = false,\n    keyboardHandlers = true,\n    stickIfOpen = true\n  } = props;\n  const pointerTypeRef = React.useRef();\n  const didKeyDownRef = React.useRef(false);\n  const reference = React.useMemo(() => ({\n    onPointerDown(event) {\n      pointerTypeRef.current = event.pointerType;\n    },\n    onMouseDown(event) {\n      const pointerType = pointerTypeRef.current;\n\n      // Ignore all buttons except for the \"main\" button.\n      // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n      if (event.button !== 0) return;\n      if (eventOption === 'click') return;\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent && stickIfOpen ? dataRef.current.openEvent.type === 'mousedown' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        // Prevent stealing focus from the floating element\n        event.preventDefault();\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onClick(event) {\n      const pointerType = pointerTypeRef.current;\n      if (eventOption === 'mousedown' && pointerTypeRef.current) {\n        pointerTypeRef.current = undefined;\n        return;\n      }\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent && stickIfOpen ? dataRef.current.openEvent.type === 'click' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onKeyDown(event) {\n      pointerTypeRef.current = undefined;\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event)) {\n        return;\n      }\n      if (event.key === ' ' && !isSpaceIgnored(domReference)) {\n        // Prevent scrolling\n        event.preventDefault();\n        didKeyDownRef.current = true;\n      }\n      if (isAnchorTarget(event)) {\n        return;\n      }\n      if (event.key === 'Enter') {\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    },\n    onKeyUp(event) {\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event) || isSpaceIgnored(domReference)) {\n        return;\n      }\n      if (event.key === ' ' && didKeyDownRef.current) {\n        didKeyDownRef.current = false;\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    }\n  }), [dataRef, domReference, eventOption, ignoreMouse, keyboardHandlers, onOpenChange, open, stickIfOpen, toggle]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction createVirtualElement(domElement, data) {\n  let offsetX = null;\n  let offsetY = null;\n  let isAutoUpdateEvent = false;\n  return {\n    contextElement: domElement || undefined,\n    getBoundingClientRect() {\n      var _data$dataRef$current;\n      const domRect = (domElement == null ? void 0 : domElement.getBoundingClientRect()) || {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      };\n      const isXAxis = data.axis === 'x' || data.axis === 'both';\n      const isYAxis = data.axis === 'y' || data.axis === 'both';\n      const canTrackCursorOnAutoUpdate = ['mouseenter', 'mousemove'].includes(((_data$dataRef$current = data.dataRef.current.openEvent) == null ? void 0 : _data$dataRef$current.type) || '') && data.pointerType !== 'touch';\n      let width = domRect.width;\n      let height = domRect.height;\n      let x = domRect.x;\n      let y = domRect.y;\n      if (offsetX == null && data.x && isXAxis) {\n        offsetX = domRect.x - data.x;\n      }\n      if (offsetY == null && data.y && isYAxis) {\n        offsetY = domRect.y - data.y;\n      }\n      x -= offsetX || 0;\n      y -= offsetY || 0;\n      width = 0;\n      height = 0;\n      if (!isAutoUpdateEvent || canTrackCursorOnAutoUpdate) {\n        width = data.axis === 'y' ? domRect.width : 0;\n        height = data.axis === 'x' ? domRect.height : 0;\n        x = isXAxis && data.x != null ? data.x : x;\n        y = isYAxis && data.y != null ? data.y : y;\n      } else if (isAutoUpdateEvent && !canTrackCursorOnAutoUpdate) {\n        height = data.axis === 'x' ? domRect.height : height;\n        width = data.axis === 'y' ? domRect.width : width;\n      }\n      isAutoUpdateEvent = true;\n      return {\n        width,\n        height,\n        x,\n        y,\n        top: y,\n        right: x + width,\n        bottom: y + height,\n        left: x\n      };\n    }\n  };\n}\nfunction isMouseBasedEvent(event) {\n  return event != null && event.clientX != null;\n}\n/**\n * Positions the floating element relative to a client point (in the viewport),\n * such as the mouse position. By default, it follows the mouse cursor.\n * @see https://floating-ui.com/docs/useClientPoint\n */\nfunction useClientPoint(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    dataRef,\n    elements: {\n      floating,\n      domReference\n    },\n    refs\n  } = context;\n  const {\n    enabled = true,\n    axis = 'both',\n    x = null,\n    y = null\n  } = props;\n  const initialRef = React.useRef(false);\n  const cleanupListenerRef = React.useRef(null);\n  const [pointerType, setPointerType] = React.useState();\n  const [reactive, setReactive] = React.useState([]);\n  const setReference = useEffectEvent((x, y) => {\n    if (initialRef.current) return;\n\n    // Prevent setting if the open event was not a mouse-like one\n    // (e.g. focus to open, then hover over the reference element).\n    // Only apply if the event exists.\n    if (dataRef.current.openEvent && !isMouseBasedEvent(dataRef.current.openEvent)) {\n      return;\n    }\n    refs.setPositionReference(createVirtualElement(domReference, {\n      x,\n      y,\n      axis,\n      dataRef,\n      pointerType\n    }));\n  });\n  const handleReferenceEnterOrMove = useEffectEvent(event => {\n    if (x != null || y != null) return;\n    if (!open) {\n      setReference(event.clientX, event.clientY);\n    } else if (!cleanupListenerRef.current) {\n      // If there's no cleanup, there's no listener, but we want to ensure\n      // we add the listener if the cursor landed on the floating element and\n      // then back on the reference (i.e. it's interactive).\n      setReactive([]);\n    }\n  });\n\n  // If the pointer is a mouse-like pointer, we want to continue following the\n  // mouse even if the floating element is transitioning out. On touch\n  // devices, this is undesirable because the floating element will move to\n  // the dismissal touch point.\n  const openCheck = isMouseLikePointerType(pointerType) ? floating : open;\n  const addListener = React.useCallback(() => {\n    // Explicitly specified `x`/`y` coordinates shouldn't add a listener.\n    if (!openCheck || !enabled || x != null || y != null) return;\n    const win = getWindow(floating);\n    function handleMouseMove(event) {\n      const target = getTarget$1(event);\n      if (!contains$1(floating, target)) {\n        setReference(event.clientX, event.clientY);\n      } else {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      }\n    }\n    if (!dataRef.current.openEvent || isMouseBasedEvent(dataRef.current.openEvent)) {\n      win.addEventListener('mousemove', handleMouseMove);\n      const cleanup = () => {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      };\n      cleanupListenerRef.current = cleanup;\n      return cleanup;\n    }\n    refs.setPositionReference(domReference);\n  }, [openCheck, enabled, x, y, floating, dataRef, refs, domReference, setReference]);\n  React.useEffect(() => {\n    return addListener();\n  }, [addListener, reactive]);\n  React.useEffect(() => {\n    if (enabled && !floating) {\n      initialRef.current = false;\n    }\n  }, [enabled, floating]);\n  React.useEffect(() => {\n    if (!enabled && open) {\n      initialRef.current = true;\n    }\n  }, [enabled, open]);\n  useModernLayoutEffect(() => {\n    if (enabled && (x != null || y != null)) {\n      initialRef.current = false;\n      setReference(x, y);\n    }\n  }, [enabled, x, y, setReference]);\n  const reference = React.useMemo(() => {\n    function setPointerTypeRef(_ref) {\n      let {\n        pointerType\n      } = _ref;\n      setPointerType(pointerType);\n    }\n    return {\n      onPointerDown: setPointerTypeRef,\n      onPointerEnter: setPointerTypeRef,\n      onMouseMove: handleReferenceEnterOrMove,\n      onMouseEnter: handleReferenceEnterOrMove\n    };\n  }, [handleReferenceEnterOrMove]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst bubbleHandlerKeys = {\n  pointerdown: 'onPointerDown',\n  mousedown: 'onMouseDown',\n  click: 'onClick'\n};\nconst captureHandlerKeys = {\n  pointerdown: 'onPointerDownCapture',\n  mousedown: 'onMouseDownCapture',\n  click: 'onClickCapture'\n};\nconst normalizeProp = normalizable => {\n  var _normalizable$escapeK, _normalizable$outside;\n  return {\n    escapeKey: typeof normalizable === 'boolean' ? normalizable : (_normalizable$escapeK = normalizable == null ? void 0 : normalizable.escapeKey) != null ? _normalizable$escapeK : false,\n    outsidePress: typeof normalizable === 'boolean' ? normalizable : (_normalizable$outside = normalizable == null ? void 0 : normalizable.outsidePress) != null ? _normalizable$outside : true\n  };\n};\n/**\n * Closes the floating element when a dismissal is requested — by default, when\n * the user presses the `escape` key or outside of the floating element.\n * @see https://floating-ui.com/docs/useDismiss\n */\nfunction useDismiss(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    elements,\n    dataRef\n  } = context;\n  const {\n    enabled = true,\n    escapeKey = true,\n    outsidePress: unstable_outsidePress = true,\n    outsidePressEvent = 'pointerdown',\n    referencePress = false,\n    referencePressEvent = 'pointerdown',\n    ancestorScroll = false,\n    bubbles,\n    capture\n  } = props;\n  const tree = useFloatingTree();\n  const outsidePressFn = useEffectEvent(typeof unstable_outsidePress === 'function' ? unstable_outsidePress : () => false);\n  const outsidePress = typeof unstable_outsidePress === 'function' ? outsidePressFn : unstable_outsidePress;\n  const insideReactTreeRef = React.useRef(false);\n  const endedOrStartedInsideRef = React.useRef(false);\n  const {\n    escapeKey: escapeKeyBubbles,\n    outsidePress: outsidePressBubbles\n  } = normalizeProp(bubbles);\n  const {\n    escapeKey: escapeKeyCapture,\n    outsidePress: outsidePressCapture\n  } = normalizeProp(capture);\n  const isComposingRef = React.useRef(false);\n  const closeOnEscapeKeyDown = useEffectEvent(event => {\n    var _dataRef$current$floa;\n    if (!open || !enabled || !escapeKey || event.key !== 'Escape') {\n      return;\n    }\n\n    // Wait until IME is settled. Pressing `Escape` while composing should\n    // close the compose menu, but not the floating element.\n    if (isComposingRef.current) {\n      return;\n    }\n    const nodeId = (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n    const children = tree ? getNodeChildren$1(tree.nodesRef.current, nodeId) : [];\n    if (!escapeKeyBubbles) {\n      event.stopPropagation();\n      if (children.length > 0) {\n        let shouldDismiss = true;\n        children.forEach(child => {\n          var _child$context;\n          if ((_child$context = child.context) != null && _child$context.open && !child.context.dataRef.current.__escapeKeyBubbles) {\n            shouldDismiss = false;\n            return;\n          }\n        });\n        if (!shouldDismiss) {\n          return;\n        }\n      }\n    }\n    onOpenChange(false, isReactEvent(event) ? event.nativeEvent : event, 'escape-key');\n  });\n  const closeOnEscapeKeyDownCapture = useEffectEvent(event => {\n    var _getTarget2;\n    const callback = () => {\n      var _getTarget;\n      closeOnEscapeKeyDown(event);\n      (_getTarget = getTarget$1(event)) == null || _getTarget.removeEventListener('keydown', callback);\n    };\n    (_getTarget2 = getTarget$1(event)) == null || _getTarget2.addEventListener('keydown', callback);\n  });\n  const closeOnPressOutside = useEffectEvent(event => {\n    var _dataRef$current$floa2;\n    // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n    const insideReactTree = insideReactTreeRef.current;\n    insideReactTreeRef.current = false;\n\n    // When click outside is lazy (`click` event), handle dragging.\n    // Don't close if:\n    // - The click started inside the floating element.\n    // - The click ended inside the floating element.\n    const endedOrStartedInside = endedOrStartedInsideRef.current;\n    endedOrStartedInsideRef.current = false;\n    if (outsidePressEvent === 'click' && endedOrStartedInside) {\n      return;\n    }\n    if (insideReactTree) {\n      return;\n    }\n    if (typeof outsidePress === 'function' && !outsidePress(event)) {\n      return;\n    }\n    const target = getTarget$1(event);\n    const inertSelector = \"[\" + createAttribute('inert') + \"]\";\n    const markers = getDocument$1(elements.floating).querySelectorAll(inertSelector);\n    let targetRootAncestor = isElement(target) ? target : null;\n    while (targetRootAncestor && !isLastTraversableNode(targetRootAncestor)) {\n      const nextParent = getParentNode(targetRootAncestor);\n      if (isLastTraversableNode(nextParent) || !isElement(nextParent)) {\n        break;\n      }\n      targetRootAncestor = nextParent;\n    }\n\n    // Check if the click occurred on a third-party element injected after the\n    // floating element rendered.\n    if (markers.length && isElement(target) && !isRootElement(target) &&\n    // Clicked on a direct ancestor (e.g. FloatingOverlay).\n    !contains$1(target, elements.floating) &&\n    // If the target root element contains none of the markers, then the\n    // element was injected after the floating element rendered.\n    Array.from(markers).every(marker => !contains$1(targetRootAncestor, marker))) {\n      return;\n    }\n\n    // Check if the click occurred on the scrollbar\n    if (isHTMLElement(target) && floating) {\n      const lastTraversableNode = isLastTraversableNode(target);\n      const style = getComputedStyle(target);\n      const scrollRe = /auto|scroll/;\n      const isScrollableX = lastTraversableNode || scrollRe.test(style.overflowX);\n      const isScrollableY = lastTraversableNode || scrollRe.test(style.overflowY);\n      const canScrollX = isScrollableX && target.clientWidth > 0 && target.scrollWidth > target.clientWidth;\n      const canScrollY = isScrollableY && target.clientHeight > 0 && target.scrollHeight > target.clientHeight;\n      const isRTL = style.direction === 'rtl';\n\n      // Check click position relative to scrollbar.\n      // In some browsers it is possible to change the <body> (or window)\n      // scrollbar to the left side, but is very rare and is difficult to\n      // check for. Plus, for modal dialogs with backdrops, it is more\n      // important that the backdrop is checked but not so much the window.\n      const pressedVerticalScrollbar = canScrollY && (isRTL ? event.offsetX <= target.offsetWidth - target.clientWidth : event.offsetX > target.clientWidth);\n      const pressedHorizontalScrollbar = canScrollX && event.offsetY > target.clientHeight;\n      if (pressedVerticalScrollbar || pressedHorizontalScrollbar) {\n        return;\n      }\n    }\n    const nodeId = (_dataRef$current$floa2 = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa2.nodeId;\n    const targetIsInsideChildren = tree && getNodeChildren$1(tree.nodesRef.current, nodeId).some(node => {\n      var _node$context;\n      return isEventTargetWithin(event, (_node$context = node.context) == null ? void 0 : _node$context.elements.floating);\n    });\n    if (isEventTargetWithin(event, elements.floating) || isEventTargetWithin(event, elements.domReference) || targetIsInsideChildren) {\n      return;\n    }\n    const children = tree ? getNodeChildren$1(tree.nodesRef.current, nodeId) : [];\n    if (children.length > 0) {\n      let shouldDismiss = true;\n      children.forEach(child => {\n        var _child$context2;\n        if ((_child$context2 = child.context) != null && _child$context2.open && !child.context.dataRef.current.__outsidePressBubbles) {\n          shouldDismiss = false;\n          return;\n        }\n      });\n      if (!shouldDismiss) {\n        return;\n      }\n    }\n    onOpenChange(false, event, 'outside-press');\n  });\n  const closeOnPressOutsideCapture = useEffectEvent(event => {\n    var _getTarget4;\n    const callback = () => {\n      var _getTarget3;\n      closeOnPressOutside(event);\n      (_getTarget3 = getTarget$1(event)) == null || _getTarget3.removeEventListener(outsidePressEvent, callback);\n    };\n    (_getTarget4 = getTarget$1(event)) == null || _getTarget4.addEventListener(outsidePressEvent, callback);\n  });\n  React.useEffect(() => {\n    if (!open || !enabled) {\n      return;\n    }\n    dataRef.current.__escapeKeyBubbles = escapeKeyBubbles;\n    dataRef.current.__outsidePressBubbles = outsidePressBubbles;\n    let compositionTimeout = -1;\n    function onScroll(event) {\n      onOpenChange(false, event, 'ancestor-scroll');\n    }\n    function handleCompositionStart() {\n      window.clearTimeout(compositionTimeout);\n      isComposingRef.current = true;\n    }\n    function handleCompositionEnd() {\n      // Safari fires `compositionend` before `keydown`, so we need to wait\n      // until the next tick to set `isComposing` to `false`.\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      compositionTimeout = window.setTimeout(() => {\n        isComposingRef.current = false;\n      },\n      // 0ms or 1ms don't work in Safari. 5ms appears to consistently work.\n      // Only apply to WebKit for the test to remain 0ms.\n      isWebKit() ? 5 : 0);\n    }\n    const doc = getDocument$1(elements.floating);\n    if (escapeKey) {\n      doc.addEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n      doc.addEventListener('compositionstart', handleCompositionStart);\n      doc.addEventListener('compositionend', handleCompositionEnd);\n    }\n    outsidePress && doc.addEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n    let ancestors = [];\n    if (ancestorScroll) {\n      if (isElement(elements.domReference)) {\n        ancestors = getOverflowAncestors(elements.domReference);\n      }\n      if (isElement(elements.floating)) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.floating));\n      }\n      if (!isElement(elements.reference) && elements.reference && elements.reference.contextElement) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.reference.contextElement));\n      }\n    }\n\n    // Ignore the visual viewport for scrolling dismissal (allow pinch-zoom)\n    ancestors = ancestors.filter(ancestor => {\n      var _doc$defaultView;\n      return ancestor !== ((_doc$defaultView = doc.defaultView) == null ? void 0 : _doc$defaultView.visualViewport);\n    });\n    ancestors.forEach(ancestor => {\n      ancestor.addEventListener('scroll', onScroll, {\n        passive: true\n      });\n    });\n    return () => {\n      if (escapeKey) {\n        doc.removeEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n        doc.removeEventListener('compositionstart', handleCompositionStart);\n        doc.removeEventListener('compositionend', handleCompositionEnd);\n      }\n      outsidePress && doc.removeEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n      ancestors.forEach(ancestor => {\n        ancestor.removeEventListener('scroll', onScroll);\n      });\n      window.clearTimeout(compositionTimeout);\n    };\n  }, [dataRef, elements, escapeKey, outsidePress, outsidePressEvent, open, onOpenChange, ancestorScroll, enabled, escapeKeyBubbles, outsidePressBubbles, closeOnEscapeKeyDown, escapeKeyCapture, closeOnEscapeKeyDownCapture, closeOnPressOutside, outsidePressCapture, closeOnPressOutsideCapture]);\n  React.useEffect(() => {\n    insideReactTreeRef.current = false;\n  }, [outsidePress, outsidePressEvent]);\n  const reference = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    ...(referencePress && {\n      [bubbleHandlerKeys[referencePressEvent]]: event => {\n        onOpenChange(false, event.nativeEvent, 'reference-press');\n      },\n      ...(referencePressEvent !== 'click' && {\n        onClick(event) {\n          onOpenChange(false, event.nativeEvent, 'reference-press');\n        }\n      })\n    })\n  }), [closeOnEscapeKeyDown, onOpenChange, referencePress, referencePressEvent]);\n  const floating = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    onMouseDown() {\n      endedOrStartedInsideRef.current = true;\n    },\n    onMouseUp() {\n      endedOrStartedInsideRef.current = true;\n    },\n    [captureHandlerKeys[outsidePressEvent]]: () => {\n      insideReactTreeRef.current = true;\n    }\n  }), [closeOnEscapeKeyDown, outsidePressEvent]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction useFloatingRootContext(options) {\n  const {\n    open = false,\n    onOpenChange: onOpenChangeProp,\n    elements: elementsProp\n  } = options;\n  const floatingId = useId();\n  const dataRef = React.useRef({});\n  const [events] = React.useState(() => createEventEmitter());\n  const nested = useFloatingParentNodeId() != null;\n  if (process.env.NODE_ENV !== \"production\") {\n    const optionDomReference = elementsProp.reference;\n    if (optionDomReference && !isElement(optionDomReference)) {\n      error('Cannot pass a virtual element to the `elements.reference` option,', 'as it must be a real DOM element. Use `refs.setPositionReference()`', 'instead.');\n    }\n  }\n  const [positionReference, setPositionReference] = React.useState(elementsProp.reference);\n  const onOpenChange = useEffectEvent((open, event, reason) => {\n    dataRef.current.openEvent = open ? event : undefined;\n    events.emit('openchange', {\n      open,\n      event,\n      reason,\n      nested\n    });\n    onOpenChangeProp == null || onOpenChangeProp(open, event, reason);\n  });\n  const refs = React.useMemo(() => ({\n    setPositionReference\n  }), []);\n  const elements = React.useMemo(() => ({\n    reference: positionReference || elementsProp.reference || null,\n    floating: elementsProp.floating || null,\n    domReference: elementsProp.reference\n  }), [positionReference, elementsProp.reference, elementsProp.floating]);\n  return React.useMemo(() => ({\n    dataRef,\n    open,\n    onOpenChange,\n    elements,\n    events,\n    floatingId,\n    refs\n  }), [open, onOpenChange, elements, events, floatingId, refs]);\n}\n\n/**\n * Provides data to position a floating element and context to add interactions.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    nodeId\n  } = options;\n  const internalRootContext = useFloatingRootContext({\n    ...options,\n    elements: {\n      reference: null,\n      floating: null,\n      ...options.elements\n    }\n  });\n  const rootContext = options.rootContext || internalRootContext;\n  const computedElements = rootContext.elements;\n  const [_domReference, setDomReference] = React.useState(null);\n  const [positionReference, _setPositionReference] = React.useState(null);\n  const optionDomReference = computedElements == null ? void 0 : computedElements.domReference;\n  const domReference = optionDomReference || _domReference;\n  const domReferenceRef = React.useRef(null);\n  const tree = useFloatingTree();\n  useModernLayoutEffect(() => {\n    if (domReference) {\n      domReferenceRef.current = domReference;\n    }\n  }, [domReference]);\n  const position = useFloating$1({\n    ...options,\n    elements: {\n      ...computedElements,\n      ...(positionReference && {\n        reference: positionReference\n      })\n    }\n  });\n  const setPositionReference = React.useCallback(node => {\n    const computedPositionReference = isElement(node) ? {\n      getBoundingClientRect: () => node.getBoundingClientRect(),\n      getClientRects: () => node.getClientRects(),\n      contextElement: node\n    } : node;\n    // Store the positionReference in state if the DOM reference is specified externally via the\n    // `elements.reference` option. This ensures that it won't be overridden on future renders.\n    _setPositionReference(computedPositionReference);\n    position.refs.setReference(computedPositionReference);\n  }, [position.refs]);\n  const setReference = React.useCallback(node => {\n    if (isElement(node) || node === null) {\n      domReferenceRef.current = node;\n      setDomReference(node);\n    }\n\n    // Backwards-compatibility for passing a virtual element to `reference`\n    // after it has set the DOM reference.\n    if (isElement(position.refs.reference.current) || position.refs.reference.current === null ||\n    // Don't allow setting virtual elements using the old technique back to\n    // `null` to support `positionReference` + an unstable `reference`\n    // callback ref.\n    node !== null && !isElement(node)) {\n      position.refs.setReference(node);\n    }\n  }, [position.refs]);\n  const refs = React.useMemo(() => ({\n    ...position.refs,\n    setReference,\n    setPositionReference,\n    domReference: domReferenceRef\n  }), [position.refs, setReference, setPositionReference]);\n  const elements = React.useMemo(() => ({\n    ...position.elements,\n    domReference: domReference\n  }), [position.elements, domReference]);\n  const context = React.useMemo(() => ({\n    ...position,\n    ...rootContext,\n    refs,\n    elements,\n    nodeId\n  }), [position, refs, elements, nodeId, rootContext]);\n  useModernLayoutEffect(() => {\n    rootContext.dataRef.current.floatingContext = context;\n    const node = tree == null ? void 0 : tree.nodesRef.current.find(node => node.id === nodeId);\n    if (node) {\n      node.context = context;\n    }\n  });\n  return React.useMemo(() => ({\n    ...position,\n    context,\n    refs,\n    elements\n  }), [position, refs, elements, context]);\n}\n\nfunction isMacSafari() {\n  return isMac() && isSafari();\n}\n/**\n * Opens the floating element while the reference element has focus, like CSS\n * `:focus`.\n * @see https://floating-ui.com/docs/useFocus\n */\nfunction useFocus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    visibleOnly = true\n  } = props;\n  const blockFocusRef = React.useRef(false);\n  const timeoutRef = React.useRef(-1);\n  const keyboardModalityRef = React.useRef(true);\n  React.useEffect(() => {\n    if (!enabled) return;\n    const win = getWindow(elements.domReference);\n\n    // If the reference was focused and the user left the tab/window, and the\n    // floating element was not open, the focus should be blocked when they\n    // return to the tab/window.\n    function onBlur() {\n      if (!open && isHTMLElement(elements.domReference) && elements.domReference === activeElement(getDocument$1(elements.domReference))) {\n        blockFocusRef.current = true;\n      }\n    }\n    function onKeyDown() {\n      keyboardModalityRef.current = true;\n    }\n    function onPointerDown() {\n      keyboardModalityRef.current = false;\n    }\n    win.addEventListener('blur', onBlur);\n    if (isMacSafari()) {\n      win.addEventListener('keydown', onKeyDown, true);\n      win.addEventListener('pointerdown', onPointerDown, true);\n    }\n    return () => {\n      win.removeEventListener('blur', onBlur);\n      if (isMacSafari()) {\n        win.removeEventListener('keydown', onKeyDown, true);\n        win.removeEventListener('pointerdown', onPointerDown, true);\n      }\n    };\n  }, [elements.domReference, open, enabled]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        reason\n      } = _ref;\n      if (reason === 'reference-press' || reason === 'escape-key') {\n        blockFocusRef.current = true;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [events, enabled]);\n  React.useEffect(() => {\n    return () => {\n      clearTimeoutIfSet(timeoutRef);\n    };\n  }, []);\n  const reference = React.useMemo(() => ({\n    onMouseLeave() {\n      blockFocusRef.current = false;\n    },\n    onFocus(event) {\n      if (blockFocusRef.current) return;\n      const target = getTarget$1(event.nativeEvent);\n      if (visibleOnly && isElement(target)) {\n        // Safari fails to match `:focus-visible` if focus was initially\n        // outside the document.\n        if (isMacSafari() && !event.relatedTarget) {\n          if (!keyboardModalityRef.current && !isTypeableElement(target)) {\n            return;\n          }\n        } else if (!matchesFocusVisible(target)) {\n          return;\n        }\n      }\n      onOpenChange(true, event.nativeEvent, 'focus');\n    },\n    onBlur(event) {\n      blockFocusRef.current = false;\n      const relatedTarget = event.relatedTarget;\n      const nativeEvent = event.nativeEvent;\n\n      // Hit the non-modal focus management portal guard. Focus will be\n      // moved into the floating element immediately after.\n      const movedToFocusGuard = isElement(relatedTarget) && relatedTarget.hasAttribute(createAttribute('focus-guard')) && relatedTarget.getAttribute('data-type') === 'outside';\n\n      // Wait for the window blur listener to fire.\n      timeoutRef.current = window.setTimeout(() => {\n        var _dataRef$current$floa;\n        const activeEl = activeElement(elements.domReference ? elements.domReference.ownerDocument : document);\n\n        // Focus left the page, keep it open.\n        if (!relatedTarget && activeEl === elements.domReference) return;\n\n        // When focusing the reference element (e.g. regular click), then\n        // clicking into the floating element, prevent it from hiding.\n        // Note: it must be focusable, e.g. `tabindex=\"-1\"`.\n        // We can not rely on relatedTarget to point to the correct element\n        // as it will only point to the shadow host of the newly focused element\n        // and not the element that actually has received focus if it is located\n        // inside a shadow root.\n        if (contains$1((_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.refs.floating.current, activeEl) || contains$1(elements.domReference, activeEl) || movedToFocusGuard) {\n          return;\n        }\n        onOpenChange(false, nativeEvent, 'focus');\n      });\n    }\n  }), [dataRef, elements.domReference, onOpenChange, visibleOnly]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction mergeProps(userProps, propsList, elementKey) {\n  const map = new Map();\n  const isItem = elementKey === 'item';\n  let domUserProps = userProps;\n  if (isItem && userProps) {\n    const {\n      [ACTIVE_KEY]: _,\n      [SELECTED_KEY]: __,\n      ...validProps\n    } = userProps;\n    domUserProps = validProps;\n  }\n  return {\n    ...(elementKey === 'floating' && {\n      tabIndex: -1,\n      [FOCUSABLE_ATTRIBUTE]: ''\n    }),\n    ...domUserProps,\n    ...propsList.map(value => {\n      const propsOrGetProps = value ? value[elementKey] : null;\n      if (typeof propsOrGetProps === 'function') {\n        return userProps ? propsOrGetProps(userProps) : null;\n      }\n      return propsOrGetProps;\n    }).concat(userProps).reduce((acc, props) => {\n      if (!props) {\n        return acc;\n      }\n      Object.entries(props).forEach(_ref => {\n        let [key, value] = _ref;\n        if (isItem && [ACTIVE_KEY, SELECTED_KEY].includes(key)) {\n          return;\n        }\n        if (key.indexOf('on') === 0) {\n          if (!map.has(key)) {\n            map.set(key, []);\n          }\n          if (typeof value === 'function') {\n            var _map$get;\n            (_map$get = map.get(key)) == null || _map$get.push(value);\n            acc[key] = function () {\n              var _map$get2;\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              return (_map$get2 = map.get(key)) == null ? void 0 : _map$get2.map(fn => fn(...args)).find(val => val !== undefined);\n            };\n          }\n        } else {\n          acc[key] = value;\n        }\n      });\n      return acc;\n    }, {})\n  };\n}\n/**\n * Merges an array of interaction hooks' props into prop getters, allowing\n * event handler functions to be composed together without overwriting one\n * another.\n * @see https://floating-ui.com/docs/useInteractions\n */\nfunction useInteractions(propsList) {\n  if (propsList === void 0) {\n    propsList = [];\n  }\n  const referenceDeps = propsList.map(key => key == null ? void 0 : key.reference);\n  const floatingDeps = propsList.map(key => key == null ? void 0 : key.floating);\n  const itemDeps = propsList.map(key => key == null ? void 0 : key.item);\n  const getReferenceProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'reference'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  referenceDeps);\n  const getFloatingProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'floating'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  floatingDeps);\n  const getItemProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'item'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  itemDeps);\n  return React.useMemo(() => ({\n    getReferenceProps,\n    getFloatingProps,\n    getItemProps\n  }), [getReferenceProps, getFloatingProps, getItemProps]);\n}\n\nconst ESCAPE = 'Escape';\nfunction doSwitch(orientation, vertical, horizontal) {\n  switch (orientation) {\n    case 'vertical':\n      return vertical;\n    case 'horizontal':\n      return horizontal;\n    default:\n      return vertical || horizontal;\n  }\n}\nfunction isMainOrientationKey(key, orientation) {\n  const vertical = key === ARROW_UP || key === ARROW_DOWN;\n  const horizontal = key === ARROW_LEFT || key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isMainOrientationToEndKey(key, orientation, rtl) {\n  const vertical = key === ARROW_DOWN;\n  const horizontal = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal) || key === 'Enter' || key === ' ' || key === '';\n}\nfunction isCrossOrientationOpenKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  const horizontal = key === ARROW_DOWN;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isCrossOrientationCloseKey(key, orientation, rtl, cols) {\n  const vertical = rtl ? key === ARROW_RIGHT : key === ARROW_LEFT;\n  const horizontal = key === ARROW_UP;\n  if (orientation === 'both' || orientation === 'horizontal' && cols && cols > 1) {\n    return key === ESCAPE;\n  }\n  return doSwitch(orientation, vertical, horizontal);\n}\n/**\n * Adds arrow key-based navigation of a list of items, either using real DOM\n * focus or virtual focus.\n * @see https://floating-ui.com/docs/useListNavigation\n */\nfunction useListNavigation(context, props) {\n  const {\n    open,\n    onOpenChange,\n    elements,\n    floatingId\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onNavigate: unstable_onNavigate = () => {},\n    enabled = true,\n    selectedIndex = null,\n    allowEscape = false,\n    loop = false,\n    nested = false,\n    rtl = false,\n    virtual = false,\n    focusItemOnOpen = 'auto',\n    focusItemOnHover = true,\n    openOnArrowKeyDown = true,\n    disabledIndices = undefined,\n    orientation = 'vertical',\n    parentOrientation,\n    cols = 1,\n    scrollItemIntoView = true,\n    virtualItemRef,\n    itemSizes,\n    dense = false\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (allowEscape) {\n      if (!loop) {\n        warn('`useListNavigation` looping must be enabled to allow escaping.');\n      }\n      if (!virtual) {\n        warn('`useListNavigation` must be virtual to allow escaping.');\n      }\n    }\n    if (orientation === 'vertical' && cols > 1) {\n      warn('In grid list navigation mode (`cols` > 1), the `orientation` should', 'be either \"horizontal\" or \"both\".');\n    }\n  }\n  const floatingFocusElement = getFloatingFocusElement(elements.floating);\n  const floatingFocusElementRef = useLatestRef(floatingFocusElement);\n  const parentId = useFloatingParentNodeId();\n  const tree = useFloatingTree();\n  useModernLayoutEffect(() => {\n    context.dataRef.current.orientation = orientation;\n  }, [context, orientation]);\n  const onNavigate = useEffectEvent(() => {\n    unstable_onNavigate(indexRef.current === -1 ? null : indexRef.current);\n  });\n  const typeableComboboxReference = isTypeableCombobox(elements.domReference);\n  const focusItemOnOpenRef = React.useRef(focusItemOnOpen);\n  const indexRef = React.useRef(selectedIndex != null ? selectedIndex : -1);\n  const keyRef = React.useRef(null);\n  const isPointerModalityRef = React.useRef(true);\n  const previousOnNavigateRef = React.useRef(onNavigate);\n  const previousMountedRef = React.useRef(!!elements.floating);\n  const previousOpenRef = React.useRef(open);\n  const forceSyncFocusRef = React.useRef(false);\n  const forceScrollIntoViewRef = React.useRef(false);\n  const disabledIndicesRef = useLatestRef(disabledIndices);\n  const latestOpenRef = useLatestRef(open);\n  const scrollItemIntoViewRef = useLatestRef(scrollItemIntoView);\n  const selectedIndexRef = useLatestRef(selectedIndex);\n  const [activeId, setActiveId] = React.useState();\n  const [virtualId, setVirtualId] = React.useState();\n  const focusItem = useEffectEvent(() => {\n    function runFocus(item) {\n      if (virtual) {\n        var _item$id;\n        if ((_item$id = item.id) != null && _item$id.endsWith('-fui-option')) {\n          item.id = floatingId + \"-\" + Math.random().toString(16).slice(2, 10);\n        }\n        setActiveId(item.id);\n        tree == null || tree.events.emit('virtualfocus', item);\n        if (virtualItemRef) {\n          virtualItemRef.current = item;\n        }\n      } else {\n        enqueueFocus(item, {\n          sync: forceSyncFocusRef.current,\n          preventScroll: true\n        });\n      }\n    }\n    const initialItem = listRef.current[indexRef.current];\n    const forceScrollIntoView = forceScrollIntoViewRef.current;\n    if (initialItem) {\n      runFocus(initialItem);\n    }\n    const scheduler = forceSyncFocusRef.current ? v => v() : requestAnimationFrame;\n    scheduler(() => {\n      const waitedItem = listRef.current[indexRef.current] || initialItem;\n      if (!waitedItem) return;\n      if (!initialItem) {\n        runFocus(waitedItem);\n      }\n      const scrollIntoViewOptions = scrollItemIntoViewRef.current;\n      const shouldScrollIntoView = scrollIntoViewOptions && item && (forceScrollIntoView || !isPointerModalityRef.current);\n      if (shouldScrollIntoView) {\n        // JSDOM doesn't support `.scrollIntoView()` but it's widely supported\n        // by all browsers.\n        waitedItem.scrollIntoView == null || waitedItem.scrollIntoView(typeof scrollIntoViewOptions === 'boolean' ? {\n          block: 'nearest',\n          inline: 'nearest'\n        } : scrollIntoViewOptions);\n      }\n    });\n  });\n\n  // Sync `selectedIndex` to be the `activeIndex` upon opening the floating\n  // element. Also, reset `activeIndex` upon closing the floating element.\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (open && elements.floating) {\n      if (focusItemOnOpenRef.current && selectedIndex != null) {\n        // Regardless of the pointer modality, we want to ensure the selected\n        // item comes into view when the floating element is opened.\n        forceScrollIntoViewRef.current = true;\n        indexRef.current = selectedIndex;\n        onNavigate();\n      }\n    } else if (previousMountedRef.current) {\n      // Since the user can specify `onNavigate` conditionally\n      // (onNavigate: open ? setActiveIndex : setSelectedIndex),\n      // we store and call the previous function.\n      indexRef.current = -1;\n      previousOnNavigateRef.current();\n    }\n  }, [enabled, open, elements.floating, selectedIndex, onNavigate]);\n\n  // Sync `activeIndex` to be the focused item while the floating element is\n  // open.\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!open) return;\n    if (!elements.floating) return;\n    if (activeIndex == null) {\n      forceSyncFocusRef.current = false;\n      if (selectedIndexRef.current != null) {\n        return;\n      }\n\n      // Reset while the floating element was open (e.g. the list changed).\n      if (previousMountedRef.current) {\n        indexRef.current = -1;\n        focusItem();\n      }\n\n      // Initial sync.\n      if ((!previousOpenRef.current || !previousMountedRef.current) && focusItemOnOpenRef.current && (keyRef.current != null || focusItemOnOpenRef.current === true && keyRef.current == null)) {\n        let runs = 0;\n        const waitForListPopulated = () => {\n          if (listRef.current[0] == null) {\n            // Avoid letting the browser paint if possible on the first try,\n            // otherwise use rAF. Don't try more than twice, since something\n            // is wrong otherwise.\n            if (runs < 2) {\n              const scheduler = runs ? requestAnimationFrame : queueMicrotask;\n              scheduler(waitForListPopulated);\n            }\n            runs++;\n          } else {\n            indexRef.current = keyRef.current == null || isMainOrientationToEndKey(keyRef.current, orientation, rtl) || nested ? getMinListIndex(listRef, disabledIndicesRef.current) : getMaxListIndex(listRef, disabledIndicesRef.current);\n            keyRef.current = null;\n            onNavigate();\n          }\n        };\n        waitForListPopulated();\n      }\n    } else if (!isIndexOutOfListBounds(listRef, activeIndex)) {\n      indexRef.current = activeIndex;\n      focusItem();\n      forceScrollIntoViewRef.current = false;\n    }\n  }, [enabled, open, elements.floating, activeIndex, selectedIndexRef, nested, listRef, orientation, rtl, onNavigate, focusItem, disabledIndicesRef]);\n\n  // Ensure the parent floating element has focus when a nested child closes\n  // to allow arrow key navigation to work after the pointer leaves the child.\n  useModernLayoutEffect(() => {\n    var _nodes$find;\n    if (!enabled || elements.floating || !tree || virtual || !previousMountedRef.current) {\n      return;\n    }\n    const nodes = tree.nodesRef.current;\n    const parent = (_nodes$find = nodes.find(node => node.id === parentId)) == null || (_nodes$find = _nodes$find.context) == null ? void 0 : _nodes$find.elements.floating;\n    const activeEl = activeElement(getDocument$1(elements.floating));\n    const treeContainsActiveEl = nodes.some(node => node.context && contains$1(node.context.elements.floating, activeEl));\n    if (parent && !treeContainsActiveEl && isPointerModalityRef.current) {\n      parent.focus({\n        preventScroll: true\n      });\n    }\n  }, [enabled, elements.floating, tree, parentId, virtual]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!tree) return;\n    if (!virtual) return;\n    if (parentId) return;\n    function handleVirtualFocus(item) {\n      setVirtualId(item.id);\n      if (virtualItemRef) {\n        virtualItemRef.current = item;\n      }\n    }\n    tree.events.on('virtualfocus', handleVirtualFocus);\n    return () => {\n      tree.events.off('virtualfocus', handleVirtualFocus);\n    };\n  }, [enabled, tree, virtual, parentId, virtualItemRef]);\n  useModernLayoutEffect(() => {\n    previousOnNavigateRef.current = onNavigate;\n    previousOpenRef.current = open;\n    previousMountedRef.current = !!elements.floating;\n  });\n  useModernLayoutEffect(() => {\n    if (!open) {\n      keyRef.current = null;\n    }\n  }, [open]);\n  const hasActiveIndex = activeIndex != null;\n  const item = React.useMemo(() => {\n    function syncCurrentTarget(currentTarget) {\n      if (!open) return;\n      const index = listRef.current.indexOf(currentTarget);\n      if (index !== -1 && indexRef.current !== index) {\n        indexRef.current = index;\n        onNavigate();\n      }\n    }\n    const props = {\n      onFocus(_ref) {\n        let {\n          currentTarget\n        } = _ref;\n        forceSyncFocusRef.current = true;\n        syncCurrentTarget(currentTarget);\n      },\n      onClick: _ref2 => {\n        let {\n          currentTarget\n        } = _ref2;\n        return currentTarget.focus({\n          preventScroll: true\n        });\n      },\n      // Safari\n      ...(focusItemOnHover && {\n        onMouseMove(_ref3) {\n          let {\n            currentTarget\n          } = _ref3;\n          forceSyncFocusRef.current = true;\n          forceScrollIntoViewRef.current = false;\n          syncCurrentTarget(currentTarget);\n        },\n        onPointerLeave(_ref4) {\n          let {\n            pointerType\n          } = _ref4;\n          if (!isPointerModalityRef.current || pointerType === 'touch') {\n            return;\n          }\n          forceSyncFocusRef.current = true;\n          indexRef.current = -1;\n          onNavigate();\n          if (!virtual) {\n            var _floatingFocusElement;\n            (_floatingFocusElement = floatingFocusElementRef.current) == null || _floatingFocusElement.focus({\n              preventScroll: true\n            });\n          }\n        }\n      })\n    };\n    return props;\n  }, [open, floatingFocusElementRef, focusItemOnHover, listRef, onNavigate, virtual]);\n  const getParentOrientation = React.useCallback(() => {\n    var _tree$nodesRef$curren;\n    return parentOrientation != null ? parentOrientation : tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.dataRef) == null ? void 0 : _tree$nodesRef$curren.current.orientation;\n  }, [parentId, tree, parentOrientation]);\n  const commonOnKeyDown = useEffectEvent(event => {\n    isPointerModalityRef.current = false;\n    forceSyncFocusRef.current = true;\n\n    // When composing a character, Chrome fires ArrowDown twice. Firefox/Safari\n    // don't appear to suffer from this. `event.isComposing` is avoided due to\n    // Safari not supporting it properly (although it's not needed in the first\n    // place for Safari, just avoiding any possible issues).\n    if (event.which === 229) {\n      return;\n    }\n\n    // If the floating element is animating out, ignore navigation. Otherwise,\n    // the `activeIndex` gets set to 0 despite not being open so the next time\n    // the user ArrowDowns, the first item won't be focused.\n    if (!latestOpenRef.current && event.currentTarget === floatingFocusElementRef.current) {\n      return;\n    }\n    if (nested && isCrossOrientationCloseKey(event.key, orientation, rtl, cols)) {\n      // If the nested list's close key is also the parent navigation key,\n      // let the parent navigate. Otherwise, stop propagating the event.\n      if (!isMainOrientationKey(event.key, getParentOrientation())) {\n        stopEvent(event);\n      }\n      onOpenChange(false, event.nativeEvent, 'list-navigation');\n      if (isHTMLElement(elements.domReference)) {\n        if (virtual) {\n          tree == null || tree.events.emit('virtualfocus', elements.domReference);\n        } else {\n          elements.domReference.focus();\n        }\n      }\n      return;\n    }\n    const currentIndex = indexRef.current;\n    const minIndex = getMinListIndex(listRef, disabledIndices);\n    const maxIndex = getMaxListIndex(listRef, disabledIndices);\n    if (!typeableComboboxReference) {\n      if (event.key === 'Home') {\n        stopEvent(event);\n        indexRef.current = minIndex;\n        onNavigate();\n      }\n      if (event.key === 'End') {\n        stopEvent(event);\n        indexRef.current = maxIndex;\n        onNavigate();\n      }\n    }\n\n    // Grid navigation.\n    if (cols > 1) {\n      const sizes = itemSizes || Array.from({\n        length: listRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = createGridCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isListIndexDisabled(listRef, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isListIndexDisabled(listRef, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      const index = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex != null ? listRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        rtl,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getGridCellIndices([...(disabledIndices || listRef.current.map((_, index) => isListIndexDisabled(listRef, index) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getGridCellIndexOfCorner(indexRef.current > maxIndex ? minIndex : indexRef.current, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction\n        // we're moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === (rtl ? ARROW_LEFT : ARROW_RIGHT) ? 'tr' : 'tl'),\n        stopEvent: true\n      })];\n      if (index != null) {\n        indexRef.current = index;\n        onNavigate();\n      }\n      if (orientation === 'both') {\n        return;\n      }\n    }\n    if (isMainOrientationKey(event.key, orientation)) {\n      stopEvent(event);\n\n      // Reset the index if no item is focused.\n      if (open && !virtual && activeElement(event.currentTarget.ownerDocument) === event.currentTarget) {\n        indexRef.current = isMainOrientationToEndKey(event.key, orientation, rtl) ? minIndex : maxIndex;\n        onNavigate();\n        return;\n      }\n      if (isMainOrientationToEndKey(event.key, orientation, rtl)) {\n        if (loop) {\n          indexRef.current = currentIndex >= maxIndex ? allowEscape && currentIndex !== listRef.current.length ? -1 : minIndex : findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.min(maxIndex, findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          }));\n        }\n      } else {\n        if (loop) {\n          indexRef.current = currentIndex <= minIndex ? allowEscape && currentIndex !== -1 ? listRef.current.length : maxIndex : findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.max(minIndex, findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          }));\n        }\n      }\n      if (isIndexOutOfListBounds(listRef, indexRef.current)) {\n        indexRef.current = -1;\n      }\n      onNavigate();\n    }\n  });\n  const ariaActiveDescendantProp = React.useMemo(() => {\n    return virtual && open && hasActiveIndex && {\n      'aria-activedescendant': virtualId || activeId\n    };\n  }, [virtual, open, hasActiveIndex, virtualId, activeId]);\n  const floating = React.useMemo(() => {\n    return {\n      'aria-orientation': orientation === 'both' ? undefined : orientation,\n      ...(!typeableComboboxReference ? ariaActiveDescendantProp : {}),\n      onKeyDown: commonOnKeyDown,\n      onPointerMove() {\n        isPointerModalityRef.current = true;\n      }\n    };\n  }, [ariaActiveDescendantProp, commonOnKeyDown, orientation, typeableComboboxReference]);\n  const reference = React.useMemo(() => {\n    function checkVirtualMouse(event) {\n      if (focusItemOnOpen === 'auto' && isVirtualClick(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    function checkVirtualPointer(event) {\n      // `pointerdown` fires first, reset the state then perform the checks.\n      focusItemOnOpenRef.current = focusItemOnOpen;\n      if (focusItemOnOpen === 'auto' && isVirtualPointerEvent(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    return {\n      ...ariaActiveDescendantProp,\n      onKeyDown(event) {\n        isPointerModalityRef.current = false;\n        const isArrowKey = event.key.startsWith('Arrow');\n        const isHomeOrEndKey = ['Home', 'End'].includes(event.key);\n        const isMoveKey = isArrowKey || isHomeOrEndKey;\n        const isCrossOpenKey = isCrossOrientationOpenKey(event.key, orientation, rtl);\n        const isCrossCloseKey = isCrossOrientationCloseKey(event.key, orientation, rtl, cols);\n        const isParentCrossOpenKey = isCrossOrientationOpenKey(event.key, getParentOrientation(), rtl);\n        const isMainKey = isMainOrientationKey(event.key, orientation);\n        const isNavigationKey = (nested ? isParentCrossOpenKey : isMainKey) || event.key === 'Enter' || event.key.trim() === '';\n        if (virtual && open) {\n          const rootNode = tree == null ? void 0 : tree.nodesRef.current.find(node => node.parentId == null);\n          const deepestNode = tree && rootNode ? getDeepestNode(tree.nodesRef.current, rootNode.id) : null;\n          if (isMoveKey && deepestNode && virtualItemRef) {\n            const eventObject = new KeyboardEvent('keydown', {\n              key: event.key,\n              bubbles: true\n            });\n            if (isCrossOpenKey || isCrossCloseKey) {\n              var _deepestNode$context, _deepestNode$context2;\n              const isCurrentTarget = ((_deepestNode$context = deepestNode.context) == null ? void 0 : _deepestNode$context.elements.domReference) === event.currentTarget;\n              const dispatchItem = isCrossCloseKey && !isCurrentTarget ? (_deepestNode$context2 = deepestNode.context) == null ? void 0 : _deepestNode$context2.elements.domReference : isCrossOpenKey ? listRef.current.find(item => (item == null ? void 0 : item.id) === activeId) : null;\n              if (dispatchItem) {\n                stopEvent(event);\n                dispatchItem.dispatchEvent(eventObject);\n                setVirtualId(undefined);\n              }\n            }\n            if ((isMainKey || isHomeOrEndKey) && deepestNode.context) {\n              if (deepestNode.context.open && deepestNode.parentId && event.currentTarget !== deepestNode.context.elements.domReference) {\n                var _deepestNode$context$;\n                stopEvent(event);\n                (_deepestNode$context$ = deepestNode.context.elements.domReference) == null || _deepestNode$context$.dispatchEvent(eventObject);\n                return;\n              }\n            }\n          }\n          return commonOnKeyDown(event);\n        }\n        // If a floating element should not open on arrow key down, avoid\n        // setting `activeIndex` while it's closed.\n        if (!open && !openOnArrowKeyDown && isArrowKey) {\n          return;\n        }\n        if (isNavigationKey) {\n          const isParentMainKey = isMainOrientationKey(event.key, getParentOrientation());\n          keyRef.current = nested && isParentMainKey ? null : event.key;\n        }\n        if (nested) {\n          if (isParentCrossOpenKey) {\n            stopEvent(event);\n            if (open) {\n              indexRef.current = getMinListIndex(listRef, disabledIndicesRef.current);\n              onNavigate();\n            } else {\n              onOpenChange(true, event.nativeEvent, 'list-navigation');\n            }\n          }\n          return;\n        }\n        if (isMainKey) {\n          if (selectedIndex != null) {\n            indexRef.current = selectedIndex;\n          }\n          stopEvent(event);\n          if (!open && openOnArrowKeyDown) {\n            onOpenChange(true, event.nativeEvent, 'list-navigation');\n          } else {\n            commonOnKeyDown(event);\n          }\n          if (open) {\n            onNavigate();\n          }\n        }\n      },\n      onFocus() {\n        if (open && !virtual) {\n          indexRef.current = -1;\n          onNavigate();\n        }\n      },\n      onPointerDown: checkVirtualPointer,\n      onPointerEnter: checkVirtualPointer,\n      onMouseDown: checkVirtualMouse,\n      onClick: checkVirtualMouse\n    };\n  }, [activeId, ariaActiveDescendantProp, cols, commonOnKeyDown, disabledIndicesRef, focusItemOnOpen, listRef, nested, onNavigate, onOpenChange, open, openOnArrowKeyDown, orientation, getParentOrientation, rtl, selectedIndex, tree, virtual, virtualItemRef]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\nconst componentRoleToAriaRoleMap = /*#__PURE__*/new Map([['select', 'listbox'], ['combobox', 'listbox'], ['label', false]]);\n\n/**\n * Adds base screen reader props to the reference and floating elements for a\n * given floating element `role`.\n * @see https://floating-ui.com/docs/useRole\n */\nfunction useRole(context, props) {\n  var _elements$domReferenc, _componentRoleToAriaR;\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements,\n    floatingId: defaultFloatingId\n  } = context;\n  const {\n    enabled = true,\n    role = 'dialog'\n  } = props;\n  const defaultReferenceId = useId();\n  const referenceId = ((_elements$domReferenc = elements.domReference) == null ? void 0 : _elements$domReferenc.id) || defaultReferenceId;\n  const floatingId = React.useMemo(() => {\n    var _getFloatingFocusElem;\n    return ((_getFloatingFocusElem = getFloatingFocusElement(elements.floating)) == null ? void 0 : _getFloatingFocusElem.id) || defaultFloatingId;\n  }, [elements.floating, defaultFloatingId]);\n  const ariaRole = (_componentRoleToAriaR = componentRoleToAriaRoleMap.get(role)) != null ? _componentRoleToAriaR : role;\n  const parentId = useFloatingParentNodeId();\n  const isNested = parentId != null;\n  const reference = React.useMemo(() => {\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return {\n        [\"aria-\" + (role === 'label' ? 'labelledby' : 'describedby')]: open ? floatingId : undefined\n      };\n    }\n    return {\n      'aria-expanded': open ? 'true' : 'false',\n      'aria-haspopup': ariaRole === 'alertdialog' ? 'dialog' : ariaRole,\n      'aria-controls': open ? floatingId : undefined,\n      ...(ariaRole === 'listbox' && {\n        role: 'combobox'\n      }),\n      ...(ariaRole === 'menu' && {\n        id: referenceId\n      }),\n      ...(ariaRole === 'menu' && isNested && {\n        role: 'menuitem'\n      }),\n      ...(role === 'select' && {\n        'aria-autocomplete': 'none'\n      }),\n      ...(role === 'combobox' && {\n        'aria-autocomplete': 'list'\n      })\n    };\n  }, [ariaRole, floatingId, isNested, open, referenceId, role]);\n  const floating = React.useMemo(() => {\n    const floatingProps = {\n      id: floatingId,\n      ...(ariaRole && {\n        role: ariaRole\n      })\n    };\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return floatingProps;\n    }\n    return {\n      ...floatingProps,\n      ...(ariaRole === 'menu' && {\n        'aria-labelledby': referenceId\n      })\n    };\n  }, [ariaRole, floatingId, referenceId, role]);\n  const item = React.useCallback(_ref => {\n    let {\n      active,\n      selected\n    } = _ref;\n    const commonProps = {\n      role: 'option',\n      ...(active && {\n        id: floatingId + \"-fui-option\"\n      })\n    };\n\n    // For `menu`, we are unable to tell if the item is a `menuitemradio`\n    // or `menuitemcheckbox`. For backwards-compatibility reasons, also\n    // avoid defaulting to `menuitem` as it may overwrite custom role props.\n    switch (role) {\n      case 'select':\n        return {\n          ...commonProps,\n          'aria-selected': active && selected\n        };\n      case 'combobox':\n        {\n          return {\n            ...commonProps,\n            'aria-selected': selected\n          };\n        }\n    }\n    return {};\n  }, [floatingId, role]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\n// Converts a JS style key like `backgroundColor` to a CSS transition-property\n// like `background-color`.\nconst camelCaseToKebabCase = str => str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());\nfunction execWithArgsOrReturn(valueOrFn, args) {\n  return typeof valueOrFn === 'function' ? valueOrFn(args) : valueOrFn;\n}\nfunction useDelayUnmount(open, durationMs) {\n  const [isMounted, setIsMounted] = React.useState(open);\n  if (open && !isMounted) {\n    setIsMounted(true);\n  }\n  React.useEffect(() => {\n    if (!open && isMounted) {\n      const timeout = setTimeout(() => setIsMounted(false), durationMs);\n      return () => clearTimeout(timeout);\n    }\n  }, [open, isMounted, durationMs]);\n  return isMounted;\n}\n/**\n * Provides a status string to apply CSS transitions to a floating element,\n * correctly handling placement-aware transitions.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstatus\n */\nfunction useTransitionStatus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements: {\n      floating\n    }\n  } = context;\n  const {\n    duration = 250\n  } = props;\n  const isNumberDuration = typeof duration === 'number';\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [status, setStatus] = React.useState('unmounted');\n  const isMounted = useDelayUnmount(open, closeDuration);\n  if (!isMounted && status === 'close') {\n    setStatus('unmounted');\n  }\n  useModernLayoutEffect(() => {\n    if (!floating) return;\n    if (open) {\n      setStatus('initial');\n      const frame = requestAnimationFrame(() => {\n        // Ensure it opens before paint. With `FloatingDelayGroup`,\n        // this avoids a flicker when moving between floating elements\n        // to ensure one is always open with no missing frames.\n        ReactDOM.flushSync(() => {\n          setStatus('open');\n        });\n      });\n      return () => {\n        cancelAnimationFrame(frame);\n      };\n    }\n    setStatus('close');\n  }, [open, floating]);\n  return {\n    isMounted,\n    status\n  };\n}\n/**\n * Provides styles to apply CSS transitions to a floating element, correctly\n * handling placement-aware transitions. Wrapper around `useTransitionStatus`.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstyles\n */\nfunction useTransitionStyles(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    initial: unstable_initial = {\n      opacity: 0\n    },\n    open: unstable_open,\n    close: unstable_close,\n    common: unstable_common,\n    duration = 250\n  } = props;\n  const placement = context.placement;\n  const side = placement.split('-')[0];\n  const fnArgs = React.useMemo(() => ({\n    side,\n    placement\n  }), [side, placement]);\n  const isNumberDuration = typeof duration === 'number';\n  const openDuration = (isNumberDuration ? duration : duration.open) || 0;\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [styles, setStyles] = React.useState(() => ({\n    ...execWithArgsOrReturn(unstable_common, fnArgs),\n    ...execWithArgsOrReturn(unstable_initial, fnArgs)\n  }));\n  const {\n    isMounted,\n    status\n  } = useTransitionStatus(context, {\n    duration\n  });\n  const initialRef = useLatestRef(unstable_initial);\n  const openRef = useLatestRef(unstable_open);\n  const closeRef = useLatestRef(unstable_close);\n  const commonRef = useLatestRef(unstable_common);\n  useModernLayoutEffect(() => {\n    const initialStyles = execWithArgsOrReturn(initialRef.current, fnArgs);\n    const closeStyles = execWithArgsOrReturn(closeRef.current, fnArgs);\n    const commonStyles = execWithArgsOrReturn(commonRef.current, fnArgs);\n    const openStyles = execWithArgsOrReturn(openRef.current, fnArgs) || Object.keys(initialStyles).reduce((acc, key) => {\n      acc[key] = '';\n      return acc;\n    }, {});\n    if (status === 'initial') {\n      setStyles(styles => ({\n        transitionProperty: styles.transitionProperty,\n        ...commonStyles,\n        ...initialStyles\n      }));\n    }\n    if (status === 'open') {\n      setStyles({\n        transitionProperty: Object.keys(openStyles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: openDuration + \"ms\",\n        ...commonStyles,\n        ...openStyles\n      });\n    }\n    if (status === 'close') {\n      const styles = closeStyles || initialStyles;\n      setStyles({\n        transitionProperty: Object.keys(styles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: closeDuration + \"ms\",\n        ...commonStyles,\n        ...styles\n      });\n    }\n  }, [closeDuration, closeRef, initialRef, openRef, commonRef, openDuration, status, fnArgs]);\n  return {\n    isMounted,\n    styles\n  };\n}\n\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nfunction useTypeahead(context, props) {\n  var _ref;\n  const {\n    open,\n    dataRef\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onMatch: unstable_onMatch,\n    onTypingChange: unstable_onTypingChange,\n    enabled = true,\n    findMatch = null,\n    resetMs = 750,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = props;\n  const timeoutIdRef = React.useRef(-1);\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef((_ref = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref : -1);\n  const matchIndexRef = React.useRef(null);\n  const onMatch = useEffectEvent(unstable_onMatch);\n  const onTypingChange = useEffectEvent(unstable_onTypingChange);\n  const findMatchRef = useLatestRef(findMatch);\n  const ignoreKeysRef = useLatestRef(ignoreKeys);\n  useModernLayoutEffect(() => {\n    if (open) {\n      clearTimeoutIfSet(timeoutIdRef);\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open]);\n  useModernLayoutEffect(() => {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      var _ref2;\n      prevIndexRef.current = (_ref2 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref2 : -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  const setTypingChange = useEffectEvent(value => {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else {\n      if (dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    }\n  });\n  const onKeyDown = useEffectEvent(event => {\n    function getMatchingIndex(list, orderedList, string) {\n      const str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(text => (text == null ? void 0 : text.toLocaleLowerCase().indexOf(string.toLocaleLowerCase())) === 0);\n      return str ? list.indexOf(str) : -1;\n    }\n    const listContent = listRef.current;\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) ||\n    // Character key.\n    event.key.length !== 1 ||\n    // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    }\n\n    // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => {\n      var _text$, _text$2;\n      return text ? ((_text$ = text[0]) == null ? void 0 : _text$.toLocaleLowerCase()) !== ((_text$2 = text[1]) == null ? void 0 : _text$2.toLocaleLowerCase()) : true;\n    });\n\n    // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n    stringRef.current += event.key;\n    clearTimeoutIfSet(timeoutIdRef);\n    timeoutIdRef.current = window.setTimeout(() => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    }, resetMs);\n    const prevIndex = prevIndexRef.current;\n    const index = getMatchingIndex(listContent, [...listContent.slice((prevIndex || 0) + 1), ...listContent.slice(0, (prevIndex || 0) + 1)], stringRef.current);\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  const reference = React.useMemo(() => ({\n    onKeyDown\n  }), [onKeyDown]);\n  const floating = React.useMemo(() => {\n    return {\n      onKeyDown,\n      onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction getArgsWithCustomFloatingHeight(state, height) {\n  return {\n    ...state,\n    rects: {\n      ...state.rects,\n      floating: {\n        ...state.rects.floating,\n        height\n      }\n    }\n  };\n}\n/**\n * Positions the floating element such that an inner element inside of it is\n * anchored to the reference element.\n * @see https://floating-ui.com/docs/inner\n * @deprecated\n */\nconst inner = props => ({\n  name: 'inner',\n  options: props,\n  async fn(state) {\n    const {\n      listRef,\n      overflowRef,\n      onFallbackChange,\n      offset: innerOffset = 0,\n      index = 0,\n      minItemsVisible = 4,\n      referenceOverflowThreshold = 0,\n      scrollRef,\n      ...detectOverflowOptions\n    } = evaluate(props, state);\n    const {\n      rects,\n      elements: {\n        floating\n      }\n    } = state;\n    const item = listRef.current[index];\n    const scrollEl = (scrollRef == null ? void 0 : scrollRef.current) || floating;\n\n    // Valid combinations:\n    // 1. Floating element is the scrollRef and has a border (default)\n    // 2. Floating element is not the scrollRef, floating element has a border\n    // 3. Floating element is not the scrollRef, scrollRef has a border\n    // Floating > {...getFloatingProps()} wrapper > scrollRef > items is not\n    // allowed as VoiceOver doesn't work.\n    const clientTop = floating.clientTop || scrollEl.clientTop;\n    const floatingIsBordered = floating.clientTop !== 0;\n    const scrollElIsBordered = scrollEl.clientTop !== 0;\n    const floatingIsScrollEl = floating === scrollEl;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!state.placement.startsWith('bottom')) {\n        warn('`placement` side must be \"bottom\" when using the `inner`', 'middleware.');\n      }\n    }\n    if (!item) {\n      return {};\n    }\n    const nextArgs = {\n      ...state,\n      ...(await offset(-item.offsetTop - floating.clientTop - rects.reference.height / 2 - item.offsetHeight / 2 - innerOffset).fn(state))\n    };\n    const overflow = await detectOverflow(getArgsWithCustomFloatingHeight(nextArgs, scrollEl.scrollHeight + clientTop + floating.clientTop), detectOverflowOptions);\n    const refOverflow = await detectOverflow(nextArgs, {\n      ...detectOverflowOptions,\n      elementContext: 'reference'\n    });\n    const diffY = max(0, overflow.top);\n    const nextY = nextArgs.y + diffY;\n    const isScrollable = scrollEl.scrollHeight > scrollEl.clientHeight;\n    const rounder = isScrollable ? v => v : round;\n    const maxHeight = rounder(max(0, scrollEl.scrollHeight + (floatingIsBordered && floatingIsScrollEl || scrollElIsBordered ? clientTop * 2 : 0) - diffY - max(0, overflow.bottom)));\n    scrollEl.style.maxHeight = maxHeight + \"px\";\n    scrollEl.scrollTop = diffY;\n\n    // There is not enough space, fallback to standard anchored positioning\n    if (onFallbackChange) {\n      const shouldFallback = scrollEl.offsetHeight < item.offsetHeight * min(minItemsVisible, listRef.current.length) - 1 || refOverflow.top >= -referenceOverflowThreshold || refOverflow.bottom >= -referenceOverflowThreshold;\n      ReactDOM.flushSync(() => onFallbackChange(shouldFallback));\n    }\n    if (overflowRef) {\n      overflowRef.current = await detectOverflow(getArgsWithCustomFloatingHeight({\n        ...nextArgs,\n        y: nextY\n      }, scrollEl.offsetHeight + clientTop + floating.clientTop), detectOverflowOptions);\n    }\n    return {\n      y: nextY\n    };\n  }\n});\n/**\n * Changes the `inner` middleware's `offset` upon a `wheel` event to\n * expand the floating element's height, revealing more list items.\n * @see https://floating-ui.com/docs/inner\n * @deprecated\n */\nfunction useInnerOffset(context, props) {\n  const {\n    open,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    overflowRef,\n    scrollRef,\n    onChange: unstable_onChange\n  } = props;\n  const onChange = useEffectEvent(unstable_onChange);\n  const controlledScrollingRef = React.useRef(false);\n  const prevScrollTopRef = React.useRef(null);\n  const initialOverflowRef = React.useRef(null);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onWheel(e) {\n      if (e.ctrlKey || !el || overflowRef.current == null) {\n        return;\n      }\n      const dY = e.deltaY;\n      const isAtTop = overflowRef.current.top >= -0.5;\n      const isAtBottom = overflowRef.current.bottom >= -0.5;\n      const remainingScroll = el.scrollHeight - el.clientHeight;\n      const sign = dY < 0 ? -1 : 1;\n      const method = dY < 0 ? 'max' : 'min';\n      if (el.scrollHeight <= el.clientHeight) {\n        return;\n      }\n      if (!isAtTop && dY > 0 || !isAtBottom && dY < 0) {\n        e.preventDefault();\n        ReactDOM.flushSync(() => {\n          onChange(d => d + Math[method](dY, remainingScroll * sign));\n        });\n      } else if (/firefox/i.test(getUserAgent())) {\n        // Needed to propagate scrolling during momentum scrolling phase once\n        // it gets limited by the boundary. UX improvement, not critical.\n        el.scrollTop += dY;\n      }\n    }\n    const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n    if (open && el) {\n      el.addEventListener('wheel', onWheel);\n\n      // Wait for the position to be ready.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n        if (overflowRef.current != null) {\n          initialOverflowRef.current = {\n            ...overflowRef.current\n          };\n        }\n      });\n      return () => {\n        prevScrollTopRef.current = null;\n        initialOverflowRef.current = null;\n        el.removeEventListener('wheel', onWheel);\n      };\n    }\n  }, [enabled, open, elements.floating, overflowRef, scrollRef, onChange]);\n  const floating = React.useMemo(() => ({\n    onKeyDown() {\n      controlledScrollingRef.current = true;\n    },\n    onWheel() {\n      controlledScrollingRef.current = false;\n    },\n    onPointerMove() {\n      controlledScrollingRef.current = false;\n    },\n    onScroll() {\n      const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n      if (!overflowRef.current || !el || !controlledScrollingRef.current) {\n        return;\n      }\n      if (prevScrollTopRef.current !== null) {\n        const scrollDiff = el.scrollTop - prevScrollTopRef.current;\n        if (overflowRef.current.bottom < -0.5 && scrollDiff < -1 || overflowRef.current.top < -0.5 && scrollDiff > 1) {\n          ReactDOM.flushSync(() => onChange(d => d + scrollDiff));\n        }\n      }\n\n      // [Firefox] Wait for the height change to have been applied.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n      });\n    }\n  }), [elements.floating, onChange, overflowRef, scrollRef]);\n  return React.useMemo(() => enabled ? {\n    floating\n  } : {}, [enabled, floating]);\n}\n\nfunction getNodeChildren(nodes, id, onlyOpenChildren) {\n  if (onlyOpenChildren === void 0) {\n    onlyOpenChildren = true;\n  }\n  let allChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && ((_node$context = node.context) == null ? void 0 : _node$context.open);\n  });\n  let currentChildren = allChildren;\n  while (currentChildren.length) {\n    currentChildren = onlyOpenChildren ? nodes.filter(node => {\n      var _currentChildren;\n      return (_currentChildren = currentChildren) == null ? void 0 : _currentChildren.some(n => {\n        var _node$context2;\n        return node.parentId === n.id && ((_node$context2 = node.context) == null ? void 0 : _node$context2.open);\n      });\n    }) : nodes;\n    allChildren = allChildren.concat(currentChildren);\n  }\n  return allChildren;\n}\n\nfunction isPointInPolygon(point, polygon) {\n  const [x, y] = point;\n  let isInside = false;\n  const length = polygon.length;\n  for (let i = 0, j = length - 1; i < length; j = i++) {\n    const [xi, yi] = polygon[i] || [0, 0];\n    const [xj, yj] = polygon[j] || [0, 0];\n    const intersect = yi >= y !== yj >= y && x <= (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) {\n      isInside = !isInside;\n    }\n  }\n  return isInside;\n}\nfunction isInside(point, rect) {\n  return point[0] >= rect.x && point[0] <= rect.x + rect.width && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n}\n/**\n * Generates a safe polygon area that the user can traverse without closing the\n * floating element once leaving the reference element.\n * @see https://floating-ui.com/docs/useHover#safepolygon\n */\nfunction safePolygon(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    buffer = 0.5,\n    blockPointerEvents = false,\n    requireIntent = true\n  } = options;\n  let timeoutId;\n  let hasLanded = false;\n  let lastX = null;\n  let lastY = null;\n  let lastCursorTime = performance.now();\n  function getCursorSpeed(x, y) {\n    const currentTime = performance.now();\n    const elapsedTime = currentTime - lastCursorTime;\n    if (lastX === null || lastY === null || elapsedTime === 0) {\n      lastX = x;\n      lastY = y;\n      lastCursorTime = currentTime;\n      return null;\n    }\n    const deltaX = x - lastX;\n    const deltaY = y - lastY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    const speed = distance / elapsedTime; // px / ms\n\n    lastX = x;\n    lastY = y;\n    lastCursorTime = currentTime;\n    return speed;\n  }\n  const fn = _ref => {\n    let {\n      x,\n      y,\n      placement,\n      elements,\n      onClose,\n      nodeId,\n      tree\n    } = _ref;\n    return function onMouseMove(event) {\n      function close() {\n        clearTimeout(timeoutId);\n        onClose();\n      }\n      clearTimeout(timeoutId);\n      if (!elements.domReference || !elements.floating || placement == null || x == null || y == null) {\n        return;\n      }\n      const {\n        clientX,\n        clientY\n      } = event;\n      const clientPoint = [clientX, clientY];\n      const target = getTarget(event);\n      const isLeave = event.type === 'mouseleave';\n      const isOverFloatingEl = contains(elements.floating, target);\n      const isOverReferenceEl = contains(elements.domReference, target);\n      const refRect = elements.domReference.getBoundingClientRect();\n      const rect = elements.floating.getBoundingClientRect();\n      const side = placement.split('-')[0];\n      const cursorLeaveFromRight = x > rect.right - rect.width / 2;\n      const cursorLeaveFromBottom = y > rect.bottom - rect.height / 2;\n      const isOverReferenceRect = isInside(clientPoint, refRect);\n      const isFloatingWider = rect.width > refRect.width;\n      const isFloatingTaller = rect.height > refRect.height;\n      const left = (isFloatingWider ? refRect : rect).left;\n      const right = (isFloatingWider ? refRect : rect).right;\n      const top = (isFloatingTaller ? refRect : rect).top;\n      const bottom = (isFloatingTaller ? refRect : rect).bottom;\n      if (isOverFloatingEl) {\n        hasLanded = true;\n        if (!isLeave) {\n          return;\n        }\n      }\n      if (isOverReferenceEl) {\n        hasLanded = false;\n      }\n      if (isOverReferenceEl && !isLeave) {\n        hasLanded = true;\n        return;\n      }\n\n      // Prevent overlapping floating element from being stuck in an open-close\n      // loop: https://github.com/floating-ui/floating-ui/issues/1910\n      if (isLeave && isElement(event.relatedTarget) && contains(elements.floating, event.relatedTarget)) {\n        return;\n      }\n\n      // If any nested child is open, abort.\n      if (tree && getNodeChildren(tree.nodesRef.current, nodeId).some(_ref2 => {\n        let {\n          context\n        } = _ref2;\n        return context == null ? void 0 : context.open;\n      })) {\n        return;\n      }\n\n      // If the pointer is leaving from the opposite side, the \"buffer\" logic\n      // creates a point where the floating element remains open, but should be\n      // ignored.\n      // A constant of 1 handles floating point rounding errors.\n      if (side === 'top' && y >= refRect.bottom - 1 || side === 'bottom' && y <= refRect.top + 1 || side === 'left' && x >= refRect.right - 1 || side === 'right' && x <= refRect.left + 1) {\n        return close();\n      }\n\n      // Ignore when the cursor is within the rectangular trough between the\n      // two elements. Since the triangle is created from the cursor point,\n      // which can start beyond the ref element's edge, traversing back and\n      // forth from the ref to the floating element can cause it to close. This\n      // ensures it always remains open in that case.\n      let rectPoly = [];\n      switch (side) {\n        case 'top':\n          rectPoly = [[left, refRect.top + 1], [left, rect.bottom - 1], [right, rect.bottom - 1], [right, refRect.top + 1]];\n          break;\n        case 'bottom':\n          rectPoly = [[left, rect.top + 1], [left, refRect.bottom - 1], [right, refRect.bottom - 1], [right, rect.top + 1]];\n          break;\n        case 'left':\n          rectPoly = [[rect.right - 1, bottom], [rect.right - 1, top], [refRect.left + 1, top], [refRect.left + 1, bottom]];\n          break;\n        case 'right':\n          rectPoly = [[refRect.right - 1, bottom], [refRect.right - 1, top], [rect.left + 1, top], [rect.left + 1, bottom]];\n          break;\n      }\n      function getPolygon(_ref3) {\n        let [x, y] = _ref3;\n        switch (side) {\n          case 'top':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.bottom - buffer : isFloatingWider ? rect.bottom - buffer : rect.top], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.bottom - buffer : rect.top : rect.bottom - buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'bottom':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.top + buffer : isFloatingWider ? rect.top + buffer : rect.bottom], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.top + buffer : rect.bottom : rect.top + buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'left':\n            {\n              const cursorPointOne = [x + buffer + 1, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x + buffer + 1, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.right - buffer : isFloatingTaller ? rect.right - buffer : rect.left, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.right - buffer : rect.left : rect.right - buffer, rect.bottom]];\n              return [...commonPoints, cursorPointOne, cursorPointTwo];\n            }\n          case 'right':\n            {\n              const cursorPointOne = [x - buffer, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x - buffer, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.left + buffer : isFloatingTaller ? rect.left + buffer : rect.right, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.left + buffer : rect.right : rect.left + buffer, rect.bottom]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n        }\n      }\n      if (isPointInPolygon([clientX, clientY], rectPoly)) {\n        return;\n      }\n      if (hasLanded && !isOverReferenceRect) {\n        return close();\n      }\n      if (!isLeave && requireIntent) {\n        const cursorSpeed = getCursorSpeed(event.clientX, event.clientY);\n        const cursorSpeedThreshold = 0.1;\n        if (cursorSpeed !== null && cursorSpeed < cursorSpeedThreshold) {\n          return close();\n        }\n      }\n      if (!isPointInPolygon([clientX, clientY], getPolygon([x, y]))) {\n        close();\n      } else if (!hasLanded && requireIntent) {\n        timeoutId = window.setTimeout(close, 40);\n      }\n    };\n  };\n  fn.__options = {\n    blockPointerEvents\n  };\n  return fn;\n}\n\nexport { Composite, CompositeItem, FloatingArrow, FloatingDelayGroup, FloatingFocusManager, FloatingList, FloatingNode, FloatingOverlay, FloatingPortal, FloatingTree, NextFloatingDelayGroup, inner, safePolygon, useClick, useClientPoint, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingRootContext, useFloatingTree, useFocus, useHover, useId, useInnerOffset, useInteractions, useListItem, useListNavigation, useMergeRefs, useNextDelayGroup, useRole, useTransitionStatus, useTransitionStyles, useTypeahead };\n","import { ComponentPropsWithoutRef, useEffect, useState } from 'react';\nimport {\n  AudioTrackType,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type AudioProps = ComponentPropsWithoutRef<'audio'> & {\n  /**\n   * The participant whose audio stream we want to play.\n   */\n  participant: StreamVideoParticipant;\n\n  /**\n   * The type of audio stream to play for the given participant.\n   * The default value is `audioTrack`.\n   */\n  trackType?: AudioTrackType;\n};\n\nexport const Audio = ({\n  participant,\n  trackType = 'audioTrack',\n  ...rest\n}: AudioProps) => {\n  const call = useCall();\n  const [audioElement, setAudioElement] = useState<HTMLAudioElement | null>(\n    null,\n  );\n  const { userId, sessionId } = participant;\n\n  useEffect(() => {\n    if (!call || !audioElement) return;\n    const cleanup = call.bindAudioElement(audioElement, sessionId, trackType);\n    return () => {\n      cleanup?.();\n    };\n  }, [call, sessionId, audioElement, trackType]);\n\n  return (\n    <audio\n      autoPlay\n      {...rest}\n      ref={setAudioElement}\n      data-user-id={userId}\n      data-session-id={sessionId}\n      data-track-type={trackType}\n    />\n  );\n};\n\nAudio.displayName = 'Audio';\n","import { ComponentProps, Fragment } from 'react';\nimport {\n  hasAudio,\n  hasScreenShareAudio,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { Audio } from './Audio';\n\nexport type ParticipantsAudioProps = {\n  /**\n   * The participants to play audio for.\n   */\n  participants: StreamVideoParticipant[];\n\n  /**\n   * Props to pass to the underlying `Audio` components.\n   */\n  audioProps?: ComponentProps<typeof Audio>;\n};\n\nexport const ParticipantsAudio = (props: ParticipantsAudioProps) => {\n  const { participants, audioProps } = props;\n  return (\n    <>\n      {participants.map((participant) => {\n        if (participant.isLocalParticipant) return null;\n        const { audioStream, screenShareAudioStream, sessionId } = participant;\n\n        const hasAudioTrack = hasAudio(participant);\n        const audioTrackElement = hasAudioTrack && audioStream && (\n          <Audio\n            {...audioProps}\n            trackType=\"audioTrack\"\n            participant={participant}\n          />\n        );\n\n        const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n        const screenShareAudioTrackElement = hasScreenShareAudioTrack &&\n          screenShareAudioStream && (\n            <Audio\n              {...audioProps}\n              trackType=\"screenShareAudioTrack\"\n              participant={participant}\n            />\n          );\n\n        return (\n          <Fragment key={sessionId}>\n            {audioTrackElement}\n            {screenShareAudioTrackElement}\n          </Fragment>\n        );\n      })}\n    </>\n  );\n};\n\nParticipantsAudio.displayName = 'ParticipantsAudio';\n","import { createContext, useContext } from 'react';\nimport { ParticipantViewProps } from './ParticipantView';\n\nexport type ParticipantViewContextValue = Required<\n  Pick<ParticipantViewProps, 'participant' | 'trackType'>\n> & {\n  participantViewElement?: HTMLDivElement | null;\n  videoElement?: HTMLVideoElement | null;\n  videoPlaceholderElement?: HTMLDivElement | null;\n};\n\nexport const ParticipantViewContext = createContext<\n  ParticipantViewContextValue | undefined\n>(undefined);\n\nexport const useParticipantViewContext = () =>\n  useContext(ParticipantViewContext) as ParticipantViewContextValue;\n","import { useEffect } from 'react';\nimport type { UseFloatingOptions } from '@floating-ui/react';\nimport {\n  autoUpdate,\n  flip,\n  offset,\n  shift,\n  size,\n  useFloating,\n} from '@floating-ui/react';\n\nexport const useFloatingUIPreset = ({\n  middleware = [],\n  placement,\n  strategy,\n  offset: offsetInPx = 10,\n}: Pick<UseFloatingOptions, 'placement' | 'strategy' | 'middleware'> & {\n  offset?: number;\n}) => {\n  const {\n    refs,\n    x,\n    y,\n    update,\n    elements: { domReference, floating },\n    context,\n  } = useFloating({\n    placement,\n    strategy,\n    middleware: [\n      offset(offsetInPx),\n      shift(),\n      flip(),\n      size({\n        padding: 10,\n        apply: ({ availableHeight, elements }) => {\n          Object.assign(elements.floating.style, {\n            maxHeight: `${availableHeight}px`,\n          });\n        },\n      }),\n      ...middleware,\n    ],\n  });\n\n  // handle window resizing\n  useEffect(() => {\n    if (!domReference || !floating) return;\n\n    const cleanup = autoUpdate(domReference, floating, update);\n\n    return () => cleanup();\n  }, [domReference, floating, update]);\n\n  return { refs, x, y, domReference, floating, strategy, context };\n};\n","import { useI18n } from '@stream-io/video-react-bindings';\nimport { useMemo } from 'react';\n\nexport interface DeviceListItem {\n  deviceId: string;\n  label: string;\n  isSelected: boolean;\n}\n\n/**\n * Utility hook that helps render a list of devices or implement a device selector.\n * Compared to someting like `useCameraState().devices`, it has some handy features:\n * 1. Adds the \"Default\" device to the list if applicable (either the user did not\n * select a device, or a previously selected device is no longer available).\n * 2. Maps the device list to a format more suitable for rendering.\n */\nexport function useDeviceList(\n  devices: MediaDeviceInfo[],\n  selectedDeviceId: string | undefined,\n): {\n  deviceList: DeviceListItem[];\n  selectedDeviceInfo: DeviceListItem;\n  selectedIndex: number;\n} {\n  const { t } = useI18n();\n\n  return useMemo(() => {\n    let selectedDeviceInfo: DeviceListItem | null = null;\n    let selectedIndex: number | null = null;\n\n    const deviceList: DeviceListItem[] = devices.map((d, i) => {\n      const isSelected = d.deviceId === selectedDeviceId;\n      const device = { deviceId: d.deviceId, label: d.label, isSelected };\n\n      if (isSelected) {\n        selectedDeviceInfo = device;\n        selectedIndex = i;\n      }\n\n      return device;\n    });\n\n    if (selectedDeviceInfo === null || selectedIndex === null) {\n      const defaultDevice = {\n        deviceId: 'default',\n        label: t('Default'),\n        isSelected: true,\n      };\n\n      selectedDeviceInfo = defaultDevice;\n      selectedIndex = 0;\n      deviceList.unshift(defaultDevice);\n    }\n\n    return { deviceList, selectedDeviceInfo, selectedIndex };\n  }, [devices, selectedDeviceId, t]);\n}\n","import {\n  ComponentType,\n  createContext,\n  PropsWithChildren,\n  RefAttributes,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  FloatingOverlay,\n  FloatingPortal,\n  Placement,\n  Strategy,\n  UseFloatingReturn,\n} from '@floating-ui/react';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nexport type ToggleMenuButtonProps<E extends HTMLElement = HTMLButtonElement> = {\n  menuShown: boolean;\n} & RefAttributes<E>;\n\nexport enum MenuVisualType {\n  PORTAL = 'portal',\n  MENU = 'menu',\n}\n\nexport type MenuToggleProps<E extends HTMLElement> = PropsWithChildren<{\n  ToggleButton: ComponentType<ToggleMenuButtonProps<E>>;\n  placement?: Placement;\n  strategy?: Strategy;\n  offset?: number;\n  visualType?: MenuVisualType;\n  onToggle?: (menuShown: boolean) => void;\n}>;\n\nexport type MenuContextValue = {\n  close?: () => void;\n};\n\n/**\n * Used to provide utility APIs to the components rendered inside the portal.\n */\nconst MenuContext = createContext<MenuContextValue>({});\n\n/**\n * Access to the closes MenuContext.\n */\nexport const useMenuContext = (): MenuContextValue => {\n  return useContext(MenuContext);\n};\n\nconst MenuPortal = ({\n  children,\n  refs,\n}: PropsWithChildren<{\n  refs: UseFloatingReturn['refs'];\n}>) => {\n  const portalId = useMemo(\n    () => `str-video-portal-${Math.random().toString(36).substring(2, 9)}`,\n    [],\n  );\n\n  return (\n    <>\n      <div id={portalId} className=\"str-video__portal\" />\n      <FloatingOverlay>\n        <FloatingPortal id={portalId}>\n          <div className=\"str-video__portal-content\" ref={refs.setFloating}>\n            {children}\n          </div>\n        </FloatingPortal>\n      </FloatingOverlay>\n    </>\n  );\n};\n\nexport const MenuToggle = <E extends HTMLElement>({\n  ToggleButton,\n  placement = 'top-start',\n  strategy = 'absolute',\n  offset,\n  visualType = MenuVisualType.MENU,\n  children,\n  onToggle,\n}: MenuToggleProps<E>) => {\n  const [menuShown, setMenuShown] = useState(false);\n  const toggleHandler = useRef(onToggle);\n  toggleHandler.current = onToggle;\n\n  const { floating, domReference, refs, x, y } = useFloatingUIPreset({\n    placement,\n    strategy,\n    offset,\n  });\n\n  useEffect(() => {\n    const parentDocument = domReference?.ownerDocument;\n\n    const handleClick = (event: MouseEvent) => {\n      if (!floating && domReference?.contains(event.target as Node)) {\n        setMenuShown(true);\n        toggleHandler.current?.(true);\n      } else if (floating && !floating?.contains(event.target as Node)) {\n        setMenuShown(false);\n        toggleHandler.current?.(false);\n      }\n    };\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key && // key can be undefined in some browsers\n        event.key.toLowerCase() === 'escape' &&\n        !event.altKey &&\n        !event.ctrlKey\n      ) {\n        setMenuShown(false);\n        toggleHandler.current?.(false);\n      }\n    };\n    parentDocument?.addEventListener('click', handleClick, { capture: true });\n    parentDocument?.addEventListener('keydown', handleKeyDown);\n    return () => {\n      parentDocument?.removeEventListener('click', handleClick, {\n        capture: true,\n      });\n      parentDocument?.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [floating, domReference]);\n\n  return (\n    <>\n      {menuShown && (\n        <MenuContext.Provider value={{ close: () => setMenuShown(false) }}>\n          {visualType === MenuVisualType.PORTAL ? (\n            <MenuPortal refs={refs} children={children} />\n          ) : visualType === MenuVisualType.MENU ? (\n            <div\n              className=\"str-video__menu-container\"\n              ref={refs.setFloating}\n              style={{\n                position: strategy,\n                top: y ?? 0,\n                left: x ?? 0,\n                overflowY: 'auto',\n              }}\n              role=\"menu\"\n              children={children}\n            />\n          ) : null}\n        </MenuContext.Provider>\n      )}\n      <ToggleButton menuShown={menuShown} ref={refs.setReference} />\n    </>\n  );\n};\n","import { ComponentProps, MouseEvent, PropsWithChildren, useRef } from 'react';\n\nexport const GenericMenu = ({\n  children,\n  onItemClick,\n}: PropsWithChildren<{\n  onItemClick?: (e: MouseEvent) => void;\n}>) => {\n  const ref = useRef<HTMLUListElement>(null);\n  return (\n    <ul\n      className=\"str-video__generic-menu\"\n      ref={ref}\n      onClick={(e) => {\n        if (\n          onItemClick &&\n          e.target !== ref.current &&\n          ref.current?.contains(e.target as Node)\n        ) {\n          onItemClick(e);\n        }\n      }}\n    >\n      {children}\n    </ul>\n  );\n};\n\nexport const GenericMenuButtonItem = ({\n  children,\n  ...rest\n}: Omit<ComponentProps<'button'>, 'ref'>) => {\n  return (\n    <li className=\"str-video__generic-menu--item\">\n      <button {...rest}>{children}</button>\n    </li>\n  );\n};\n","import clsx from 'clsx';\n\nexport type IconProps = {\n  icon: string;\n  className?: string;\n};\n\nexport const Icon = ({ className, icon }: IconProps) => (\n  <span\n    className={clsx(\n      'str-video__icon',\n      icon && `str-video__icon--${icon}`,\n      className,\n    )}\n  />\n);\n","import { useEffect, useState } from 'react';\n\nexport function usePictureInPictureState(videoElement?: HTMLVideoElement) {\n  const [isPiP, setIsPiP] = useState(\n    document.pictureInPictureElement === videoElement,\n  );\n\n  if (!videoElement && isPiP) setIsPiP(false);\n\n  useEffect(() => {\n    if (!videoElement) return;\n\n    const handlePiP = () => {\n      setIsPiP(document.pictureInPictureElement === videoElement);\n    };\n\n    videoElement.addEventListener('enterpictureinpicture', handlePiP);\n    videoElement.addEventListener('leavepictureinpicture', handlePiP);\n\n    return () => {\n      videoElement.removeEventListener('enterpictureinpicture', handlePiP);\n      videoElement.removeEventListener('leavepictureinpicture', handlePiP);\n    };\n  }, [videoElement]);\n\n  return isPiP;\n}\n","import { useEffect, useState } from 'react';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasScreenShareAudio,\n  hasVideo,\n  OwnCapability,\n} from '@stream-io/video-client';\nimport { useParticipantViewContext } from './ParticipantViewContext';\nimport {\n  GenericMenu,\n  GenericMenuButtonItem,\n  useMenuContext,\n} from '../../../components/Menu';\nimport { Icon } from '../../../components/Icon';\nimport { usePictureInPictureState } from '../../hooks/usePictureInPictureState';\n\nexport const ParticipantActionsContextMenu = () => {\n  const { participant, participantViewElement, videoElement } =\n    useParticipantViewContext();\n  const [fullscreenModeOn, setFullscreenModeOn] = useState(\n    !!document.fullscreenElement,\n  );\n  const call = useCall();\n  const isPiP = usePictureInPictureState(videoElement ?? undefined);\n  const { t } = useI18n();\n\n  const { pin, sessionId, userId } = participant;\n\n  const hasAudioTrack = hasAudio(participant);\n  const hasVideoTrack = hasVideo(participant);\n  const hasScreenShareTrack = hasScreenShare(participant);\n  const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n\n  const blockUser = () => call?.blockUser(userId);\n  const muteAudio = () => call?.muteUser(userId, 'audio');\n  const muteVideo = () => call?.muteUser(userId, 'video');\n  const muteScreenShare = () => call?.muteUser(userId, 'screenshare');\n  const muteScreenShareAudio = () =>\n    call?.muteUser(userId, 'screenshare_audio');\n\n  const grantPermission = (permission: string) => () => {\n    call?.updateUserPermissions({\n      user_id: userId,\n      grant_permissions: [permission],\n    });\n  };\n\n  const revokePermission = (permission: string) => () => {\n    call?.updateUserPermissions({\n      user_id: userId,\n      revoke_permissions: [permission],\n    });\n  };\n\n  const toggleParticipantPin = () => {\n    if (pin) {\n      call?.unpin(sessionId);\n    } else {\n      call?.pin(sessionId);\n    }\n  };\n\n  const pinForEveryone = () => {\n    call\n      ?.pinForEveryone({\n        user_id: userId,\n        session_id: sessionId,\n      })\n      .catch((err) => {\n        console.error(`Failed to pin participant ${userId}`, err);\n      });\n  };\n\n  const unpinForEveryone = () => {\n    call\n      ?.unpinForEveryone({\n        user_id: userId,\n        session_id: sessionId,\n      })\n      .catch((err) => {\n        console.error(`Failed to unpin participant ${userId}`, err);\n      });\n  };\n\n  const toggleFullscreenMode = () => {\n    if (!fullscreenModeOn) {\n      return participantViewElement?.requestFullscreen().catch(console.error);\n    }\n    return document.exitFullscreen().catch(console.error);\n  };\n\n  useEffect(() => {\n    // handles the case when fullscreen mode is toggled externally,\n    // e.g., by pressing ESC key or some other keyboard shortcut\n    const handleFullscreenChange = () => {\n      setFullscreenModeOn(!!document.fullscreenElement);\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, []);\n\n  const togglePictureInPicture = () => {\n    if (videoElement && !isPiP) {\n      return videoElement\n        .requestPictureInPicture()\n        .catch(console.error) as Promise<void>;\n    }\n\n    return document.exitPictureInPicture().catch(console.error);\n  };\n\n  const { close } = useMenuContext() || {};\n  return (\n    <GenericMenu onItemClick={close}>\n      <GenericMenuButtonItem\n        onClick={toggleParticipantPin}\n        disabled={pin && !pin.isLocalPin}\n      >\n        <Icon icon=\"pin\" />\n        {pin ? t('Unpin') : t('Pin')}\n      </GenericMenuButtonItem>\n      <Restricted requiredGrants={[OwnCapability.PIN_FOR_EVERYONE]}>\n        <GenericMenuButtonItem\n          onClick={pinForEveryone}\n          disabled={pin && !pin.isLocalPin}\n        >\n          <Icon icon=\"pin\" />\n          {t('Pin for everyone')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={unpinForEveryone}\n          disabled={!pin || pin.isLocalPin}\n        >\n          <Icon icon=\"pin\" />\n          {t('Unpin for everyone')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.BLOCK_USERS]}>\n        <GenericMenuButtonItem onClick={blockUser}>\n          <Icon icon=\"not-allowed\" />\n          {t('Block')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.MUTE_USERS]}>\n        {hasVideoTrack && (\n          <GenericMenuButtonItem onClick={muteVideo}>\n            <Icon icon=\"camera-off-outline\" />\n            {t('Turn off video')}\n          </GenericMenuButtonItem>\n        )}\n        {hasScreenShareTrack && (\n          <GenericMenuButtonItem onClick={muteScreenShare}>\n            <Icon icon=\"screen-share-off\" />\n            {t('Turn off screen share')}\n          </GenericMenuButtonItem>\n        )}\n        {hasAudioTrack && (\n          <GenericMenuButtonItem onClick={muteAudio}>\n            <Icon icon=\"no-audio\" />\n            {t('Mute audio')}\n          </GenericMenuButtonItem>\n        )}\n        {hasScreenShareAudioTrack && (\n          <GenericMenuButtonItem onClick={muteScreenShareAudio}>\n            <Icon icon=\"no-audio\" />\n            {t('Mute screen share audio')}\n          </GenericMenuButtonItem>\n        )}\n      </Restricted>\n      {participantViewElement &&\n        typeof participantViewElement.requestFullscreen !== 'undefined' && (\n          <GenericMenuButtonItem onClick={toggleFullscreenMode}>\n            {t('{{ direction }} fullscreen', {\n              direction: fullscreenModeOn ? t('Leave') : t('Enter'),\n            })}\n          </GenericMenuButtonItem>\n        )}\n      {videoElement && document.pictureInPictureEnabled && (\n        <GenericMenuButtonItem onClick={togglePictureInPicture}>\n          {t('{{ direction }} picture-in-picture', {\n            direction: isPiP ? t('Leave') : t('Enter'),\n          })}\n        </GenericMenuButtonItem>\n      )}\n      <Restricted requiredGrants={[OwnCapability.UPDATE_CALL_PERMISSIONS]}>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SEND_AUDIO)}\n        >\n          {t('Allow audio')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SEND_VIDEO)}\n        >\n          {t('Allow video')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SCREENSHARE)}\n        >\n          {t('Allow screen sharing')}\n        </GenericMenuButtonItem>\n\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SEND_AUDIO)}\n        >\n          {t('Disable audio')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SEND_VIDEO)}\n        >\n          {t('Disable video')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SCREENSHARE)}\n        >\n          {t('Disable screen sharing')}\n        </GenericMenuButtonItem>\n      </Restricted>\n    </GenericMenu>\n  );\n};\n","import { ComponentType, isValidElement, ReactElement } from 'react';\n\nexport const isComponentType = <T extends {}>(\n  elementOrComponent?: ComponentType<T> | ReactElement | null,\n): elementOrComponent is ComponentType<T> => {\n  return elementOrComponent === null\n    ? false\n    : !isValidElement(elementOrComponent);\n};\n","import type { ForwardedRef } from 'react';\n\nexport const applyElementToRef = <T extends HTMLElement | null>(\n  ref: ForwardedRef<T>,\n  element: T,\n) => {\n  if (!ref) return;\n\n  if (typeof ref === 'function') return ref(element);\n\n  ref.current = element;\n};\n","import { ComponentProps, RefAttributes, forwardRef, useState } from 'react';\nimport type { StreamVideoParticipant } from '@stream-io/video-client';\n\nexport type BaseVideoPlaceholderProps = {\n  participant: StreamVideoParticipant;\n} & RefAttributes<HTMLDivElement> &\n  ComponentProps<'div'>;\n\nexport const BaseVideoPlaceholder = forwardRef<\n  HTMLDivElement,\n  BaseVideoPlaceholderProps\n>(function DefaultVideoPlaceholder({ participant, style, children }, ref) {\n  const [error, setError] = useState(false);\n  const name = participant.name || participant.userId;\n  return (\n    <div className=\"str-video__video-placeholder\" style={style} ref={ref}>\n      {(!participant.image || error) &&\n        (name ? (\n          <InitialsFallback name={name} />\n        ) : (\n          <div className=\"str-video__video-placeholder__no-video-label\">\n            {children}\n          </div>\n        ))}\n      {participant.image && !error && (\n        <img\n          onError={() => setError(true)}\n          alt={name}\n          className=\"str-video__video-placeholder__avatar\"\n          src={participant.image}\n        />\n      )}\n    </div>\n  );\n});\n\nconst InitialsFallback = (props: { name: string }) => {\n  const { name } = props;\n  const initials = name\n    .split(' ')\n    .slice(0, 2)\n    .map((n) => n[0])\n    .join('');\n  return (\n    <div className=\"str-video__video-placeholder__initials-fallback\">\n      {initials}\n    </div>\n  );\n};\n","import { ComponentPropsWithRef, forwardRef, useEffect, useState } from 'react';\nimport { Browsers } from '@stream-io/video-client';\n\nimport { applyElementToRef } from '../../../utilities';\n\nexport type BaseVideoProps = ComponentPropsWithRef<'video'> & {\n  stream?: MediaStream;\n};\n\n/**\n * @description Extends video element with `stream` property\n * (`srcObject`) to reactively handle stream changes\n */\nexport const BaseVideo = forwardRef<HTMLVideoElement, BaseVideoProps>(\n  function BaseVideo({ stream, ...rest }, ref) {\n    const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(\n      null,\n    );\n\n    useEffect(() => {\n      if (!videoElement || !stream) return;\n      if (stream === videoElement.srcObject) return;\n\n      videoElement.srcObject = stream;\n      if (Browsers.isSafari() || Browsers.isFirefox()) {\n        // Firefox and Safari have some timing issue\n        setTimeout(() => {\n          videoElement.srcObject = stream;\n          videoElement.play().catch((e) => {\n            console.error(`Failed to play stream`, e);\n          });\n        }, 0);\n      }\n\n      return () => {\n        videoElement.pause();\n        videoElement.srcObject = null;\n      };\n    }, [stream, videoElement]);\n\n    return (\n      <video\n        autoPlay\n        playsInline\n        {...rest}\n        ref={(element) => {\n          applyElementToRef(ref, element);\n          setVideoElement(element);\n        }}\n      />\n    );\n  },\n);\n","import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport {\n  BaseVideoPlaceholder,\n  type BaseVideoPlaceholderProps,\n} from './BaseVideoPlaceholder';\n\nexport type VideoPlaceholderProps = BaseVideoPlaceholderProps;\n\nexport const DefaultVideoPlaceholder = forwardRef<\n  HTMLDivElement,\n  VideoPlaceholderProps\n>(function DefaultVideoPlaceholder(props, ref) {\n  const { t } = useI18n();\n  return (\n    <BaseVideoPlaceholder ref={ref} {...props}>\n      {t('Video is disabled')}\n    </BaseVideoPlaceholder>\n  );\n});\n","import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport {\n  BaseVideoPlaceholder,\n  type BaseVideoPlaceholderProps,\n} from './BaseVideoPlaceholder';\n\nexport type PictureInPicturePlaceholderProps = BaseVideoPlaceholderProps;\n\nexport const DefaultPictureInPicturePlaceholder = forwardRef<\n  HTMLDivElement,\n  PictureInPicturePlaceholderProps\n>(function DefaultPictureInPicturePlaceholder(props, ref) {\n  const { t } = useI18n();\n  return (\n    <BaseVideoPlaceholder ref={ref} {...props}>\n      {t('Video is playing in a popup')}\n    </BaseVideoPlaceholder>\n  );\n});\n","import {\n  ComponentPropsWithoutRef,\n  ComponentType,\n  useEffect,\n  useLayoutEffect,\n  useState,\n} from 'react';\nimport {\n  hasScreenShare,\n  hasVideo,\n  StreamVideoParticipant,\n  VideoTrackType,\n  VisibilityState,\n} from '@stream-io/video-client';\nimport clsx from 'clsx';\nimport {\n  DefaultVideoPlaceholder,\n  VideoPlaceholderProps,\n} from './DefaultVideoPlaceholder';\nimport { useCall } from '@stream-io/video-react-bindings';\nimport { usePictureInPictureState } from '../../hooks/usePictureInPictureState';\nimport {\n  DefaultPictureInPicturePlaceholder,\n  PictureInPicturePlaceholderProps,\n} from './DefaultPictureInPicturePlaceholder';\n\nexport type VideoProps = ComponentPropsWithoutRef<'video'> & {\n  /**\n   * Pass false to disable rendering video and render fallback\n   * even if the participant has published video.\n   * @default true\n   */\n  enabled?: boolean;\n  /**\n   * Forces the video to be mirrored or unmirrored. By default, video track\n   * from the local participant is mirrored, and all other videos are not mirrored.\n   */\n  mirror?: boolean;\n  /**\n   * The track type to display.\n   */\n  trackType: VideoTrackType | 'none';\n  /**\n   * The participant represented by this video element.\n   */\n  participant: StreamVideoParticipant;\n  /**\n   * Override the default UI that's visible when a participant turned off their video.\n   * Set it to `null` if you wish to disable the video placeholder.\n   *\n   * @default DefaultVideoPlaceholder\n   */\n  VideoPlaceholder?: ComponentType<VideoPlaceholderProps> | null;\n  /**\n   * Override the default UI that's dispayed in place of the video when it's playing\n   * in picture-in-picture. Set it to `null` if you wish to display the browser's default\n   * placeholder.\n   *\n   * @default DefaultPictureInPicturePlaceholder\n   */\n  PictureInPicturePlaceholder?: ComponentType<PictureInPicturePlaceholderProps> | null;\n  /**\n  /**\n   * An object with setRef functions\n   * meant for exposing some of the internal elements of this component.\n   */\n  refs?: {\n    /**\n     * The video element that's used to play the video stream.\n     * @param element the video element.\n     */\n    setVideoElement?: (element: HTMLVideoElement | null) => void;\n    /**\n     * The video placeholder element that's used when the video stream is not playing.\n     * @param element the video placeholder element.\n     */\n    setVideoPlaceholderElement?: (element: HTMLDivElement | null) => void;\n    setPictureInPicturePlaceholderElement?: (\n      element: HTMLDivElement | null,\n    ) => void;\n  };\n};\n\nexport const Video = ({\n  enabled = true,\n  mirror,\n  trackType,\n  participant,\n  className,\n  VideoPlaceholder = DefaultVideoPlaceholder,\n  PictureInPicturePlaceholder = DefaultPictureInPicturePlaceholder,\n  refs,\n  ...rest\n}: VideoProps) => {\n  const {\n    sessionId,\n    videoStream,\n    screenShareStream,\n    viewportVisibilityState,\n    isLocalParticipant,\n    userId,\n  } = participant;\n\n  const call = useCall();\n  const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(\n    null,\n  );\n  // start with true, will flip once the video starts playing\n  const [isVideoPaused, setIsVideoPaused] = useState(true);\n  const [isWideMode, setIsWideMode] = useState(true);\n  const isPiP = usePictureInPictureState(videoElement ?? undefined);\n\n  const stream =\n    trackType === 'videoTrack'\n      ? videoStream\n      : trackType === 'screenShareTrack'\n        ? screenShareStream\n        : undefined;\n\n  useLayoutEffect(() => {\n    if (!call || !videoElement || trackType === 'none') return;\n\n    const cleanup = call.bindVideoElement(videoElement, sessionId, trackType);\n\n    return () => {\n      cleanup?.();\n    };\n  }, [call, trackType, sessionId, videoElement]);\n\n  useEffect(() => {\n    if (!stream || !videoElement) return;\n\n    const [track] = stream.getVideoTracks();\n    if (!track) return;\n\n    const handlePlayPause = () => {\n      setIsVideoPaused(videoElement.paused);\n\n      const { width = 0, height = 0 } = track.getSettings();\n      setIsWideMode(width >= height);\n    };\n\n    // playback may have started before we had a chance to\n    // attach the 'play/pause' event listener, so we set the state\n    // here to make sure it's in sync\n    setIsVideoPaused(videoElement.paused);\n\n    videoElement.addEventListener('play', handlePlayPause);\n    videoElement.addEventListener('pause', handlePlayPause);\n    track.addEventListener('unmute', handlePlayPause);\n    return () => {\n      videoElement.removeEventListener('play', handlePlayPause);\n      videoElement.removeEventListener('pause', handlePlayPause);\n      track.removeEventListener('unmute', handlePlayPause);\n\n      // reset the 'pause' state once we unmount the video element\n      setIsVideoPaused(true);\n    };\n  }, [stream, videoElement]);\n\n  if (!call) return null;\n\n  const isPublishingTrack =\n    trackType === 'videoTrack'\n      ? hasVideo(participant)\n      : trackType === 'screenShareTrack'\n        ? hasScreenShare(participant)\n        : false;\n\n  const isInvisible =\n    trackType === 'none' ||\n    viewportVisibilityState?.[trackType] === VisibilityState.INVISIBLE;\n\n  const hasNoVideoOrInvisible = !enabled || !isPublishingTrack || isInvisible;\n  const mirrorVideo =\n    mirror === undefined\n      ? isLocalParticipant && trackType === 'videoTrack'\n      : mirror;\n  const isScreenShareTrack = trackType === 'screenShareTrack';\n  return (\n    <>\n      {!hasNoVideoOrInvisible && (\n        <video\n          {...rest}\n          className={clsx('str-video__video', className, {\n            'str-video__video--not-playing': isVideoPaused,\n            'str-video__video--tall': !isWideMode,\n            'str-video__video--mirror': mirrorVideo,\n            'str-video__video--screen-share': isScreenShareTrack,\n          })}\n          data-user-id={userId}\n          data-session-id={sessionId}\n          ref={(element) => {\n            setVideoElement(element);\n            refs?.setVideoElement?.(element);\n          }}\n        />\n      )}\n      {isPiP && PictureInPicturePlaceholder && (\n        <PictureInPicturePlaceholder\n          style={{ position: 'absolute' }}\n          participant={participant}\n        />\n      )}\n      {/* TODO: add condition to \"hold\" the placeholder until track unmutes as well */}\n      {(hasNoVideoOrInvisible || isVideoPaused) && VideoPlaceholder && (\n        <VideoPlaceholder\n          style={{ position: 'absolute' }}\n          participant={participant}\n          ref={refs?.setVideoPlaceholderElement}\n        />\n      )}\n    </>\n  );\n};\n\nVideo.displayName = 'Video';\n","import {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { flushSync } from 'react-dom';\nimport clsx from 'clsx';\nimport { useCall } from '@stream-io/video-react-bindings';\nimport { disposeOfMediaStream, getLogger } from '@stream-io/video-client';\nimport {\n  BackgroundBlurLevel,\n  BackgroundFilter,\n  createRenderer,\n  isPlatformSupported,\n  loadTFLite,\n  Renderer,\n  TFLite,\n} from '@stream-io/video-filters-web';\n\nexport type BackgroundFiltersProps = {\n  /**\n   * A list of URLs to use as background images.\n   */\n  backgroundImages?: string[];\n\n  /**\n   * The background filter to apply to the video (by default).\n   * @default undefined no filter applied\n   */\n  backgroundFilter?: BackgroundFilter;\n\n  /**\n   * The URL of the image to use as the background (by default).\n   */\n  backgroundImage?: string;\n\n  /**\n   * The level of blur to apply to the background (by default).\n   * @default 'high'.\n   */\n  backgroundBlurLevel?: BackgroundBlurLevel;\n\n  /**\n   * The base path for the TensorFlow Lite files.\n   * @default 'https://unpkg.com/@stream-io/video-filters-web/tf'.\n   */\n  basePath?: string;\n\n  /**\n   * The path to the TensorFlow Lite WebAssembly file.\n   *\n   * Override this prop to use a custom path to the TensorFlow Lite WebAssembly file\n   * (e.g., if you choose to host it yourself).\n   */\n  tfFilePath?: string;\n\n  /**\n   * The path to the TensorFlow Lite model file.\n   * Override this prop to use a custom path to the TensorFlow Lite model file\n   * (e.g., if you choose to host it yourself).\n   */\n  modelFilePath?: string;\n\n  /**\n   * When a started filter encounters an error, this callback will be executed.\n   * The default behavior (not overridable) is unregistering a failed filter.\n   * Use this callback to display UI error message, disable the corresponsing stream,\n   * or to try registering the filter again.\n   */\n  onError?: (error: any) => void;\n};\n\nexport type BackgroundFiltersAPI = {\n  /**\n   * Whether the current platform supports the background filters.\n   */\n  isSupported: boolean;\n\n  /**\n   * Indicates whether the background filters engine is loaded and ready.\n   */\n  isReady: boolean;\n\n  /**\n   * Disables all background filters applied to the video.\n   */\n  disableBackgroundFilter: () => void;\n\n  /**\n   * Applies a background blur filter to the video.\n   *\n   * @param blurLevel the level of blur to apply to the background.\n   */\n  applyBackgroundBlurFilter: (blurLevel: BackgroundBlurLevel) => void;\n\n  /**\n   * Applies a background image filter to the video.\n   *\n   * @param imageUrl the URL of the image to use as the background.\n   */\n  applyBackgroundImageFilter: (imageUrl: string) => void;\n};\n\n/**\n * The context value for the background filters context.\n */\nexport type BackgroundFiltersContextValue = BackgroundFiltersProps &\n  BackgroundFiltersAPI;\n\n/**\n * The context for the background filters.\n */\nconst BackgroundFiltersContext = createContext<\n  BackgroundFiltersContextValue | undefined\n>(undefined);\n\n/**\n * A hook to access the background filters context API.\n */\nexport const useBackgroundFilters = () => {\n  const context = useContext(BackgroundFiltersContext);\n  if (!context) {\n    throw new Error(\n      'useBackgroundFilters must be used within a BackgroundFiltersProvider',\n    );\n  }\n  return context;\n};\n\n/**\n * A provider component that enables the use of background filters in your app.\n *\n * Please make sure you have the `@stream-io/video-filters-web` package installed\n * in your project before using this component.\n */\nexport const BackgroundFiltersProvider = (\n  props: PropsWithChildren<BackgroundFiltersProps>,\n) => {\n  const {\n    children,\n    backgroundImages = [],\n    backgroundFilter: bgFilterFromProps = undefined,\n    backgroundImage: bgImageFromProps = undefined,\n    backgroundBlurLevel: bgBlurLevelFromProps = undefined,\n    tfFilePath,\n    modelFilePath,\n    basePath,\n    onError,\n  } = props;\n\n  const [backgroundFilter, setBackgroundFilter] = useState(bgFilterFromProps);\n  const [backgroundImage, setBackgroundImage] = useState(bgImageFromProps);\n  const [backgroundBlurLevel, setBackgroundBlurLevel] =\n    useState(bgBlurLevelFromProps);\n\n  const applyBackgroundImageFilter = useCallback((imageUrl: string) => {\n    setBackgroundFilter('image');\n    setBackgroundImage(imageUrl);\n  }, []);\n\n  const applyBackgroundBlurFilter = useCallback(\n    (blurLevel: BackgroundBlurLevel = 'high') => {\n      setBackgroundFilter('blur');\n      setBackgroundBlurLevel(blurLevel);\n    },\n    [],\n  );\n\n  const disableBackgroundFilter = useCallback(() => {\n    setBackgroundFilter(undefined);\n    setBackgroundImage(undefined);\n    setBackgroundBlurLevel(undefined);\n  }, []);\n\n  const [isSupported, setIsSupported] = useState(false);\n  useEffect(() => {\n    isPlatformSupported().then(setIsSupported);\n  }, []);\n\n  const [tfLite, setTfLite] = useState<TFLite>();\n  useEffect(() => {\n    // don't try to load TFLite if the platform is not supported\n    if (!isSupported) return;\n    loadTFLite({ basePath, modelFilePath, tfFilePath })\n      .then(setTfLite)\n      .catch((err) => console.error('Failed to load TFLite', err));\n  }, [basePath, isSupported, modelFilePath, tfFilePath]);\n\n  const handleError = useCallback(\n    (error: any) => {\n      getLogger(['filters'])(\n        'warn',\n        'Filter encountered an error and will be disabled',\n      );\n      disableBackgroundFilter();\n      onError?.(error);\n    },\n    [disableBackgroundFilter, onError],\n  );\n\n  return (\n    <BackgroundFiltersContext.Provider\n      value={{\n        isSupported,\n        isReady: !!tfLite,\n        backgroundImage,\n        backgroundBlurLevel,\n        backgroundFilter,\n        disableBackgroundFilter,\n        applyBackgroundBlurFilter,\n        applyBackgroundImageFilter,\n        backgroundImages,\n        tfFilePath,\n        modelFilePath,\n        basePath,\n        onError: handleError,\n      }}\n    >\n      {children}\n      {tfLite && <BackgroundFilters tfLite={tfLite} />}\n    </BackgroundFiltersContext.Provider>\n  );\n};\n\nconst BackgroundFilters = (props: { tfLite: TFLite }) => {\n  const call = useCall();\n  const { children, start } = useRenderer(props.tfLite);\n  const { backgroundFilter, onError } = useBackgroundFilters();\n  const handleErrorRef = useRef<((error: any) => void) | undefined>(undefined);\n  handleErrorRef.current = onError;\n\n  useEffect(() => {\n    if (!call || !backgroundFilter) return;\n    const { unregister } = call.camera.registerFilter((ms) =>\n      start(ms, (error) => handleErrorRef.current?.(error)),\n    );\n    return () => {\n      unregister().catch((err) => console.warn(`Can't unregister filter`, err));\n    };\n  }, [backgroundFilter, call, start]);\n\n  return children;\n};\n\nconst useRenderer = (tfLite: TFLite) => {\n  const { backgroundFilter, backgroundBlurLevel, backgroundImage } =\n    useBackgroundFilters();\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const bgImageRef = useRef<HTMLImageElement>(null);\n  const [videoSize, setVideoSize] = useState<{ width: number; height: number }>(\n    {\n      width: 1920,\n      height: 1080,\n    },\n  );\n\n  const start = useCallback(\n    (ms: MediaStream, onError?: (error: any) => void) => {\n      let outputStream: MediaStream | undefined;\n      let renderer: Renderer | undefined;\n\n      const output = new Promise<MediaStream>((resolve, reject) => {\n        if (!backgroundFilter) {\n          reject(new Error('No filter specified'));\n          return;\n        }\n\n        const videoEl = videoRef.current;\n        const canvasEl = canvasRef.current;\n        const bgImageEl = bgImageRef.current;\n\n        if (!videoEl || !canvasEl || (backgroundImage && !bgImageEl)) {\n          // You should start renderer in effect or event handlers\n          reject(new Error('Renderer started before elements are ready'));\n          return;\n        }\n\n        videoEl.srcObject = ms;\n        videoEl.play().then(\n          () => {\n            const [track] = ms.getVideoTracks();\n\n            if (!track) {\n              reject(new Error('No video tracks in input media stream'));\n              return;\n            }\n\n            const trackSettings = track.getSettings();\n            flushSync(() =>\n              setVideoSize({\n                width: trackSettings.width ?? 0,\n                height: trackSettings.height ?? 0,\n              }),\n            );\n            renderer = createRenderer(\n              tfLite,\n              videoEl,\n              canvasEl,\n              {\n                backgroundFilter,\n                backgroundBlurLevel,\n                backgroundImage: bgImageEl ?? undefined,\n              },\n              onError,\n            );\n            outputStream = canvasEl.captureStream();\n            resolve(outputStream);\n          },\n          () => {\n            reject(new Error('Could not play the source video stream'));\n          },\n        );\n      });\n\n      return {\n        output,\n        stop: () => {\n          renderer?.dispose();\n          if (videoRef.current) videoRef.current.srcObject = null;\n          if (outputStream) disposeOfMediaStream(outputStream);\n        },\n      };\n    },\n    [backgroundBlurLevel, backgroundFilter, backgroundImage, tfLite],\n  );\n\n  const children = (\n    <div className=\"str-video__background-filters\">\n      <video\n        className={clsx(\n          'str-video__background-filters__video',\n          videoSize.height > videoSize.width &&\n            'str-video__background-filters__video--tall',\n        )}\n        ref={videoRef}\n        playsInline\n        muted\n        controls={false}\n        {...videoSize}\n      />\n      {backgroundImage && (\n        <img\n          className=\"str-video__background-filters__background-image\"\n          alt=\"Background\"\n          ref={bgImageRef}\n          src={backgroundImage}\n          {...videoSize}\n        />\n      )}\n      <canvas\n        className=\"str-video__background-filters__target-canvas\"\n        {...videoSize}\n        ref={canvasRef}\n      />\n    </div>\n  );\n\n  return {\n    start,\n    children,\n  };\n};\n","import { useEffect } from 'react';\nimport { DynascaleManager, VideoTrackType } from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport const useTrackElementVisibility = <T extends HTMLElement>({\n  trackedElement,\n  dynascaleManager: propsDynascaleManager,\n  sessionId,\n  trackType,\n}: {\n  trackedElement: T | null;\n  sessionId: string;\n  dynascaleManager?: DynascaleManager;\n  trackType: VideoTrackType | 'none';\n}) => {\n  const call = useCall();\n  const manager = propsDynascaleManager ?? call?.dynascaleManager;\n  useEffect(() => {\n    if (!trackedElement || !manager || !call || trackType === 'none') return;\n    const unobserve = manager.trackElementVisibility(\n      trackedElement,\n      sessionId,\n      trackType,\n    );\n    return () => {\n      unobserve();\n    };\n  }, [trackedElement, manager, call, sessionId, trackType]);\n};\n","import { ComponentProps, ForwardedRef, forwardRef } from 'react';\nimport clsx from 'clsx';\n\nimport { Icon, IconProps } from '../Icon';\n\nexport type ButtonWithIconProps = {\n  enabled?: boolean;\n  variant?: string;\n} & ComponentProps<'button'> &\n  IconProps;\n\nexport const IconButton = forwardRef(function IconButton(\n  props: ButtonWithIconProps,\n  ref: ForwardedRef<HTMLButtonElement>,\n) {\n  const { icon, enabled, variant, onClick, className, ...rest } = props;\n  return (\n    <button\n      className={clsx('str-video__call-controls__button', className, {\n        [`str-video__call-controls__button--variant-${variant}`]: variant,\n        'str-video__call-controls__button--enabled': enabled,\n      })}\n      onClick={(e) => {\n        e.preventDefault();\n        onClick?.(e);\n      }}\n      ref={ref}\n      {...rest}\n    >\n      <Icon icon={icon} />\n    </button>\n  );\n});\n","import clsx from 'clsx';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport {\n  ComponentProps,\n  ComponentType,\n  forwardRef,\n  JSX,\n  PropsWithChildren,\n} from 'react';\nimport { Placement } from '@floating-ui/react';\n\nimport { IconButton } from './IconButton';\nimport { isComponentType } from '../../utilities';\n\nexport type IconButtonWithMenuProps<E extends HTMLElement = HTMLButtonElement> =\n  PropsWithChildren<{\n    active?: boolean;\n    Menu?: ComponentType | JSX.Element;\n    caption?: string;\n    className?: string;\n    menuPlacement?: Placement;\n    menuOffset?: number;\n    ToggleMenuButton?: ComponentType<ToggleMenuButtonProps<E>>;\n    variant?: 'primary' | 'secondary';\n    onMenuToggle?: (menuShown: boolean) => void;\n  }> &\n    ComponentProps<'button'>;\n\nexport const CompositeButton = forwardRef<\n  HTMLDivElement,\n  IconButtonWithMenuProps\n>(function CompositeButton(\n  {\n    disabled,\n    caption,\n    children,\n    className,\n    active,\n    Menu,\n    menuPlacement,\n    menuOffset,\n    title,\n    ToggleMenuButton = DefaultToggleMenuButton,\n    variant,\n    onClick,\n    onMenuToggle,\n    ...restButtonProps\n  },\n  ref,\n) {\n  return (\n    <div\n      className={clsx('str-video__composite-button', className, {\n        'str-video__composite-button--caption': caption,\n        'str-video__composite-button--menu': Menu,\n      })}\n      title={title}\n      ref={ref}\n    >\n      <div\n        className={clsx('str-video__composite-button__button-group', {\n          'str-video__composite-button__button-group--active': active,\n          'str-video__composite-button__button-group--active-primary':\n            active && variant === 'primary',\n          'str-video__composite-button__button-group--active-secondary':\n            active && variant === 'secondary',\n          'str-video__composite-button__button-group--disabled': disabled,\n        })}\n      >\n        <button\n          type=\"button\"\n          className=\"str-video__composite-button__button\"\n          onClick={(e) => {\n            e.preventDefault();\n            onClick?.(e);\n          }}\n          disabled={disabled}\n          {...restButtonProps}\n        >\n          {children}\n        </button>\n        {Menu && (\n          <MenuToggle\n            offset={menuOffset}\n            placement={menuPlacement}\n            ToggleButton={ToggleMenuButton}\n            onToggle={onMenuToggle}\n          >\n            {isComponentType(Menu) ? <Menu /> : Menu}\n          </MenuToggle>\n        )}\n      </div>\n      {caption && (\n        <div className=\"str-video__composite-button__caption\">{caption}</div>\n      )}\n    </div>\n  );\n});\n\nconst DefaultToggleMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function DefaultToggleMenuButton({ menuShown }, ref) {\n  return (\n    <IconButton\n      className={clsx('str-video__menu-toggle-button', {\n        'str-video__menu-toggle-button--active': menuShown,\n      })}\n      icon={menuShown ? 'caret-down' : 'caret-up'}\n      ref={ref}\n    />\n  );\n});\n","import { PropsWithChildren, ReactNode, useEffect } from 'react';\nimport { Placement } from '@floating-ui/react';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nexport type NotificationProps = {\n  message?: ReactNode;\n  isVisible?: boolean;\n  visibilityTimeout?: number;\n  resetIsVisible?: () => void;\n  placement?: Placement;\n  iconClassName?: string | null;\n  close?: () => void;\n};\n\nexport const Notification = (props: PropsWithChildren<NotificationProps>) => {\n  const {\n    isVisible,\n    message,\n    children,\n    visibilityTimeout,\n    resetIsVisible,\n    placement = 'top',\n    iconClassName = 'str-video__notification__icon',\n    close,\n  } = props;\n\n  const { refs, x, y, strategy } = useFloatingUIPreset({\n    placement,\n    strategy: 'absolute',\n  });\n\n  useEffect(() => {\n    if (!isVisible || !visibilityTimeout || !resetIsVisible) return;\n\n    const timeout = setTimeout(() => {\n      resetIsVisible();\n    }, visibilityTimeout);\n\n    return () => clearTimeout(timeout);\n  }, [isVisible, resetIsVisible, visibilityTimeout]);\n\n  return (\n    <div ref={refs.setReference}>\n      {isVisible && (\n        <div\n          className=\"str-video__notification\"\n          ref={refs.setFloating}\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n          }}\n        >\n          {iconClassName && <i className={iconClassName} />}\n          <span className=\"str-video__notification__message\">{message}</span>\n          {close ? (\n            <i\n              className=\"str-video__icon str-video__icon--close str-video__notification__close\"\n              onClick={close}\n            />\n          ) : null}\n        </div>\n      )}\n      {children}\n    </div>\n  );\n};\n","import clsx from 'clsx';\n\nexport type LoadingIndicatorProps = {\n  className?: string;\n  /** String will be injected into class and later used to apply as a CSS mask-image to an element as data URL */\n  type?: string;\n  /** Text to be displayed under the loading indicator icon */\n  text?: string;\n  /** Tooltip to be displayed on hover */\n  tooltip?: string;\n};\n\nexport const LoadingIndicator = ({\n  className,\n  type = 'spinner',\n  text,\n  tooltip,\n}: LoadingIndicatorProps) => {\n  return (\n    <div\n      className={clsx('str-video__loading-indicator', className)}\n      title={tooltip}\n    >\n      <div className={clsx('str-video__loading-indicator__icon', type)}></div>\n      {text && <p className=\"str-video__loading-indicator-text\">{text}</p>}\n    </div>\n  );\n};\n","import { PropsWithChildren, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { useFloatingUIPreset } from '../../hooks';\nimport { FloatingArrow, Placement, arrow } from '@floating-ui/react';\n\nexport type TooltipProps<T extends HTMLElement> = PropsWithChildren<{\n  /** Reference element to which the tooltip should attach to */\n  referenceElement: T | null;\n  /** Additional class applied to the tooltip root element */\n  tooltipClassName?: string;\n  /** Popper's modifier (offset) property - [xAxis offset, yAxis offset], default [0, 10] */\n  offset?: [number, number];\n  /** Popper's placement property defining default position of the tooltip, default 'top' */\n  tooltipPlacement?: Placement;\n  /** Tells component whether to render its contents */\n  visible?: boolean;\n}>;\n\nexport const Tooltip = <T extends HTMLElement>({\n  children,\n  referenceElement,\n  tooltipClassName,\n  tooltipPlacement = 'top',\n  visible = false,\n}: TooltipProps<T>) => {\n  const arrowRef = useRef<SVGSVGElement>(null);\n  const { refs, x, y, strategy, context } = useFloatingUIPreset({\n    placement: tooltipPlacement,\n    strategy: 'absolute',\n    middleware: [arrow({ element: arrowRef })],\n  });\n\n  useEffect(() => {\n    refs.setReference(referenceElement);\n  }, [referenceElement, refs]);\n\n  if (!visible) return null;\n\n  return (\n    <div\n      className={clsx('str-video__tooltip', tooltipClassName)}\n      ref={refs.setFloating}\n      style={{\n        position: strategy,\n        top: y ?? 0,\n        left: x ?? 0,\n      }}\n    >\n      <FloatingArrow\n        ref={arrowRef}\n        context={context}\n        fill=\"var(--str-video__tooltip--background-color)\"\n      />\n      {children}\n    </div>\n  );\n};\n","import { ComponentProps, useState } from 'react';\nimport { Tooltip, TooltipProps } from './Tooltip';\nimport { useEnterLeaveHandlers } from './hooks';\n\ntype WithPopupProps = ComponentProps<'div'> &\n  Omit<TooltipProps<HTMLDivElement>, 'referenceElement' | 'children'> & {\n    tooltipDisabled?: boolean;\n  };\n\n// todo: duplicate of CallParticipantList.tsx#MediaIndicator - refactor to a single component\nexport const WithTooltip = ({\n  title,\n  tooltipClassName,\n  tooltipPlacement,\n  tooltipDisabled,\n  ...props\n}: WithPopupProps) => {\n  const { handleMouseEnter, handleMouseLeave, tooltipVisible } =\n    useEnterLeaveHandlers<HTMLDivElement>();\n  const [tooltipAnchor, setTooltipAnchor] = useState<HTMLDivElement | null>(\n    null,\n  );\n  const tooltipActuallyVisible =\n    !tooltipDisabled && Boolean(title) && tooltipVisible;\n\n  return (\n    <>\n      <Tooltip\n        referenceElement={tooltipAnchor}\n        visible={tooltipActuallyVisible}\n        tooltipClassName={tooltipClassName}\n        tooltipPlacement={tooltipPlacement}\n      >\n        {title || ''}\n      </Tooltip>\n      <div\n        ref={setTooltipAnchor}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        {...props}\n      />\n    </>\n  );\n};\n","import { MouseEventHandler, useCallback, useState } from 'react';\n\nexport const useEnterLeaveHandlers = <T extends HTMLElement>({\n  onMouseEnter,\n  onMouseLeave,\n}: Partial<\n  Record<'onMouseEnter' | 'onMouseLeave', MouseEventHandler<T>>\n> = {}) => {\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n\n  const handleMouseEnter: MouseEventHandler<T> = useCallback(\n    (e) => {\n      setTooltipVisible(true);\n      onMouseEnter?.(e);\n    },\n    [onMouseEnter],\n  );\n\n  const handleMouseLeave: MouseEventHandler<T> = useCallback(\n    (e) => {\n      setTooltipVisible(false);\n      onMouseLeave?.(e);\n    },\n    [onMouseLeave],\n  );\n\n  return { handleMouseEnter, handleMouseLeave, tooltipVisible };\n};\n","import { forwardRef } from 'react';\n\nimport { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useI18n,\n  useToggleCallRecording,\n} from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button/';\nimport { Icon } from '../Icon';\nimport {\n  MenuToggle,\n  MenuVisualType,\n  ToggleMenuButtonProps,\n  useMenuContext,\n} from '../Menu';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { WithTooltip } from '../Tooltip';\n\nexport type RecordCallButtonProps = {\n  caption?: string;\n};\n\nconst RecordEndConfirmation = () => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse } = useToggleCallRecording();\n\n  const { close } = useMenuContext();\n\n  return (\n    <div className=\"str-video__end-recording__confirmation\">\n      <div className=\"str-video__end-recording__header\">\n        <Icon icon=\"recording-on\" />\n        <h2 className=\"str-video__end-recording__heading\">\n          {t('End recording')}\n        </h2>\n      </div>\n      <p className=\"str-video__end-recording__description\">\n        {t('Are you sure you want end the recording?')}\n      </p>\n      <div className=\"str-video__end-recording__actions\">\n        <CompositeButton variant=\"secondary\" onClick={close}>\n          {t('Cancel')}\n        </CompositeButton>\n        <CompositeButton variant=\"primary\" onClick={toggleCallRecording}>\n          {isAwaitingResponse ? <LoadingIndicator /> : t('End recording')}\n        </CompositeButton>\n      </div>\n    </div>\n  );\n};\n\nconst ToggleEndRecordingMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps\n>(function ToggleEndRecordingMenuButton(props, ref) {\n  return (\n    <CompositeButton\n      ref={ref}\n      active={true}\n      variant=\"secondary\"\n      data-testid=\"recording-stop-button\"\n    >\n      <Icon icon=\"recording-off\" />\n    </CompositeButton>\n  );\n});\n\nexport const RecordCallConfirmationButton = ({\n  caption,\n}: {\n  caption?: string;\n}) => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } =\n    useToggleCallRecording();\n\n  if (isCallRecordingInProgress) {\n    return (\n      <Restricted\n        requiredGrants={[\n          OwnCapability.START_RECORD_CALL,\n          OwnCapability.STOP_RECORD_CALL,\n        ]}\n      >\n        <MenuToggle\n          ToggleButton={ToggleEndRecordingMenuButton}\n          visualType={MenuVisualType.PORTAL}\n        >\n          <RecordEndConfirmation />\n        </MenuToggle>\n      </Restricted>\n    );\n  }\n\n  const title = isAwaitingResponse\n    ? t('Waiting for recording to start...')\n    : (caption ?? t('Record call'));\n\n  return (\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <WithTooltip title={title}>\n        <CompositeButton\n          active={isCallRecordingInProgress}\n          caption={caption}\n          variant=\"secondary\"\n          data-testid=\"recording-start-button\"\n          onClick={isAwaitingResponse ? undefined : toggleCallRecording}\n        >\n          {isAwaitingResponse ? (\n            <LoadingIndicator />\n          ) : (\n            <Icon icon=\"recording-off\" />\n          )}\n        </CompositeButton>\n      </WithTooltip>\n    </Restricted>\n  );\n};\n\nexport const RecordCallButton = ({ caption }: RecordCallButtonProps) => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } =\n    useToggleCallRecording();\n\n  let title = caption ?? t('Record call');\n\n  if (isAwaitingResponse) {\n    title = isCallRecordingInProgress\n      ? t('Waiting for recording to stop...')\n      : t('Waiting for recording to start...');\n  }\n\n  return (\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <CompositeButton\n        active={isCallRecordingInProgress}\n        caption={caption}\n        variant=\"secondary\"\n        data-testid={\n          isCallRecordingInProgress\n            ? 'recording-stop-button'\n            : 'recording-start-button'\n        }\n        title={title}\n        onClick={isAwaitingResponse ? undefined : toggleCallRecording}\n      >\n        {isAwaitingResponse ? (\n          <LoadingIndicator />\n        ) : (\n          <Icon\n            icon={isCallRecordingInProgress ? 'recording-on' : 'recording-off'}\n          />\n        )}\n      </CompositeButton>\n    </Restricted>\n  );\n};\n","import { useEffect } from 'react';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type ReactionProps = {\n  participant: StreamVideoParticipant;\n  hideAfterTimeoutInMs?: number;\n  emojiReactionMap?: Record<string, string>;\n};\n\nexport const defaultEmojiReactionMap: Record<string, string> = {\n  ':like:': '👍',\n  ':raise-hand:': '✋',\n  ':fireworks:': '🎉',\n  ':dislike:': '👎',\n  ':heart:': '❤️',\n  ':smile:': '😀',\n};\n\nexport const Reaction = ({\n  participant: { reaction, sessionId },\n  hideAfterTimeoutInMs = 5500,\n  emojiReactionMap = defaultEmojiReactionMap,\n}: ReactionProps) => {\n  const call = useCall();\n\n  useEffect(() => {\n    if (!call || !reaction) return;\n\n    const timeoutId = setTimeout(() => {\n      call.resetReaction(sessionId);\n    }, hideAfterTimeoutInMs);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [call, hideAfterTimeoutInMs, reaction, sessionId]);\n\n  if (!reaction) return null;\n\n  const { emoji_code: emojiCode } = reaction;\n\n  return (\n    <div className=\"str-video__reaction\">\n      <span className=\"str-video__reaction__emoji\">\n        {emojiCode && emojiReactionMap[emojiCode]}\n      </span>\n    </div>\n  );\n};\n","import { getLogger } from '@stream-io/video-client';\n\nexport type PropsWithErrorHandler<T = unknown> = T & {\n  /**\n   * Will be called if the call control action failed with an error (e.g. user didn't grant a\n   * browser permission to enable a media device). If no callback is provided, just logs the error.\n   * @param error Exception which caused call control action to fail\n   */\n  onError?: (error: unknown) => void;\n};\n\n/**\n * Wraps an event handler, silencing and logging exceptions (excluding the NotAllowedError\n * DOMException, which is a normal situation handled by the SDK)\n *\n * @param props component props, including the onError callback\n * @param handler event handler to wrap\n */\nexport const createCallControlHandler = (\n  props: PropsWithErrorHandler,\n  handler: () => Promise<void>,\n): (() => Promise<void>) => {\n  const logger = getLogger(['react-sdk']);\n\n  return async () => {\n    try {\n      await handler();\n    } catch (error) {\n      if (props.onError) {\n        props.onError(error);\n        return;\n      }\n\n      if (!isNotAllowedError(error)) {\n        logger('error', 'Call control handler failed', error);\n      }\n    }\n  };\n};\n\nfunction isNotAllowedError(error: unknown): error is DOMException {\n  return error instanceof DOMException && error.name === 'NotAllowedError';\n}\n","import { forwardRef } from 'react';\nimport clsx from 'clsx';\n\nimport { OwnCapability, StreamReaction } from '@stream-io/video-client';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\n\nimport {\n  MenuToggle,\n  MenuVisualType,\n  ToggleMenuButtonProps,\n  useMenuContext,\n} from '../Menu';\nimport { CompositeButton } from '../Button';\nimport { defaultEmojiReactionMap } from '../Reaction';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\n\nexport const defaultReactions: StreamReaction[] = [\n  {\n    type: 'reaction',\n    emoji_code: ':like:',\n  },\n  {\n    // TODO OL: use `prompt` type?\n    type: 'raised-hand',\n    emoji_code: ':raise-hand:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':fireworks:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':dislike:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':heart:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':smile:',\n  },\n];\n\nexport interface ReactionsButtonProps {\n  reactions?: StreamReaction[];\n}\n\nexport const ReactionsButton = ({\n  reactions = defaultReactions,\n}: ReactionsButtonProps) => {\n  return (\n    <Restricted requiredGrants={[OwnCapability.CREATE_REACTION]}>\n      <MenuToggle\n        placement=\"top\"\n        ToggleButton={ToggleReactionsMenuButton}\n        visualType={MenuVisualType.MENU}\n      >\n        <DefaultReactionsMenu reactions={reactions} />\n      </MenuToggle>\n    </Restricted>\n  );\n};\n\nconst ToggleReactionsMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps\n>(function ToggleReactionsMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <WithTooltip title={t('Reactions')} tooltipDisabled={menuShown}>\n      <CompositeButton ref={ref} active={menuShown} variant=\"primary\">\n        <Icon icon=\"reactions\" />\n      </CompositeButton>\n    </WithTooltip>\n  );\n});\n\nexport interface DefaultReactionsMenuProps {\n  reactions: StreamReaction[];\n  layout?: 'horizontal' | 'vertical';\n}\n\nexport const DefaultReactionsMenu = ({\n  reactions,\n  layout = 'horizontal',\n}: DefaultReactionsMenuProps) => {\n  const call = useCall();\n  const { close } = useMenuContext();\n  return (\n    <div\n      className={clsx('str-video__reactions-menu', {\n        'str-video__reactions-menu--horizontal': layout === 'horizontal',\n        'str-video__reactions-menu--vertical': layout === 'vertical',\n      })}\n    >\n      {reactions.map((reaction) => (\n        <button\n          key={reaction.emoji_code}\n          type=\"button\"\n          className=\"str-video__reactions-menu__button\"\n          onClick={() => {\n            call?.sendReaction(reaction);\n            close?.();\n          }}\n        >\n          {reaction.emoji_code && defaultEmojiReactionMap[reaction.emoji_code]}\n        </button>\n      ))}\n    </div>\n  );\n};\n","import { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button/';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport {\n  PropsWithErrorHandler,\n  createCallControlHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ScreenShareButtonProps = PropsWithErrorHandler<{\n  caption?: string;\n}>;\n\nexport const ScreenShareButton = (props: ScreenShareButtonProps) => {\n  const { t } = useI18n();\n  const { caption } = props;\n\n  const { useHasOngoingScreenShare, useScreenShareState, useCallSettings } =\n    useCallStateHooks();\n  const isSomeoneScreenSharing = useHasOngoingScreenShare();\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SCREENSHARE);\n\n  const callSettings = useCallSettings();\n  const isScreenSharingAllowed = callSettings?.screensharing.enabled;\n\n  const { screenShare, optimisticIsMute } = useScreenShareState();\n  const amIScreenSharing = !optimisticIsMute;\n  const disableScreenShareButton =\n    !amIScreenSharing &&\n    (isSomeoneScreenSharing || isScreenSharingAllowed === false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await screenShare.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SCREENSHARE]}>\n      <PermissionNotification\n        permission={OwnCapability.SCREENSHARE}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now share your screen.')}\n        messageAwaitingApproval={t('Awaiting for an approval to share screen.')}\n        messageRevoked={t('You can no longer share your screen.')}\n      >\n        <WithTooltip title={caption ?? t('Share screen')}>\n          <CompositeButton\n            active={isSomeoneScreenSharing || amIScreenSharing}\n            caption={caption}\n            variant=\"primary\"\n            data-testid={\n              isSomeoneScreenSharing\n                ? 'screen-share-stop-button'\n                : 'screen-share-start-button'\n            }\n            disabled={disableScreenShareButton}\n            onClick={handleClick}\n          >\n            <Icon\n              icon={\n                isSomeoneScreenSharing ? 'screen-share-on' : 'screen-share-off'\n              }\n            />\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n","import {\n  createContext,\n  ReactElement,\n  ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {\n  autoUpdate,\n  flip,\n  FloatingFocusManager,\n  FloatingList,\n  useClick,\n  useDismiss,\n  useFloating,\n  useInteractions,\n  useListItem,\n  useListNavigation,\n  useRole,\n  useTypeahead,\n} from '@floating-ui/react';\n\nimport { Icon } from '../Icon';\n\ninterface SelectContextValue {\n  activeIndex: number | null;\n  selectedIndex: number | null;\n  getItemProps: ReturnType<typeof useInteractions>['getItemProps'];\n  handleSelect: (index: number | null) => void;\n}\n\nconst SelectContext = createContext<SelectContextValue>(\n  {} as SelectContextValue,\n);\n\nconst Select = (props: {\n  children: ReactNode;\n  icon?: string;\n  defaultSelectedLabel: string;\n  defaultSelectedIndex: number;\n  handleSelect: (index: number) => void;\n}) => {\n  const {\n    children,\n    icon,\n    defaultSelectedLabel,\n    defaultSelectedIndex,\n    handleSelect: handleSelectProp,\n  } = props;\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeIndex, setActiveIndex] = useState<number | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(\n    defaultSelectedIndex,\n  );\n  const [selectedLabel, setSelectedLabel] = useState<string | null>(\n    defaultSelectedLabel,\n  );\n\n  const { refs, context } = useFloating({\n    placement: 'bottom-start',\n    open: isOpen,\n    onOpenChange: setIsOpen,\n    whileElementsMounted: autoUpdate,\n    middleware: [flip()],\n  });\n\n  const elementsRef = useRef<Array<HTMLElement | null>>([]);\n  const labelsRef = useRef<Array<string | null>>([]);\n\n  const handleSelect = useCallback(\n    (index: number | null) => {\n      setSelectedIndex(index);\n      handleSelectProp(index || 0);\n      setIsOpen(false);\n      if (index !== null) {\n        setSelectedLabel(labelsRef.current[index]);\n      }\n    },\n    [handleSelectProp],\n  );\n\n  const handleTypeaheadMatch = (index: number | null) => {\n    if (isOpen) {\n      setActiveIndex(index);\n    } else {\n      handleSelect(index);\n    }\n  };\n\n  const listNav = useListNavigation(context, {\n    listRef: elementsRef,\n    activeIndex,\n    selectedIndex,\n    onNavigate: setActiveIndex,\n  });\n  const typeahead = useTypeahead(context, {\n    listRef: labelsRef,\n    activeIndex,\n    selectedIndex,\n    onMatch: handleTypeaheadMatch,\n  });\n  const click = useClick(context);\n  const dismiss = useDismiss(context);\n  const role = useRole(context, { role: 'listbox' });\n\n  const { getReferenceProps, getFloatingProps, getItemProps } = useInteractions(\n    [listNav, typeahead, click, dismiss, role],\n  );\n\n  const selectContext = useMemo(\n    () => ({\n      activeIndex,\n      selectedIndex,\n      getItemProps,\n      handleSelect,\n    }),\n    [activeIndex, selectedIndex, getItemProps, handleSelect],\n  );\n\n  return (\n    <div className=\"str-video__dropdown\">\n      <div\n        className=\"str-video__dropdown-selected\"\n        ref={refs.setReference}\n        tabIndex={0}\n        {...getReferenceProps()}\n      >\n        <label className=\"str-video__dropdown-selected__label\">\n          {icon && (\n            <Icon className=\"str-video__dropdown-selected__icon\" icon={icon} />\n          )}\n          {selectedLabel}\n        </label>\n        <Icon\n          className=\"str-video__dropdown-selected__chevron\"\n          icon={isOpen ? 'chevron-up' : 'chevron-down'}\n        />\n      </div>\n      <SelectContext.Provider value={selectContext}>\n        {isOpen && (\n          <FloatingFocusManager context={context} modal={false}>\n            <div\n              className=\"str-video__dropdown-list\"\n              ref={refs.setFloating}\n              {...getFloatingProps()}\n            >\n              <FloatingList elementsRef={elementsRef} labelsRef={labelsRef}>\n                {children}\n              </FloatingList>\n            </div>\n          </FloatingFocusManager>\n        )}\n      </SelectContext.Provider>\n    </div>\n  );\n};\n\nexport type DropDownSelectOptionProps = {\n  label: string;\n  selected?: boolean;\n  icon?: string;\n};\n\nexport const DropDownSelectOption = (props: DropDownSelectOptionProps) => {\n  const { selected, label, icon } = props;\n  const { getItemProps, handleSelect } = useContext(SelectContext);\n  const { ref, index } = useListItem();\n  return (\n    <div\n      className={clsx('str-video__dropdown-option', {\n        'str-video__dropdown-option--selected': selected,\n      })}\n      ref={ref}\n      {...getItemProps({\n        onClick: () => handleSelect(index),\n      })}\n    >\n      {icon && <Icon className=\"str-video__dropdown-icon\" icon={icon} />}\n      <span className=\"str-video__dropdown-label\">{label}</span>\n    </div>\n  );\n};\n\nexport const DropDownSelect = (props: {\n  icon?: string;\n  defaultSelectedLabel: string;\n  defaultSelectedIndex: number;\n  handleSelect: (index: number) => void;\n  children:\n    | ReactElement<DropDownSelectOptionProps>\n    | ReactElement<DropDownSelectOptionProps>[];\n}) => {\n  const {\n    children,\n    icon,\n    handleSelect,\n    defaultSelectedLabel,\n    defaultSelectedIndex,\n  } = props;\n  return (\n    <Select\n      icon={icon}\n      handleSelect={handleSelect}\n      defaultSelectedIndex={defaultSelectedIndex}\n      defaultSelectedLabel={defaultSelectedLabel}\n    >\n      {children}\n    </Select>\n  );\n};\n","import clsx from 'clsx';\nimport { ChangeEventHandler, useCallback } from 'react';\n\nimport { useDeviceList } from '../../hooks';\nimport { DropDownSelect, DropDownSelectOption } from '../DropdownSelect';\nimport { useMenuContext } from '../Menu';\n\ntype DeviceSelectorOptionProps = {\n  id: string;\n  label: string;\n  name?: string;\n  selected?: boolean;\n  value: string;\n  disabled?: boolean;\n  defaultChecked?: boolean;\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n};\n\nconst DeviceSelectorOption = ({\n  disabled,\n  id,\n  label,\n  onChange,\n  name,\n  selected,\n  defaultChecked,\n  value,\n}: DeviceSelectorOptionProps) => {\n  return (\n    <label\n      className={clsx('str-video__device-settings__option', {\n        'str-video__device-settings__option--selected': selected,\n        'str-video__device-settings__option--disabled': disabled,\n      })}\n      htmlFor={id}\n    >\n      <input\n        type=\"radio\"\n        name={name}\n        onChange={onChange}\n        value={value}\n        id={id}\n        checked={selected}\n        defaultChecked={defaultChecked}\n        disabled={disabled}\n      />\n      {label}\n    </label>\n  );\n};\n\nexport type DeviceSelectorType = 'audioinput' | 'audiooutput' | 'videoinput';\n\nconst DeviceSelectorList = (props: {\n  devices: MediaDeviceInfo[];\n  type: DeviceSelectorType;\n  selectedDeviceId?: string;\n  title?: string;\n  onChange?: (deviceId: string) => void;\n}) => {\n  const { devices = [], selectedDeviceId, title, type, onChange } = props;\n  const { close } = useMenuContext();\n  const { deviceList } = useDeviceList(devices, selectedDeviceId);\n\n  return (\n    <div className=\"str-video__device-settings__device-kind\">\n      {title && (\n        <div className=\"str-video__device-settings__device-selector-title\">\n          {title}\n        </div>\n      )}\n      {deviceList.map((device) => {\n        return (\n          <DeviceSelectorOption\n            id={`${type}--${device.deviceId}`}\n            value={device.deviceId}\n            label={device.label}\n            key={device.deviceId}\n            onChange={(e) => {\n              const deviceId = e.target.value;\n              if (deviceId !== 'default') {\n                onChange?.(deviceId);\n              }\n              close?.();\n            }}\n            name={type}\n            selected={device.isSelected}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nconst DeviceSelectorDropdown = (props: {\n  devices: MediaDeviceInfo[];\n  selectedDeviceId?: string;\n  title?: string;\n  onChange?: (deviceId: string) => void;\n  icon: string;\n}) => {\n  const { devices = [], selectedDeviceId, title, onChange, icon } = props;\n  const { deviceList, selectedDeviceInfo, selectedIndex } = useDeviceList(\n    devices,\n    selectedDeviceId,\n  );\n\n  const handleSelect = useCallback(\n    (index: number) => {\n      const deviceId = deviceList[index].deviceId;\n      if (deviceId !== 'default') {\n        onChange?.(deviceId);\n      }\n    },\n    [deviceList, onChange],\n  );\n\n  return (\n    <div className=\"str-video__device-settings__device-kind\">\n      <div className=\"str-video__device-settings__device-selector-title\">\n        {title}\n      </div>\n      <DropDownSelect\n        icon={icon}\n        defaultSelectedIndex={selectedIndex}\n        defaultSelectedLabel={selectedDeviceInfo.label}\n        handleSelect={handleSelect}\n      >\n        {deviceList.map((device) => (\n          <DropDownSelectOption\n            key={device.deviceId}\n            icon={icon}\n            label={device.label}\n            selected={device.isSelected}\n          />\n        ))}\n      </DropDownSelect>\n    </div>\n  );\n};\n\nexport const DeviceSelector = (props: {\n  devices: MediaDeviceInfo[];\n  icon: string;\n  type: DeviceSelectorType;\n  selectedDeviceId?: string;\n  title?: string;\n  onChange?: (deviceId: string) => void;\n  visualType?: 'list' | 'dropdown';\n}) => {\n  const { visualType = 'list', icon, ...rest } = props;\n\n  if (visualType === 'list') {\n    return <DeviceSelectorList {...rest} />;\n  }\n  return <DeviceSelectorDropdown {...rest} icon={icon} />;\n};\n","import { DeviceSelector } from './DeviceSelector';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type DeviceSelectorVideoProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n};\n\nexport const DeviceSelectorVideo = ({\n  title,\n  visualType,\n}: DeviceSelectorVideoProps) => {\n  const { useCameraState } = useCallStateHooks();\n  const { camera, devices, selectedDevice } = useCameraState();\n\n  return (\n    <DeviceSelector\n      devices={devices || []}\n      type=\"videoinput\"\n      selectedDeviceId={selectedDevice}\n      onChange={async (deviceId) => {\n        await camera.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"camera\"\n    />\n  );\n};\n","import { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { CompositeButton, IconButtonWithMenuProps } from '../Button';\nimport { DeviceSelectorAudioInput } from '../DeviceSettings';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\nimport {\n  createCallControlHandler,\n  PropsWithErrorHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ToggleAudioPreviewButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  >\n>;\n\nexport const ToggleAudioPreviewButton = (\n  props: ToggleAudioPreviewButtonProps,\n) => {\n  const { caption, onMenuToggle, ...restCompositeButtonProps } = props;\n  const { t } = useI18n();\n  const { useMicrophoneState } = useCallStateHooks();\n  const {\n    microphone,\n    optimisticIsMute,\n    hasBrowserPermission,\n    isPromptingPermission,\n  } = useMicrophoneState();\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, () =>\n    microphone.toggle(),\n  );\n\n  return (\n    <WithTooltip\n      title={\n        !hasBrowserPermission\n          ? t('Check your browser audio permissions')\n          : (caption ?? t('Mic'))\n      }\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        active={optimisticIsMute}\n        caption={caption}\n        className={clsx(\n          !hasBrowserPermission && 'str-video__device-unavailable',\n        )}\n        variant=\"secondary\"\n        disabled={!hasBrowserPermission}\n        data-testid={\n          optimisticIsMute\n            ? 'preview-audio-unmute-button'\n            : 'preview-audio-mute-button'\n        }\n        onClick={handleClick}\n        {...restCompositeButtonProps}\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon={!optimisticIsMute ? 'mic' : 'mic-off'} />\n        {!hasBrowserPermission && (\n          <span\n            className=\"str-video__no-media-permission\"\n            title={t('Check your browser audio permissions')}\n            children=\"!\"\n          />\n        )}\n        {isPromptingPermission && (\n          <span\n            className=\"str-video__pending-permission\"\n            title={t('Waiting for permission')}\n            children=\"?\"\n          />\n        )}\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n\nexport type ToggleAudioPublishingButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  >\n>;\n\nexport const ToggleAudioPublishingButton = (\n  props: ToggleAudioPublishingButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = <DeviceSelectorAudioInput visualType=\"list\" />,\n    menuPlacement = 'top',\n    onMenuToggle,\n    ...restCompositeButtonProps\n  } = props;\n\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SEND_AUDIO);\n\n  const { useMicrophoneState } = useCallStateHooks();\n  const {\n    microphone,\n    optimisticIsMute,\n    hasBrowserPermission,\n    isPromptingPermission,\n  } = useMicrophoneState();\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await microphone.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SEND_AUDIO]}>\n      <PermissionNotification\n        permission={OwnCapability.SEND_AUDIO}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now speak.')}\n        messageAwaitingApproval={t('Awaiting for an approval to speak.')}\n        messageRevoked={t('You can no longer speak.')}\n      >\n        <WithTooltip\n          title={\n            !hasPermission\n              ? t('You have no permission to share your audio')\n              : !hasBrowserPermission\n                ? t('Check your browser mic permissions')\n                : (caption ?? t('Mic'))\n          }\n          tooltipDisabled={tooltipDisabled}\n        >\n          <CompositeButton\n            active={optimisticIsMute}\n            caption={caption}\n            variant=\"secondary\"\n            disabled={!hasBrowserPermission || !hasPermission}\n            data-testid={\n              optimisticIsMute ? 'audio-unmute-button' : 'audio-mute-button'\n            }\n            onClick={handleClick}\n            Menu={Menu}\n            menuPlacement={menuPlacement}\n            menuOffset={16}\n            {...restCompositeButtonProps}\n            onMenuToggle={(shown) => {\n              setTooltipDisabled(shown);\n              onMenuToggle?.(shown);\n            }}\n          >\n            <Icon icon={optimisticIsMute ? 'mic-off' : 'mic'} />\n            {(!hasBrowserPermission || !hasPermission) && (\n              <span className=\"str-video__no-media-permission\">!</span>\n            )}\n            {isPromptingPermission && (\n              <span\n                className=\"str-video__pending-permission\"\n                title={t('Waiting for permission')}\n              >\n                ?\n              </span>\n            )}\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n","import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { MenuToggle, MenuVisualType, ToggleMenuButtonProps } from '../Menu';\nimport {\n  DeviceSelectorAudioInput,\n  DeviceSelectorAudioOutput,\n} from './DeviceSelectorAudio';\nimport { DeviceSelectorVideo } from './DeviceSelectorVideo';\nimport { IconButton } from '../Button';\n\nexport type DeviceSettingsProps = {\n  visualType?: MenuVisualType;\n};\n\nexport const DeviceSettings = ({\n  visualType = MenuVisualType.MENU,\n}: DeviceSettingsProps) => {\n  return (\n    <MenuToggle\n      placement=\"bottom-end\"\n      ToggleButton={ToggleDeviceSettingsMenuButton}\n      visualType={visualType}\n    >\n      <Menu />\n    </MenuToggle>\n  );\n};\n\nconst Menu = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__device-settings\">\n      <DeviceSelectorVideo title={t('Select a Camera')} />\n      <DeviceSelectorAudioInput title={t('Select a Mic')} />\n      <DeviceSelectorAudioOutput title={t('Select Speakers')} />\n    </div>\n  );\n};\n\nconst ToggleDeviceSettingsMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function ToggleDeviceSettingsMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <IconButton\n      className={clsx('str-video__device-settings__button', {\n        'str-video__device-settings__button--active': menuShown,\n      })}\n      title={t('Toggle device menu')}\n      icon=\"device-settings\"\n      ref={ref}\n    />\n  );\n});\n","import {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { CompositeButton, IconButtonWithMenuProps } from '../Button/';\nimport { DeviceSelectorVideo } from '../DeviceSettings';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\nimport {\n  createCallControlHandler,\n  PropsWithErrorHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ToggleVideoPreviewButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  >\n>;\n\nexport const ToggleVideoPreviewButton = (\n  props: ToggleVideoPreviewButtonProps,\n) => {\n  const {\n    caption,\n    Menu = DeviceSelectorVideo,\n    menuPlacement = 'top',\n    onMenuToggle,\n    ...restCompositeButtonProps\n  } = props;\n  const { t } = useI18n();\n  const { useCameraState } = useCallStateHooks();\n  const {\n    camera,\n    optimisticIsMute,\n    hasBrowserPermission,\n    isPromptingPermission,\n  } = useCameraState();\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, () => camera.toggle());\n\n  return (\n    <WithTooltip\n      title={\n        !hasBrowserPermission\n          ? t('Check your browser video permissions')\n          : (caption ?? t('Video'))\n      }\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        active={optimisticIsMute}\n        caption={caption}\n        className={clsx(\n          !hasBrowserPermission && 'str-video__device-unavailable',\n        )}\n        variant=\"secondary\"\n        data-testid={\n          optimisticIsMute\n            ? 'preview-video-unmute-button'\n            : 'preview-video-mute-button'\n        }\n        onClick={handleClick}\n        disabled={!hasBrowserPermission}\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        {...restCompositeButtonProps}\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon={!optimisticIsMute ? 'camera' : 'camera-off'} />\n        {!hasBrowserPermission && (\n          <span\n            className=\"str-video__no-media-permission\"\n            title={t('Check your browser video permissions')}\n            children=\"!\"\n          />\n        )}\n        {isPromptingPermission && (\n          <span\n            className=\"str-video__pending-permission\"\n            title={t('Waiting for permission')}\n            children=\"?\"\n          />\n        )}\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n\ntype ToggleVideoPublishingButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  >\n>;\n\nexport const ToggleVideoPublishingButton = (\n  props: ToggleVideoPublishingButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = <DeviceSelectorVideo visualType=\"list\" />,\n    menuPlacement = 'top',\n    onMenuToggle,\n    ...restCompositeButtonProps\n  } = props;\n\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SEND_VIDEO);\n\n  const { useCameraState, useCallSettings } = useCallStateHooks();\n  const {\n    camera,\n    optimisticIsMute,\n    hasBrowserPermission,\n    isPromptingPermission,\n  } = useCameraState();\n  const callSettings = useCallSettings();\n  const isPublishingVideoAllowed = callSettings?.video.enabled;\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await camera.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SEND_VIDEO]}>\n      <PermissionNotification\n        permission={OwnCapability.SEND_VIDEO}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now share your video.')}\n        messageAwaitingApproval={t(\n          'Awaiting for an approval to share your video.',\n        )}\n        messageRevoked={t('You can no longer share your video.')}\n      >\n        <WithTooltip\n          title={\n            !hasPermission\n              ? t('You have no permission to share your video')\n              : !hasBrowserPermission\n                ? t('Check your browser video permissions')\n                : !isPublishingVideoAllowed\n                  ? t('Video publishing is disabled by the system')\n                  : caption || t('Video')\n          }\n          tooltipDisabled={tooltipDisabled}\n        >\n          <CompositeButton\n            active={optimisticIsMute}\n            caption={caption}\n            variant=\"secondary\"\n            disabled={\n              !hasBrowserPermission ||\n              !hasPermission ||\n              !isPublishingVideoAllowed\n            }\n            data-testid={\n              optimisticIsMute ? 'video-unmute-button' : 'video-mute-button'\n            }\n            onClick={handleClick}\n            Menu={Menu}\n            menuPlacement={menuPlacement}\n            menuOffset={16}\n            {...restCompositeButtonProps}\n            onMenuToggle={(shown) => {\n              setTooltipDisabled(shown);\n              onMenuToggle?.(shown);\n            }}\n          >\n            <Icon icon={optimisticIsMute ? 'camera-off' : 'camera'} />\n            {(!hasBrowserPermission ||\n              !hasPermission ||\n              !isPublishingVideoAllowed) && (\n              <span className=\"str-video__no-media-permission\">!</span>\n            )}\n            {isPromptingPermission && (\n              <span\n                className=\"str-video__pending-permission\"\n                title={t('Waiting for permission')}\n              >\n                ?\n              </span>\n            )}\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n","import { forwardRef, MouseEventHandler, useCallback } from 'react';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\n\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\n\nimport { IconButton } from '../Button';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\n\nconst EndCallMenu = (props: {\n  onLeave: MouseEventHandler<HTMLButtonElement>;\n  onEnd: MouseEventHandler<HTMLButtonElement>;\n}) => {\n  const { onLeave, onEnd } = props;\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__end-call__confirmation\">\n      <button\n        className=\"str-video__button str-video__end-call__leave\"\n        type=\"button\"\n        data-testid=\"leave-call-button\"\n        onClick={onLeave}\n      >\n        <Icon\n          className=\"str-video__button__icon str-video__end-call__leave-icon\"\n          icon=\"logout\"\n        />\n        {t('Leave call')}\n      </button>\n      <Restricted requiredGrants={[OwnCapability.END_CALL]}>\n        <button\n          className=\"str-video__button str-video__end-call__end\"\n          type=\"button\"\n          data-testid=\"end-call-for-all-button\"\n          onClick={onEnd}\n        >\n          <Icon\n            className=\"str-video__button__icon str-video__end-call__end-icon\"\n            icon=\"call-end\"\n          />\n          {t('End call for all')}\n        </button>\n      </Restricted>\n    </div>\n  );\n};\n\nconst CancelCallToggleMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function CancelCallToggleMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <WithTooltip title={t('Leave call')} tooltipDisabled={menuShown}>\n      <IconButton\n        icon={menuShown ? 'close' : 'call-end'}\n        variant={menuShown ? 'active' : 'danger'}\n        data-testid=\"leave-call-button\"\n        ref={ref}\n      />\n    </WithTooltip>\n  );\n});\n\nexport type CancelCallButtonProps = {\n  disabled?: boolean;\n  caption?: string;\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n  onLeave?: () => void;\n};\n\nexport const CancelCallConfirmButton = ({\n  onClick,\n  onLeave,\n}: CancelCallButtonProps) => {\n  const call = useCall();\n\n  const handleLeave: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.leave();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n\n  const handleEndCall: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.endCall();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n\n  return (\n    <MenuToggle placement=\"top-start\" ToggleButton={CancelCallToggleMenuButton}>\n      <EndCallMenu onEnd={handleEndCall} onLeave={handleLeave} />\n    </MenuToggle>\n  );\n};\n\nexport const CancelCallButton = ({\n  disabled,\n  caption,\n  onClick,\n  onLeave,\n}: CancelCallButtonProps) => {\n  const call = useCall();\n  const { t } = useI18n();\n  const handleClick: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.leave();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n  return (\n    <IconButton\n      disabled={disabled}\n      icon=\"call-end\"\n      variant=\"danger\"\n      title={caption ?? t('Leave call')}\n      data-testid=\"cancel-call-button\"\n      onClick={handleClick}\n    />\n  );\n};\n","import { lazy, ReactNode, Suspense, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport {\n  AggregatedStatsReport,\n  CallStatsReport,\n  SfuModels,\n} from '@stream-io/video-client';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { useFloating, useHover, useInteractions } from '@floating-ui/react';\nimport { Icon } from '../Icon';\n\nconst CallStatsLatencyChart = lazy(() => import('./CallStatsLatencyChart'));\n\nenum Status {\n  GOOD = 'Good',\n  OK = 'Ok',\n  BAD = 'Bad',\n}\n\nexport type CallStatsProps = {\n  latencyLowBound?: number;\n  latencyHighBound?: number;\n  showCodecInfo?: boolean;\n  LatencyChartSuspenseFallback?: ReactNode;\n};\n\nexport const CallStats = (props: CallStatsProps) => {\n  const {\n    latencyLowBound = 75,\n    latencyHighBound = 400,\n    showCodecInfo = false,\n    LatencyChartSuspenseFallback = null,\n  } = props;\n  const [latencyBuffer, setLatencyBuffer] = useState<\n    Array<{ x: number; y: number }>\n  >(() => {\n    const now = Date.now();\n    return Array.from({ length: 20 }, (_, i) => ({ x: now + i, y: 0 }));\n  });\n\n  const { t } = useI18n();\n  const [publishBitrate, setPublishBitrate] = useState('-');\n  const [subscribeBitrate, setSubscribeBitrate] = useState('-');\n  const previousStats = useRef<CallStatsReport>(undefined);\n  const { useCallStatsReport } = useCallStateHooks();\n  const callStatsReport = useCallStatsReport();\n\n  useEffect(() => {\n    if (!callStatsReport) return;\n    if (!previousStats.current) {\n      previousStats.current = callStatsReport;\n      return;\n    }\n    const previousCallStatsReport = previousStats.current;\n    setPublishBitrate(() => {\n      return calculatePublishBitrate(previousCallStatsReport, callStatsReport);\n    });\n    setSubscribeBitrate(() => {\n      return calculateSubscribeBitrate(\n        previousCallStatsReport,\n        callStatsReport,\n      );\n    });\n\n    setLatencyBuffer((latencyBuf) => {\n      const newLatencyBuffer = latencyBuf.slice(-19);\n      newLatencyBuffer.push({\n        x: callStatsReport.timestamp,\n        y: callStatsReport.publisherStats.averageRoundTripTimeInMs,\n      });\n      return newLatencyBuffer;\n    });\n\n    previousStats.current = callStatsReport;\n  }, [callStatsReport]);\n\n  const latencyComparison = {\n    lowBound: latencyLowBound,\n    highBound: latencyHighBound,\n    value: callStatsReport?.publisherStats.averageRoundTripTimeInMs || 0,\n  };\n\n  return (\n    <div className=\"str-video__call-stats\">\n      {callStatsReport && (\n        <>\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon\n                className=\"str-video__call-stats__icon\"\n                icon=\"call-latency\"\n              />\n              {t('Call Latency')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t(\n                'Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.',\n              )}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__latencychart\">\n            <Suspense fallback={LatencyChartSuspenseFallback}>\n              <CallStatsLatencyChart values={latencyBuffer} />\n            </Suspense>\n          </div>\n\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon\n                className=\"str-video__call-stats__icon\"\n                icon=\"network-quality\"\n              />\n              {t('Call performance')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t('Review the key data points below to assess call performance')}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__card-container\">\n            <StatCard label={t('Region')} value={callStatsReport.datacenter} />\n            <StatCard\n              label={t('Latency')}\n              value={`${callStatsReport.publisherStats.averageRoundTripTimeInMs} ms.`}\n              comparison={latencyComparison}\n            />\n            <StatCard\n              label={t('Receive jitter')}\n              value={`${callStatsReport.subscriberStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...latencyComparison,\n                value: callStatsReport.subscriberStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={t('Publish jitter')}\n              value={`${callStatsReport.publisherStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...latencyComparison,\n                value: callStatsReport.publisherStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={`${t('Publish resolution')}${showCodecInfo ? formatCodec(callStatsReport) : ''}`}\n              value={toFrameSize(callStatsReport.publisherStats)}\n            />\n            <StatCard\n              label={t('Publish quality drop reason')}\n              value={callStatsReport.publisherStats.qualityLimitationReasons}\n            />\n            <StatCard\n              label={t('Receiving resolution')}\n              value={toFrameSize(callStatsReport.subscriberStats)}\n            />\n            <StatCard\n              label={t('Receive quality drop reason')}\n              value={callStatsReport.subscriberStats.qualityLimitationReasons}\n            />\n            <StatCard label={t('Publish bitrate')} value={publishBitrate} />\n            <StatCard label={t('Receiving bitrate')} value={subscribeBitrate} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst StatCardExplanation = (props: { description: string }) => {\n  const { description } = props;\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { refs, floatingStyles, context } = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen,\n  });\n\n  const hover = useHover(context);\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([hover]);\n\n  return (\n    <>\n      <div\n        className=\"str-video__call-explanation\"\n        ref={refs.setReference}\n        {...getReferenceProps()}\n      >\n        <Icon className=\"str-video__call-explanation__icon\" icon=\"info\" />\n      </div>\n      {isOpen && (\n        <div\n          className=\"str-video__call-explanation__description\"\n          ref={refs.setFloating}\n          style={floatingStyles}\n          {...getFloatingProps()}\n        >\n          {description}\n        </div>\n      )}\n    </>\n  );\n};\n\nconst StatsTag = (props: { children: ReactNode; status: Status }) => {\n  const { children, status } = props;\n  return (\n    <div\n      className={clsx('str-video__call-stats__tag', {\n        'str-video__call-stats__tag--good': status === Status.GOOD,\n        'str-video__call-stats__tag--ok': status === Status.OK,\n        'str-video__call-stats__tag--bad': status === Status.BAD,\n      })}\n    >\n      <div className=\"str-video__call-stats__tag__text\">{children}</div>\n    </div>\n  );\n};\n\nexport const StatCard = (props: {\n  label: string;\n  value: string | ReactNode;\n  description?: string;\n  comparison?: { value: number; highBound: number; lowBound: number };\n}) => {\n  const { label, value, description, comparison } = props;\n\n  const { t } = useI18n();\n  const status = comparison ? toStatus(comparison) : undefined;\n\n  return (\n    <div className=\"str-video__call-stats__card\">\n      <div className=\"str-video__call-stats__card-content\">\n        <div className=\"str-video__call-stats__card-label\">\n          {label}\n          {description && <StatCardExplanation description={description} />}\n        </div>\n        <div className=\"str-video__call-stats__card-value\">{value}</div>\n      </div>\n      {status && <StatsTag status={status}>{t(status)}</StatsTag>}\n    </div>\n  );\n};\n\nconst toStatus = (config: {\n  value: number;\n  lowBound: number;\n  highBound: number;\n}): Status => {\n  const { value, lowBound, highBound } = config;\n  if (value <= lowBound) return Status.GOOD;\n  if (value >= lowBound && value <= highBound) return Status.OK;\n  if (value >= highBound) return Status.BAD;\n  return Status.GOOD;\n};\n\nconst toFrameSize = (stats: AggregatedStatsReport) => {\n  const {\n    highestFrameWidth: w,\n    highestFrameHeight: h,\n    highestFramesPerSecond: fps,\n  } = stats;\n  let size = `-`;\n  if (w && h) {\n    size = `${w}x${h}`;\n    if (fps) {\n      size += `@${fps}fps.`;\n    }\n  }\n  return size;\n};\n\nconst formatCodec = (callStatsReport: CallStatsReport): string => {\n  const { codecPerTrackType } = callStatsReport.publisherStats;\n  if (!codecPerTrackType || !codecPerTrackType[SfuModels.TrackType.VIDEO]) {\n    return '';\n  }\n  const [, name] = codecPerTrackType[SfuModels.TrackType.VIDEO].split('/');\n  return name ? ` (${name})` : '';\n};\n\nconst calculatePublishBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const {\n    publisherStats: {\n      totalBytesSent: previousTotalBytesSent,\n      timestamp: previousTimestamp,\n    },\n  } = previousCallStatsReport;\n\n  const {\n    publisherStats: { totalBytesSent, timestamp },\n  } = callStatsReport;\n\n  const bytesSent = totalBytesSent - previousTotalBytesSent;\n  const timeElapsed = timestamp - previousTimestamp;\n  return `${((bytesSent * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst calculateSubscribeBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const {\n    subscriberStats: {\n      totalBytesReceived: previousTotalBytesReceived,\n      timestamp: previousTimestamp,\n    },\n  } = previousCallStatsReport;\n\n  const {\n    subscriberStats: { totalBytesReceived, timestamp },\n  } = callStatsReport;\n\n  const bytesReceived = totalBytesReceived - previousTotalBytesReceived;\n  const timeElapsed = timestamp - previousTimestamp;\n  return `${((bytesReceived * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n","import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\n\nimport { CallStats } from '../CallStats';\nimport { CompositeButton } from '../Button/';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport { Icon } from '../Icon';\n\nexport type CallStatsButtonProps = {\n  caption?: string;\n};\n\nexport const CallStatsButton = () => (\n  <MenuToggle placement=\"top-end\" ToggleButton={ToggleMenuButton}>\n    <CallStats />\n  </MenuToggle>\n);\n\nconst ToggleMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps<HTMLDivElement> & CallStatsButtonProps\n>(function ToggleMenuButton(props, ref) {\n  const { t } = useI18n();\n  const { caption, menuShown } = props;\n\n  return (\n    <CompositeButton\n      ref={ref}\n      active={menuShown}\n      caption={caption}\n      title={caption || t('Statistics')}\n      data-testid=\"stats-button\"\n    >\n      <Icon icon=\"stats\" />\n    </CompositeButton>\n  );\n});\n","import clsx from 'clsx';\nimport { ComponentProps, ComponentType, forwardRef } from 'react';\nimport { useConnectedUser, useI18n } from '@stream-io/video-react-bindings';\nimport {\n  hasAudio,\n  hasVideo,\n  isPinned,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { IconButton } from '../Button';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport { WithTooltip } from '../Tooltip';\nimport { Avatar } from '../Avatar';\nimport { ParticipantActionsContextMenu } from '../../core/components/ParticipantView/ParticipantActionsContextMenu';\nimport { ParticipantViewContext } from '../../core/components/ParticipantView/ParticipantViewContext';\n\ntype CallParticipantListingItemProps = {\n  /** Participant object be rendered */\n  participant: StreamVideoParticipant;\n  /** Custom component used to display participant's name */\n  DisplayName?: ComponentType<{ participant: StreamVideoParticipant }>;\n};\nexport const CallParticipantListingItem = ({\n  participant,\n  DisplayName = DefaultDisplayName,\n}: CallParticipantListingItemProps) => {\n  const isAudioOn = hasAudio(participant);\n  const isVideoOn = hasVideo(participant);\n  const isPinnedOn = isPinned(participant);\n\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__participant-listing-item\">\n      <Avatar name={participant.name} imageSrc={participant.image} />\n      <DisplayName participant={participant} />\n      <div className=\"str-video__participant-listing-item__media-indicator-group\">\n        <MediaIndicator\n          title={isAudioOn ? t('Microphone on') : t('Microphone off')}\n          className={clsx(\n            'str-video__participant-listing-item__icon',\n            `str-video__participant-listing-item__icon-${\n              isAudioOn ? 'mic' : 'mic-off'\n            }`,\n          )}\n        />\n        <MediaIndicator\n          title={isVideoOn ? t('Camera on') : t('Camera off')}\n          className={clsx(\n            'str-video__participant-listing-item__icon',\n            `str-video__participant-listing-item__icon-${\n              isVideoOn ? 'camera' : 'camera-off'\n            }`,\n          )}\n        />\n        {isPinnedOn && (\n          <MediaIndicator\n            title={t('Pinned')}\n            className={clsx(\n              'str-video__participant-listing-item__icon',\n              'str-video__participant-listing-item__icon-pinned',\n            )}\n          />\n        )}\n\n        <MenuToggle placement=\"bottom-end\" ToggleButton={ToggleButton}>\n          <ParticipantViewContext.Provider\n            value={{ participant, trackType: 'none' }}\n          >\n            <ParticipantActionsContextMenu />\n          </ParticipantViewContext.Provider>\n        </MenuToggle>\n      </div>\n    </div>\n  );\n};\n\nconst MediaIndicator = (props: ComponentProps<'div'>) => (\n  <WithTooltip {...props} />\n);\n\ntype DisplayNameProps = {\n  /** Participant object that provides the data from which display name can be generated */\n  participant: StreamVideoParticipant;\n};\n\nconst DefaultDisplayName = ({ participant }: DisplayNameProps) => {\n  const connectedUser = useConnectedUser();\n  const { t } = useI18n();\n\n  const meFlag = participant.userId === connectedUser?.id ? t('Me') : '';\n  const nameOrId = participant.name || participant.userId || t('Unknown');\n  let displayName;\n  if (!participant.name) {\n    displayName = meFlag || nameOrId || t('Unknown');\n  } else if (meFlag) {\n    displayName = `${nameOrId} (${meFlag})`;\n  } else {\n    displayName = nameOrId;\n  }\n\n  return (\n    <WithTooltip\n      className=\"str-video__participant-listing-item__display-name\"\n      title={displayName}\n    >\n      {displayName}\n    </WithTooltip>\n  );\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"ellipsis\" ref={ref} />;\n  },\n);\n","import {\n  Dispatch,\n  forwardRef,\n  SetStateAction,\n  useCallback,\n  useState,\n} from 'react';\nimport {\n  Restricted,\n  useCall,\n  useCallStateHooks,\n} from '@stream-io/video-react-bindings';\nimport {\n  name,\n  OwnCapability,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\n\nimport { BlockedUserListing } from './BlockedUserListing';\nimport { IconButton, TextButton } from '../Button';\nimport { CallParticipantListHeader } from './CallParticipantListHeader';\nimport { CallParticipantListing } from './CallParticipantListing';\nimport { EmptyParticipantSearchList } from './EmptyParticipantSearchList';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { SearchInput, SearchResults } from '../Search';\nimport { useSearch, UseSearchParams } from '../Search/hooks';\nimport {\n  GenericMenu,\n  GenericMenuButtonItem,\n  MenuToggle,\n  ToggleMenuButtonProps,\n} from '../Menu';\n\ntype CallParticipantListProps = {\n  /** Click event listener function to be invoked in order to dismiss/hide the CallParticipantsList from the UI */\n  onClose: () => void;\n  /** Custom function to override the searching logic of active participants */\n  activeUsersSearchFn?: UseSearchParams<StreamVideoParticipant>['searchFn'];\n  /** Custom function to override the searching logic of blocked users */\n  blockedUsersSearchFn?: UseSearchParams<string>['searchFn'];\n  /** Interval in ms, during which the participant search calls will be debounced. The default value is 200ms. */\n  debounceSearchInterval?: number;\n};\n\nconst UserListTypes = {\n  active: 'Active users',\n  blocked: 'Blocked users',\n} as const;\n\nconst DEFAULT_DEBOUNCE_SEARCH_INTERVAL = 200 as const;\n\nexport const CallParticipantsList = ({\n  onClose,\n  activeUsersSearchFn,\n  blockedUsersSearchFn,\n  debounceSearchInterval,\n}: CallParticipantListProps) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [userListType, setUserListType] =\n    useState<keyof typeof UserListTypes>('active');\n\n  const exitSearch = useCallback(() => setSearchQuery(''), []);\n\n  return (\n    <div className=\"str-video__participant-list\">\n      <CallParticipantListHeader onClose={onClose} />\n      <SearchInput\n        value={searchQuery}\n        onChange={({ currentTarget }) => setSearchQuery(currentTarget.value)}\n        exitSearch={exitSearch}\n        isActive={!!searchQuery}\n      />\n      <CallParticipantListContentHeader\n        userListType={userListType}\n        setUserListType={setUserListType}\n      />\n      <div className=\"str-video__participant-list__content\">\n        {userListType === 'active' && (\n          <ActiveUsersSearchResults\n            searchQuery={searchQuery}\n            activeUsersSearchFn={activeUsersSearchFn}\n            debounceSearchInterval={debounceSearchInterval}\n          />\n        )}\n        {userListType === 'blocked' && (\n          <BlockedUsersSearchResults\n            searchQuery={searchQuery}\n            blockedUsersSearchFn={blockedUsersSearchFn}\n            debounceSearchInterval={debounceSearchInterval}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst CallParticipantListContentHeader = ({\n  userListType,\n  setUserListType,\n}: {\n  userListType: keyof typeof UserListTypes;\n  setUserListType: Dispatch<SetStateAction<keyof typeof UserListTypes>>;\n}) => {\n  const call = useCall();\n\n  const muteAll = () => {\n    call?.muteAllUsers('audio');\n  };\n\n  return (\n    <div className=\"str-video__participant-list__content-header\">\n      <div className=\"str-video__participant-list__content-header-title\">\n        {userListType === 'active' && (\n          <Restricted\n            requiredGrants={[OwnCapability.MUTE_USERS]}\n            hasPermissionsOnly\n          >\n            <TextButton onClick={muteAll}>Mute all</TextButton>\n          </Restricted>\n        )}\n      </div>\n      <MenuToggle placement=\"bottom-end\" ToggleButton={ToggleButton}>\n        <GenericMenu>\n          {(\n            Object.keys(UserListTypes) as Array<keyof typeof UserListTypes>\n          ).map((lt) => (\n            <GenericMenuButtonItem\n              key={lt}\n              aria-selected={lt === userListType}\n              onClick={() => setUserListType(lt)}\n            >\n              {UserListTypes[lt]}\n            </GenericMenuButtonItem>\n          ))}\n        </GenericMenu>\n      </MenuToggle>\n    </div>\n  );\n};\n\nconst ActiveUsersSearchResults = ({\n  searchQuery,\n  activeUsersSearchFn: activeUsersSearchFnFromProps,\n  debounceSearchInterval = DEFAULT_DEBOUNCE_SEARCH_INTERVAL,\n}: Pick<\n  CallParticipantListProps,\n  'activeUsersSearchFn' | 'debounceSearchInterval'\n> & { searchQuery: string }) => {\n  const { useParticipants } = useCallStateHooks();\n  const participants = useParticipants({ sortBy: name });\n\n  const activeUsersSearchFn = useCallback(\n    (queryString: string) => {\n      const queryRegExp = new RegExp(queryString, 'i');\n      return Promise.resolve(\n        participants.filter((participant) => {\n          return participant.name.match(queryRegExp);\n        }),\n      );\n    },\n    [participants],\n  );\n\n  const { searchQueryInProgress, searchResults } =\n    useSearch<StreamVideoParticipant>({\n      searchFn: activeUsersSearchFnFromProps ?? activeUsersSearchFn,\n      debounceInterval: debounceSearchInterval,\n      searchQuery,\n    });\n\n  return (\n    <SearchResults<StreamVideoParticipant>\n      EmptySearchResultComponent={EmptyParticipantSearchList}\n      LoadingIndicator={LoadingIndicator}\n      searchQueryInProgress={searchQueryInProgress}\n      searchResults={searchQuery ? searchResults : participants}\n      SearchResultList={CallParticipantListing}\n    />\n  );\n};\n\nconst BlockedUsersSearchResults = ({\n  blockedUsersSearchFn: blockedUsersSearchFnFromProps,\n  debounceSearchInterval = DEFAULT_DEBOUNCE_SEARCH_INTERVAL,\n  searchQuery,\n}: Pick<\n  CallParticipantListProps,\n  'blockedUsersSearchFn' | 'debounceSearchInterval'\n> & { searchQuery: string }) => {\n  const { useCallBlockedUserIds } = useCallStateHooks();\n  const blockedUsers = useCallBlockedUserIds();\n\n  const blockedUsersSearchFn = useCallback(\n    (queryString: string) => {\n      const queryRegExp = new RegExp(queryString, 'i');\n      return Promise.resolve(\n        blockedUsers.filter((blockedUser) => {\n          return blockedUser.match(queryRegExp);\n        }),\n      );\n    },\n    [blockedUsers],\n  );\n\n  const { searchQueryInProgress, searchResults } = useSearch<string>({\n    searchFn: blockedUsersSearchFnFromProps ?? blockedUsersSearchFn,\n    debounceInterval: debounceSearchInterval,\n    searchQuery,\n  });\n\n  return (\n    <SearchResults<string>\n      EmptySearchResultComponent={EmptyParticipantSearchList}\n      LoadingIndicator={LoadingIndicator}\n      searchQueryInProgress={searchQueryInProgress}\n      searchResults={searchQuery ? searchResults : blockedUsers}\n      SearchResultList={BlockedUserListing}\n    />\n  );\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"filter\" ref={ref} />;\n  },\n);\n","import {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  NoiseCancellationSettingsModeEnum,\n  OwnCapability,\n} from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\nimport type { INoiseCancellation } from '@stream-io/audio-filters-web';\n\nexport type NoiseCancellationProviderProps = {\n  /**\n   * The noise cancellation instance to use.\n   */\n  noiseCancellation: INoiseCancellation;\n};\n\n/**\n * The Noise Cancellation API.\n */\nexport type NoiseCancellationAPI = {\n  /**\n   * A boolean providing information whether Noise Cancelling functionalities\n   * are supported on this platform and for the current user.\n   */\n  isSupported: boolean | undefined;\n  /**\n   * Provides information whether Noise Cancellation is active or not.\n   */\n  isEnabled: boolean;\n  /**\n   * Allows you to temporarily enable or disable the Noise Cancellation filters.\n   *\n   * @param enabled a boolean or a setter.\n   */\n  setEnabled: (enabled: boolean | ((value: boolean) => boolean)) => void;\n\n  /**\n   * Sets the noise suppression level (0-100).\n   *\n   * @param level 0 for no suppression, 100 for maximum suppression.\n   */\n  setSuppressionLevel: (level: number) => void;\n};\n\nconst NoiseCancellationContext = createContext<NoiseCancellationAPI | null>(\n  null,\n);\n\n/**\n * Exposes the NoiseCancellation API.\n * Throws an error if used outside <NoiseCancellationProvider />.\n */\nexport const useNoiseCancellation = (): NoiseCancellationAPI => {\n  const context = useContext(NoiseCancellationContext);\n  if (!context) {\n    throw new Error(\n      'useNoiseCancellation must be used within a NoiseCancellationProvider',\n    );\n  }\n  return context;\n};\n\nexport const NoiseCancellationProvider = (\n  props: PropsWithChildren<NoiseCancellationProviderProps>,\n) => {\n  const { children, noiseCancellation } = props;\n  const call = useCall();\n  const { useCallSettings, useHasPermissions } = useCallStateHooks();\n  const settings = useCallSettings();\n  const noiseCancellationAllowed = !!(\n    settings &&\n    settings.audio.noise_cancellation &&\n    settings.audio.noise_cancellation.mode !==\n      NoiseCancellationSettingsModeEnum.DISABLED\n  );\n\n  const hasCapability = useHasPermissions(\n    OwnCapability.ENABLE_NOISE_CANCELLATION,\n  );\n  const [isSupportedByBrowser, setIsSupportedByBrowser] = useState<boolean>();\n  useEffect(() => {\n    const result = noiseCancellation.isSupported();\n    if (typeof result === 'boolean') {\n      setIsSupportedByBrowser(result);\n    } else {\n      result\n        .then((s) => setIsSupportedByBrowser(s))\n        .catch((err) =>\n          console.error(\n            `Can't determine if noise cancellation is supported`,\n            err,\n          ),\n        );\n    }\n  }, [noiseCancellation]);\n\n  const isSupported =\n    isSupportedByBrowser && hasCapability && noiseCancellationAllowed;\n\n  const [isEnabled, setIsEnabled] = useState(false);\n  const deinit = useRef<Promise<void>>(undefined);\n  useEffect(() => {\n    if (!call || !isSupported) return;\n    noiseCancellation.isEnabled().then((e) => setIsEnabled(e));\n    const unsubscribe = noiseCancellation.on('change', (v) => setIsEnabled(v));\n    const init = (deinit.current || Promise.resolve())\n      .then(() => noiseCancellation.init())\n      .then(() => call.microphone.enableNoiseCancellation(noiseCancellation))\n      .catch((e) => console.error(`Can't initialize noise cancellation`, e));\n\n    return () => {\n      deinit.current = init\n        .then(() => call.microphone.disableNoiseCancellation())\n        .then(() => noiseCancellation.dispose())\n        .then(() => unsubscribe());\n    };\n  }, [call, isSupported, noiseCancellation]);\n\n  const contextValue = useMemo<NoiseCancellationAPI>(\n    () => ({\n      isSupported,\n      isEnabled,\n      setSuppressionLevel: (level) => {\n        if (!noiseCancellation) return;\n        noiseCancellation.setSuppressionLevel(level);\n      },\n      setEnabled: (enabledOrSetter) => {\n        if (!noiseCancellation) return;\n        const enable =\n          typeof enabledOrSetter === 'function'\n            ? enabledOrSetter(isEnabled)\n            : enabledOrSetter;\n        if (enable) {\n          noiseCancellation.enable();\n        } else {\n          noiseCancellation.disable();\n        }\n      },\n    }),\n    [isEnabled, isSupported, noiseCancellation],\n  );\n  return (\n    <NoiseCancellationContext.Provider value={contextValue}>\n      {children}\n    </NoiseCancellationContext.Provider>\n  );\n};\n","import { CallingState, UserResponse } from '@stream-io/video-client';\nimport {\n  useCall,\n  useCallStateHooks,\n  useConnectedUser,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { Avatar } from '../Avatar';\nimport { RingingCallControls } from './RingingCallControls';\n\nconst CALLING_STATE_TO_LABEL: Record<CallingState, string> = {\n  [CallingState.JOINING]: 'Joining',\n  [CallingState.RINGING]: 'Ringing',\n  [CallingState.MIGRATING]: 'Migrating',\n  [CallingState.RECONNECTING]: 'Re-connecting',\n  [CallingState.RECONNECTING_FAILED]: 'Failed',\n  [CallingState.OFFLINE]: 'No internet connection',\n  [CallingState.IDLE]: '',\n  [CallingState.UNKNOWN]: '',\n  [CallingState.JOINED]: 'Joined',\n  [CallingState.LEFT]: 'Left call',\n};\n\nexport type RingingCallProps = {\n  /**\n   * Whether to include the current user in the list of members to show.\n   * @default false.\n   */\n  includeSelf?: boolean;\n\n  /**\n   * The maximum number of members to show.\n   * @default 3.\n   */\n  totalMembersToShow?: number;\n};\n\nexport const RingingCall = (props: RingingCallProps) => {\n  const { includeSelf = false, totalMembersToShow = 3 } = props;\n  const call = useCall();\n  const { t } = useI18n();\n  const { useCallCallingState, useCallMembers } = useCallStateHooks();\n  const callingState = useCallCallingState();\n  const members = useCallMembers();\n  const connectedUser = useConnectedUser();\n\n  if (!call) return null;\n\n  // take the first N members to show their avatars\n  const membersToShow: UserResponse[] = (members || [])\n    .slice(0, totalMembersToShow)\n    .map(({ user }) => user)\n    .filter((user) => user.id !== connectedUser?.id || includeSelf);\n  if (\n    includeSelf &&\n    !membersToShow.find((user) => user.id === connectedUser?.id)\n  ) {\n    // if the current user is not in the initial batch of members,\n    // replace the first item in membersToShow array with the current user\n    const self = members.find(({ user }) => user.id === connectedUser?.id);\n    if (self) {\n      membersToShow.splice(0, 1, self.user);\n    }\n  }\n\n  const callingStateLabel = CALLING_STATE_TO_LABEL[callingState];\n\n  return (\n    <div className=\"str-video__call-panel str-video__call-panel--ringing\">\n      <div className=\"str-video__call-panel__members-list\">\n        {membersToShow.map((user) => (\n          <div key={user.id} className=\"str-video__call-panel__member-box\">\n            <Avatar name={user.name} imageSrc={user.image} />\n            {user.name && (\n              <div className=\"str-video__member_details\">\n                <span className=\"str-video__member_name\">{user.name}</span>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {callingStateLabel && (\n        <div className=\"str-video__call-panel__calling-state-label\">\n          {t(callingStateLabel)}\n        </div>\n      )}\n\n      {[CallingState.RINGING, CallingState.JOINING].includes(callingState) && (\n        <RingingCallControls />\n      )}\n    </div>\n  );\n};\n","import {\n  ButtonHTMLAttributes,\n  ComponentProps,\n  forwardRef,\n  Fragment,\n  PropsWithChildren,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  OwnCapability,\n  PermissionRequestEvent,\n  UserResponse,\n} from '@stream-io/video-client';\nimport {\n  TranslatorFunction,\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nconst byNameOrId = (a: UserResponse, b: UserResponse) => {\n  if (a.name && b.name && a.name < b.name) return -1;\n  if (a.name && b.name && a.name > b.name) return 1;\n  if (a.id < b.id) return -1;\n  if (a.id > b.id) return 1;\n  return 0;\n};\n\ntype HandleUpdatePermission = (\n  request: PermissionRequestEvent,\n  type: 'grant' | 'revoke' | 'dismiss',\n) => () => Promise<void>;\n\nexport const PermissionRequests = () => {\n  const call = useCall();\n  const { useLocalParticipant, useHasPermissions } = useCallStateHooks();\n  const localParticipant = useLocalParticipant();\n  const [expanded, setExpanded] = useState(false);\n  const [permissionRequests, setPermissionRequests] = useState<\n    PermissionRequestEvent[]\n  >([]);\n  const canUpdateCallPermissions = useHasPermissions(\n    OwnCapability.UPDATE_CALL_PERMISSIONS,\n  );\n\n  const localUserId = localParticipant?.userId;\n  useEffect(() => {\n    if (!call || !canUpdateCallPermissions) return;\n    return call.on('call.permission_request', (event) => {\n      if (event.user.id !== localUserId) {\n        setPermissionRequests((requests) =>\n          [...requests, event].sort((a, b) => byNameOrId(a.user, b.user)),\n        );\n      }\n    });\n  }, [call, canUpdateCallPermissions, localUserId]);\n\n  const handleUpdatePermission: HandleUpdatePermission = (request, type) => {\n    return async () => {\n      const { user, permissions } = request;\n      switch (type) {\n        case 'grant':\n          await call?.grantPermissions(user.id, permissions);\n          break;\n        case 'revoke':\n          await call?.revokePermissions(user.id, permissions);\n          break;\n        default:\n          break;\n      }\n      setPermissionRequests((requests) =>\n        requests.filter((r) => r !== request),\n      );\n    };\n  };\n\n  const { refs, x, y, strategy } = useFloatingUIPreset({\n    placement: 'bottom',\n    strategy: 'absolute',\n  });\n\n  // don't render anything if there are no permission requests\n  if (permissionRequests.length === 0) return null;\n\n  return (\n    <div className=\"str-video__permission-requests\" ref={refs.setReference}>\n      <div className=\"str-video__permission-requests__notification\">\n        <span className=\"str-video__permission-requests__notification__message\">\n          {permissionRequests.length} pending permission requests\n        </span>\n        <Button\n          type=\"button\"\n          onClick={() => {\n            setExpanded((e) => !e);\n          }}\n        >\n          {expanded ? 'Hide requests' : 'Show requests'}\n        </Button>\n      </div>\n      {expanded && (\n        <PermissionRequestList\n          ref={refs.setFloating}\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n          }}\n          permissionRequests={permissionRequests}\n          handleUpdatePermission={handleUpdatePermission}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type PermissionRequestListProps = ComponentProps<'div'> & {\n  permissionRequests: PermissionRequestEvent[];\n  handleUpdatePermission: HandleUpdatePermission;\n};\n\nexport const PermissionRequestList = forwardRef<\n  HTMLDivElement,\n  PermissionRequestListProps\n>(function PermissionRequestList(props, ref) {\n  const { permissionRequests, handleUpdatePermission, ...rest } = props;\n\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__permission-requests-list\" ref={ref} {...rest}>\n      {permissionRequests.map((request, reqIndex) => {\n        const { user, permissions } = request;\n        return (\n          <Fragment key={`${user.id}/${reqIndex}`}>\n            {permissions.map((permission) => (\n              <div className=\"str-video__permission-request\" key={permission}>\n                <div className=\"str-video__permission-request__message\">\n                  {messageForPermission(user.name || user.id, permission, t)}\n                </div>\n                <Button\n                  className=\"str-video__permission-request__button--allow\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'grant')}\n                >\n                  {t('Allow')}\n                </Button>\n                <Button\n                  className=\"str-video__permission-request__button--reject\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'revoke')}\n                >\n                  {t('Revoke')}\n                </Button>\n                <Button\n                  className=\"str-video__permission-request__button--reject\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'dismiss')}\n                >\n                  {t('Dismiss')}\n                </Button>\n              </div>\n            ))}\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n});\n\nconst Button = (\n  props: PropsWithChildren<ButtonHTMLAttributes<HTMLButtonElement>>,\n) => {\n  const { className, ...rest } = props;\n  return (\n    <button\n      className={clsx('str-video__permission-request__button', className)}\n      {...rest}\n    />\n  );\n};\n\nconst messageForPermission = (\n  userName: string,\n  permission: string,\n  t: TranslatorFunction,\n) => {\n  switch (permission) {\n    case OwnCapability.SEND_AUDIO:\n      return t('{{ userName }} is requesting to speak', { userName });\n    case OwnCapability.SEND_VIDEO:\n      return t('{{ userName }} is requesting to share their camera', {\n        userName,\n      });\n    case OwnCapability.SCREENSHARE:\n      return t('{{ userName }} is requesting to present their screen', {\n        userName,\n      });\n    default:\n      return t('{{ userName }} is requesting permission: {{ permission }}', {\n        userName,\n        permission,\n      });\n  }\n};\n","import { useEffect, useState } from 'react';\n\nexport type SearchController<T> = {\n  /** Flag signals that the search request is flight await the response */\n  searchQueryInProgress: boolean;\n  /** Array of items returned by the search query */\n  searchResults: T[];\n};\n\nexport type UseSearchParams<T> = {\n  /** Search function performing the search request */\n  searchFn: (searchQuery: string) => Promise<T[]>;\n  /** Debounce interval applied to the search function */\n  debounceInterval: number;\n  /** Search query string */\n  searchQuery?: string;\n};\n\nexport const useSearch = <T>({\n  debounceInterval,\n  searchFn,\n  searchQuery = '',\n}: UseSearchParams<T>): SearchController<T> => {\n  const [searchResults, setSearchResults] = useState<T[]>([]);\n  const [searchQueryInProgress, setSearchQueryInProgress] = useState(false);\n\n  useEffect(() => {\n    if (!searchQuery.length) {\n      setSearchQueryInProgress(false);\n      setSearchResults([]);\n      return;\n    }\n\n    setSearchQueryInProgress(true);\n\n    const timeout = setTimeout(async () => {\n      try {\n        const results = await searchFn(searchQuery);\n        setSearchResults(results);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setSearchQueryInProgress(false);\n      }\n    }, debounceInterval);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [debounceInterval, searchFn, searchQuery]);\n\n  return {\n    searchQueryInProgress,\n    searchResults,\n  };\n};\n","import { ElementType, HTMLProps, PropsWithChildren } from 'react';\nimport clsx from 'clsx';\n\nexport type StreamThemeProps = HTMLProps<HTMLElement> & {\n  as?: ElementType;\n};\n\nexport const StreamTheme = ({\n  as: Component = 'div',\n  className,\n  children,\n  ...props\n}: PropsWithChildren<StreamThemeProps>) => {\n  return (\n    <Component {...props} className={clsx('str-video', className)}>\n      {children}\n    </Component>\n  );\n};\n","import { ComponentType, forwardRef } from 'react';\nimport { Placement } from '@floating-ui/react';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasVideo,\n  SfuModels,\n} from '@stream-io/video-client';\nimport { useCall, useI18n } from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\n\nimport {\n  Icon,\n  IconButton,\n  MenuToggle,\n  Notification,\n  ToggleMenuButtonProps,\n} from '../../../components';\nimport { ParticipantActionsContextMenu as DefaultParticipantActionsContextMenu } from './ParticipantActionsContextMenu';\nimport { Reaction } from '../../../components/Reaction';\nimport { useParticipantViewContext } from './ParticipantViewContext';\n\nexport type DefaultParticipantViewUIProps = {\n  /**\n   * Turns on/off the status indicator icons (mute, connection quality, etc...).\n   */\n  indicatorsVisible?: boolean;\n  /**\n   * Placement of the context menu component when opened\n   */\n  menuPlacement?: Placement;\n  /**\n   * Option to show/hide menu button component\n   */\n  showMenuButton?: boolean;\n  /**\n   * Custom component to render the context menu\n   */\n  ParticipantActionsContextMenu?: ComponentType;\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"ellipsis\" ref={ref} />;\n  },\n);\n\nexport const DefaultScreenShareOverlay = () => {\n  const call = useCall();\n  const { t } = useI18n();\n\n  const stopScreenShare = () => {\n    call?.screenShare.disable();\n  };\n\n  return (\n    <div className=\"str-video__screen-share-overlay\">\n      <Icon icon=\"screen-share-off\" />\n      <span className=\"str-video__screen-share-overlay__title\">\n        {t('You are presenting your screen')}\n      </span>\n      <button\n        onClick={stopScreenShare}\n        className=\"str-video__screen-share-overlay__button\"\n      >\n        <Icon icon=\"close\" /> {t('Stop Screen Sharing')}\n      </button>\n    </div>\n  );\n};\n\nexport const DefaultParticipantViewUI = ({\n  indicatorsVisible = true,\n  menuPlacement = 'bottom-start',\n  showMenuButton = true,\n  ParticipantActionsContextMenu = DefaultParticipantActionsContextMenu,\n}: DefaultParticipantViewUIProps) => {\n  const { participant, trackType } = useParticipantViewContext();\n  const isScreenSharing = hasScreenShare(participant);\n\n  if (\n    participant.isLocalParticipant &&\n    isScreenSharing &&\n    trackType === 'screenShareTrack'\n  ) {\n    return (\n      <>\n        <DefaultScreenShareOverlay />\n        <ParticipantDetails indicatorsVisible={indicatorsVisible} />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {showMenuButton && (\n        <MenuToggle\n          strategy=\"fixed\"\n          placement={menuPlacement}\n          ToggleButton={ToggleButton}\n        >\n          <ParticipantActionsContextMenu />\n        </MenuToggle>\n      )}\n      <Reaction participant={participant} />\n      <ParticipantDetails indicatorsVisible={indicatorsVisible} />\n    </>\n  );\n};\n\nexport const ParticipantDetails = ({\n  indicatorsVisible = true,\n}: Pick<DefaultParticipantViewUIProps, 'indicatorsVisible'>) => {\n  const { participant } = useParticipantViewContext();\n  const {\n    isLocalParticipant,\n    connectionQuality,\n    pin,\n    sessionId,\n    name,\n    userId,\n  } = participant;\n  const call = useCall();\n\n  const { t } = useI18n();\n  const connectionQualityAsString =\n    !!connectionQuality &&\n    SfuModels.ConnectionQuality[connectionQuality].toLowerCase();\n\n  const hasAudioTrack = hasAudio(participant);\n  const hasVideoTrack = hasVideo(participant);\n  const canUnpin = !!pin && pin.isLocalPin;\n\n  return (\n    <>\n      <div className=\"str-video__participant-details\">\n        <span className=\"str-video__participant-details__name\">\n          {name || userId}\n\n          {indicatorsVisible && !hasAudioTrack && (\n            <span className=\"str-video__participant-details__name--audio-muted\" />\n          )}\n          {indicatorsVisible && !hasVideoTrack && (\n            <span className=\"str-video__participant-details__name--video-muted\" />\n          )}\n          {indicatorsVisible && canUnpin && (\n            // TODO: remove this monstrosity once we have a proper design\n            <span\n              title={t('Unpin')}\n              onClick={() => call?.unpin(sessionId)}\n              className=\"str-video__participant-details__name--pinned\"\n            />\n          )}\n          {indicatorsVisible && <SpeechIndicator />}\n        </span>\n      </div>\n      {indicatorsVisible && (\n        <Notification\n          isVisible={\n            isLocalParticipant &&\n            connectionQuality === SfuModels.ConnectionQuality.POOR\n          }\n          message={t('Poor connection quality')}\n        >\n          {connectionQualityAsString && (\n            <span\n              className={clsx(\n                'str-video__participant-details__connection-quality',\n                `str-video__participant-details__connection-quality--${connectionQualityAsString}`,\n              )}\n              title={connectionQualityAsString}\n            />\n          )}\n        </Notification>\n      )}\n    </>\n  );\n};\n\nexport const SpeechIndicator = () => {\n  const { participant } = useParticipantViewContext();\n  const { isSpeaking, isDominantSpeaker } = participant;\n  return (\n    <span\n      className={clsx(\n        'str-video__speech-indicator',\n        isSpeaking && 'str-video__speech-indicator--speaking',\n        isDominantSpeaker && 'str-video__speech-indicator--dominant',\n      )}\n    >\n      <span className=\"str-video__speech-indicator__bar\" />\n      <span className=\"str-video__speech-indicator__bar\" />\n      <span className=\"str-video__speech-indicator__bar\" />\n    </span>\n  );\n};\n","import {\n  ComponentType,\n  forwardRef,\n  ReactElement,\n  useMemo,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {\n  hasAudio,\n  hasScreenShareAudio,\n  hasVideo,\n  StreamVideoParticipant,\n  VideoTrackType,\n} from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nimport { Audio } from '../Audio';\nimport { Video, VideoProps } from '../Video';\nimport { useTrackElementVisibility } from '../../hooks';\nimport { DefaultParticipantViewUI } from './DefaultParticipantViewUI';\nimport { applyElementToRef, isComponentType } from '../../../utilities';\nimport { ParticipantViewContext } from './ParticipantViewContext';\n\nexport type ParticipantViewProps = {\n  /**\n   * The participant whose video/audio stream we want to play.\n   */\n  participant: StreamVideoParticipant;\n\n  /**\n   * Override the default UI for rendering participant information/actions.\n   * pass `null` if you wish to not render anything\n   * @default DefaultParticipantViewUI\n   */\n  ParticipantViewUI?: ComponentType | ReactElement | null;\n\n  /**\n   * The kind of video stream to play for the given participant.\n   * The default value is `videoTrack`.\n   * You can use `none` if you're building an audio-only call.\n   */\n  trackType?: VideoTrackType | 'none';\n\n  /**\n   * Forces participant's video to be mirrored or unmirrored. By default, video track\n   * from the local participant is mirrored, and all other videos are not mirrored.\n   */\n  mirror?: boolean;\n\n  /**\n   * This prop is only useful for advanced use-cases (for example, building your own layout).\n   * When set to `true` it will mute the give participant's audio stream on the client side.\n   * The local participant is always muted.\n   */\n  muteAudio?: boolean;\n\n  /**\n   * An object with set functions meant for exposing the video\n   * and video placeholder elements to the integrators.\n   * It's useful when you want to attach custom event handlers to these elements.\n   * - `refs.setVideoElement`\n   * - `refs.setVideoPlaceholderElement`\n   */\n  refs?: VideoProps['refs'];\n\n  /**\n   * Custom class applied to the root DOM element.\n   */\n  className?: string;\n} & Pick<VideoProps, 'VideoPlaceholder' | 'PictureInPicturePlaceholder'>;\n\nexport const ParticipantView = forwardRef<HTMLDivElement, ParticipantViewProps>(\n  function ParticipantView(\n    {\n      participant,\n      trackType = 'videoTrack',\n      mirror,\n      muteAudio,\n      refs: { setVideoElement, setVideoPlaceholderElement } = {},\n      className,\n      VideoPlaceholder,\n      PictureInPicturePlaceholder,\n      ParticipantViewUI = DefaultParticipantViewUI as ComponentType,\n    },\n    ref,\n  ) {\n    const { isLocalParticipant, isSpeaking, isDominantSpeaker, sessionId } =\n      participant;\n\n    const hasAudioTrack = hasAudio(participant);\n    const hasVideoTrack = hasVideo(participant);\n    const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n\n    const [trackedElement, setTrackedElement] = useState<HTMLDivElement | null>(\n      null,\n    );\n\n    const [contextVideoElement, setContextVideoElement] =\n      useState<HTMLVideoElement | null>(null);\n\n    const [contextVideoPlaceholderElement, setContextVideoPlaceholderElement] =\n      useState<HTMLDivElement | null>(null);\n\n    // TODO: allow to pass custom ViewportTracker instance from props\n    useTrackElementVisibility({\n      sessionId,\n      trackedElement,\n      trackType,\n    });\n\n    const { useIncomingVideoSettings } = useCallStateHooks();\n    const { isParticipantVideoEnabled } = useIncomingVideoSettings();\n\n    const participantViewContextValue = useMemo(\n      () => ({\n        participant,\n        participantViewElement: trackedElement,\n        videoElement: contextVideoElement,\n        videoPlaceholderElement: contextVideoPlaceholderElement,\n        trackType,\n      }),\n      [\n        contextVideoElement,\n        contextVideoPlaceholderElement,\n        participant,\n        trackedElement,\n        trackType,\n      ],\n    );\n\n    const videoRefs: VideoProps['refs'] = useMemo(\n      () => ({\n        setVideoElement: (element) => {\n          setVideoElement?.(element);\n          setContextVideoElement(element);\n        },\n        setVideoPlaceholderElement: (element) => {\n          setVideoPlaceholderElement?.(element);\n          setContextVideoPlaceholderElement(element);\n        },\n      }),\n      [setVideoElement, setVideoPlaceholderElement],\n    );\n\n    return (\n      <div\n        data-testid=\"participant-view\"\n        ref={(element) => {\n          applyElementToRef(ref, element);\n          setTrackedElement(element);\n        }}\n        className={clsx(\n          'str-video__participant-view',\n          isDominantSpeaker && 'str-video__participant-view--dominant-speaker',\n          isSpeaking && 'str-video__participant-view--speaking',\n          !hasVideoTrack && 'str-video__participant-view--no-video',\n          !hasAudioTrack && 'str-video__participant-view--no-audio',\n          className,\n        )}\n      >\n        <ParticipantViewContext.Provider value={participantViewContextValue}>\n          {/* mute the local participant, as we don't want to hear ourselves */}\n          {!isLocalParticipant && !muteAudio && (\n            <>\n              {hasAudioTrack && (\n                <Audio participant={participant} trackType=\"audioTrack\" />\n              )}\n              {hasScreenShareAudioTrack && (\n                <Audio\n                  participant={participant}\n                  trackType=\"screenShareAudioTrack\"\n                />\n              )}\n            </>\n          )}\n          <Video\n            VideoPlaceholder={VideoPlaceholder}\n            PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n            participant={participant}\n            trackType={trackType}\n            refs={videoRefs}\n            enabled={\n              isLocalParticipant ||\n              trackType !== 'videoTrack' ||\n              isParticipantVideoEnabled(participant.sessionId)\n            }\n            mirror={mirror}\n            autoPlay\n          />\n          {isComponentType(ParticipantViewUI) ? (\n            <ParticipantViewUI />\n          ) : (\n            ParticipantViewUI\n          )}\n        </ParticipantViewContext.Provider>\n      </div>\n    );\n  },\n);\n\nParticipantView.displayName = 'ParticipantView';\n","import { ComponentType, PropsWithChildren } from 'react';\nimport {\n  StreamCallProvider,\n  StreamCallProviderProps,\n} from '@stream-io/video-react-bindings';\n\n// re-exporting the StreamCallProvider as StreamCall\nexport const StreamCall: ComponentType<\n  PropsWithChildren<StreamCallProviderProps>\n> = StreamCallProvider;\n\nStreamCall.displayName = 'StreamCall';\n","import en from './en.json';\n\nexport const translations = { en };\n","import {\n  StreamVideoProps,\n  StreamVideoProvider,\n} from '@stream-io/video-react-bindings';\nimport { PropsWithChildren } from 'react';\nimport { translations } from '../../../translations';\n\nexport const StreamVideo = (props: PropsWithChildren<StreamVideoProps>) => {\n  return (\n    <StreamVideoProvider translationsOverrides={translations} {...props} />\n  );\n};\n\nStreamVideo.displayName = 'StreamVideo';\n","export type Filter<T> =\n  | { $and: Array<Filter<T>> }\n  | { $or: Array<Filter<T>> }\n  | { $not: Filter<T> }\n  | Conditions<T>;\n\ntype Conditions<T> = {\n  [K in keyof T]?: T[K] extends Array<infer E>\n    ? ArrayOperator<E>\n    : ScalarOperator<T[K]>;\n};\n\nexport type ScalarOperator<T> =\n  | EqOperator<T>\n  | NeqOperator<T>\n  | InOperator<T>\n  | T;\n\nexport type ArrayOperator<T> = ContainsOperator<T>;\n\nexport type EqOperator<T> = { $eq: T };\nexport type NeqOperator<T> = { $neq: T };\nexport type InOperator<T> = { $in: Array<T> };\nexport type ContainsOperator<T> = { $contains: T };\n\nexport function applyFilter<T>(obj: T, filter: Filter<T>): boolean {\n  if ('$and' in filter) {\n    return filter.$and.every((f) => applyFilter(obj, f));\n  }\n\n  if ('$or' in filter) {\n    return filter.$or.some((f) => applyFilter(obj, f));\n  }\n\n  if ('$not' in filter) {\n    return !applyFilter(obj, filter.$not);\n  }\n\n  return checkConditions(obj, filter);\n}\n\nfunction checkConditions<T>(obj: T, conditions: Conditions<T>): boolean {\n  let match = true;\n\n  for (const key of Object.keys(conditions) as Array<keyof T>) {\n    const operator = conditions[key];\n    const maybeOperator = operator && typeof operator === 'object';\n    const value = obj[key];\n\n    if (maybeOperator && '$eq' in operator) {\n      const eqOperator = operator as EqOperator<typeof value>;\n      match &&= eqOperator.$eq === value;\n    } else if (maybeOperator && '$neq' in operator) {\n      const neqOperator = operator as NeqOperator<typeof value>;\n      match &&= neqOperator.$neq !== value;\n    } else if (maybeOperator && '$in' in operator) {\n      const inOperator = operator as InOperator<typeof value>;\n      match &&= inOperator.$in.includes(value);\n    } else if (maybeOperator && '$contains' in operator) {\n      if (Array.isArray(value)) {\n        const containsOperator = operator as ContainsOperator<\n          (typeof value)[number]\n        >;\n        match &&= value.includes(containsOperator.$contains);\n      } else {\n        match = false;\n      }\n    } else {\n      const eqValue = operator as typeof value;\n      match &&= eqValue === value;\n    }\n\n    if (!match) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { useEffect, useMemo } from 'react';\nimport {\n  Call,\n  CallTypes,\n  combineComparators,\n  Comparator,\n  defaultSortPreset,\n  hasAudio,\n  hasVideo,\n  isPinned,\n  paginatedLayoutSortPreset,\n  screenSharing,\n  speakerLayoutSortPreset,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { applyFilter, Filter } from '../../../utilities/filter';\n\nexport type FilterableParticipant = Pick<\n  StreamVideoParticipant,\n  'userId' | 'isSpeaking' | 'isDominantSpeaker' | 'name' | 'roles'\n> & {\n  isPinned: boolean;\n  hasVideo: boolean;\n  hasAudio: boolean;\n};\n\nexport type ParticipantFilter = Filter<FilterableParticipant>;\nexport type ParticipantPredicate = (\n  paritcipant: StreamVideoParticipant,\n) => boolean;\n\nexport const useFilteredParticipants = ({\n  excludeLocalParticipant = false,\n  filterParticipants,\n}: {\n  excludeLocalParticipant?: boolean;\n  filterParticipants?: ParticipantFilter | ParticipantPredicate;\n}) => {\n  const { useParticipants, useRemoteParticipants } = useCallStateHooks();\n  const allParticipants = useParticipants();\n  const remoteParticipants = useRemoteParticipants();\n  return useMemo(() => {\n    const unfilteredParticipants = excludeLocalParticipant\n      ? remoteParticipants\n      : allParticipants;\n\n    return filterParticipants\n      ? applyParticipantsFilter(unfilteredParticipants, filterParticipants)\n      : unfilteredParticipants;\n  }, [\n    allParticipants,\n    remoteParticipants,\n    excludeLocalParticipant,\n    filterParticipants,\n  ]);\n};\n\nexport const applyParticipantsFilter = (\n  participants: StreamVideoParticipant[],\n  filter: ParticipantPredicate | ParticipantFilter,\n) => {\n  const filterCallback =\n    typeof filter === 'function'\n      ? filter\n      : (participant: StreamVideoParticipant) =>\n          applyFilter(\n            {\n              userId: participant.userId,\n              isSpeaking: participant.isSpeaking,\n              isDominantSpeaker: participant.isDominantSpeaker,\n              name: participant.name,\n              roles: participant.roles,\n              isPinned: isPinned(participant),\n              hasVideo: hasVideo(participant),\n              hasAudio: hasAudio(participant),\n            },\n            filter,\n          );\n\n  return participants.filter(filterCallback);\n};\n\nexport const usePaginatedLayoutSortPreset = (call: Call | undefined) => {\n  useEffect(() => {\n    if (!call) return;\n    call.setSortParticipantsBy(paginatedLayoutSortPreset);\n    return () => {\n      resetSortPreset(call);\n    };\n  }, [call]);\n};\n\nexport const useSpeakerLayoutSortPreset = (\n  call: Call | undefined,\n  isOneOnOneCall: boolean,\n) => {\n  useEffect(() => {\n    if (!call) return;\n    // always show the remote participant in the spotlight\n    if (isOneOnOneCall) {\n      call.setSortParticipantsBy(combineComparators(screenSharing, loggedIn));\n    } else {\n      call.setSortParticipantsBy(speakerLayoutSortPreset);\n    }\n    return () => {\n      resetSortPreset(call);\n    };\n  }, [call, isOneOnOneCall]);\n};\n\nconst resetSortPreset = (call: Call) => {\n  // reset the sorting to the default for the call type\n  const callConfig = CallTypes.get(call.type);\n  call.setSortParticipantsBy(\n    callConfig.options.sortParticipantsBy || defaultSortPreset,\n  );\n};\n\nconst loggedIn: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isLocalParticipant) return 1;\n  if (b.isLocalParticipant) return -1;\n  return 0;\n};\n","import clsx from 'clsx';\nimport { useCallback, useEffect, useState } from 'react';\nimport {\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { ParticipantView, useParticipantViewContext } from '../ParticipantView';\nimport { ParticipantsAudio } from '../Audio';\nimport { usePaginatedLayoutSortPreset } from './hooks';\n\n/**\n * The props for the {@link LivestreamLayout} component.\n */\nexport type LivestreamLayoutProps = {\n  /**\n   * Whether the livestream is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n\n  /**\n   * Whether to show the participant count. Defaults to `true`.\n   */\n  showParticipantCount?: boolean;\n\n  /**\n   * Whether to enable fullscreen mode. Defaults to `true`.\n   */\n  enableFullScreen?: boolean;\n\n  /**\n   * Whether to show the duration of the call. Defaults to `true`.\n   */\n  showDuration?: boolean;\n\n  /**\n   * Whether to show the live badge. Defaults to `true`.\n   */\n  showLiveBadge?: boolean;\n\n  /**\n   * Whether to show the speaker name. Defaults to `false`.\n   */\n  showSpeakerName?: boolean;\n\n  /**\n   * When set to `false` disables mirroring of the local participant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * The props to pass to the floating participant element.\n   */\n  floatingParticipantProps?: LivestreamLayoutProps & {\n    /**\n     * The position of the floating participant element. Defaults to `top-right`.\n     */\n    position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  };\n};\n\nexport const LivestreamLayout = (props: LivestreamLayoutProps) => {\n  const { useParticipants, useRemoteParticipants, useHasOngoingScreenShare } =\n    useCallStateHooks();\n  const call = useCall();\n  const participants = useParticipants();\n  const [currentSpeaker] = participants;\n  const remoteParticipants = useRemoteParticipants();\n  const hasOngoingScreenShare = useHasOngoingScreenShare();\n  const presenter = hasOngoingScreenShare\n    ? participants.find(hasScreenShare)\n    : undefined;\n\n  usePaginatedLayoutSortPreset(call);\n\n  const Overlay = (\n    <ParticipantOverlay\n      showParticipantCount={props.showParticipantCount}\n      showDuration={props.showDuration}\n      showLiveBadge={props.showLiveBadge}\n      showSpeakerName={props.showSpeakerName}\n    />\n  );\n\n  const { floatingParticipantProps, muted } = props;\n  const FloatingParticipantOverlay = hasOngoingScreenShare && (\n    <ParticipantOverlay\n      // these elements aren't needed for the video feed\n      showParticipantCount={\n        floatingParticipantProps?.showParticipantCount ?? false\n      }\n      showDuration={floatingParticipantProps?.showDuration ?? false}\n      showLiveBadge={floatingParticipantProps?.showLiveBadge ?? false}\n      showSpeakerName={floatingParticipantProps?.showSpeakerName ?? true}\n    />\n  );\n\n  return (\n    <div className=\"str-video__livestream-layout__wrapper\">\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      {hasOngoingScreenShare && presenter && (\n        <ParticipantView\n          className=\"str-video__livestream-layout__screen-share\"\n          participant={presenter}\n          ParticipantViewUI={Overlay}\n          trackType=\"screenShareTrack\"\n          muteAudio // audio is rendered by ParticipantsAudio\n        />\n      )}\n      {currentSpeaker && (\n        <ParticipantView\n          className={clsx(\n            hasOngoingScreenShare &&\n              clsx(\n                'str-video__livestream-layout__floating-participant',\n                `str-video__livestream-layout__floating-participant--${\n                  floatingParticipantProps?.position ?? 'top-right'\n                }`,\n              ),\n          )}\n          participant={currentSpeaker}\n          ParticipantViewUI={FloatingParticipantOverlay || Overlay}\n          mirror={\n            props.mirrorLocalParticipantVideo !== false ? undefined : false\n          }\n          muteAudio // audio is rendered by ParticipantsAudio\n        />\n      )}\n    </div>\n  );\n};\n\nconst ParticipantOverlay = (props: {\n  enableFullScreen?: boolean;\n  showParticipantCount?: boolean;\n  showDuration?: boolean;\n  showLiveBadge?: boolean;\n  showSpeakerName?: boolean;\n}) => {\n  const {\n    enableFullScreen = true,\n    showParticipantCount = true,\n    showDuration = true,\n    showLiveBadge = true,\n    showSpeakerName = false,\n  } = props;\n  const { participant } = useParticipantViewContext();\n  const { useParticipantCount } = useCallStateHooks();\n  const participantCount = useParticipantCount();\n  const duration = useUpdateCallDuration();\n  const toggleFullScreen = useToggleFullScreen();\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__livestream-layout__overlay\">\n      <div className=\"str-video__livestream-layout__overlay__bar\">\n        {showLiveBadge && (\n          <span className=\"str-video__livestream-layout__live-badge\">\n            {t('Live')}\n          </span>\n        )}\n        {showParticipantCount && (\n          <span className=\"str-video__livestream-layout__viewers-count\">\n            {participantCount}\n          </span>\n        )}\n        {showSpeakerName && (\n          <span\n            className=\"str-video__livestream-layout__speaker-name\"\n            title={participant.name || participant.userId || ''}\n          >\n            {participant.name || participant.userId || ''}\n          </span>\n        )}\n        {showDuration && (\n          <span className=\"str-video__livestream-layout__duration\">\n            {formatDuration(duration)}\n          </span>\n        )}\n        {enableFullScreen && (\n          <span\n            className=\"str-video__livestream-layout__go-fullscreen\"\n            onClick={toggleFullScreen}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nLivestreamLayout.displayName = 'LivestreamLayout';\n\nconst useUpdateCallDuration = () => {\n  const { useIsCallLive, useCallSession } = useCallStateHooks();\n  const isCallLive = useIsCallLive();\n  const session = useCallSession();\n  const [duration, setDuration] = useState(() => {\n    if (!session || !session.live_started_at) return 0;\n    const liveStartTime = new Date(session.live_started_at);\n    const now = new Date();\n    return Math.floor((now.getTime() - liveStartTime.getTime()) / 1000);\n  });\n\n  useEffect(() => {\n    if (!isCallLive) return;\n    const interval = setInterval(() => {\n      setDuration((d) => d + 1);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isCallLive]);\n\n  return duration;\n};\n\nconst useToggleFullScreen = () => {\n  const { participantViewElement } = useParticipantViewContext();\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  return useCallback(() => {\n    if (isFullscreen) {\n      document.exitFullscreen().then(() => {\n        setIsFullscreen(false);\n      });\n    } else {\n      participantViewElement?.requestFullscreen().then(() => {\n        setIsFullscreen(true);\n      });\n    }\n  }, [isFullscreen, participantViewElement]);\n};\n\nconst formatDuration = (durationInMs: number) => {\n  const days = Math.floor(durationInMs / 86400);\n  const hours = Math.floor(durationInMs / 3600);\n  const minutes = Math.floor((durationInMs % 3600) / 60);\n  const seconds = durationInMs % 60;\n\n  return `${days ? days + ' ' : ''}${hours ? hours + ':' : ''}${\n    minutes < 10 ? '0' : ''\n  }${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport clsx from 'clsx';\n\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport { ParticipantsAudio } from '../Audio';\nimport { IconButton } from '../../../components';\nimport { chunk } from '../../../utilities';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n} from './hooks';\n\nconst GROUP_SIZE = 16;\n\ntype PaginatedGridLayoutGroupProps = {\n  /**\n   * The group of participants to render.\n   */\n  group: Array<StreamVideoParticipant>;\n} & Pick<\n  ParticipantViewProps,\n  'VideoPlaceholder' | 'PictureInPicturePlaceholder' | 'mirror'\n> &\n  Required<Pick<ParticipantViewProps, 'ParticipantViewUI'>>;\n\nconst PaginatedGridLayoutGroup = ({\n  group,\n  mirror,\n  VideoPlaceholder,\n  PictureInPicturePlaceholder,\n  ParticipantViewUI,\n}: PaginatedGridLayoutGroupProps) => {\n  return (\n    <div\n      className={clsx('str-video__paginated-grid-layout__group', {\n        'str-video__paginated-grid-layout--one': group.length === 1,\n        'str-video__paginated-grid-layout--two-four':\n          group.length >= 2 && group.length <= 4,\n        'str-video__paginated-grid-layout--five-nine':\n          group.length >= 5 && group.length <= 9,\n      })}\n    >\n      {group.map((participant) => (\n        <ParticipantView\n          key={participant.sessionId}\n          participant={participant}\n          muteAudio\n          mirror={mirror}\n          VideoPlaceholder={VideoPlaceholder}\n          PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n          ParticipantViewUI={ParticipantViewUI}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport type PaginatedGridLayoutProps = {\n  /**\n   * The number of participants to display per page.\n   */\n  groupSize?: number;\n\n  /**\n   * Whether to exclude the local participant from the grid.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <PaginatedGridLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <PaginatedGridLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local partipant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * Turns on/off the pagination arrows.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n\n  /**\n   * Whether the layout is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n} & Pick<\n  ParticipantViewProps,\n  'ParticipantViewUI' | 'VideoPlaceholder' | 'PictureInPicturePlaceholder'\n>;\n\nexport const PaginatedGridLayout = (props: PaginatedGridLayoutProps) => {\n  const {\n    groupSize = (props.groupSize || 0) > 0\n      ? props.groupSize || GROUP_SIZE\n      : GROUP_SIZE,\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    pageArrowsVisible = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n    PictureInPicturePlaceholder,\n    muted,\n  } = props;\n  const [page, setPage] = useState(0);\n  const [\n    paginatedGridLayoutWrapperElement,\n    setPaginatedGridLayoutWrapperElement,\n  ] = useState<HTMLDivElement | null>(null);\n\n  const call = useCall();\n  const { useRemoteParticipants } = useCallStateHooks();\n  const remoteParticipants = useRemoteParticipants();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!paginatedGridLayoutWrapperElement || !call) return;\n\n    const cleanup = call.setViewport(paginatedGridLayoutWrapperElement);\n\n    return () => cleanup();\n  }, [paginatedGridLayoutWrapperElement, call]);\n\n  // only used to render video elements\n  const participantGroups = useMemo(\n    () => chunk(participants, groupSize),\n    [participants, groupSize],\n  );\n\n  const pageCount = participantGroups.length;\n\n  // update page when page count is reduced and selected page no longer exists\n  useEffect(() => {\n    if (page > pageCount - 1) {\n      setPage(Math.max(0, pageCount - 1));\n    }\n  }, [page, pageCount]);\n\n  const selectedGroup = participantGroups[page];\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div\n      className=\"str-video__paginated-grid-layout__wrapper\"\n      ref={setPaginatedGridLayoutWrapperElement}\n    >\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      <div className=\"str-video__paginated-grid-layout\">\n        {pageArrowsVisible && pageCount > 1 && (\n          <IconButton\n            icon=\"caret-left\"\n            disabled={page === 0}\n            onClick={() =>\n              setPage((currentPage) => Math.max(0, currentPage - 1))\n            }\n          />\n        )}\n        {selectedGroup && (\n          <PaginatedGridLayoutGroup\n            group={selectedGroup}\n            mirror={mirror}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n            PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n          />\n        )}\n        {pageArrowsVisible && pageCount > 1 && (\n          <IconButton\n            disabled={page === pageCount - 1}\n            icon=\"caret-right\"\n            onClick={() =>\n              setPage((currentPage) => Math.min(pageCount - 1, currentPage + 1))\n            }\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nPaginatedGridLayout.displayName = 'PaginatedGridLayout';\n","export const chunk = <T extends unknown[]>(array: T, size: number) => {\n  const chunkCount = Math.ceil(array.length / size);\n\n  return Array.from(\n    { length: chunkCount },\n    (_, index) => array.slice(size * index, size * index + size) as T,\n  );\n};\n","import { useEffect, useState } from 'react';\n\nexport const useCalculateHardLimit = (\n  /**\n   * Element that stretches to 100% of the whole layout component\n   */\n  wrapperElement: HTMLDivElement | null,\n  /**\n   * Element that directly hosts individual `ParticipantView` (or wrapper) elements\n   */\n  hostElement: HTMLDivElement | null,\n  limit?: 'dynamic' | number,\n) => {\n  const [calculatedLimit, setCalculatedLimit] = useState<{\n    vertical: number | null;\n    horizontal: number | null;\n  }>({\n    vertical: typeof limit === 'number' ? limit : null,\n    horizontal: typeof limit === 'number' ? limit : null,\n  });\n\n  useEffect(() => {\n    if (\n      !hostElement ||\n      !wrapperElement ||\n      typeof limit === 'number' ||\n      typeof limit === 'undefined'\n    )\n      return;\n\n    let childWidth: number | null = null;\n    let childHeight: number | null = null;\n\n    const resizeObserver = new ResizeObserver((entries, observer) => {\n      // this part should ideally run as little times as possible\n      // get child measurements and disconnect\n      // does not consider dynamically sized children\n      // this hook is for SpeakerLayout use only, where children in the bar are fixed size\n      if (entries.length > 1) {\n        const child = hostElement.firstChild as HTMLElement | null;\n\n        if (child) {\n          childHeight = child.clientHeight;\n          childWidth = child.clientWidth;\n          observer.unobserve(hostElement);\n        }\n      }\n\n      // keep the state at { vertical: 1, horizontal: 1 }\n      // until we get the proper child measurements\n      if (childHeight === null || childWidth === null) return;\n\n      const vertical = Math.floor(wrapperElement.clientHeight / childHeight);\n      const horizontal = Math.floor(wrapperElement.clientWidth / childWidth);\n\n      setCalculatedLimit((pv) => {\n        if (pv.vertical !== vertical || pv.horizontal !== horizontal)\n          return { vertical, horizontal };\n        return pv;\n      });\n    });\n\n    resizeObserver.observe(wrapperElement);\n    resizeObserver.observe(hostElement);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [hostElement, limit, wrapperElement]);\n\n  return calculatedLimit;\n};\n","import { useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport { IconButton } from '../../../components';\nimport {\n  useHorizontalScrollPosition,\n  useVerticalScrollPosition,\n} from '../../../hooks';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  useSpeakerLayoutSortPreset,\n} from './hooks';\nimport { useCalculateHardLimit } from '../../hooks/useCalculateHardLimit';\nimport { ParticipantsAudio } from '../Audio';\n\nexport type SpeakerLayoutProps = {\n  /**\n   * The UI to be used for the participant in the spotlight.\n   */\n  ParticipantViewUISpotlight?: ParticipantViewProps['ParticipantViewUI'];\n\n  /**\n   * The UI to be used for the participants in the participants bar.\n   */\n  ParticipantViewUIBar?: ParticipantViewProps['ParticipantViewUI'];\n\n  /**\n   * The position of the participants who are not in focus.\n   * Providing `null` will hide the bar.\n   */\n  participantsBarPosition?: 'top' | 'bottom' | 'left' | 'right' | null;\n\n  /**\n   * Hard limits the number of the participants rendered in the participants bar.\n   * Providing string `dynamic` will calculate hard limit based on screen width/height.\n   */\n  participantsBarLimit?: 'dynamic' | number;\n\n  /**\n   * When set to `true` will exclude the local participant from layout.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <SpeakerLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <SpeakerLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local participant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * Turns on/off the pagination arrows.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n\n  /**\n   * Whether the layout is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n} & Pick<\n  ParticipantViewProps,\n  'VideoPlaceholder' | 'PictureInPicturePlaceholder'\n>;\n\nconst DefaultParticipantViewUIBar = () => (\n  <DefaultParticipantViewUI menuPlacement=\"top-end\" />\n);\n\nexport const SpeakerLayout = ({\n  ParticipantViewUIBar = DefaultParticipantViewUIBar,\n  ParticipantViewUISpotlight = DefaultParticipantViewUI,\n  VideoPlaceholder,\n  PictureInPicturePlaceholder,\n  participantsBarPosition = 'bottom',\n  participantsBarLimit,\n  mirrorLocalParticipantVideo = true,\n  excludeLocalParticipant = false,\n  filterParticipants,\n  pageArrowsVisible = true,\n  muted,\n}: SpeakerLayoutProps) => {\n  const call = useCall();\n  const { useParticipants, useRemoteParticipants } = useCallStateHooks();\n  const allParticipants = useParticipants();\n  const remoteParticipants = useRemoteParticipants();\n  const [participantInSpotlight, ...otherParticipants] =\n    useFilteredParticipants({ excludeLocalParticipant, filterParticipants });\n  const [participantsBarWrapperElement, setParticipantsBarWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n  const [participantsBarElement, setParticipantsBarElement] =\n    useState<HTMLDivElement | null>(null);\n  const [buttonsWrapperElement, setButtonsWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n\n  const isSpeakerScreenSharing =\n    participantInSpotlight && hasScreenShare(participantInSpotlight);\n  const hardLimit = useCalculateHardLimit(\n    buttonsWrapperElement,\n    participantsBarElement,\n    participantsBarLimit,\n  );\n\n  const isVertical =\n    participantsBarPosition === 'left' || participantsBarPosition === 'right';\n  const isHorizontal =\n    participantsBarPosition === 'top' || participantsBarPosition === 'bottom';\n\n  useEffect(() => {\n    if (!participantsBarWrapperElement || !call) return;\n\n    const cleanup = call.setViewport(participantsBarWrapperElement);\n\n    return () => cleanup();\n  }, [participantsBarWrapperElement, call]);\n\n  const isOneOnOneCall = allParticipants.length === 2;\n  useSpeakerLayoutSortPreset(call, isOneOnOneCall);\n\n  let participantsWithAppliedLimit = otherParticipants;\n\n  const hardLimitToApply = isVertical\n    ? hardLimit.vertical\n    : hardLimit.horizontal;\n\n  if (\n    typeof participantsBarLimit !== 'undefined' &&\n    hardLimitToApply !== null\n  ) {\n    participantsWithAppliedLimit = otherParticipants.slice(\n      0,\n      // subtract 1 if speaker is sharing screen as\n      // that one is rendered independently from otherParticipants array\n      hardLimitToApply - (isSpeakerScreenSharing ? 1 : 0),\n    );\n  }\n\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  const renderParticipantsBar =\n    participantsBarPosition &&\n    (participantsWithAppliedLimit.length > 0 || isSpeakerScreenSharing);\n  return (\n    <div className=\"str-video__speaker-layout__wrapper\">\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      <div\n        className={clsx(\n          'str-video__speaker-layout',\n          participantsBarPosition &&\n            `str-video__speaker-layout--variant-${participantsBarPosition}`,\n        )}\n      >\n        <div className=\"str-video__speaker-layout__spotlight\">\n          {participantInSpotlight && (\n            <ParticipantView\n              participant={participantInSpotlight}\n              muteAudio={true}\n              mirror={mirror}\n              trackType={\n                isSpeakerScreenSharing ? 'screenShareTrack' : 'videoTrack'\n              }\n              ParticipantViewUI={ParticipantViewUISpotlight}\n              VideoPlaceholder={VideoPlaceholder}\n              PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n            />\n          )}\n        </div>\n        {renderParticipantsBar && (\n          <div\n            ref={setButtonsWrapperElement}\n            className=\"str-video__speaker-layout__participants-bar-buttons-wrapper\"\n          >\n            <div\n              className=\"str-video__speaker-layout__participants-bar-wrapper\"\n              ref={setParticipantsBarWrapperElement}\n            >\n              <div\n                ref={setParticipantsBarElement}\n                className=\"str-video__speaker-layout__participants-bar\"\n              >\n                {isSpeakerScreenSharing && (\n                  <div\n                    className=\"str-video__speaker-layout__participant-tile\"\n                    key={participantInSpotlight.sessionId}\n                  >\n                    <ParticipantView\n                      participant={participantInSpotlight}\n                      ParticipantViewUI={ParticipantViewUIBar}\n                      VideoPlaceholder={VideoPlaceholder}\n                      PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n                      mirror={mirror}\n                      muteAudio={true}\n                    />\n                  </div>\n                )}\n                {participantsWithAppliedLimit.map((participant) => (\n                  <div\n                    className=\"str-video__speaker-layout__participant-tile\"\n                    key={participant.sessionId}\n                  >\n                    <ParticipantView\n                      participant={participant}\n                      ParticipantViewUI={ParticipantViewUIBar}\n                      VideoPlaceholder={VideoPlaceholder}\n                      PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n                      mirror={mirror}\n                      muteAudio={true}\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n            {pageArrowsVisible && isVertical && (\n              <VerticalScrollButtons\n                scrollWrapper={participantsBarWrapperElement}\n              />\n            )}\n            {pageArrowsVisible && isHorizontal && (\n              <HorizontalScrollButtons\n                scrollWrapper={participantsBarWrapperElement}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nSpeakerLayout.displayName = 'SpeakerLayout';\n\ntype ScrollButtonsProps<T extends HTMLElement> = {\n  scrollWrapper: T | null;\n};\n\nconst HorizontalScrollButtons = <T extends HTMLElement>({\n  scrollWrapper,\n}: ScrollButtonsProps<T>) => {\n  const scrollPosition = useHorizontalScrollPosition(scrollWrapper);\n\n  const scrollStartClickHandler = () => {\n    scrollWrapper?.scrollBy({ left: -150, behavior: 'smooth' });\n  };\n\n  const scrollEndClickHandler = () => {\n    scrollWrapper?.scrollBy({ left: 150, behavior: 'smooth' });\n  };\n  return (\n    <>\n      {scrollPosition && scrollPosition !== 'start' && (\n        <IconButton\n          onClick={scrollStartClickHandler}\n          icon=\"caret-left\"\n          className=\"str-video__speaker-layout__participants-bar--button-left\"\n        />\n      )}\n      {scrollPosition && scrollPosition !== 'end' && (\n        <IconButton\n          onClick={scrollEndClickHandler}\n          icon=\"caret-right\"\n          className=\"str-video__speaker-layout__participants-bar--button-right\"\n        />\n      )}\n    </>\n  );\n};\n\nconst VerticalScrollButtons = <T extends HTMLElement>({\n  scrollWrapper,\n}: ScrollButtonsProps<T>) => {\n  const scrollPosition = useVerticalScrollPosition(scrollWrapper);\n\n  const scrollTopClickHandler = () => {\n    scrollWrapper?.scrollBy({ top: -150, behavior: 'smooth' });\n  };\n\n  const scrollBottomClickHandler = () => {\n    scrollWrapper?.scrollBy({ top: 150, behavior: 'smooth' });\n  };\n  return (\n    <>\n      {scrollPosition && scrollPosition !== 'top' && (\n        <IconButton\n          onClick={scrollTopClickHandler}\n          icon=\"caret-up\"\n          className=\"str-video__speaker-layout__participants-bar--button-top\"\n        />\n      )}\n      {scrollPosition && scrollPosition !== 'bottom' && (\n        <IconButton\n          onClick={scrollBottomClickHandler}\n          icon=\"caret-down\"\n          className=\"str-video__speaker-layout__participants-bar--button-bottom\"\n        />\n      )}\n    </>\n  );\n};\n","import { useEffect, useState } from 'react';\n\nconst SCROLL_THRESHOLD = 10;\n\n/**\n * Hook which observes element's scroll position and returns text value based on the\n * position of the scrollbar (`top`, `bottom`, `between` and `null` if no scrollbar is available)\n */\nexport const useVerticalScrollPosition = (\n  scrollElement: HTMLElement | null,\n  threshold: number = SCROLL_THRESHOLD,\n) => {\n  const [scrollPosition, setScrollPosition] = useState<\n    'top' | 'bottom' | 'between' | null\n  >(null);\n\n  useEffect(() => {\n    if (!scrollElement) return;\n\n    const scrollHandler = () => {\n      const element = scrollElement;\n\n      const hasVerticalScrollbar = element.scrollHeight > element.clientHeight;\n\n      if (!hasVerticalScrollbar) return setScrollPosition(null);\n\n      const isAtTheTop = element.scrollTop <= threshold;\n      if (isAtTheTop) return setScrollPosition('top');\n\n      const isAtTheBottom =\n        Math.abs(\n          element.scrollHeight - element.scrollTop - element.clientHeight,\n        ) <= threshold;\n\n      if (isAtTheBottom) return setScrollPosition('bottom');\n\n      setScrollPosition('between');\n    };\n\n    const resizeObserver = new ResizeObserver(scrollHandler);\n    resizeObserver.observe(scrollElement);\n\n    scrollElement.addEventListener('scroll', scrollHandler);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollHandler);\n      resizeObserver.disconnect();\n    };\n  }, [scrollElement, threshold]);\n\n  return scrollPosition;\n};\n\nexport const useHorizontalScrollPosition = (\n  scrollElement: HTMLElement | null,\n  threshold: number = SCROLL_THRESHOLD,\n) => {\n  const [scrollPosition, setScrollPosition] = useState<\n    'start' | 'end' | 'between' | null\n  >(null);\n\n  useEffect(() => {\n    if (!scrollElement) return;\n\n    const scrollHandler = () => {\n      const element = scrollElement;\n\n      const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;\n\n      if (!hasHorizontalScrollbar) return setScrollPosition(null);\n\n      const isAtTheStart = element.scrollLeft <= threshold;\n      if (isAtTheStart) return setScrollPosition('start');\n\n      const isAtTheEnd =\n        Math.abs(\n          element.scrollWidth - element.scrollLeft - element.clientWidth,\n        ) <= threshold;\n\n      if (isAtTheEnd) return setScrollPosition('end');\n\n      setScrollPosition('between');\n    };\n\n    const resizeObserver = new ResizeObserver(scrollHandler);\n    resizeObserver.observe(scrollElement);\n\n    scrollElement.addEventListener('scroll', scrollHandler);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollHandler);\n      resizeObserver.disconnect();\n    };\n  }, [scrollElement, threshold]);\n\n  return scrollPosition;\n};\n","import {\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { useEffect, useState } from 'react';\n\nimport { ParticipantsAudio } from '../Audio';\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n} from './hooks';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { Icon } from '../../../components';\n\nexport type PipLayoutProps = {\n  /**\n   * Whether to exclude the local participant from the grid.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <PipLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <PipLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local partipant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n} & Pick<ParticipantViewProps, 'ParticipantViewUI' | 'VideoPlaceholder'>;\n\nconst Pip = (props: PipLayoutProps) => {\n  const { t } = useI18n();\n  const {\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n  } = props;\n  const [layoutWrapperElement, setLayoutWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n\n  const call = useCall();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n  const screenSharingParticipant = participants.find((p) => hasScreenShare(p));\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!layoutWrapperElement || !call) return;\n    return call.setViewport(layoutWrapperElement);\n  }, [layoutWrapperElement, call]);\n\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div className=\"str-video__pip-layout\" ref={setLayoutWrapperElement}>\n      {screenSharingParticipant &&\n        (screenSharingParticipant.isLocalParticipant ? (\n          <div className=\"str-video__pip-screen-share-local\">\n            <Icon icon=\"screen-share-off\" />\n            <span className=\"str-video__pip-screen-share-local__title\">\n              {t('You are presenting your screen')}\n            </span>\n          </div>\n        ) : (\n          <ParticipantView\n            participant={screenSharingParticipant}\n            trackType=\"screenShareTrack\"\n            muteAudio\n            mirror={false}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n          />\n        ))}\n      {participants.map((participant) => (\n        <ParticipantView\n          key={participant.sessionId}\n          participant={participant}\n          muteAudio\n          mirror={mirror}\n          VideoPlaceholder={VideoPlaceholder}\n          ParticipantViewUI={ParticipantViewUI}\n        />\n      ))}\n    </div>\n  );\n};\n\nPip.displayName = 'PipLayout.Pip';\n\nconst Host = () => {\n  const { useRemoteParticipants } = useCallStateHooks();\n  const remoteParticipants = useRemoteParticipants();\n  return <ParticipantsAudio participants={remoteParticipants} />;\n};\n\nHost.displayName = 'PipLayout.Host';\n\nexport const PipLayout = { Pip, Host };\n","import { setSdkInfo, SfuModels } from '@stream-io/video-client';\n\nexport * from '@stream-io/video-client';\nexport * from '@stream-io/video-react-bindings';\n\nexport * from './src/core';\n\nexport * from './src/components';\nexport * from './src/wrappers';\nexport * from './src/translations';\nexport {\n  useHorizontalScrollPosition,\n  useVerticalScrollPosition,\n  useRequestPermission,\n  usePersistedDevicePreferences,\n  useDeviceList,\n} from './src/hooks';\n\nconst [major, minor, patch] = (\n  process.env.PKG_VERSION || '0.0.0-development'\n).split('.');\n\nsetSdkInfo({\n  type: SfuModels.SdkType.REACT,\n  major,\n  minor,\n  patch,\n});\n","import { SchedulerLike, ValueFromArray } from '../types';\nimport { Observable } from '../Observable';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\n\n// Devs are more likely to pass null or undefined than they are a scheduler\n// without accompanying values. To make things easier for (naughty) devs who\n// use the `strictNullChecks: false` TypeScript compiler option, these\n// overloads with explicit null and undefined values are included.\n\nexport function of(value: null): Observable<null>;\nexport function of(value: undefined): Observable<undefined>;\n\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function of(scheduler: SchedulerLike): Observable<never>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function of<A extends readonly unknown[]>(...valuesAndScheduler: [...A, SchedulerLike]): Observable<ValueFromArray<A>>;\n\nexport function of(): Observable<never>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function of<T>(): Observable<T>;\nexport function of<T>(value: T): Observable<T>;\nexport function of<A extends readonly unknown[]>(...values: A): Observable<ValueFromArray<A>>;\n\n/**\n * Converts the arguments to an observable sequence.\n *\n * <span class=\"informal\">Each argument becomes a `next` notification.</span>\n *\n * ![](of.png)\n *\n * Unlike {@link from}, it does not do any flattening and emits each argument in whole\n * as a separate `next` notification.\n *\n * ## Examples\n *\n * Emit the values `10, 20, 30`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of(10, 20, 30)\n *   .subscribe({\n *     next: value => console.log('next:', value),\n *     error: err => console.log('error:', err),\n *     complete: () => console.log('the end'),\n *   });\n *\n * // Outputs\n * // next: 10\n * // next: 20\n * // next: 30\n * // the end\n * ```\n *\n * Emit the array `[1, 2, 3]`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of([1, 2, 3])\n *   .subscribe({\n *     next: value => console.log('next:', value),\n *     error: err => console.log('error:', err),\n *     complete: () => console.log('the end'),\n *   });\n *\n * // Outputs\n * // next: [1, 2, 3]\n * // the end\n * ```\n *\n * @see {@link from}\n * @see {@link range}\n *\n * @param args A comma separated list of arguments you want to be emitted.\n * @return An Observable that synchronously emits the arguments described\n * above and then immediately completes.\n */\nexport function of<T>(...args: Array<T | SchedulerLike>): Observable<T> {\n  const scheduler = popScheduler(args);\n  return from(args as T[], scheduler);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","export const toCodePoints = (str: string): number[] => {\n    const codePoints = [];\n    let i = 0;\n    const length = str.length;\n    while (i < length) {\n        const value = str.charCodeAt(i++);\n        if (value >= 0xd800 && value <= 0xdbff && i < length) {\n            const extra = str.charCodeAt(i++);\n            if ((extra & 0xfc00) === 0xdc00) {\n                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            } else {\n                codePoints.push(value);\n                i--;\n            }\n        } else {\n            codePoints.push(value);\n        }\n    }\n    return codePoints;\n};\n\nexport const fromCodePoint = (...codePoints: number[]): string => {\n    if (String.fromCodePoint) {\n        return String.fromCodePoint(...codePoints);\n    }\n\n    const length = codePoints.length;\n    if (!length) {\n        return '';\n    }\n\n    const codeUnits = [];\n\n    let index = -1;\n    let result = '';\n    while (++index < length) {\n        let codePoint = codePoints[index];\n        if (codePoint <= 0xffff) {\n            codeUnits.push(codePoint);\n        } else {\n            codePoint -= 0x10000;\n            codeUnits.push((codePoint >> 10) + 0xd800, (codePoint % 0x400) + 0xdc00);\n        }\n        if (index + 1 === length || codeUnits.length > 0x4000) {\n            result += String.fromCharCode(...codeUnits);\n            codeUnits.length = 0;\n        }\n    }\n    return result;\n};\n\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const decode = (base64: string): ArrayBuffer | number[] => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const buffer =\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n            ? new ArrayBuffer(bufferLength)\n            : new Array(bufferLength);\n    const bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return buffer;\n};\n\nexport const polyUint16Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\nexport const polyUint32Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n","import {Context} from '../../core/context';\n\nexport class Bounds {\n    constructor(readonly left: number, readonly top: number, readonly width: number, readonly height: number) {}\n\n    add(x: number, y: number, w: number, h: number): Bounds {\n        return new Bounds(this.left + x, this.top + y, this.width + w, this.height + h);\n    }\n\n    static fromClientRect(context: Context, clientRect: ClientRect): Bounds {\n        return new Bounds(\n            clientRect.left + context.windowBounds.left,\n            clientRect.top + context.windowBounds.top,\n            clientRect.width,\n            clientRect.height\n        );\n    }\n\n    static fromDOMRectList(context: Context, domRectList: DOMRectList): Bounds {\n        const domRect = Array.from(domRectList).find((rect) => rect.width !== 0);\n        return domRect\n            ? new Bounds(\n                  domRect.left + context.windowBounds.left,\n                  domRect.top + context.windowBounds.top,\n                  domRect.width,\n                  domRect.height\n              )\n            : Bounds.EMPTY;\n    }\n\n    static EMPTY = new Bounds(0, 0, 0, 0);\n}\n\nexport const parseBounds = (context: Context, node: Element): Bounds => {\n    return Bounds.fromClientRect(context, node.getBoundingClientRect());\n};\n\nexport const parseDocumentSize = (document: Document): Bounds => {\n    const body = document.body;\n    const documentElement = document.documentElement;\n\n    if (!body || !documentElement) {\n        throw new Error(`Unable to get document size`);\n    }\n    const width = Math.max(\n        Math.max(body.scrollWidth, documentElement.scrollWidth),\n        Math.max(body.offsetWidth, documentElement.offsetWidth),\n        Math.max(body.clientWidth, documentElement.clientWidth)\n    );\n\n    const height = Math.max(\n        Math.max(body.scrollHeight, documentElement.scrollHeight),\n        Math.max(body.offsetHeight, documentElement.offsetHeight),\n        Math.max(body.clientHeight, documentElement.clientHeight)\n    );\n\n    return new Bounds(0, 0, width, height);\n};\n","const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const decode = (base64: string): ArrayBuffer | number[] => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const buffer =\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n            ? new ArrayBuffer(bufferLength)\n            : new Array(bufferLength);\n    const bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return buffer;\n};\n\nexport const polyUint16Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\nexport const polyUint32Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n","const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const encode = (arraybuffer: ArrayBuffer): string => {\n    let bytes = new Uint8Array(arraybuffer),\n        i,\n        len = bytes.length,\n        base64 = '';\n\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    } else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n\n    return base64;\n};\n\nexport const decode = (base64: string): ArrayBuffer => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n};\n","import {decode, polyUint16Array, polyUint32Array} from './Util';\n\nexport type int = number;\n\n/** Shift size for getting the index-2 table offset. */\nexport const UTRIE2_SHIFT_2 = 5;\n\n/** Shift size for getting the index-1 table offset. */\nexport const UTRIE2_SHIFT_1 = 6 + 5;\n\n/**\n * Shift size for shifting left the index array values.\n * Increases possible data size with 16-bit index values at the cost\n * of compactability.\n * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n */\nexport const UTRIE2_INDEX_SHIFT = 2;\n\n/**\n * Difference between the two shift sizes,\n * for getting an index-1 offset from an index-2 offset. 6=11-5\n */\nexport const UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;\n\n/**\n * The part of the index-2 table for U+D800..U+DBFF stores values for\n * lead surrogate code _units_ not code _points_.\n * Values for lead surrogate code _points_ are indexed with this portion of the table.\n * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n */\nexport const UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;\n\n/** Number of entries in a data block. 32=0x20 */\nexport const UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;\n/** Mask for getting the lower bits for the in-data-block offset. */\nexport const UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;\n\nexport const UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;\n/** Count the lengths of both BMP pieces. 2080=0x820 */\nexport const UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;\n/**\n * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n */\nexport const UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;\nexport const UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n/**\n * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n * Variable length, for code points up to highStart, where the last single-value range starts.\n * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n *\n * The part of the index-2 table for supplementary code points starts\n * after this index-1 table.\n *\n * Both the index-1 table and the following part of the index-2 table\n * are omitted completely if there is only BMP data.\n */\nexport const UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;\n\n/**\n * Number of index-1 entries for the BMP. 32=0x20\n * This part of the index-1 table is omitted from the serialized form.\n */\nexport const UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;\n\n/** Number of entries in an index-2 block. 64=0x40 */\nexport const UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;\n/** Mask for getting the lower bits for the in-index-2-block offset. */\nexport const UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;\n\nconst slice16 = (view: number[] | Uint16Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n};\n\nconst slice32 = (view: number[] | Uint32Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n};\n\nexport const createTrieFromBase64 = (base64: string, _byteLength: number): Trie => {\n    const buffer = decode(base64);\n    const view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);\n    const view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);\n    const headerLength = 24;\n\n    const index = slice16(view16, headerLength / 2, view32[4] / 2);\n    const data =\n        view32[5] === 2\n            ? slice16(view16, (headerLength + view32[4]) / 2)\n            : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));\n\n    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);\n};\n\nexport class Trie {\n    initialValue: int;\n    errorValue: int;\n    highStart: int;\n    highValueIndex: int;\n    index: Uint16Array | number[];\n    data: Uint32Array | Uint16Array | number[];\n\n    constructor(\n        initialValue: int,\n        errorValue: int,\n        highStart: int,\n        highValueIndex: int,\n        index: Uint16Array | number[],\n        data: Uint32Array | Uint16Array | number[]\n    ) {\n        this.initialValue = initialValue;\n        this.errorValue = errorValue;\n        this.highStart = highStart;\n        this.highValueIndex = highValueIndex;\n        this.index = index;\n        this.data = data;\n    }\n\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    get(codePoint: number): number {\n        let ix;\n        if (codePoint >= 0) {\n            if (codePoint < 0x0d800 || (codePoint > 0x0dbff && codePoint <= 0x0ffff)) {\n                // Ordinary BMP code point, excluding leading surrogates.\n                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n                // 16 bit data is stored in the index array itself.\n                ix = this.index[codePoint >> UTRIE2_SHIFT_2];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint <= 0xffff) {\n                // Lead Surrogate Code Point.  A Separate index section is stored for\n                // lead surrogate code units and code points.\n                //   The main index has the code unit data.\n                //   For this function, we need the code point data.\n                // Note: this expression could be refactored for slightly improved efficiency, but\n                //       surrogate code points will be so rare in practice that it's not worth it.\n                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + ((codePoint - 0xd800) >> UTRIE2_SHIFT_2)];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint < this.highStart) {\n                // Supplemental code point, use two-level lookup.\n                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);\n                ix = this.index[ix];\n                ix += (codePoint >> UTRIE2_SHIFT_2) & UTRIE2_INDEX_2_MASK;\n                ix = this.index[ix];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint <= 0x10ffff) {\n                return this.data[this.highValueIndex];\n            }\n        }\n\n        // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n        return this.errorValue;\n    }\n}\n","export const base64 =\n    'KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==';\nexport const byteLength = 39664;\n","'use strict';\n\nimport {createTrieFromBase64} from 'utrie';\nimport {base64, byteLength} from './linebreak-trie';\nimport {fromCodePoint, toCodePoints} from './Util';\n\nexport const LETTER_NUMBER_MODIFIER = 50;\n\n// Non-tailorable Line Breaking Classes\nconst BK = 1; //  Cause a line break (after)\nconst CR = 2; //  Cause a line break (after), except between CR and LF\nconst LF = 3; //  Cause a line break (after)\nconst CM = 4; //  Prohibit a line break between the character and the preceding character\nconst NL = 5; //  Cause a line break (after)\nconst SG = 6; //  Do not occur in well-formed text\nconst WJ = 7; //  Prohibit line breaks before and after\nconst ZW = 8; //  Provide a break opportunity\nconst GL = 9; //  Prohibit line breaks before and after\nconst SP = 10; // Enable indirect line breaks\nconst ZWJ = 11; // Prohibit line breaks within joiner sequences\n// Break Opportunities\nconst B2 = 12; //  Provide a line break opportunity before and after the character\nconst BA = 13; //  Generally provide a line break opportunity after the character\nconst BB = 14; //  Generally provide a line break opportunity before the character\nconst HY = 15; //  Provide a line break opportunity after the character, except in numeric context\nconst CB = 16; //   Provide a line break opportunity contingent on additional information\n// Characters Prohibiting Certain Breaks\nconst CL = 17; //  Prohibit line breaks before\nconst CP = 18; //  Prohibit line breaks before\nconst EX = 19; //  Prohibit line breaks before\nconst IN = 20; //  Allow only indirect line breaks between pairs\nconst NS = 21; //  Allow only indirect line breaks before\nconst OP = 22; //  Prohibit line breaks after\nconst QU = 23; //  Act like they are both opening and closing\n// Numeric Context\nconst IS = 24; //  Prevent breaks after any and before numeric\nconst NU = 25; //  Form numeric expressions for line breaking purposes\nconst PO = 26; //  Do not break following a numeric expression\nconst PR = 27; //  Do not break in front of a numeric expression\nconst SY = 28; //  Prevent a break before; and allow a break after\n// Other Characters\nconst AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID\nconst AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters\nconst CJ = 31; //  Treat as NS or ID for strict or normal breaking.\nconst EB = 32; //  Do not break from following Emoji Modifier\nconst EM = 33; //  Do not break from preceding Emoji Base\nconst H2 = 34; //  Form Korean syllable blocks\nconst H3 = 35; //  Form Korean syllable blocks\nconst HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic\nconst ID = 37; //  Break before or after; except in some numeric context\nconst JL = 38; //  Form Korean syllable blocks\nconst JV = 39; //  Form Korean syllable blocks\nconst JT = 40; //  Form Korean syllable blocks\nconst RI = 41; //  Keep pairs together. For pairs; break before and after other classes\nconst SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis\nconst XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions\n\nconst ea_OP = [0x2329, 0xff08];\n\nexport const classes: {[key: string]: number} = {\n    BK,\n    CR,\n    LF,\n    CM,\n    NL,\n    SG,\n    WJ,\n    ZW,\n    GL,\n    SP,\n    ZWJ,\n    B2,\n    BA,\n    BB,\n    HY,\n    CB,\n    CL,\n    CP,\n    EX,\n    IN,\n    NS,\n    OP,\n    QU,\n    IS,\n    NU,\n    PO,\n    PR,\n    SY,\n    AI,\n    AL,\n    CJ,\n    EB,\n    EM,\n    H2,\n    H3,\n    HL,\n    ID,\n    JL,\n    JV,\n    JT,\n    RI,\n    SA,\n    XX,\n};\n\nexport const BREAK_MANDATORY = '!';\nexport const BREAK_NOT_ALLOWED = '×';\nexport const BREAK_ALLOWED = '÷';\nexport const UnicodeTrie = createTrieFromBase64(base64, byteLength);\n\nconst ALPHABETICS = [AL, HL];\nconst HARD_LINE_BREAKS = [BK, CR, LF, NL];\nconst SPACE = [SP, ZW];\nconst PREFIX_POSTFIX = [PR, PO];\nconst LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE);\nconst KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];\nconst HYPHEN = [HY, BA];\n\nexport const codePointsToCharacterClasses = (\n    codePoints: number[],\n    lineBreak: string = 'strict'\n): [number[], number[], boolean[]] => {\n    const types: number[] = [];\n    const indices: number[] = [];\n    const categories: boolean[] = [];\n    codePoints.forEach((codePoint, index) => {\n        let classType = UnicodeTrie.get(codePoint);\n        if (classType > LETTER_NUMBER_MODIFIER) {\n            categories.push(true);\n            classType -= LETTER_NUMBER_MODIFIER;\n        } else {\n            categories.push(false);\n        }\n\n        if (['normal', 'auto', 'loose'].indexOf(lineBreak) !== -1) {\n            // U+2010, – U+2013, 〜 U+301C, ゠ U+30A0\n            if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {\n                indices.push(index);\n                return types.push(CB);\n            }\n        }\n\n        if (classType === CM || classType === ZWJ) {\n            // LB10 Treat any remaining combining mark or ZWJ as AL.\n            if (index === 0) {\n                indices.push(index);\n                return types.push(AL);\n            }\n\n            // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of\n            // the base character in all of the following rules. Treat ZWJ as if it were CM.\n            const prev = types[index - 1];\n            if (LINE_BREAKS.indexOf(prev) === -1) {\n                indices.push(indices[index - 1]);\n                return types.push(prev);\n            }\n            indices.push(index);\n            return types.push(AL);\n        }\n\n        indices.push(index);\n\n        if (classType === CJ) {\n            return types.push(lineBreak === 'strict' ? NS : ID);\n        }\n\n        if (classType === SA) {\n            return types.push(AL);\n        }\n\n        if (classType === AI) {\n            return types.push(AL);\n        }\n\n        // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL\n        // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised\n        // to take into account the actual line breaking properties for these characters.\n        if (classType === XX) {\n            if ((codePoint >= 0x20000 && codePoint <= 0x2fffd) || (codePoint >= 0x30000 && codePoint <= 0x3fffd)) {\n                return types.push(ID);\n            } else {\n                return types.push(AL);\n            }\n        }\n\n        types.push(classType);\n    });\n\n    return [indices, types, categories];\n};\n\nconst isAdjacentWithSpaceIgnored = (\n    a: number[] | number,\n    b: number,\n    currentIndex: number,\n    classTypes: number[]\n): boolean => {\n    const current = classTypes[currentIndex];\n    if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {\n        let i = currentIndex;\n        while (i <= classTypes.length) {\n            i++;\n            let next = classTypes[i];\n\n            if (next === b) {\n                return true;\n            }\n\n            if (next !== SP) {\n                break;\n            }\n        }\n    }\n\n    if (current === SP) {\n        let i = currentIndex;\n\n        while (i > 0) {\n            i--;\n            const prev = classTypes[i];\n\n            if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {\n                let n = currentIndex;\n                while (n <= classTypes.length) {\n                    n++;\n                    let next = classTypes[n];\n\n                    if (next === b) {\n                        return true;\n                    }\n\n                    if (next !== SP) {\n                        break;\n                    }\n                }\n            }\n\n            if (prev !== SP) {\n                break;\n            }\n        }\n    }\n    return false;\n};\n\nconst previousNonSpaceClassType = (currentIndex: number, classTypes: number[]): number => {\n    let i = currentIndex;\n    while (i >= 0) {\n        let type = classTypes[i];\n        if (type === SP) {\n            i--;\n        } else {\n            return type;\n        }\n    }\n    return 0;\n};\n\nexport type BREAK_OPPORTUNITIES = typeof BREAK_NOT_ALLOWED | typeof BREAK_ALLOWED | typeof BREAK_MANDATORY;\n\nconst _lineBreakAtIndex = (\n    codePoints: number[],\n    classTypes: number[],\n    indicies: number[],\n    index: number,\n    forbiddenBreaks?: boolean[]\n): BREAK_OPPORTUNITIES => {\n    if (indicies[index] === 0) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    let currentIndex = index - 1;\n    if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    let beforeIndex = currentIndex - 1;\n    let afterIndex = currentIndex + 1;\n    let current = classTypes[currentIndex];\n\n    // LB4 Always break after hard line breaks.\n    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.\n    let before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;\n    let next = classTypes[afterIndex];\n\n    if (current === CR && next === LF) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    if (HARD_LINE_BREAKS.indexOf(current) !== -1) {\n        return BREAK_MANDATORY;\n    }\n\n    // LB6 Do not break before hard line breaks.\n    if (HARD_LINE_BREAKS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB7 Do not break before spaces or zero width space.\n    if (SPACE.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {\n        return BREAK_ALLOWED;\n    }\n\n    // LB8a Do not break after a zero width joiner.\n    if (UnicodeTrie.get(codePoints[currentIndex]) === ZWJ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // zwj emojis\n    if ((current === EB || current === EM) && UnicodeTrie.get(codePoints[afterIndex]) === ZWJ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB11 Do not break before or after Word joiner and related characters.\n    if (current === WJ || next === WJ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB12 Do not break after NBSP and related characters.\n    if (current === GL) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.\n    if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB13 Do not break before ‘]’ or ‘!’ or ‘;’ or ‘/’, even after spaces.\n    if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB14 Do not break after ‘[’, even after spaces.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB15 Do not break within ‘”[’, even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB17 Do not break within ‘——’, even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB18 Break after spaces.\n    if (current === SP) {\n        return BREAK_ALLOWED;\n    }\n\n    // LB19 Do not break before or after quotation marks, such as ‘ ” ’.\n    if (current === QU || next === QU) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB20 Break before and after unresolved CB.\n    if (next === CB || current === CB) {\n        return BREAK_ALLOWED;\n    }\n\n    // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.\n    if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB21a Don't break after Hebrew + Hyphen.\n    if (before === HL && HYPHEN.indexOf(current) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB21b Don’t break between Solidus and Hebrew letters.\n    if (current === SY && next === HL) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB22 Do not break before ellipsis.\n    if (next === IN) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB23 Do not break between digits and letters.\n    if ((ALPHABETICS.indexOf(next) !== -1 && current === NU) || (ALPHABETICS.indexOf(current) !== -1 && next === NU)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.\n    if (\n        (current === PR && [ID, EB, EM].indexOf(next) !== -1) ||\n        ([ID, EB, EM].indexOf(current) !== -1 && next === PO)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.\n    if (\n        (ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1) ||\n        (PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB25 Do not break between the following pairs of classes relevant to numbers:\n    if (\n        // (PR | PO) × ( OP | HY )? NU\n        ([PR, PO].indexOf(current) !== -1 &&\n            (next === NU || ([OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU))) ||\n        // ( OP | HY ) × NU\n        ([OP, HY].indexOf(current) !== -1 && next === NU) ||\n        // NU ×\t(NU | SY | IS)\n        (current === NU && [NU, SY, IS].indexOf(next) !== -1)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // NU (NU | SY | IS)* × (NU | SY | IS | CL | CP)\n    if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {\n        let prevIndex = currentIndex;\n        while (prevIndex >= 0) {\n            let type = classTypes[prevIndex];\n            if (type === NU) {\n                return BREAK_NOT_ALLOWED;\n            } else if ([SY, IS].indexOf(type) !== -1) {\n                prevIndex--;\n            } else {\n                break;\n            }\n        }\n    }\n\n    // NU (NU | SY | IS)* (CL | CP)? × (PO | PR))\n    if ([PR, PO].indexOf(next) !== -1) {\n        let prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;\n        while (prevIndex >= 0) {\n            let type = classTypes[prevIndex];\n            if (type === NU) {\n                return BREAK_NOT_ALLOWED;\n            } else if ([SY, IS].indexOf(type) !== -1) {\n                prevIndex--;\n            } else {\n                break;\n            }\n        }\n    }\n\n    // LB26 Do not break a Korean syllable.\n    if (\n        (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1) ||\n        ([JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1) ||\n        ([JT, H3].indexOf(current) !== -1 && next === JT)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB27 Treat a Korean Syllable Block the same as ID.\n    if (\n        (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1) ||\n        (KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB28 Do not break between alphabetics (“at”).\n    if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB29 Do not break between numeric punctuation and alphabetics (“e.g.”).\n    if (current === IS && ALPHABETICS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.\n    if (\n        (ALPHABETICS.concat(NU).indexOf(current) !== -1 &&\n            next === OP &&\n            ea_OP.indexOf(codePoints[afterIndex]) === -1) ||\n        (ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB30a Break between two regional indicator symbols if and only if there are an even number of regional\n    // indicators preceding the position of the break.\n    if (current === RI && next === RI) {\n        let i = indicies[currentIndex];\n        let count = 1;\n        while (i > 0) {\n            i--;\n            if (classTypes[i] === RI) {\n                count++;\n            } else {\n                break;\n            }\n        }\n        if (count % 2 !== 0) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n\n    // LB30b Do not break between an emoji base and an emoji modifier.\n    if (current === EB && next === EM) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    return BREAK_ALLOWED;\n};\n\nexport const lineBreakAtIndex = (codePoints: number[], index: number): BREAK_OPPORTUNITIES => {\n    // LB2 Never break at the start of text.\n    if (index === 0) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB3 Always break at the end of text.\n    if (index >= codePoints.length) {\n        return BREAK_MANDATORY;\n    }\n\n    const [indices, classTypes] = codePointsToCharacterClasses(codePoints);\n\n    return _lineBreakAtIndex(codePoints, classTypes, indices, index);\n};\n\nexport type LINE_BREAK = 'auto' | 'normal' | 'strict';\nexport type WORD_BREAK = 'normal' | 'break-all' | 'break-word' | 'keep-all';\n\ninterface IOptions {\n    lineBreak?: LINE_BREAK;\n    wordBreak?: WORD_BREAK;\n}\n\nconst cssFormattedClasses = (codePoints: number[], options?: IOptions): [number[], number[], boolean[] | undefined] => {\n    if (!options) {\n        options = {lineBreak: 'normal', wordBreak: 'normal'};\n    }\n    let [indicies, classTypes, isLetterNumber] = codePointsToCharacterClasses(codePoints, options.lineBreak);\n\n    if (options.wordBreak === 'break-all' || options.wordBreak === 'break-word') {\n        classTypes = classTypes.map((type) => ([NU, AL, SA].indexOf(type) !== -1 ? ID : type));\n    }\n\n    const forbiddenBreakpoints =\n        options.wordBreak === 'keep-all'\n            ? isLetterNumber.map((letterNumber, i) => {\n                  return letterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff;\n              })\n            : undefined;\n\n    return [indicies, classTypes, forbiddenBreakpoints];\n};\n\nexport const inlineBreakOpportunities = (str: string, options?: IOptions): string => {\n    const codePoints = toCodePoints(str);\n    let output = BREAK_NOT_ALLOWED;\n    const [indicies, classTypes, forbiddenBreakpoints] = cssFormattedClasses(codePoints, options);\n\n    codePoints.forEach((codePoint, i) => {\n        output +=\n            fromCodePoint(codePoint) +\n            (i >= codePoints.length - 1\n                ? BREAK_MANDATORY\n                : _lineBreakAtIndex(codePoints, classTypes, indicies, i + 1, forbiddenBreakpoints));\n    });\n\n    return output;\n};\n\nclass Break {\n    private readonly codePoints: number[];\n    readonly required: boolean;\n    readonly start: number;\n    readonly end: number;\n\n    constructor(codePoints: number[], lineBreak: string, start: number, end: number) {\n        this.codePoints = codePoints;\n        this.required = lineBreak === BREAK_MANDATORY;\n        this.start = start;\n        this.end = end;\n    }\n\n    slice(): string {\n        return fromCodePoint(...this.codePoints.slice(this.start, this.end));\n    }\n}\n\nexport type LineBreak =\n    | {\n          done: true;\n          value: null;\n      }\n    | {\n          done: false;\n          value: Break;\n      };\n\ninterface ILineBreakIterator {\n    next: () => LineBreak;\n}\n\nexport const LineBreaker = (str: string, options?: IOptions): ILineBreakIterator => {\n    const codePoints = toCodePoints(str);\n    const [indicies, classTypes, forbiddenBreakpoints] = cssFormattedClasses(codePoints, options);\n    const length = codePoints.length;\n    let lastEnd = 0;\n    let nextIndex = 0;\n\n    return {\n        next: () => {\n            if (nextIndex >= length) {\n                return {done: true, value: null};\n            }\n            let lineBreak = BREAK_NOT_ALLOWED;\n            while (\n                nextIndex < length &&\n                (lineBreak = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) ===\n                    BREAK_NOT_ALLOWED\n            ) {}\n\n            if (lineBreak !== BREAK_NOT_ALLOWED || nextIndex === length) {\n                const value = new Break(codePoints, lineBreak, lastEnd, nextIndex);\n                lastEnd = nextIndex;\n                return {value, done: false};\n            }\n\n            return {done: true, value: null};\n        },\n    };\n};\n","// https://www.w3.org/TR/css-syntax-3\n\nimport {fromCodePoint, toCodePoints} from 'css-line-break';\n\nexport const enum TokenType {\n    STRING_TOKEN,\n    BAD_STRING_TOKEN,\n    LEFT_PARENTHESIS_TOKEN,\n    RIGHT_PARENTHESIS_TOKEN,\n    COMMA_TOKEN,\n    HASH_TOKEN,\n    DELIM_TOKEN,\n    AT_KEYWORD_TOKEN,\n    PREFIX_MATCH_TOKEN,\n    DASH_MATCH_TOKEN,\n    INCLUDE_MATCH_TOKEN,\n    LEFT_CURLY_BRACKET_TOKEN,\n    RIGHT_CURLY_BRACKET_TOKEN,\n    SUFFIX_MATCH_TOKEN,\n    SUBSTRING_MATCH_TOKEN,\n    DIMENSION_TOKEN,\n    PERCENTAGE_TOKEN,\n    NUMBER_TOKEN,\n    FUNCTION,\n    FUNCTION_TOKEN,\n    IDENT_TOKEN,\n    COLUMN_TOKEN,\n    URL_TOKEN,\n    BAD_URL_TOKEN,\n    CDC_TOKEN,\n    CDO_TOKEN,\n    COLON_TOKEN,\n    SEMICOLON_TOKEN,\n    LEFT_SQUARE_BRACKET_TOKEN,\n    RIGHT_SQUARE_BRACKET_TOKEN,\n    UNICODE_RANGE_TOKEN,\n    WHITESPACE_TOKEN,\n    EOF_TOKEN\n}\n\ninterface IToken {\n    type: TokenType;\n}\n\nexport interface Token extends IToken {\n    type:\n        | TokenType.BAD_URL_TOKEN\n        | TokenType.BAD_STRING_TOKEN\n        | TokenType.LEFT_PARENTHESIS_TOKEN\n        | TokenType.RIGHT_PARENTHESIS_TOKEN\n        | TokenType.COMMA_TOKEN\n        | TokenType.SUBSTRING_MATCH_TOKEN\n        | TokenType.PREFIX_MATCH_TOKEN\n        | TokenType.SUFFIX_MATCH_TOKEN\n        | TokenType.COLON_TOKEN\n        | TokenType.SEMICOLON_TOKEN\n        | TokenType.LEFT_SQUARE_BRACKET_TOKEN\n        | TokenType.RIGHT_SQUARE_BRACKET_TOKEN\n        | TokenType.LEFT_CURLY_BRACKET_TOKEN\n        | TokenType.RIGHT_CURLY_BRACKET_TOKEN\n        | TokenType.DASH_MATCH_TOKEN\n        | TokenType.INCLUDE_MATCH_TOKEN\n        | TokenType.COLUMN_TOKEN\n        | TokenType.WHITESPACE_TOKEN\n        | TokenType.CDC_TOKEN\n        | TokenType.CDO_TOKEN\n        | TokenType.EOF_TOKEN;\n}\n\nexport interface StringValueToken extends IToken {\n    type:\n        | TokenType.STRING_TOKEN\n        | TokenType.DELIM_TOKEN\n        | TokenType.FUNCTION_TOKEN\n        | TokenType.IDENT_TOKEN\n        | TokenType.URL_TOKEN\n        | TokenType.AT_KEYWORD_TOKEN;\n    value: string;\n}\n\nexport interface HashToken extends IToken {\n    type: TokenType.HASH_TOKEN;\n    flags: number;\n    value: string;\n}\n\nexport interface NumberValueToken extends IToken {\n    type: TokenType.PERCENTAGE_TOKEN | TokenType.NUMBER_TOKEN;\n    flags: number;\n    number: number;\n}\n\nexport interface DimensionToken extends IToken {\n    type: TokenType.DIMENSION_TOKEN;\n    flags: number;\n    unit: string;\n    number: number;\n}\n\nexport interface UnicodeRangeToken extends IToken {\n    type: TokenType.UNICODE_RANGE_TOKEN;\n    start: number;\n    end: number;\n}\n\nexport type CSSToken = Token | StringValueToken | NumberValueToken | DimensionToken | UnicodeRangeToken | HashToken;\n\nexport const FLAG_UNRESTRICTED = 1 << 0;\nexport const FLAG_ID = 1 << 1;\nexport const FLAG_INTEGER = 1 << 2;\nexport const FLAG_NUMBER = 1 << 3;\n\nconst LINE_FEED = 0x000a;\nconst SOLIDUS = 0x002f;\nconst REVERSE_SOLIDUS = 0x005c;\nconst CHARACTER_TABULATION = 0x0009;\nconst SPACE = 0x0020;\nconst QUOTATION_MARK = 0x0022;\nconst EQUALS_SIGN = 0x003d;\nconst NUMBER_SIGN = 0x0023;\nconst DOLLAR_SIGN = 0x0024;\nconst PERCENTAGE_SIGN = 0x0025;\nconst APOSTROPHE = 0x0027;\nconst LEFT_PARENTHESIS = 0x0028;\nconst RIGHT_PARENTHESIS = 0x0029;\nconst LOW_LINE = 0x005f;\nconst HYPHEN_MINUS = 0x002d;\nconst EXCLAMATION_MARK = 0x0021;\nconst LESS_THAN_SIGN = 0x003c;\nconst GREATER_THAN_SIGN = 0x003e;\nconst COMMERCIAL_AT = 0x0040;\nconst LEFT_SQUARE_BRACKET = 0x005b;\nconst RIGHT_SQUARE_BRACKET = 0x005d;\nconst CIRCUMFLEX_ACCENT = 0x003d;\nconst LEFT_CURLY_BRACKET = 0x007b;\nconst QUESTION_MARK = 0x003f;\nconst RIGHT_CURLY_BRACKET = 0x007d;\nconst VERTICAL_LINE = 0x007c;\nconst TILDE = 0x007e;\nconst CONTROL = 0x0080;\nconst REPLACEMENT_CHARACTER = 0xfffd;\nconst ASTERISK = 0x002a;\nconst PLUS_SIGN = 0x002b;\nconst COMMA = 0x002c;\nconst COLON = 0x003a;\nconst SEMICOLON = 0x003b;\nconst FULL_STOP = 0x002e;\nconst NULL = 0x0000;\nconst BACKSPACE = 0x0008;\nconst LINE_TABULATION = 0x000b;\nconst SHIFT_OUT = 0x000e;\nconst INFORMATION_SEPARATOR_ONE = 0x001f;\nconst DELETE = 0x007f;\nconst EOF = -1;\nconst ZERO = 0x0030;\nconst a = 0x0061;\nconst e = 0x0065;\nconst f = 0x0066;\nconst u = 0x0075;\nconst z = 0x007a;\nconst A = 0x0041;\nconst E = 0x0045;\nconst F = 0x0046;\nconst U = 0x0055;\nconst Z = 0x005a;\n\nconst isDigit = (codePoint: number) => codePoint >= ZERO && codePoint <= 0x0039;\nconst isSurrogateCodePoint = (codePoint: number) => codePoint >= 0xd800 && codePoint <= 0xdfff;\nconst isHex = (codePoint: number) =>\n    isDigit(codePoint) || (codePoint >= A && codePoint <= F) || (codePoint >= a && codePoint <= f);\nconst isLowerCaseLetter = (codePoint: number) => codePoint >= a && codePoint <= z;\nconst isUpperCaseLetter = (codePoint: number) => codePoint >= A && codePoint <= Z;\nconst isLetter = (codePoint: number) => isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint);\nconst isNonASCIICodePoint = (codePoint: number) => codePoint >= CONTROL;\nconst isWhiteSpace = (codePoint: number): boolean =>\n    codePoint === LINE_FEED || codePoint === CHARACTER_TABULATION || codePoint === SPACE;\nconst isNameStartCodePoint = (codePoint: number): boolean =>\n    isLetter(codePoint) || isNonASCIICodePoint(codePoint) || codePoint === LOW_LINE;\nconst isNameCodePoint = (codePoint: number): boolean =>\n    isNameStartCodePoint(codePoint) || isDigit(codePoint) || codePoint === HYPHEN_MINUS;\nconst isNonPrintableCodePoint = (codePoint: number): boolean => {\n    return (\n        (codePoint >= NULL && codePoint <= BACKSPACE) ||\n        codePoint === LINE_TABULATION ||\n        (codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE) ||\n        codePoint === DELETE\n    );\n};\nconst isValidEscape = (c1: number, c2: number): boolean => {\n    if (c1 !== REVERSE_SOLIDUS) {\n        return false;\n    }\n\n    return c2 !== LINE_FEED;\n};\nconst isIdentifierStart = (c1: number, c2: number, c3: number): boolean => {\n    if (c1 === HYPHEN_MINUS) {\n        return isNameStartCodePoint(c2) || isValidEscape(c2, c3);\n    } else if (isNameStartCodePoint(c1)) {\n        return true;\n    } else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c2)) {\n        return true;\n    }\n    return false;\n};\n\nconst isNumberStart = (c1: number, c2: number, c3: number): boolean => {\n    if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n        if (isDigit(c2)) {\n            return true;\n        }\n\n        return c2 === FULL_STOP && isDigit(c3);\n    }\n\n    if (c1 === FULL_STOP) {\n        return isDigit(c2);\n    }\n\n    return isDigit(c1);\n};\n\nconst stringToNumber = (codePoints: number[]): number => {\n    let c = 0;\n    let sign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            sign = -1;\n        }\n        c++;\n    }\n\n    const integers = [];\n\n    while (isDigit(codePoints[c])) {\n        integers.push(codePoints[c++]);\n    }\n\n    const int = integers.length ? parseInt(fromCodePoint(...integers), 10) : 0;\n\n    if (codePoints[c] === FULL_STOP) {\n        c++;\n    }\n\n    const fraction = [];\n    while (isDigit(codePoints[c])) {\n        fraction.push(codePoints[c++]);\n    }\n\n    const fracd = fraction.length;\n    const frac = fracd ? parseInt(fromCodePoint(...fraction), 10) : 0;\n\n    if (codePoints[c] === E || codePoints[c] === e) {\n        c++;\n    }\n\n    let expsign = 1;\n\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            expsign = -1;\n        }\n        c++;\n    }\n\n    const exponent = [];\n\n    while (isDigit(codePoints[c])) {\n        exponent.push(codePoints[c++]);\n    }\n\n    const exp = exponent.length ? parseInt(fromCodePoint(...exponent), 10) : 0;\n\n    return sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp);\n};\n\nconst LEFT_PARENTHESIS_TOKEN: Token = {\n    type: TokenType.LEFT_PARENTHESIS_TOKEN\n};\nconst RIGHT_PARENTHESIS_TOKEN: Token = {\n    type: TokenType.RIGHT_PARENTHESIS_TOKEN\n};\nconst COMMA_TOKEN: Token = {type: TokenType.COMMA_TOKEN};\nconst SUFFIX_MATCH_TOKEN: Token = {type: TokenType.SUFFIX_MATCH_TOKEN};\nconst PREFIX_MATCH_TOKEN: Token = {type: TokenType.PREFIX_MATCH_TOKEN};\nconst COLUMN_TOKEN: Token = {type: TokenType.COLUMN_TOKEN};\nconst DASH_MATCH_TOKEN: Token = {type: TokenType.DASH_MATCH_TOKEN};\nconst INCLUDE_MATCH_TOKEN: Token = {type: TokenType.INCLUDE_MATCH_TOKEN};\nconst LEFT_CURLY_BRACKET_TOKEN: Token = {\n    type: TokenType.LEFT_CURLY_BRACKET_TOKEN\n};\nconst RIGHT_CURLY_BRACKET_TOKEN: Token = {\n    type: TokenType.RIGHT_CURLY_BRACKET_TOKEN\n};\nconst SUBSTRING_MATCH_TOKEN: Token = {type: TokenType.SUBSTRING_MATCH_TOKEN};\nconst BAD_URL_TOKEN: Token = {type: TokenType.BAD_URL_TOKEN};\nconst BAD_STRING_TOKEN: Token = {type: TokenType.BAD_STRING_TOKEN};\nconst CDO_TOKEN: Token = {type: TokenType.CDO_TOKEN};\nconst CDC_TOKEN: Token = {type: TokenType.CDC_TOKEN};\nconst COLON_TOKEN: Token = {type: TokenType.COLON_TOKEN};\nconst SEMICOLON_TOKEN: Token = {type: TokenType.SEMICOLON_TOKEN};\nconst LEFT_SQUARE_BRACKET_TOKEN: Token = {\n    type: TokenType.LEFT_SQUARE_BRACKET_TOKEN\n};\nconst RIGHT_SQUARE_BRACKET_TOKEN: Token = {\n    type: TokenType.RIGHT_SQUARE_BRACKET_TOKEN\n};\nconst WHITESPACE_TOKEN: Token = {type: TokenType.WHITESPACE_TOKEN};\nexport const EOF_TOKEN: Token = {type: TokenType.EOF_TOKEN};\n\nexport class Tokenizer {\n    private _value: number[];\n\n    constructor() {\n        this._value = [];\n    }\n\n    write(chunk: string): void {\n        this._value = this._value.concat(toCodePoints(chunk));\n    }\n\n    read(): CSSToken[] {\n        const tokens = [];\n        let token = this.consumeToken();\n        while (token !== EOF_TOKEN) {\n            tokens.push(token);\n            token = this.consumeToken();\n        }\n        return tokens;\n    }\n\n    private consumeToken(): CSSToken {\n        const codePoint = this.consumeCodePoint();\n\n        switch (codePoint) {\n            case QUOTATION_MARK:\n                return this.consumeStringToken(QUOTATION_MARK);\n            case NUMBER_SIGN:\n                const c1 = this.peekCodePoint(0);\n                const c2 = this.peekCodePoint(1);\n                const c3 = this.peekCodePoint(2);\n                if (isNameCodePoint(c1) || isValidEscape(c2, c3)) {\n                    const flags = isIdentifierStart(c1, c2, c3) ? FLAG_ID : FLAG_UNRESTRICTED;\n                    const value = this.consumeName();\n\n                    return {type: TokenType.HASH_TOKEN, value, flags};\n                }\n                break;\n            case DOLLAR_SIGN:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUFFIX_MATCH_TOKEN;\n                }\n                break;\n            case APOSTROPHE:\n                return this.consumeStringToken(APOSTROPHE);\n            case LEFT_PARENTHESIS:\n                return LEFT_PARENTHESIS_TOKEN;\n            case RIGHT_PARENTHESIS:\n                return RIGHT_PARENTHESIS_TOKEN;\n            case ASTERISK:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUBSTRING_MATCH_TOKEN;\n                }\n                break;\n            case PLUS_SIGN:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case COMMA:\n                return COMMA_TOKEN;\n            case HYPHEN_MINUS:\n                const e1 = codePoint;\n                const e2 = this.peekCodePoint(0);\n                const e3 = this.peekCodePoint(1);\n\n                if (isNumberStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n\n                if (isIdentifierStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n\n                if (e2 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDC_TOKEN;\n                }\n                break;\n\n            case FULL_STOP:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case SOLIDUS:\n                if (this.peekCodePoint(0) === ASTERISK) {\n                    this.consumeCodePoint();\n                    while (true) {\n                        let c = this.consumeCodePoint();\n                        if (c === ASTERISK) {\n                            c = this.consumeCodePoint();\n                            if (c === SOLIDUS) {\n                                return this.consumeToken();\n                            }\n                        }\n                        if (c === EOF) {\n                            return this.consumeToken();\n                        }\n                    }\n                }\n                break;\n            case COLON:\n                return COLON_TOKEN;\n            case SEMICOLON:\n                return SEMICOLON_TOKEN;\n            case LESS_THAN_SIGN:\n                if (\n                    this.peekCodePoint(0) === EXCLAMATION_MARK &&\n                    this.peekCodePoint(1) === HYPHEN_MINUS &&\n                    this.peekCodePoint(2) === HYPHEN_MINUS\n                ) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDO_TOKEN;\n                }\n                break;\n            case COMMERCIAL_AT:\n                const a1 = this.peekCodePoint(0);\n                const a2 = this.peekCodePoint(1);\n                const a3 = this.peekCodePoint(2);\n                if (isIdentifierStart(a1, a2, a3)) {\n                    const value = this.consumeName();\n                    return {type: TokenType.AT_KEYWORD_TOKEN, value};\n                }\n                break;\n            case LEFT_SQUARE_BRACKET:\n                return LEFT_SQUARE_BRACKET_TOKEN;\n            case REVERSE_SOLIDUS:\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n                break;\n            case RIGHT_SQUARE_BRACKET:\n                return RIGHT_SQUARE_BRACKET_TOKEN;\n            case CIRCUMFLEX_ACCENT:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return PREFIX_MATCH_TOKEN;\n                }\n                break;\n            case LEFT_CURLY_BRACKET:\n                return LEFT_CURLY_BRACKET_TOKEN;\n            case RIGHT_CURLY_BRACKET:\n                return RIGHT_CURLY_BRACKET_TOKEN;\n            case u:\n            case U:\n                const u1 = this.peekCodePoint(0);\n                const u2 = this.peekCodePoint(1);\n                if (u1 === PLUS_SIGN && (isHex(u2) || u2 === QUESTION_MARK)) {\n                    this.consumeCodePoint();\n                    this.consumeUnicodeRangeToken();\n                }\n                this.reconsumeCodePoint(codePoint);\n                return this.consumeIdentLikeToken();\n            case VERTICAL_LINE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return DASH_MATCH_TOKEN;\n                }\n                if (this.peekCodePoint(0) === VERTICAL_LINE) {\n                    this.consumeCodePoint();\n                    return COLUMN_TOKEN;\n                }\n                break;\n            case TILDE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return INCLUDE_MATCH_TOKEN;\n                }\n                break;\n            case EOF:\n                return EOF_TOKEN;\n        }\n\n        if (isWhiteSpace(codePoint)) {\n            this.consumeWhiteSpace();\n            return WHITESPACE_TOKEN;\n        }\n\n        if (isDigit(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n        }\n\n        if (isNameStartCodePoint(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeIdentLikeToken();\n        }\n\n        return {type: TokenType.DELIM_TOKEN, value: fromCodePoint(codePoint)};\n    }\n\n    private consumeCodePoint(): number {\n        const value = this._value.shift();\n\n        return typeof value === 'undefined' ? -1 : value;\n    }\n\n    private reconsumeCodePoint(codePoint: number) {\n        this._value.unshift(codePoint);\n    }\n\n    private peekCodePoint(delta: number): number {\n        if (delta >= this._value.length) {\n            return -1;\n        }\n\n        return this._value[delta];\n    }\n\n    private consumeUnicodeRangeToken(): UnicodeRangeToken {\n        const digits = [];\n        let codePoint = this.consumeCodePoint();\n        while (isHex(codePoint) && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n        }\n        let questionMarks = false;\n        while (codePoint === QUESTION_MARK && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n            questionMarks = true;\n        }\n\n        if (questionMarks) {\n            const start = parseInt(\n                fromCodePoint(...digits.map((digit) => (digit === QUESTION_MARK ? ZERO : digit))),\n                16\n            );\n            const end = parseInt(fromCodePoint(...digits.map((digit) => (digit === QUESTION_MARK ? F : digit))), 16);\n            return {type: TokenType.UNICODE_RANGE_TOKEN, start, end};\n        }\n\n        const start = parseInt(fromCodePoint(...digits), 16);\n        if (this.peekCodePoint(0) === HYPHEN_MINUS && isHex(this.peekCodePoint(1))) {\n            this.consumeCodePoint();\n            codePoint = this.consumeCodePoint();\n            const endDigits = [];\n            while (isHex(codePoint) && endDigits.length < 6) {\n                endDigits.push(codePoint);\n                codePoint = this.consumeCodePoint();\n            }\n            const end = parseInt(fromCodePoint(...endDigits), 16);\n\n            return {type: TokenType.UNICODE_RANGE_TOKEN, start, end};\n        } else {\n            return {type: TokenType.UNICODE_RANGE_TOKEN, start, end: start};\n        }\n    }\n\n    private consumeIdentLikeToken(): StringValueToken | Token {\n        const value = this.consumeName();\n        if (value.toLowerCase() === 'url' && this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return this.consumeUrlToken();\n        } else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return {type: TokenType.FUNCTION_TOKEN, value};\n        }\n\n        return {type: TokenType.IDENT_TOKEN, value};\n    }\n\n    private consumeUrlToken(): StringValueToken | Token {\n        const value = [];\n        this.consumeWhiteSpace();\n\n        if (this.peekCodePoint(0) === EOF) {\n            return {type: TokenType.URL_TOKEN, value: ''};\n        }\n\n        const next = this.peekCodePoint(0);\n        if (next === APOSTROPHE || next === QUOTATION_MARK) {\n            const stringToken = this.consumeStringToken(this.consumeCodePoint());\n            if (stringToken.type === TokenType.STRING_TOKEN) {\n                this.consumeWhiteSpace();\n\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return {type: TokenType.URL_TOKEN, value: stringToken.value};\n                }\n            }\n\n            this.consumeBadUrlRemnants();\n            return BAD_URL_TOKEN;\n        }\n\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {\n                return {type: TokenType.URL_TOKEN, value: fromCodePoint(...value)};\n            } else if (isWhiteSpace(codePoint)) {\n                this.consumeWhiteSpace();\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return {type: TokenType.URL_TOKEN, value: fromCodePoint(...value)};\n                }\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            } else if (\n                codePoint === QUOTATION_MARK ||\n                codePoint === APOSTROPHE ||\n                codePoint === LEFT_PARENTHESIS ||\n                isNonPrintableCodePoint(codePoint)\n            ) {\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            } else if (codePoint === REVERSE_SOLIDUS) {\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    value.push(this.consumeEscapedCodePoint());\n                } else {\n                    this.consumeBadUrlRemnants();\n                    return BAD_URL_TOKEN;\n                }\n            } else {\n                value.push(codePoint);\n            }\n        }\n    }\n\n    private consumeWhiteSpace(): void {\n        while (isWhiteSpace(this.peekCodePoint(0))) {\n            this.consumeCodePoint();\n        }\n    }\n\n    private consumeBadUrlRemnants(): void {\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {\n                return;\n            }\n\n            if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                this.consumeEscapedCodePoint();\n            }\n        }\n    }\n\n    private consumeStringSlice(count: number): string {\n        const SLICE_STACK_SIZE = 50000;\n        let value = '';\n        while (count > 0) {\n            const amount = Math.min(SLICE_STACK_SIZE, count);\n            value += fromCodePoint(...this._value.splice(0, amount));\n            count -= amount;\n        }\n        this._value.shift();\n\n        return value;\n    }\n\n    private consumeStringToken(endingCodePoint: number): StringValueToken | Token {\n        let value = '';\n        let i = 0;\n\n        do {\n            const codePoint = this._value[i];\n            if (codePoint === EOF || codePoint === undefined || codePoint === endingCodePoint) {\n                value += this.consumeStringSlice(i);\n                return {type: TokenType.STRING_TOKEN, value};\n            }\n\n            if (codePoint === LINE_FEED) {\n                this._value.splice(0, i);\n                return BAD_STRING_TOKEN;\n            }\n\n            if (codePoint === REVERSE_SOLIDUS) {\n                const next = this._value[i + 1];\n                if (next !== EOF && next !== undefined) {\n                    if (next === LINE_FEED) {\n                        value += this.consumeStringSlice(i);\n                        i = -1;\n                        this._value.shift();\n                    } else if (isValidEscape(codePoint, next)) {\n                        value += this.consumeStringSlice(i);\n                        value += fromCodePoint(this.consumeEscapedCodePoint());\n                        i = -1;\n                    }\n                }\n            }\n\n            i++;\n        } while (true);\n    }\n\n    private consumeNumber() {\n        const repr = [];\n        let type = FLAG_INTEGER;\n        let c1 = this.peekCodePoint(0);\n        if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n            repr.push(this.consumeCodePoint());\n        }\n\n        while (isDigit(this.peekCodePoint(0))) {\n            repr.push(this.consumeCodePoint());\n        }\n        c1 = this.peekCodePoint(0);\n        let c2 = this.peekCodePoint(1);\n        if (c1 === FULL_STOP && isDigit(c2)) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n\n        c1 = this.peekCodePoint(0);\n        c2 = this.peekCodePoint(1);\n        const c3 = this.peekCodePoint(2);\n        if ((c1 === E || c1 === e) && (((c2 === PLUS_SIGN || c2 === HYPHEN_MINUS) && isDigit(c3)) || isDigit(c2))) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n\n        return [stringToNumber(repr), type];\n    }\n\n    private consumeNumericToken(): NumberValueToken | DimensionToken {\n        const [number, flags] = this.consumeNumber();\n        const c1 = this.peekCodePoint(0);\n        const c2 = this.peekCodePoint(1);\n        const c3 = this.peekCodePoint(2);\n\n        if (isIdentifierStart(c1, c2, c3)) {\n            const unit = this.consumeName();\n            return {type: TokenType.DIMENSION_TOKEN, number, flags, unit};\n        }\n\n        if (c1 === PERCENTAGE_SIGN) {\n            this.consumeCodePoint();\n            return {type: TokenType.PERCENTAGE_TOKEN, number, flags};\n        }\n\n        return {type: TokenType.NUMBER_TOKEN, number, flags};\n    }\n\n    private consumeEscapedCodePoint(): number {\n        const codePoint = this.consumeCodePoint();\n\n        if (isHex(codePoint)) {\n            let hex = fromCodePoint(codePoint);\n            while (isHex(this.peekCodePoint(0)) && hex.length < 6) {\n                hex += fromCodePoint(this.consumeCodePoint());\n            }\n\n            if (isWhiteSpace(this.peekCodePoint(0))) {\n                this.consumeCodePoint();\n            }\n\n            const hexCodePoint = parseInt(hex, 16);\n\n            if (hexCodePoint === 0 || isSurrogateCodePoint(hexCodePoint) || hexCodePoint > 0x10ffff) {\n                return REPLACEMENT_CHARACTER;\n            }\n\n            return hexCodePoint;\n        }\n\n        if (codePoint === EOF) {\n            return REPLACEMENT_CHARACTER;\n        }\n\n        return codePoint;\n    }\n\n    private consumeName(): string {\n        let result = '';\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (isNameCodePoint(codePoint)) {\n                result += fromCodePoint(codePoint);\n            } else if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                result += fromCodePoint(this.consumeEscapedCodePoint());\n            } else {\n                this.reconsumeCodePoint(codePoint);\n                return result;\n            }\n        }\n    }\n}\n","import {\n    CSSToken,\n    DimensionToken,\n    EOF_TOKEN,\n    NumberValueToken,\n    StringValueToken,\n    Tokenizer,\n    TokenType\n} from './tokenizer';\n\nexport type CSSBlockType =\n    | TokenType.LEFT_PARENTHESIS_TOKEN\n    | TokenType.LEFT_SQUARE_BRACKET_TOKEN\n    | TokenType.LEFT_CURLY_BRACKET_TOKEN;\n\nexport interface CSSBlock {\n    type: CSSBlockType;\n    values: CSSValue[];\n}\n\nexport interface CSSFunction {\n    type: TokenType.FUNCTION;\n    name: string;\n    values: CSSValue[];\n}\n\nexport type CSSValue = CSSFunction | CSSToken | CSSBlock;\n\nexport class Parser {\n    private _tokens: CSSToken[];\n\n    constructor(tokens: CSSToken[]) {\n        this._tokens = tokens;\n    }\n\n    static create(value: string): Parser {\n        const tokenizer = new Tokenizer();\n        tokenizer.write(value);\n        return new Parser(tokenizer.read());\n    }\n\n    static parseValue(value: string): CSSValue {\n        return Parser.create(value).parseComponentValue();\n    }\n\n    static parseValues(value: string): CSSValue[] {\n        return Parser.create(value).parseComponentValues();\n    }\n\n    parseComponentValue(): CSSValue {\n        let token = this.consumeToken();\n        while (token.type === TokenType.WHITESPACE_TOKEN) {\n            token = this.consumeToken();\n        }\n\n        if (token.type === TokenType.EOF_TOKEN) {\n            throw new SyntaxError(`Error parsing CSS component value, unexpected EOF`);\n        }\n\n        this.reconsumeToken(token);\n        const value = this.consumeComponentValue();\n\n        do {\n            token = this.consumeToken();\n        } while (token.type === TokenType.WHITESPACE_TOKEN);\n\n        if (token.type === TokenType.EOF_TOKEN) {\n            return value;\n        }\n\n        throw new SyntaxError(`Error parsing CSS component value, multiple values found when expecting only one`);\n    }\n\n    parseComponentValues(): CSSValue[] {\n        const values = [];\n        while (true) {\n            const value = this.consumeComponentValue();\n            if (value.type === TokenType.EOF_TOKEN) {\n                return values;\n            }\n            values.push(value);\n            values.push();\n        }\n    }\n\n    private consumeComponentValue(): CSSValue {\n        const token = this.consumeToken();\n\n        switch (token.type) {\n            case TokenType.LEFT_CURLY_BRACKET_TOKEN:\n            case TokenType.LEFT_SQUARE_BRACKET_TOKEN:\n            case TokenType.LEFT_PARENTHESIS_TOKEN:\n                return this.consumeSimpleBlock(token.type);\n            case TokenType.FUNCTION_TOKEN:\n                return this.consumeFunction(token);\n        }\n\n        return token;\n    }\n\n    private consumeSimpleBlock(type: CSSBlockType): CSSBlock {\n        const block: CSSBlock = {type, values: []};\n\n        let token = this.consumeToken();\n        while (true) {\n            if (token.type === TokenType.EOF_TOKEN || isEndingTokenFor(token, type)) {\n                return block;\n            }\n\n            this.reconsumeToken(token);\n            block.values.push(this.consumeComponentValue());\n            token = this.consumeToken();\n        }\n    }\n\n    private consumeFunction(functionToken: StringValueToken): CSSFunction {\n        const cssFunction: CSSFunction = {\n            name: functionToken.value,\n            values: [],\n            type: TokenType.FUNCTION\n        };\n\n        while (true) {\n            const token = this.consumeToken();\n            if (token.type === TokenType.EOF_TOKEN || token.type === TokenType.RIGHT_PARENTHESIS_TOKEN) {\n                return cssFunction;\n            }\n\n            this.reconsumeToken(token);\n            cssFunction.values.push(this.consumeComponentValue());\n        }\n    }\n\n    private consumeToken(): CSSToken {\n        const token = this._tokens.shift();\n        return typeof token === 'undefined' ? EOF_TOKEN : token;\n    }\n\n    private reconsumeToken(token: CSSToken): void {\n        this._tokens.unshift(token);\n    }\n}\n\nexport const isDimensionToken = (token: CSSValue): token is DimensionToken => token.type === TokenType.DIMENSION_TOKEN;\nexport const isNumberToken = (token: CSSValue): token is NumberValueToken => token.type === TokenType.NUMBER_TOKEN;\nexport const isIdentToken = (token: CSSValue): token is StringValueToken => token.type === TokenType.IDENT_TOKEN;\nexport const isStringToken = (token: CSSValue): token is StringValueToken => token.type === TokenType.STRING_TOKEN;\nexport const isIdentWithValue = (token: CSSValue, value: string): boolean =>\n    isIdentToken(token) && token.value === value;\n\nexport const nonWhiteSpace = (token: CSSValue): boolean => token.type !== TokenType.WHITESPACE_TOKEN;\nexport const nonFunctionArgSeparator = (token: CSSValue): boolean =>\n    token.type !== TokenType.WHITESPACE_TOKEN && token.type !== TokenType.COMMA_TOKEN;\n\nexport const parseFunctionArgs = (tokens: CSSValue[]): CSSValue[][] => {\n    const args: CSSValue[][] = [];\n    let arg: CSSValue[] = [];\n    tokens.forEach((token) => {\n        if (token.type === TokenType.COMMA_TOKEN) {\n            if (arg.length === 0) {\n                throw new Error(`Error parsing function args, zero tokens for arg`);\n            }\n            args.push(arg);\n            arg = [];\n            return;\n        }\n\n        if (token.type !== TokenType.WHITESPACE_TOKEN) {\n            arg.push(token);\n        }\n    });\n    if (arg.length) {\n        args.push(arg);\n    }\n\n    return args;\n};\n\nconst isEndingTokenFor = (token: CSSToken, type: CSSBlockType): boolean => {\n    if (type === TokenType.LEFT_CURLY_BRACKET_TOKEN && token.type === TokenType.RIGHT_CURLY_BRACKET_TOKEN) {\n        return true;\n    }\n    if (type === TokenType.LEFT_SQUARE_BRACKET_TOKEN && token.type === TokenType.RIGHT_SQUARE_BRACKET_TOKEN) {\n        return true;\n    }\n\n    return type === TokenType.LEFT_PARENTHESIS_TOKEN && token.type === TokenType.RIGHT_PARENTHESIS_TOKEN;\n};\n","import {CSSValue} from '../syntax/parser';\nimport {DimensionToken, NumberValueToken, TokenType} from '../syntax/tokenizer';\n\nexport type Length = DimensionToken | NumberValueToken;\n\nexport const isLength = (token: CSSValue): token is Length =>\n    token.type === TokenType.NUMBER_TOKEN || token.type === TokenType.DIMENSION_TOKEN;\n","import {DimensionToken, FLAG_INTEGER, NumberValueToken, TokenType} from '../syntax/tokenizer';\nimport {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {isLength} from './length';\nexport type LengthPercentage = DimensionToken | NumberValueToken;\nexport type LengthPercentageTuple = [LengthPercentage] | [LengthPercentage, LengthPercentage];\n\nexport const isLengthPercentage = (token: CSSValue): token is LengthPercentage =>\n    token.type === TokenType.PERCENTAGE_TOKEN || isLength(token);\nexport const parseLengthPercentageTuple = (tokens: LengthPercentage[]): LengthPercentageTuple =>\n    tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];\nexport const ZERO_LENGTH: NumberValueToken = {\n    type: TokenType.NUMBER_TOKEN,\n    number: 0,\n    flags: FLAG_INTEGER\n};\n\nexport const FIFTY_PERCENT: NumberValueToken = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 50,\n    flags: FLAG_INTEGER\n};\n\nexport const HUNDRED_PERCENT: NumberValueToken = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 100,\n    flags: FLAG_INTEGER\n};\n\nexport const getAbsoluteValueForTuple = (\n    tuple: LengthPercentageTuple,\n    width: number,\n    height: number\n): [number, number] => {\n    const [x, y] = tuple;\n    return [getAbsoluteValue(x, width), getAbsoluteValue(typeof y !== 'undefined' ? y : x, height)];\n};\nexport const getAbsoluteValue = (token: LengthPercentage, parent: number): number => {\n    if (token.type === TokenType.PERCENTAGE_TOKEN) {\n        return (token.number / 100) * parent;\n    }\n\n    if (isDimensionToken(token)) {\n        switch (token.unit) {\n            case 'rem':\n            case 'em':\n                return 16 * token.number; // TODO use correct font-size\n            case 'px':\n            default:\n                return token.number;\n        }\n    }\n\n    return token.number;\n};\n","import {CSSValue, isIdentToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {HUNDRED_PERCENT, ZERO_LENGTH} from './length-percentage';\nimport {GradientCorner} from './image';\nimport {Context} from '../../core/context';\n\nconst DEG = 'deg';\nconst GRAD = 'grad';\nconst RAD = 'rad';\nconst TURN = 'turn';\n\nexport const angle: ITypeDescriptor<number> = {\n    name: 'angle',\n    parse: (_context: Context, value: CSSValue): number => {\n        if (value.type === TokenType.DIMENSION_TOKEN) {\n            switch (value.unit) {\n                case DEG:\n                    return (Math.PI * value.number) / 180;\n                case GRAD:\n                    return (Math.PI / 200) * value.number;\n                case RAD:\n                    return value.number;\n                case TURN:\n                    return Math.PI * 2 * value.number;\n            }\n        }\n\n        throw new Error(`Unsupported angle type`);\n    }\n};\n\nexport const isAngle = (value: CSSValue): boolean => {\n    if (value.type === TokenType.DIMENSION_TOKEN) {\n        if (value.unit === DEG || value.unit === GRAD || value.unit === RAD || value.unit === TURN) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport const parseNamedSide = (tokens: CSSValue[]): number | GradientCorner => {\n    const sideOrCorner = tokens\n        .filter(isIdentToken)\n        .map((ident) => ident.value)\n        .join(' ');\n\n    switch (sideOrCorner) {\n        case 'to bottom right':\n        case 'to right bottom':\n        case 'left top':\n        case 'top left':\n            return [ZERO_LENGTH, ZERO_LENGTH];\n        case 'to top':\n        case 'bottom':\n            return deg(0);\n        case 'to bottom left':\n        case 'to left bottom':\n        case 'right top':\n        case 'top right':\n            return [ZERO_LENGTH, HUNDRED_PERCENT];\n        case 'to right':\n        case 'left':\n            return deg(90);\n        case 'to top left':\n        case 'to left top':\n        case 'right bottom':\n        case 'bottom right':\n            return [HUNDRED_PERCENT, HUNDRED_PERCENT];\n        case 'to bottom':\n        case 'top':\n            return deg(180);\n        case 'to top right':\n        case 'to right top':\n        case 'left bottom':\n        case 'bottom left':\n            return [HUNDRED_PERCENT, ZERO_LENGTH];\n        case 'to left':\n        case 'right':\n            return deg(270);\n    }\n\n    return 0;\n};\n\nexport const deg = (deg: number): number => (Math.PI * deg) / 180;\n","import {CSSValue, nonFunctionArgSeparator, Parser} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {angle, deg} from './angle';\nimport {getAbsoluteValue, isLengthPercentage} from './length-percentage';\nimport {Context} from '../../core/context';\nexport type Color = number;\n\nexport const color: ITypeDescriptor<Color> = {\n    name: 'color',\n    parse: (context: Context, value: CSSValue): Color => {\n        if (value.type === TokenType.FUNCTION) {\n            const colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];\n            if (typeof colorFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported color function \"${value.name}\"`);\n            }\n            return colorFunction(context, value.values);\n        }\n\n        if (value.type === TokenType.HASH_TOKEN) {\n            if (value.value.length === 3) {\n                const r = value.value.substring(0, 1);\n                const g = value.value.substring(1, 2);\n                const b = value.value.substring(2, 3);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), 1);\n            }\n\n            if (value.value.length === 4) {\n                const r = value.value.substring(0, 1);\n                const g = value.value.substring(1, 2);\n                const b = value.value.substring(2, 3);\n                const a = value.value.substring(3, 4);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), parseInt(a + a, 16) / 255);\n            }\n\n            if (value.value.length === 6) {\n                const r = value.value.substring(0, 2);\n                const g = value.value.substring(2, 4);\n                const b = value.value.substring(4, 6);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), 1);\n            }\n\n            if (value.value.length === 8) {\n                const r = value.value.substring(0, 2);\n                const g = value.value.substring(2, 4);\n                const b = value.value.substring(4, 6);\n                const a = value.value.substring(6, 8);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), parseInt(a, 16) / 255);\n            }\n        }\n\n        if (value.type === TokenType.IDENT_TOKEN) {\n            const namedColor = COLORS[value.value.toUpperCase()];\n            if (typeof namedColor !== 'undefined') {\n                return namedColor;\n            }\n        }\n\n        return COLORS.TRANSPARENT;\n    }\n};\n\nexport const isTransparent = (color: Color): boolean => (0xff & color) === 0;\n\nexport const asString = (color: Color): string => {\n    const alpha = 0xff & color;\n    const blue = 0xff & (color >> 8);\n    const green = 0xff & (color >> 16);\n    const red = 0xff & (color >> 24);\n    return alpha < 255 ? `rgba(${red},${green},${blue},${alpha / 255})` : `rgb(${red},${green},${blue})`;\n};\n\nexport const pack = (r: number, g: number, b: number, a: number): Color =>\n    ((r << 24) | (g << 16) | (b << 8) | (Math.round(a * 255) << 0)) >>> 0;\n\nconst getTokenColorValue = (token: CSSValue, i: number): number => {\n    if (token.type === TokenType.NUMBER_TOKEN) {\n        return token.number;\n    }\n\n    if (token.type === TokenType.PERCENTAGE_TOKEN) {\n        const max = i === 3 ? 1 : 255;\n        return i === 3 ? (token.number / 100) * max : Math.round((token.number / 100) * max);\n    }\n\n    return 0;\n};\n\nconst rgb = (_context: Context, args: CSSValue[]): number => {\n    const tokens = args.filter(nonFunctionArgSeparator);\n\n    if (tokens.length === 3) {\n        const [r, g, b] = tokens.map(getTokenColorValue);\n        return pack(r, g, b, 1);\n    }\n\n    if (tokens.length === 4) {\n        const [r, g, b, a] = tokens.map(getTokenColorValue);\n        return pack(r, g, b, a);\n    }\n\n    return 0;\n};\n\nfunction hue2rgb(t1: number, t2: number, hue: number): number {\n    if (hue < 0) {\n        hue += 1;\n    }\n    if (hue >= 1) {\n        hue -= 1;\n    }\n\n    if (hue < 1 / 6) {\n        return (t2 - t1) * hue * 6 + t1;\n    } else if (hue < 1 / 2) {\n        return t2;\n    } else if (hue < 2 / 3) {\n        return (t2 - t1) * 6 * (2 / 3 - hue) + t1;\n    } else {\n        return t1;\n    }\n}\n\nconst hsl = (context: Context, args: CSSValue[]): number => {\n    const tokens = args.filter(nonFunctionArgSeparator);\n    const [hue, saturation, lightness, alpha] = tokens;\n\n    const h = (hue.type === TokenType.NUMBER_TOKEN ? deg(hue.number) : angle.parse(context, hue)) / (Math.PI * 2);\n    const s = isLengthPercentage(saturation) ? saturation.number / 100 : 0;\n    const l = isLengthPercentage(lightness) ? lightness.number / 100 : 0;\n    const a = typeof alpha !== 'undefined' && isLengthPercentage(alpha) ? getAbsoluteValue(alpha, 1) : 1;\n\n    if (s === 0) {\n        return pack(l * 255, l * 255, l * 255, 1);\n    }\n\n    const t2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n\n    const t1 = l * 2 - t2;\n    const r = hue2rgb(t1, t2, h + 1 / 3);\n    const g = hue2rgb(t1, t2, h);\n    const b = hue2rgb(t1, t2, h - 1 / 3);\n    return pack(r * 255, g * 255, b * 255, a);\n};\n\nconst SUPPORTED_COLOR_FUNCTIONS: {\n    [key: string]: (context: Context, args: CSSValue[]) => number;\n} = {\n    hsl: hsl,\n    hsla: hsl,\n    rgb: rgb,\n    rgba: rgb\n};\n\nexport const parseColor = (context: Context, value: string): Color =>\n    color.parse(context, Parser.create(value).parseComponentValue());\n\nexport const COLORS: {[key: string]: Color} = {\n    ALICEBLUE: 0xf0f8ffff,\n    ANTIQUEWHITE: 0xfaebd7ff,\n    AQUA: 0x00ffffff,\n    AQUAMARINE: 0x7fffd4ff,\n    AZURE: 0xf0ffffff,\n    BEIGE: 0xf5f5dcff,\n    BISQUE: 0xffe4c4ff,\n    BLACK: 0x000000ff,\n    BLANCHEDALMOND: 0xffebcdff,\n    BLUE: 0x0000ffff,\n    BLUEVIOLET: 0x8a2be2ff,\n    BROWN: 0xa52a2aff,\n    BURLYWOOD: 0xdeb887ff,\n    CADETBLUE: 0x5f9ea0ff,\n    CHARTREUSE: 0x7fff00ff,\n    CHOCOLATE: 0xd2691eff,\n    CORAL: 0xff7f50ff,\n    CORNFLOWERBLUE: 0x6495edff,\n    CORNSILK: 0xfff8dcff,\n    CRIMSON: 0xdc143cff,\n    CYAN: 0x00ffffff,\n    DARKBLUE: 0x00008bff,\n    DARKCYAN: 0x008b8bff,\n    DARKGOLDENROD: 0xb886bbff,\n    DARKGRAY: 0xa9a9a9ff,\n    DARKGREEN: 0x006400ff,\n    DARKGREY: 0xa9a9a9ff,\n    DARKKHAKI: 0xbdb76bff,\n    DARKMAGENTA: 0x8b008bff,\n    DARKOLIVEGREEN: 0x556b2fff,\n    DARKORANGE: 0xff8c00ff,\n    DARKORCHID: 0x9932ccff,\n    DARKRED: 0x8b0000ff,\n    DARKSALMON: 0xe9967aff,\n    DARKSEAGREEN: 0x8fbc8fff,\n    DARKSLATEBLUE: 0x483d8bff,\n    DARKSLATEGRAY: 0x2f4f4fff,\n    DARKSLATEGREY: 0x2f4f4fff,\n    DARKTURQUOISE: 0x00ced1ff,\n    DARKVIOLET: 0x9400d3ff,\n    DEEPPINK: 0xff1493ff,\n    DEEPSKYBLUE: 0x00bfffff,\n    DIMGRAY: 0x696969ff,\n    DIMGREY: 0x696969ff,\n    DODGERBLUE: 0x1e90ffff,\n    FIREBRICK: 0xb22222ff,\n    FLORALWHITE: 0xfffaf0ff,\n    FORESTGREEN: 0x228b22ff,\n    FUCHSIA: 0xff00ffff,\n    GAINSBORO: 0xdcdcdcff,\n    GHOSTWHITE: 0xf8f8ffff,\n    GOLD: 0xffd700ff,\n    GOLDENROD: 0xdaa520ff,\n    GRAY: 0x808080ff,\n    GREEN: 0x008000ff,\n    GREENYELLOW: 0xadff2fff,\n    GREY: 0x808080ff,\n    HONEYDEW: 0xf0fff0ff,\n    HOTPINK: 0xff69b4ff,\n    INDIANRED: 0xcd5c5cff,\n    INDIGO: 0x4b0082ff,\n    IVORY: 0xfffff0ff,\n    KHAKI: 0xf0e68cff,\n    LAVENDER: 0xe6e6faff,\n    LAVENDERBLUSH: 0xfff0f5ff,\n    LAWNGREEN: 0x7cfc00ff,\n    LEMONCHIFFON: 0xfffacdff,\n    LIGHTBLUE: 0xadd8e6ff,\n    LIGHTCORAL: 0xf08080ff,\n    LIGHTCYAN: 0xe0ffffff,\n    LIGHTGOLDENRODYELLOW: 0xfafad2ff,\n    LIGHTGRAY: 0xd3d3d3ff,\n    LIGHTGREEN: 0x90ee90ff,\n    LIGHTGREY: 0xd3d3d3ff,\n    LIGHTPINK: 0xffb6c1ff,\n    LIGHTSALMON: 0xffa07aff,\n    LIGHTSEAGREEN: 0x20b2aaff,\n    LIGHTSKYBLUE: 0x87cefaff,\n    LIGHTSLATEGRAY: 0x778899ff,\n    LIGHTSLATEGREY: 0x778899ff,\n    LIGHTSTEELBLUE: 0xb0c4deff,\n    LIGHTYELLOW: 0xffffe0ff,\n    LIME: 0x00ff00ff,\n    LIMEGREEN: 0x32cd32ff,\n    LINEN: 0xfaf0e6ff,\n    MAGENTA: 0xff00ffff,\n    MAROON: 0x800000ff,\n    MEDIUMAQUAMARINE: 0x66cdaaff,\n    MEDIUMBLUE: 0x0000cdff,\n    MEDIUMORCHID: 0xba55d3ff,\n    MEDIUMPURPLE: 0x9370dbff,\n    MEDIUMSEAGREEN: 0x3cb371ff,\n    MEDIUMSLATEBLUE: 0x7b68eeff,\n    MEDIUMSPRINGGREEN: 0x00fa9aff,\n    MEDIUMTURQUOISE: 0x48d1ccff,\n    MEDIUMVIOLETRED: 0xc71585ff,\n    MIDNIGHTBLUE: 0x191970ff,\n    MINTCREAM: 0xf5fffaff,\n    MISTYROSE: 0xffe4e1ff,\n    MOCCASIN: 0xffe4b5ff,\n    NAVAJOWHITE: 0xffdeadff,\n    NAVY: 0x000080ff,\n    OLDLACE: 0xfdf5e6ff,\n    OLIVE: 0x808000ff,\n    OLIVEDRAB: 0x6b8e23ff,\n    ORANGE: 0xffa500ff,\n    ORANGERED: 0xff4500ff,\n    ORCHID: 0xda70d6ff,\n    PALEGOLDENROD: 0xeee8aaff,\n    PALEGREEN: 0x98fb98ff,\n    PALETURQUOISE: 0xafeeeeff,\n    PALEVIOLETRED: 0xdb7093ff,\n    PAPAYAWHIP: 0xffefd5ff,\n    PEACHPUFF: 0xffdab9ff,\n    PERU: 0xcd853fff,\n    PINK: 0xffc0cbff,\n    PLUM: 0xdda0ddff,\n    POWDERBLUE: 0xb0e0e6ff,\n    PURPLE: 0x800080ff,\n    REBECCAPURPLE: 0x663399ff,\n    RED: 0xff0000ff,\n    ROSYBROWN: 0xbc8f8fff,\n    ROYALBLUE: 0x4169e1ff,\n    SADDLEBROWN: 0x8b4513ff,\n    SALMON: 0xfa8072ff,\n    SANDYBROWN: 0xf4a460ff,\n    SEAGREEN: 0x2e8b57ff,\n    SEASHELL: 0xfff5eeff,\n    SIENNA: 0xa0522dff,\n    SILVER: 0xc0c0c0ff,\n    SKYBLUE: 0x87ceebff,\n    SLATEBLUE: 0x6a5acdff,\n    SLATEGRAY: 0x708090ff,\n    SLATEGREY: 0x708090ff,\n    SNOW: 0xfffafaff,\n    SPRINGGREEN: 0x00ff7fff,\n    STEELBLUE: 0x4682b4ff,\n    TAN: 0xd2b48cff,\n    TEAL: 0x008080ff,\n    THISTLE: 0xd8bfd8ff,\n    TOMATO: 0xff6347ff,\n    TRANSPARENT: 0x00000000,\n    TURQUOISE: 0x40e0d0ff,\n    VIOLET: 0xee82eeff,\n    WHEAT: 0xf5deb3ff,\n    WHITE: 0xffffffff,\n    WHITESMOKE: 0xf5f5f5ff,\n    YELLOW: 0xffff00ff,\n    YELLOWGREEN: 0x9acd32ff\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum BACKGROUND_CLIP {\n    BORDER_BOX = 0,\n    PADDING_BOX = 1,\n    CONTENT_BOX = 2\n}\n\nexport type BackgroundClip = BACKGROUND_CLIP[];\n\nexport const backgroundClip: IPropertyListDescriptor<BackgroundClip> = {\n    name: 'background-clip',\n    initialValue: 'border-box',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundClip => {\n        return tokens.map((token) => {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return BACKGROUND_CLIP.PADDING_BOX;\n                    case 'content-box':\n                        return BACKGROUND_CLIP.CONTENT_BOX;\n                }\n            }\n            return BACKGROUND_CLIP.BORDER_BOX;\n        });\n    }\n};\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const backgroundColor: IPropertyTypeValueDescriptor = {\n    name: `background-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import {CSSValue} from '../../syntax/parser';\nimport {\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    GradientColorStop,\n    GradientCorner,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {color as colorType} from '../color';\nimport {getAbsoluteValue, HUNDRED_PERCENT, isLengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {Context} from '../../../core/context';\n\nexport const parseColorStop = (context: Context, args: CSSValue[]): UnprocessedGradientColorStop => {\n    const color = colorType.parse(context, args[0]);\n    const stop = args[1];\n    return stop && isLengthPercentage(stop) ? {color, stop} : {color, stop: null};\n};\n\nexport const processColorStops = (stops: UnprocessedGradientColorStop[], lineLength: number): GradientColorStop[] => {\n    const first = stops[0];\n    const last = stops[stops.length - 1];\n    if (first.stop === null) {\n        first.stop = ZERO_LENGTH;\n    }\n\n    if (last.stop === null) {\n        last.stop = HUNDRED_PERCENT;\n    }\n\n    const processStops: (number | null)[] = [];\n    let previous = 0;\n    for (let i = 0; i < stops.length; i++) {\n        const stop = stops[i].stop;\n        if (stop !== null) {\n            const absoluteValue = getAbsoluteValue(stop, lineLength);\n            if (absoluteValue > previous) {\n                processStops.push(absoluteValue);\n            } else {\n                processStops.push(previous);\n            }\n            previous = absoluteValue;\n        } else {\n            processStops.push(null);\n        }\n    }\n\n    let gapBegin = null;\n    for (let i = 0; i < processStops.length; i++) {\n        const stop = processStops[i];\n        if (stop === null) {\n            if (gapBegin === null) {\n                gapBegin = i;\n            }\n        } else if (gapBegin !== null) {\n            const gapLength = i - gapBegin;\n            const beforeGap = processStops[gapBegin - 1] as number;\n            const gapValue = (stop - beforeGap) / (gapLength + 1);\n            for (let g = 1; g <= gapLength; g++) {\n                processStops[gapBegin + g - 1] = gapValue * g;\n            }\n            gapBegin = null;\n        }\n    }\n\n    return stops.map(({color}, i) => {\n        return {color, stop: Math.max(Math.min(1, (processStops[i] as number) / lineLength), 0)};\n    });\n};\n\nconst getAngleFromCorner = (corner: GradientCorner, width: number, height: number): number => {\n    const centerX = width / 2;\n    const centerY = height / 2;\n    const x = getAbsoluteValue(corner[0], width) - centerX;\n    const y = centerY - getAbsoluteValue(corner[1], height);\n\n    return (Math.atan2(y, x) + Math.PI * 2) % (Math.PI * 2);\n};\n\nexport const calculateGradientDirection = (\n    angle: number | GradientCorner,\n    width: number,\n    height: number\n): [number, number, number, number, number] => {\n    const radian = typeof angle === 'number' ? angle : getAngleFromCorner(angle, width, height);\n\n    const lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));\n\n    const halfWidth = width / 2;\n    const halfHeight = height / 2;\n    const halfLineLength = lineLength / 2;\n\n    const yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;\n    const xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;\n\n    return [lineLength, halfWidth - xDiff, halfWidth + xDiff, halfHeight - yDiff, halfHeight + yDiff];\n};\n\nconst distance = (a: number, b: number): number => Math.sqrt(a * a + b * b);\n\nconst findCorner = (width: number, height: number, x: number, y: number, closest: boolean): [number, number] => {\n    const corners = [\n        [0, 0],\n        [0, height],\n        [width, 0],\n        [width, height]\n    ];\n\n    return corners.reduce(\n        (stat, corner) => {\n            const [cx, cy] = corner;\n            const d = distance(x - cx, y - cy);\n            if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {\n                return {\n                    optimumCorner: corner,\n                    optimumDistance: d\n                };\n            }\n\n            return stat;\n        },\n        {\n            optimumDistance: closest ? Infinity : -Infinity,\n            optimumCorner: null\n        }\n    ).optimumCorner as [number, number];\n};\n\nexport const calculateRadius = (\n    gradient: CSSRadialGradientImage,\n    x: number,\n    y: number,\n    width: number,\n    height: number\n): [number, number] => {\n    let rx = 0;\n    let ry = 0;\n\n    switch (gradient.size) {\n        case CSSRadialExtent.CLOSEST_SIDE:\n            // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradient’s center.\n            // If the shape is an ellipse, it exactly meets the closest side in each dimension.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.min(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                rx = Math.min(Math.abs(x), Math.abs(x - width));\n                ry = Math.min(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n\n        case CSSRadialExtent.CLOSEST_CORNER:\n            // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradient’s center.\n            // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.min(\n                    distance(x, y),\n                    distance(x, y - height),\n                    distance(x - width, y),\n                    distance(x - width, y - height)\n                );\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                // Compute the ratio ry/rx (which is to be the same as for \"closest-side\")\n                const c = Math.min(Math.abs(y), Math.abs(y - height)) / Math.min(Math.abs(x), Math.abs(x - width));\n                const [cx, cy] = findCorner(width, height, x, y, true);\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n\n        case CSSRadialExtent.FARTHEST_SIDE:\n            // Same as closest-side, except the ending shape is sized based on the farthest side(s)\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.max(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                rx = Math.max(Math.abs(x), Math.abs(x - width));\n                ry = Math.max(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n\n        case CSSRadialExtent.FARTHEST_CORNER:\n            // Same as closest-corner, except the ending shape is sized based on the farthest corner.\n            // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.max(\n                    distance(x, y),\n                    distance(x, y - height),\n                    distance(x - width, y),\n                    distance(x - width, y - height)\n                );\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                // Compute the ratio ry/rx (which is to be the same as for \"farthest-side\")\n                const c = Math.max(Math.abs(y), Math.abs(y - height)) / Math.max(Math.abs(x), Math.abs(x - width));\n                const [cx, cy] = findCorner(width, height, x, y, false);\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n    }\n\n    if (Array.isArray(gradient.size)) {\n        rx = getAbsoluteValue(gradient.size[0], width);\n        ry = gradient.size.length === 2 ? getAbsoluteValue(gradient.size[1], height) : rx;\n    }\n\n    return [rx, ry];\n};\n","import {CSSValue, parseFunctionArgs} from '../../syntax/parser';\nimport {CSSImageType, CSSLinearGradientImage, GradientCorner, UnprocessedGradientColorStop} from '../image';\nimport {TokenType} from '../../syntax/tokenizer';\nimport {isAngle, angle as angleType, parseNamedSide, deg} from '../angle';\nimport {parseColorStop} from './gradient';\nimport {Context} from '../../../core/context';\n\nexport const prefixLinearGradient = (context: Context, tokens: CSSValue[]): CSSLinearGradientImage => {\n    let angle: number | GradientCorner = deg(180);\n    const stops: UnprocessedGradientColorStop[] = [];\n\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        if (i === 0) {\n            const firstToken = arg[0];\n            if (\n                firstToken.type === TokenType.IDENT_TOKEN &&\n                ['top', 'left', 'right', 'bottom'].indexOf(firstToken.value) !== -1\n            ) {\n                angle = parseNamedSide(arg);\n                return;\n            } else if (isAngle(firstToken)) {\n                angle = (angleType.parse(context, firstToken) + deg(270)) % deg(360);\n                return;\n            }\n        }\n        const colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n    });\n\n    return {\n        angle,\n        stops,\n        type: CSSImageType.LINEAR_GRADIENT\n    };\n};\n","import {CSSValue, isIdentToken, parseFunctionArgs} from '../../syntax/parser';\nimport {\n    CSSImageType,\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    CSSRadialSize,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {parseColorStop} from './gradient';\nimport {FIFTY_PERCENT, HUNDRED_PERCENT, isLengthPercentage, LengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {isLength} from '../length';\nimport {Context} from '../../../core/context';\nexport const CLOSEST_SIDE = 'closest-side';\nexport const FARTHEST_SIDE = 'farthest-side';\nexport const CLOSEST_CORNER = 'closest-corner';\nexport const FARTHEST_CORNER = 'farthest-corner';\nexport const CIRCLE = 'circle';\nexport const ELLIPSE = 'ellipse';\nexport const COVER = 'cover';\nexport const CONTAIN = 'contain';\n\nexport const radialGradient = (context: Context, tokens: CSSValue[]): CSSRadialGradientImage => {\n    let shape: CSSRadialShape = CSSRadialShape.CIRCLE;\n    let size: CSSRadialSize = CSSRadialExtent.FARTHEST_CORNER;\n    const stops: UnprocessedGradientColorStop[] = [];\n    const position: LengthPercentage[] = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        let isColorStop = true;\n        if (i === 0) {\n            let isAtPosition = false;\n            isColorStop = arg.reduce((acc, token) => {\n                if (isAtPosition) {\n                    if (isIdentToken(token)) {\n                        switch (token.value) {\n                            case 'center':\n                                position.push(FIFTY_PERCENT);\n                                return acc;\n                            case 'top':\n                            case 'left':\n                                position.push(ZERO_LENGTH);\n                                return acc;\n                            case 'right':\n                            case 'bottom':\n                                position.push(HUNDRED_PERCENT);\n                                return acc;\n                        }\n                    } else if (isLengthPercentage(token) || isLength(token)) {\n                        position.push(token);\n                    }\n                } else if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = CSSRadialShape.CIRCLE;\n                            return false;\n                        case ELLIPSE:\n                            shape = CSSRadialShape.ELLIPSE;\n                            return false;\n                        case 'at':\n                            isAtPosition = true;\n                            return false;\n                        case CLOSEST_SIDE:\n                            size = CSSRadialExtent.CLOSEST_SIDE;\n                            return false;\n                        case COVER:\n                        case FARTHEST_SIDE:\n                            size = CSSRadialExtent.FARTHEST_SIDE;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_CORNER:\n                            size = CSSRadialExtent.CLOSEST_CORNER;\n                            return false;\n                        case FARTHEST_CORNER:\n                            size = CSSRadialExtent.FARTHEST_CORNER;\n                            return false;\n                    }\n                } else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n\n        if (isColorStop) {\n            const colorStop = parseColorStop(context, arg);\n            stops.push(colorStop);\n        }\n    });\n\n    return {size, shape, stops, position, type: CSSImageType.RADIAL_GRADIENT};\n};\n","import {CSSValue, isIdentToken, parseFunctionArgs} from '../../syntax/parser';\nimport {\n    CSSImageType,\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    CSSRadialSize,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {parseColorStop} from './gradient';\nimport {FIFTY_PERCENT, HUNDRED_PERCENT, isLengthPercentage, LengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {isLength} from '../length';\nimport {\n    CIRCLE,\n    CLOSEST_CORNER,\n    CLOSEST_SIDE,\n    CONTAIN,\n    COVER,\n    ELLIPSE,\n    FARTHEST_CORNER,\n    FARTHEST_SIDE\n} from './radial-gradient';\nimport {Context} from '../../../core/context';\n\nexport const prefixRadialGradient = (context: Context, tokens: CSSValue[]): CSSRadialGradientImage => {\n    let shape: CSSRadialShape = CSSRadialShape.CIRCLE;\n    let size: CSSRadialSize = CSSRadialExtent.FARTHEST_CORNER;\n    const stops: UnprocessedGradientColorStop[] = [];\n    const position: LengthPercentage[] = [];\n\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        let isColorStop = true;\n        if (i === 0) {\n            isColorStop = arg.reduce((acc, token) => {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case 'center':\n                            position.push(FIFTY_PERCENT);\n                            return false;\n                        case 'top':\n                        case 'left':\n                            position.push(ZERO_LENGTH);\n                            return false;\n                        case 'right':\n                        case 'bottom':\n                            position.push(HUNDRED_PERCENT);\n                            return false;\n                    }\n                } else if (isLengthPercentage(token) || isLength(token)) {\n                    position.push(token);\n                    return false;\n                }\n\n                return acc;\n            }, isColorStop);\n        } else if (i === 1) {\n            isColorStop = arg.reduce((acc, token) => {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = CSSRadialShape.CIRCLE;\n                            return false;\n                        case ELLIPSE:\n                            shape = CSSRadialShape.ELLIPSE;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_SIDE:\n                            size = CSSRadialExtent.CLOSEST_SIDE;\n                            return false;\n                        case FARTHEST_SIDE:\n                            size = CSSRadialExtent.FARTHEST_SIDE;\n                            return false;\n                        case CLOSEST_CORNER:\n                            size = CSSRadialExtent.CLOSEST_CORNER;\n                            return false;\n                        case COVER:\n                        case FARTHEST_CORNER:\n                            size = CSSRadialExtent.FARTHEST_CORNER;\n                            return false;\n                    }\n                } else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n\n                return acc;\n            }, isColorStop);\n        }\n\n        if (isColorStop) {\n            const colorStop = parseColorStop(context, arg);\n            stops.push(colorStop);\n        }\n    });\n\n    return {size, shape, stops, position, type: CSSImageType.RADIAL_GRADIENT};\n};\n","import {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Color} from './color';\nimport {linearGradient} from './functions/linear-gradient';\nimport {prefixLinearGradient} from './functions/-prefix-linear-gradient';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {LengthPercentage} from './length-percentage';\nimport {webkitGradient} from './functions/-webkit-gradient';\nimport {radialGradient} from './functions/radial-gradient';\nimport {prefixRadialGradient} from './functions/-prefix-radial-gradient';\nimport {Context} from '../../core/context';\n\nexport const enum CSSImageType {\n    URL,\n    LINEAR_GRADIENT,\n    RADIAL_GRADIENT\n}\n\nexport const isLinearGradient = (background: ICSSImage): background is CSSLinearGradientImage => {\n    return background.type === CSSImageType.LINEAR_GRADIENT;\n};\n\nexport const isRadialGradient = (background: ICSSImage): background is CSSRadialGradientImage => {\n    return background.type === CSSImageType.RADIAL_GRADIENT;\n};\n\nexport interface UnprocessedGradientColorStop {\n    color: Color;\n    stop: LengthPercentage | null;\n}\n\nexport interface GradientColorStop {\n    color: Color;\n    stop: number;\n}\n\nexport interface ICSSImage {\n    type: CSSImageType;\n}\n\nexport interface CSSURLImage extends ICSSImage {\n    url: string;\n    type: CSSImageType.URL;\n}\n\n// interface ICSSGeneratedImage extends ICSSImage {}\n\nexport type GradientCorner = [LengthPercentage, LengthPercentage];\n\ninterface ICSSGradientImage extends ICSSImage {\n    stops: UnprocessedGradientColorStop[];\n}\n\nexport interface CSSLinearGradientImage extends ICSSGradientImage {\n    angle: number | GradientCorner;\n    type: CSSImageType.LINEAR_GRADIENT;\n}\n\nexport const enum CSSRadialShape {\n    CIRCLE,\n    ELLIPSE\n}\n\nexport const enum CSSRadialExtent {\n    CLOSEST_SIDE,\n    FARTHEST_SIDE,\n    CLOSEST_CORNER,\n    FARTHEST_CORNER\n}\n\nexport type CSSRadialSize = CSSRadialExtent | LengthPercentage[];\n\nexport interface CSSRadialGradientImage extends ICSSGradientImage {\n    type: CSSImageType.RADIAL_GRADIENT;\n    shape: CSSRadialShape;\n    size: CSSRadialSize;\n    position: LengthPercentage[];\n}\n\nexport const image: ITypeDescriptor<ICSSImage> = {\n    name: 'image',\n    parse: (context: Context, value: CSSValue): ICSSImage => {\n        if (value.type === TokenType.URL_TOKEN) {\n            const image: CSSURLImage = {url: value.value, type: CSSImageType.URL};\n            context.cache.addImage(value.value);\n            return image;\n        }\n\n        if (value.type === TokenType.FUNCTION) {\n            const imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];\n            if (typeof imageFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported image function \"${value.name}\"`);\n            }\n            return imageFunction(context, value.values);\n        }\n\n        throw new Error(`Unsupported image type ${value.type}`);\n    }\n};\n\nexport function isSupportedImage(value: CSSValue): boolean {\n    return (\n        !(value.type === TokenType.IDENT_TOKEN && value.value === 'none') &&\n        (value.type !== TokenType.FUNCTION || !!SUPPORTED_IMAGE_FUNCTIONS[value.name])\n    );\n}\n\nconst SUPPORTED_IMAGE_FUNCTIONS: Record<string, (context: Context, args: CSSValue[]) => ICSSImage> = {\n    'linear-gradient': linearGradient,\n    '-moz-linear-gradient': prefixLinearGradient,\n    '-ms-linear-gradient': prefixLinearGradient,\n    '-o-linear-gradient': prefixLinearGradient,\n    '-webkit-linear-gradient': prefixLinearGradient,\n    'radial-gradient': radialGradient,\n    '-moz-radial-gradient': prefixRadialGradient,\n    '-ms-radial-gradient': prefixRadialGradient,\n    '-o-radial-gradient': prefixRadialGradient,\n    '-webkit-radial-gradient': prefixRadialGradient,\n    '-webkit-gradient': webkitGradient\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, parseFunctionArgs} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentage} from '../types/length-percentage';\nimport {StringValueToken} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport enum BACKGROUND_SIZE {\n    AUTO = 'auto',\n    CONTAIN = 'contain',\n    COVER = 'cover'\n}\n\nexport type BackgroundSizeInfo = LengthPercentage | StringValueToken;\nexport type BackgroundSize = BackgroundSizeInfo[][];\n\nexport const backgroundSize: IPropertyListDescriptor<BackgroundSize> = {\n    name: 'background-size',\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundSize => {\n        return parseFunctionArgs(tokens).map((values) => values.filter(isBackgroundSizeInfoToken));\n    }\n};\n\nconst isBackgroundSizeInfoToken = (value: CSSValue): value is BackgroundSizeInfo =>\n    isIdentToken(value) || isLengthPercentage(value);\n","import {CSSValue, parseFunctionArgs} from '../../syntax/parser';\nimport {TokenType} from '../../syntax/tokenizer';\nimport {isAngle, angle as angleType, parseNamedSide, deg} from '../angle';\nimport {CSSImageType, CSSLinearGradientImage, GradientCorner, UnprocessedGradientColorStop} from '../image';\nimport {parseColorStop} from './gradient';\nimport {Context} from '../../../core/context';\n\nexport const linearGradient = (context: Context, tokens: CSSValue[]): CSSLinearGradientImage => {\n    let angle: number | GradientCorner = deg(180);\n    const stops: UnprocessedGradientColorStop[] = [];\n\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        if (i === 0) {\n            const firstToken = arg[0];\n            if (firstToken.type === TokenType.IDENT_TOKEN && firstToken.value === 'to') {\n                angle = parseNamedSide(arg);\n                return;\n            } else if (isAngle(firstToken)) {\n                angle = angleType.parse(context, firstToken);\n                return;\n            }\n        }\n        const colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n    });\n\n    return {angle, stops, type: CSSImageType.LINEAR_GRADIENT};\n};\n","import {CSSValue, isIdentToken, isNumberToken, nonFunctionArgSeparator, parseFunctionArgs} from '../../syntax/parser';\nimport {\n    CSSImageType,\n    CSSLinearGradientImage,\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    CSSRadialSize,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {deg} from '../angle';\nimport {TokenType} from '../../syntax/tokenizer';\nimport {color as colorType} from '../color';\nimport {HUNDRED_PERCENT, LengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {Context} from '../../../core/context';\n\nexport const webkitGradient = (\n    context: Context,\n    tokens: CSSValue[]\n): CSSLinearGradientImage | CSSRadialGradientImage => {\n    const angle = deg(180);\n    const stops: UnprocessedGradientColorStop[] = [];\n    let type = CSSImageType.LINEAR_GRADIENT;\n    const shape: CSSRadialShape = CSSRadialShape.CIRCLE;\n    const size: CSSRadialSize = CSSRadialExtent.FARTHEST_CORNER;\n    const position: LengthPercentage[] = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        const firstToken = arg[0];\n        if (i === 0) {\n            if (isIdentToken(firstToken) && firstToken.value === 'linear') {\n                type = CSSImageType.LINEAR_GRADIENT;\n                return;\n            } else if (isIdentToken(firstToken) && firstToken.value === 'radial') {\n                type = CSSImageType.RADIAL_GRADIENT;\n                return;\n            }\n        }\n\n        if (firstToken.type === TokenType.FUNCTION) {\n            if (firstToken.name === 'from') {\n                const color = colorType.parse(context, firstToken.values[0]);\n                stops.push({stop: ZERO_LENGTH, color});\n            } else if (firstToken.name === 'to') {\n                const color = colorType.parse(context, firstToken.values[0]);\n                stops.push({stop: HUNDRED_PERCENT, color});\n            } else if (firstToken.name === 'color-stop') {\n                const values = firstToken.values.filter(nonFunctionArgSeparator);\n                if (values.length === 2) {\n                    const color = colorType.parse(context, values[1]);\n                    const stop = values[0];\n                    if (isNumberToken(stop)) {\n                        stops.push({\n                            stop: {type: TokenType.PERCENTAGE_TOKEN, number: stop.number * 100, flags: stop.flags},\n                            color\n                        });\n                    }\n                }\n            }\n        }\n    });\n\n    return type === CSSImageType.LINEAR_GRADIENT\n        ? {\n              angle: (angle + deg(180)) % deg(360),\n              stops,\n              type\n          }\n        : {size, shape, stops, position, type};\n};\n","import {TokenType} from '../syntax/tokenizer';\nimport {ICSSImage, image, isSupportedImage} from '../types/image';\nimport {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, nonFunctionArgSeparator} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const backgroundImage: IPropertyListDescriptor<ICSSImage[]> = {\n    name: 'background-image',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return [];\n        }\n\n        return tokens\n            .filter((value) => nonFunctionArgSeparator(value) && isSupportedImage(value))\n            .map((value) => image.parse(context, value));\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const enum BACKGROUND_ORIGIN {\n    BORDER_BOX = 0,\n    PADDING_BOX = 1,\n    CONTENT_BOX = 2\n}\n\nexport type BackgroundOrigin = BACKGROUND_ORIGIN[];\n\nexport const backgroundOrigin: IPropertyListDescriptor<BackgroundOrigin> = {\n    name: 'background-origin',\n    initialValue: 'border-box',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundOrigin => {\n        return tokens.map((token) => {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return BACKGROUND_ORIGIN.PADDING_BOX;\n                    case 'content-box':\n                        return BACKGROUND_ORIGIN.CONTENT_BOX;\n                }\n            }\n            return BACKGROUND_ORIGIN.BORDER_BOX;\n        });\n    }\n};\n","import {PropertyDescriptorParsingType, IPropertyListDescriptor} from '../IPropertyDescriptor';\nimport {CSSValue, parseFunctionArgs} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentageTuple, parseLengthPercentageTuple} from '../types/length-percentage';\nimport {Context} from '../../core/context';\nexport type BackgroundPosition = BackgroundImagePosition[];\n\nexport type BackgroundImagePosition = LengthPercentageTuple;\n\nexport const backgroundPosition: IPropertyListDescriptor<BackgroundPosition> = {\n    name: 'background-position',\n    initialValue: '0% 0%',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundPosition => {\n        return parseFunctionArgs(tokens)\n            .map((values: CSSValue[]) => values.filter(isLengthPercentage))\n            .map(parseLengthPercentageTuple);\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, parseFunctionArgs} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport type BackgroundRepeat = BACKGROUND_REPEAT[];\n\nexport const enum BACKGROUND_REPEAT {\n    REPEAT = 0,\n    NO_REPEAT = 1,\n    REPEAT_X = 2,\n    REPEAT_Y = 3\n}\n\nexport const backgroundRepeat: IPropertyListDescriptor<BackgroundRepeat> = {\n    name: 'background-repeat',\n    initialValue: 'repeat',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundRepeat => {\n        return parseFunctionArgs(tokens)\n            .map((values) =>\n                values\n                    .filter(isIdentToken)\n                    .map((token) => token.value)\n                    .join(' ')\n            )\n            .map(parseBackgroundRepeat);\n    }\n};\n\nconst parseBackgroundRepeat = (value: string): BACKGROUND_REPEAT => {\n    switch (value) {\n        case 'no-repeat':\n            return BACKGROUND_REPEAT.NO_REPEAT;\n        case 'repeat-x':\n        case 'repeat no-repeat':\n            return BACKGROUND_REPEAT.REPEAT_X;\n        case 'repeat-y':\n        case 'no-repeat repeat':\n            return BACKGROUND_REPEAT.REPEAT_Y;\n        case 'repeat':\n        default:\n            return BACKGROUND_REPEAT.REPEAT;\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport enum LINE_BREAK {\n    NORMAL = 'normal',\n    STRICT = 'strict'\n}\n\nexport const lineBreak: IPropertyIdentValueDescriptor<LINE_BREAK> = {\n    name: 'line-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, lineBreak: string): LINE_BREAK => {\n        switch (lineBreak) {\n            case 'strict':\n                return LINE_BREAK.STRICT;\n            case 'normal':\n            default:\n                return LINE_BREAK.NORMAL;\n        }\n    }\n};\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nconst borderColorForSide = (side: string): IPropertyTypeValueDescriptor => ({\n    name: `border-${side}-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n});\n\nexport const borderTopColor: IPropertyTypeValueDescriptor = borderColorForSide('top');\nexport const borderRightColor: IPropertyTypeValueDescriptor = borderColorForSide('right');\nexport const borderBottomColor: IPropertyTypeValueDescriptor = borderColorForSide('bottom');\nexport const borderLeftColor: IPropertyTypeValueDescriptor = borderColorForSide('left');\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentageTuple, parseLengthPercentageTuple} from '../types/length-percentage';\nimport {Context} from '../../core/context';\nexport type BorderRadius = LengthPercentageTuple;\n\nconst borderRadiusForSide = (side: string): IPropertyListDescriptor<BorderRadius> => ({\n    name: `border-radius-${side}`,\n    initialValue: '0 0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BorderRadius =>\n        parseLengthPercentageTuple(tokens.filter(isLengthPercentage))\n});\n\nexport const borderTopLeftRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('top-left');\nexport const borderTopRightRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('top-right');\nexport const borderBottomRightRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('bottom-right');\nexport const borderBottomLeftRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('bottom-left');\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum BORDER_STYLE {\n    NONE = 0,\n    SOLID = 1,\n    DASHED = 2,\n    DOTTED = 3,\n    DOUBLE = 4\n}\n\nconst borderStyleForSide = (side: string): IPropertyIdentValueDescriptor<BORDER_STYLE> => ({\n    name: `border-${side}-style`,\n    initialValue: 'solid',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, style: string): BORDER_STYLE => {\n        switch (style) {\n            case 'none':\n                return BORDER_STYLE.NONE;\n            case 'dashed':\n                return BORDER_STYLE.DASHED;\n            case 'dotted':\n                return BORDER_STYLE.DOTTED;\n            case 'double':\n                return BORDER_STYLE.DOUBLE;\n        }\n        return BORDER_STYLE.SOLID;\n    }\n});\n\nexport const borderTopStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('top');\nexport const borderRightStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('right');\nexport const borderBottomStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('bottom');\nexport const borderLeftStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('left');\n","import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nconst borderWidthForSide = (side: string): IPropertyValueDescriptor<number> => ({\n    name: `border-${side}-width`,\n    initialValue: '0',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n});\n\nexport const borderTopWidth: IPropertyValueDescriptor<number> = borderWidthForSide('top');\nexport const borderRightWidth: IPropertyValueDescriptor<number> = borderWidthForSide('right');\nexport const borderBottomWidth: IPropertyValueDescriptor<number> = borderWidthForSide('bottom');\nexport const borderLeftWidth: IPropertyValueDescriptor<number> = borderWidthForSide('left');\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const color: IPropertyTypeValueDescriptor = {\n    name: `color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\n\nexport const enum DIRECTION {\n    LTR = 0,\n    RTL = 1\n}\n\nexport const direction: IPropertyIdentValueDescriptor<DIRECTION> = {\n    name: 'direction',\n    initialValue: 'ltr',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, direction: string) => {\n        switch (direction) {\n            case 'rtl':\n                return DIRECTION.RTL;\n            case 'ltr':\n            default:\n                return DIRECTION.LTR;\n        }\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum DISPLAY {\n    NONE = 0,\n    BLOCK = 1 << 1,\n    INLINE = 1 << 2,\n    RUN_IN = 1 << 3,\n    FLOW = 1 << 4,\n    FLOW_ROOT = 1 << 5,\n    TABLE = 1 << 6,\n    FLEX = 1 << 7,\n    GRID = 1 << 8,\n    RUBY = 1 << 9,\n    SUBGRID = 1 << 10,\n    LIST_ITEM = 1 << 11,\n    TABLE_ROW_GROUP = 1 << 12,\n    TABLE_HEADER_GROUP = 1 << 13,\n    TABLE_FOOTER_GROUP = 1 << 14,\n    TABLE_ROW = 1 << 15,\n    TABLE_CELL = 1 << 16,\n    TABLE_COLUMN_GROUP = 1 << 17,\n    TABLE_COLUMN = 1 << 18,\n    TABLE_CAPTION = 1 << 19,\n    RUBY_BASE = 1 << 20,\n    RUBY_TEXT = 1 << 21,\n    RUBY_BASE_CONTAINER = 1 << 22,\n    RUBY_TEXT_CONTAINER = 1 << 23,\n    CONTENTS = 1 << 24,\n    INLINE_BLOCK = 1 << 25,\n    INLINE_LIST_ITEM = 1 << 26,\n    INLINE_TABLE = 1 << 27,\n    INLINE_FLEX = 1 << 28,\n    INLINE_GRID = 1 << 29\n}\n\nexport type Display = number;\n\nexport const display: IPropertyListDescriptor<Display> = {\n    name: 'display',\n    initialValue: 'inline-block',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): Display => {\n        return tokens.filter(isIdentToken).reduce((bit, token) => {\n            return bit | parseDisplayValue(token.value);\n        }, DISPLAY.NONE);\n    }\n};\n\nconst parseDisplayValue = (display: string): Display => {\n    switch (display) {\n        case 'block':\n        case '-webkit-box':\n            return DISPLAY.BLOCK;\n        case 'inline':\n            return DISPLAY.INLINE;\n        case 'run-in':\n            return DISPLAY.RUN_IN;\n        case 'flow':\n            return DISPLAY.FLOW;\n        case 'flow-root':\n            return DISPLAY.FLOW_ROOT;\n        case 'table':\n            return DISPLAY.TABLE;\n        case 'flex':\n        case '-webkit-flex':\n            return DISPLAY.FLEX;\n        case 'grid':\n        case '-ms-grid':\n            return DISPLAY.GRID;\n        case 'ruby':\n            return DISPLAY.RUBY;\n        case 'subgrid':\n            return DISPLAY.SUBGRID;\n        case 'list-item':\n            return DISPLAY.LIST_ITEM;\n        case 'table-row-group':\n            return DISPLAY.TABLE_ROW_GROUP;\n        case 'table-header-group':\n            return DISPLAY.TABLE_HEADER_GROUP;\n        case 'table-footer-group':\n            return DISPLAY.TABLE_FOOTER_GROUP;\n        case 'table-row':\n            return DISPLAY.TABLE_ROW;\n        case 'table-cell':\n            return DISPLAY.TABLE_CELL;\n        case 'table-column-group':\n            return DISPLAY.TABLE_COLUMN_GROUP;\n        case 'table-column':\n            return DISPLAY.TABLE_COLUMN;\n        case 'table-caption':\n            return DISPLAY.TABLE_CAPTION;\n        case 'ruby-base':\n            return DISPLAY.RUBY_BASE;\n        case 'ruby-text':\n            return DISPLAY.RUBY_TEXT;\n        case 'ruby-base-container':\n            return DISPLAY.RUBY_BASE_CONTAINER;\n        case 'ruby-text-container':\n            return DISPLAY.RUBY_TEXT_CONTAINER;\n        case 'contents':\n            return DISPLAY.CONTENTS;\n        case 'inline-block':\n            return DISPLAY.INLINE_BLOCK;\n        case 'inline-list-item':\n            return DISPLAY.INLINE_LIST_ITEM;\n        case 'inline-table':\n            return DISPLAY.INLINE_TABLE;\n        case 'inline-flex':\n            return DISPLAY.INLINE_FLEX;\n        case 'inline-grid':\n            return DISPLAY.INLINE_GRID;\n    }\n\n    return DISPLAY.NONE;\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum FLOAT {\n    NONE = 0,\n    LEFT = 1,\n    RIGHT = 2,\n    INLINE_START = 3,\n    INLINE_END = 4\n}\n\nexport const float: IPropertyIdentValueDescriptor<FLOAT> = {\n    name: 'float',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, float: string) => {\n        switch (float) {\n            case 'left':\n                return FLOAT.LEFT;\n            case 'right':\n                return FLOAT.RIGHT;\n            case 'inline-start':\n                return FLOAT.INLINE_START;\n            case 'inline-end':\n                return FLOAT.INLINE_END;\n        }\n        return FLOAT.NONE;\n    }\n};\n","import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\nexport const letterSpacing: IPropertyValueDescriptor<number> = {\n    name: 'letter-spacing',\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (_context: Context, token: CSSValue) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'normal') {\n            return 0;\n        }\n\n        if (token.type === TokenType.NUMBER_TOKEN) {\n            return token.number;\n        }\n\n        if (token.type === TokenType.DIMENSION_TOKEN) {\n            return token.number;\n        }\n\n        return 0;\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport enum WORD_BREAK {\n    NORMAL = 'normal',\n    BREAK_ALL = 'break-all',\n    KEEP_ALL = 'keep-all'\n}\n\nexport const wordBreak: IPropertyIdentValueDescriptor<WORD_BREAK> = {\n    name: 'word-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, wordBreak: string): WORD_BREAK => {\n        switch (wordBreak) {\n            case 'break-all':\n                return WORD_BREAK.BREAK_ALL;\n            case 'keep-all':\n                return WORD_BREAK.KEEP_ALL;\n            case 'normal':\n            default:\n                return WORD_BREAK.NORMAL;\n        }\n    }\n};\n","import {IPropertyTokenValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {getAbsoluteValue, isLengthPercentage} from '../types/length-percentage';\nexport const lineHeight: IPropertyTokenValueDescriptor = {\n    name: 'line-height',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TOKEN_VALUE\n};\n\nexport const computeLineHeight = (token: CSSValue, fontSize: number): number => {\n    if (isIdentToken(token) && token.value === 'normal') {\n        return 1.2 * fontSize;\n    } else if (token.type === TokenType.NUMBER_TOKEN) {\n        return fontSize * token.number;\n    } else if (isLengthPercentage(token)) {\n        return getAbsoluteValue(token, fontSize);\n    }\n\n    return fontSize;\n};\n","import {TokenType} from '../syntax/tokenizer';\nimport {ICSSImage, image} from '../types/image';\nimport {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const listStyleImage: IPropertyValueDescriptor<ICSSImage | null> = {\n    name: 'list-style-image',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (context: Context, token: CSSValue) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n            return null;\n        }\n\n        return image.parse(context, token);\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum LIST_STYLE_POSITION {\n    INSIDE = 0,\n    OUTSIDE = 1\n}\n\nexport const listStylePosition: IPropertyIdentValueDescriptor<LIST_STYLE_POSITION> = {\n    name: 'list-style-position',\n    initialValue: 'outside',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, position: string) => {\n        switch (position) {\n            case 'inside':\n                return LIST_STYLE_POSITION.INSIDE;\n            case 'outside':\n            default:\n                return LIST_STYLE_POSITION.OUTSIDE;\n        }\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum LIST_STYLE_TYPE {\n    NONE = -1,\n    DISC = 0,\n    CIRCLE = 1,\n    SQUARE = 2,\n    DECIMAL = 3,\n    CJK_DECIMAL = 4,\n    DECIMAL_LEADING_ZERO = 5,\n    LOWER_ROMAN = 6,\n    UPPER_ROMAN = 7,\n    LOWER_GREEK = 8,\n    LOWER_ALPHA = 9,\n    UPPER_ALPHA = 10,\n    ARABIC_INDIC = 11,\n    ARMENIAN = 12,\n    BENGALI = 13,\n    CAMBODIAN = 14,\n    CJK_EARTHLY_BRANCH = 15,\n    CJK_HEAVENLY_STEM = 16,\n    CJK_IDEOGRAPHIC = 17,\n    DEVANAGARI = 18,\n    ETHIOPIC_NUMERIC = 19,\n    GEORGIAN = 20,\n    GUJARATI = 21,\n    GURMUKHI = 22,\n    HEBREW = 22,\n    HIRAGANA = 23,\n    HIRAGANA_IROHA = 24,\n    JAPANESE_FORMAL = 25,\n    JAPANESE_INFORMAL = 26,\n    KANNADA = 27,\n    KATAKANA = 28,\n    KATAKANA_IROHA = 29,\n    KHMER = 30,\n    KOREAN_HANGUL_FORMAL = 31,\n    KOREAN_HANJA_FORMAL = 32,\n    KOREAN_HANJA_INFORMAL = 33,\n    LAO = 34,\n    LOWER_ARMENIAN = 35,\n    MALAYALAM = 36,\n    MONGOLIAN = 37,\n    MYANMAR = 38,\n    ORIYA = 39,\n    PERSIAN = 40,\n    SIMP_CHINESE_FORMAL = 41,\n    SIMP_CHINESE_INFORMAL = 42,\n    TAMIL = 43,\n    TELUGU = 44,\n    THAI = 45,\n    TIBETAN = 46,\n    TRAD_CHINESE_FORMAL = 47,\n    TRAD_CHINESE_INFORMAL = 48,\n    UPPER_ARMENIAN = 49,\n    DISCLOSURE_OPEN = 50,\n    DISCLOSURE_CLOSED = 51\n}\n\nexport const listStyleType: IPropertyIdentValueDescriptor<LIST_STYLE_TYPE> = {\n    name: 'list-style-type',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, type: string) => {\n        switch (type) {\n            case 'disc':\n                return LIST_STYLE_TYPE.DISC;\n            case 'circle':\n                return LIST_STYLE_TYPE.CIRCLE;\n            case 'square':\n                return LIST_STYLE_TYPE.SQUARE;\n            case 'decimal':\n                return LIST_STYLE_TYPE.DECIMAL;\n            case 'cjk-decimal':\n                return LIST_STYLE_TYPE.CJK_DECIMAL;\n            case 'decimal-leading-zero':\n                return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;\n            case 'lower-roman':\n                return LIST_STYLE_TYPE.LOWER_ROMAN;\n            case 'upper-roman':\n                return LIST_STYLE_TYPE.UPPER_ROMAN;\n            case 'lower-greek':\n                return LIST_STYLE_TYPE.LOWER_GREEK;\n            case 'lower-alpha':\n                return LIST_STYLE_TYPE.LOWER_ALPHA;\n            case 'upper-alpha':\n                return LIST_STYLE_TYPE.UPPER_ALPHA;\n            case 'arabic-indic':\n                return LIST_STYLE_TYPE.ARABIC_INDIC;\n            case 'armenian':\n                return LIST_STYLE_TYPE.ARMENIAN;\n            case 'bengali':\n                return LIST_STYLE_TYPE.BENGALI;\n            case 'cambodian':\n                return LIST_STYLE_TYPE.CAMBODIAN;\n            case 'cjk-earthly-branch':\n                return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;\n            case 'cjk-heavenly-stem':\n                return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;\n            case 'cjk-ideographic':\n                return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;\n            case 'devanagari':\n                return LIST_STYLE_TYPE.DEVANAGARI;\n            case 'ethiopic-numeric':\n                return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;\n            case 'georgian':\n                return LIST_STYLE_TYPE.GEORGIAN;\n            case 'gujarati':\n                return LIST_STYLE_TYPE.GUJARATI;\n            case 'gurmukhi':\n                return LIST_STYLE_TYPE.GURMUKHI;\n            case 'hebrew':\n                return LIST_STYLE_TYPE.HEBREW;\n            case 'hiragana':\n                return LIST_STYLE_TYPE.HIRAGANA;\n            case 'hiragana-iroha':\n                return LIST_STYLE_TYPE.HIRAGANA_IROHA;\n            case 'japanese-formal':\n                return LIST_STYLE_TYPE.JAPANESE_FORMAL;\n            case 'japanese-informal':\n                return LIST_STYLE_TYPE.JAPANESE_INFORMAL;\n            case 'kannada':\n                return LIST_STYLE_TYPE.KANNADA;\n            case 'katakana':\n                return LIST_STYLE_TYPE.KATAKANA;\n            case 'katakana-iroha':\n                return LIST_STYLE_TYPE.KATAKANA_IROHA;\n            case 'khmer':\n                return LIST_STYLE_TYPE.KHMER;\n            case 'korean-hangul-formal':\n                return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;\n            case 'korean-hanja-formal':\n                return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;\n            case 'korean-hanja-informal':\n                return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;\n            case 'lao':\n                return LIST_STYLE_TYPE.LAO;\n            case 'lower-armenian':\n                return LIST_STYLE_TYPE.LOWER_ARMENIAN;\n            case 'malayalam':\n                return LIST_STYLE_TYPE.MALAYALAM;\n            case 'mongolian':\n                return LIST_STYLE_TYPE.MONGOLIAN;\n            case 'myanmar':\n                return LIST_STYLE_TYPE.MYANMAR;\n            case 'oriya':\n                return LIST_STYLE_TYPE.ORIYA;\n            case 'persian':\n                return LIST_STYLE_TYPE.PERSIAN;\n            case 'simp-chinese-formal':\n                return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;\n            case 'simp-chinese-informal':\n                return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;\n            case 'tamil':\n                return LIST_STYLE_TYPE.TAMIL;\n            case 'telugu':\n                return LIST_STYLE_TYPE.TELUGU;\n            case 'thai':\n                return LIST_STYLE_TYPE.THAI;\n            case 'tibetan':\n                return LIST_STYLE_TYPE.TIBETAN;\n            case 'trad-chinese-formal':\n                return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;\n            case 'trad-chinese-informal':\n                return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;\n            case 'upper-armenian':\n                return LIST_STYLE_TYPE.UPPER_ARMENIAN;\n            case 'disclosure-open':\n                return LIST_STYLE_TYPE.DISCLOSURE_OPEN;\n            case 'disclosure-closed':\n                return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;\n            case 'none':\n            default:\n                return LIST_STYLE_TYPE.NONE;\n        }\n    }\n};\n","import {IPropertyTokenValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nconst marginForSide = (side: string): IPropertyTokenValueDescriptor => ({\n    name: `margin-${side}`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TOKEN_VALUE\n});\n\nexport const marginTop: IPropertyTokenValueDescriptor = marginForSide('top');\nexport const marginRight: IPropertyTokenValueDescriptor = marginForSide('right');\nexport const marginBottom: IPropertyTokenValueDescriptor = marginForSide('bottom');\nexport const marginLeft: IPropertyTokenValueDescriptor = marginForSide('left');\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum OVERFLOW {\n    VISIBLE = 0,\n    HIDDEN = 1,\n    SCROLL = 2,\n    CLIP = 3,\n    AUTO = 4\n}\n\nexport const overflow: IPropertyListDescriptor<OVERFLOW[]> = {\n    name: 'overflow',\n    initialValue: 'visible',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): OVERFLOW[] => {\n        return tokens.filter(isIdentToken).map((overflow) => {\n            switch (overflow.value) {\n                case 'hidden':\n                    return OVERFLOW.HIDDEN;\n                case 'scroll':\n                    return OVERFLOW.SCROLL;\n                case 'clip':\n                    return OVERFLOW.CLIP;\n                case 'auto':\n                    return OVERFLOW.AUTO;\n                case 'visible':\n                default:\n                    return OVERFLOW.VISIBLE;\n            }\n        });\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum OVERFLOW_WRAP {\n    NORMAL = 'normal',\n    BREAK_WORD = 'break-word'\n}\n\nexport const overflowWrap: IPropertyIdentValueDescriptor<OVERFLOW_WRAP> = {\n    name: 'overflow-wrap',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, overflow: string) => {\n        switch (overflow) {\n            case 'break-word':\n                return OVERFLOW_WRAP.BREAK_WORD;\n            case 'normal':\n            default:\n                return OVERFLOW_WRAP.NORMAL;\n        }\n    }\n};\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nconst paddingForSide = (side: string): IPropertyTypeValueDescriptor => ({\n    name: `padding-${side}`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'length-percentage'\n});\n\nexport const paddingTop: IPropertyTypeValueDescriptor = paddingForSide('top');\nexport const paddingRight: IPropertyTypeValueDescriptor = paddingForSide('right');\nexport const paddingBottom: IPropertyTypeValueDescriptor = paddingForSide('bottom');\nexport const paddingLeft: IPropertyTypeValueDescriptor = paddingForSide('left');\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum TEXT_ALIGN {\n    LEFT = 0,\n    CENTER = 1,\n    RIGHT = 2\n}\n\nexport const textAlign: IPropertyIdentValueDescriptor<TEXT_ALIGN> = {\n    name: 'text-align',\n    initialValue: 'left',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, textAlign: string) => {\n        switch (textAlign) {\n            case 'right':\n                return TEXT_ALIGN.RIGHT;\n            case 'center':\n            case 'justify':\n                return TEXT_ALIGN.CENTER;\n            case 'left':\n            default:\n                return TEXT_ALIGN.LEFT;\n        }\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum POSITION {\n    STATIC = 0,\n    RELATIVE = 1,\n    ABSOLUTE = 2,\n    FIXED = 3,\n    STICKY = 4\n}\n\nexport const position: IPropertyIdentValueDescriptor<POSITION> = {\n    name: 'position',\n    initialValue: 'static',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, position: string) => {\n        switch (position) {\n            case 'relative':\n                return POSITION.RELATIVE;\n            case 'absolute':\n                return POSITION.ABSOLUTE;\n            case 'fixed':\n                return POSITION.FIXED;\n            case 'sticky':\n                return POSITION.STICKY;\n        }\n\n        return POSITION.STATIC;\n    }\n};\n","import {PropertyDescriptorParsingType, IPropertyListDescriptor} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentWithValue, parseFunctionArgs} from '../syntax/parser';\nimport {ZERO_LENGTH} from '../types/length-percentage';\nimport {color, Color, COLORS} from '../types/color';\nimport {isLength, Length} from '../types/length';\nimport {Context} from '../../core/context';\n\nexport type TextShadow = TextShadowItem[];\ninterface TextShadowItem {\n    color: Color;\n    offsetX: Length;\n    offsetY: Length;\n    blur: Length;\n}\n\nexport const textShadow: IPropertyListDescriptor<TextShadow> = {\n    name: 'text-shadow',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (context: Context, tokens: CSSValue[]): TextShadow => {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n\n        return parseFunctionArgs(tokens).map((values: CSSValue[]) => {\n            const shadow: TextShadowItem = {\n                color: COLORS.TRANSPARENT,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH\n            };\n            let c = 0;\n            for (let i = 0; i < values.length; i++) {\n                const token = values[i];\n                if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    } else if (c === 1) {\n                        shadow.offsetY = token;\n                    } else {\n                        shadow.blur = token;\n                    }\n                    c++;\n                } else {\n                    shadow.color = color.parse(context, token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum TEXT_TRANSFORM {\n    NONE = 0,\n    LOWERCASE = 1,\n    UPPERCASE = 2,\n    CAPITALIZE = 3\n}\n\nexport const textTransform: IPropertyIdentValueDescriptor<TEXT_TRANSFORM> = {\n    name: 'text-transform',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, textTransform: string) => {\n        switch (textTransform) {\n            case 'uppercase':\n                return TEXT_TRANSFORM.UPPERCASE;\n            case 'lowercase':\n                return TEXT_TRANSFORM.LOWERCASE;\n            case 'capitalize':\n                return TEXT_TRANSFORM.CAPITALIZE;\n        }\n\n        return TEXT_TRANSFORM.NONE;\n    }\n};\n","import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {NumberValueToken, TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\nexport type Matrix = [number, number, number, number, number, number];\nexport type Transform = Matrix | null;\n\nexport const transform: IPropertyValueDescriptor<Transform> = {\n    name: 'transform',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (_context: Context, token: CSSValue) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n            return null;\n        }\n\n        if (token.type === TokenType.FUNCTION) {\n            const transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];\n            if (typeof transformFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported transform function \"${token.name}\"`);\n            }\n            return transformFunction(token.values);\n        }\n\n        return null;\n    }\n};\n\nconst matrix = (args: CSSValue[]): Transform => {\n    const values = args.filter((arg) => arg.type === TokenType.NUMBER_TOKEN).map((arg: NumberValueToken) => arg.number);\n\n    return values.length === 6 ? (values as Matrix) : null;\n};\n\n// doesn't support 3D transforms at the moment\nconst matrix3d = (args: CSSValue[]): Transform => {\n    const values = args.filter((arg) => arg.type === TokenType.NUMBER_TOKEN).map((arg: NumberValueToken) => arg.number);\n\n    const [a1, b1, {}, {}, a2, b2, {}, {}, {}, {}, {}, {}, a4, b4, {}, {}] = values;\n\n    return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null;\n};\n\nconst SUPPORTED_TRANSFORM_FUNCTIONS: {\n    [key: string]: (args: CSSValue[]) => Transform;\n} = {\n    matrix: matrix,\n    matrix3d: matrix3d\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentage} from '../types/length-percentage';\nimport {FLAG_INTEGER, TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\nexport type TransformOrigin = [LengthPercentage, LengthPercentage];\n\nconst DEFAULT_VALUE: LengthPercentage = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 50,\n    flags: FLAG_INTEGER\n};\nconst DEFAULT: TransformOrigin = [DEFAULT_VALUE, DEFAULT_VALUE];\n\nexport const transformOrigin: IPropertyListDescriptor<TransformOrigin> = {\n    name: 'transform-origin',\n    initialValue: '50% 50%',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        const origins: LengthPercentage[] = tokens.filter(isLengthPercentage);\n\n        if (origins.length !== 2) {\n            return DEFAULT;\n        }\n\n        return [origins[0], origins[1]];\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum VISIBILITY {\n    VISIBLE = 0,\n    HIDDEN = 1,\n    COLLAPSE = 2\n}\n\nexport const visibility: IPropertyIdentValueDescriptor<VISIBILITY> = {\n    name: 'visible',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, visibility: string) => {\n        switch (visibility) {\n            case 'hidden':\n                return VISIBILITY.HIDDEN;\n            case 'collapse':\n                return VISIBILITY.COLLAPSE;\n            case 'visible':\n            default:\n                return VISIBILITY.VISIBLE;\n        }\n    }\n};\n","const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const decode = (base64: string): ArrayBuffer | number[] => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const buffer =\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n            ? new ArrayBuffer(bufferLength)\n            : new Array(bufferLength);\n    const bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return buffer;\n};\n\nexport const polyUint16Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\nexport const polyUint32Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n","import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isNumberToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\ninterface zIndex {\n    order: number;\n    auto: boolean;\n}\n\nexport const zIndex: IPropertyValueDescriptor<zIndex> = {\n    name: 'z-index',\n    initialValue: 'auto',\n    prefix: false,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (_context: Context, token: CSSValue): zIndex => {\n        if (token.type === TokenType.IDENT_TOKEN) {\n            return {auto: true, order: 0};\n        }\n\n        if (isNumberToken(token)) {\n            return {auto: false, order: token.number};\n        }\n\n        throw new Error(`Invalid z-index number parsed`);\n    }\n};\n","import {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {Context} from '../../core/context';\n\nexport const time: ITypeDescriptor<number> = {\n    name: 'time',\n    parse: (_context: Context, value: CSSValue): number => {\n        if (value.type === TokenType.DIMENSION_TOKEN) {\n            switch (value.unit.toLowerCase()) {\n                case 's':\n                    return 1000 * value.number;\n                case 'ms':\n                    return value.number;\n            }\n        }\n\n        throw new Error(`Unsupported time type`);\n    }\n};\n","import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isNumberToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const opacity: IPropertyValueDescriptor<number> = {\n    name: 'opacity',\n    initialValue: '1',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n        return 1;\n    }\n};\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const textDecorationColor: IPropertyTypeValueDescriptor = {\n    name: `text-decoration-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const enum TEXT_DECORATION_LINE {\n    NONE = 0,\n    UNDERLINE = 1,\n    OVERLINE = 2,\n    LINE_THROUGH = 3,\n    BLINK = 4\n}\n\nexport type TextDecorationLine = TEXT_DECORATION_LINE[];\n\nexport const textDecorationLine: IPropertyListDescriptor<TextDecorationLine> = {\n    name: 'text-decoration-line',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): TextDecorationLine => {\n        return tokens\n            .filter(isIdentToken)\n            .map((token) => {\n                switch (token.value) {\n                    case 'underline':\n                        return TEXT_DECORATION_LINE.UNDERLINE;\n                    case 'overline':\n                        return TEXT_DECORATION_LINE.OVERLINE;\n                    case 'line-through':\n                        return TEXT_DECORATION_LINE.LINE_THROUGH;\n                    case 'none':\n                        return TEXT_DECORATION_LINE.BLINK;\n                }\n                return TEXT_DECORATION_LINE.NONE;\n            })\n            .filter((line) => line !== TEXT_DECORATION_LINE.NONE);\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport type FONT_FAMILY = string;\n\nexport type FontFamily = FONT_FAMILY[];\n\nexport const fontFamily: IPropertyListDescriptor<FontFamily> = {\n    name: `font-family`,\n    initialValue: '',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        const accumulator: string[] = [];\n        const results: string[] = [];\n        tokens.forEach((token) => {\n            switch (token.type) {\n                case TokenType.IDENT_TOKEN:\n                case TokenType.STRING_TOKEN:\n                    accumulator.push(token.value);\n                    break;\n                case TokenType.NUMBER_TOKEN:\n                    accumulator.push(token.number.toString());\n                    break;\n                case TokenType.COMMA_TOKEN:\n                    results.push(accumulator.join(' '));\n                    accumulator.length = 0;\n                    break;\n            }\n        });\n        if (accumulator.length) {\n            results.push(accumulator.join(' '));\n        }\n        return results.map((result) => (result.indexOf(' ') === -1 ? result : `'${result}'`));\n    }\n};\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const fontSize: IPropertyTypeValueDescriptor = {\n    name: `font-size`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'length'\n};\n","import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, isNumberToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const fontWeight: IPropertyValueDescriptor<number> = {\n    name: 'font-weight',\n    initialValue: 'normal',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n\n        if (isIdentToken(token)) {\n            switch (token.value) {\n                case 'bold':\n                    return 700;\n                case 'normal':\n                default:\n                    return 400;\n            }\n        }\n\n        return 400;\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const fontVariant: IPropertyListDescriptor<string[]> = {\n    name: 'font-variant',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (_context: Context, tokens: CSSValue[]): string[] => {\n        return tokens.filter(isIdentToken).map((token) => token.value);\n    }\n};\n","import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum FONT_STYLE {\n    NORMAL = 'normal',\n    ITALIC = 'italic',\n    OBLIQUE = 'oblique'\n}\n\nexport const fontStyle: IPropertyIdentValueDescriptor<FONT_STYLE> = {\n    name: 'font-style',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, overflow: string) => {\n        switch (overflow) {\n            case 'oblique':\n                return FONT_STYLE.OBLIQUE;\n            case 'italic':\n                return FONT_STYLE.ITALIC;\n            case 'normal':\n            default:\n                return FONT_STYLE.NORMAL;\n        }\n    }\n};\n","export const contains = (bit: number, value: number): boolean => (bit & value) !== 0;\n","import {TokenType} from '../syntax/tokenizer';\nimport {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport type Content = CSSValue[];\n\nexport const content: IPropertyListDescriptor<Content> = {\n    name: 'content',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return [];\n        }\n\n        return tokens;\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isNumberToken, nonWhiteSpace} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport interface COUNTER_INCREMENT {\n    counter: string;\n    increment: number;\n}\n\nexport type CounterIncrement = COUNTER_INCREMENT[] | null;\n\nexport const counterIncrement: IPropertyListDescriptor<CounterIncrement> = {\n    name: 'counter-increment',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return null;\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return null;\n        }\n\n        const increments = [];\n        const filtered = tokens.filter(nonWhiteSpace);\n\n        for (let i = 0; i < filtered.length; i++) {\n            const counter = filtered[i];\n            const next = filtered[i + 1];\n            if (counter.type === TokenType.IDENT_TOKEN) {\n                const increment = next && isNumberToken(next) ? next.number : 1;\n                increments.push({counter: counter.value, increment});\n            }\n        }\n\n        return increments;\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, isNumberToken, nonWhiteSpace} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport interface COUNTER_RESET {\n    counter: string;\n    reset: number;\n}\n\nexport type CounterReset = COUNTER_RESET[];\n\nexport const counterReset: IPropertyListDescriptor<CounterReset> = {\n    name: 'counter-reset',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n\n        const resets = [];\n        const filtered = tokens.filter(nonWhiteSpace);\n\n        for (let i = 0; i < filtered.length; i++) {\n            const counter = filtered[i];\n            const next = filtered[i + 1];\n            if (isIdentToken(counter) && counter.value !== 'none') {\n                const reset = next && isNumberToken(next) ? next.number : 0;\n                resets.push({counter: counter.value, reset});\n            }\n        }\n\n        return resets;\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nimport {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {time} from '../types/time';\n\nexport const duration: IPropertyListDescriptor<number[]> = {\n    name: 'duration',\n    initialValue: '0s',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (context: Context, tokens: CSSValue[]) => {\n        return tokens.filter(isDimensionToken).map((token) => time.parse(context, token));\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isStringToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport interface QUOTE {\n    open: string;\n    close: string;\n}\n\nexport type Quotes = QUOTE[] | null;\n\nexport const quotes: IPropertyListDescriptor<Quotes> = {\n    name: 'quotes',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return null;\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return null;\n        }\n\n        const quotes = [];\n        const filtered = tokens.filter(isStringToken);\n\n        if (filtered.length % 2 !== 0) {\n            return null;\n        }\n\n        for (let i = 0; i < filtered.length; i += 2) {\n            const open = filtered[i].value;\n            const close = filtered[i + 1].value;\n            quotes.push({open, close});\n        }\n\n        return quotes;\n    }\n};\n\nexport const getQuote = (quotes: Quotes, depth: number, open: boolean): string => {\n    if (!quotes) {\n        return '';\n    }\n\n    const quote = quotes[Math.min(depth, quotes.length - 1)];\n    if (!quote) {\n        return '';\n    }\n\n    return open ? quote.open : quote.close;\n};\n","import {PropertyDescriptorParsingType, IPropertyListDescriptor} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentWithValue, parseFunctionArgs} from '../syntax/parser';\nimport {ZERO_LENGTH} from '../types/length-percentage';\nimport {color, Color} from '../types/color';\nimport {isLength, Length} from '../types/length';\nimport {Context} from '../../core/context';\n\nexport type BoxShadow = BoxShadowItem[];\ninterface BoxShadowItem {\n    inset: boolean;\n    color: Color;\n    offsetX: Length;\n    offsetY: Length;\n    blur: Length;\n    spread: Length;\n}\n\nexport const boxShadow: IPropertyListDescriptor<BoxShadow> = {\n    name: 'box-shadow',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (context: Context, tokens: CSSValue[]): BoxShadow => {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n\n        return parseFunctionArgs(tokens).map((values: CSSValue[]) => {\n            const shadow: BoxShadowItem = {\n                color: 0x000000ff,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH,\n                spread: ZERO_LENGTH,\n                inset: false\n            };\n            let c = 0;\n            for (let i = 0; i < values.length; i++) {\n                const token = values[i];\n                if (isIdentWithValue(token, 'inset')) {\n                    shadow.inset = true;\n                } else if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    } else if (c === 1) {\n                        shadow.offsetY = token;\n                    } else if (c === 2) {\n                        shadow.blur = token;\n                    } else {\n                        shadow.spread = token;\n                    }\n                    c++;\n                } else {\n                    shadow.color = color.parse(context, token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n","import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum PAINT_ORDER_LAYER {\n    FILL,\n    STROKE,\n    MARKERS\n}\n\nexport type PaintOrder = PAINT_ORDER_LAYER[];\n\nexport const paintOrder: IPropertyListDescriptor<PaintOrder> = {\n    name: 'paint-order',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): PaintOrder => {\n        const DEFAULT_VALUE = [PAINT_ORDER_LAYER.FILL, PAINT_ORDER_LAYER.STROKE, PAINT_ORDER_LAYER.MARKERS];\n        const layers: PaintOrder = [];\n\n        tokens.filter(isIdentToken).forEach((token) => {\n            switch (token.value) {\n                case 'stroke':\n                    layers.push(PAINT_ORDER_LAYER.STROKE);\n                    break;\n                case 'fill':\n                    layers.push(PAINT_ORDER_LAYER.FILL);\n                    break;\n                case 'markers':\n                    layers.push(PAINT_ORDER_LAYER.MARKERS);\n                    break;\n            }\n        });\n        DEFAULT_VALUE.forEach((value) => {\n            if (layers.indexOf(value) === -1) {\n                layers.push(value);\n            }\n        });\n\n        return layers;\n    }\n};\n","import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nexport const webkitTextStrokeColor: IPropertyTypeValueDescriptor = {\n    name: `-webkit-text-stroke-color`,\n    initialValue: 'currentcolor',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n","import {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const webkitTextStrokeWidth: IPropertyValueDescriptor<number> = {\n    name: `-webkit-text-stroke-width`,\n    initialValue: '0',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n};\n","import {CSSPropertyDescriptor, PropertyDescriptorParsingType} from './IPropertyDescriptor';\nimport {backgroundClip} from './property-descriptors/background-clip';\nimport {backgroundColor} from './property-descriptors/background-color';\nimport {backgroundImage} from './property-descriptors/background-image';\nimport {backgroundOrigin} from './property-descriptors/background-origin';\nimport {backgroundPosition} from './property-descriptors/background-position';\nimport {backgroundRepeat} from './property-descriptors/background-repeat';\nimport {backgroundSize} from './property-descriptors/background-size';\nimport {\n    borderBottomColor,\n    borderLeftColor,\n    borderRightColor,\n    borderTopColor\n} from './property-descriptors/border-color';\nimport {\n    borderBottomLeftRadius,\n    borderBottomRightRadius,\n    borderTopLeftRadius,\n    borderTopRightRadius\n} from './property-descriptors/border-radius';\nimport {\n    borderBottomStyle,\n    borderLeftStyle,\n    borderRightStyle,\n    borderTopStyle\n} from './property-descriptors/border-style';\nimport {\n    borderBottomWidth,\n    borderLeftWidth,\n    borderRightWidth,\n    borderTopWidth\n} from './property-descriptors/border-width';\nimport {color} from './property-descriptors/color';\nimport {direction} from './property-descriptors/direction';\nimport {display, DISPLAY} from './property-descriptors/display';\nimport {float, FLOAT} from './property-descriptors/float';\nimport {letterSpacing} from './property-descriptors/letter-spacing';\nimport {lineBreak} from './property-descriptors/line-break';\nimport {lineHeight} from './property-descriptors/line-height';\nimport {listStyleImage} from './property-descriptors/list-style-image';\nimport {listStylePosition} from './property-descriptors/list-style-position';\nimport {listStyleType} from './property-descriptors/list-style-type';\nimport {marginBottom, marginLeft, marginRight, marginTop} from './property-descriptors/margin';\nimport {overflow, OVERFLOW} from './property-descriptors/overflow';\nimport {overflowWrap} from './property-descriptors/overflow-wrap';\nimport {paddingBottom, paddingLeft, paddingRight, paddingTop} from './property-descriptors/padding';\nimport {textAlign} from './property-descriptors/text-align';\nimport {position, POSITION} from './property-descriptors/position';\nimport {textShadow} from './property-descriptors/text-shadow';\nimport {textTransform} from './property-descriptors/text-transform';\nimport {transform} from './property-descriptors/transform';\nimport {transformOrigin} from './property-descriptors/transform-origin';\nimport {visibility, VISIBILITY} from './property-descriptors/visibility';\nimport {wordBreak} from './property-descriptors/word-break';\nimport {zIndex} from './property-descriptors/z-index';\nimport {CSSValue, isIdentToken, Parser} from './syntax/parser';\nimport {Tokenizer} from './syntax/tokenizer';\nimport {Color, color as colorType, isTransparent} from './types/color';\nimport {angle} from './types/angle';\nimport {image} from './types/image';\nimport {time} from './types/time';\nimport {opacity} from './property-descriptors/opacity';\nimport {textDecorationColor} from './property-descriptors/text-decoration-color';\nimport {textDecorationLine} from './property-descriptors/text-decoration-line';\nimport {isLengthPercentage, LengthPercentage, ZERO_LENGTH} from './types/length-percentage';\nimport {fontFamily} from './property-descriptors/font-family';\nimport {fontSize} from './property-descriptors/font-size';\nimport {isLength} from './types/length';\nimport {fontWeight} from './property-descriptors/font-weight';\nimport {fontVariant} from './property-descriptors/font-variant';\nimport {fontStyle} from './property-descriptors/font-style';\nimport {contains} from '../core/bitwise';\nimport {content} from './property-descriptors/content';\nimport {counterIncrement} from './property-descriptors/counter-increment';\nimport {counterReset} from './property-descriptors/counter-reset';\nimport {duration} from './property-descriptors/duration';\nimport {quotes} from './property-descriptors/quotes';\nimport {boxShadow} from './property-descriptors/box-shadow';\nimport {paintOrder} from './property-descriptors/paint-order';\nimport {webkitTextStrokeColor} from './property-descriptors/webkit-text-stroke-color';\nimport {webkitTextStrokeWidth} from './property-descriptors/webkit-text-stroke-width';\nimport {Context} from '../core/context';\n\nexport class CSSParsedDeclaration {\n    animationDuration: ReturnType<typeof duration.parse>;\n    backgroundClip: ReturnType<typeof backgroundClip.parse>;\n    backgroundColor: Color;\n    backgroundImage: ReturnType<typeof backgroundImage.parse>;\n    backgroundOrigin: ReturnType<typeof backgroundOrigin.parse>;\n    backgroundPosition: ReturnType<typeof backgroundPosition.parse>;\n    backgroundRepeat: ReturnType<typeof backgroundRepeat.parse>;\n    backgroundSize: ReturnType<typeof backgroundSize.parse>;\n    borderTopColor: Color;\n    borderRightColor: Color;\n    borderBottomColor: Color;\n    borderLeftColor: Color;\n    borderTopLeftRadius: ReturnType<typeof borderTopLeftRadius.parse>;\n    borderTopRightRadius: ReturnType<typeof borderTopRightRadius.parse>;\n    borderBottomRightRadius: ReturnType<typeof borderBottomRightRadius.parse>;\n    borderBottomLeftRadius: ReturnType<typeof borderBottomLeftRadius.parse>;\n    borderTopStyle: ReturnType<typeof borderTopStyle.parse>;\n    borderRightStyle: ReturnType<typeof borderRightStyle.parse>;\n    borderBottomStyle: ReturnType<typeof borderBottomStyle.parse>;\n    borderLeftStyle: ReturnType<typeof borderLeftStyle.parse>;\n    borderTopWidth: ReturnType<typeof borderTopWidth.parse>;\n    borderRightWidth: ReturnType<typeof borderRightWidth.parse>;\n    borderBottomWidth: ReturnType<typeof borderBottomWidth.parse>;\n    borderLeftWidth: ReturnType<typeof borderLeftWidth.parse>;\n    boxShadow: ReturnType<typeof boxShadow.parse>;\n    color: Color;\n    direction: ReturnType<typeof direction.parse>;\n    display: ReturnType<typeof display.parse>;\n    float: ReturnType<typeof float.parse>;\n    fontFamily: ReturnType<typeof fontFamily.parse>;\n    fontSize: LengthPercentage;\n    fontStyle: ReturnType<typeof fontStyle.parse>;\n    fontVariant: ReturnType<typeof fontVariant.parse>;\n    fontWeight: ReturnType<typeof fontWeight.parse>;\n    letterSpacing: ReturnType<typeof letterSpacing.parse>;\n    lineBreak: ReturnType<typeof lineBreak.parse>;\n    lineHeight: CSSValue;\n    listStyleImage: ReturnType<typeof listStyleImage.parse>;\n    listStylePosition: ReturnType<typeof listStylePosition.parse>;\n    listStyleType: ReturnType<typeof listStyleType.parse>;\n    marginTop: CSSValue;\n    marginRight: CSSValue;\n    marginBottom: CSSValue;\n    marginLeft: CSSValue;\n    opacity: ReturnType<typeof opacity.parse>;\n    overflowX: OVERFLOW;\n    overflowY: OVERFLOW;\n    overflowWrap: ReturnType<typeof overflowWrap.parse>;\n    paddingTop: LengthPercentage;\n    paddingRight: LengthPercentage;\n    paddingBottom: LengthPercentage;\n    paddingLeft: LengthPercentage;\n    paintOrder: ReturnType<typeof paintOrder.parse>;\n    position: ReturnType<typeof position.parse>;\n    textAlign: ReturnType<typeof textAlign.parse>;\n    textDecorationColor: Color;\n    textDecorationLine: ReturnType<typeof textDecorationLine.parse>;\n    textShadow: ReturnType<typeof textShadow.parse>;\n    textTransform: ReturnType<typeof textTransform.parse>;\n    transform: ReturnType<typeof transform.parse>;\n    transformOrigin: ReturnType<typeof transformOrigin.parse>;\n    visibility: ReturnType<typeof visibility.parse>;\n    webkitTextStrokeColor: Color;\n    webkitTextStrokeWidth: ReturnType<typeof webkitTextStrokeWidth.parse>;\n    wordBreak: ReturnType<typeof wordBreak.parse>;\n    zIndex: ReturnType<typeof zIndex.parse>;\n\n    constructor(context: Context, declaration: CSSStyleDeclaration) {\n        this.animationDuration = parse(context, duration, declaration.animationDuration);\n        this.backgroundClip = parse(context, backgroundClip, declaration.backgroundClip);\n        this.backgroundColor = parse(context, backgroundColor, declaration.backgroundColor);\n        this.backgroundImage = parse(context, backgroundImage, declaration.backgroundImage);\n        this.backgroundOrigin = parse(context, backgroundOrigin, declaration.backgroundOrigin);\n        this.backgroundPosition = parse(context, backgroundPosition, declaration.backgroundPosition);\n        this.backgroundRepeat = parse(context, backgroundRepeat, declaration.backgroundRepeat);\n        this.backgroundSize = parse(context, backgroundSize, declaration.backgroundSize);\n        this.borderTopColor = parse(context, borderTopColor, declaration.borderTopColor);\n        this.borderRightColor = parse(context, borderRightColor, declaration.borderRightColor);\n        this.borderBottomColor = parse(context, borderBottomColor, declaration.borderBottomColor);\n        this.borderLeftColor = parse(context, borderLeftColor, declaration.borderLeftColor);\n        this.borderTopLeftRadius = parse(context, borderTopLeftRadius, declaration.borderTopLeftRadius);\n        this.borderTopRightRadius = parse(context, borderTopRightRadius, declaration.borderTopRightRadius);\n        this.borderBottomRightRadius = parse(context, borderBottomRightRadius, declaration.borderBottomRightRadius);\n        this.borderBottomLeftRadius = parse(context, borderBottomLeftRadius, declaration.borderBottomLeftRadius);\n        this.borderTopStyle = parse(context, borderTopStyle, declaration.borderTopStyle);\n        this.borderRightStyle = parse(context, borderRightStyle, declaration.borderRightStyle);\n        this.borderBottomStyle = parse(context, borderBottomStyle, declaration.borderBottomStyle);\n        this.borderLeftStyle = parse(context, borderLeftStyle, declaration.borderLeftStyle);\n        this.borderTopWidth = parse(context, borderTopWidth, declaration.borderTopWidth);\n        this.borderRightWidth = parse(context, borderRightWidth, declaration.borderRightWidth);\n        this.borderBottomWidth = parse(context, borderBottomWidth, declaration.borderBottomWidth);\n        this.borderLeftWidth = parse(context, borderLeftWidth, declaration.borderLeftWidth);\n        this.boxShadow = parse(context, boxShadow, declaration.boxShadow);\n        this.color = parse(context, color, declaration.color);\n        this.direction = parse(context, direction, declaration.direction);\n        this.display = parse(context, display, declaration.display);\n        this.float = parse(context, float, declaration.cssFloat);\n        this.fontFamily = parse(context, fontFamily, declaration.fontFamily);\n        this.fontSize = parse(context, fontSize, declaration.fontSize);\n        this.fontStyle = parse(context, fontStyle, declaration.fontStyle);\n        this.fontVariant = parse(context, fontVariant, declaration.fontVariant);\n        this.fontWeight = parse(context, fontWeight, declaration.fontWeight);\n        this.letterSpacing = parse(context, letterSpacing, declaration.letterSpacing);\n        this.lineBreak = parse(context, lineBreak, declaration.lineBreak);\n        this.lineHeight = parse(context, lineHeight, declaration.lineHeight);\n        this.listStyleImage = parse(context, listStyleImage, declaration.listStyleImage);\n        this.listStylePosition = parse(context, listStylePosition, declaration.listStylePosition);\n        this.listStyleType = parse(context, listStyleType, declaration.listStyleType);\n        this.marginTop = parse(context, marginTop, declaration.marginTop);\n        this.marginRight = parse(context, marginRight, declaration.marginRight);\n        this.marginBottom = parse(context, marginBottom, declaration.marginBottom);\n        this.marginLeft = parse(context, marginLeft, declaration.marginLeft);\n        this.opacity = parse(context, opacity, declaration.opacity);\n        const overflowTuple = parse(context, overflow, declaration.overflow);\n        this.overflowX = overflowTuple[0];\n        this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];\n        this.overflowWrap = parse(context, overflowWrap, declaration.overflowWrap);\n        this.paddingTop = parse(context, paddingTop, declaration.paddingTop);\n        this.paddingRight = parse(context, paddingRight, declaration.paddingRight);\n        this.paddingBottom = parse(context, paddingBottom, declaration.paddingBottom);\n        this.paddingLeft = parse(context, paddingLeft, declaration.paddingLeft);\n        this.paintOrder = parse(context, paintOrder, declaration.paintOrder);\n        this.position = parse(context, position, declaration.position);\n        this.textAlign = parse(context, textAlign, declaration.textAlign);\n        this.textDecorationColor = parse(\n            context,\n            textDecorationColor,\n            declaration.textDecorationColor ?? declaration.color\n        );\n        this.textDecorationLine = parse(\n            context,\n            textDecorationLine,\n            declaration.textDecorationLine ?? declaration.textDecoration\n        );\n        this.textShadow = parse(context, textShadow, declaration.textShadow);\n        this.textTransform = parse(context, textTransform, declaration.textTransform);\n        this.transform = parse(context, transform, declaration.transform);\n        this.transformOrigin = parse(context, transformOrigin, declaration.transformOrigin);\n        this.visibility = parse(context, visibility, declaration.visibility);\n        this.webkitTextStrokeColor = parse(context, webkitTextStrokeColor, declaration.webkitTextStrokeColor);\n        this.webkitTextStrokeWidth = parse(context, webkitTextStrokeWidth, declaration.webkitTextStrokeWidth);\n        this.wordBreak = parse(context, wordBreak, declaration.wordBreak);\n        this.zIndex = parse(context, zIndex, declaration.zIndex);\n    }\n\n    isVisible(): boolean {\n        return this.display > 0 && this.opacity > 0 && this.visibility === VISIBILITY.VISIBLE;\n    }\n\n    isTransparent(): boolean {\n        return isTransparent(this.backgroundColor);\n    }\n\n    isTransformed(): boolean {\n        return this.transform !== null;\n    }\n\n    isPositioned(): boolean {\n        return this.position !== POSITION.STATIC;\n    }\n\n    isPositionedWithZIndex(): boolean {\n        return this.isPositioned() && !this.zIndex.auto;\n    }\n\n    isFloating(): boolean {\n        return this.float !== FLOAT.NONE;\n    }\n\n    isInlineLevel(): boolean {\n        return (\n            contains(this.display, DISPLAY.INLINE) ||\n            contains(this.display, DISPLAY.INLINE_BLOCK) ||\n            contains(this.display, DISPLAY.INLINE_FLEX) ||\n            contains(this.display, DISPLAY.INLINE_GRID) ||\n            contains(this.display, DISPLAY.INLINE_LIST_ITEM) ||\n            contains(this.display, DISPLAY.INLINE_TABLE)\n        );\n    }\n}\n\nexport class CSSParsedPseudoDeclaration {\n    content: ReturnType<typeof content.parse>;\n    quotes: ReturnType<typeof quotes.parse>;\n\n    constructor(context: Context, declaration: CSSStyleDeclaration) {\n        this.content = parse(context, content, declaration.content);\n        this.quotes = parse(context, quotes, declaration.quotes);\n    }\n}\n\nexport class CSSParsedCounterDeclaration {\n    counterIncrement: ReturnType<typeof counterIncrement.parse>;\n    counterReset: ReturnType<typeof counterReset.parse>;\n\n    constructor(context: Context, declaration: CSSStyleDeclaration) {\n        this.counterIncrement = parse(context, counterIncrement, declaration.counterIncrement);\n        this.counterReset = parse(context, counterReset, declaration.counterReset);\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst parse = (context: Context, descriptor: CSSPropertyDescriptor<any>, style?: string | null) => {\n    const tokenizer = new Tokenizer();\n    const value = style !== null && typeof style !== 'undefined' ? style.toString() : descriptor.initialValue;\n    tokenizer.write(value);\n    const parser = new Parser(tokenizer.read());\n    switch (descriptor.type) {\n        case PropertyDescriptorParsingType.IDENT_VALUE:\n            const token = parser.parseComponentValue();\n            return descriptor.parse(context, isIdentToken(token) ? token.value : descriptor.initialValue);\n        case PropertyDescriptorParsingType.VALUE:\n            return descriptor.parse(context, parser.parseComponentValue());\n        case PropertyDescriptorParsingType.LIST:\n            return descriptor.parse(context, parser.parseComponentValues());\n        case PropertyDescriptorParsingType.TOKEN_VALUE:\n            return parser.parseComponentValue();\n        case PropertyDescriptorParsingType.TYPE_VALUE:\n            switch (descriptor.format) {\n                case 'angle':\n                    return angle.parse(context, parser.parseComponentValue());\n                case 'color':\n                    return colorType.parse(context, parser.parseComponentValue());\n                case 'image':\n                    return image.parse(context, parser.parseComponentValue());\n                case 'length':\n                    const length = parser.parseComponentValue();\n                    return isLength(length) ? length : ZERO_LENGTH;\n                case 'length-percentage':\n                    const value = parser.parseComponentValue();\n                    return isLengthPercentage(value) ? value : ZERO_LENGTH;\n                case 'time':\n                    return time.parse(context, parser.parseComponentValue());\n            }\n            break;\n    }\n};\n","const elementDebuggerAttribute = 'data-html2canvas-debug';\nexport const enum DebuggerType {\n    NONE,\n    ALL,\n    CLONE,\n    PARSE,\n    RENDER\n}\n\nconst getElementDebugType = (element: Element): DebuggerType => {\n    const attribute = element.getAttribute(elementDebuggerAttribute);\n    switch (attribute) {\n        case 'all':\n            return DebuggerType.ALL;\n        case 'clone':\n            return DebuggerType.CLONE;\n        case 'parse':\n            return DebuggerType.PARSE;\n        case 'render':\n            return DebuggerType.RENDER;\n        default:\n            return DebuggerType.NONE;\n    }\n};\n\nexport const isDebugging = (element: Element, type: Omit<DebuggerType, DebuggerType.NONE>): boolean => {\n    const elementType = getElementDebugType(element);\n    return elementType === DebuggerType.ALL || type === elementType;\n};\n","import {CSSParsedDeclaration} from '../css/index';\nimport {TextContainer} from './text-container';\nimport {Bounds, parseBounds} from '../css/layout/bounds';\nimport {isHTMLElementNode} from './node-parser';\nimport {Context} from '../core/context';\nimport {DebuggerType, isDebugging} from '../core/debugger';\n\nexport const enum FLAGS {\n    CREATES_STACKING_CONTEXT = 1 << 1,\n    CREATES_REAL_STACKING_CONTEXT = 1 << 2,\n    IS_LIST_OWNER = 1 << 3,\n    DEBUG_RENDER = 1 << 4\n}\n\nexport class ElementContainer {\n    readonly styles: CSSParsedDeclaration;\n    readonly textNodes: TextContainer[] = [];\n    readonly elements: ElementContainer[] = [];\n    bounds: Bounds;\n    flags = 0;\n\n    constructor(protected readonly context: Context, element: Element) {\n        if (isDebugging(element, DebuggerType.PARSE)) {\n            debugger;\n        }\n\n        this.styles = new CSSParsedDeclaration(context, window.getComputedStyle(element, null));\n\n        if (isHTMLElementNode(element)) {\n            if (this.styles.animationDuration.some((duration) => duration > 0)) {\n                element.style.animationDuration = '0s';\n            }\n\n            if (this.styles.transform !== null) {\n                // getBoundingClientRect takes transforms into account\n                element.style.transform = 'none';\n            }\n        }\n\n        this.bounds = parseBounds(this.context, element);\n\n        if (isDebugging(element, DebuggerType.RENDER)) {\n            this.flags |= FLAGS.DEBUG_RENDER;\n        }\n    }\n}\n","export const base64 =\n    'AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=';\nexport const byteLength = 19616;\n","const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const encode = (arraybuffer: ArrayBuffer): string => {\n    let bytes = new Uint8Array(arraybuffer),\n        i,\n        len = bytes.length,\n        base64 = '';\n\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    } else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n\n    return base64;\n};\n\nexport const decode = (base64: string): ArrayBuffer => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n};\n","import {decode, polyUint16Array, polyUint32Array} from './Util';\n\nexport type int = number;\n\n/** Shift size for getting the index-2 table offset. */\nexport const UTRIE2_SHIFT_2 = 5;\n\n/** Shift size for getting the index-1 table offset. */\nexport const UTRIE2_SHIFT_1 = 6 + 5;\n\n/**\n * Shift size for shifting left the index array values.\n * Increases possible data size with 16-bit index values at the cost\n * of compactability.\n * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n */\nexport const UTRIE2_INDEX_SHIFT = 2;\n\n/**\n * Difference between the two shift sizes,\n * for getting an index-1 offset from an index-2 offset. 6=11-5\n */\nexport const UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;\n\n/**\n * The part of the index-2 table for U+D800..U+DBFF stores values for\n * lead surrogate code _units_ not code _points_.\n * Values for lead surrogate code _points_ are indexed with this portion of the table.\n * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n */\nexport const UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;\n\n/** Number of entries in a data block. 32=0x20 */\nexport const UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;\n/** Mask for getting the lower bits for the in-data-block offset. */\nexport const UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;\n\nexport const UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;\n/** Count the lengths of both BMP pieces. 2080=0x820 */\nexport const UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;\n/**\n * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n */\nexport const UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;\nexport const UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n/**\n * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n * Variable length, for code points up to highStart, where the last single-value range starts.\n * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n *\n * The part of the index-2 table for supplementary code points starts\n * after this index-1 table.\n *\n * Both the index-1 table and the following part of the index-2 table\n * are omitted completely if there is only BMP data.\n */\nexport const UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;\n\n/**\n * Number of index-1 entries for the BMP. 32=0x20\n * This part of the index-1 table is omitted from the serialized form.\n */\nexport const UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;\n\n/** Number of entries in an index-2 block. 64=0x40 */\nexport const UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;\n/** Mask for getting the lower bits for the in-index-2-block offset. */\nexport const UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;\n\nconst slice16 = (view: number[] | Uint16Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n};\n\nconst slice32 = (view: number[] | Uint32Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n};\n\nexport const createTrieFromBase64 = (base64: string, _byteLength: number): Trie => {\n    const buffer = decode(base64);\n    const view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);\n    const view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);\n    const headerLength = 24;\n\n    const index = slice16(view16, headerLength / 2, view32[4] / 2);\n    const data =\n        view32[5] === 2\n            ? slice16(view16, (headerLength + view32[4]) / 2)\n            : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));\n\n    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);\n};\n\nexport class Trie {\n    initialValue: int;\n    errorValue: int;\n    highStart: int;\n    highValueIndex: int;\n    index: Uint16Array | number[];\n    data: Uint32Array | Uint16Array | number[];\n\n    constructor(\n        initialValue: int,\n        errorValue: int,\n        highStart: int,\n        highValueIndex: int,\n        index: Uint16Array | number[],\n        data: Uint32Array | Uint16Array | number[]\n    ) {\n        this.initialValue = initialValue;\n        this.errorValue = errorValue;\n        this.highStart = highStart;\n        this.highValueIndex = highValueIndex;\n        this.index = index;\n        this.data = data;\n    }\n\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    get(codePoint: number): number {\n        let ix;\n        if (codePoint >= 0) {\n            if (codePoint < 0x0d800 || (codePoint > 0x0dbff && codePoint <= 0x0ffff)) {\n                // Ordinary BMP code point, excluding leading surrogates.\n                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n                // 16 bit data is stored in the index array itself.\n                ix = this.index[codePoint >> UTRIE2_SHIFT_2];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint <= 0xffff) {\n                // Lead Surrogate Code Point.  A Separate index section is stored for\n                // lead surrogate code units and code points.\n                //   The main index has the code unit data.\n                //   For this function, we need the code point data.\n                // Note: this expression could be refactored for slightly improved efficiency, but\n                //       surrogate code points will be so rare in practice that it's not worth it.\n                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + ((codePoint - 0xd800) >> UTRIE2_SHIFT_2)];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint < this.highStart) {\n                // Supplemental code point, use two-level lookup.\n                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);\n                ix = this.index[ix];\n                ix += (codePoint >> UTRIE2_SHIFT_2) & UTRIE2_INDEX_2_MASK;\n                ix = this.index[ix];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint <= 0x10ffff) {\n                return this.data[this.highValueIndex];\n            }\n        }\n\n        // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n        return this.errorValue;\n    }\n}\n","import {base64, byteLength} from './grapheme-break-trie';\nimport {createTrieFromBase64} from 'utrie';\n\nconst Other = 0;\nconst Prepend = 1;\nconst CR = 2;\nconst LF = 3;\nconst Control = 4;\nconst Extend = 5;\nconst Regional_Indicator = 6;\nconst SpacingMark = 7;\nconst L = 8;\nconst V = 9;\nconst T = 10;\nconst LV = 11;\nconst LVT = 12;\nconst ZWJ = 13;\nconst Extended_Pictographic = 14;\nconst RI = 15;\n\nexport const classes: {[key: string]: number} = {\n    Other,\n    Prepend,\n    CR,\n    LF,\n    Control,\n    Extend,\n    Regional_Indicator,\n    SpacingMark,\n    L,\n    V,\n    T,\n    LV,\n    LVT,\n    ZWJ,\n    Extended_Pictographic,\n    RI,\n};\n\nexport const toCodePoints = (str: string): number[] => {\n    const codePoints = [];\n    let i = 0;\n    const length = str.length;\n    while (i < length) {\n        const value = str.charCodeAt(i++);\n        if (value >= 0xd800 && value <= 0xdbff && i < length) {\n            const extra = str.charCodeAt(i++);\n            if ((extra & 0xfc00) === 0xdc00) {\n                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            } else {\n                codePoints.push(value);\n                i--;\n            }\n        } else {\n            codePoints.push(value);\n        }\n    }\n    return codePoints;\n};\n\nexport const fromCodePoint = (...codePoints: number[]): string => {\n    if (String.fromCodePoint) {\n        return String.fromCodePoint(...codePoints);\n    }\n\n    const length = codePoints.length;\n    if (!length) {\n        return '';\n    }\n\n    const codeUnits = [];\n\n    let index = -1;\n    let result = '';\n    while (++index < length) {\n        let codePoint = codePoints[index];\n        if (codePoint <= 0xffff) {\n            codeUnits.push(codePoint);\n        } else {\n            codePoint -= 0x10000;\n            codeUnits.push((codePoint >> 10) + 0xd800, (codePoint % 0x400) + 0xdc00);\n        }\n        if (index + 1 === length || codeUnits.length > 0x4000) {\n            result += String.fromCharCode(...codeUnits);\n            codeUnits.length = 0;\n        }\n    }\n    return result;\n};\n\nexport const UnicodeTrie = createTrieFromBase64(base64, byteLength);\n\nexport const BREAK_NOT_ALLOWED = '×';\nexport const BREAK_ALLOWED = '÷';\n\nexport type BREAK_OPPORTUNITIES = typeof BREAK_NOT_ALLOWED | typeof BREAK_ALLOWED;\n\nexport const codePointToClass = (codePoint: number): number => UnicodeTrie.get(codePoint);\n\nconst _graphemeBreakAtIndex = (_codePoints: number[], classTypes: number[], index: number): BREAK_OPPORTUNITIES => {\n    let prevIndex = index - 2;\n    let prev = classTypes[prevIndex];\n    const current = classTypes[index - 1];\n    const next = classTypes[index];\n    // GB3 Do not break between a CR and LF\n    if (current === CR && next === LF) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB4 Otherwise, break before and after controls.\n    if (current === CR || current === LF || current === Control) {\n        return BREAK_ALLOWED;\n    }\n\n    // GB5\n    if (next === CR || next === LF || next === Control) {\n        return BREAK_ALLOWED;\n    }\n\n    // Do not break Hangul syllable sequences.\n    // GB6\n    if (current === L && [L, V, LV, LVT].indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB7\n    if ((current === LV || current === V) && (next === V || next === T)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB8\n    if ((current === LVT || current === T) && next === T) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB9 Do not break before extending characters or ZWJ.\n    if (next === ZWJ || next === Extend) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // Do not break before SpacingMarks, or after Prepend characters.\n    // GB9a\n    if (next === SpacingMark) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB9a\n    if (current === Prepend) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB11 Do not break within emoji modifier sequences or emoji zwj sequences.\n    if (current === ZWJ && next === Extended_Pictographic) {\n        while (prev === Extend) {\n            prev = classTypes[--prevIndex];\n        }\n        if (prev === Extended_Pictographic) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n\n    // GB12 Do not break within emoji flag sequences.\n    // That is, do not break between regional indicator (RI) symbols\n    // if there is an odd number of RI characters before the break point.\n    if (current === RI && next === RI) {\n        let countRI = 0;\n        while (prev === RI) {\n            countRI++;\n            prev = classTypes[--prevIndex];\n        }\n        if (countRI % 2 === 0) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n\n    return BREAK_ALLOWED;\n};\n\nexport const graphemeBreakAtIndex = (codePoints: number[], index: number): BREAK_OPPORTUNITIES => {\n    // GB1 Break at the start and end of text, unless the text is empty.\n    if (index === 0) {\n        return BREAK_ALLOWED;\n    }\n\n    // GB2\n    if (index >= codePoints.length) {\n        return BREAK_ALLOWED;\n    }\n\n    const classTypes = codePoints.map(codePointToClass);\n    return _graphemeBreakAtIndex(codePoints, classTypes, index);\n};\n\nexport const GraphemeBreaker = (str: string) => {\n    const codePoints = toCodePoints(str);\n    const length = codePoints.length;\n    let index = 0;\n    let lastEnd = 0;\n    const classTypes = codePoints.map(codePointToClass);\n\n    return {\n        next: () => {\n            if (index >= length) {\n                return {done: true, value: null};\n            }\n\n            let graphemeBreak = BREAK_NOT_ALLOWED;\n            while (\n                index < length &&\n                (graphemeBreak = _graphemeBreakAtIndex(codePoints, classTypes, ++index)) === BREAK_NOT_ALLOWED\n            ) {}\n\n            if (graphemeBreak !== BREAK_NOT_ALLOWED || index === length) {\n                const value = fromCodePoint.apply(null, codePoints.slice(lastEnd, index));\n                lastEnd = index;\n                return {value, done: false};\n            }\n\n            return {done: true, value: null};\n            while (index < length) {}\n\n            return {done: true, value: null};\n        },\n    };\n};\n\nexport const splitGraphemes = (str: string): string[] => {\n    const breaker = GraphemeBreaker(str);\n\n    const graphemes = [];\n    let bk;\n\n    while (!(bk = breaker.next()).done) {\n        if (bk.value) {\n            graphemes.push(bk.value.slice());\n        }\n    }\n\n    return graphemes;\n};\n","import {Bounds} from '../css/layout/bounds';\nimport {\n    isBodyElement,\n    isCanvasElement,\n    isCustomElement,\n    isElementNode,\n    isHTMLElementNode,\n    isIFrameElement,\n    isImageElement,\n    isScriptElement,\n    isSelectElement,\n    isSlotElement,\n    isStyleElement,\n    isSVGElementNode,\n    isTextareaElement,\n    isTextNode,\n    isVideoElement\n} from './node-parser';\nimport {isIdentToken, nonFunctionArgSeparator} from '../css/syntax/parser';\nimport {TokenType} from '../css/syntax/tokenizer';\nimport {CounterState, createCounterText} from '../css/types/functions/counter';\nimport {LIST_STYLE_TYPE, listStyleType} from '../css/property-descriptors/list-style-type';\nimport {CSSParsedCounterDeclaration, CSSParsedPseudoDeclaration} from '../css/index';\nimport {getQuote} from '../css/property-descriptors/quotes';\nimport {Context} from '../core/context';\nimport {DebuggerType, isDebugging} from '../core/debugger';\n\nexport interface CloneOptions {\n    ignoreElements?: (element: Element) => boolean;\n    onclone?: (document: Document, element: HTMLElement) => void;\n    allowTaint?: boolean;\n}\n\nexport interface WindowOptions {\n    scrollX: number;\n    scrollY: number;\n    windowWidth: number;\n    windowHeight: number;\n}\n\nexport type CloneConfigurations = CloneOptions & {\n    inlineImages: boolean;\n    copyStyles: boolean;\n};\n\nconst IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\n\nexport class DocumentCloner {\n    private readonly scrolledElements: [Element, number, number][];\n    private readonly referenceElement: HTMLElement;\n    clonedReferenceElement?: HTMLElement;\n    private readonly documentElement: HTMLElement;\n    private readonly counters: CounterState;\n    private quoteDepth: number;\n\n    constructor(\n        private readonly context: Context,\n        element: HTMLElement,\n        private readonly options: CloneConfigurations\n    ) {\n        this.scrolledElements = [];\n        this.referenceElement = element;\n        this.counters = new CounterState();\n        this.quoteDepth = 0;\n        if (!element.ownerDocument) {\n            throw new Error('Cloned element does not have an owner document');\n        }\n\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement, false) as HTMLElement;\n    }\n\n    toIFrame(ownerDocument: Document, windowSize: Bounds): Promise<HTMLIFrameElement> {\n        const iframe: HTMLIFrameElement = createIFrameContainer(ownerDocument, windowSize);\n\n        if (!iframe.contentWindow) {\n            return Promise.reject(`Unable to find iframe window`);\n        }\n\n        const scrollX = (ownerDocument.defaultView as Window).pageXOffset;\n        const scrollY = (ownerDocument.defaultView as Window).pageYOffset;\n\n        const cloneWindow = iframe.contentWindow;\n        const documentClone: Document = cloneWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n\n        const iframeLoad = iframeLoader(iframe).then(async () => {\n            this.scrolledElements.forEach(restoreNodeScroll);\n            if (cloneWindow) {\n                cloneWindow.scrollTo(windowSize.left, windowSize.top);\n                if (\n                    /(iPad|iPhone|iPod)/g.test(navigator.userAgent) &&\n                    (cloneWindow.scrollY !== windowSize.top || cloneWindow.scrollX !== windowSize.left)\n                ) {\n                    this.context.logger.warn('Unable to restore scroll position for cloned document');\n                    this.context.windowBounds = this.context.windowBounds.add(\n                        cloneWindow.scrollX - windowSize.left,\n                        cloneWindow.scrollY - windowSize.top,\n                        0,\n                        0\n                    );\n                }\n            }\n\n            const onclone = this.options.onclone;\n\n            const referenceElement = this.clonedReferenceElement;\n\n            if (typeof referenceElement === 'undefined') {\n                return Promise.reject(`Error finding the ${this.referenceElement.nodeName} in the cloned document`);\n            }\n\n            if (documentClone.fonts && documentClone.fonts.ready) {\n                await documentClone.fonts.ready;\n            }\n\n            if (/(AppleWebKit)/g.test(navigator.userAgent)) {\n                await imagesReady(documentClone);\n            }\n\n            if (typeof onclone === 'function') {\n                return Promise.resolve()\n                    .then(() => onclone(documentClone, referenceElement))\n                    .then(() => iframe);\n            }\n\n            return iframe;\n        });\n\n        documentClone.open();\n        documentClone.write(`${serializeDoctype(document.doctype)}<html></html>`);\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);\n        documentClone.replaceChild(documentClone.adoptNode(this.documentElement), documentClone.documentElement);\n        documentClone.close();\n\n        return iframeLoad;\n    }\n\n    createElementClone<T extends HTMLElement | SVGElement>(node: T): HTMLElement | SVGElement {\n        if (isDebugging(node, DebuggerType.CLONE)) {\n            debugger;\n        }\n        if (isCanvasElement(node)) {\n            return this.createCanvasClone(node);\n        }\n        if (isVideoElement(node)) {\n            return this.createVideoClone(node);\n        }\n        if (isStyleElement(node)) {\n            return this.createStyleClone(node);\n        }\n\n        const clone = node.cloneNode(false) as T;\n        if (isImageElement(clone)) {\n            if (isImageElement(node) && node.currentSrc && node.currentSrc !== node.src) {\n                clone.src = node.currentSrc;\n                clone.srcset = '';\n            }\n\n            if (clone.loading === 'lazy') {\n                clone.loading = 'eager';\n            }\n        }\n\n        if (isCustomElement(clone)) {\n            return this.createCustomElementClone(clone);\n        }\n\n        return clone;\n    }\n\n    createCustomElementClone(node: HTMLElement): HTMLElement {\n        const clone = document.createElement('html2canvascustomelement');\n        copyCSSStyles(node.style, clone);\n\n        return clone;\n    }\n\n    createStyleClone(node: HTMLStyleElement): HTMLStyleElement {\n        try {\n            const sheet = node.sheet as CSSStyleSheet | undefined;\n            if (sheet && sheet.cssRules) {\n                const css: string = [].slice.call(sheet.cssRules, 0).reduce((css: string, rule: CSSRule) => {\n                    if (rule && typeof rule.cssText === 'string') {\n                        return css + rule.cssText;\n                    }\n                    return css;\n                }, '');\n                const style = node.cloneNode(false) as HTMLStyleElement;\n                style.textContent = css;\n                return style;\n            }\n        } catch (e) {\n            // accessing node.sheet.cssRules throws a DOMException\n            this.context.logger.error('Unable to access cssRules property', e);\n            if (e.name !== 'SecurityError') {\n                throw e;\n            }\n        }\n        return node.cloneNode(false) as HTMLStyleElement;\n    }\n\n    createCanvasClone(canvas: HTMLCanvasElement): HTMLImageElement | HTMLCanvasElement {\n        if (this.options.inlineImages && canvas.ownerDocument) {\n            const img = canvas.ownerDocument.createElement('img');\n            try {\n                img.src = canvas.toDataURL();\n                return img;\n            } catch (e) {\n                this.context.logger.info(`Unable to inline canvas contents, canvas is tainted`, canvas);\n            }\n        }\n\n        const clonedCanvas = canvas.cloneNode(false) as HTMLCanvasElement;\n\n        try {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            const ctx = canvas.getContext('2d');\n            const clonedCtx = clonedCanvas.getContext('2d');\n            if (clonedCtx) {\n                if (!this.options.allowTaint && ctx) {\n                    clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n                } else {\n                    const gl = canvas.getContext('webgl2') ?? canvas.getContext('webgl');\n                    if (gl) {\n                        const attribs = gl.getContextAttributes();\n                        if (attribs?.preserveDrawingBuffer === false) {\n                            this.context.logger.warn(\n                                'Unable to clone WebGL context as it has preserveDrawingBuffer=false',\n                                canvas\n                            );\n                        }\n                    }\n\n                    clonedCtx.drawImage(canvas, 0, 0);\n                }\n            }\n            return clonedCanvas;\n        } catch (e) {\n            this.context.logger.info(`Unable to clone canvas as it is tainted`, canvas);\n        }\n\n        return clonedCanvas;\n    }\n\n    createVideoClone(video: HTMLVideoElement): HTMLCanvasElement {\n        const canvas = video.ownerDocument.createElement('canvas');\n\n        canvas.width = video.offsetWidth;\n        canvas.height = video.offsetHeight;\n        const ctx = canvas.getContext('2d');\n\n        try {\n            if (ctx) {\n                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                if (!this.options.allowTaint) {\n                    ctx.getImageData(0, 0, canvas.width, canvas.height);\n                }\n            }\n            return canvas;\n        } catch (e) {\n            this.context.logger.info(`Unable to clone video as it is tainted`, video);\n        }\n\n        const blankCanvas = video.ownerDocument.createElement('canvas');\n\n        blankCanvas.width = video.offsetWidth;\n        blankCanvas.height = video.offsetHeight;\n        return blankCanvas;\n    }\n\n    appendChildNode(clone: HTMLElement | SVGElement, child: Node, copyStyles: boolean): void {\n        if (\n            !isElementNode(child) ||\n            (!isScriptElement(child) &&\n                !child.hasAttribute(IGNORE_ATTRIBUTE) &&\n                (typeof this.options.ignoreElements !== 'function' || !this.options.ignoreElements(child)))\n        ) {\n            if (!this.options.copyStyles || !isElementNode(child) || !isStyleElement(child)) {\n                clone.appendChild(this.cloneNode(child, copyStyles));\n            }\n        }\n    }\n\n    cloneChildNodes(node: Element, clone: HTMLElement | SVGElement, copyStyles: boolean): void {\n        for (\n            let child = node.shadowRoot ? node.shadowRoot.firstChild : node.firstChild;\n            child;\n            child = child.nextSibling\n        ) {\n            if (isElementNode(child) && isSlotElement(child) && typeof child.assignedNodes === 'function') {\n                const assignedNodes = child.assignedNodes() as ChildNode[];\n                if (assignedNodes.length) {\n                    assignedNodes.forEach((assignedNode) => this.appendChildNode(clone, assignedNode, copyStyles));\n                }\n            } else {\n                this.appendChildNode(clone, child, copyStyles);\n            }\n        }\n    }\n\n    cloneNode(node: Node, copyStyles: boolean): Node {\n        if (isTextNode(node)) {\n            return document.createTextNode(node.data);\n        }\n\n        if (!node.ownerDocument) {\n            return node.cloneNode(false);\n        }\n\n        const window = node.ownerDocument.defaultView;\n\n        if (window && isElementNode(node) && (isHTMLElementNode(node) || isSVGElementNode(node))) {\n            const clone = this.createElementClone(node);\n            clone.style.transitionProperty = 'none';\n\n            const style = window.getComputedStyle(node);\n            const styleBefore = window.getComputedStyle(node, ':before');\n            const styleAfter = window.getComputedStyle(node, ':after');\n\n            if (this.referenceElement === node && isHTMLElementNode(clone)) {\n                this.clonedReferenceElement = clone;\n            }\n            if (isBodyElement(clone)) {\n                createPseudoHideStyles(clone);\n            }\n\n            const counters = this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n            const before = this.resolvePseudoContent(node, clone, styleBefore, PseudoElementType.BEFORE);\n\n            if (isCustomElement(node)) {\n                copyStyles = true;\n            }\n\n            if (!isVideoElement(node)) {\n                this.cloneChildNodes(node, clone, copyStyles);\n            }\n\n            if (before) {\n                clone.insertBefore(before, clone.firstChild);\n            }\n\n            const after = this.resolvePseudoContent(node, clone, styleAfter, PseudoElementType.AFTER);\n            if (after) {\n                clone.appendChild(after);\n            }\n\n            this.counters.pop(counters);\n\n            if (\n                (style && (this.options.copyStyles || isSVGElementNode(node)) && !isIFrameElement(node)) ||\n                copyStyles\n            ) {\n                copyCSSStyles(style, clone);\n            }\n\n            if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n                this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n            }\n\n            if (\n                (isTextareaElement(node) || isSelectElement(node)) &&\n                (isTextareaElement(clone) || isSelectElement(clone))\n            ) {\n                clone.value = node.value;\n            }\n\n            return clone;\n        }\n\n        return node.cloneNode(false);\n    }\n\n    resolvePseudoContent(\n        node: Element,\n        clone: Element,\n        style: CSSStyleDeclaration,\n        pseudoElt: PseudoElementType\n    ): HTMLElement | void {\n        if (!style) {\n            return;\n        }\n\n        const value = style.content;\n        const document = clone.ownerDocument;\n        if (!document || !value || value === 'none' || value === '-moz-alt-content' || style.display === 'none') {\n            return;\n        }\n\n        this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n        const declaration = new CSSParsedPseudoDeclaration(this.context, style);\n\n        const anonymousReplacedElement = document.createElement('html2canvaspseudoelement');\n        copyCSSStyles(style, anonymousReplacedElement);\n\n        declaration.content.forEach((token) => {\n            if (token.type === TokenType.STRING_TOKEN) {\n                anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n            } else if (token.type === TokenType.URL_TOKEN) {\n                const img = document.createElement('img');\n                img.src = token.value;\n                img.style.opacity = '1';\n                anonymousReplacedElement.appendChild(img);\n            } else if (token.type === TokenType.FUNCTION) {\n                if (token.name === 'attr') {\n                    const attr = token.values.filter(isIdentToken);\n                    if (attr.length) {\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(node.getAttribute(attr[0].value) || '')\n                        );\n                    }\n                } else if (token.name === 'counter') {\n                    const [counter, counterStyle] = token.values.filter(nonFunctionArgSeparator);\n                    if (counter && isIdentToken(counter)) {\n                        const counterState = this.counters.getCounterValue(counter.value);\n                        const counterType =\n                            counterStyle && isIdentToken(counterStyle)\n                                ? listStyleType.parse(this.context, counterStyle.value)\n                                : LIST_STYLE_TYPE.DECIMAL;\n\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(createCounterText(counterState, counterType, false))\n                        );\n                    }\n                } else if (token.name === 'counters') {\n                    const [counter, delim, counterStyle] = token.values.filter(nonFunctionArgSeparator);\n                    if (counter && isIdentToken(counter)) {\n                        const counterStates = this.counters.getCounterValues(counter.value);\n                        const counterType =\n                            counterStyle && isIdentToken(counterStyle)\n                                ? listStyleType.parse(this.context, counterStyle.value)\n                                : LIST_STYLE_TYPE.DECIMAL;\n                        const separator = delim && delim.type === TokenType.STRING_TOKEN ? delim.value : '';\n                        const text = counterStates\n                            .map((value) => createCounterText(value, counterType, false))\n                            .join(separator);\n\n                        anonymousReplacedElement.appendChild(document.createTextNode(text));\n                    }\n                } else {\n                    //   console.log('FUNCTION_TOKEN', token);\n                }\n            } else if (token.type === TokenType.IDENT_TOKEN) {\n                switch (token.value) {\n                    case 'open-quote':\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(getQuote(declaration.quotes, this.quoteDepth++, true))\n                        );\n                        break;\n                    case 'close-quote':\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(getQuote(declaration.quotes, --this.quoteDepth, false))\n                        );\n                        break;\n                    default:\n                        // safari doesn't parse string tokens correctly because of lack of quotes\n                        anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n                }\n            }\n        });\n\n        anonymousReplacedElement.className = `${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE} ${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}`;\n        const newClassName =\n            pseudoElt === PseudoElementType.BEFORE\n                ? ` ${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE}`\n                : ` ${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}`;\n\n        if (isSVGElementNode(clone)) {\n            clone.className.baseValue += newClassName;\n        } else {\n            clone.className += newClassName;\n        }\n\n        return anonymousReplacedElement;\n    }\n\n    static destroy(container: HTMLIFrameElement): boolean {\n        if (container.parentNode) {\n            container.parentNode.removeChild(container);\n            return true;\n        }\n        return false;\n    }\n}\n\nenum PseudoElementType {\n    BEFORE,\n    AFTER\n}\n\nconst createIFrameContainer = (ownerDocument: Document, bounds: Bounds): HTMLIFrameElement => {\n    const cloneIframeContainer = ownerDocument.createElement('iframe');\n\n    cloneIframeContainer.className = 'html2canvas-container';\n    cloneIframeContainer.style.visibility = 'hidden';\n    cloneIframeContainer.style.position = 'fixed';\n    cloneIframeContainer.style.left = '-10000px';\n    cloneIframeContainer.style.top = '0px';\n    cloneIframeContainer.style.border = '0';\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n    ownerDocument.body.appendChild(cloneIframeContainer);\n\n    return cloneIframeContainer;\n};\n\nconst imageReady = (img: HTMLImageElement): Promise<Event | void | string> => {\n    return new Promise((resolve) => {\n        if (img.complete) {\n            resolve();\n            return;\n        }\n        if (!img.src) {\n            resolve();\n            return;\n        }\n        img.onload = resolve;\n        img.onerror = resolve;\n    });\n};\n\nconst imagesReady = (document: HTMLDocument): Promise<unknown[]> => {\n    return Promise.all([].slice.call(document.images, 0).map(imageReady));\n};\n\nconst iframeLoader = (iframe: HTMLIFrameElement): Promise<HTMLIFrameElement> => {\n    return new Promise((resolve, reject) => {\n        const cloneWindow = iframe.contentWindow;\n\n        if (!cloneWindow) {\n            return reject(`No window assigned for iframe`);\n        }\n\n        const documentClone = cloneWindow.document;\n\n        cloneWindow.onload = iframe.onload = () => {\n            cloneWindow.onload = iframe.onload = null;\n            const interval = setInterval(() => {\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n                    clearInterval(interval);\n                    resolve(iframe);\n                }\n            }, 50);\n        };\n    });\n};\n\nconst ignoredStyleProperties = [\n    'all', // #2476\n    'd', // #2483\n    'content' // Safari shows pseudoelements if content is set\n];\n\nexport const copyCSSStyles = <T extends HTMLElement | SVGElement>(style: CSSStyleDeclaration, target: T): T => {\n    // Edge does not provide value for cssText\n    for (let i = style.length - 1; i >= 0; i--) {\n        const property = style.item(i);\n        if (ignoredStyleProperties.indexOf(property) === -1) {\n            target.style.setProperty(property, style.getPropertyValue(property));\n        }\n    }\n    return target;\n};\n\nconst serializeDoctype = (doctype?: DocumentType | null): string => {\n    let str = '';\n    if (doctype) {\n        str += '<!DOCTYPE ';\n        if (doctype.name) {\n            str += doctype.name;\n        }\n\n        if (doctype.internalSubset) {\n            str += doctype.internalSubset;\n        }\n\n        if (doctype.publicId) {\n            str += `\"${doctype.publicId}\"`;\n        }\n\n        if (doctype.systemId) {\n            str += `\"${doctype.systemId}\"`;\n        }\n\n        str += '>';\n    }\n\n    return str;\n};\n\nconst restoreOwnerScroll = (ownerDocument: Document | null, x: number, y: number) => {\n    if (\n        ownerDocument &&\n        ownerDocument.defaultView &&\n        (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)\n    ) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n};\n\nconst restoreNodeScroll = ([element, x, y]: [HTMLElement, number, number]) => {\n    element.scrollLeft = x;\n    element.scrollTop = y;\n};\n\nconst PSEUDO_BEFORE = ':before';\nconst PSEUDO_AFTER = ':after';\nconst PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nconst PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\n\nconst PSEUDO_HIDE_ELEMENT_STYLE = `{\n    content: \"\" !important;\n    display: none !important;\n}`;\n\nconst createPseudoHideStyles = (body: HTMLElement) => {\n    createStyles(\n        body,\n        `.${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE}${PSEUDO_BEFORE}${PSEUDO_HIDE_ELEMENT_STYLE}\n         .${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}${PSEUDO_AFTER}${PSEUDO_HIDE_ELEMENT_STYLE}`\n    );\n};\n\nconst createStyles = (body: HTMLElement, styles: string) => {\n    const document = body.ownerDocument;\n    if (document) {\n        const style = document.createElement('style');\n        style.textContent = styles;\n        body.appendChild(style);\n    }\n};\n","import {fromCodePoint, toCodePoints} from 'css-line-break';\n\nconst testRangeBounds = (document: Document) => {\n    const TEST_HEIGHT = 123;\n\n    if (document.createRange) {\n        const range = document.createRange();\n        if (range.getBoundingClientRect) {\n            const testElement = document.createElement('boundtest');\n            testElement.style.height = `${TEST_HEIGHT}px`;\n            testElement.style.display = 'block';\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            const rangeBounds = range.getBoundingClientRect();\n            const rangeHeight = Math.round(rangeBounds.height);\n            document.body.removeChild(testElement);\n            if (rangeHeight === TEST_HEIGHT) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n};\n\nconst testIOSLineBreak = (document: Document) => {\n    const testElement = document.createElement('boundtest');\n    testElement.style.width = '50px';\n    testElement.style.display = 'block';\n    testElement.style.fontSize = '12px';\n    testElement.style.letterSpacing = '0px';\n    testElement.style.wordSpacing = '0px';\n    document.body.appendChild(testElement);\n    const range = document.createRange();\n\n    testElement.innerHTML = typeof ''.repeat === 'function' ? '&#128104;'.repeat(10) : '';\n\n    const node = testElement.firstChild as Text;\n\n    const textList = toCodePoints(node.data).map((i) => fromCodePoint(i));\n    let offset = 0;\n    let prev: DOMRect = {} as DOMRect;\n\n    // ios 13 does not handle range getBoundingClientRect line changes correctly #2177\n    const supports = textList.every((text, i) => {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + text.length);\n        const rect = range.getBoundingClientRect();\n\n        offset += text.length;\n        const boundAhead = rect.x > prev.x || rect.y > prev.y;\n\n        prev = rect;\n        if (i === 0) {\n            return true;\n        }\n\n        return boundAhead;\n    });\n\n    document.body.removeChild(testElement);\n    return supports;\n};\n\nconst testCORS = (): boolean => typeof new Image().crossOrigin !== 'undefined';\n\nconst testResponseType = (): boolean => typeof new XMLHttpRequest().responseType === 'string';\n\nconst testSVG = (document: Document): boolean => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return false;\n    }\n\n    img.src = `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>`;\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch (e) {\n        return false;\n    }\n    return true;\n};\n\nconst isGreenPixel = (data: Uint8ClampedArray): boolean =>\n    data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;\n\nconst testForeignObject = (document: Document): Promise<boolean> => {\n    const canvas = document.createElement('canvas');\n    const size = 100;\n    canvas.width = size;\n    canvas.height = size;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return Promise.reject(false);\n    }\n    ctx.fillStyle = 'rgb(0, 255, 0)';\n    ctx.fillRect(0, 0, size, size);\n\n    const img = new Image();\n    const greenImageSrc = canvas.toDataURL();\n    img.src = greenImageSrc;\n    const svg = createForeignObjectSVG(size, size, 0, 0, img);\n    ctx.fillStyle = 'red';\n    ctx.fillRect(0, 0, size, size);\n\n    return loadSerializedSVG(svg)\n        .then((img: HTMLImageElement) => {\n            ctx.drawImage(img, 0, 0);\n            const data = ctx.getImageData(0, 0, size, size).data;\n            ctx.fillStyle = 'red';\n            ctx.fillRect(0, 0, size, size);\n\n            const node = document.createElement('div');\n            node.style.backgroundImage = `url(${greenImageSrc})`;\n            node.style.height = `${size}px`;\n            // Firefox 55 does not render inline <img /> tags\n            return isGreenPixel(data)\n                ? loadSerializedSVG(createForeignObjectSVG(size, size, 0, 0, node))\n                : Promise.reject(false);\n        })\n        .then((img: HTMLImageElement) => {\n            ctx.drawImage(img, 0, 0);\n            // Edge does not render background-images\n            return isGreenPixel(ctx.getImageData(0, 0, size, size).data);\n        })\n        .catch(() => false);\n};\n\nexport const createForeignObjectSVG = (\n    width: number,\n    height: number,\n    x: number,\n    y: number,\n    node: Node\n): SVGForeignObjectElement => {\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svg = document.createElementNS(xmlns, 'svg');\n    const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS(null, 'width', width.toString());\n    svg.setAttributeNS(null, 'height', height.toString());\n\n    foreignObject.setAttributeNS(null, 'width', '100%');\n    foreignObject.setAttributeNS(null, 'height', '100%');\n    foreignObject.setAttributeNS(null, 'x', x.toString());\n    foreignObject.setAttributeNS(null, 'y', y.toString());\n    foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n\n    foreignObject.appendChild(node);\n\n    return svg;\n};\n\nexport const loadSerializedSVG = (svg: Node): Promise<HTMLImageElement> => {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n\n        img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(new XMLSerializer().serializeToString(svg))}`;\n    });\n};\n\nexport const FEATURES = {\n    get SUPPORT_RANGE_BOUNDS(): boolean {\n        'use strict';\n        const value = testRangeBounds(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', {value});\n        return value;\n    },\n    get SUPPORT_WORD_BREAKING(): boolean {\n        'use strict';\n        const value = FEATURES.SUPPORT_RANGE_BOUNDS && testIOSLineBreak(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_WORD_BREAKING', {value});\n        return value;\n    },\n    get SUPPORT_SVG_DRAWING(): boolean {\n        'use strict';\n        const value = testSVG(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', {value});\n        return value;\n    },\n    get SUPPORT_FOREIGNOBJECT_DRAWING(): Promise<boolean> {\n        'use strict';\n        const value =\n            typeof Array.from === 'function' && typeof window.fetch === 'function'\n                ? testForeignObject(document)\n                : Promise.resolve(false);\n        Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', {value});\n        return value;\n    },\n    get SUPPORT_CORS_IMAGES(): boolean {\n        'use strict';\n        const value = testCORS();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', {value});\n        return value;\n    },\n    get SUPPORT_RESPONSE_TYPE(): boolean {\n        'use strict';\n        const value = testResponseType();\n        Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', {value});\n        return value;\n    },\n    get SUPPORT_CORS_XHR(): boolean {\n        'use strict';\n        const value = 'withCredentials' in new XMLHttpRequest();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', {value});\n        return value;\n    },\n    get SUPPORT_NATIVE_TEXT_SEGMENTATION(): boolean {\n        'use strict';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const value = !!(typeof Intl !== 'undefined' && (Intl as any).Segmenter);\n        Object.defineProperty(FEATURES, 'SUPPORT_NATIVE_TEXT_SEGMENTATION', {value});\n        return value;\n    }\n};\n","import {OVERFLOW_WRAP} from '../property-descriptors/overflow-wrap';\nimport {CSSParsedDeclaration} from '../index';\nimport {fromCodePoint, LineBreaker, toCodePoints} from 'css-line-break';\nimport {splitGraphemes} from 'text-segmentation';\nimport {Bounds, parseBounds} from './bounds';\nimport {FEATURES} from '../../core/features';\nimport {Context} from '../../core/context';\n\nexport class TextBounds {\n    readonly text: string;\n    readonly bounds: Bounds;\n\n    constructor(text: string, bounds: Bounds) {\n        this.text = text;\n        this.bounds = bounds;\n    }\n}\n\nexport const parseTextBounds = (\n    context: Context,\n    value: string,\n    styles: CSSParsedDeclaration,\n    node: Text\n): TextBounds[] => {\n    const textList = breakText(value, styles);\n    const textBounds: TextBounds[] = [];\n    let offset = 0;\n    textList.forEach((text) => {\n        if (styles.textDecorationLine.length || text.trim().length > 0) {\n            if (FEATURES.SUPPORT_RANGE_BOUNDS) {\n                const clientRects = createRange(node, offset, text.length).getClientRects();\n                if (clientRects.length > 1) {\n                    const subSegments = segmentGraphemes(text);\n                    let subOffset = 0;\n                    subSegments.forEach((subSegment) => {\n                        textBounds.push(\n                            new TextBounds(\n                                subSegment,\n                                Bounds.fromDOMRectList(\n                                    context,\n                                    createRange(node, subOffset + offset, subSegment.length).getClientRects()\n                                )\n                            )\n                        );\n                        subOffset += subSegment.length;\n                    });\n                } else {\n                    textBounds.push(new TextBounds(text, Bounds.fromDOMRectList(context, clientRects)));\n                }\n            } else {\n                const replacementNode = node.splitText(text.length);\n                textBounds.push(new TextBounds(text, getWrapperBounds(context, node)));\n                node = replacementNode;\n            }\n        } else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {\n            node = node.splitText(text.length);\n        }\n        offset += text.length;\n    });\n\n    return textBounds;\n};\n\nconst getWrapperBounds = (context: Context, node: Text): Bounds => {\n    const ownerDocument = node.ownerDocument;\n    if (ownerDocument) {\n        const wrapper = ownerDocument.createElement('html2canvaswrapper');\n        wrapper.appendChild(node.cloneNode(true));\n        const parentNode = node.parentNode;\n        if (parentNode) {\n            parentNode.replaceChild(wrapper, node);\n            const bounds = parseBounds(context, wrapper);\n            if (wrapper.firstChild) {\n                parentNode.replaceChild(wrapper.firstChild, wrapper);\n            }\n            return bounds;\n        }\n    }\n\n    return Bounds.EMPTY;\n};\n\nconst createRange = (node: Text, offset: number, length: number): Range => {\n    const ownerDocument = node.ownerDocument;\n    if (!ownerDocument) {\n        throw new Error('Node has no owner document');\n    }\n    const range = ownerDocument.createRange();\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range;\n};\n\nexport const segmentGraphemes = (value: string): string[] => {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const segmenter = new (Intl as any).Segmenter(void 0, {granularity: 'grapheme'});\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.from(segmenter.segment(value)).map((segment: any) => segment.segment);\n    }\n\n    return splitGraphemes(value);\n};\n\nconst segmentWords = (value: string, styles: CSSParsedDeclaration): string[] => {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const segmenter = new (Intl as any).Segmenter(void 0, {\n            granularity: 'word'\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.from(segmenter.segment(value)).map((segment: any) => segment.segment);\n    }\n\n    return breakWords(value, styles);\n};\n\nconst breakText = (value: string, styles: CSSParsedDeclaration): string[] => {\n    return styles.letterSpacing !== 0 ? segmentGraphemes(value) : segmentWords(value, styles);\n};\n\n// https://drafts.csswg.org/css-text/#word-separator\nconst wordSeparators = [0x0020, 0x00a0, 0x1361, 0x10100, 0x10101, 0x1039, 0x1091];\n\nconst breakWords = (str: string, styles: CSSParsedDeclaration): string[] => {\n    const breaker = LineBreaker(str, {\n        lineBreak: styles.lineBreak,\n        wordBreak: styles.overflowWrap === OVERFLOW_WRAP.BREAK_WORD ? 'break-word' : styles.wordBreak\n    });\n\n    const words = [];\n    let bk;\n\n    while (!(bk = breaker.next()).done) {\n        if (bk.value) {\n            const value = bk.value.slice();\n            const codePoints = toCodePoints(value);\n            let word = '';\n            codePoints.forEach((codePoint) => {\n                if (wordSeparators.indexOf(codePoint) === -1) {\n                    word += fromCodePoint(codePoint);\n                } else {\n                    if (word.length) {\n                        words.push(word);\n                    }\n                    words.push(fromCodePoint(codePoint));\n                    word = '';\n                }\n            });\n\n            if (word.length) {\n                words.push(word);\n            }\n        }\n    }\n\n    return words;\n};\n","import {CSSParsedDeclaration} from '../css/index';\nimport {TEXT_TRANSFORM} from '../css/property-descriptors/text-transform';\nimport {parseTextBounds, TextBounds} from '../css/layout/text';\nimport {Context} from '../core/context';\n\nexport class TextContainer {\n    text: string;\n    textBounds: TextBounds[];\n\n    constructor(context: Context, node: Text, styles: CSSParsedDeclaration) {\n        this.text = transform(node.data, styles.textTransform);\n        this.textBounds = parseTextBounds(context, this.text, styles, node);\n    }\n}\n\nconst transform = (text: string, transform: TEXT_TRANSFORM) => {\n    switch (transform) {\n        case TEXT_TRANSFORM.LOWERCASE:\n            return text.toLowerCase();\n        case TEXT_TRANSFORM.CAPITALIZE:\n            return text.replace(CAPITALIZE, capitalize);\n        case TEXT_TRANSFORM.UPPERCASE:\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nconst CAPITALIZE = /(^|\\s|:|-|\\(|\\))([a-z])/g;\n\nconst capitalize = (m: string, p1: string, p2: string) => {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n\n    return m;\n};\n","import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\n\nexport class ImageElementContainer extends ElementContainer {\n    src: string;\n    intrinsicWidth: number;\n    intrinsicHeight: number;\n\n    constructor(context: Context, img: HTMLImageElement) {\n        super(context, img);\n        this.src = img.currentSrc || img.src;\n        this.intrinsicWidth = img.naturalWidth;\n        this.intrinsicHeight = img.naturalHeight;\n        this.context.cache.addImage(this.src);\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\n\nexport class CanvasElementContainer extends ElementContainer {\n    canvas: HTMLCanvasElement;\n    intrinsicWidth: number;\n    intrinsicHeight: number;\n\n    constructor(context: Context, canvas: HTMLCanvasElement) {\n        super(context, canvas);\n        this.canvas = canvas;\n        this.intrinsicWidth = canvas.width;\n        this.intrinsicHeight = canvas.height;\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {parseBounds} from '../../css/layout/bounds';\nimport {Context} from '../../core/context';\n\nexport class SVGElementContainer extends ElementContainer {\n    svg: string;\n    intrinsicWidth: number;\n    intrinsicHeight: number;\n\n    constructor(context: Context, img: SVGSVGElement) {\n        super(context, img);\n        const s = new XMLSerializer();\n        const bounds = parseBounds(context, img);\n        img.setAttribute('width', `${bounds.width}px`);\n        img.setAttribute('height', `${bounds.height}px`);\n\n        this.svg = `data:image/svg+xml,${encodeURIComponent(s.serializeToString(img))}`;\n        this.intrinsicWidth = img.width.baseVal.value;\n        this.intrinsicHeight = img.height.baseVal.value;\n\n        this.context.cache.addImage(this.svg);\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class LIElementContainer extends ElementContainer {\n    readonly value: number;\n\n    constructor(context: Context, element: HTMLLIElement) {\n        super(context, element);\n        this.value = element.value;\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class OLElementContainer extends ElementContainer {\n    readonly start: number;\n    readonly reversed: boolean;\n\n    constructor(context: Context, element: HTMLOListElement) {\n        super(context, element);\n        this.start = element.start;\n        this.reversed = typeof element.reversed === 'boolean' && element.reversed === true;\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {BORDER_STYLE} from '../../css/property-descriptors/border-style';\nimport {BACKGROUND_CLIP} from '../../css/property-descriptors/background-clip';\nimport {BACKGROUND_ORIGIN} from '../../css/property-descriptors/background-origin';\nimport {TokenType} from '../../css/syntax/tokenizer';\nimport {LengthPercentageTuple} from '../../css/types/length-percentage';\nimport {Bounds} from '../../css/layout/bounds';\nimport {Context} from '../../core/context';\n\nconst CHECKBOX_BORDER_RADIUS: LengthPercentageTuple = [\n    {\n        type: TokenType.DIMENSION_TOKEN,\n        flags: 0,\n        unit: 'px',\n        number: 3\n    }\n];\n\nconst RADIO_BORDER_RADIUS: LengthPercentageTuple = [\n    {\n        type: TokenType.PERCENTAGE_TOKEN,\n        flags: 0,\n        number: 50\n    }\n];\n\nconst reformatInputBounds = (bounds: Bounds): Bounds => {\n    if (bounds.width > bounds.height) {\n        return new Bounds(bounds.left + (bounds.width - bounds.height) / 2, bounds.top, bounds.height, bounds.height);\n    } else if (bounds.width < bounds.height) {\n        return new Bounds(bounds.left, bounds.top + (bounds.height - bounds.width) / 2, bounds.width, bounds.width);\n    }\n    return bounds;\n};\n\nconst getInputValue = (node: HTMLInputElement): string => {\n    const value = node.type === PASSWORD ? new Array(node.value.length + 1).join('\\u2022') : node.value;\n\n    return value.length === 0 ? node.placeholder || '' : value;\n};\n\nexport const CHECKBOX = 'checkbox';\nexport const RADIO = 'radio';\nexport const PASSWORD = 'password';\nexport const INPUT_COLOR = 0x2a2a2aff;\n\nexport class InputElementContainer extends ElementContainer {\n    readonly type: string;\n    readonly checked: boolean;\n    readonly value: string;\n\n    constructor(context: Context, input: HTMLInputElement) {\n        super(context, input);\n        this.type = input.type.toLowerCase();\n        this.checked = input.checked;\n        this.value = getInputValue(input);\n\n        if (this.type === CHECKBOX || this.type === RADIO) {\n            this.styles.backgroundColor = 0xdededeff;\n            this.styles.borderTopColor =\n                this.styles.borderRightColor =\n                this.styles.borderBottomColor =\n                this.styles.borderLeftColor =\n                    0xa5a5a5ff;\n            this.styles.borderTopWidth =\n                this.styles.borderRightWidth =\n                this.styles.borderBottomWidth =\n                this.styles.borderLeftWidth =\n                    1;\n            this.styles.borderTopStyle =\n                this.styles.borderRightStyle =\n                this.styles.borderBottomStyle =\n                this.styles.borderLeftStyle =\n                    BORDER_STYLE.SOLID;\n            this.styles.backgroundClip = [BACKGROUND_CLIP.BORDER_BOX];\n            this.styles.backgroundOrigin = [BACKGROUND_ORIGIN.BORDER_BOX];\n            this.bounds = reformatInputBounds(this.bounds);\n        }\n\n        switch (this.type) {\n            case CHECKBOX:\n                this.styles.borderTopRightRadius =\n                    this.styles.borderTopLeftRadius =\n                    this.styles.borderBottomRightRadius =\n                    this.styles.borderBottomLeftRadius =\n                        CHECKBOX_BORDER_RADIUS;\n                break;\n            case RADIO:\n                this.styles.borderTopRightRadius =\n                    this.styles.borderTopLeftRadius =\n                    this.styles.borderBottomRightRadius =\n                    this.styles.borderBottomLeftRadius =\n                        RADIO_BORDER_RADIUS;\n                break;\n        }\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class SelectElementContainer extends ElementContainer {\n    readonly value: string;\n    constructor(context: Context, element: HTMLSelectElement) {\n        super(context, element);\n        const option = element.options[element.selectedIndex || 0];\n        this.value = option ? option.text || '' : '';\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class TextareaElementContainer extends ElementContainer {\n    readonly value: string;\n    constructor(context: Context, element: HTMLTextAreaElement) {\n        super(context, element);\n        this.value = element.value;\n    }\n}\n","import {ElementContainer} from '../element-container';\nimport {parseTree} from '../node-parser';\nimport {Color, parseColor, COLORS, isTransparent} from '../../css/types/color';\nimport {Context} from '../../core/context';\n\nexport class IFrameElementContainer extends ElementContainer {\n    src: string;\n    width: number;\n    height: number;\n    tree?: ElementContainer;\n    backgroundColor: Color;\n\n    constructor(context: Context, iframe: HTMLIFrameElement) {\n        super(context, iframe);\n        this.src = iframe.src;\n        this.width = parseInt(iframe.width, 10) || 0;\n        this.height = parseInt(iframe.height, 10) || 0;\n        this.backgroundColor = this.styles.backgroundColor;\n        try {\n            if (\n                iframe.contentWindow &&\n                iframe.contentWindow.document &&\n                iframe.contentWindow.document.documentElement\n            ) {\n                this.tree = parseTree(context, iframe.contentWindow.document.documentElement);\n\n                // http://www.w3.org/TR/css3-background/#special-backgrounds\n                const documentBackgroundColor = iframe.contentWindow.document.documentElement\n                    ? parseColor(\n                          context,\n                          getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor as string\n                      )\n                    : COLORS.TRANSPARENT;\n                const bodyBackgroundColor = iframe.contentWindow.document.body\n                    ? parseColor(\n                          context,\n                          getComputedStyle(iframe.contentWindow.document.body).backgroundColor as string\n                      )\n                    : COLORS.TRANSPARENT;\n\n                this.backgroundColor = isTransparent(documentBackgroundColor)\n                    ? isTransparent(bodyBackgroundColor)\n                        ? this.styles.backgroundColor\n                        : bodyBackgroundColor\n                    : documentBackgroundColor;\n            }\n        } catch (e) {}\n    }\n}\n","import {CSSParsedDeclaration} from '../css';\nimport {ElementContainer, FLAGS} from './element-container';\nimport {TextContainer} from './text-container';\nimport {ImageElementContainer} from './replaced-elements/image-element-container';\nimport {CanvasElementContainer} from './replaced-elements/canvas-element-container';\nimport {SVGElementContainer} from './replaced-elements/svg-element-container';\nimport {LIElementContainer} from './elements/li-element-container';\nimport {OLElementContainer} from './elements/ol-element-container';\nimport {InputElementContainer} from './replaced-elements/input-element-container';\nimport {SelectElementContainer} from './elements/select-element-container';\nimport {TextareaElementContainer} from './elements/textarea-element-container';\nimport {IFrameElementContainer} from './replaced-elements/iframe-element-container';\nimport {Context} from '../core/context';\n\nconst LIST_OWNERS = ['OL', 'UL', 'MENU'];\n\nconst parseNodeTree = (context: Context, node: Node, parent: ElementContainer, root: ElementContainer) => {\n    for (let childNode = node.firstChild, nextNode; childNode; childNode = nextNode) {\n        nextNode = childNode.nextSibling;\n\n        if (isTextNode(childNode) && childNode.data.trim().length > 0) {\n            parent.textNodes.push(new TextContainer(context, childNode, parent.styles));\n        } else if (isElementNode(childNode)) {\n            if (isSlotElement(childNode) && childNode.assignedNodes) {\n                childNode.assignedNodes().forEach((childNode) => parseNodeTree(context, childNode, parent, root));\n            } else {\n                const container = createContainer(context, childNode);\n                if (container.styles.isVisible()) {\n                    if (createsRealStackingContext(childNode, container, root)) {\n                        container.flags |= FLAGS.CREATES_REAL_STACKING_CONTEXT;\n                    } else if (createsStackingContext(container.styles)) {\n                        container.flags |= FLAGS.CREATES_STACKING_CONTEXT;\n                    }\n\n                    if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {\n                        container.flags |= FLAGS.IS_LIST_OWNER;\n                    }\n\n                    parent.elements.push(container);\n                    childNode.slot;\n                    if (childNode.shadowRoot) {\n                        parseNodeTree(context, childNode.shadowRoot, container, root);\n                    } else if (\n                        !isTextareaElement(childNode) &&\n                        !isSVGElement(childNode) &&\n                        !isSelectElement(childNode)\n                    ) {\n                        parseNodeTree(context, childNode, container, root);\n                    }\n                }\n            }\n        }\n    }\n};\n\nconst createContainer = (context: Context, element: Element): ElementContainer => {\n    if (isImageElement(element)) {\n        return new ImageElementContainer(context, element);\n    }\n\n    if (isCanvasElement(element)) {\n        return new CanvasElementContainer(context, element);\n    }\n\n    if (isSVGElement(element)) {\n        return new SVGElementContainer(context, element);\n    }\n\n    if (isLIElement(element)) {\n        return new LIElementContainer(context, element);\n    }\n\n    if (isOLElement(element)) {\n        return new OLElementContainer(context, element);\n    }\n\n    if (isInputElement(element)) {\n        return new InputElementContainer(context, element);\n    }\n\n    if (isSelectElement(element)) {\n        return new SelectElementContainer(context, element);\n    }\n\n    if (isTextareaElement(element)) {\n        return new TextareaElementContainer(context, element);\n    }\n\n    if (isIFrameElement(element)) {\n        return new IFrameElementContainer(context, element);\n    }\n\n    return new ElementContainer(context, element);\n};\n\nexport const parseTree = (context: Context, element: HTMLElement): ElementContainer => {\n    const container = createContainer(context, element);\n    container.flags |= FLAGS.CREATES_REAL_STACKING_CONTEXT;\n    parseNodeTree(context, element, container, container);\n    return container;\n};\n\nconst createsRealStackingContext = (node: Element, container: ElementContainer, root: ElementContainer): boolean => {\n    return (\n        container.styles.isPositionedWithZIndex() ||\n        container.styles.opacity < 1 ||\n        container.styles.isTransformed() ||\n        (isBodyElement(node) && root.styles.isTransparent())\n    );\n};\n\nconst createsStackingContext = (styles: CSSParsedDeclaration): boolean => styles.isPositioned() || styles.isFloating();\n\nexport const isTextNode = (node: Node): node is Text => node.nodeType === Node.TEXT_NODE;\nexport const isElementNode = (node: Node): node is Element => node.nodeType === Node.ELEMENT_NODE;\nexport const isHTMLElementNode = (node: Node): node is HTMLElement =>\n    isElementNode(node) && typeof (node as HTMLElement).style !== 'undefined' && !isSVGElementNode(node);\nexport const isSVGElementNode = (element: Element): element is SVGElement =>\n    typeof (element as SVGElement).className === 'object';\nexport const isLIElement = (node: Element): node is HTMLLIElement => node.tagName === 'LI';\nexport const isOLElement = (node: Element): node is HTMLOListElement => node.tagName === 'OL';\nexport const isInputElement = (node: Element): node is HTMLInputElement => node.tagName === 'INPUT';\nexport const isHTMLElement = (node: Element): node is HTMLHtmlElement => node.tagName === 'HTML';\nexport const isSVGElement = (node: Element): node is SVGSVGElement => node.tagName === 'svg';\nexport const isBodyElement = (node: Element): node is HTMLBodyElement => node.tagName === 'BODY';\nexport const isCanvasElement = (node: Element): node is HTMLCanvasElement => node.tagName === 'CANVAS';\nexport const isVideoElement = (node: Element): node is HTMLVideoElement => node.tagName === 'VIDEO';\nexport const isImageElement = (node: Element): node is HTMLImageElement => node.tagName === 'IMG';\nexport const isIFrameElement = (node: Element): node is HTMLIFrameElement => node.tagName === 'IFRAME';\nexport const isStyleElement = (node: Element): node is HTMLStyleElement => node.tagName === 'STYLE';\nexport const isScriptElement = (node: Element): node is HTMLScriptElement => node.tagName === 'SCRIPT';\nexport const isTextareaElement = (node: Element): node is HTMLTextAreaElement => node.tagName === 'TEXTAREA';\nexport const isSelectElement = (node: Element): node is HTMLSelectElement => node.tagName === 'SELECT';\nexport const isSlotElement = (node: Element): node is HTMLSlotElement => node.tagName === 'SLOT';\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nexport const isCustomElement = (node: Element): node is HTMLElement => node.tagName.indexOf('-') > 0;\n","import {LIST_STYLE_TYPE} from '../../property-descriptors/list-style-type';\nimport {fromCodePoint} from 'css-line-break';\nimport {contains} from '../../../core/bitwise';\nimport {CSSParsedCounterDeclaration} from '../../index';\n\nexport class CounterState {\n    private readonly counters: {[key: string]: number[]} = {};\n\n    getCounterValue(name: string): number {\n        const counter = this.counters[name];\n\n        if (counter && counter.length) {\n            return counter[counter.length - 1];\n        }\n        return 1;\n    }\n\n    getCounterValues(name: string): readonly number[] {\n        const counter = this.counters[name];\n        return counter ? counter : [];\n    }\n\n    pop(counters: string[]): void {\n        counters.forEach((counter) => this.counters[counter].pop());\n    }\n\n    parse(style: CSSParsedCounterDeclaration): string[] {\n        const counterIncrement = style.counterIncrement;\n        const counterReset = style.counterReset;\n        let canReset = true;\n\n        if (counterIncrement !== null) {\n            counterIncrement.forEach((entry) => {\n                const counter = this.counters[entry.counter];\n                if (counter && entry.increment !== 0) {\n                    canReset = false;\n                    if (!counter.length) {\n                        counter.push(1);\n                    }\n                    counter[Math.max(0, counter.length - 1)] += entry.increment;\n                }\n            });\n        }\n\n        const counterNames: string[] = [];\n        if (canReset) {\n            counterReset.forEach((entry) => {\n                let counter = this.counters[entry.counter];\n                counterNames.push(entry.counter);\n                if (!counter) {\n                    counter = this.counters[entry.counter] = [];\n                }\n                counter.push(entry.reset);\n            });\n        }\n\n        return counterNames;\n    }\n}\n\ninterface CounterSymbols {\n    integers: number[];\n    values: string[];\n}\n\nconst ROMAN_UPPER: CounterSymbols = {\n    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],\n    values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']\n};\n\nconst ARMENIAN: CounterSymbols = {\n    integers: [\n        9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70,\n        60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        'Ք',\n        'Փ',\n        'Ւ',\n        'Ց',\n        'Ր',\n        'Տ',\n        'Վ',\n        'Ս',\n        'Ռ',\n        'Ջ',\n        'Պ',\n        'Չ',\n        'Ո',\n        'Շ',\n        'Ն',\n        'Յ',\n        'Մ',\n        'Ճ',\n        'Ղ',\n        'Ձ',\n        'Հ',\n        'Կ',\n        'Ծ',\n        'Խ',\n        'Լ',\n        'Ի',\n        'Ժ',\n        'Թ',\n        'Ը',\n        'Է',\n        'Զ',\n        'Ե',\n        'Դ',\n        'Գ',\n        'Բ',\n        'Ա'\n    ]\n};\n\nconst HEBREW: CounterSymbols = {\n    integers: [\n        10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20,\n        19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        'י׳',\n        'ט׳',\n        'ח׳',\n        'ז׳',\n        'ו׳',\n        'ה׳',\n        'ד׳',\n        'ג׳',\n        'ב׳',\n        'א׳',\n        'ת',\n        'ש',\n        'ר',\n        'ק',\n        'צ',\n        'פ',\n        'ע',\n        'ס',\n        'נ',\n        'מ',\n        'ל',\n        'כ',\n        'יט',\n        'יח',\n        'יז',\n        'טז',\n        'טו',\n        'י',\n        'ט',\n        'ח',\n        'ז',\n        'ו',\n        'ה',\n        'ד',\n        'ג',\n        'ב',\n        'א'\n    ]\n};\n\nconst GEORGIAN: CounterSymbols = {\n    integers: [\n        10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90,\n        80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        'ჵ',\n        'ჰ',\n        'ჯ',\n        'ჴ',\n        'ხ',\n        'ჭ',\n        'წ',\n        'ძ',\n        'ც',\n        'ჩ',\n        'შ',\n        'ყ',\n        'ღ',\n        'ქ',\n        'ფ',\n        'ჳ',\n        'ტ',\n        'ს',\n        'რ',\n        'ჟ',\n        'პ',\n        'ო',\n        'ჲ',\n        'ნ',\n        'მ',\n        'ლ',\n        'კ',\n        'ი',\n        'თ',\n        'ჱ',\n        'ზ',\n        'ვ',\n        'ე',\n        'დ',\n        'გ',\n        'ბ',\n        'ა'\n    ]\n};\n\nconst createAdditiveCounter = (\n    value: number,\n    min: number,\n    max: number,\n    symbols: CounterSymbols,\n    fallback: LIST_STYLE_TYPE,\n    suffix: string\n) => {\n    if (value < min || value > max) {\n        return createCounterText(value, fallback, suffix.length > 0);\n    }\n\n    return (\n        symbols.integers.reduce((string, integer, index) => {\n            while (value >= integer) {\n                value -= integer;\n                string += symbols.values[index];\n            }\n            return string;\n        }, '') + suffix\n    );\n};\n\nconst createCounterStyleWithSymbolResolver = (\n    value: number,\n    codePointRangeLength: number,\n    isNumeric: boolean,\n    resolver: (codePoint: number) => string\n): string => {\n    let string = '';\n\n    do {\n        if (!isNumeric) {\n            value--;\n        }\n        string = resolver(value) + string;\n        value /= codePointRangeLength;\n    } while (value * codePointRangeLength >= codePointRangeLength);\n\n    return string;\n};\n\nconst createCounterStyleFromRange = (\n    value: number,\n    codePointRangeStart: number,\n    codePointRangeEnd: number,\n    isNumeric: boolean,\n    suffix: string\n): string => {\n    const codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;\n\n    return (\n        (value < 0 ? '-' : '') +\n        (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, (codePoint) =>\n            fromCodePoint(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart)\n        ) +\n            suffix)\n    );\n};\n\nconst createCounterStyleFromSymbols = (value: number, symbols: string, suffix = '. '): string => {\n    const codePointRangeLength = symbols.length;\n    return (\n        createCounterStyleWithSymbolResolver(\n            Math.abs(value),\n            codePointRangeLength,\n            false,\n            (codePoint) => symbols[Math.floor(codePoint % codePointRangeLength)]\n        ) + suffix\n    );\n};\n\nconst CJK_ZEROS = 1 << 0;\nconst CJK_TEN_COEFFICIENTS = 1 << 1;\nconst CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;\nconst CJK_HUNDRED_COEFFICIENTS = 1 << 3;\n\nconst createCJKCounter = (\n    value: number,\n    numbers: string,\n    multipliers: string,\n    negativeSign: string,\n    suffix: string,\n    flags: number\n): string => {\n    if (value < -9999 || value > 9999) {\n        return createCounterText(value, LIST_STYLE_TYPE.CJK_DECIMAL, suffix.length > 0);\n    }\n    let tmp = Math.abs(value);\n    let string = suffix;\n\n    if (tmp === 0) {\n        return numbers[0] + string;\n    }\n\n    for (let digit = 0; tmp > 0 && digit <= 4; digit++) {\n        const coefficient = tmp % 10;\n\n        if (coefficient === 0 && contains(flags, CJK_ZEROS) && string !== '') {\n            string = numbers[coefficient] + string;\n        } else if (\n            coefficient > 1 ||\n            (coefficient === 1 && digit === 0) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_COEFFICIENTS)) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100) ||\n            (coefficient === 1 && digit > 1 && contains(flags, CJK_HUNDRED_COEFFICIENTS))\n        ) {\n            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;\n        } else if (coefficient === 1 && digit > 0) {\n            string = multipliers[digit - 1] + string;\n        }\n        tmp = Math.floor(tmp / 10);\n    }\n\n    return (value < 0 ? negativeSign : '') + string;\n};\n\nconst CHINESE_INFORMAL_MULTIPLIERS = '十百千萬';\nconst CHINESE_FORMAL_MULTIPLIERS = '拾佰仟萬';\nconst JAPANESE_NEGATIVE = 'マイナス';\nconst KOREAN_NEGATIVE = '마이너스';\n\nexport const createCounterText = (value: number, type: LIST_STYLE_TYPE, appendSuffix: boolean): string => {\n    const defaultSuffix = appendSuffix ? '. ' : '';\n    const cjkSuffix = appendSuffix ? '、' : '';\n    const koreanSuffix = appendSuffix ? ', ' : '';\n    const spaceSuffix = appendSuffix ? ' ' : '';\n    switch (type) {\n        case LIST_STYLE_TYPE.DISC:\n            return '•' + spaceSuffix;\n        case LIST_STYLE_TYPE.CIRCLE:\n            return '◦' + spaceSuffix;\n        case LIST_STYLE_TYPE.SQUARE:\n            return '◾' + spaceSuffix;\n        case LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:\n            const string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n            return string.length < 4 ? `0${string}` : string;\n        case LIST_STYLE_TYPE.CJK_DECIMAL:\n            return createCounterStyleFromSymbols(value, '〇一二三四五六七八九', cjkSuffix);\n        case LIST_STYLE_TYPE.LOWER_ROMAN:\n            return createAdditiveCounter(\n                value,\n                1,\n                3999,\n                ROMAN_UPPER,\n                LIST_STYLE_TYPE.DECIMAL,\n                defaultSuffix\n            ).toLowerCase();\n        case LIST_STYLE_TYPE.UPPER_ROMAN:\n            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_GREEK:\n            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_ALPHA:\n            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);\n        case LIST_STYLE_TYPE.UPPER_ALPHA:\n            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);\n        case LIST_STYLE_TYPE.ARABIC_INDIC:\n            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);\n        case LIST_STYLE_TYPE.ARMENIAN:\n        case LIST_STYLE_TYPE.UPPER_ARMENIAN:\n            return createAdditiveCounter(value, 1, 9999, ARMENIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_ARMENIAN:\n            return createAdditiveCounter(\n                value,\n                1,\n                9999,\n                ARMENIAN,\n                LIST_STYLE_TYPE.DECIMAL,\n                defaultSuffix\n            ).toLowerCase();\n        case LIST_STYLE_TYPE.BENGALI:\n            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);\n        case LIST_STYLE_TYPE.CAMBODIAN:\n        case LIST_STYLE_TYPE.KHMER:\n            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);\n        case LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:\n            return createCounterStyleFromSymbols(value, '子丑寅卯辰巳午未申酉戌亥', cjkSuffix);\n        case LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:\n            return createCounterStyleFromSymbols(value, '甲乙丙丁戊己庚辛壬癸', cjkSuffix);\n        case LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:\n        case LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:\n            return createCJKCounter(\n                value,\n                '零一二三四五六七八九',\n                CHINESE_INFORMAL_MULTIPLIERS,\n                '負',\n                cjkSuffix,\n                CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:\n            return createCJKCounter(\n                value,\n                '零壹貳參肆伍陸柒捌玖',\n                CHINESE_FORMAL_MULTIPLIERS,\n                '負',\n                cjkSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:\n            return createCJKCounter(\n                value,\n                '零一二三四五六七八九',\n                CHINESE_INFORMAL_MULTIPLIERS,\n                '负',\n                cjkSuffix,\n                CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:\n            return createCJKCounter(\n                value,\n                '零壹贰叁肆伍陆柒捌玖',\n                CHINESE_FORMAL_MULTIPLIERS,\n                '负',\n                cjkSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.JAPANESE_INFORMAL:\n            return createCJKCounter(value, '〇一二三四五六七八九', '十百千万', JAPANESE_NEGATIVE, cjkSuffix, 0);\n        case LIST_STYLE_TYPE.JAPANESE_FORMAL:\n            return createCJKCounter(\n                value,\n                '零壱弐参四伍六七八九',\n                '拾百千万',\n                JAPANESE_NEGATIVE,\n                cjkSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:\n            return createCJKCounter(\n                value,\n                '영일이삼사오육칠팔구',\n                '십백천만',\n                KOREAN_NEGATIVE,\n                koreanSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:\n            return createCJKCounter(value, '零一二三四五六七八九', '十百千萬', KOREAN_NEGATIVE, koreanSuffix, 0);\n        case LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:\n            return createCJKCounter(\n                value,\n                '零壹貳參四五六七八九',\n                '拾百千',\n                KOREAN_NEGATIVE,\n                koreanSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.DEVANAGARI:\n            return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.GEORGIAN:\n            return createAdditiveCounter(value, 1, 19999, GEORGIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.GUJARATI:\n            return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.GURMUKHI:\n            return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.HEBREW:\n            return createAdditiveCounter(value, 1, 10999, HEBREW, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.HIRAGANA:\n            return createCounterStyleFromSymbols(\n                value,\n                'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん'\n            );\n        case LIST_STYLE_TYPE.HIRAGANA_IROHA:\n            return createCounterStyleFromSymbols(\n                value,\n                'いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす'\n            );\n        case LIST_STYLE_TYPE.KANNADA:\n            return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.KATAKANA:\n            return createCounterStyleFromSymbols(\n                value,\n                'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン',\n                cjkSuffix\n            );\n        case LIST_STYLE_TYPE.KATAKANA_IROHA:\n            return createCounterStyleFromSymbols(\n                value,\n                'イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス',\n                cjkSuffix\n            );\n        case LIST_STYLE_TYPE.LAO:\n            return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);\n        case LIST_STYLE_TYPE.MONGOLIAN:\n            return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);\n        case LIST_STYLE_TYPE.MYANMAR:\n            return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);\n        case LIST_STYLE_TYPE.ORIYA:\n            return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.PERSIAN:\n            return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TAMIL:\n            return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TELUGU:\n            return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.THAI:\n            return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TIBETAN:\n            return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);\n        case LIST_STYLE_TYPE.DECIMAL:\n        default:\n            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n    }\n};\n","import {ElementContainer} from '../dom/element-container';\nimport {getAbsoluteValue, getAbsoluteValueForTuple} from '../css/types/length-percentage';\nimport {Vector} from './vector';\nimport {BezierCurve} from './bezier-curve';\nimport {Path} from './path';\n\nexport class BoundCurves {\n    readonly topLeftBorderDoubleOuterBox: Path;\n    readonly topRightBorderDoubleOuterBox: Path;\n    readonly bottomRightBorderDoubleOuterBox: Path;\n    readonly bottomLeftBorderDoubleOuterBox: Path;\n    readonly topLeftBorderDoubleInnerBox: Path;\n    readonly topRightBorderDoubleInnerBox: Path;\n    readonly bottomRightBorderDoubleInnerBox: Path;\n    readonly bottomLeftBorderDoubleInnerBox: Path;\n    readonly topLeftBorderStroke: Path;\n    readonly topRightBorderStroke: Path;\n    readonly bottomRightBorderStroke: Path;\n    readonly bottomLeftBorderStroke: Path;\n    readonly topLeftBorderBox: Path;\n    readonly topRightBorderBox: Path;\n    readonly bottomRightBorderBox: Path;\n    readonly bottomLeftBorderBox: Path;\n    readonly topLeftPaddingBox: Path;\n    readonly topRightPaddingBox: Path;\n    readonly bottomRightPaddingBox: Path;\n    readonly bottomLeftPaddingBox: Path;\n    readonly topLeftContentBox: Path;\n    readonly topRightContentBox: Path;\n    readonly bottomRightContentBox: Path;\n    readonly bottomLeftContentBox: Path;\n\n    constructor(element: ElementContainer) {\n        const styles = element.styles;\n        const bounds = element.bounds;\n\n        let [tlh, tlv] = getAbsoluteValueForTuple(styles.borderTopLeftRadius, bounds.width, bounds.height);\n        let [trh, trv] = getAbsoluteValueForTuple(styles.borderTopRightRadius, bounds.width, bounds.height);\n        let [brh, brv] = getAbsoluteValueForTuple(styles.borderBottomRightRadius, bounds.width, bounds.height);\n        let [blh, blv] = getAbsoluteValueForTuple(styles.borderBottomLeftRadius, bounds.width, bounds.height);\n\n        const factors = [];\n        factors.push((tlh + trh) / bounds.width);\n        factors.push((blh + brh) / bounds.width);\n        factors.push((tlv + blv) / bounds.height);\n        factors.push((trv + brv) / bounds.height);\n        const maxFactor = Math.max(...factors);\n\n        if (maxFactor > 1) {\n            tlh /= maxFactor;\n            tlv /= maxFactor;\n            trh /= maxFactor;\n            trv /= maxFactor;\n            brh /= maxFactor;\n            brv /= maxFactor;\n            blh /= maxFactor;\n            blv /= maxFactor;\n        }\n\n        const topWidth = bounds.width - trh;\n        const rightHeight = bounds.height - brv;\n        const bottomWidth = bounds.width - brh;\n        const leftHeight = bounds.height - blv;\n\n        const borderTopWidth = styles.borderTopWidth;\n        const borderRightWidth = styles.borderRightWidth;\n        const borderBottomWidth = styles.borderBottomWidth;\n        const borderLeftWidth = styles.borderLeftWidth;\n\n        const paddingTop = getAbsoluteValue(styles.paddingTop, element.bounds.width);\n        const paddingRight = getAbsoluteValue(styles.paddingRight, element.bounds.width);\n        const paddingBottom = getAbsoluteValue(styles.paddingBottom, element.bounds.width);\n        const paddingLeft = getAbsoluteValue(styles.paddingLeft, element.bounds.width);\n\n        this.topLeftBorderDoubleOuterBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 3,\n                      bounds.top + borderTopWidth / 3,\n                      tlh - borderLeftWidth / 3,\n                      tlv - borderTopWidth / 3,\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 3, bounds.top + borderTopWidth / 3);\n        this.topRightBorderDoubleOuterBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + topWidth,\n                      bounds.top + borderTopWidth / 3,\n                      trh - borderRightWidth / 3,\n                      trv - borderTopWidth / 3,\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 3, bounds.top + borderTopWidth / 3);\n        this.bottomRightBorderDoubleOuterBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + bottomWidth,\n                      bounds.top + rightHeight,\n                      brh - borderRightWidth / 3,\n                      brv - borderBottomWidth / 3,\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - borderRightWidth / 3,\n                      bounds.top + bounds.height - borderBottomWidth / 3\n                  );\n        this.bottomLeftBorderDoubleOuterBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 3,\n                      bounds.top + leftHeight,\n                      blh - borderLeftWidth / 3,\n                      blv - borderBottomWidth / 3,\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 3, bounds.top + bounds.height - borderBottomWidth / 3);\n        this.topLeftBorderDoubleInnerBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + (borderLeftWidth * 2) / 3,\n                      bounds.top + (borderTopWidth * 2) / 3,\n                      tlh - (borderLeftWidth * 2) / 3,\n                      tlv - (borderTopWidth * 2) / 3,\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + (borderLeftWidth * 2) / 3, bounds.top + (borderTopWidth * 2) / 3);\n        this.topRightBorderDoubleInnerBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + topWidth,\n                      bounds.top + (borderTopWidth * 2) / 3,\n                      trh - (borderRightWidth * 2) / 3,\n                      trv - (borderTopWidth * 2) / 3,\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth * 2) / 3,\n                      bounds.top + (borderTopWidth * 2) / 3\n                  );\n        this.bottomRightBorderDoubleInnerBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + bottomWidth,\n                      bounds.top + rightHeight,\n                      brh - (borderRightWidth * 2) / 3,\n                      brv - (borderBottomWidth * 2) / 3,\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth * 2) / 3,\n                      bounds.top + bounds.height - (borderBottomWidth * 2) / 3\n                  );\n        this.bottomLeftBorderDoubleInnerBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + (borderLeftWidth * 2) / 3,\n                      bounds.top + leftHeight,\n                      blh - (borderLeftWidth * 2) / 3,\n                      blv - (borderBottomWidth * 2) / 3,\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(\n                      bounds.left + (borderLeftWidth * 2) / 3,\n                      bounds.top + bounds.height - (borderBottomWidth * 2) / 3\n                  );\n        this.topLeftBorderStroke =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 2,\n                      bounds.top + borderTopWidth / 2,\n                      tlh - borderLeftWidth / 2,\n                      tlv - borderTopWidth / 2,\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 2, bounds.top + borderTopWidth / 2);\n        this.topRightBorderStroke =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + topWidth,\n                      bounds.top + borderTopWidth / 2,\n                      trh - borderRightWidth / 2,\n                      trv - borderTopWidth / 2,\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 2, bounds.top + borderTopWidth / 2);\n        this.bottomRightBorderStroke =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + bottomWidth,\n                      bounds.top + rightHeight,\n                      brh - borderRightWidth / 2,\n                      brv - borderBottomWidth / 2,\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - borderRightWidth / 2,\n                      bounds.top + bounds.height - borderBottomWidth / 2\n                  );\n        this.bottomLeftBorderStroke =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 2,\n                      bounds.top + leftHeight,\n                      blh - borderLeftWidth / 2,\n                      blv - borderBottomWidth / 2,\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 2, bounds.top + bounds.height - borderBottomWidth / 2);\n        this.topLeftBorderBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT)\n                : new Vector(bounds.left, bounds.top);\n        this.topRightBorderBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top);\n        this.bottomRightBorderBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);\n        this.bottomLeftBorderBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left, bounds.top + bounds.height);\n        this.topLeftPaddingBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth,\n                      bounds.top + borderTopWidth,\n                      Math.max(0, tlh - borderLeftWidth),\n                      Math.max(0, tlv - borderTopWidth),\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + borderTopWidth);\n        this.topRightPaddingBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(topWidth, bounds.width - borderRightWidth),\n                      bounds.top + borderTopWidth,\n                      topWidth > bounds.width + borderRightWidth ? 0 : Math.max(0, trh - borderRightWidth),\n                      Math.max(0, trv - borderTopWidth),\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + borderTopWidth);\n        this.bottomRightPaddingBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(bottomWidth, bounds.width - borderLeftWidth),\n                      bounds.top + Math.min(rightHeight, bounds.height - borderBottomWidth),\n                      Math.max(0, brh - borderRightWidth),\n                      Math.max(0, brv - borderBottomWidth),\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - borderRightWidth,\n                      bounds.top + bounds.height - borderBottomWidth\n                  );\n        this.bottomLeftPaddingBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth,\n                      bounds.top + Math.min(leftHeight, bounds.height - borderBottomWidth),\n                      Math.max(0, blh - borderLeftWidth),\n                      Math.max(0, blv - borderBottomWidth),\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + bounds.height - borderBottomWidth);\n        this.topLeftContentBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth + paddingLeft,\n                      bounds.top + borderTopWidth + paddingTop,\n                      Math.max(0, tlh - (borderLeftWidth + paddingLeft)),\n                      Math.max(0, tlv - (borderTopWidth + paddingTop)),\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop);\n        this.topRightContentBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth + paddingLeft),\n                      bounds.top + borderTopWidth + paddingTop,\n                      topWidth > bounds.width + borderLeftWidth + paddingLeft ? 0 : trh - borderLeftWidth + paddingLeft,\n                      trv - (borderTopWidth + paddingTop),\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth + paddingRight),\n                      bounds.top + borderTopWidth + paddingTop\n                  );\n        this.bottomRightContentBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(bottomWidth, bounds.width - (borderLeftWidth + paddingLeft)),\n                      bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth + paddingTop),\n                      Math.max(0, brh - (borderRightWidth + paddingRight)),\n                      brv - (borderBottomWidth + paddingBottom),\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth + paddingRight),\n                      bounds.top + bounds.height - (borderBottomWidth + paddingBottom)\n                  );\n        this.bottomLeftContentBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth + paddingLeft,\n                      bounds.top + leftHeight,\n                      Math.max(0, blh - (borderLeftWidth + paddingLeft)),\n                      blv - (borderBottomWidth + paddingBottom),\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(\n                      bounds.left + borderLeftWidth + paddingLeft,\n                      bounds.top + bounds.height - (borderBottomWidth + paddingBottom)\n                  );\n    }\n}\n\nenum CORNER {\n    TOP_LEFT = 0,\n    TOP_RIGHT = 1,\n    BOTTOM_RIGHT = 2,\n    BOTTOM_LEFT = 3\n}\n\nconst getCurvePoints = (x: number, y: number, r1: number, r2: number, position: CORNER): BezierCurve => {\n    const kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    const ox = r1 * kappa; // control point offset horizontal\n    const oy = r2 * kappa; // control point offset vertical\n    const xm = x + r1; // x-middle\n    const ym = y + r2; // y-middle\n\n    switch (position) {\n        case CORNER.TOP_LEFT:\n            return new BezierCurve(\n                new Vector(x, ym),\n                new Vector(x, ym - oy),\n                new Vector(xm - ox, y),\n                new Vector(xm, y)\n            );\n        case CORNER.TOP_RIGHT:\n            return new BezierCurve(\n                new Vector(x, y),\n                new Vector(x + ox, y),\n                new Vector(xm, ym - oy),\n                new Vector(xm, ym)\n            );\n        case CORNER.BOTTOM_RIGHT:\n            return new BezierCurve(\n                new Vector(xm, y),\n                new Vector(xm, y + oy),\n                new Vector(x + ox, ym),\n                new Vector(x, ym)\n            );\n        case CORNER.BOTTOM_LEFT:\n        default:\n            return new BezierCurve(\n                new Vector(xm, ym),\n                new Vector(xm - ox, ym),\n                new Vector(x, y + oy),\n                new Vector(x, y)\n            );\n    }\n};\n\nexport const calculateBorderBoxPath = (curves: BoundCurves): Path[] => {\n    return [curves.topLeftBorderBox, curves.topRightBorderBox, curves.bottomRightBorderBox, curves.bottomLeftBorderBox];\n};\n\nexport const calculateContentBoxPath = (curves: BoundCurves): Path[] => {\n    return [\n        curves.topLeftContentBox,\n        curves.topRightContentBox,\n        curves.bottomRightContentBox,\n        curves.bottomLeftContentBox\n    ];\n};\n\nexport const calculatePaddingBoxPath = (curves: BoundCurves): Path[] => {\n    return [\n        curves.topLeftPaddingBox,\n        curves.topRightPaddingBox,\n        curves.bottomRightPaddingBox,\n        curves.bottomLeftPaddingBox\n    ];\n};\n","import {FEATURES} from './features';\nimport {Context} from './context';\n\nexport class CacheStorage {\n    private static _link?: HTMLAnchorElement;\n    private static _origin = 'about:blank';\n\n    static getOrigin(url: string): string {\n        const link = CacheStorage._link;\n        if (!link) {\n            return 'about:blank';\n        }\n\n        link.href = url;\n        link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n        return link.protocol + link.hostname + link.port;\n    }\n\n    static isSameOrigin(src: string): boolean {\n        return CacheStorage.getOrigin(src) === CacheStorage._origin;\n    }\n\n    static setContext(window: Window): void {\n        CacheStorage._link = window.document.createElement('a');\n        CacheStorage._origin = CacheStorage.getOrigin(window.location.href);\n    }\n}\n\nexport interface ResourceOptions {\n    imageTimeout: number;\n    useCORS: boolean;\n    allowTaint: boolean;\n    proxy?: string;\n}\n\nexport class Cache {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private readonly _cache: {[key: string]: Promise<any>} = {};\n\n    constructor(private readonly context: Context, private readonly _options: ResourceOptions) {}\n\n    addImage(src: string): Promise<void> {\n        const result = Promise.resolve();\n        if (this.has(src)) {\n            return result;\n        }\n\n        if (isBlobImage(src) || isRenderable(src)) {\n            (this._cache[src] = this.loadImage(src)).catch(() => {\n                // prevent unhandled rejection\n            });\n            return result;\n        }\n\n        return result;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    match(src: string): Promise<any> {\n        return this._cache[src];\n    }\n\n    private async loadImage(key: string) {\n        const isSameOrigin = CacheStorage.isSameOrigin(key);\n        const useCORS =\n            !isInlineImage(key) && this._options.useCORS === true && FEATURES.SUPPORT_CORS_IMAGES && !isSameOrigin;\n        const useProxy =\n            !isInlineImage(key) &&\n            !isSameOrigin &&\n            !isBlobImage(key) &&\n            typeof this._options.proxy === 'string' &&\n            FEATURES.SUPPORT_CORS_XHR &&\n            !useCORS;\n        if (\n            !isSameOrigin &&\n            this._options.allowTaint === false &&\n            !isInlineImage(key) &&\n            !isBlobImage(key) &&\n            !useProxy &&\n            !useCORS\n        ) {\n            return;\n        }\n\n        let src = key;\n        if (useProxy) {\n            src = await this.proxy(src);\n        }\n\n        this.context.logger.debug(`Added image ${key.substring(0, 256)}`);\n\n        return await new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => resolve(img);\n            img.onerror = reject;\n            //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous\n            if (isInlineBase64Image(src) || useCORS) {\n                img.crossOrigin = 'anonymous';\n            }\n            img.src = src;\n            if (img.complete === true) {\n                // Inline XML images may fail to parse, throwing an Error later on\n                setTimeout(() => resolve(img), 500);\n            }\n            if (this._options.imageTimeout > 0) {\n                setTimeout(\n                    () => reject(`Timed out (${this._options.imageTimeout}ms) loading image`),\n                    this._options.imageTimeout\n                );\n            }\n        });\n    }\n\n    private has(key: string): boolean {\n        return typeof this._cache[key] !== 'undefined';\n    }\n\n    keys(): Promise<string[]> {\n        return Promise.resolve(Object.keys(this._cache));\n    }\n\n    private proxy(src: string): Promise<string> {\n        const proxy = this._options.proxy;\n\n        if (!proxy) {\n            throw new Error('No proxy defined');\n        }\n\n        const key = src.substring(0, 256);\n\n        return new Promise((resolve, reject) => {\n            const responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';\n            const xhr = new XMLHttpRequest();\n            xhr.onload = () => {\n                if (xhr.status === 200) {\n                    if (responseType === 'text') {\n                        resolve(xhr.response);\n                    } else {\n                        const reader = new FileReader();\n                        reader.addEventListener('load', () => resolve(reader.result as string), false);\n                        reader.addEventListener('error', (e) => reject(e), false);\n                        reader.readAsDataURL(xhr.response);\n                    }\n                } else {\n                    reject(`Failed to proxy resource ${key} with status code ${xhr.status}`);\n                }\n            };\n\n            xhr.onerror = reject;\n            const queryString = proxy.indexOf('?') > -1 ? '&' : '?';\n            xhr.open('GET', `${proxy}${queryString}url=${encodeURIComponent(src)}&responseType=${responseType}`);\n\n            if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {\n                xhr.responseType = responseType;\n            }\n\n            if (this._options.imageTimeout) {\n                const timeout = this._options.imageTimeout;\n                xhr.timeout = timeout;\n                xhr.ontimeout = () => reject(`Timed out (${timeout}ms) proxying ${key}`);\n            }\n\n            xhr.send();\n        });\n    }\n}\n\nconst INLINE_SVG = /^data:image\\/svg\\+xml/i;\nconst INLINE_BASE64 = /^data:image\\/.*;base64,/i;\nconst INLINE_IMG = /^data:image\\/.*/i;\n\nconst isRenderable = (src: string): boolean => FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src);\nconst isInlineImage = (src: string): boolean => INLINE_IMG.test(src);\nconst isInlineBase64Image = (src: string): boolean => INLINE_BASE64.test(src);\nconst isBlobImage = (src: string): boolean => src.substr(0, 4) === 'blob';\n\nconst isSVG = (src: string): boolean => src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src);\n","import {IPath, Path, PathType} from './path';\n\nexport class Vector implements IPath {\n    type: PathType;\n    x: number;\n    y: number;\n\n    constructor(x: number, y: number) {\n        this.type = PathType.VECTOR;\n        this.x = x;\n        this.y = y;\n    }\n\n    add(deltaX: number, deltaY: number): Vector {\n        return new Vector(this.x + deltaX, this.y + deltaY);\n    }\n}\n\nexport const isVector = (path: Path): path is Vector => path.type === PathType.VECTOR;\n","import {Vector} from './vector';\nimport {IPath, PathType, Path} from './path';\n\nconst lerp = (a: Vector, b: Vector, t: number): Vector => {\n    return new Vector(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);\n};\n\nexport class BezierCurve implements IPath {\n    type: PathType;\n    start: Vector;\n    startControl: Vector;\n    endControl: Vector;\n    end: Vector;\n\n    constructor(start: Vector, startControl: Vector, endControl: Vector, end: Vector) {\n        this.type = PathType.BEZIER_CURVE;\n        this.start = start;\n        this.startControl = startControl;\n        this.endControl = endControl;\n        this.end = end;\n    }\n\n    subdivide(t: number, firstHalf: boolean): BezierCurve {\n        const ab = lerp(this.start, this.startControl, t);\n        const bc = lerp(this.startControl, this.endControl, t);\n        const cd = lerp(this.endControl, this.end, t);\n        const abbc = lerp(ab, bc, t);\n        const bccd = lerp(bc, cd, t);\n        const dest = lerp(abbc, bccd, t);\n        return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);\n    }\n\n    add(deltaX: number, deltaY: number): BezierCurve {\n        return new BezierCurve(\n            this.start.add(deltaX, deltaY),\n            this.startControl.add(deltaX, deltaY),\n            this.endControl.add(deltaX, deltaY),\n            this.end.add(deltaX, deltaY)\n        );\n    }\n\n    reverse(): BezierCurve {\n        return new BezierCurve(this.end, this.endControl, this.startControl, this.start);\n    }\n}\n\nexport const isBezierCurve = (path: Path): path is BezierCurve => path.type === PathType.BEZIER_CURVE;\n","import {Matrix} from '../css/property-descriptors/transform';\nimport {Path} from './path';\n\nexport const enum EffectType {\n    TRANSFORM = 0,\n    CLIP = 1,\n    OPACITY = 2\n}\n\nexport const enum EffectTarget {\n    BACKGROUND_BORDERS = 1 << 1,\n    CONTENT = 1 << 2\n}\n\nexport interface IElementEffect {\n    readonly type: EffectType;\n    readonly target: number;\n}\n\nexport class TransformEffect implements IElementEffect {\n    readonly type: EffectType = EffectType.TRANSFORM;\n    readonly target: number = EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT;\n\n    constructor(readonly offsetX: number, readonly offsetY: number, readonly matrix: Matrix) {}\n}\n\nexport class ClipEffect implements IElementEffect {\n    readonly type: EffectType = EffectType.CLIP;\n\n    constructor(readonly path: Path[], readonly target: EffectTarget) {}\n}\n\nexport class OpacityEffect implements IElementEffect {\n    readonly type: EffectType = EffectType.OPACITY;\n    readonly target: number = EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT;\n\n    constructor(readonly opacity: number) {}\n}\n\nexport const isTransformEffect = (effect: IElementEffect): effect is TransformEffect =>\n    effect.type === EffectType.TRANSFORM;\nexport const isClipEffect = (effect: IElementEffect): effect is ClipEffect => effect.type === EffectType.CLIP;\nexport const isOpacityEffect = (effect: IElementEffect): effect is OpacityEffect => effect.type === EffectType.OPACITY;\n","import {BezierCurve} from './bezier-curve';\nimport {Vector} from './vector';\nexport const enum PathType {\n    VECTOR = 0,\n    BEZIER_CURVE = 1\n}\n\nexport interface IPath {\n    type: PathType;\n    add(deltaX: number, deltaY: number): IPath;\n}\n\nexport const equalPath = (a: Path[], b: Path[]): boolean => {\n    if (a.length === b.length) {\n        return a.some((v, i) => v === b[i]);\n    }\n\n    return false;\n};\n\nexport const transformPath = (path: Path[], deltaX: number, deltaY: number, deltaW: number, deltaH: number): Path[] => {\n    return path.map((point, index) => {\n        switch (index) {\n            case 0:\n                return point.add(deltaX, deltaY);\n            case 1:\n                return point.add(deltaX + deltaW, deltaY);\n            case 2:\n                return point.add(deltaX + deltaW, deltaY + deltaH);\n            case 3:\n                return point.add(deltaX, deltaY + deltaH);\n        }\n        return point;\n    });\n};\n\nexport type Path = Vector | BezierCurve;\n","import {ElementContainer, FLAGS} from '../dom/element-container';\nimport {contains} from '../core/bitwise';\nimport {BoundCurves, calculateBorderBoxPath, calculatePaddingBoxPath} from './bound-curves';\nimport {ClipEffect, EffectTarget, IElementEffect, isClipEffect, OpacityEffect, TransformEffect} from './effects';\nimport {OVERFLOW} from '../css/property-descriptors/overflow';\nimport {equalPath} from './path';\nimport {DISPLAY} from '../css/property-descriptors/display';\nimport {OLElementContainer} from '../dom/elements/ol-element-container';\nimport {LIElementContainer} from '../dom/elements/li-element-container';\nimport {createCounterText} from '../css/types/functions/counter';\nimport {POSITION} from '../css/property-descriptors/position';\n\nexport class StackingContext {\n    element: ElementPaint;\n    negativeZIndex: StackingContext[];\n    zeroOrAutoZIndexOrTransformedOrOpacity: StackingContext[];\n    positiveZIndex: StackingContext[];\n    nonPositionedFloats: StackingContext[];\n    nonPositionedInlineLevel: StackingContext[];\n    inlineLevel: ElementPaint[];\n    nonInlineLevel: ElementPaint[];\n\n    constructor(container: ElementPaint) {\n        this.element = container;\n        this.inlineLevel = [];\n        this.nonInlineLevel = [];\n        this.negativeZIndex = [];\n        this.zeroOrAutoZIndexOrTransformedOrOpacity = [];\n        this.positiveZIndex = [];\n        this.nonPositionedFloats = [];\n        this.nonPositionedInlineLevel = [];\n    }\n}\n\nexport class ElementPaint {\n    readonly effects: IElementEffect[] = [];\n    readonly curves: BoundCurves;\n    listValue?: string;\n\n    constructor(readonly container: ElementContainer, readonly parent: ElementPaint | null) {\n        this.curves = new BoundCurves(this.container);\n        if (this.container.styles.opacity < 1) {\n            this.effects.push(new OpacityEffect(this.container.styles.opacity));\n        }\n\n        if (this.container.styles.transform !== null) {\n            const offsetX = this.container.bounds.left + this.container.styles.transformOrigin[0].number;\n            const offsetY = this.container.bounds.top + this.container.styles.transformOrigin[1].number;\n            const matrix = this.container.styles.transform;\n            this.effects.push(new TransformEffect(offsetX, offsetY, matrix));\n        }\n\n        if (this.container.styles.overflowX !== OVERFLOW.VISIBLE) {\n            const borderBox = calculateBorderBoxPath(this.curves);\n            const paddingBox = calculatePaddingBoxPath(this.curves);\n\n            if (equalPath(borderBox, paddingBox)) {\n                this.effects.push(new ClipEffect(borderBox, EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT));\n            } else {\n                this.effects.push(new ClipEffect(borderBox, EffectTarget.BACKGROUND_BORDERS));\n                this.effects.push(new ClipEffect(paddingBox, EffectTarget.CONTENT));\n            }\n        }\n    }\n\n    getEffects(target: EffectTarget): IElementEffect[] {\n        let inFlow = [POSITION.ABSOLUTE, POSITION.FIXED].indexOf(this.container.styles.position) === -1;\n        let parent = this.parent;\n        const effects = this.effects.slice(0);\n        while (parent) {\n            const croplessEffects = parent.effects.filter((effect) => !isClipEffect(effect));\n            if (inFlow || parent.container.styles.position !== POSITION.STATIC || !parent.parent) {\n                effects.unshift(...croplessEffects);\n                inFlow = [POSITION.ABSOLUTE, POSITION.FIXED].indexOf(parent.container.styles.position) === -1;\n                if (parent.container.styles.overflowX !== OVERFLOW.VISIBLE) {\n                    const borderBox = calculateBorderBoxPath(parent.curves);\n                    const paddingBox = calculatePaddingBoxPath(parent.curves);\n                    if (!equalPath(borderBox, paddingBox)) {\n                        effects.unshift(\n                            new ClipEffect(paddingBox, EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT)\n                        );\n                    }\n                }\n            } else {\n                effects.unshift(...croplessEffects);\n            }\n\n            parent = parent.parent;\n        }\n\n        return effects.filter((effect) => contains(effect.target, target));\n    }\n}\n\nconst parseStackTree = (\n    parent: ElementPaint,\n    stackingContext: StackingContext,\n    realStackingContext: StackingContext,\n    listItems: ElementPaint[]\n) => {\n    parent.container.elements.forEach((child) => {\n        const treatAsRealStackingContext = contains(child.flags, FLAGS.CREATES_REAL_STACKING_CONTEXT);\n        const createsStackingContext = contains(child.flags, FLAGS.CREATES_STACKING_CONTEXT);\n        const paintContainer = new ElementPaint(child, parent);\n        if (contains(child.styles.display, DISPLAY.LIST_ITEM)) {\n            listItems.push(paintContainer);\n        }\n\n        const listOwnerItems = contains(child.flags, FLAGS.IS_LIST_OWNER) ? [] : listItems;\n\n        if (treatAsRealStackingContext || createsStackingContext) {\n            const parentStack =\n                treatAsRealStackingContext || child.styles.isPositioned() ? realStackingContext : stackingContext;\n\n            const stack = new StackingContext(paintContainer);\n\n            if (child.styles.isPositioned() || child.styles.opacity < 1 || child.styles.isTransformed()) {\n                const order = child.styles.zIndex.order;\n                if (order < 0) {\n                    let index = 0;\n\n                    parentStack.negativeZIndex.some((current, i) => {\n                        if (order > current.element.container.styles.zIndex.order) {\n                            index = i;\n                            return false;\n                        } else if (index > 0) {\n                            return true;\n                        }\n\n                        return false;\n                    });\n                    parentStack.negativeZIndex.splice(index, 0, stack);\n                } else if (order > 0) {\n                    let index = 0;\n                    parentStack.positiveZIndex.some((current, i) => {\n                        if (order >= current.element.container.styles.zIndex.order) {\n                            index = i + 1;\n                            return false;\n                        } else if (index > 0) {\n                            return true;\n                        }\n\n                        return false;\n                    });\n                    parentStack.positiveZIndex.splice(index, 0, stack);\n                } else {\n                    parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);\n                }\n            } else {\n                if (child.styles.isFloating()) {\n                    parentStack.nonPositionedFloats.push(stack);\n                } else {\n                    parentStack.nonPositionedInlineLevel.push(stack);\n                }\n            }\n\n            parseStackTree(\n                paintContainer,\n                stack,\n                treatAsRealStackingContext ? stack : realStackingContext,\n                listOwnerItems\n            );\n        } else {\n            if (child.styles.isInlineLevel()) {\n                stackingContext.inlineLevel.push(paintContainer);\n            } else {\n                stackingContext.nonInlineLevel.push(paintContainer);\n            }\n\n            parseStackTree(paintContainer, stackingContext, realStackingContext, listOwnerItems);\n        }\n\n        if (contains(child.flags, FLAGS.IS_LIST_OWNER)) {\n            processListItems(child, listOwnerItems);\n        }\n    });\n};\n\nconst processListItems = (owner: ElementContainer, elements: ElementPaint[]) => {\n    let numbering = owner instanceof OLElementContainer ? owner.start : 1;\n    const reversed = owner instanceof OLElementContainer ? owner.reversed : false;\n    for (let i = 0; i < elements.length; i++) {\n        const item = elements[i];\n        if (\n            item.container instanceof LIElementContainer &&\n            typeof item.container.value === 'number' &&\n            item.container.value !== 0\n        ) {\n            numbering = item.container.value;\n        }\n\n        item.listValue = createCounterText(numbering, item.container.styles.listStyleType, true);\n\n        numbering += reversed ? -1 : 1;\n    }\n};\n\nexport const parseStackingContexts = (container: ElementContainer): StackingContext => {\n    const paintContainer = new ElementPaint(container, null);\n    const root = new StackingContext(paintContainer);\n    const listItems: ElementPaint[] = [];\n    parseStackTree(paintContainer, root, root, listItems);\n    processListItems(paintContainer.container, listItems);\n    return root;\n};\n","import {Path} from './path';\nimport {BoundCurves} from './bound-curves';\nimport {isBezierCurve} from './bezier-curve';\n\nexport const parsePathForBorder = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(\n                curves.topLeftBorderBox,\n                curves.topLeftPaddingBox,\n                curves.topRightBorderBox,\n                curves.topRightPaddingBox\n            );\n        case 1:\n            return createPathFromCurves(\n                curves.topRightBorderBox,\n                curves.topRightPaddingBox,\n                curves.bottomRightBorderBox,\n                curves.bottomRightPaddingBox\n            );\n        case 2:\n            return createPathFromCurves(\n                curves.bottomRightBorderBox,\n                curves.bottomRightPaddingBox,\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftPaddingBox\n            );\n        case 3:\n        default:\n            return createPathFromCurves(\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftPaddingBox,\n                curves.topLeftBorderBox,\n                curves.topLeftPaddingBox\n            );\n    }\n};\n\nexport const parsePathForBorderDoubleOuter = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(\n                curves.topLeftBorderBox,\n                curves.topLeftBorderDoubleOuterBox,\n                curves.topRightBorderBox,\n                curves.topRightBorderDoubleOuterBox\n            );\n        case 1:\n            return createPathFromCurves(\n                curves.topRightBorderBox,\n                curves.topRightBorderDoubleOuterBox,\n                curves.bottomRightBorderBox,\n                curves.bottomRightBorderDoubleOuterBox\n            );\n        case 2:\n            return createPathFromCurves(\n                curves.bottomRightBorderBox,\n                curves.bottomRightBorderDoubleOuterBox,\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftBorderDoubleOuterBox\n            );\n        case 3:\n        default:\n            return createPathFromCurves(\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftBorderDoubleOuterBox,\n                curves.topLeftBorderBox,\n                curves.topLeftBorderDoubleOuterBox\n            );\n    }\n};\n\nexport const parsePathForBorderDoubleInner = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(\n                curves.topLeftBorderDoubleInnerBox,\n                curves.topLeftPaddingBox,\n                curves.topRightBorderDoubleInnerBox,\n                curves.topRightPaddingBox\n            );\n        case 1:\n            return createPathFromCurves(\n                curves.topRightBorderDoubleInnerBox,\n                curves.topRightPaddingBox,\n                curves.bottomRightBorderDoubleInnerBox,\n                curves.bottomRightPaddingBox\n            );\n        case 2:\n            return createPathFromCurves(\n                curves.bottomRightBorderDoubleInnerBox,\n                curves.bottomRightPaddingBox,\n                curves.bottomLeftBorderDoubleInnerBox,\n                curves.bottomLeftPaddingBox\n            );\n        case 3:\n        default:\n            return createPathFromCurves(\n                curves.bottomLeftBorderDoubleInnerBox,\n                curves.bottomLeftPaddingBox,\n                curves.topLeftBorderDoubleInnerBox,\n                curves.topLeftPaddingBox\n            );\n    }\n};\n\nexport const parsePathForBorderStroke = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createStrokePathFromCurves(curves.topLeftBorderStroke, curves.topRightBorderStroke);\n        case 1:\n            return createStrokePathFromCurves(curves.topRightBorderStroke, curves.bottomRightBorderStroke);\n        case 2:\n            return createStrokePathFromCurves(curves.bottomRightBorderStroke, curves.bottomLeftBorderStroke);\n        case 3:\n        default:\n            return createStrokePathFromCurves(curves.bottomLeftBorderStroke, curves.topLeftBorderStroke);\n    }\n};\n\nconst createStrokePathFromCurves = (outer1: Path, outer2: Path): Path[] => {\n    const path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    } else {\n        path.push(outer1);\n    }\n\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    } else {\n        path.push(outer2);\n    }\n\n    return path;\n};\n\nconst createPathFromCurves = (outer1: Path, inner1: Path, outer2: Path, inner2: Path): Path[] => {\n    const path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    } else {\n        path.push(outer1);\n    }\n\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    } else {\n        path.push(outer2);\n    }\n\n    if (isBezierCurve(inner2)) {\n        path.push(inner2.subdivide(0.5, true).reverse());\n    } else {\n        path.push(inner2);\n    }\n\n    if (isBezierCurve(inner1)) {\n        path.push(inner1.subdivide(0.5, false).reverse());\n    } else {\n        path.push(inner1);\n    }\n\n    return path;\n};\n","import {getAbsoluteValue} from '../css/types/length-percentage';\nimport {Bounds} from '../css/layout/bounds';\nimport {ElementContainer} from '../dom/element-container';\n\nexport const paddingBox = (element: ElementContainer): Bounds => {\n    const bounds = element.bounds;\n    const styles = element.styles;\n    return bounds.add(\n        styles.borderLeftWidth,\n        styles.borderTopWidth,\n        -(styles.borderRightWidth + styles.borderLeftWidth),\n        -(styles.borderTopWidth + styles.borderBottomWidth)\n    );\n};\n\nexport const contentBox = (element: ElementContainer): Bounds => {\n    const styles = element.styles;\n    const bounds = element.bounds;\n\n    const paddingLeft = getAbsoluteValue(styles.paddingLeft, bounds.width);\n    const paddingRight = getAbsoluteValue(styles.paddingRight, bounds.width);\n    const paddingTop = getAbsoluteValue(styles.paddingTop, bounds.width);\n    const paddingBottom = getAbsoluteValue(styles.paddingBottom, bounds.width);\n\n    return bounds.add(\n        paddingLeft + styles.borderLeftWidth,\n        paddingTop + styles.borderTopWidth,\n        -(styles.borderRightWidth + styles.borderLeftWidth + paddingLeft + paddingRight),\n        -(styles.borderTopWidth + styles.borderBottomWidth + paddingTop + paddingBottom)\n    );\n};\n","import {Bounds} from '../css/layout/bounds';\nimport {BACKGROUND_ORIGIN} from '../css/property-descriptors/background-origin';\nimport {ElementContainer} from '../dom/element-container';\nimport {BACKGROUND_SIZE, BackgroundSizeInfo} from '../css/property-descriptors/background-size';\nimport {Vector} from './vector';\nimport {BACKGROUND_REPEAT} from '../css/property-descriptors/background-repeat';\nimport {getAbsoluteValue, getAbsoluteValueForTuple, isLengthPercentage} from '../css/types/length-percentage';\nimport {CSSValue, isIdentToken} from '../css/syntax/parser';\nimport {contentBox, paddingBox} from './box-sizing';\nimport {Path} from './path';\nimport {BACKGROUND_CLIP} from '../css/property-descriptors/background-clip';\n\nexport const calculateBackgroundPositioningArea = (\n    backgroundOrigin: BACKGROUND_ORIGIN,\n    element: ElementContainer\n): Bounds => {\n    if (backgroundOrigin === BACKGROUND_ORIGIN.BORDER_BOX) {\n        return element.bounds;\n    }\n\n    if (backgroundOrigin === BACKGROUND_ORIGIN.CONTENT_BOX) {\n        return contentBox(element);\n    }\n\n    return paddingBox(element);\n};\n\nexport const calculateBackgroundPaintingArea = (backgroundClip: BACKGROUND_CLIP, element: ElementContainer): Bounds => {\n    if (backgroundClip === BACKGROUND_CLIP.BORDER_BOX) {\n        return element.bounds;\n    }\n\n    if (backgroundClip === BACKGROUND_CLIP.CONTENT_BOX) {\n        return contentBox(element);\n    }\n\n    return paddingBox(element);\n};\n\nexport const calculateBackgroundRendering = (\n    container: ElementContainer,\n    index: number,\n    intrinsicSize: [number | null, number | null, number | null]\n): [Path[], number, number, number, number] => {\n    const backgroundPositioningArea = calculateBackgroundPositioningArea(\n        getBackgroundValueForIndex(container.styles.backgroundOrigin, index),\n        container\n    );\n\n    const backgroundPaintingArea = calculateBackgroundPaintingArea(\n        getBackgroundValueForIndex(container.styles.backgroundClip, index),\n        container\n    );\n\n    const backgroundImageSize = calculateBackgroundSize(\n        getBackgroundValueForIndex(container.styles.backgroundSize, index),\n        intrinsicSize,\n        backgroundPositioningArea\n    );\n\n    const [sizeWidth, sizeHeight] = backgroundImageSize;\n\n    const position = getAbsoluteValueForTuple(\n        getBackgroundValueForIndex(container.styles.backgroundPosition, index),\n        backgroundPositioningArea.width - sizeWidth,\n        backgroundPositioningArea.height - sizeHeight\n    );\n\n    const path = calculateBackgroundRepeatPath(\n        getBackgroundValueForIndex(container.styles.backgroundRepeat, index),\n        position,\n        backgroundImageSize,\n        backgroundPositioningArea,\n        backgroundPaintingArea\n    );\n\n    const offsetX = Math.round(backgroundPositioningArea.left + position[0]);\n    const offsetY = Math.round(backgroundPositioningArea.top + position[1]);\n\n    return [path, offsetX, offsetY, sizeWidth, sizeHeight];\n};\n\nexport const isAuto = (token: CSSValue): boolean => isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO;\n\nconst hasIntrinsicValue = (value: number | null): value is number => typeof value === 'number';\n\nexport const calculateBackgroundSize = (\n    size: BackgroundSizeInfo[],\n    [intrinsicWidth, intrinsicHeight, intrinsicProportion]: [number | null, number | null, number | null],\n    bounds: Bounds\n): [number, number] => {\n    const [first, second] = size;\n\n    if (!first) {\n        return [0, 0];\n    }\n\n    if (isLengthPercentage(first) && second && isLengthPercentage(second)) {\n        return [getAbsoluteValue(first, bounds.width), getAbsoluteValue(second, bounds.height)];\n    }\n\n    const hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);\n\n    if (isIdentToken(first) && (first.value === BACKGROUND_SIZE.CONTAIN || first.value === BACKGROUND_SIZE.COVER)) {\n        if (hasIntrinsicValue(intrinsicProportion)) {\n            const targetRatio = bounds.width / bounds.height;\n\n            return targetRatio < intrinsicProportion !== (first.value === BACKGROUND_SIZE.COVER)\n                ? [bounds.width, bounds.width / intrinsicProportion]\n                : [bounds.height * intrinsicProportion, bounds.height];\n        }\n\n        return [bounds.width, bounds.height];\n    }\n\n    const hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);\n    const hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);\n    const hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight;\n\n    // If the background-size is auto or auto auto:\n    if (isAuto(first) && (!second || isAuto(second))) {\n        // If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.\n        if (hasIntrinsicWidth && hasIntrinsicHeight) {\n            return [intrinsicWidth as number, intrinsicHeight as number];\n        }\n\n        // If the image has no intrinsic dimensions and has no intrinsic proportions,\n        // it's rendered at the size of the background positioning area.\n\n        if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {\n            return [bounds.width, bounds.height];\n        }\n\n        // TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.\n\n        // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.\n        // The other dimension is computed using the specified dimension and the intrinsic proportions.\n        if (hasIntrinsicDimensions && hasIntrinsicProportion) {\n            const width = hasIntrinsicWidth\n                ? (intrinsicWidth as number)\n                : (intrinsicHeight as number) * (intrinsicProportion as number);\n            const height = hasIntrinsicHeight\n                ? (intrinsicHeight as number)\n                : (intrinsicWidth as number) / (intrinsicProportion as number);\n            return [width, height];\n        }\n\n        // If the image has only one intrinsic dimension but has no intrinsic proportions,\n        // it's rendered using the specified dimension and the other dimension of the background positioning area.\n        const width = hasIntrinsicWidth ? (intrinsicWidth as number) : bounds.width;\n        const height = hasIntrinsicHeight ? (intrinsicHeight as number) : bounds.height;\n        return [width, height];\n    }\n\n    // If the image has intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.\n    if (hasIntrinsicProportion) {\n        let width = 0;\n        let height = 0;\n        if (isLengthPercentage(first)) {\n            width = getAbsoluteValue(first, bounds.width);\n        } else if (isLengthPercentage(second)) {\n            height = getAbsoluteValue(second, bounds.height);\n        }\n\n        if (isAuto(first)) {\n            width = height * (intrinsicProportion as number);\n        } else if (!second || isAuto(second)) {\n            height = width / (intrinsicProportion as number);\n        }\n\n        return [width, height];\n    }\n\n    // If the image has no intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,\n    // if there is one. If there is no such intrinsic dimension,\n    // it becomes the corresponding dimension of the background positioning area.\n\n    let width = null;\n    let height = null;\n\n    if (isLengthPercentage(first)) {\n        width = getAbsoluteValue(first, bounds.width);\n    } else if (second && isLengthPercentage(second)) {\n        height = getAbsoluteValue(second, bounds.height);\n    }\n\n    if (width !== null && (!second || isAuto(second))) {\n        height =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (width / (intrinsicWidth as number)) * (intrinsicHeight as number)\n                : bounds.height;\n    }\n\n    if (height !== null && isAuto(first)) {\n        width =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (height / (intrinsicHeight as number)) * (intrinsicWidth as number)\n                : bounds.width;\n    }\n\n    if (width !== null && height !== null) {\n        return [width, height];\n    }\n\n    throw new Error(`Unable to calculate background-size for element`);\n};\n\nexport const getBackgroundValueForIndex = <T>(values: T[], index: number): T => {\n    const value = values[index];\n    if (typeof value === 'undefined') {\n        return values[0];\n    }\n\n    return value;\n};\n\nexport const calculateBackgroundRepeatPath = (\n    repeat: BACKGROUND_REPEAT,\n    [x, y]: [number, number],\n    [width, height]: [number, number],\n    backgroundPositioningArea: Bounds,\n    backgroundPaintingArea: Bounds\n): [Vector, Vector, Vector, Vector] => {\n    switch (repeat) {\n        case BACKGROUND_REPEAT.REPEAT_X:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width),\n                    Math.round(backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width),\n                    Math.round(height + backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left),\n                    Math.round(height + backgroundPositioningArea.top + y)\n                )\n            ];\n        case BACKGROUND_REPEAT.REPEAT_Y:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top)),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x),\n                    Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)\n                )\n            ];\n        case BACKGROUND_REPEAT.NO_REPEAT:\n            return [\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x),\n                    Math.round(backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.top + y + height)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x),\n                    Math.round(backgroundPositioningArea.top + y + height)\n                )\n            ];\n        default:\n            return [\n                new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.top)),\n                new Vector(\n                    Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width),\n                    Math.round(backgroundPaintingArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width),\n                    Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPaintingArea.left),\n                    Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)\n                )\n            ];\n    }\n};\n","export const SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n","import {SMALL_IMAGE} from '../core/util';\nexport interface FontMetric {\n    baseline: number;\n    middle: number;\n}\n\nconst SAMPLE_TEXT = 'Hidden Text';\n\nexport class FontMetrics {\n    private readonly _data: {[key: string]: FontMetric};\n    private readonly _document: Document;\n\n    constructor(document: Document) {\n        this._data = {};\n        this._document = document;\n    }\n\n    private parseMetrics(fontFamily: string, fontSize: string): FontMetric {\n        const container = this._document.createElement('div');\n        const img = this._document.createElement('img');\n        const span = this._document.createElement('span');\n\n        const body = this._document.body as HTMLBodyElement;\n\n        container.style.visibility = 'hidden';\n        container.style.fontFamily = fontFamily;\n        container.style.fontSize = fontSize;\n        container.style.margin = '0';\n        container.style.padding = '0';\n        container.style.whiteSpace = 'nowrap';\n\n        body.appendChild(container);\n\n        img.src = SMALL_IMAGE;\n        img.width = 1;\n        img.height = 1;\n\n        img.style.margin = '0';\n        img.style.padding = '0';\n        img.style.verticalAlign = 'baseline';\n\n        span.style.fontFamily = fontFamily;\n        span.style.fontSize = fontSize;\n        span.style.margin = '0';\n        span.style.padding = '0';\n\n        span.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n        container.appendChild(span);\n        container.appendChild(img);\n        const baseline = img.offsetTop - span.offsetTop + 2;\n\n        container.removeChild(span);\n        container.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n\n        container.style.lineHeight = 'normal';\n        img.style.verticalAlign = 'super';\n\n        const middle = img.offsetTop - container.offsetTop + 2;\n\n        body.removeChild(container);\n\n        return {baseline, middle};\n    }\n    getMetrics(fontFamily: string, fontSize: string): FontMetric {\n        const key = `${fontFamily} ${fontSize}`;\n        if (typeof this._data[key] === 'undefined') {\n            this._data[key] = this.parseMetrics(fontFamily, fontSize);\n        }\n\n        return this._data[key];\n    }\n}\n","import {Context} from '../core/context';\nimport {RenderConfigurations} from './canvas/canvas-renderer';\n\nexport class Renderer {\n    constructor(protected readonly context: Context, protected readonly options: RenderConfigurations) {}\n}\n","import {ElementPaint, parseStackingContexts, StackingContext} from '../stacking-context';\nimport {asString, Color, isTransparent} from '../../css/types/color';\nimport {ElementContainer, FLAGS} from '../../dom/element-container';\nimport {BORDER_STYLE} from '../../css/property-descriptors/border-style';\nimport {CSSParsedDeclaration} from '../../css';\nimport {TextContainer} from '../../dom/text-container';\nimport {Path, transformPath} from '../path';\nimport {BACKGROUND_CLIP} from '../../css/property-descriptors/background-clip';\nimport {BoundCurves, calculateBorderBoxPath, calculateContentBoxPath, calculatePaddingBoxPath} from '../bound-curves';\nimport {BezierCurve, isBezierCurve} from '../bezier-curve';\nimport {Vector} from '../vector';\nimport {CSSImageType, CSSURLImage, isLinearGradient, isRadialGradient} from '../../css/types/image';\nimport {\n    parsePathForBorder,\n    parsePathForBorderDoubleInner,\n    parsePathForBorderDoubleOuter,\n    parsePathForBorderStroke\n} from '../border';\nimport {calculateBackgroundRendering, getBackgroundValueForIndex} from '../background';\nimport {isDimensionToken} from '../../css/syntax/parser';\nimport {segmentGraphemes, TextBounds} from '../../css/layout/text';\nimport {ImageElementContainer} from '../../dom/replaced-elements/image-element-container';\nimport {contentBox} from '../box-sizing';\nimport {CanvasElementContainer} from '../../dom/replaced-elements/canvas-element-container';\nimport {SVGElementContainer} from '../../dom/replaced-elements/svg-element-container';\nimport {ReplacedElementContainer} from '../../dom/replaced-elements';\nimport {EffectTarget, IElementEffect, isClipEffect, isOpacityEffect, isTransformEffect} from '../effects';\nimport {contains} from '../../core/bitwise';\nimport {calculateGradientDirection, calculateRadius, processColorStops} from '../../css/types/functions/gradient';\nimport {FIFTY_PERCENT, getAbsoluteValue} from '../../css/types/length-percentage';\nimport {TEXT_DECORATION_LINE} from '../../css/property-descriptors/text-decoration-line';\nimport {FontMetrics} from '../font-metrics';\nimport {DISPLAY} from '../../css/property-descriptors/display';\nimport {Bounds} from '../../css/layout/bounds';\nimport {LIST_STYLE_TYPE} from '../../css/property-descriptors/list-style-type';\nimport {computeLineHeight} from '../../css/property-descriptors/line-height';\nimport {CHECKBOX, INPUT_COLOR, InputElementContainer, RADIO} from '../../dom/replaced-elements/input-element-container';\nimport {TEXT_ALIGN} from '../../css/property-descriptors/text-align';\nimport {TextareaElementContainer} from '../../dom/elements/textarea-element-container';\nimport {SelectElementContainer} from '../../dom/elements/select-element-container';\nimport {IFrameElementContainer} from '../../dom/replaced-elements/iframe-element-container';\nimport {TextShadow} from '../../css/property-descriptors/text-shadow';\nimport {PAINT_ORDER_LAYER} from '../../css/property-descriptors/paint-order';\nimport {Renderer} from '../renderer';\nimport {Context} from '../../core/context';\nimport {DIRECTION} from '../../css/property-descriptors/direction';\n\nexport type RenderConfigurations = RenderOptions & {\n    backgroundColor: Color | null;\n};\n\nexport interface RenderOptions {\n    scale: number;\n    canvas?: HTMLCanvasElement;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nconst MASK_OFFSET = 10000;\n\nexport class CanvasRenderer extends Renderer {\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n    private readonly _activeEffects: IElementEffect[] = [];\n    private readonly fontMetrics: FontMetrics;\n\n    constructor(context: Context, options: RenderConfigurations) {\n        super(context, options);\n        this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n        if (!options.canvas) {\n            this.canvas.width = Math.floor(options.width * options.scale);\n            this.canvas.height = Math.floor(options.height * options.scale);\n            this.canvas.style.width = `${options.width}px`;\n            this.canvas.style.height = `${options.height}px`;\n        }\n        this.fontMetrics = new FontMetrics(document);\n        this.ctx.scale(this.options.scale, this.options.scale);\n        this.ctx.translate(-options.x, -options.y);\n        this.ctx.textBaseline = 'bottom';\n        this._activeEffects = [];\n        this.context.logger.debug(\n            `Canvas renderer initialized (${options.width}x${options.height}) with scale ${options.scale}`\n        );\n    }\n\n    applyEffects(effects: IElementEffect[]): void {\n        while (this._activeEffects.length) {\n            this.popEffect();\n        }\n\n        effects.forEach((effect) => this.applyEffect(effect));\n    }\n\n    applyEffect(effect: IElementEffect): void {\n        this.ctx.save();\n        if (isOpacityEffect(effect)) {\n            this.ctx.globalAlpha = effect.opacity;\n        }\n\n        if (isTransformEffect(effect)) {\n            this.ctx.translate(effect.offsetX, effect.offsetY);\n            this.ctx.transform(\n                effect.matrix[0],\n                effect.matrix[1],\n                effect.matrix[2],\n                effect.matrix[3],\n                effect.matrix[4],\n                effect.matrix[5]\n            );\n            this.ctx.translate(-effect.offsetX, -effect.offsetY);\n        }\n\n        if (isClipEffect(effect)) {\n            this.path(effect.path);\n            this.ctx.clip();\n        }\n\n        this._activeEffects.push(effect);\n    }\n\n    popEffect(): void {\n        this._activeEffects.pop();\n        this.ctx.restore();\n    }\n\n    async renderStack(stack: StackingContext): Promise<void> {\n        const styles = stack.element.container.styles;\n        if (styles.isVisible()) {\n            await this.renderStackContent(stack);\n        }\n    }\n\n    async renderNode(paint: ElementPaint): Promise<void> {\n        if (contains(paint.container.flags, FLAGS.DEBUG_RENDER)) {\n            debugger;\n        }\n\n        if (paint.container.styles.isVisible()) {\n            await this.renderNodeBackgroundAndBorders(paint);\n            await this.renderNodeContent(paint);\n        }\n    }\n\n    renderTextWithLetterSpacing(text: TextBounds, letterSpacing: number, baseline: number): void {\n        if (letterSpacing === 0) {\n            this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + baseline);\n        } else {\n            const letters = segmentGraphemes(text.text);\n            letters.reduce((left, letter) => {\n                this.ctx.fillText(letter, left, text.bounds.top + baseline);\n\n                return left + this.ctx.measureText(letter).width;\n            }, text.bounds.left);\n        }\n    }\n\n    private createFontStyle(styles: CSSParsedDeclaration): string[] {\n        const fontVariant = styles.fontVariant\n            .filter((variant) => variant === 'normal' || variant === 'small-caps')\n            .join('');\n        const fontFamily = fixIOSSystemFonts(styles.fontFamily).join(', ');\n        const fontSize = isDimensionToken(styles.fontSize)\n            ? `${styles.fontSize.number}${styles.fontSize.unit}`\n            : `${styles.fontSize.number}px`;\n\n        return [\n            [styles.fontStyle, fontVariant, styles.fontWeight, fontSize, fontFamily].join(' '),\n            fontFamily,\n            fontSize\n        ];\n    }\n\n    async renderTextNode(text: TextContainer, styles: CSSParsedDeclaration): Promise<void> {\n        const [font, fontFamily, fontSize] = this.createFontStyle(styles);\n\n        this.ctx.font = font;\n\n        this.ctx.direction = styles.direction === DIRECTION.RTL ? 'rtl' : 'ltr';\n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'alphabetic';\n        const {baseline, middle} = this.fontMetrics.getMetrics(fontFamily, fontSize);\n        const paintOrder = styles.paintOrder;\n\n        text.textBounds.forEach((text) => {\n            paintOrder.forEach((paintOrderLayer) => {\n                switch (paintOrderLayer) {\n                    case PAINT_ORDER_LAYER.FILL:\n                        this.ctx.fillStyle = asString(styles.color);\n                        this.renderTextWithLetterSpacing(text, styles.letterSpacing, baseline);\n                        const textShadows: TextShadow = styles.textShadow;\n\n                        if (textShadows.length && text.text.trim().length) {\n                            textShadows\n                                .slice(0)\n                                .reverse()\n                                .forEach((textShadow) => {\n                                    this.ctx.shadowColor = asString(textShadow.color);\n                                    this.ctx.shadowOffsetX = textShadow.offsetX.number * this.options.scale;\n                                    this.ctx.shadowOffsetY = textShadow.offsetY.number * this.options.scale;\n                                    this.ctx.shadowBlur = textShadow.blur.number;\n\n                                    this.renderTextWithLetterSpacing(text, styles.letterSpacing, baseline);\n                                });\n\n                            this.ctx.shadowColor = '';\n                            this.ctx.shadowOffsetX = 0;\n                            this.ctx.shadowOffsetY = 0;\n                            this.ctx.shadowBlur = 0;\n                        }\n\n                        if (styles.textDecorationLine.length) {\n                            this.ctx.fillStyle = asString(styles.textDecorationColor || styles.color);\n                            styles.textDecorationLine.forEach((textDecorationLine) => {\n                                switch (textDecorationLine) {\n                                    case TEXT_DECORATION_LINE.UNDERLINE:\n                                        // Draws a line at the baseline of the font\n                                        // TODO As some browsers display the line as more than 1px if the font-size is big,\n                                        // need to take that into account both in position and size\n                                        this.ctx.fillRect(\n                                            text.bounds.left,\n                                            Math.round(text.bounds.top + baseline),\n                                            text.bounds.width,\n                                            1\n                                        );\n\n                                        break;\n                                    case TEXT_DECORATION_LINE.OVERLINE:\n                                        this.ctx.fillRect(\n                                            text.bounds.left,\n                                            Math.round(text.bounds.top),\n                                            text.bounds.width,\n                                            1\n                                        );\n                                        break;\n                                    case TEXT_DECORATION_LINE.LINE_THROUGH:\n                                        // TODO try and find exact position for line-through\n                                        this.ctx.fillRect(\n                                            text.bounds.left,\n                                            Math.ceil(text.bounds.top + middle),\n                                            text.bounds.width,\n                                            1\n                                        );\n                                        break;\n                                }\n                            });\n                        }\n                        break;\n                    case PAINT_ORDER_LAYER.STROKE:\n                        if (styles.webkitTextStrokeWidth && text.text.trim().length) {\n                            this.ctx.strokeStyle = asString(styles.webkitTextStrokeColor);\n                            this.ctx.lineWidth = styles.webkitTextStrokeWidth;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            this.ctx.lineJoin = !!(window as any).chrome ? 'miter' : 'round';\n                            this.ctx.strokeText(text.text, text.bounds.left, text.bounds.top + baseline);\n                        }\n                        this.ctx.strokeStyle = '';\n                        this.ctx.lineWidth = 0;\n                        this.ctx.lineJoin = 'miter';\n                        break;\n                }\n            });\n        });\n    }\n\n    renderReplacedElement(\n        container: ReplacedElementContainer,\n        curves: BoundCurves,\n        image: HTMLImageElement | HTMLCanvasElement\n    ): void {\n        if (image && container.intrinsicWidth > 0 && container.intrinsicHeight > 0) {\n            const box = contentBox(container);\n            const path = calculatePaddingBoxPath(curves);\n            this.path(path);\n            this.ctx.save();\n            this.ctx.clip();\n            this.ctx.drawImage(\n                image,\n                0,\n                0,\n                container.intrinsicWidth,\n                container.intrinsicHeight,\n                box.left,\n                box.top,\n                box.width,\n                box.height\n            );\n            this.ctx.restore();\n        }\n    }\n\n    async renderNodeContent(paint: ElementPaint): Promise<void> {\n        this.applyEffects(paint.getEffects(EffectTarget.CONTENT));\n        const container = paint.container;\n        const curves = paint.curves;\n        const styles = container.styles;\n        for (const child of container.textNodes) {\n            await this.renderTextNode(child, styles);\n        }\n\n        if (container instanceof ImageElementContainer) {\n            try {\n                const image = await this.context.cache.match(container.src);\n                this.renderReplacedElement(container, curves, image);\n            } catch (e) {\n                this.context.logger.error(`Error loading image ${container.src}`);\n            }\n        }\n\n        if (container instanceof CanvasElementContainer) {\n            this.renderReplacedElement(container, curves, container.canvas);\n        }\n\n        if (container instanceof SVGElementContainer) {\n            try {\n                const image = await this.context.cache.match(container.svg);\n                this.renderReplacedElement(container, curves, image);\n            } catch (e) {\n                this.context.logger.error(`Error loading svg ${container.svg.substring(0, 255)}`);\n            }\n        }\n\n        if (container instanceof IFrameElementContainer && container.tree) {\n            const iframeRenderer = new CanvasRenderer(this.context, {\n                scale: this.options.scale,\n                backgroundColor: container.backgroundColor,\n                x: 0,\n                y: 0,\n                width: container.width,\n                height: container.height\n            });\n\n            const canvas = await iframeRenderer.render(container.tree);\n            if (container.width && container.height) {\n                this.ctx.drawImage(\n                    canvas,\n                    0,\n                    0,\n                    container.width,\n                    container.height,\n                    container.bounds.left,\n                    container.bounds.top,\n                    container.bounds.width,\n                    container.bounds.height\n                );\n            }\n        }\n\n        if (container instanceof InputElementContainer) {\n            const size = Math.min(container.bounds.width, container.bounds.height);\n\n            if (container.type === CHECKBOX) {\n                if (container.checked) {\n                    this.ctx.save();\n                    this.path([\n                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79),\n                        new Vector(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549),\n                        new Vector(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071),\n                        new Vector(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649),\n                        new Vector(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23),\n                        new Vector(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085),\n                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)\n                    ]);\n\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                }\n            } else if (container.type === RADIO) {\n                if (container.checked) {\n                    this.ctx.save();\n                    this.ctx.beginPath();\n                    this.ctx.arc(\n                        container.bounds.left + size / 2,\n                        container.bounds.top + size / 2,\n                        size / 4,\n                        0,\n                        Math.PI * 2,\n                        true\n                    );\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                }\n            }\n        }\n\n        if (isTextInputElement(container) && container.value.length) {\n            const [fontFamily, fontSize] = this.createFontStyle(styles);\n            const {baseline} = this.fontMetrics.getMetrics(fontFamily, fontSize);\n\n            this.ctx.font = fontFamily;\n            this.ctx.fillStyle = asString(styles.color);\n\n            this.ctx.textBaseline = 'alphabetic';\n            this.ctx.textAlign = canvasTextAlign(container.styles.textAlign);\n\n            const bounds = contentBox(container);\n\n            let x = 0;\n\n            switch (container.styles.textAlign) {\n                case TEXT_ALIGN.CENTER:\n                    x += bounds.width / 2;\n                    break;\n                case TEXT_ALIGN.RIGHT:\n                    x += bounds.width;\n                    break;\n            }\n\n            const textBounds = bounds.add(x, 0, 0, -bounds.height / 2 + 1);\n\n            this.ctx.save();\n            this.path([\n                new Vector(bounds.left, bounds.top),\n                new Vector(bounds.left + bounds.width, bounds.top),\n                new Vector(bounds.left + bounds.width, bounds.top + bounds.height),\n                new Vector(bounds.left, bounds.top + bounds.height)\n            ]);\n\n            this.ctx.clip();\n            this.renderTextWithLetterSpacing(\n                new TextBounds(container.value, textBounds),\n                styles.letterSpacing,\n                baseline\n            );\n            this.ctx.restore();\n            this.ctx.textBaseline = 'alphabetic';\n            this.ctx.textAlign = 'left';\n        }\n\n        if (contains(container.styles.display, DISPLAY.LIST_ITEM)) {\n            if (container.styles.listStyleImage !== null) {\n                const img = container.styles.listStyleImage;\n                if (img.type === CSSImageType.URL) {\n                    let image;\n                    const url = (img as CSSURLImage).url;\n                    try {\n                        image = await this.context.cache.match(url);\n                        this.ctx.drawImage(image, container.bounds.left - (image.width + 10), container.bounds.top);\n                    } catch (e) {\n                        this.context.logger.error(`Error loading list-style-image ${url}`);\n                    }\n                }\n            } else if (paint.listValue && container.styles.listStyleType !== LIST_STYLE_TYPE.NONE) {\n                const [fontFamily] = this.createFontStyle(styles);\n\n                this.ctx.font = fontFamily;\n                this.ctx.fillStyle = asString(styles.color);\n\n                this.ctx.textBaseline = 'middle';\n                this.ctx.textAlign = 'right';\n                const bounds = new Bounds(\n                    container.bounds.left,\n                    container.bounds.top + getAbsoluteValue(container.styles.paddingTop, container.bounds.width),\n                    container.bounds.width,\n                    computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 1\n                );\n\n                this.renderTextWithLetterSpacing(\n                    new TextBounds(paint.listValue, bounds),\n                    styles.letterSpacing,\n                    computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 2\n                );\n                this.ctx.textBaseline = 'bottom';\n                this.ctx.textAlign = 'left';\n            }\n        }\n    }\n\n    async renderStackContent(stack: StackingContext): Promise<void> {\n        if (contains(stack.element.container.flags, FLAGS.DEBUG_RENDER)) {\n            debugger;\n        }\n        // https://www.w3.org/TR/css-position-3/#painting-order\n        // 1. the background and borders of the element forming the stacking context.\n        await this.renderNodeBackgroundAndBorders(stack.element);\n        // 2. the child stacking contexts with negative stack levels (most negative first).\n        for (const child of stack.negativeZIndex) {\n            await this.renderStack(child);\n        }\n        // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n        await this.renderNodeContent(stack.element);\n\n        for (const child of stack.nonInlineLevel) {\n            await this.renderNode(child);\n        }\n        // 4. All non-positioned floating descendants, in tree order. For each one of these,\n        // treat the element as if it created a new stacking context, but any positioned descendants and descendants\n        // which actually create a new stacking context should be considered part of the parent stacking context,\n        // not this new one.\n        for (const child of stack.nonPositionedFloats) {\n            await this.renderStack(child);\n        }\n        // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n        for (const child of stack.nonPositionedInlineLevel) {\n            await this.renderStack(child);\n        }\n        for (const child of stack.inlineLevel) {\n            await this.renderNode(child);\n        }\n        // 6. All positioned, opacity or transform descendants, in tree order that fall into the following categories:\n        //  All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order.\n        //  For those with 'z-index: auto', treat the element as if it created a new stacking context,\n        //  but any positioned descendants and descendants which actually create a new stacking context should be\n        //  considered part of the parent stacking context, not this new one. For those with 'z-index: 0',\n        //  treat the stacking context generated atomically.\n        //\n        //  All opacity descendants with opacity less than 1\n        //\n        //  All transform descendants with transform other than none\n        for (const child of stack.zeroOrAutoZIndexOrTransformedOrOpacity) {\n            await this.renderStack(child);\n        }\n        // 7. Stacking contexts formed by positioned descendants with z-indices greater than or equal to 1 in z-index\n        // order (smallest first) then tree order.\n        for (const child of stack.positiveZIndex) {\n            await this.renderStack(child);\n        }\n    }\n\n    mask(paths: Path[]): void {\n        this.ctx.beginPath();\n        this.ctx.moveTo(0, 0);\n        this.ctx.lineTo(this.canvas.width, 0);\n        this.ctx.lineTo(this.canvas.width, this.canvas.height);\n        this.ctx.lineTo(0, this.canvas.height);\n        this.ctx.lineTo(0, 0);\n        this.formatPath(paths.slice(0).reverse());\n        this.ctx.closePath();\n    }\n\n    path(paths: Path[]): void {\n        this.ctx.beginPath();\n        this.formatPath(paths);\n        this.ctx.closePath();\n    }\n\n    formatPath(paths: Path[]): void {\n        paths.forEach((point, index) => {\n            const start: Vector = isBezierCurve(point) ? point.start : point;\n            if (index === 0) {\n                this.ctx.moveTo(start.x, start.y);\n            } else {\n                this.ctx.lineTo(start.x, start.y);\n            }\n\n            if (isBezierCurve(point)) {\n                this.ctx.bezierCurveTo(\n                    point.startControl.x,\n                    point.startControl.y,\n                    point.endControl.x,\n                    point.endControl.y,\n                    point.end.x,\n                    point.end.y\n                );\n            }\n        });\n    }\n\n    renderRepeat(path: Path[], pattern: CanvasPattern | CanvasGradient, offsetX: number, offsetY: number): void {\n        this.path(path);\n        this.ctx.fillStyle = pattern;\n        this.ctx.translate(offsetX, offsetY);\n        this.ctx.fill();\n        this.ctx.translate(-offsetX, -offsetY);\n    }\n\n    resizeImage(image: HTMLImageElement, width: number, height: number): HTMLCanvasElement | HTMLImageElement {\n        if (image.width === width && image.height === height) {\n            return image;\n        }\n\n        const ownerDocument = this.canvas.ownerDocument ?? document;\n        const canvas = ownerDocument.createElement('canvas');\n        canvas.width = Math.max(1, width);\n        canvas.height = Math.max(1, height);\n        const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);\n        return canvas;\n    }\n\n    async renderBackgroundImage(container: ElementContainer): Promise<void> {\n        let index = container.styles.backgroundImage.length - 1;\n        for (const backgroundImage of container.styles.backgroundImage.slice(0).reverse()) {\n            if (backgroundImage.type === CSSImageType.URL) {\n                let image;\n                const url = (backgroundImage as CSSURLImage).url;\n                try {\n                    image = await this.context.cache.match(url);\n                } catch (e) {\n                    this.context.logger.error(`Error loading background-image ${url}`);\n                }\n\n                if (image) {\n                    const [path, x, y, width, height] = calculateBackgroundRendering(container, index, [\n                        image.width,\n                        image.height,\n                        image.width / image.height\n                    ]);\n                    const pattern = this.ctx.createPattern(\n                        this.resizeImage(image, width, height),\n                        'repeat'\n                    ) as CanvasPattern;\n                    this.renderRepeat(path, pattern, x, y);\n                }\n            } else if (isLinearGradient(backgroundImage)) {\n                const [path, x, y, width, height] = calculateBackgroundRendering(container, index, [null, null, null]);\n                const [lineLength, x0, x1, y0, y1] = calculateGradientDirection(backgroundImage.angle, width, height);\n\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n                const gradient = ctx.createLinearGradient(x0, y0, x1, y1);\n\n                processColorStops(backgroundImage.stops, lineLength).forEach((colorStop) =>\n                    gradient.addColorStop(colorStop.stop, asString(colorStop.color))\n                );\n\n                ctx.fillStyle = gradient;\n                ctx.fillRect(0, 0, width, height);\n                if (width > 0 && height > 0) {\n                    const pattern = this.ctx.createPattern(canvas, 'repeat') as CanvasPattern;\n                    this.renderRepeat(path, pattern, x, y);\n                }\n            } else if (isRadialGradient(backgroundImage)) {\n                const [path, left, top, width, height] = calculateBackgroundRendering(container, index, [\n                    null,\n                    null,\n                    null\n                ]);\n                const position = backgroundImage.position.length === 0 ? [FIFTY_PERCENT] : backgroundImage.position;\n                const x = getAbsoluteValue(position[0], width);\n                const y = getAbsoluteValue(position[position.length - 1], height);\n\n                const [rx, ry] = calculateRadius(backgroundImage, x, y, width, height);\n                if (rx > 0 && ry > 0) {\n                    const radialGradient = this.ctx.createRadialGradient(left + x, top + y, 0, left + x, top + y, rx);\n\n                    processColorStops(backgroundImage.stops, rx * 2).forEach((colorStop) =>\n                        radialGradient.addColorStop(colorStop.stop, asString(colorStop.color))\n                    );\n\n                    this.path(path);\n                    this.ctx.fillStyle = radialGradient;\n                    if (rx !== ry) {\n                        // transforms for elliptical radial gradient\n                        const midX = container.bounds.left + 0.5 * container.bounds.width;\n                        const midY = container.bounds.top + 0.5 * container.bounds.height;\n                        const f = ry / rx;\n                        const invF = 1 / f;\n\n                        this.ctx.save();\n                        this.ctx.translate(midX, midY);\n                        this.ctx.transform(1, 0, 0, f, 0, 0);\n                        this.ctx.translate(-midX, -midY);\n\n                        this.ctx.fillRect(left, invF * (top - midY) + midY, width, height * invF);\n                        this.ctx.restore();\n                    } else {\n                        this.ctx.fill();\n                    }\n                }\n            }\n            index--;\n        }\n    }\n\n    async renderSolidBorder(color: Color, side: number, curvePoints: BoundCurves): Promise<void> {\n        this.path(parsePathForBorder(curvePoints, side));\n        this.ctx.fillStyle = asString(color);\n        this.ctx.fill();\n    }\n\n    async renderDoubleBorder(color: Color, width: number, side: number, curvePoints: BoundCurves): Promise<void> {\n        if (width < 3) {\n            await this.renderSolidBorder(color, side, curvePoints);\n            return;\n        }\n\n        const outerPaths = parsePathForBorderDoubleOuter(curvePoints, side);\n        this.path(outerPaths);\n        this.ctx.fillStyle = asString(color);\n        this.ctx.fill();\n        const innerPaths = parsePathForBorderDoubleInner(curvePoints, side);\n        this.path(innerPaths);\n        this.ctx.fill();\n    }\n\n    async renderNodeBackgroundAndBorders(paint: ElementPaint): Promise<void> {\n        this.applyEffects(paint.getEffects(EffectTarget.BACKGROUND_BORDERS));\n        const styles = paint.container.styles;\n        const hasBackground = !isTransparent(styles.backgroundColor) || styles.backgroundImage.length;\n\n        const borders = [\n            {style: styles.borderTopStyle, color: styles.borderTopColor, width: styles.borderTopWidth},\n            {style: styles.borderRightStyle, color: styles.borderRightColor, width: styles.borderRightWidth},\n            {style: styles.borderBottomStyle, color: styles.borderBottomColor, width: styles.borderBottomWidth},\n            {style: styles.borderLeftStyle, color: styles.borderLeftColor, width: styles.borderLeftWidth}\n        ];\n\n        const backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(\n            getBackgroundValueForIndex(styles.backgroundClip, 0),\n            paint.curves\n        );\n\n        if (hasBackground || styles.boxShadow.length) {\n            this.ctx.save();\n            this.path(backgroundPaintingArea);\n            this.ctx.clip();\n\n            if (!isTransparent(styles.backgroundColor)) {\n                this.ctx.fillStyle = asString(styles.backgroundColor);\n                this.ctx.fill();\n            }\n\n            await this.renderBackgroundImage(paint.container);\n\n            this.ctx.restore();\n\n            styles.boxShadow\n                .slice(0)\n                .reverse()\n                .forEach((shadow) => {\n                    this.ctx.save();\n                    const borderBoxArea = calculateBorderBoxPath(paint.curves);\n                    const maskOffset = shadow.inset ? 0 : MASK_OFFSET;\n                    const shadowPaintingArea = transformPath(\n                        borderBoxArea,\n                        -maskOffset + (shadow.inset ? 1 : -1) * shadow.spread.number,\n                        (shadow.inset ? 1 : -1) * shadow.spread.number,\n                        shadow.spread.number * (shadow.inset ? -2 : 2),\n                        shadow.spread.number * (shadow.inset ? -2 : 2)\n                    );\n\n                    if (shadow.inset) {\n                        this.path(borderBoxArea);\n                        this.ctx.clip();\n                        this.mask(shadowPaintingArea);\n                    } else {\n                        this.mask(borderBoxArea);\n                        this.ctx.clip();\n                        this.path(shadowPaintingArea);\n                    }\n\n                    this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;\n                    this.ctx.shadowOffsetY = shadow.offsetY.number;\n                    this.ctx.shadowColor = asString(shadow.color);\n                    this.ctx.shadowBlur = shadow.blur.number;\n                    this.ctx.fillStyle = shadow.inset ? asString(shadow.color) : 'rgba(0,0,0,1)';\n\n                    this.ctx.fill();\n                    this.ctx.restore();\n                });\n        }\n\n        let side = 0;\n        for (const border of borders) {\n            if (border.style !== BORDER_STYLE.NONE && !isTransparent(border.color) && border.width > 0) {\n                if (border.style === BORDER_STYLE.DASHED) {\n                    await this.renderDashedDottedBorder(\n                        border.color,\n                        border.width,\n                        side,\n                        paint.curves,\n                        BORDER_STYLE.DASHED\n                    );\n                } else if (border.style === BORDER_STYLE.DOTTED) {\n                    await this.renderDashedDottedBorder(\n                        border.color,\n                        border.width,\n                        side,\n                        paint.curves,\n                        BORDER_STYLE.DOTTED\n                    );\n                } else if (border.style === BORDER_STYLE.DOUBLE) {\n                    await this.renderDoubleBorder(border.color, border.width, side, paint.curves);\n                } else {\n                    await this.renderSolidBorder(border.color, side, paint.curves);\n                }\n            }\n            side++;\n        }\n    }\n\n    async renderDashedDottedBorder(\n        color: Color,\n        width: number,\n        side: number,\n        curvePoints: BoundCurves,\n        style: BORDER_STYLE\n    ): Promise<void> {\n        this.ctx.save();\n\n        const strokePaths = parsePathForBorderStroke(curvePoints, side);\n        const boxPaths = parsePathForBorder(curvePoints, side);\n\n        if (style === BORDER_STYLE.DASHED) {\n            this.path(boxPaths);\n            this.ctx.clip();\n        }\n\n        let startX, startY, endX, endY;\n        if (isBezierCurve(boxPaths[0])) {\n            startX = (boxPaths[0] as BezierCurve).start.x;\n            startY = (boxPaths[0] as BezierCurve).start.y;\n        } else {\n            startX = (boxPaths[0] as Vector).x;\n            startY = (boxPaths[0] as Vector).y;\n        }\n        if (isBezierCurve(boxPaths[1])) {\n            endX = (boxPaths[1] as BezierCurve).end.x;\n            endY = (boxPaths[1] as BezierCurve).end.y;\n        } else {\n            endX = (boxPaths[1] as Vector).x;\n            endY = (boxPaths[1] as Vector).y;\n        }\n\n        let length;\n        if (side === 0 || side === 2) {\n            length = Math.abs(startX - endX);\n        } else {\n            length = Math.abs(startY - endY);\n        }\n\n        this.ctx.beginPath();\n        if (style === BORDER_STYLE.DOTTED) {\n            this.formatPath(strokePaths);\n        } else {\n            this.formatPath(boxPaths.slice(0, 2));\n        }\n\n        let dashLength = width < 3 ? width * 3 : width * 2;\n        let spaceLength = width < 3 ? width * 2 : width;\n        if (style === BORDER_STYLE.DOTTED) {\n            dashLength = width;\n            spaceLength = width;\n        }\n\n        let useLineDash = true;\n        if (length <= dashLength * 2) {\n            useLineDash = false;\n        } else if (length <= dashLength * 2 + spaceLength) {\n            const multiplier = length / (2 * dashLength + spaceLength);\n            dashLength *= multiplier;\n            spaceLength *= multiplier;\n        } else {\n            const numberOfDashes = Math.floor((length + spaceLength) / (dashLength + spaceLength));\n            const minSpace = (length - numberOfDashes * dashLength) / (numberOfDashes - 1);\n            const maxSpace = (length - (numberOfDashes + 1) * dashLength) / numberOfDashes;\n            spaceLength =\n                maxSpace <= 0 || Math.abs(spaceLength - minSpace) < Math.abs(spaceLength - maxSpace)\n                    ? minSpace\n                    : maxSpace;\n        }\n\n        if (useLineDash) {\n            if (style === BORDER_STYLE.DOTTED) {\n                this.ctx.setLineDash([0, dashLength + spaceLength]);\n            } else {\n                this.ctx.setLineDash([dashLength, spaceLength]);\n            }\n        }\n\n        if (style === BORDER_STYLE.DOTTED) {\n            this.ctx.lineCap = 'round';\n            this.ctx.lineWidth = width;\n        } else {\n            this.ctx.lineWidth = width * 2 + 1.1;\n        }\n        this.ctx.strokeStyle = asString(color);\n        this.ctx.stroke();\n        this.ctx.setLineDash([]);\n\n        // dashed round edge gap\n        if (style === BORDER_STYLE.DASHED) {\n            if (isBezierCurve(boxPaths[0])) {\n                const path1 = boxPaths[3] as BezierCurve;\n                const path2 = boxPaths[0] as BezierCurve;\n                this.ctx.beginPath();\n                this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);\n                this.ctx.stroke();\n            }\n            if (isBezierCurve(boxPaths[1])) {\n                const path1 = boxPaths[1] as BezierCurve;\n                const path2 = boxPaths[2] as BezierCurve;\n                this.ctx.beginPath();\n                this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);\n                this.ctx.stroke();\n            }\n        }\n\n        this.ctx.restore();\n    }\n\n    async render(element: ElementContainer): Promise<HTMLCanvasElement> {\n        if (this.options.backgroundColor) {\n            this.ctx.fillStyle = asString(this.options.backgroundColor);\n            this.ctx.fillRect(this.options.x, this.options.y, this.options.width, this.options.height);\n        }\n\n        const stack = parseStackingContexts(element);\n\n        await this.renderStack(stack);\n        this.applyEffects([]);\n        return this.canvas;\n    }\n}\n\nconst isTextInputElement = (\n    container: ElementContainer\n): container is InputElementContainer | TextareaElementContainer | SelectElementContainer => {\n    if (container instanceof TextareaElementContainer) {\n        return true;\n    } else if (container instanceof SelectElementContainer) {\n        return true;\n    } else if (container instanceof InputElementContainer && container.type !== RADIO && container.type !== CHECKBOX) {\n        return true;\n    }\n    return false;\n};\n\nconst calculateBackgroundCurvedPaintingArea = (clip: BACKGROUND_CLIP, curves: BoundCurves): Path[] => {\n    switch (clip) {\n        case BACKGROUND_CLIP.BORDER_BOX:\n            return calculateBorderBoxPath(curves);\n        case BACKGROUND_CLIP.CONTENT_BOX:\n            return calculateContentBoxPath(curves);\n        case BACKGROUND_CLIP.PADDING_BOX:\n        default:\n            return calculatePaddingBoxPath(curves);\n    }\n};\n\nconst canvasTextAlign = (textAlign: TEXT_ALIGN): CanvasTextAlign => {\n    switch (textAlign) {\n        case TEXT_ALIGN.CENTER:\n            return 'center';\n        case TEXT_ALIGN.RIGHT:\n            return 'right';\n        case TEXT_ALIGN.LEFT:\n        default:\n            return 'left';\n    }\n};\n\n// see https://github.com/niklasvh/html2canvas/pull/2645\nconst iOSBrokenFonts = ['-apple-system', 'system-ui'];\n\nconst fixIOSSystemFonts = (fontFamilies: string[]): string[] => {\n    return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent)\n        ? fontFamilies.filter((fontFamily) => iOSBrokenFonts.indexOf(fontFamily) === -1)\n        : fontFamilies;\n};\n","import {RenderConfigurations} from './canvas-renderer';\nimport {createForeignObjectSVG} from '../../core/features';\nimport {asString} from '../../css/types/color';\nimport {Renderer} from '../renderer';\nimport {Context} from '../../core/context';\n\nexport class ForeignObjectRenderer extends Renderer {\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n    options: RenderConfigurations;\n\n    constructor(context: Context, options: RenderConfigurations) {\n        super(context, options);\n        this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n        this.options = options;\n        this.canvas.width = Math.floor(options.width * options.scale);\n        this.canvas.height = Math.floor(options.height * options.scale);\n        this.canvas.style.width = `${options.width}px`;\n        this.canvas.style.height = `${options.height}px`;\n\n        this.ctx.scale(this.options.scale, this.options.scale);\n        this.ctx.translate(-options.x, -options.y);\n        this.context.logger.debug(\n            `EXPERIMENTAL ForeignObject renderer initialized (${options.width}x${options.height} at ${options.x},${options.y}) with scale ${options.scale}`\n        );\n    }\n\n    async render(element: HTMLElement): Promise<HTMLCanvasElement> {\n        const svg = createForeignObjectSVG(\n            this.options.width * this.options.scale,\n            this.options.height * this.options.scale,\n            this.options.scale,\n            this.options.scale,\n            element\n        );\n\n        const img = await loadSerializedSVG(svg);\n\n        if (this.options.backgroundColor) {\n            this.ctx.fillStyle = asString(this.options.backgroundColor);\n            this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale);\n        }\n\n        this.ctx.drawImage(img, -this.options.x * this.options.scale, -this.options.y * this.options.scale);\n\n        return this.canvas;\n    }\n}\n\nexport const loadSerializedSVG = (svg: Node): Promise<HTMLImageElement> =>\n    new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = reject;\n\n        img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(new XMLSerializer().serializeToString(svg))}`;\n    });\n","export interface LoggerOptions {\n    id: string;\n    enabled: boolean;\n}\n\nexport class Logger {\n    static instances: {[key: string]: Logger} = {};\n\n    private readonly id: string;\n    private readonly enabled: boolean;\n    private readonly start: number;\n\n    constructor({id, enabled}: LoggerOptions) {\n        this.id = id;\n        this.enabled = enabled;\n        this.start = Date.now();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    debug(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.debug === 'function') {\n                // eslint-disable-next-line no-console\n                console.debug(this.id, `${this.getTime()}ms`, ...args);\n            } else {\n                this.info(...args);\n            }\n        }\n    }\n\n    getTime(): number {\n        return Date.now() - this.start;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    info(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.info === 'function') {\n                // eslint-disable-next-line no-console\n                console.info(this.id, `${this.getTime()}ms`, ...args);\n            }\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    warn(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.warn === 'function') {\n                // eslint-disable-next-line no-console\n                console.warn(this.id, `${this.getTime()}ms`, ...args);\n            } else {\n                this.info(...args);\n            }\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.error === 'function') {\n                // eslint-disable-next-line no-console\n                console.error(this.id, `${this.getTime()}ms`, ...args);\n            } else {\n                this.info(...args);\n            }\n        }\n    }\n}\n","import {Logger} from './logger';\nimport {Cache, ResourceOptions} from './cache-storage';\nimport {Bounds} from '../css/layout/bounds';\n\nexport type ContextOptions = {\n    logging: boolean;\n    cache?: Cache;\n} & ResourceOptions;\n\nexport class Context {\n    private readonly instanceName = `#${Context.instanceCount++}`;\n    readonly logger: Logger;\n    readonly cache: Cache;\n\n    private static instanceCount = 1;\n\n    constructor(options: ContextOptions, public windowBounds: Bounds) {\n        this.logger = new Logger({id: this.instanceName, enabled: options.logging});\n        this.cache = options.cache ?? new Cache(this, options);\n    }\n}\n","import {Bounds, parseBounds, parseDocumentSize} from './css/layout/bounds';\nimport {COLORS, isTransparent, parseColor} from './css/types/color';\nimport {CloneConfigurations, CloneOptions, DocumentCloner, WindowOptions} from './dom/document-cloner';\nimport {isBodyElement, isHTMLElement, parseTree} from './dom/node-parser';\nimport {CacheStorage} from './core/cache-storage';\nimport {CanvasRenderer, RenderConfigurations, RenderOptions} from './render/canvas/canvas-renderer';\nimport {ForeignObjectRenderer} from './render/canvas/foreignobject-renderer';\nimport {Context, ContextOptions} from './core/context';\n\nexport type Options = CloneOptions &\n    WindowOptions &\n    RenderOptions &\n    ContextOptions & {\n        backgroundColor: string | null;\n        foreignObjectRendering: boolean;\n        removeContainer?: boolean;\n    };\n\nconst html2canvas = (element: HTMLElement, options: Partial<Options> = {}): Promise<HTMLCanvasElement> => {\n    return renderElement(element, options);\n};\n\nexport default html2canvas;\n\nif (typeof window !== 'undefined') {\n    CacheStorage.setContext(window);\n}\n\nconst renderElement = async (element: HTMLElement, opts: Partial<Options>): Promise<HTMLCanvasElement> => {\n    if (!element || typeof element !== 'object') {\n        return Promise.reject('Invalid element provided as first argument');\n    }\n    const ownerDocument = element.ownerDocument;\n\n    if (!ownerDocument) {\n        throw new Error(`Element is not attached to a Document`);\n    }\n\n    const defaultView = ownerDocument.defaultView;\n\n    if (!defaultView) {\n        throw new Error(`Document is not attached to a Window`);\n    }\n\n    const resourceOptions = {\n        allowTaint: opts.allowTaint ?? false,\n        imageTimeout: opts.imageTimeout ?? 15000,\n        proxy: opts.proxy,\n        useCORS: opts.useCORS ?? false\n    };\n\n    const contextOptions = {\n        logging: opts.logging ?? true,\n        cache: opts.cache,\n        ...resourceOptions\n    };\n\n    const windowOptions = {\n        windowWidth: opts.windowWidth ?? defaultView.innerWidth,\n        windowHeight: opts.windowHeight ?? defaultView.innerHeight,\n        scrollX: opts.scrollX ?? defaultView.pageXOffset,\n        scrollY: opts.scrollY ?? defaultView.pageYOffset\n    };\n\n    const windowBounds = new Bounds(\n        windowOptions.scrollX,\n        windowOptions.scrollY,\n        windowOptions.windowWidth,\n        windowOptions.windowHeight\n    );\n\n    const context = new Context(contextOptions, windowBounds);\n\n    const foreignObjectRendering = opts.foreignObjectRendering ?? false;\n\n    const cloneOptions: CloneConfigurations = {\n        allowTaint: opts.allowTaint ?? false,\n        onclone: opts.onclone,\n        ignoreElements: opts.ignoreElements,\n        inlineImages: foreignObjectRendering,\n        copyStyles: foreignObjectRendering\n    };\n\n    context.logger.debug(\n        `Starting document clone with size ${windowBounds.width}x${\n            windowBounds.height\n        } scrolled to ${-windowBounds.left},${-windowBounds.top}`\n    );\n\n    const documentCloner = new DocumentCloner(context, element, cloneOptions);\n    const clonedElement = documentCloner.clonedReferenceElement;\n    if (!clonedElement) {\n        return Promise.reject(`Unable to find element in cloned iframe`);\n    }\n\n    const container = await documentCloner.toIFrame(ownerDocument, windowBounds);\n\n    const {width, height, left, top} =\n        isBodyElement(clonedElement) || isHTMLElement(clonedElement)\n            ? parseDocumentSize(clonedElement.ownerDocument)\n            : parseBounds(context, clonedElement);\n\n    const backgroundColor = parseBackgroundColor(context, clonedElement, opts.backgroundColor);\n\n    const renderOptions: RenderConfigurations = {\n        canvas: opts.canvas,\n        backgroundColor,\n        scale: opts.scale ?? defaultView.devicePixelRatio ?? 1,\n        x: (opts.x ?? 0) + left,\n        y: (opts.y ?? 0) + top,\n        width: opts.width ?? Math.ceil(width),\n        height: opts.height ?? Math.ceil(height)\n    };\n\n    let canvas;\n\n    if (foreignObjectRendering) {\n        context.logger.debug(`Document cloned, using foreign object rendering`);\n        const renderer = new ForeignObjectRenderer(context, renderOptions);\n        canvas = await renderer.render(clonedElement);\n    } else {\n        context.logger.debug(\n            `Document cloned, element located at ${left},${top} with size ${width}x${height} using computed rendering`\n        );\n\n        context.logger.debug(`Starting DOM parsing`);\n        const root = parseTree(context, clonedElement);\n\n        if (backgroundColor === root.styles.backgroundColor) {\n            root.styles.backgroundColor = COLORS.TRANSPARENT;\n        }\n\n        context.logger.debug(\n            `Starting renderer for element at ${renderOptions.x},${renderOptions.y} with size ${renderOptions.width}x${renderOptions.height}`\n        );\n\n        const renderer = new CanvasRenderer(context, renderOptions);\n        canvas = await renderer.render(root);\n    }\n\n    if (opts.removeContainer ?? true) {\n        if (!DocumentCloner.destroy(container)) {\n            context.logger.error(`Cannot detach cloned iframe as it is not in the DOM anymore`);\n        }\n    }\n\n    context.logger.debug(`Finished rendering`);\n    return canvas;\n};\n\nconst parseBackgroundColor = (context: Context, element: HTMLElement, backgroundColorOverride?: string | null) => {\n    const ownerDocument = element.ownerDocument;\n    // http://www.w3.org/TR/css3-background/#special-backgrounds\n    const documentBackgroundColor = ownerDocument.documentElement\n        ? parseColor(context, getComputedStyle(ownerDocument.documentElement).backgroundColor as string)\n        : COLORS.TRANSPARENT;\n    const bodyBackgroundColor = ownerDocument.body\n        ? parseColor(context, getComputedStyle(ownerDocument.body).backgroundColor as string)\n        : COLORS.TRANSPARENT;\n\n    const defaultBackgroundColor =\n        typeof backgroundColorOverride === 'string'\n            ? parseColor(context, backgroundColorOverride)\n            : backgroundColorOverride === null\n            ? COLORS.TRANSPARENT\n            : 0xffffffff;\n\n    return element === ownerDocument.documentElement\n        ? isTransparent(documentBackgroundColor)\n            ? isTransparent(bodyBackgroundColor)\n                ? defaultBackgroundColor\n                : bodyBackgroundColor\n            : documentBackgroundColor\n        : defaultBackgroundColor;\n};\n","/**\n * Returns true if the object is a function.\n * @param value The value to check\n */\nexport function isFunction(value: any): value is (...args: any[]) => any {\n  return typeof value === 'function';\n}\n","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\n\n/**\n * Handles an error on another job either with the user-configured {@link onUnhandledError},\n * or by throwing it on that new job so it can be picked up by `window.onerror`, `process.on('error')`, etc.\n *\n * This should be called whenever there is an error that is out-of-band with the subscription\n * or when an error hits a terminal boundary of the subscription and no error handler was provided.\n *\n * @param err the error to report\n */\nexport function reportUnhandledError(err: any) {\n  timeoutProvider.setTimeout(() => {\n    const { onUnhandledError } = config;\n    if (onUnhandledError) {\n      // Execute the user-configured error handler.\n      onUnhandledError(err);\n    } else {\n      // Throw so it is picked up by the runtime's uncaught error mechanism.\n      throw err;\n    }\n  });\n}\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","export const isArrayLike = (<T>(x: any): x is ArrayLike<T> => x && typeof x.length === 'number' && typeof x !== 'function');","import { createErrorClass } from './createErrorClass';\n\nexport interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (errors: any[]): UnsubscriptionError;\n}\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = createErrorClass(\n  (_super) =>\n    function UnsubscriptionErrorImpl(this: any, errors: (Error | string)[]) {\n      _super(this);\n      this.message = errors\n        ? `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}`\n        : '';\n      this.name = 'UnsubscriptionError';\n      this.errors = errors;\n    }\n);\n","import { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic, Unsubscribable } from './types';\nimport { arrRemove } from './util/arrRemove';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n */\nexport class Subscription implements SubscriptionLike {\n  public static EMPTY = (() => {\n    const empty = new Subscription();\n    empty.closed = true;\n    return empty;\n  })();\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   */\n  public closed = false;\n\n  private _parentage: Subscription[] | Subscription | null = null;\n\n  /**\n   * The list of registered finalizers to execute upon unsubscription. Adding and removing from this\n   * list occurs in the {@link #add} and {@link #remove} methods.\n   */\n  private _finalizers: Exclude<TeardownLogic, void>[] | null = null;\n\n  /**\n   * @param initialTeardown A function executed first as part of the finalization\n   * process that is kicked off when {@link #unsubscribe} is called.\n   */\n  constructor(private initialTeardown?: () => void) {}\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   */\n  unsubscribe(): void {\n    let errors: any[] | undefined;\n\n    if (!this.closed) {\n      this.closed = true;\n\n      // Remove this from it's parents.\n      const { _parentage } = this;\n      if (_parentage) {\n        this._parentage = null;\n        if (Array.isArray(_parentage)) {\n          for (const parent of _parentage) {\n            parent.remove(this);\n          }\n        } else {\n          _parentage.remove(this);\n        }\n      }\n\n      const { initialTeardown: initialFinalizer } = this;\n      if (isFunction(initialFinalizer)) {\n        try {\n          initialFinalizer();\n        } catch (e) {\n          errors = e instanceof UnsubscriptionError ? e.errors : [e];\n        }\n      }\n\n      const { _finalizers } = this;\n      if (_finalizers) {\n        this._finalizers = null;\n        for (const finalizer of _finalizers) {\n          try {\n            execFinalizer(finalizer);\n          } catch (err) {\n            errors = errors ?? [];\n            if (err instanceof UnsubscriptionError) {\n              errors = [...errors, ...err.errors];\n            } else {\n              errors.push(err);\n            }\n          }\n        }\n      }\n\n      if (errors) {\n        throw new UnsubscriptionError(errors);\n      }\n    }\n  }\n\n  /**\n   * Adds a finalizer to this subscription, so that finalization will be unsubscribed/called\n   * when this subscription is unsubscribed. If this subscription is already {@link #closed},\n   * because it has already been unsubscribed, then whatever finalizer is passed to it\n   * will automatically be executed (unless the finalizer itself is also a closed subscription).\n   *\n   * Closed Subscriptions cannot be added as finalizers to any subscription. Adding a closed\n   * subscription to a any subscription will result in no operation. (A noop).\n   *\n   * Adding a subscription to itself, or adding `null` or `undefined` will not perform any\n   * operation at all. (A noop).\n   *\n   * `Subscription` instances that are added to this instance will automatically remove themselves\n   * if they are unsubscribed. Functions and {@link Unsubscribable} objects that you wish to remove\n   * will need to be removed manually with {@link #remove}\n   *\n   * @param teardown The finalization logic to add to this subscription.\n   */\n  add(teardown: TeardownLogic): void {\n    // Only add the finalizer if it's not undefined\n    // and don't add a subscription to itself.\n    if (teardown && teardown !== this) {\n      if (this.closed) {\n        // If this subscription is already closed,\n        // execute whatever finalizer is handed to it automatically.\n        execFinalizer(teardown);\n      } else {\n        if (teardown instanceof Subscription) {\n          // We don't add closed subscriptions, and we don't add the same subscription\n          // twice. Subscription unsubscribe is idempotent.\n          if (teardown.closed || teardown._hasParent(this)) {\n            return;\n          }\n          teardown._addParent(this);\n        }\n        (this._finalizers = this._finalizers ?? []).push(teardown);\n      }\n    }\n  }\n\n  /**\n   * Checks to see if a this subscription already has a particular parent.\n   * This will signal that this subscription has already been added to the parent in question.\n   * @param parent the parent to check for\n   */\n  private _hasParent(parent: Subscription) {\n    const { _parentage } = this;\n    return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n  }\n\n  /**\n   * Adds a parent to this subscription so it can be removed from the parent if it\n   * unsubscribes on it's own.\n   *\n   * NOTE: THIS ASSUMES THAT {@link _hasParent} HAS ALREADY BEEN CHECKED.\n   * @param parent The parent subscription to add\n   */\n  private _addParent(parent: Subscription) {\n    const { _parentage } = this;\n    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n  }\n\n  /**\n   * Called on a child when it is removed via {@link #remove}.\n   * @param parent The parent to remove\n   */\n  private _removeParent(parent: Subscription) {\n    const { _parentage } = this;\n    if (_parentage === parent) {\n      this._parentage = null;\n    } else if (Array.isArray(_parentage)) {\n      arrRemove(_parentage, parent);\n    }\n  }\n\n  /**\n   * Removes a finalizer from this subscription that was previously added with the {@link #add} method.\n   *\n   * Note that `Subscription` instances, when unsubscribed, will automatically remove themselves\n   * from every other `Subscription` they have been added to. This means that using the `remove` method\n   * is not a common thing and should be used thoughtfully.\n   *\n   * If you add the same finalizer instance of a function or an unsubscribable object to a `Subscription` instance\n   * more than once, you will need to call `remove` the same number of times to remove all instances.\n   *\n   * All finalizer instances are removed to free up memory upon unsubscription.\n   *\n   * @param teardown The finalizer to remove from this subscription\n   */\n  remove(teardown: Exclude<TeardownLogic, void>): void {\n    const { _finalizers } = this;\n    _finalizers && arrRemove(_finalizers, teardown);\n\n    if (teardown instanceof Subscription) {\n      teardown._removeParent(this);\n    }\n  }\n}\n\nexport const EMPTY_SUBSCRIPTION = Subscription.EMPTY;\n\nexport function isSubscription(value: any): value is Subscription {\n  return (\n    value instanceof Subscription ||\n    (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe))\n  );\n}\n\nfunction execFinalizer(finalizer: Unsubscribable | (() => void)) {\n  if (isFunction(finalizer)) {\n    finalizer();\n  } else {\n    finalizer.unsubscribe();\n  }\n}\n","import { ReadableStreamLike } from '../types';\nimport { isFunction } from './isFunction';\n\nexport async function* readableStreamLikeToAsyncGenerator<T>(readableStream: ReadableStreamLike<T>): AsyncGenerator<T> {\n  const reader = readableStream.getReader();\n  try {\n    while (true) {\n      const { value, done } = await reader.read();\n      if (done) {\n        return;\n      }\n      yield value!;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport function isReadableStreamLike<T>(obj: any): obj is ReadableStreamLike<T> {\n  // We don't want to use instanceof checks because they would return\n  // false for instances from another Realm, like an <iframe>.\n  return isFunction(obj?.getReader);\n}\n","const isString = obj => typeof obj === 'string';\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\nconst makeString = object => {\n  if (object == null) return '';\n  return '' + object;\n};\nconst copy = (a, s, t) => {\n  a.forEach(m => {\n    if (s[m]) t[m] = s[m];\n  });\n};\nconst lastOfPathSeparatorRegExp = /###/g;\nconst cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;\nconst canNotTraverseDeeper = object => !object || isString(object);\nconst getLastOfPath = (object, path, Empty) => {\n  const stack = !isString(path) ? path : path.split('.');\n  let stackIndex = 0;\n  while (stackIndex < stack.length - 1) {\n    if (canNotTraverseDeeper(object)) return {};\n    const key = cleanKey(stack[stackIndex]);\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n    ++stackIndex;\n  }\n  if (canNotTraverseDeeper(object)) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack[stackIndex])\n  };\n};\nconst setPath = (object, path, newValue) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  if (obj !== undefined || path.length === 1) {\n    obj[k] = newValue;\n    return;\n  }\n  let e = path[path.length - 1];\n  let p = path.slice(0, path.length - 1);\n  let last = getLastOfPath(object, p, Object);\n  while (last.obj === undefined && p.length) {\n    e = `${p[p.length - 1]}.${e}`;\n    p = p.slice(0, p.length - 1);\n    last = getLastOfPath(object, p, Object);\n    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {\n      last.obj = undefined;\n    }\n  }\n  last.obj[`${last.k}.${e}`] = newValue;\n};\nconst pushPath = (object, path, newValue, concat) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = obj[k] || [];\n  obj[k].push(newValue);\n};\nconst getPath = (object, path) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path);\n  if (!obj) return undefined;\n  return obj[k];\n};\nconst getPathWithDefaults = (data, defaultData, key) => {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n};\nconst deepExtend = (target, source, overwrite) => {\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n};\nconst regexEscape = str => str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nconst escape = data => {\n  if (isString(data)) {\n    return data.replace(/[&<>\"'\\/]/g, s => _entityMap[s]);\n  }\n  return data;\n};\nclass RegExpCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.regExpMap = new Map();\n    this.regExpQueue = [];\n  }\n  getRegExp(pattern) {\n    const regExpFromCache = this.regExpMap.get(pattern);\n    if (regExpFromCache !== undefined) {\n      return regExpFromCache;\n    }\n    const regExpNew = new RegExp(pattern);\n    if (this.regExpQueue.length === this.capacity) {\n      this.regExpMap.delete(this.regExpQueue.shift());\n    }\n    this.regExpMap.set(pattern, regExpNew);\n    this.regExpQueue.push(pattern);\n    return regExpNew;\n  }\n}\nconst chars = [' ', ',', '?', '!', ';'];\nconst looksLikeObjectPathRegExpCache = new RegExpCache(20);\nconst looksLikeObjectPath = (key, nsSeparator, keySeparator) => {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);\n  if (possibleChars.length === 0) return true;\n  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\\\?' : c).join('|')})`);\n  let matched = !r.test(key);\n  if (!matched) {\n    const ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n};\nconst deepFind = function (obj, path) {\n  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  const tokens = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < tokens.length;) {\n    if (!current || typeof current !== 'object') {\n      return undefined;\n    }\n    let next;\n    let nextPath = '';\n    for (let j = i; j < tokens.length; ++j) {\n      if (j !== i) {\n        nextPath += keySeparator;\n      }\n      nextPath += tokens[j];\n      next = current[nextPath];\n      if (next !== undefined) {\n        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {\n          continue;\n        }\n        i += j - i + 1;\n        break;\n      }\n    }\n    current = next;\n  }\n  return current;\n};\nconst getCleanedCode = code => code && code.replace('_', '-');\n\nconst consoleLogger = {\n  type: 'logger',\n  log(args) {\n    this.output('log', args);\n  },\n  warn(args) {\n    this.output('warn', args);\n  },\n  error(args) {\n    this.output('error', args);\n  },\n  output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nclass Logger {\n  constructor(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.init(concreteLogger, options);\n  }\n  init(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n  log() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return this.forward(args, 'log', '', true);\n  }\n  warn() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return this.forward(args, 'warn', '', true);\n  }\n  error() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    return this.forward(args, 'error', '');\n  }\n  deprecate() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{\n        prefix: `${this.prefix}:${moduleName}:`\n      },\n      ...this.options\n    });\n  }\n  clone(options) {\n    options = options || this.options;\n    options.prefix = options.prefix || this.prefix;\n    return new Logger(this.logger, options);\n  }\n}\nvar baseLogger = new Logger();\n\nclass EventEmitter {\n  constructor() {\n    this.observers = {};\n  }\n  on(events, listener) {\n    events.split(' ').forEach(event => {\n      if (!this.observers[event]) this.observers[event] = new Map();\n      const numListeners = this.observers[event].get(listener) || 0;\n      this.observers[event].set(listener, numListeners + 1);\n    });\n    return this;\n  }\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n    this.observers[event].delete(listener);\n  }\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.observers[event]) {\n      const cloned = Array.from(this.observers[event].entries());\n      cloned.forEach(_ref => {\n        let [observer, numTimesAdded] = _ref;\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer(...args);\n        }\n      });\n    }\n    if (this.observers['*']) {\n      const cloned = Array.from(this.observers['*'].entries());\n      cloned.forEach(_ref2 => {\n        let [observer, numTimesAdded] = _ref2;\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer.apply(observer, [event, ...args]);\n        }\n      });\n    }\n  }\n}\n\nclass ResourceStore extends EventEmitter {\n  constructor(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    super();\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n  getResource(lng, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n    let path;\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    } else {\n      path = [lng, ns];\n      if (key) {\n        if (Array.isArray(key)) {\n          path.push(...key);\n        } else if (isString(key) && keySeparator) {\n          path.push(...key.split(keySeparator));\n        } else {\n          path.push(key);\n        }\n      }\n    }\n    const result = getPath(this.data, path);\n    if (!result && !ns && !key && lng.indexOf('.') > -1) {\n      lng = path[0];\n      ns = path[1];\n      key = path.slice(2).join('.');\n    }\n    if (result || !ignoreJSONStructure || !isString(key)) return result;\n    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n  }\n  addResource(lng, ns, key, value) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      silent: false\n    };\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    setPath(this.data, path, value);\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n  addResources(lng, ns, resources) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      silent: false\n    };\n    for (const m in resources) {\n      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {\n        silent: true\n      });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  addResourceBundle(lng, ns, resources, deep, overwrite) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n      silent: false,\n      skipCopy: false\n    };\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    let pack = getPath(this.data, path) || {};\n    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));\n    if (deep) {\n      deepExtend(pack, resources, overwrite);\n    } else {\n      pack = {\n        ...pack,\n        ...resources\n      };\n    }\n    setPath(this.data, path, pack);\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n    this.emit('removed', lng, ns);\n  }\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n    if (this.options.compatibilityAPI === 'v1') return {\n      ...{},\n      ...this.getResource(lng, ns)\n    };\n    return this.getResource(lng, ns);\n  }\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = data && Object.keys(data) || [];\n    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);\n  }\n  toJSON() {\n    return this.data;\n  }\n}\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle(processors, value, key, options, translator) {\n    processors.forEach(processor => {\n      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nconst checkedLoadedFor = {};\nclass Translator extends EventEmitter {\n  constructor(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    this.logger = baseLogger.create('translator');\n  }\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n  exists(key) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    if (key === undefined || key === null) {\n      return false;\n    }\n    const resolved = this.resolve(key, options);\n    return resolved && resolved.res !== undefined;\n  }\n  extractFromKey(key, options) {\n    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let namespaces = options.ns || this.options.defaultNS || [];\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces: isString(namespaces) ? [namespaces] : namespaces\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n    return {\n      key,\n      namespaces: isString(namespaces) ? [namespaces] : namespaces\n    };\n  }\n  translate(keys, options, lastKey) {\n    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {\n      options = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (typeof options === 'object') options = {\n      ...options\n    };\n    if (!options) options = {};\n    if (keys === undefined || keys === null) return '';\n    if (!Array.isArray(keys)) keys = [String(keys)];\n    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const {\n      key,\n      namespaces\n    } = this.extractFromKey(keys[keys.length - 1], options);\n    const namespace = namespaces[namespaces.length - 1];\n    const lng = options.lng || this.language;\n    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng && lng.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        const nsSeparator = options.nsSeparator || this.options.nsSeparator;\n        if (returnDetails) {\n          return {\n            res: `${namespace}${nsSeparator}${key}`,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace,\n            usedParams: this.getUsedParamsDetails(options)\n          };\n        }\n        return `${namespace}${nsSeparator}${key}`;\n      }\n      if (returnDetails) {\n        return {\n          res: key,\n          usedKey: key,\n          exactUsedKey: key,\n          usedLng: lng,\n          usedNS: namespace,\n          usedParams: this.getUsedParamsDetails(options)\n        };\n      }\n      return key;\n    }\n    const resolved = this.resolve(keys, options);\n    let res = resolved && resolved.res;\n    const resUsedKey = resolved && resolved.usedKey || key;\n    const resExactUsedKey = resolved && resolved.exactUsedKey || key;\n    const resType = Object.prototype.toString.apply(res);\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const handleAsObject = !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';\n    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(res))) {\n      if (!options.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {\n          ...options,\n          ns: namespaces\n        }) : `key '${key} (${this.language})' returned an object instead of string.`;\n        if (returnDetails) {\n          resolved.res = r;\n          resolved.usedParams = this.getUsedParamsDetails(options);\n          return resolved;\n        }\n        return r;\n      }\n      if (keySeparator) {\n        const resTypeIsArray = Array.isArray(res);\n        const copy = resTypeIsArray ? [] : {};\n        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in res) {\n          if (Object.prototype.hasOwnProperty.call(res, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            copy[m] = this.translate(deepKey, {\n              ...options,\n              ...{\n                joinArrays: false,\n                ns: namespaces\n              }\n            });\n            if (copy[m] === deepKey) copy[m] = res[m];\n          }\n        }\n        res = copy;\n      }\n    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, options, lastKey);\n    } else {\n      let usedDefault = false;\n      let usedKey = false;\n      const needsPluralHandling = options.count !== undefined && !isString(options.count);\n      const hasDefaultValue = Translator.hasDefaultValue(options);\n      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {\n        ordinal: false\n      }) : '';\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();\n      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n        if (keySeparator) {\n          const fk = this.resolve(key, {\n            ...options,\n            keySeparator: false\n          });\n          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n        }\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n        } else {\n          lngs.push(options.lng || this.language);\n        }\n        const send = (l, k, specificDefaultValue) => {\n          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n          } else if (this.backendConnector && this.backendConnector.saveMissing) {\n            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach(language => {\n              const suffixes = this.pluralResolver.getSuffixes(language, options);\n              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {\n                suffixes.push(`${this.options.pluralSeparator}zero`);\n              }\n              suffixes.forEach(suffix => {\n                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n      res = this.extendTranslation(res, keys, options, resolved, lastKey);\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n        if (this.options.compatibilityAPI !== 'v1') {\n          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);\n        } else {\n          res = this.options.parseMissingKeyHandler(res);\n        }\n      }\n    }\n    if (returnDetails) {\n      resolved.res = res;\n      resolved.usedParams = this.getUsedParamsDetails(options);\n      return resolved;\n    }\n    return res;\n  }\n  extendTranslation(res, key, options, resolved, lastKey) {\n    var _this = this;\n    if (this.i18nFormat && this.i18nFormat.parse) {\n      res = this.i18nFormat.parse(res, {\n        ...this.options.interpolation.defaultVariables,\n        ...options\n      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n        resolved\n      });\n    } else if (!options.skipInterpolation) {\n      if (options.interpolation) this.interpolator.init({\n        ...options,\n        ...{\n          interpolation: {\n            ...this.options.interpolation,\n            ...options.interpolation\n          }\n        }\n      });\n      const skipOnVariables = isString(res) && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        nestBef = nb && nb.length;\n      }\n      let data = options.replace && !isString(options.replace) ? options.replace : options;\n      if (this.options.interpolation.defaultVariables) data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) options.nest = false;\n      }\n      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = this.language || resolved.usedLng;\n      if (options.nest !== false) res = this.interpolator.nest(res, function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (lastKey && lastKey[0] === args[0] && !options.context) {\n          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);\n          return null;\n        }\n        return _this.translate(...args, key);\n      }, options);\n      if (options.interpolation) this.interpolator.reset();\n    }\n    const postProcess = options.postProcess || this.options.postProcess;\n    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;\n    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {\n        i18nResolved: {\n          ...resolved,\n          usedParams: this.getUsedParamsDetails(options)\n        },\n        ...options\n      } : options, this);\n    }\n    return res;\n  }\n  resolve(keys) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let found;\n    let usedKey;\n    let exactUsedKey;\n    let usedLng;\n    let usedNS;\n    if (isString(keys)) keys = [keys];\n    keys.forEach(k => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, options);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n      const needsPluralHandling = options.count !== undefined && !isString(options.count);\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();\n      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';\n      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);\n      namespaces.forEach(ns => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(`key \"${usedKey}\" for languages \"${codes.join(', ')}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        }\n        codes.forEach(code => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n          const finalKeys = [key];\n          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);\n            const zeroSuffix = `${this.options.pluralSeparator}zero`;\n            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;\n            if (needsPluralHandling) {\n              finalKeys.push(key + pluralSuffix);\n              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n              }\n              if (needsZeroSuffixLookup) {\n                finalKeys.push(key + zeroSuffix);\n              }\n            }\n            if (needsContextHandling) {\n              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;\n              finalKeys.push(contextKey);\n              if (needsPluralHandling) {\n                finalKeys.push(contextKey + pluralSuffix);\n                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n                }\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(contextKey + zeroSuffix);\n                }\n              }\n            }\n          }\n          let possibleKey;\n          while (possibleKey = finalKeys.pop()) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, options);\n            }\n          }\n        });\n      });\n    });\n    return {\n      res: found,\n      usedKey,\n      exactUsedKey,\n      usedLng,\n      usedNS\n    };\n  }\n  isValidLookup(res) {\n    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n  }\n  getResource(code, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n  getUsedParamsDetails() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];\n    const useOptionsReplaceForData = options.replace && !isString(options.replace);\n    let data = useOptionsReplaceForData ? options.replace : options;\n    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {\n      data.count = options.count;\n    }\n    if (this.options.interpolation.defaultVariables) {\n      data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n    }\n    if (!useOptionsReplaceForData) {\n      data = {\n        ...data\n      };\n      for (const key of optionsKeys) {\n        delete data[key];\n      }\n    }\n    return data;\n  }\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n    for (const option in options) {\n      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nconst capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  getScriptPartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return null;\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n  getLanguagePartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return code;\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n  formatLanguageCode(code) {\n    if (isString(code) && code.indexOf('-') > -1) {\n      if (typeof Intl !== 'undefined' && typeof Intl.getCanonicalLocales !== 'undefined') {\n        try {\n          let formattedCode = Intl.getCanonicalLocales(code)[0];\n          if (formattedCode && this.options.lowerCaseLng) {\n            formattedCode = formattedCode.toLowerCase();\n          }\n          if (formattedCode) return formattedCode;\n        } catch (e) {}\n      }\n      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n      let p = code.split('-');\n      if (this.options.lowerCaseLng) {\n        p = p.map(part => part.toLowerCase());\n      } else if (p.length === 2) {\n        p[0] = p[0].toLowerCase();\n        p[1] = p[1].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n      } else if (p.length === 3) {\n        p[0] = p[0].toLowerCase();\n        if (p[1].length === 2) p[1] = p[1].toUpperCase();\n        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n      }\n      return p.join('-');\n    }\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n  }\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n    let found;\n    codes.forEach(code => {\n      if (found) return;\n      const cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n    if (!found && this.options.supportedLngs) {\n      codes.forEach(code => {\n        if (found) return;\n        const lngOnly = this.getLanguagePartFromCode(code);\n        if (this.isSupportedCode(lngOnly)) return found = lngOnly;\n        found = this.options.supportedLngs.find(supportedLng => {\n          if (supportedLng === lngOnly) return supportedLng;\n          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;\n          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;\n        });\n      });\n    }\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n    return found;\n  }\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (isString(fallbacks)) fallbacks = [fallbacks];\n    if (Array.isArray(fallbacks)) return fallbacks;\n    if (!code) return fallbacks.default || [];\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n    return found || [];\n  }\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n    const codes = [];\n    const addCode = c => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (isString(code)) {\n      addCode(this.formatLanguageCode(code));\n    }\n    fallbackCodes.forEach(fc => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n    return codes;\n  }\n}\n\nlet sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nlet _rulesPluralsTypes = {\n  1: n => Number(n > 1),\n  2: n => Number(n != 1),\n  3: n => 0,\n  4: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),\n  5: n => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),\n  6: n => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),\n  7: n => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),\n  8: n => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),\n  9: n => Number(n >= 2),\n  10: n => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),\n  11: n => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),\n  12: n => Number(n % 10 != 1 || n % 100 == 11),\n  13: n => Number(n !== 0),\n  14: n => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),\n  15: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),\n  16: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),\n  17: n => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),\n  18: n => Number(n == 0 ? 0 : n == 1 ? 1 : 2),\n  19: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),\n  20: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),\n  21: n => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),\n  22: n => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)\n};\nconst nonIntlVersions = ['v1', 'v2', 'v3'];\nconst intlVersions = ['v4'];\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nconst createRules = () => {\n  const rules = {};\n  sets.forEach(set => {\n    set.lngs.forEach(l => {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n};\nclass PluralResolver {\n  constructor(languageUtils) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n    this.pluralRulesCache = {};\n  }\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n  clearCache() {\n    this.pluralRulesCache = {};\n  }\n  getRule(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.shouldUseIntlApi()) {\n      const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);\n      const type = options.ordinal ? 'ordinal' : 'cardinal';\n      const cacheKey = JSON.stringify({\n        cleanedCode,\n        type\n      });\n      if (cacheKey in this.pluralRulesCache) {\n        return this.pluralRulesCache[cacheKey];\n      }\n      let rule;\n      try {\n        rule = new Intl.PluralRules(cleanedCode, {\n          type\n        });\n      } catch (err) {\n        if (!code.match(/-|_/)) return;\n        const lngPart = this.languageUtils.getLanguagePartFromCode(code);\n        rule = this.getRule(lngPart, options);\n      }\n      this.pluralRulesCache[cacheKey] = rule;\n      return rule;\n    }\n    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n  }\n  needsPlural(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (this.shouldUseIntlApi()) {\n      return rule && rule.resolvedOptions().pluralCategories.length > 1;\n    }\n    return rule && rule.numbers.length > 1;\n  }\n  getPluralFormsOfKey(code, key) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);\n  }\n  getSuffixes(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (!rule) {\n      return [];\n    }\n    if (this.shouldUseIntlApi()) {\n      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);\n    }\n    return rule.numbers.map(number => this.getSuffix(code, number, options));\n  }\n  getSuffix(code, count) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const rule = this.getRule(code, options);\n    if (rule) {\n      if (this.shouldUseIntlApi()) {\n        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;\n      }\n      return this.getSuffixRetroCompatible(rule, count);\n    }\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return '';\n  }\n  getSuffixRetroCompatible(rule, count) {\n    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n    let suffix = rule.numbers[idx];\n    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      if (suffix === 2) {\n        suffix = 'plural';\n      } else if (suffix === 1) {\n        suffix = '';\n      }\n    }\n    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();\n    if (this.options.compatibilityJSON === 'v1') {\n      if (suffix === 1) return '';\n      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;\n      return returnSuffix();\n    } else if (this.options.compatibilityJSON === 'v2') {\n      return returnSuffix();\n    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      return returnSuffix();\n    }\n    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n  }\n  shouldUseIntlApi() {\n    return !nonIntlVersions.includes(this.options.compatibilityJSON);\n  }\n}\n\nconst deepFindWithDefaults = function (data, defaultData, key) {\n  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  let path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && isString(key)) {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n};\nconst regexSafe = val => val.replace(/\\$/g, '$$$$');\nclass Interpolator {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || (value => value);\n    this.init(options);\n  }\n  init() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!options.interpolation) options.interpolation = {\n      escapeValue: true\n    };\n    const {\n      escape: escape$1,\n      escapeValue,\n      useRawValueToEscape,\n      prefix,\n      prefixEscaped,\n      suffix,\n      suffixEscaped,\n      formatSeparator,\n      unescapeSuffix,\n      unescapePrefix,\n      nestingPrefix,\n      nestingPrefixEscaped,\n      nestingSuffix,\n      nestingSuffixEscaped,\n      nestingOptionsSeparator,\n      maxReplaces,\n      alwaysFormat\n    } = options.interpolation;\n    this.escape = escape$1 !== undefined ? escape$1 : escape;\n    this.escapeValue = escapeValue !== undefined ? escapeValue : true;\n    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;\n    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';\n    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';\n    this.formatSeparator = formatSeparator || ',';\n    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';\n    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');\n    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');\n    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';\n    this.maxReplaces = maxReplaces || 1000;\n    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;\n    this.resetRegExp();\n  }\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n  resetRegExp() {\n    const getOrResetRegExp = (existingRegExp, pattern) => {\n      if (existingRegExp && existingRegExp.source === pattern) {\n        existingRegExp.lastIndex = 0;\n        return existingRegExp;\n      }\n      return new RegExp(pattern, 'g');\n    };\n    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);\n    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);\n    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);\n  }\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n    const handleFormat = key => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);\n        return this.alwaysFormat ? this.format(path, undefined, lng, {\n          ...options,\n          ...data,\n          interpolationkey: key\n        }) : path;\n      }\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {\n        ...options,\n        ...data,\n        interpolationkey: k\n      });\n    };\n    this.resetRegExp();\n    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n    const todos = [{\n      regex: this.regexpUnescape,\n      safeValue: val => regexSafe(val)\n    }, {\n      regex: this.regexp,\n      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)\n    }];\n    todos.forEach(todo => {\n      replaces = 0;\n      while (match = todo.regex.exec(str)) {\n        const matchedVar = match[1].trim();\n        value = handleFormat(matchedVar);\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = isString(temp) ? temp : '';\n          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n            value = '';\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue;\n          } else {\n            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (!isString(value) && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += value.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n  nest(str, fc) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let match;\n    let value;\n    let clonedOptions;\n    const handleHasOptions = (key, inheritedOptions) => {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      const matchedSingleQuotes = optionsString.match(/'/g);\n      const matchedDoubleQuotes = optionsString.match(/\"/g);\n      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n        optionsString = optionsString.replace(/'/g, '\"');\n      }\n      try {\n        clonedOptions = JSON.parse(optionsString);\n        if (inheritedOptions) clonedOptions = {\n          ...inheritedOptions,\n          ...clonedOptions\n        };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;\n      return key;\n    };\n    while (match = this.nestingRegexp.exec(str)) {\n      let formatters = [];\n      clonedOptions = {\n        ...options\n      };\n      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n      let doReduce = false;\n      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());\n        match[1] = r.shift();\n        formatters = r;\n        doReduce = true;\n      }\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n      if (value && match[0] === str && !isString(value)) return value;\n      if (!isString(value)) value = makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n      if (doReduce) {\n        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {\n          ...options,\n          interpolationkey: match[1].trim()\n        }), value.trim());\n      }\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nconst parseFormatStr = formatStr => {\n  let formatName = formatStr.toLowerCase().trim();\n  const formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    const p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    const optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      const opts = optStr.split(';');\n      opts.forEach(opt => {\n        if (opt) {\n          const [key, ...rest] = opt.split(':');\n          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n          const trimmedKey = key.trim();\n          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;\n          if (val === 'false') formatOptions[trimmedKey] = false;\n          if (val === 'true') formatOptions[trimmedKey] = true;\n          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);\n        }\n      });\n    }\n  }\n  return {\n    formatName,\n    formatOptions\n  };\n};\nconst createCachedFormatter = fn => {\n  const cache = {};\n  return (val, lng, options) => {\n    let optForCache = options;\n    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {\n      optForCache = {\n        ...optForCache,\n        [options.interpolationkey]: undefined\n      };\n    }\n    const key = lng + JSON.stringify(optForCache);\n    let formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(getCleanedCode(lng), options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n};\nclass Formatter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      currency: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt,\n          style: 'currency'\n        });\n        return val => formatter.format(val);\n      }),\n      datetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.DateTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      relativetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.RelativeTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val, opt.range || 'day');\n      }),\n      list: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.ListFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      })\n    };\n    this.init(options);\n  }\n  init(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    this.formatSeparator = options.interpolation.formatSeparator || ',';\n  }\n  add(name, fc) {\n    this.formats[name.toLowerCase().trim()] = fc;\n  }\n  addCached(name, fc) {\n    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n  }\n  format(value, format, lng) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const formats = format.split(this.formatSeparator);\n    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {\n      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);\n      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);\n    }\n    const result = formats.reduce((mem, f) => {\n      const {\n        formatName,\n        formatOptions\n      } = parseFormatStr(f);\n      if (this.formats[formatName]) {\n        let formatted = mem;\n        try {\n          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n          formatted = this.formats[formatName](mem, l, {\n            ...formatOptions,\n            ...options,\n            ...valOptions\n          });\n        } catch (error) {\n          this.logger.warn(error);\n        }\n        return formatted;\n      } else {\n        this.logger.warn(`there was no format function for ${formatName}`);\n      }\n      return mem;\n    }, value);\n    return result;\n  }\n}\n\nconst removePending = (q, name) => {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n};\nclass Connector extends EventEmitter {\n  constructor(backend, store, services) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super();\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n    this.waitingReads = [];\n    this.maxParallelReads = options.maxParallelReads || 10;\n    this.readingCalls = 0;\n    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    this.state = {};\n    this.queue = [];\n    if (this.backend && this.backend.init) {\n      this.backend.init(services, options.backend, options);\n    }\n  }\n  queueLoad(languages, namespaces, options, callback) {\n    const toLoad = {};\n    const pending = {};\n    const toLoadLanguages = {};\n    const toLoadNamespaces = {};\n    languages.forEach(lng => {\n      let hasAllNamespaces = true;\n      namespaces.forEach(ns => {\n        const name = `${lng}|${ns}`;\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2;\n        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {\n          if (pending[name] === undefined) pending[name] = true;\n        } else {\n          this.state[name] = 1;\n          hasAllNamespaces = false;\n          if (pending[name] === undefined) pending[name] = true;\n          if (toLoad[name] === undefined) toLoad[name] = true;\n          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n        }\n      });\n      if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n    });\n    if (Object.keys(toLoad).length || Object.keys(pending).length) {\n      this.queue.push({\n        pending,\n        pendingCount: Object.keys(pending).length,\n        loaded: {},\n        errors: [],\n        callback\n      });\n    }\n    return {\n      toLoad: Object.keys(toLoad),\n      pending: Object.keys(pending),\n      toLoadLanguages: Object.keys(toLoadLanguages),\n      toLoadNamespaces: Object.keys(toLoadNamespaces)\n    };\n  }\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    if (err) this.emit('failedLoading', lng, ns, err);\n    if (!err && data) {\n      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {\n        skipCopy: true\n      });\n    }\n    this.state[name] = err ? -1 : 2;\n    if (err && data) this.state[name] = 0;\n    const loaded = {};\n    this.queue.forEach(q => {\n      pushPath(q.loaded, [lng], ns);\n      removePending(q, name);\n      if (err) q.errors.push(err);\n      if (q.pendingCount === 0 && !q.done) {\n        Object.keys(q.loaded).forEach(l => {\n          if (!loaded[l]) loaded[l] = {};\n          const loadedKeys = q.loaded[l];\n          if (loadedKeys.length) {\n            loadedKeys.forEach(n => {\n              if (loaded[l][n] === undefined) loaded[l][n] = true;\n            });\n          }\n        });\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n    this.emit('loaded', loaded);\n    this.queue = this.queue.filter(q => !q.done);\n  }\n  read(lng, ns, fcName) {\n    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n    let callback = arguments.length > 5 ? arguments[5] : undefined;\n    if (!lng.length) return callback(null, {});\n    if (this.readingCalls >= this.maxParallelReads) {\n      this.waitingReads.push({\n        lng,\n        ns,\n        fcName,\n        tried,\n        wait,\n        callback\n      });\n      return;\n    }\n    this.readingCalls++;\n    const resolver = (err, data) => {\n      this.readingCalls--;\n      if (this.waitingReads.length > 0) {\n        const next = this.waitingReads.shift();\n        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n      }\n      if (err && data && tried < this.maxRetries) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    };\n    const fc = this.backend[fcName].bind(this.backend);\n    if (fc.length === 2) {\n      try {\n        const r = fc(lng, ns);\n        if (r && typeof r.then === 'function') {\n          r.then(data => resolver(null, data)).catch(resolver);\n        } else {\n          resolver(null, r);\n        }\n      } catch (err) {\n        resolver(err);\n      }\n      return;\n    }\n    return fc(lng, ns, resolver);\n  }\n  prepareLoading(languages, namespaces) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let callback = arguments.length > 3 ? arguments[3] : undefined;\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);\n    if (isString(namespaces)) namespaces = [namespaces];\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback();\n      return null;\n    }\n    toLoad.toLoad.forEach(name => {\n      this.loadOne(name);\n    });\n  }\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {\n      reload: true\n    }, callback);\n  }\n  loadOne(name) {\n    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n      this.loaded(name, err, data);\n    });\n  }\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};\n    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n      this.logger.warn(`did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n      return;\n    }\n    if (key === undefined || key === null || key === '') return;\n    if (this.backend && this.backend.create) {\n      const opts = {\n        ...options,\n        isUpdate\n      };\n      const fc = this.backend.create.bind(this.backend);\n      if (fc.length < 6) {\n        try {\n          let r;\n          if (fc.length === 5) {\n            r = fc(languages, namespace, key, fallbackValue, opts);\n          } else {\n            r = fc(languages, namespace, key, fallbackValue);\n          }\n          if (r && typeof r.then === 'function') {\n            r.then(data => clb(null, data)).catch(clb);\n          } else {\n            clb(null, r);\n          }\n        } catch (err) {\n          clb(err);\n        }\n      } else {\n        fc(languages, namespace, key, fallbackValue, clb, opts);\n      }\n    }\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nconst get = () => ({\n  debug: false,\n  initImmediate: true,\n  ns: ['translation'],\n  defaultNS: ['translation'],\n  fallbackLng: ['dev'],\n  fallbackNS: false,\n  supportedLngs: false,\n  nonExplicitSupportedLngs: false,\n  load: 'all',\n  preload: false,\n  simplifyPluralSuffix: true,\n  keySeparator: '.',\n  nsSeparator: ':',\n  pluralSeparator: '_',\n  contextSeparator: '_',\n  partialBundledLanguages: false,\n  saveMissing: false,\n  updateMissing: false,\n  saveMissingTo: 'fallback',\n  saveMissingPlurals: true,\n  missingKeyHandler: false,\n  missingInterpolationHandler: false,\n  postProcess: false,\n  postProcessPassResolved: false,\n  returnNull: false,\n  returnEmptyString: true,\n  returnObjects: false,\n  joinArrays: false,\n  returnedObjectHandler: false,\n  parseMissingKeyHandler: false,\n  appendNamespaceToMissingKey: false,\n  appendNamespaceToCIMode: false,\n  overloadTranslationOptionHandler: args => {\n    let ret = {};\n    if (typeof args[1] === 'object') ret = args[1];\n    if (isString(args[1])) ret.defaultValue = args[1];\n    if (isString(args[2])) ret.tDescription = args[2];\n    if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n      const options = args[3] || args[2];\n      Object.keys(options).forEach(key => {\n        ret[key] = options[key];\n      });\n    }\n    return ret;\n  },\n  interpolation: {\n    escapeValue: true,\n    format: value => value,\n    prefix: '{{',\n    suffix: '}}',\n    formatSeparator: ',',\n    unescapePrefix: '-',\n    nestingPrefix: '$t(',\n    nestingSuffix: ')',\n    nestingOptionsSeparator: ',',\n    maxReplaces: 1000,\n    skipOnVariables: true\n  }\n});\nconst transformOptions = options => {\n  if (isString(options.ns)) options.ns = [options.ns];\n  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];\n  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n};\n\nconst noop = () => {};\nconst bindMemberFunctions = inst => {\n  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(mem => {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n};\nclass I18n extends EventEmitter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    super();\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = {\n      external: []\n    };\n    bindMemberFunctions(this);\n    if (callback && !this.isInitialized && !options.isClone) {\n      if (!this.options.initImmediate) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n  init() {\n    var _this = this;\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    this.isInitializing = true;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n      if (isString(options.ns)) {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n    const defOpts = get();\n    this.options = {\n      ...defOpts,\n      ...this.options,\n      ...transformOptions(options)\n    };\n    if (this.options.compatibilityAPI !== 'v1') {\n      this.options.interpolation = {\n        ...defOpts.interpolation,\n        ...this.options.interpolation\n      };\n    }\n    if (options.keySeparator !== undefined) {\n      this.options.userDefinedKeySeparator = options.keySeparator;\n    }\n    if (options.nsSeparator !== undefined) {\n      this.options.userDefinedNsSeparator = options.nsSeparator;\n    }\n    const createClassOnDemand = ClassOrObject => {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    };\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n      let formatter;\n      if (this.modules.formatter) {\n        formatter = this.modules.formatter;\n      } else if (typeof Intl !== 'undefined') {\n        formatter = Formatter;\n      }\n      const lu = new LanguageUtil(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        compatibilityJSON: this.options.compatibilityJSON,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix\n      });\n      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n        s.formatter = createClassOnDemand(formatter);\n        s.formatter.init(s, this.options);\n        this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n      }\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      };\n      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        _this.emit(event, ...args);\n      });\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n      }\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n      this.translator = new Translator(this.services, this.options);\n      this.translator.on('*', function (event) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _this.emit(event, ...args);\n      });\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n    storeApi.forEach(fcName => {\n      this[fcName] = function () {\n        return _this.store[fcName](...arguments);\n      };\n    });\n    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = function () {\n        _this.store[fcName](...arguments);\n        return _this;\n      };\n    });\n    const deferred = defer();\n    const load = () => {\n      const finish = (err, t) => {\n        this.isInitializing = false;\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n        deferred.resolve(t);\n        callback(err, t);\n      };\n      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n    return deferred;\n  }\n  loadResources(language) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    let usedCallback = callback;\n    const usedLng = isString(language) ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();\n      const toLoad = [];\n      const append = lng => {\n        if (!lng) return;\n        if (lng === 'cimode') return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (l === 'cimode') return;\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      if (!usedLng) {\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n      if (this.options.preload) {\n        this.options.preload.forEach(l => append(l));\n      }\n      this.services.backendConnector.load(toLoad, this.options.ns, e => {\n        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);\n        usedCallback(e);\n      });\n    } else {\n      usedCallback(null);\n    }\n  }\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (typeof lngs === 'function') {\n      callback = lngs;\n      lngs = undefined;\n    }\n    if (typeof ns === 'function') {\n      callback = ns;\n      ns = undefined;\n    }\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve();\n      callback(err);\n    });\n    return deferred;\n  }\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n    if (module.type === 'formatter') {\n      this.modules.formatter = module;\n    }\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n    return this;\n  }\n  setResolvedLanguage(l) {\n    if (!l || !this.languages) return;\n    if (['cimode', 'dev'].indexOf(l) > -1) return;\n    for (let li = 0; li < this.languages.length; li++) {\n      const lngInLngs = this.languages[li];\n      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n        this.resolvedLanguage = lngInLngs;\n        break;\n      }\n    }\n  }\n  changeLanguage(lng, callback) {\n    var _this2 = this;\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n    const setLngProps = l => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      this.resolvedLanguage = undefined;\n      this.setResolvedLanguage(l);\n    };\n    const done = (err, l) => {\n      if (l) {\n        setLngProps(l);\n        this.translator.changeLanguage(l);\n        this.isLanguageChangingTo = undefined;\n        this.emit('languageChanged', l);\n        this.logger.log('languageChanged', l);\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n      deferred.resolve(function () {\n        return _this2.t(...arguments);\n      });\n      if (callback) callback(err, function () {\n        return _this2.t(...arguments);\n      });\n    };\n    const setLng = lngs => {\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);\n      }\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      if (this.services.languageDetector.detect.length === 0) {\n        this.services.languageDetector.detect().then(setLng);\n      } else {\n        this.services.languageDetector.detect(setLng);\n      }\n    } else {\n      setLng(lng);\n    }\n    return deferred;\n  }\n  getFixedT(lng, ns, keyPrefix) {\n    var _this3 = this;\n    const fixedT = function (key, opts) {\n      let options;\n      if (typeof opts !== 'object') {\n        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n          rest[_key3 - 2] = arguments[_key3];\n        }\n        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        options = {\n          ...opts\n        };\n      }\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n      const keySeparator = _this3.options.keySeparator || '.';\n      let resultKey;\n      if (options.keyPrefix && Array.isArray(key)) {\n        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);\n      } else {\n        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;\n      }\n      return _this3.t(resultKey, options);\n    };\n    if (isString(lng)) {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n  t() {\n    return this.translator && this.translator.translate(...arguments);\n  }\n  exists() {\n    return this.translator && this.translator.exists(...arguments);\n  }\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n  hasLoadedNamespace(ns) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n    const lng = options.lng || this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n    if (lng.toLowerCase() === 'cimode') return true;\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 0 || loadState === 2;\n    };\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n    if (this.hasResourceBundle(lng, ns)) return true;\n    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n    return false;\n  }\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n    if (!this.options.ns) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    if (isString(ns)) ns = [ns];\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n    if (isString(lngs)) lngs = [lngs];\n    const preloaded = this.options.preload || [];\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n  }\n  static createInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    return new I18n(options, callback);\n  }\n  cloneInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    const forkResourceStore = options.forkResourceStore;\n    if (forkResourceStore) delete options.forkResourceStore;\n    const mergedOptions = {\n      ...this.options,\n      ...options,\n      ...{\n        isClone: true\n      }\n    };\n    const clone = new I18n(mergedOptions);\n    if (options.debug !== undefined || options.prefix !== undefined) {\n      clone.logger = clone.logger.clone(options);\n    }\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = {\n      ...this.services\n    };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    if (forkResourceStore) {\n      clone.store = new ResourceStore(this.store.data, mergedOptions);\n      clone.services.resourceStore = clone.store;\n    }\n    clone.translator = new Translator(clone.services, mergedOptions);\n    clone.translator.on('*', function (event) {\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = mergedOptions;\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    return clone;\n  }\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\nconst instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nconst createInstance = instance.createInstance;\nconst dir = instance.dir;\nconst init = instance.init;\nconst loadResources = instance.loadResources;\nconst reloadResources = instance.reloadResources;\nconst use = instance.use;\nconst changeLanguage = instance.changeLanguage;\nconst getFixedT = instance.getFixedT;\nconst t = instance.t;\nconst exists = instance.exists;\nconst setDefaultNamespace = instance.setDefaultNamespace;\nconst hasLoadedNamespace = instance.hasLoadedNamespace;\nconst loadNamespaces = instance.loadNamespaces;\nconst loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import { createContext, PropsWithChildren, useContext } from 'react';\nimport { Call } from '@stream-io/video-client';\n\nconst StreamCallContext = createContext<Call | undefined>(undefined);\n\n/**\n * The props for the StreamCallProvider component.\n */\nexport interface StreamCallProviderProps {\n  call?: Call;\n}\n\n/**\n * A provider for the call object.\n */\nexport const StreamCallProvider = (\n  props: PropsWithChildren<StreamCallProviderProps>,\n) => {\n  const { call, children } = props;\n  return (\n    <StreamCallContext.Provider value={call}>\n      {children}\n    </StreamCallContext.Provider>\n  );\n};\n\n/**\n * A hook to get the call object from the closest provider.\n */\nexport const useCall = () => {\n  return useContext(StreamCallContext);\n};\n","import i18next from 'i18next';\nimport {\n  TranslationLanguage,\n  TranslationSheet,\n  TranslationsMap,\n  TranslationsRegistry,\n  TranslatorFunction,\n} from './types';\n\nconst DEFAULT_NAMESPACE = 'stream-video';\nconst DEFAULT_CONFIG = {\n  debug: false,\n  currentLanguage: 'en',\n  fallbackLanguage: false,\n} as const;\n\nconst mapToRegistry = (translationsMap: TranslationsMap, namespace: string) =>\n  Object.entries(translationsMap).reduce((acc, [lng, translations]) => {\n    acc[lng] = { [namespace]: translations };\n    return acc;\n  }, {} as TranslationsRegistry);\n\nconst DEFAULT_TRANSLATIONS_REGISTRY = mapToRegistry({}, DEFAULT_NAMESPACE);\n\nexport const defaultTranslationFunction = (key: string) => key;\n\nexport type StreamI18nConstructor = {\n  /** Language into which the provided strings are translated */\n  currentLanguage?: TranslationLanguage;\n  /** Fallback language which will be used if no translation is found for current language */\n  fallbackLanguage?: TranslationLanguage;\n  /** Logs info level to console output. Helps find issues with loading not working. */\n  debug?: boolean;\n  /** Custom translations that will be merged with the defaults provided by the library. */\n  translationsOverrides?: TranslationsMap;\n};\n\nexport class StreamI18n {\n  /** Exposed i18n instance from the i18next library */\n  i18nInstance;\n  /** Translator function that converts the provided string into its equivalent in the current language. */\n  t: TranslatorFunction = defaultTranslationFunction;\n  /** Simple logger function */\n  constructor(options: StreamI18nConstructor = {}) {\n    const {\n      debug = DEFAULT_CONFIG.debug,\n      currentLanguage = DEFAULT_CONFIG.currentLanguage,\n      fallbackLanguage = DEFAULT_CONFIG.fallbackLanguage,\n      translationsOverrides,\n    } = options;\n\n    this.i18nInstance = i18next.createInstance({\n      debug,\n      defaultNS: DEFAULT_NAMESPACE,\n      fallbackLng: fallbackLanguage,\n      interpolation: { escapeValue: false },\n      keySeparator: false,\n      lng: currentLanguage,\n      nsSeparator: false,\n      parseMissingKeyHandler: (key) => {\n        return key;\n      },\n      resources: DEFAULT_TRANSLATIONS_REGISTRY,\n    });\n\n    if (translationsOverrides) {\n      this.i18nInstance.on('initialized', () => {\n        Object.entries(translationsOverrides).forEach(([lng, translations]) => {\n          this.registerTranslationsForLanguage({ lng, translations });\n        });\n      });\n    }\n  }\n\n  get currentLanguage() {\n    this._checkIsInitialized();\n    return this.i18nInstance.language;\n  }\n\n  get isInitialized() {\n    return this.i18nInstance.isInitialized;\n  }\n\n  init = async () => {\n    try {\n      this.t = await this.i18nInstance.init();\n    } catch (e) {\n      console.error(`Failed to initialize translations: ${JSON.stringify(e)}`);\n    }\n    return this;\n  };\n\n  changeLanguage = async (\n    language?: TranslationLanguage,\n    onChange?: (language: TranslationLanguage) => void,\n  ) => {\n    if (!this._checkIsInitialized()) return;\n    // i18next detects the language, if none provided, but it is better\n    // to show this detection here explicitly\n    const browserLanguage =\n      typeof window !== 'undefined' && window.navigator\n        ? window.navigator.language\n        : undefined;\n    await this.i18nInstance.changeLanguage(language || browserLanguage);\n    onChange?.(this.currentLanguage);\n  };\n\n  registerTranslationsForLanguage = ({\n    lng,\n    translations,\n  }: {\n    lng: TranslationLanguage;\n    translations: TranslationSheet;\n  }) => {\n    if (!this._checkIsInitialized()) return;\n    this.i18nInstance.addResourceBundle(\n      lng,\n      DEFAULT_NAMESPACE,\n      translations,\n      true,\n      true,\n    );\n  };\n\n  private _checkIsInitialized = () => {\n    if (!this.i18nInstance.isInitialized) {\n      console.warn(\n        'I18n instance is not initialized. Call yourStreamI18nInstance.init().',\n      );\n    }\n    return this.i18nInstance.isInitialized;\n  };\n}\n","import {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  defaultTranslationFunction,\n  StreamI18n,\n  TranslationsMap,\n} from '../i18n';\n\ntype StreamI18nContextValue = {\n  t: StreamI18n['t'];\n  i18n?: StreamI18n;\n};\n\nconst StreamI18nContext = createContext<StreamI18nContextValue>({\n  t: defaultTranslationFunction,\n});\n\ntype CreateI18nParams = {\n  i18nInstance?: StreamI18n;\n  language?: string;\n  fallbackLanguage?: string;\n  translationsOverrides?: TranslationsMap;\n};\n\nexport type StreamI18nProviderProps = CreateI18nParams;\n\nexport const StreamI18nProvider = ({\n  children,\n  ...createI18nParams\n}: PropsWithChildren<StreamI18nProviderProps>) => {\n  const { i18n, t } = useCreateI18n(createI18nParams);\n\n  return (\n    <StreamI18nContext.Provider value={{ t, i18n }}>\n      {children}\n    </StreamI18nContext.Provider>\n  );\n};\n\nexport const useCreateI18n = ({\n  i18nInstance,\n  language,\n  fallbackLanguage,\n  translationsOverrides,\n}: CreateI18nParams) => {\n  const [i18n] = useState(\n    () =>\n      i18nInstance ||\n      new StreamI18n({\n        currentLanguage: language,\n        fallbackLanguage,\n        translationsOverrides,\n      }),\n  );\n  const [t, setTranslationFn] = useState<StreamI18n['t']>(\n    () => defaultTranslationFunction,\n  );\n\n  useEffect(() => {\n    const { isInitialized } = i18n;\n    if (!isInitialized) {\n      i18n.init().then((_i18n) => setTranslationFn(() => _i18n.i18nInstance.t));\n      return;\n    }\n    if (language && i18n?.currentLanguage !== language) {\n      i18n.changeLanguage(language).catch((err) => {\n        console.log('Error while changing language', err);\n      });\n    }\n  }, [i18n, i18nInstance, language, translationsOverrides]);\n\n  return { i18n, t };\n};\n\nexport const useI18n = () => useContext(StreamI18nContext);\n","import { createContext, PropsWithChildren, useContext } from 'react';\nimport { StreamVideoClient } from '@stream-io/video-client';\nimport {\n  StreamI18nProvider,\n  StreamI18nProviderProps,\n} from './StreamI18nContext';\n\nconst StreamVideoContext = createContext<StreamVideoClient | undefined>(\n  undefined,\n);\n\n/**\n * Exclude types from documentation site, but we should still add doc comments\n * @internal\n */\nexport type StreamVideoProps = StreamI18nProviderProps & {\n  client: StreamVideoClient;\n};\n\n/**\n * StreamVideo is a provider component which should be used to wrap the entire application.\n * It provides the client object to all children components and initializes the i18n instance.\n *  @param PropsWithChildren<StreamVideoProps>\n *  @category Client State\n */\nexport const StreamVideoProvider = ({\n  children,\n  client,\n  i18nInstance,\n  language,\n  translationsOverrides,\n}: PropsWithChildren<StreamVideoProps>) => {\n  return (\n    <StreamVideoContext.Provider value={client}>\n      <StreamI18nProvider\n        i18nInstance={i18nInstance}\n        language={language}\n        translationsOverrides={translationsOverrides}\n      >\n        {children}\n      </StreamI18nProvider>\n    </StreamVideoContext.Provider>\n  );\n};\n\n/**\n *\n * @returns\n *\n * @category Client State\n */\nexport const useStreamVideoClient = () => {\n  return useContext(StreamVideoContext);\n};\n","import type { Observable } from 'rxjs';\nimport { useEffect, useState } from 'react';\nimport { RxUtils } from '@stream-io/video-client';\n\n/**\n * Utility hook which provides the current value of the given observable.\n *\n * @param observable$ the observable to read data from.\n * @param defaultValue a default value. Used when the observable data can't be read or emits an error.\n */\nexport const useObservableValue = <T>(\n  observable$: Observable<T>,\n  defaultValue?: T,\n) => {\n  const [value, setValue] = useState<T>(() => {\n    try {\n      return RxUtils.getCurrentValue(observable$);\n    } catch (err) {\n      if (typeof defaultValue === 'undefined') throw err;\n      return defaultValue;\n    }\n  });\n\n  useEffect(() => {\n    return RxUtils.createSubscription(observable$, setValue, (err) => {\n      console.log('An error occurred while reading an observable', err);\n      if (defaultValue) setValue(defaultValue);\n    });\n  }, [defaultValue, observable$]);\n\n  return value;\n};\n","import {\n  Call,\n  CallClosedCaption,\n  CallIngressResponse,\n  CallSessionResponse,\n  CallSettingsResponse,\n  CallState,\n  CallStatsReport,\n  Comparator,\n  EgressResponse,\n  InputDeviceStatus,\n  MemberResponse,\n  OwnCapability,\n  StreamVideoParticipant,\n  UserResponse,\n} from '@stream-io/video-client';\nimport { useMemo, useState } from 'react';\nimport { Observable, of } from 'rxjs';\nimport { useCall } from '../contexts';\nimport { isReactNative } from '../helpers/platforms';\nimport { useObservableValue } from './useObservableValue';\n\n// kind-of memoized, used as a default value\nconst EMPTY_DEVICES_ARRAY = Object.freeze<MediaDeviceInfo[]>(\n  [],\n) as MediaDeviceInfo[];\n\n/**\n * Utility hook, which provides the current call's state.\n *\n * @category Call State\n */\nexport const useCallState = () => {\n  const call = useCall();\n  // return an empty and unlinked CallState object if there is no call in the provider\n  // this ensures that the hooks always return a value and many null checks can be avoided\n  if (!call) {\n    const message =\n      'You are using useCallState() outside a Call context. ' +\n      'Please wrap your component in <StreamCall /> and provide a \"call\" instance.';\n    console.warn(message);\n    return new CallState();\n  }\n  return call.state;\n};\n\n/**\n * Utility hook which provides information whether the current call is being recorded. It will return `true` if the call is being recorded.\n *\n * @category Call State\n */\nexport const useIsCallRecordingInProgress = (): boolean => {\n  const { recording$ } = useCallState();\n  return useObservableValue(recording$);\n};\n\n/**\n * Utility hook which provides information whether the current call is broadcasting.\n *\n * @category Call State\n */\nexport const useIsCallHLSBroadcastingInProgress = (): boolean => {\n  const { egress$ } = useCallState();\n  const egress = useObservableValue(egress$);\n  if (!egress) return false;\n  return egress.broadcasting;\n};\n\n/**\n * Utility hook which provides information whether the current call is live.\n *\n * @category Call State\n */\nexport const useIsCallLive = (): boolean => {\n  const { backstage$ } = useCallState();\n  const isBackstageOn = useObservableValue(backstage$);\n  return !isBackstageOn;\n};\n\n/**\n * Returns the list of blocked users in the current call.\n */\nexport const useCallBlockedUserIds = (): string[] => {\n  const { blockedUserIds$ } = useCallState();\n  return useObservableValue(blockedUserIds$);\n};\n\n/**\n * Returns the timestamp when this call was created.\n */\nexport const useCallCreatedAt = (): Date | undefined => {\n  const { createdAt$ } = useCallState();\n  return useObservableValue(createdAt$);\n};\n\n/**\n * Returns the timestamp when this call was ended.\n */\nexport const useCallEndedAt = (): Date | undefined => {\n  const { endedAt$ } = useCallState();\n  return useObservableValue(endedAt$);\n};\n\n/**\n * Returns the timestamp telling when the call is scheduled to start.\n */\nexport const useCallStartsAt = (): Date | undefined => {\n  const { startsAt$ } = useCallState();\n  return useObservableValue(startsAt$);\n};\n\n/**\n * Returns the timestamp when this call was updated.\n */\nexport const useCallUpdatedAt = (): Date | undefined => {\n  const { updatedAt$ } = useCallState();\n  return useObservableValue(updatedAt$);\n};\n\n/**\n * Returns the information about the call's creator.\n */\nexport const useCallCreatedBy = (): UserResponse | undefined => {\n  const { createdBy$ } = useCallState();\n  return useObservableValue(createdBy$);\n};\n\n/**\n * Returns the call's custom data.\n */\nexport const useCallCustomData = (): Record<string, any> => {\n  const { custom$ } = useCallState();\n  return useObservableValue(custom$);\n};\n\n/**\n * Returns the call's Egress information.\n */\nexport const useCallEgress = (): EgressResponse | undefined => {\n  const { egress$ } = useCallState();\n  return useObservableValue(egress$);\n};\n\n/**\n * Returns the call's Ingress information.\n */\nexport const useCallIngress = (): CallIngressResponse | undefined => {\n  const { ingress$ } = useCallState();\n  return useObservableValue(ingress$);\n};\n\n/**\n * Returns the data for the current call session.\n */\nexport const useCallSession = (): CallSessionResponse | undefined => {\n  const { session$ } = useCallState();\n  return useObservableValue(session$);\n};\n\n/**\n * Returns the call's settings.\n */\nexport const useCallSettings = (): CallSettingsResponse | undefined => {\n  const { settings$ } = useCallState();\n  return useObservableValue(settings$);\n};\n\n/**\n * Returns whether the call has transcribing enabled.\n */\nexport const useIsCallTranscribingInProgress = (): boolean => {\n  const { transcribing$ } = useCallState();\n  return useObservableValue(transcribing$);\n};\n\n/**\n * Returns information about the user who has marked this call as ended.\n */\nexport const useCallEndedBy = (): UserResponse | undefined => {\n  const { endedBy$ } = useCallState();\n  return useObservableValue(endedBy$);\n};\n\n/**\n * Utility hook which provides a boolean indicating whether there is\n * a participant in the current call which shares their screen.\n *\n * @category Call State\n */\nexport const useHasOngoingScreenShare = (): boolean => {\n  const { hasOngoingScreenShare$ } = useCallState();\n  return useObservableValue(hasOngoingScreenShare$);\n};\n\n/**\n * Utility hook which provides the latest stats report of the current call.\n *\n * The latest stats report of the current call.\n * When stats gathering is enabled, this observable will emit a new value\n * at a regular (configurable) interval.\n *\n * Consumers of this observable can implement their own batching logic\n * in case they want to show historical stats data.\n *\n * @category Call State\n */\nexport const useCallStatsReport = (): CallStatsReport | undefined => {\n  const { callStatsReport$ } = useCallState();\n  return useObservableValue(callStatsReport$);\n};\n\n/**\n * Utility hook which provides the dominant speaker of the current call.\n *\n * @category Call State\n */\nexport const useDominantSpeaker = (): StreamVideoParticipant | undefined => {\n  const { dominantSpeaker$ } = useCallState();\n  return useObservableValue(dominantSpeaker$);\n};\n\n/**\n * Utility hook which provides a list of call members.\n *\n * @category Call State\n */\nexport const useCallMembers = (): MemberResponse[] => {\n  const { members$ } = useCallState();\n  return useObservableValue(members$);\n};\n\n/**\n * Utility hook providing the current calling state of the call. For example, `RINGING` or `JOINED`.\n *\n * @category Call State\n */\nexport const useCallCallingState = () => {\n  const { callingState$ } = useCallState();\n  return useObservableValue(callingState$);\n};\n\n/**\n * Utility hook providing the actual start time of the current session.\n * Useful for calculating the call duration.\n *\n * @category Call State\n */\nexport const useCallStartedAt = () => {\n  const { startedAt$ } = useCallState();\n  return useObservableValue(startedAt$);\n};\n\n/**\n * A hook which provides a list of all participants that have joined an active call.\n *\n * @category Call State\n *\n * @param options.sortBy - A comparator function to sort the participants by.\n * Make sure to memoize output of the `combineComparators` function\n * (or keep it out of component's scope if possible) before passing it down to this property.\n */\nexport const useParticipants = ({\n  sortBy,\n}: {\n  /**\n   * Make sure to memoize output of the `combineComparators` function\n   * (or keep it out of component's scope if possible) before passing it down to this property.\n   */\n  sortBy?: Comparator<StreamVideoParticipant>;\n} = {}) => {\n  const { participants$ } = useCallState();\n  const participants = useObservableValue(participants$);\n\n  return useMemo(() => {\n    if (sortBy) {\n      return [...participants].sort(sortBy);\n    }\n    return participants;\n  }, [participants, sortBy]);\n};\n\n/**\n * A hook which provides a StreamVideoLocalParticipant object.\n * It signals that I have joined a call.\n *\n * @category Call State\n */\nexport const useLocalParticipant = () => {\n  const { localParticipant$ } = useCallState();\n  return useObservableValue(localParticipant$);\n};\n\n/**\n * A hook which provides a list of all other participants than me that have joined an active call.\n *\n * @category Call State\n */\nexport const useRemoteParticipants = () => {\n  const { remoteParticipants$ } = useCallState();\n  return useObservableValue(remoteParticipants$);\n};\n\n/**\n * Returns the approximate participant count of the active call.\n * This includes the anonymous users as well, and it is computed on the server.\n *\n * @category Call State\n */\nexport const useParticipantCount = () => {\n  const { participantCount$ } = useCallState();\n  return useObservableValue(participantCount$);\n};\n\n/**\n * Returns the approximate anonymous participant count of the active call.\n * The regular participants are not included in this count. It is computed on the server.\n *\n * @category Call State\n */\nexport const useAnonymousParticipantCount = () => {\n  const { anonymousParticipantCount$ } = useCallState();\n  return useObservableValue(anonymousParticipantCount$);\n};\n\n/**\n * Returns the generated thumbnail of the current call, if enabled in settings.\n */\nexport const useCallThumbnail = () => {\n  const { thumbnails$ } = useCallState();\n  return useObservableValue(thumbnails$);\n};\n\n/**\n * A hook which returns the local participant's own capabilities.\n */\nexport const useOwnCapabilities = (): OwnCapability[] | undefined => {\n  const { ownCapabilities$ } = useCallState();\n  return useObservableValue(ownCapabilities$);\n};\n\n/**\n * Hook that returns true if the local participant has all the given permissions.\n *\n * @param permissions the permissions to check.\n */\nexport const useHasPermissions = (...permissions: OwnCapability[]): boolean => {\n  const capabilities = useOwnCapabilities();\n  return permissions.every((permission) => capabilities?.includes(permission));\n};\n\n/**\n * Returns the camera state of the current call.\n *\n * @category Camera Manager State\n *\n */\nexport const useCameraState = () => {\n  const call = useCall();\n  const { camera } = call as Call;\n\n  const { state } = camera;\n  const direction = useObservableValue(state.direction$);\n  const mediaStream = useObservableValue(state.mediaStream$);\n  const selectedDevice = useObservableValue(state.selectedDevice$);\n  const { getDevices } = useLazyDeviceList(camera);\n  const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n  const isPromptingPermission = useObservableValue(\n    state.isPromptingPermission$,\n  );\n\n  return {\n    camera,\n    direction,\n    mediaStream,\n    get devices() {\n      return getDevices();\n    },\n    hasBrowserPermission,\n    isPromptingPermission,\n    selectedDevice,\n    ...getComputedStatus(\n      useObservableValue(state.status$),\n      useObservableValue(state.optimisticStatus$),\n    ),\n  };\n};\n\n/**\n * Returns the microphone state of the current call.\n *\n * @category Microphone Manager State\n */\nexport const useMicrophoneState = () => {\n  const call = useCall();\n  const { microphone } = call as Call;\n\n  const { state } = microphone;\n  const mediaStream = useObservableValue(state.mediaStream$);\n  const selectedDevice = useObservableValue(state.selectedDevice$);\n  const { getDevices } = useLazyDeviceList(microphone);\n  const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n  const isPromptingPermission = useObservableValue(\n    state.isPromptingPermission$,\n  );\n  const isSpeakingWhileMuted = useObservableValue(state.speakingWhileMuted$);\n\n  return {\n    microphone,\n    mediaStream,\n    get devices() {\n      return getDevices();\n    },\n    selectedDevice,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isSpeakingWhileMuted,\n    ...getComputedStatus(\n      useObservableValue(state.status$),\n      useObservableValue(state.optimisticStatus$),\n    ),\n  };\n};\n\n/**\n * Returns the speaker state of the current call.\n *\n * Note: This hook is not supported in React Native\n */\nexport const useSpeakerState = () => {\n  if (isReactNative()) {\n    throw new Error(\n      'This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details',\n    );\n  }\n  const call = useCall();\n  const { speaker } = call as Call;\n\n  const { getDevices } = useLazyDeviceList(speaker);\n  const selectedDevice = useObservableValue(speaker.state.selectedDevice$);\n\n  return {\n    speaker,\n    get devices() {\n      return getDevices();\n    },\n    selectedDevice,\n    isDeviceSelectionSupported: speaker.state.isDeviceSelectionSupported,\n  };\n};\n\n/**\n * Returns the Screen Share state of the current call.\n */\nexport const useScreenShareState = () => {\n  const call = useCall();\n  const { screenShare } = call as Call;\n\n  return {\n    screenShare,\n    mediaStream: useObservableValue(screenShare.state.mediaStream$),\n    ...getComputedStatus(\n      useObservableValue(screenShare.state.status$),\n      useObservableValue(screenShare.state.optimisticStatus$),\n    ),\n  };\n};\n\n/**\n * Returns incoming video settings for the current call, including\n * global and per-participant manual video quality overrides.\n */\nexport const useIncomingVideoSettings = () => {\n  const call = useCall() as Call;\n  const settings = useObservableValue(\n    call.dynascaleManager.incomingVideoSettings$,\n  );\n  return settings;\n};\n\n/**\n * Returns the current call's closed captions queue.\n */\nexport const useCallClosedCaptions = (): CallClosedCaption[] => {\n  const { closedCaptions$ } = useCallState();\n  return useObservableValue(closedCaptions$);\n};\n\n/**\n * Returns the current call's closed captions queue.\n */\nexport const useIsCallCaptioningInProgress = (): boolean => {\n  const { captioning$ } = useCallState();\n  return useObservableValue(captioning$);\n};\n\nfunction getComputedStatus(\n  status: InputDeviceStatus,\n  pendingStatus: InputDeviceStatus,\n) {\n  const optimisticStatus = pendingStatus ?? status;\n\n  return {\n    status,\n    optimisticStatus,\n    isEnabled: status === 'enabled',\n    isMute: status !== 'enabled',\n    optimisticIsMute: optimisticStatus !== 'enabled',\n    isTogglePending: optimisticStatus !== status,\n  };\n}\n\ninterface DeviceManagerLike {\n  listDevices(): Observable<MediaDeviceInfo[]>;\n}\n\nfunction useLazyDeviceList(manager: DeviceManagerLike) {\n  const placeholderDevices$ = useMemo(() => of(EMPTY_DEVICES_ARRAY), []);\n  const [devices$, setDevices$] = useState(placeholderDevices$);\n  const devices = useObservableValue(devices$, EMPTY_DEVICES_ARRAY);\n\n  const getDevices = () => {\n    if (devices$ === placeholderDevices$) {\n      setDevices$(manager.listDevices());\n    }\n\n    return devices;\n  };\n\n  return { getDevices };\n}\n","import { useStreamVideoClient } from '../contexts';\nimport { useObservableValue } from './useObservableValue';\n\n/**\n * Utility hook which provides access to client's state store.\n */\nexport const useStore = () => {\n  const client = useStreamVideoClient();\n  if (!client) {\n    throw new Error(\n      `StreamVideoClient isn't initialized or this hook is called outside of <StreamVideo> context.`,\n    );\n  }\n  return client.state;\n};\n\n/**\n * Utility hook which provides a list of all notifications about created calls.\n * In the ring call settings, these calls can be outgoing (I have called somebody)\n * or incoming (somebody has called me).\n *\n * @category Client State\n */\nexport const useCalls = () => {\n  const { calls$ } = useStore();\n  return useObservableValue(calls$);\n};\n\n/**\n * Returns the current connected user.\n *\n * @category Client State\n */\nexport const useConnectedUser = () => {\n  const { connectedUser$ } = useStore();\n  return useObservableValue(connectedUser$);\n};\n","import { useCallback, useEffect, useState } from 'react';\nimport { useCall } from '../contexts';\nimport { useIsCallRecordingInProgress } from './callStateHooks';\n\n/**\n * Custom hook for toggling call recording in a video call.\n *\n * This hook provides functionality to start and stop call recording,\n * along with state management for tracking the recording status\n * and the loading indicator while awaiting a response.\n */\nexport const useToggleCallRecording = () => {\n  const call = useCall();\n  const isCallRecordingInProgress = useIsCallRecordingInProgress();\n  const [isAwaitingResponse, setIsAwaitingResponse] = useState(false);\n\n  // TODO: add permissions\n\n  useEffect(() => {\n    // we wait until call.recording_started/stopped event to flips the\n    // `isCallRecordingInProgress` state variable.\n    // Once the flip happens, we remove the loading indicator\n    setIsAwaitingResponse((isAwaiting) => {\n      if (isAwaiting) return false;\n      return isAwaiting;\n    });\n  }, [isCallRecordingInProgress]);\n\n  const toggleCallRecording = useCallback(async () => {\n    try {\n      setIsAwaitingResponse(true);\n      if (isCallRecordingInProgress) {\n        await call?.stopRecording();\n      } else {\n        await call?.startRecording();\n      }\n    } catch (e) {\n      console.error(`Failed start recording`, e);\n      throw e;\n    }\n  }, [call, isCallRecordingInProgress]);\n\n  return { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress };\n};\n","import * as CallStateHooks from './callStateHooks';\n\nexport * from './useObservableValue';\n\nexport * from './store';\nexport * from './callUtilHooks';\n\n/**\n * A hook-alike function that exposes all call state hooks.\n *\n * @category Call State\n */\nexport const useCallStateHooks = () => CallStateHooks;\n","import { OwnCapability } from '@stream-io/video-client';\n\nimport { PropsWithChildren } from 'react';\nimport { useCall } from '../contexts';\nimport { useCallStateHooks } from '../hooks';\n\ntype RestrictedProps = PropsWithChildren<{\n  /**\n   * Required grants for the component to be able to render supplied children elements\n   */\n  requiredGrants: OwnCapability[];\n  /**\n   * Render children only if user can request capability, but does not have it\n   */\n  canRequestOnly?: boolean;\n  /**\n   * Render children only if user has capability\n   */\n  hasPermissionsOnly?: boolean;\n  /**\n   * Require all grants specified in `requiredGrants` to be available in the `availableGrants`,\n   * component by default requires only one grant to appear in both arrays to render its children\n   */\n  requireAll?: boolean;\n}>;\n\nexport const Restricted = ({\n  canRequestOnly,\n  hasPermissionsOnly,\n  requiredGrants,\n  requireAll = true,\n  children,\n}: RestrictedProps) => {\n  const call = useCall();\n  const { useCallSettings, useOwnCapabilities } = useCallStateHooks();\n  const ownCapabilities = useOwnCapabilities();\n  const settings = useCallSettings();\n  const hasPermissions = requiredGrants[requireAll ? 'every' : 'some'](\n    (capability) => ownCapabilities?.includes(capability),\n  );\n\n  if (hasPermissionsOnly) return hasPermissions ? <>{children}</> : null;\n\n  const canRequest = requiredGrants.some((capability) =>\n    call?.permissionsContext.canRequest(capability, settings),\n  );\n\n  if (canRequestOnly) return canRequest ? <>{children}</> : null;\n\n  if (hasPermissions || canRequest) return <>{children}</>;\n\n  return null;\n};\n","import type { TimerHandle } from './timerHandle';\ntype SetTimeoutFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\ntype ClearTimeoutFunction = (handle: TimerHandle) => void;\n\ninterface TimeoutProvider {\n  setTimeout: SetTimeoutFunction;\n  clearTimeout: ClearTimeoutFunction;\n  delegate:\n    | {\n        setTimeout: SetTimeoutFunction;\n        clearTimeout: ClearTimeoutFunction;\n      }\n    | undefined;\n}\n\nexport const timeoutProvider: TimeoutProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setTimeout(handler: () => void, timeout?: number, ...args) {\n    const { delegate } = timeoutProvider;\n    if (delegate?.setTimeout) {\n      return delegate.setTimeout(handler, timeout, ...args);\n    }\n    return setTimeout(handler, timeout, ...args);\n  },\n  clearTimeout(handle) {\n    const { delegate } = timeoutProvider;\n    return (delegate?.clearTimeout || clearTimeout)(handle as any);\n  },\n  delegate: undefined,\n};\n","/**\n * Removes an item from an array, mutating it.\n * @param arr The array to remove the item from\n * @param item The item to remove\n */\nexport function arrRemove<T>(arr: T[] | undefined | null, item: T) {\n  if (arr) {\n    const index = arr.indexOf(item);\n    0 <= index && arr.splice(index, 1);\n  }\n}\n","/**\n * Used to create Error subclasses until the community moves away from ES5.\n *\n * This is because compiling from TypeScript down to ES5 has issues with subclassing Errors\n * as well as other built-in types: https://github.com/Microsoft/TypeScript/issues/12123\n *\n * @param createImpl A factory function to create the actual constructor implementation. The returned\n * function should be a named function that calls `_super` internally.\n */\nexport function createErrorClass<T>(createImpl: (_super: any) => any): T {\n  const _super = (instance: any) => {\n    Error.call(instance);\n    instance.stack = new Error().stack;\n  };\n\n  const ctorFunc = createImpl(_super);\n  ctorFunc.prototype = Object.create(Error.prototype);\n  ctorFunc.prototype.constructor = ctorFunc;\n  return ctorFunc;\n}\n","import { InteropObservable } from '../types';\nimport { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nexport function isInteropObservable(input: any): input is InteropObservable<any> {\n  return isFunction(input[Symbol_observable]);\n}\n","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\n\n/** Identifies an input as being an Iterable */\nexport function isIterable(input: any): input is Iterable<any> {\n  return isFunction(input?.[Symbol_iterator]);\n}\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","import { Subscriber } from '../Subscriber';\n\n/**\n * Creates an instance of an `OperatorSubscriber`.\n * @param destination The downstream subscriber.\n * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\n * error that occurs in this function is caught and sent to the `error` method of this subscriber.\n * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\n * and send to the `destination` error handler.\n * @param onComplete Handles completion notification from the subscription. Any errors that occur in\n * this handler are sent to the `destination` error handler.\n * @param onFinalize Additional teardown logic here. This will only be called on teardown if the\n * subscriber itself is not already closed. This is called after all other teardown logic is executed.\n */\nexport function createOperatorSubscriber<T>(\n  destination: Subscriber<any>,\n  onNext?: (value: T) => void,\n  onComplete?: () => void,\n  onError?: (err: any) => void,\n  onFinalize?: () => void\n): Subscriber<T> {\n  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\n\n/**\n * A generic helper for allowing operators to be created with a Subscriber and\n * use closures to capture necessary state from the operator function itself.\n */\nexport class OperatorSubscriber<T> extends Subscriber<T> {\n  /**\n   * Creates an instance of an `OperatorSubscriber`.\n   * @param destination The downstream subscriber.\n   * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\n   * error that occurs in this function is caught and sent to the `error` method of this subscriber.\n   * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\n   * and send to the `destination` error handler.\n   * @param onComplete Handles completion notification from the subscription. Any errors that occur in\n   * this handler are sent to the `destination` error handler.\n   * @param onFinalize Additional finalization logic here. This will only be called on finalization if the\n   * subscriber itself is not already closed. This is called after all other finalization logic is executed.\n   * @param shouldUnsubscribe An optional check to see if an unsubscribe call should truly unsubscribe.\n   * NOTE: This currently **ONLY** exists to support the strange behavior of {@link groupBy}, where unsubscription\n   * to the resulting observable does not actually disconnect from the source if there are active subscriptions\n   * to any grouped observable. (DO NOT EXPOSE OR USE EXTERNALLY!!!)\n   */\n  constructor(\n    destination: Subscriber<any>,\n    onNext?: (value: T) => void,\n    onComplete?: () => void,\n    onError?: (err: any) => void,\n    private onFinalize?: () => void,\n    private shouldUnsubscribe?: () => boolean\n  ) {\n    // It's important - for performance reasons - that all of this class's\n    // members are initialized and that they are always initialized in the same\n    // order. This will ensure that all OperatorSubscriber instances have the\n    // same hidden class in V8. This, in turn, will help keep the number of\n    // hidden classes involved in property accesses within the base class as\n    // low as possible. If the number of hidden classes involved exceeds four,\n    // the property accesses will become megamorphic and performance penalties\n    // will be incurred - i.e. inline caches won't be used.\n    //\n    // The reasons for ensuring all instances have the same hidden class are\n    // further discussed in this blog post from Benedikt Meurer:\n    // https://benediktmeurer.de/2018/03/23/impact-of-polymorphism-on-component-based-frameworks-like-react/\n    super(destination);\n    this._next = onNext\n      ? function (this: OperatorSubscriber<T>, value: T) {\n          try {\n            onNext(value);\n          } catch (err) {\n            destination.error(err);\n          }\n        }\n      : super._next;\n    this._error = onError\n      ? function (this: OperatorSubscriber<T>, err: any) {\n          try {\n            onError(err);\n          } catch (err) {\n            // Send any errors that occur down stream.\n            destination.error(err);\n          } finally {\n            // Ensure finalization.\n            this.unsubscribe();\n          }\n        }\n      : super._error;\n    this._complete = onComplete\n      ? function (this: OperatorSubscriber<T>) {\n          try {\n            onComplete();\n          } catch (err) {\n            // Send any errors that occur down stream.\n            destination.error(err);\n          } finally {\n            // Ensure finalization.\n            this.unsubscribe();\n          }\n        }\n      : super._complete;\n  }\n\n  unsubscribe() {\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      const { closed } = this;\n      super.unsubscribe();\n      // Execute additional teardown if we have any and we didn't already do so.\n      !closed && this.onFinalize?.();\n    }\n  }\n}\n","/** @prettier */\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * ## Example\n *\n * Ensure values in subscribe are called just before browser repaint\n *\n * ```ts\n * import { interval, observeOn, animationFrameScheduler } from 'rxjs';\n *\n * const someDiv = document.createElement('div');\n * someDiv.style.cssText = 'width: 200px;background: #09c';\n * document.body.appendChild(someDiv);\n * const intervals = interval(10);      // Intervals are scheduled\n *                                      // with async scheduler by default...\n * intervals.pipe(\n *   observeOn(animationFrameScheduler) // ...but we will observe on animationFrame\n * )                                    // scheduler to ensure smooth animation.\n * .subscribe(val => {\n *   someDiv.style.height = val + 'px';\n * });\n * ```\n *\n * @see {@link delay}\n *\n * @param scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param delay Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return A function that returns an Observable that emits the same\n * notifications as the source Observable, but with provided scheduler.\n */\nexport function observeOn<T>(scheduler: SchedulerLike, delay = 0): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => executeSchedule(subscriber, scheduler, () => subscriber.next(value), delay),\n        () => executeSchedule(subscriber, scheduler, () => subscriber.complete(), delay),\n        (err) => executeSchedule(subscriber, scheduler, () => subscriber.error(err), delay)\n      )\n    );\n  });\n}\n","import { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { operate } from '../util/lift';\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified {@link SchedulerLike}.\n *\n * With `subscribeOn` you can decide what type of scheduler a specific Observable will be using when it is subscribed to.\n *\n * Schedulers control the speed and order of emissions to observers from an Observable stream.\n *\n * ![](subscribeOn.png)\n *\n * ## Example\n *\n * Given the following code:\n *\n * ```ts\n * import { of, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3);\n * const b = of(4, 5, 6);\n *\n * merge(a, b).subscribe(console.log);\n *\n * // Outputs\n * // 1\n * // 2\n * // 3\n * // 4\n * // 5\n * // 6\n * ```\n *\n * Both Observable `a` and `b` will emit their values directly and synchronously once they are subscribed to.\n *\n * If we instead use the `subscribeOn` operator declaring that we want to use the {@link asyncScheduler} for values emitted by Observable `a`:\n *\n * ```ts\n * import { of, subscribeOn, asyncScheduler, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3).pipe(subscribeOn(asyncScheduler));\n * const b = of(4, 5, 6);\n *\n * merge(a, b).subscribe(console.log);\n *\n * // Outputs\n * // 4\n * // 5\n * // 6\n * // 1\n * // 2\n * // 3\n * ```\n *\n * The reason for this is that Observable `b` emits its values directly and synchronously like before\n * but the emissions from `a` are scheduled on the event loop because we are now using the {@link asyncScheduler} for that specific Observable.\n *\n * @param scheduler The {@link SchedulerLike} to perform subscription actions on.\n * @param delay A delay to pass to the scheduler to delay subscriptions\n * @return A function that returns an Observable modified so that its\n * subscriptions happen on the specified {@link SchedulerLike}.\n */\nexport function subscribeOn<T>(scheduler: SchedulerLike, delay: number = 0): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    subscriber.add(scheduler.schedule(() => source.subscribe(subscriber), delay));\n  });\n}\n","import { SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\n\nexport function scheduleAsyncIterable<T>(input: AsyncIterable<T>, scheduler: SchedulerLike) {\n  if (!input) {\n    throw new Error('Iterable cannot be null');\n  }\n  return new Observable<T>((subscriber) => {\n    executeSchedule(subscriber, scheduler, () => {\n      const iterator = input[Symbol.asyncIterator]();\n      executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          iterator.next().then((result) => {\n            if (result.done) {\n              // This will remove the subscriptions from\n              // the parent subscription.\n              subscriber.complete();\n            } else {\n              subscriber.next(result.value);\n            }\n          });\n        },\n        0,\n        true\n      );\n    });\n  });\n}\n","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { ObservableInput, SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\n\n/**\n * Converts from a common {@link ObservableInput} type to an observable where subscription and emissions\n * are scheduled on the provided scheduler.\n *\n * @see {@link from}\n * @see {@link of}\n *\n * @param input The observable, array, promise, iterable, etc you would like to schedule\n * @param scheduler The scheduler to use to schedule the subscription and emissions from\n * the returned observable.\n */\nexport function scheduled<T>(input: ObservableInput<T>, scheduler: SchedulerLike): Observable<T> {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    }\n    if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    }\n    if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    }\n    if (isAsyncIterable(input)) {\n      return scheduleAsyncIterable(input, scheduler);\n    }\n    if (isIterable(input)) {\n      return scheduleIterable(input, scheduler);\n    }\n    if (isReadableStreamLike(input)) {\n      return scheduleReadableStreamLike(input, scheduler);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\n","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { InteropObservable, SchedulerLike } from '../types';\n\nexport function scheduleObservable<T>(input: InteropObservable<T>, scheduler: SchedulerLike) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\nexport function scheduleArray<T>(input: ArrayLike<T>, scheduler: SchedulerLike) {\n  return new Observable<T>((subscriber) => {\n    // The current array index.\n    let i = 0;\n    // Start iterating over the array like on a schedule.\n    return scheduler.schedule(function () {\n      if (i === input.length) {\n        // If we have hit the end of the array like in the\n        // previous job, we can complete.\n        subscriber.complete();\n      } else {\n        // Otherwise let's next the value at the current index,\n        // then increment our index.\n        subscriber.next(input[i++]);\n        // If the last emission didn't cause us to close the subscriber\n        // (via take or some side effect), reschedule the job and we'll\n        // make another pass.\n        if (!subscriber.closed) {\n          this.schedule();\n        }\n      }\n    });\n  });\n}\n","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { SchedulerLike } from '../types';\n\nexport function schedulePromise<T>(input: PromiseLike<T>, scheduler: SchedulerLike) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\n\n/**\n * Used in {@link scheduled} to create an observable from an Iterable.\n * @param input The iterable to create an observable from\n * @param scheduler The scheduler to use\n */\nexport function scheduleIterable<T>(input: Iterable<T>, scheduler: SchedulerLike) {\n  return new Observable<T>((subscriber) => {\n    let iterator: Iterator<T, T>;\n\n    // Schedule the initial creation of the iterator from\n    // the iterable. This is so the code in the iterable is\n    // not called until the scheduled job fires.\n    executeSchedule(subscriber, scheduler, () => {\n      // Create the iterator.\n      iterator = (input as any)[Symbol_iterator]();\n\n      executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          let value: T;\n          let done: boolean | undefined;\n          try {\n            // Pull the value out of the iterator\n            ({ value, done } = iterator.next());\n          } catch (err) {\n            // We got an error while pulling from the iterator\n            subscriber.error(err);\n            return;\n          }\n\n          if (done) {\n            // If it is \"done\" we just complete. This mimics the\n            // behavior of JavaScript's `for..of` consumption of\n            // iterables, which will not emit the value from an iterator\n            // result of `{ done: true: value: 'here' }`.\n            subscriber.complete();\n          } else {\n            // The iterable is not done, emit the value.\n            subscriber.next(value);\n          }\n        },\n        0,\n        true\n      );\n    });\n\n    // During finalization, if we see this iterator has a `return` method,\n    // then we know it is a Generator, and not just an Iterator. So we call\n    // the `return()` function. This will ensure that any `finally { }` blocks\n    // inside of the generator we can hit will be hit properly.\n    return () => isFunction(iterator?.return) && iterator.return();\n  });\n}\n","import { SchedulerLike, ReadableStreamLike } from '../types';\nimport { Observable } from '../Observable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\n\nexport function scheduleReadableStreamLike<T>(input: ReadableStreamLike<T>, scheduler: SchedulerLike): Observable<T> {\n  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n","import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\nimport { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\n\nexport function from<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function from<O extends ObservableInput<any>>(input: O, scheduler: SchedulerLike | undefined): Observable<ObservedValueOf<O>>;\n\n/**\n * Creates an Observable from an Array, an array-like object, a Promise, an iterable object, or an Observable-like object.\n *\n * <span class=\"informal\">Converts almost anything to an Observable.</span>\n *\n * ![](from.png)\n *\n * `from` converts various other objects and data types into Observables. It also converts a Promise, an array-like, or an\n * <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable\" target=\"_blank\">iterable</a>\n * object into an Observable that emits the items in that promise, array, or iterable. A String, in this context, is treated\n * as an array of characters. Observable-like objects (contains a function named with the ES2015 Symbol for Observable) can also be\n * converted through this operator.\n *\n * ## Examples\n *\n * Converts an array to an Observable\n *\n * ```ts\n * import { from } from 'rxjs';\n *\n * const array = [10, 20, 30];\n * const result = from(array);\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 10\n * // 20\n * // 30\n * ```\n *\n * Convert an infinite iterable (from a generator) to an Observable\n *\n * ```ts\n * import { from, take } from 'rxjs';\n *\n * function* generateDoubles(seed) {\n *    let i = seed;\n *    while (true) {\n *      yield i;\n *      i = 2 * i; // double it\n *    }\n * }\n *\n * const iterator = generateDoubles(3);\n * const result = from(iterator).pipe(take(10));\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 3\n * // 6\n * // 12\n * // 24\n * // 48\n * // 96\n * // 192\n * // 384\n * // 768\n * // 1536\n * ```\n *\n * With `asyncScheduler`\n *\n * ```ts\n * import { from, asyncScheduler } from 'rxjs';\n *\n * console.log('start');\n *\n * const array = [10, 20, 30];\n * const result = from(array, asyncScheduler);\n *\n * result.subscribe(x => console.log(x));\n *\n * console.log('end');\n *\n * // Logs:\n * // 'start'\n * // 'end'\n * // 10\n * // 20\n * // 30\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link fromEventPattern}\n *\n * @param input A subscription object, a Promise, an Observable-like,\n * an Array, an iterable, or an array-like object to be converted.\n * @param scheduler An optional {@link SchedulerLike} on which to schedule the emission of values.\n * @return An Observable converted from {@link ObservableInput}.\n */\nexport function from<T>(input: ObservableInput<T>, scheduler?: SchedulerLike): Observable<T> {\n  return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","import { config } from '../config';\n\nlet context: { errorThrown: boolean; error: any } | null = null;\n\n/**\n * Handles dealing with errors for super-gross mode. Creates a context, in which\n * any synchronously thrown errors will be passed to {@link captureError}. Which\n * will record the error such that it will be rethrown after the call back is complete.\n * TODO: Remove in v8\n * @param cb An immediately executed function.\n */\nexport function errorContext(cb: () => void) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    const isRoot = !context;\n    if (isRoot) {\n      context = { errorThrown: false, error: null };\n    }\n    cb();\n    if (isRoot) {\n      const { errorThrown, error } = context!;\n      context = null;\n      if (errorThrown) {\n        throw error;\n      }\n    }\n  } else {\n    // This is the general non-deprecated path for everyone that\n    // isn't crazy enough to use super-gross mode (useDeprecatedSynchronousErrorHandling)\n    cb();\n  }\n}\n\n/**\n * Captures errors only in super-gross mode.\n * @param err the error to capture\n */\nexport function captureError(err: any) {\n  if (config.useDeprecatedSynchronousErrorHandling && context) {\n    context.errorThrown = true;\n    context.error = err;\n  }\n}\n","import { identity } from './identity';\nimport { UnaryFunction } from '../types';\n\nexport function pipe(): typeof identity;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>\n): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>\n): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>\n): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>\n): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>\n): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>,\n  fn9: UnaryFunction<H, I>\n): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>,\n  fn9: UnaryFunction<H, I>,\n  ...fns: UnaryFunction<any, any>[]\n): UnaryFunction<T, unknown>;\n\n/**\n * pipe() can be called on one or more functions, each of which can take one argument (\"UnaryFunction\")\n * and uses it to return a value.\n * It returns a function that takes one argument, passes it to the first UnaryFunction, and then\n * passes the result to the next one, passes that result to the next one, and so on.  \n */\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (fns.length === 0) {\n    return identity as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n","import { Operator } from './Operator';\nimport { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription, Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, Subscribable, Observer } from './types';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n */\nexport class Observable<T> implements Subscribable<T> {\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  source: Observable<any> | undefined;\n\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  operator: Operator<any, T> | undefined;\n\n  /**\n   * @param subscribe The function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new Observable by calling the Observable constructor\n   * @param subscribe the subscriber function to be passed to the Observable constructor\n   * @return A new observable.\n   * @deprecated Use `new Observable()` instead. Will be removed in v8.\n   */\n  static create: (...args: any[]) => any = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  };\n\n  /**\n   * Creates a new Observable, with this Observable instance as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @param operator the operator defining the operation to take on the observable\n   * @return A new observable with the Operator applied.\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   * If you have implemented an operator using `lift`, it is recommended that you create an\n   * operator by simply returning `new Observable()` directly. See \"Creating new operators from\n   * scratch\" section here: https://rxjs.dev/guide/operators\n   */\n  lift<R>(operator?: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observerOrNext?: Partial<Observer<T>> | ((value: T) => void)): Subscription;\n  /** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\n  subscribe(next?: ((value: T) => void) | null, error?: ((error: any) => void) | null, complete?: (() => void) | null): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular, do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided and an error happens,\n   * it will be thrown asynchronously. Errors thrown asynchronously cannot be caught using `try`/`catch`. Instead,\n   * use the {@link onUnhandledError} configuration option or use a runtime handler (like `window.onerror` or\n   * `process.on('error)`) to be notified of unhandled errors. Because of this, it's recommended that you provide\n   * an `error` method to avoid missing thrown errors.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of an Observer,\n   * if you do not need to listen for something, you can omit a function by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to the `error` function, as with an Observer, if not provided, errors emitted by an Observable will be thrown asynchronously.\n   *\n   * You can, however, subscribe with no parameters at all. This may be the case where you're not interested in terminal events\n   * and you also handled emissions internally by using operators (e.g. using `tap`).\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * #### Examples\n   *\n   * Subscribe with an {@link guide/observer Observer}\n   *\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // 'Adding: 1'\n   * // 'Adding: 2'\n   * // 'Adding: 3'\n   * // 'Sum equals: 6'\n   * ```\n   *\n   * Subscribe with functions ({@link deprecations/subscribe-arguments deprecated})\n   *\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // 'Adding: 1'\n   * // 'Adding: 2'\n   * // 'Adding: 3'\n   * // 'Sum equals: 6'\n   * ```\n   *\n   * Cancel a subscription\n   *\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe({\n   *   next(num) {\n   *     console.log(num)\n   *   },\n   *   complete() {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * });\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // 'unsubscribed!' after 2.5s\n   * ```\n   *\n   * @param observerOrNext Either an {@link Observer} with some or all callback methods,\n   * or the `next` handler that is called for each value emitted from the subscribed Observable.\n   * @param error A handler for a terminal event resulting from an error. If no error handler is provided,\n   * the error will be thrown asynchronously as unhandled.\n   * @param complete A handler for a terminal event resulting from successful completion.\n   * @return A subscription reference to the registered handlers.\n   */\n  subscribe(\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\n    error?: ((error: any) => void) | null,\n    complete?: (() => void) | null\n  ): Subscription {\n    const subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n\n    errorContext(() => {\n      const { operator, source } = this;\n      subscriber.add(\n        operator\n          ? // We're dealing with a subscription in the\n            // operator chain to one of our lifted operators.\n            operator.call(subscriber, source)\n          : source\n          ? // If `source` has a value, but `operator` does not, something that\n            // had intimate knowledge of our API, like our `Subject`, must have\n            // set it. We're going to just call `_subscribe` directly.\n            this._subscribe(subscriber)\n          : // In all other cases, we're likely wrapping a user-provided initializer\n            // function, so we need to catch errors and handle them appropriately.\n            this._trySubscribe(subscriber)\n      );\n    });\n\n    return subscriber;\n  }\n\n  /** @internal */\n  protected _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      // We don't need to return anything in this case,\n      // because it's just going to try to `add()` to a subscription\n      // above.\n      sink.error(err);\n    }\n  }\n\n  /**\n   * Used as a NON-CANCELLABLE means of subscribing to an observable, for use with\n   * APIs that expect promises, like `async/await`. You cannot unsubscribe from this.\n   *\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\n   * observable does not complete, you will end up with a promise that is hung up, and\n   * potentially all of the state of an async function hanging out in memory. To avoid\n   * this situation, look into adding something like {@link timeout}, {@link take},\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\n   *\n   * #### Example\n   *\n   * ```ts\n   * import { interval, take } from 'rxjs';\n   *\n   * const source$ = interval(1000).pipe(take(4));\n   *\n   * async function getTotal() {\n   *   let total = 0;\n   *\n   *   await source$.forEach(value => {\n   *     total += value;\n   *     console.log('observable -> ' + value);\n   *   });\n   *\n   *   return total;\n   * }\n   *\n   * getTotal().then(\n   *   total => console.log('Total: ' + total)\n   * );\n   *\n   * // Expected:\n   * // 'observable -> 0'\n   * // 'observable -> 1'\n   * // 'observable -> 2'\n   * // 'observable -> 3'\n   * // 'Total: 6'\n   * ```\n   *\n   * @param next A handler for each value emitted by the observable.\n   * @return A promise that either resolves on observable completion or\n   * rejects with the handled error.\n   */\n  forEach(next: (value: T) => void): Promise<void>;\n\n  /**\n   * @param next a handler for each value emitted by the observable\n   * @param promiseCtor a constructor function used to instantiate the Promise\n   * @return a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   * @deprecated Passing a Promise constructor will no longer be available\n   * in upcoming versions of RxJS. This is because it adds weight to the library, for very\n   * little benefit. If you need this functionality, it is recommended that you either\n   * polyfill Promise, or you create an adapter to convert the returned native promise\n   * to whatever promise implementation you wanted. Will be removed in v8.\n   */\n  forEach(next: (value: T) => void, promiseCtor: PromiseConstructorLike): Promise<void>;\n\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      const subscriber = new SafeSubscriber<T>({\n        next: (value) => {\n          try {\n            next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve,\n      });\n      this.subscribe(subscriber);\n    }) as Promise<void>;\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    return this.source?.subscribe(subscriber);\n  }\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @return This instance of the observable.\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>\n  ): Observable<D>;\n  pipe<A, B, C, D, E>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>\n  ): Observable<E>;\n  pipe<A, B, C, D, E, F>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>\n  ): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>\n  ): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>\n  ): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>,\n    op9: OperatorFunction<H, I>\n  ): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>,\n    op9: OperatorFunction<H, I>,\n    ...operations: OperatorFunction<any, any>[]\n  ): Observable<unknown>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   *\n   * ## Example\n   *\n   * ```ts\n   * import { interval, filter, map, scan } from 'rxjs';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x));\n   * ```\n   *\n   * @return The Observable result of all the operators having been called\n   * in the order they were passed in.\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(): Promise<T | undefined>;\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(PromiseCtor: typeof Promise): Promise<T | undefined>;\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(PromiseCtor: PromiseConstructorLike): Promise<T | undefined>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Subscribe to this Observable and get a Promise resolving on\n   * `complete` with the last emission (if any).\n   *\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\n   * observable does not complete, you will end up with a promise that is hung up, and\n   * potentially all of the state of an async function hanging out in memory. To avoid\n   * this situation, look into adding something like {@link timeout}, {@link take},\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\n   *\n   * @param [promiseCtor] a constructor function used to instantiate\n   * the Promise\n   * @return A Promise that resolves with the last value emit, or\n   * rejects on an error. If there were no emissions, Promise\n   * resolves with undefined.\n   * @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise\n   */\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T | undefined> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: T | undefined;\n      this.subscribe(\n        (x: T) => (value = x),\n        (err: any) => reject(err),\n        () => resolve(value)\n      );\n    }) as Promise<T | undefined>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  return promiseCtor ?? config.Promise ?? Promise;\n}\n\nfunction isObserver<T>(value: any): value is Observer<T> {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\n\nfunction isSubscriber<T>(value: any): value is Subscriber<T> {\n  return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n","var parser = require('./parser');\nvar writer = require('./writer');\nvar grammar = require('./grammar');\n\nexports.grammar = grammar;\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n"],"names":["createInvalidObservableTypeError","input","TypeError","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","length","parseFloat","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","prototype","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","this","arguments","wrappedCallback","e","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","has","unwrappedCb","get","delete","size","Object","keys","defineProperty","enumerable","configurable","disableLog","bool","Error","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","isObject","val","toString","call","compactObject","data","reduce","accumulator","key","isObj","value","isEmptyObject","undefined","assign","walkStats","stats","base","resultSet","id","forEach","name","endsWith","filterStats","result","track","outbound","streamStatsType","filteredResult","trackStats","type","trackIdentifier","push","trackStat","trackId","logging","utils","shimGetUserMedia","browserDetails","navigator","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","slice","oc","mix","advanced","concat","shimConstraints_","constraints","func","version","JSON","parse","stringify","audio","remap","obj","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","dev","filter","d","kind","find","some","label","toLowerCase","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","error","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","event","Event","transceiver","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","origRemoveStream","removeStream","s","RTCRtpSender","origGetSenders","senders","shimGetStats","origGetStats","getStats","selector","onSucc","onErr","fixChromeStats_","response","standardReport","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","map","successCallbackWrapper_","resolve","shimSenderReceiverGetStats","RTCRtpReceiver","origGetReceivers","receivers","srcElement","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","description","sdp","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","signalingState","t","oldStream","method","nativeMethod","methodObj","args","desc","origSetLocalDescription","setLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","streamid","shimPeerConnection","webkitRTCPeerConnection","RTCIceCandidate","fixNegotiationNeeded","target","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","code","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","i","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","sendEncodings","shouldPerformCheck","encodingParam","test","rid","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","catch","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","_len","Array","_key","index","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","addIceCandidate","successCallback","failureCallback","options","promise","withCallback","candidate","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","url","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","substring","nativeCandidate","parsedCandidate","SDPUtils","toJSON","sdpMid","sdpMLineIndex","usernameFragment","writable","shimRTCIceCandidateRelayProtocol","relayProtocol","priority","shimMaxMessageSize","_sctp","browser","sections","shift","mediaSection","mLine","protocol","sctpInDescription","isFirefox","parseInt","getRemoteFirefoxVersion","canSendMMS","remoteIsFirefox","canSendMaxMessageSize","getCanSendMaxMessageSize","remoteMMS","maxMessageSize","getMaxMessageSize","Number","POSITIVE_INFINITY","Math","sctp","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","send","byteLength","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","_safariVersion","nativeSRD","split","line","trim","join","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","shimChrome","shimFirefox","shimSafari","userAgent","mozGetUserMedia","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","adapter","commonShim","chromeShim","browserShim","firefoxShim","safariShim","adapterFactory","MESSAGE_TYPE","Symbol","for","lowerCamelCase","snakeCase","capNext","sb","next","ScalarType","LongType","RepeatType","normalizeFieldInfo","field","_a","_b","_c","_d","localName","jsonName","repeat","NO","opt","oneof","isOneofGroup","any","hasOwnProperty","oneofKind","ReflectionTypeCheck","constructor","info","fields","prepare","req","known","oneofs","values","is","depth","allowExcessProperties","n","k","group","arg","repeated","scalars","T","L","scalar","INT32","messages","mapKeys","K","V","isAssignable","isArray","longType","argType","UINT64","FIXED64","INT64","SFIXED64","SINT64","BIGINT","NUMBER","isNaN","BOOL","STRING","BYTES","Uint8Array","DOUBLE","FLOAT","isInteger","FIXED32","SFIXED32","SINT32","UINT32","typeofJsonValue","isJsonObject","encTable","decTable","charCodeAt","varint64read","lowBits","highBits","buf","assertBounds","middleByte","varint64write","lo","hi","bytes","hasNext","byte","splitBits","hasMoreBits","TWO_PWR_32_DBL","int64fromString","dec","minus","add1e6digit","begin","end","digit1e6","int64toString","bitsLow","bitsHigh","mid","high","digitA","digitB","digitC","decimalFrom1e7","digit1e7","needLeadingZeros","partial","String","floor","varint32write","varint32read","readBytes","BI","assertBi","bi","dv","DataView","ArrayBuffer","ok","globalThis","BigInt","getBigInt64","getBigUint64","setBigInt64","setBigUint64","MIN","MAX","UMIN","UMAX","C","detectBi","RE_DECIMAL_STR","HALF_2_PWR_32","SharedPbLong","isZero","toNumber","isSafeInteger","PbULong","from","ZERO","getInt32","toBigInt","setInt32","PbLong","pbl","negate","isNegative","assert","condition","msg","assertInt32","assertUInt32","assertFloat32","isFinite","reflectionLongConvert","long","ReflectionJsonReader","fMap","fieldsInput","fieldName","jsonValue","what","typeName","read","oneofsHandled","jsonKey","entries","ignoreUnknownFields","fieldObj","jsonObjKey","jsonObjValue","internalJsonRead","enum","fieldArr","jsonItem","json","localEnumName","enumNumber","NaN","NEGATIVE_INFINITY","float","int32","encodeURIComponent","base64Str","es","bytePos","groupPos","p","subarray","base64decode","ReflectionJsonWriter","write","source","useProtoFieldName","emitDefaultValues","jsonObj","entryKey","entryValue","messageType","enumInfo","enumAsInteger","jsonArr","internalJsonWrite","ed","ulong","base64","base64encode","UnknownFieldHandler","WireType","reflectionScalarDefault","symbol","onRead","fieldNo","wireType","no","onWrite","writer","list","tag","raw","uf","last","ReflectionBinaryReader","fieldNoToField","reader","len","u","readUnknownField","skip","arr","LengthDelimited","uint32","internalBinaryRead","mapKey","mapVal","mapEntry","keyRaw","create","string","double","int64","uint64","fixed64","fixed32","sfixed32","sfixed64","sint32","sint64","ReflectionBinaryWriter","sort","emitDefault","PACKED","packed","item","writeUnknownFields","fork","keyValue","handler","internalBinaryWrite","isDefault","scalarInfo","m","Varint","Bit64","Bit32","reflectionMergePartial","fieldValue","output","mergePartial","defaultsWrite","prettySpaces","defaultsRead","mergeJsonOptions","typeRegistry","objectValues","primitiveEq","ba","bb","repeatedPrimitiveEq","repeatedMsgEq","equals","writerFactory","BinaryWriter","textEncoder","stack","TextEncoder","chunks","finish","offset","chunk","prev","pop","encode","buffer","setFloat32","setFloat64","setUint32","view","sign","readerFactory","BinaryReader","textDecoder","varint64","byteOffset","TextDecoder","fatal","ignoreBOM","start","StartGroup","EndGroup","zze","getUint32","getFloat32","getFloat64","decode","baseDescriptors","getOwnPropertyDescriptors","getPrototypeOf","MessageType","defaultCheckDepth","messagePrototype","refTypeCheck","refJsonReader","refJsonWriter","refBinReader","refBinWriter","reflectionCreate","clone","copy","val_a","val_b","reflectionEquals","fromBinary","binaryReadOptions","fromJson","jsonReadOptions","fromJsonString","toJson","jsonWriteOptions","toJsonString","toBinary","binaryWriteOptions","stackIntercept","transport","tail","mtd","inp","unary","curr","interceptors","interceptUnary","reverse","serverStreaming","interceptServerStreaming","clientStreaming","interceptClientStreaming","duplex","interceptDuplex","assertNever","RpcError","meta","super","setPrototypeOf","l","serviceName","methodName","v","fn","thisArg","iterator","toStringTag","kindOf","cache","thing","str","kindOfTest","typeOfTest","isUndefined","isArrayBuffer","isString","isFunction","isNumber","isPlainObject","isDate","isFile","isBlob","isFileList","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","allOwnKeys","getOwnPropertyNames","findKey","_global","self","global","isContextDefined","context","isTypedArray","TypedArray","isHTMLForm","_ref","prop","isRegExp","reduceDescriptors","reducer","descriptors","reducedDescriptors","descriptor","ret","defineProperties","isAsyncFn","_setImmediate","setImmediateSupported","postMessageSupported","setImmediate","token","random","callbacks","_ref2","postMessage","setTimeout","asap","queueMicrotask","process","nextTick","isBuffer","isFormData","FormData","append","isArrayBufferView","isView","isBoolean","isStream","pipe","merge","caseless","assignValue","targetKey","extend","stripBOM","content","inherits","superConstructor","props","toFlatObject","sourceObj","destObj","propFilter","merged","searchString","position","lastIndex","toArray","forEachEntry","_iterator","done","pair","matchAll","regExp","exec","hasOwnProp","freezeMethods","toObjectSet","arrayOrString","delimiter","define","toCamelCase","p1","p2","noop","toFiniteNumber","defaultValue","isSpecCompliantForm","toJSONObject","visit","reducedValue","isThenable","isIterable","AxiosError","config","request","captureStackTrace","status","number","fileName","lineNumber","columnNumber","customProps","axiosError","cause","isVisitable","removeBrackets","renderKey","path","dots","predicates","formData","metaTokens","indexes","option","visitor","defaultVisitor","useBlob","Blob","convertValue","toISOString","Buffer","isFlatArray","el","exposedHelpers","build","charMap","AxiosURLSearchParams","_pairs","toFormData","encoder","_encode","buildURL","serialize","serializeFn","serializedParams","hashmarkIndex","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","clear","h","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","isBrowser","classes","URLSearchParams","protocols","hasBrowserEnv","document","_navigator","hasStandardBrowserEnv","product","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","origin","location","href","platform","buildPath","isNumericKey","isLast","arrayToObject","parsePropPath","defaults","transitional","transitionalDefaults","transformRequest","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","formDataToJSON","setContentType","helpers","isNode","toURLEncodedForm","formSerializer","_FormData","env","rawValue","parser","stringifySafely","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","ignoreDuplicateOf","$internals","normalizeHeader","header","normalizeValue","matchHeaderValue","isHeaderNameFilter","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","rawHeaders","parsed","parseHeaders","dest","entry","tokens","tokensRE","parseTokens","matcher","deleted","deleteHeader","normalize","format","normalized","w","char","formatHeader","targets","asStrings","getSetCookie","first","computed","_len2","_key2","accessor","accessors","defineAccessor","accessorName","arg1","arg2","arg3","buildAccessors","mapped","headerValue","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","settle","ERR_BAD_REQUEST","samplesCount","timestamps","firstSampleTS","head","chunkLength","now","Date","startedAt","bytesCount","passed","round","freq","lastArgs","timer","threshold","invoke","clearTimeout","flush","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","speedometer","throttle","loaded","total","lengthComputable","progressBytes","rate","progress","estimated","progressEventDecorator","throttled","asyncDecorator","isMSIE","URL","host","port","expires","domain","secure","cookie","toGMTString","decodeURIComponent","remove","buildFullPath","baseURL","requestedURL","allowAbsoluteUrls","isRelativeUrl","relativeURL","combineURLs","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","paramsSerializer","timeoutMessage","withCredentials","withXSRFToken","onUploadProgress","onDownloadProgress","decompress","beforeRedirect","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding","configValue","newConfig","auth","btoa","username","password","unescape","Boolean","isURLSameOrigin","xsrfValue","cookies","XMLHttpRequest","_config","resolveConfig","requestData","requestHeaders","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","unsubscribe","signal","onloadend","responseHeaders","getAllResponseHeaders","responseText","statusText","open","onreadystatechange","responseURL","onabort","ECONNABORTED","onerror","ERR_NETWORK","ontimeout","timeoutErrorMessage","ETIMEDOUT","setRequestHeader","upload","cancel","abort","subscribe","aborted","parseProtocol","composeSignals","signals","controller","AbortController","reason","streamChunk","chunkSize","readStream","async","asyncIterator","getReader","trackStream","onProgress","onFinish","iterable","_onFinish","ReadableStream","pull","close","loadedBytes","enqueue","return","highWaterMark","isFetchSupported","fetch","Request","Response","isReadableStreamSupported","encodeText","arrayBuffer","supportsRequestStream","duplexAccessed","hasContentType","body","supportsResponseStream","resolvers","res","_","ERR_NOT_SUPPORT","resolveBodyLength","getContentLength","_request","getBodyLength","knownAdapters","http","xhr","xhrAdapter","fetchOptions","composedSignal","toAbortSignal","requestContentLength","contentTypeHeader","isCredentialsSupported","credentials","isStreamResponse","responseContentLength","responseData","renderReason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","state","throwIfCancellationRequested","throwIfRequested","dispatchRequest","VERSION","validators","deprecatedWarnings","validator","formatMessage","opts","ERR_DEPRECATED","spelling","correctSpelling","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","InterceptorManager","configOrUrl","dummy","boolean","function","baseUrl","withXsrfToken","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","unshift","responseInterceptorChain","chain","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","axios","createInstance","defaultConfig","instance","Cancel","promises","spread","callback","isAxiosError","payload","formToJSON","getAdapter","default","TwirpErrorCode","DeferredState","createTwirpRequestHeader","sendJson","into","getTime","Deferred","preventUnhandledRejectionWarning","_state","PENDING","_promise","_reject","RESOLVED","REJECTED","resolvePending","rejectPending","__awaiter","_arguments","P","generator","step","UnaryCall","trailers","onrejected","promiseFinished","TwirpFetchTransport","defaultOptions","mergeOptions","o","jsonOptions","binaryOptions","mergeRpcOptions","makeUrl","fetchInit","requestBody","I","defHeader","defMessage","defStatus","defTrailer","Headers","fetchResponse","parseMetadataFromResponseHeaders","unknown","O","dataloss","internal","parseTwirpErrorResponse","cancelled","detail","service","useProtoMethodName","unimplemented","ObjectUnsubscribedError","createErrorClass","_super","Subject","_this","closed","currentObservers","observers","isStopped","hasError","thrownError","__extends","lift","operator","subject","AnonymousSubject","_throwIfClosed","errorContext","__values","complete","_trySubscribe","subscriber","_subscribe","_checkFinalizedStatuses","_innerSubscribe","EMPTY_SUBSCRIPTION","Subscription","arrRemove","asObservable","observable","Observable","destination","dateTimestampProvider","delegate","ReplaySubject","_bufferSize","_windowTime","_timestampProvider","Infinity","_buffer","_infiniteTimeWindow","_trimBuffer","subscription","adjustedBufferSize","objectProto","getKeys","argsArgArrayOrObject","first_1","project","operate","createOperatorSubscriber","mapOneOrManyArgs","__spreadArray","__read","callOrApply","combineLatest","_i","scheduler","popScheduler","resultSelector","popResultSelector","observables","valueTransform","identity","maybeSchedule","active","remainingFirstValues","hasFirstValue","combineLatestInit","createObject","execute","executeSchedule","BehaviorSubject","getValue","handleReset","reset","on","onSubscriber","SafeSubscriber","innerFrom","shareReplay","configOrBufferSize","windowTime","bufferSize","refCount","connector","resetOnError","resetOnComplete","resetOnRefCountZero","wrapperSource","connection","resetConnection","hasCompleted","hasErrored","cancelReset","resetAndUnsubscribe","conn","add","share","distinctUntilChanged","comparator","keySelector","defaultCompare","previousKey","currentKey","takeWhile","predicate","inclusive","distinctUntilKeyChanged","compare","x","y","fromEventPattern","addHandler","removeHandler","retValue","concurrent","ii","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","isComplete","checkComplete","outerNext","doInnerSub","innerComplete","innerValue","bufferedValue","mergeInternals","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","eventName","isEventTarget","addListener","removeListener","isNodeStyleEventEmitter","toCommonHandlerRegistry","off","isJQueryStyleEventEmitter","isArrayLike","subTarget","Action","work","schedule","delay","intervalProvider","setInterval","clearInterval","handle","AsyncAction","pending","recycleAsyncId","requestAsyncId","_id","_scheduler","_execute","_delay","errorValue","errored","actions","Scheduler","schedulerActionCtor","asyncScheduler","AsyncScheduler","SchedulerAction","_active","action","mergeAll","EMPTY","popNumber","sources","concatAll","startWith","concatMap","NoiseCancellationSettingsModeEnum","OwnCapability","BLOCK_USERS","CHANGE_MAX_DURATION","CREATE_CALL","CREATE_REACTION","ENABLE_NOISE_CANCELLATION","END_CALL","JOIN_BACKSTAGE","JOIN_CALL","JOIN_ENDED_CALL","MUTE_USERS","PIN_FOR_EVERYONE","READ_CALL","REMOVE_CALL_MEMBER","SCREENSHARE","SEND_AUDIO","SEND_VIDEO","START_BROADCAST_CALL","START_CLOSED_CAPTIONS_CALL","START_FRAME_RECORD_CALL","START_RECORD_CALL","START_TRANSCRIPTION_CALL","STOP_BROADCAST_CALL","STOP_CLOSED_CAPTIONS_CALL","STOP_FRAME_RECORD_CALL","STOP_RECORD_CALL","STOP_TRANSCRIPTION_CALL","UPDATE_CALL","UPDATE_CALL_MEMBER","UPDATE_CALL_PERMISSIONS","UPDATE_CALL_SETTINGS","ErrorFromResponse","unrecoverable","extra","joinable","NullValue","Struct","Value","ListValue","boolValue","numberValue","stringValue","listValueField","listValue","structValueField","structValue","nullValue","NULL_VALUE","Timestamp","ms","seconds","nanos","toDate","ceil","fromDate","date","z","nanosStr","PeerType","ConnectionQuality","VideoQuality","TrackType","ErrorCode","SdkType","TrackUnpublishReason","GoAwayReason","CallEndedReason","WebsocketReconnectStrategy","AndroidThermalState","AppleThermalState","CallState$1","Participant","ParticipantCount","Pin","StreamQuality","VideoDimension","VideoLayer","SubscribeOption","Codec","PublishOption","ICETrickle$1","TrackInfo","Error$2","ClientDetails","Sdk","OS","Browser","Device","RTMPIngress","Call$1","CallGrants","InputDevices","AndroidState","AppleState","PerformanceStats","StartNoiseCancellationRequest","StartNoiseCancellationResponse","StopNoiseCancellationRequest","StopNoiseCancellationResponse","Reconnection","Telemetry","SendStatsRequest","SendStatsResponse","ICERestartRequest","ICERestartResponse","UpdateMuteStatesRequest","TrackMuteState","UpdateMuteStatesResponse","UpdateSubscriptionsRequest","TrackSubscriptionDetails","UpdateSubscriptionsResponse","SendAnswerRequest","SendAnswerResponse","ICETrickleResponse","SetPublisherRequest","SetPublisherResponse","SignalServer","methods","idempotency","normalizeMethodInfo","SfuEvent","SubscriberOffer","PublisherAnswer","ConnectionQualityChanged","AudioLevelChanged","ChangePublishQuality","ParticipantJoined","ParticipantLeft","DominantSpeakerChanged","JoinResponse","HealthCheckResponse","TrackPublished","TrackUnpublished","Error$1","CallGrantsUpdated","GoAway","ICERestart","PinsChanged","CallEnded","ParticipantUpdated","ParticipantMigrationComplete","ChangePublishOptions","SfuRequest","JoinRequest","HealthCheckRequest","LeaveCallRequest","Migration","ReconnectDetails","ConnectionQualityInfo","AudioLevel","AudioSender","VideoLayerSetting","VideoSender","VisibilityState","DebounceType","SignalServerClient","_transport","setPublisher","sendAnswer","iceTrickle","updateSubscriptions","updateMuteStates","iceRestart","sendStats","startNoiseCancellation","stopNoiseCancellation","withRequestLogger","logger","level","invocation","withRequestTracer","trace","exclusions","SendStats","sleep","Function","KnownCodes","retryInterval","numberOfFailures","hex","padStart","generateUUIDv4","getRandomValues","getRandomBytes","crypto","pow","addConnectionEventListeners","removeConnectionEventListeners","isReactNative","logLevels","freeze","debug","logToConsole","logLevel","logMethod","setLogLevel","getLogLevel","getLogger","withTags","loggerMethod","tags","retryable","rpc","attempt","shouldRetry","getGenericSdp","tempPc","isSvcCodec","codecOrMimeType","sfuEventKinds","subscriberOffer","publisherAnswer","connectionQualityChanged","audioLevelChanged","changePublishQuality","participantJoined","participantLeft","dominantSpeakerChanged","joinResponse","healthCheckResponse","trackPublished","trackUnpublished","callGrantsUpdated","goAway","pinsUpdated","callEnded","participantUpdated","participantMigrationComplete","changePublishOptions","isSfuEvent","Dispatcher","subscribers","dispatch","logTag","eventKind","eventPayload","listeners","IceTrickleBuffer","subscriberCandidates","publisherCandidates","iceCandidate","toIceCandidate","peerType","SUBSCRIBER","PUBLISHER_UNSPECIFIED","dispose","withoutConcurrency","createRunner","hasContinuation","wrapped","pendingPromises","onContinued","withCancellation","ac","settled","getCurrentValue","observable$","setCurrentValue","update","isFunctionPatch","updateValue","lastValue","rollback","createSubscription","createSafeAsyncSubscription","CallingState","StreamVideoWriteableStateStore","connectedUserSubject","callsSubject","setConnectedUser","user","setCalls","calls","registerCall","cid","unregisterCall","findCall","callingState","LEFT","leave","connectedUser","StreamVideoReadOnlyStateStore","store","connectedUser$","calls$","combineComparators","_len3","comparators","_key3","conditional","hasVideo","publishedTracks","VIDEO","hasAudio","AUDIO","hasScreenShare","SCREEN_SHARE","hasScreenShareAudio","SCREEN_SHARE_AUDIO","isPinned","pin","isLocalPin","pinnedAt","dominantSpeaker","isDominantSpeaker","speaking","isSpeaking","screenSharing","publishingVideo","publishingAudio","pinned","reactionType","reaction","hasAnyRole","roles","ifInvisibleBy","viewportVisibilityState","videoTrack","INVISIBLE","ifInvisibleOrUnknownBy","UNKNOWN","defaultSortPreset","speakerLayoutSortPreset","paginatedLayoutSortPreset","livestreamOrAudioRoomSortPreset","_len4","_key4","role","defaultEgress","broadcasting","hls","playlist_url","rtmps","CallState","backstageSubject","blockedUserIdsSubject","createdAtSubject","endedAtSubject","startsAtSubject","updatedAtSubject","createdBySubject","customSubject","egressSubject","ingressSubject","recordingSubject","sessionSubject","settingsSubject","transcribingSubject","captioningSubject","endedBySubject","thumbnailsSubject","membersSubject","ownCapabilitiesSubject","callingStateSubject","startedAtSubject","participantCountSubject","anonymousParticipantCountSubject","participantsSubject","callStatsReportSubject","closedCaptionsSubject","orphanedTracks","sortParticipantsBy","closedCaptionsTasks","ccKey","taskId","setSortParticipantsBy","ps","setParticipantCount","count","setStartedAt","setCaptioning","captioning","setAnonymousParticipantCount","setParticipants","participants","setCallingState","setCallStatsReport","setMembers","members","setOwnCapabilities","capabilities","setBackstage","backstage","setEndedAt","endedAt","findParticipantBySessionId","sessionId","getParticipantLookupBySessionId","lookupTable","participant","updateParticipant","patch","thePatch","updatedParticipant","updateOrAddParticipant","nextParticipants","updateParticipants","updateParticipantTracks","trackType","changes","acc","_ref3","change","dimension","updateFromEvent","eventHandlers","setServerSidePins","pins","pinsLookup","lookup","serverSidePinnedAt","registerOrphanedTrack","orphanedTrack","removeOrphanedTrack","takeOrphanedTracks","trackLookupPrefix","orphans","orphan","updateClosedCaptionSettings","closedCaptionsSettings","updateFromCallResponse","blocked_user_ids","created_at","updated_at","starts_at","ended_at","created_by","custom","egress","ingress","recording","session","updateParticipantCountFromSession","settings","transcribing","thumbnails","updateFromSfuCallState","callState","currentSessionId","reconnectDetails","participantCount","localPublishedTracks","announcedTracks","participantLookup","existingParticipant","isLocalParticipant","screenShareTrack","anonymous","updateFromMemberRemoved","user_id","updateFromMemberAdded","updateFromHLSBroadcastStopped","updateFromHLSBroadcastingFailed","JOINED","byRoleCount","participants_count_by_role","countByRole","anonymous_participant_count","updateFromSessionParticipantCountUpdate","updateFromSessionParticipantLeft","user_session_id","updateFromSessionParticipantJoined","shouldInsertParticipant","updatedParticipants","increment","updateMembers","member","memberUpdate","updateParticipantReaction","emoji_code","userId","unblockUser","current","blockUser","updateOwnCapabilities","localParticipant","own_capabilities","updateFromClosedCaptions","queue","closed_caption","keyOf","speaker_id","start_time","caption","nextQueue","visibilityDurationMs","maxVisibleCaptions","captions","task","participants$","localParticipant$","remoteParticipants$","pinnedParticipants$","dominantSpeaker$","hasOngoingScreenShare$","createdAt$","endedAt$","startsAt$","startedAt$","updatedAt$","callStatsReport$","members$","createdBy$","custom$","egress$","ingress$","session$","settings$","endedBy$","thumbnails$","closedCaptions$","isShallowEqual","duc","anonymousParticipantCount$","blockedUserIds$","backstage$","callingState$","ownCapabilities$","participantCount$","recording$","transcribing$","captioning$","call.closed_captions_failed","call.closed_captions_started","call.closed_captions_stopped","call.recording_started","call.recording_stopped","call.recording_failed","call.transcription_started","call.transcription_stopped","call.transcription_failed","anonymousParticipantCount","remoteParticipants","pinnedParticipants","hasOngoingScreenShare","callStatsReport","ownCapabilities","blockedUserIds","createdAt","startsAt","updatedAt","createdBy","endedBy","closedCaptions","flatten","dumpStream","enabled","muted","getSdkName","sdk","REACT","REACT_NATIVE","getSdkVersion","major","minor","isSafari","isChrome","transform","trackKind","publisher","rawStats","rtcStreamStats","codec","codecId","transportId","roundTripTime","dtlsState","candidatePair","selectedCandidatePairId","currentRoundTripTime","firefox","mediaSourceId","getTrackType","bytesSent","bytesReceived","mimeType","frameHeight","frameWidth","framesPerSecond","jitter","qualityLimitationReason","ssrc","getEmptyStats","rawReport","totalBytesSent","totalBytesReceived","averageJitterInMs","averageRoundTripTimeInMs","qualityLimitationReasons","highestFrameWidth","highestFrameHeight","highestFramesPerSecond","codecPerTrackType","aggregate","aggregatedStats","maxArea","Set","streamArea","area","osInfo","deviceInfo","webRtcInfo","sdkInfo","PLAIN_JAVASCRIPT","deviceState","setSdkInfo","getSdkInfo","getClientDetails","os","device","userAgentDataApi","userAgentData","getHighEntropyValues","UAParser","cpu","getResult","platformVersion","architecture","vendor","model","SfuStatsReporter","sfuClient","_ref5","clientDetails","microphone","camera","tracer","unifiedSessionId","inputDevices","observeDevice","browserPermissionState$","unsubscribeDevicePermissionsSubscription","_ref6","browserPermissionState","unsubscribeListDevicesSubscription","hasCapability","listDevices","selectedDevice$","_ref7","selected","currentDevice","availableDevices","isPermitted","sendConnectionTime","connectionTimeSeconds","sendTelemetryData","sendReconnectionTime","strategy","timeSeconds","reconnection","telemetryData","run","subscriberStats","publisherStats","delta","subscriberTrace","take","publisherTrace","sfuTrace","getTrace","traces","snapshot","sdkName","sdkVersion","webrtcVersion","webRTCVersion","subscriberRtcStats","publisherRtcStats","rtcStats","encodeStats","performanceStats","decodeStats","audioDevices","videoDevices","telemetry","reporting_interval_ms","intervalId","timeoutId","scheduleOne","webRTCInfo","traceRTCPeerConnection","iceGatheringState","_ref8","origClose","original","_len5","_key5","StatsTracer","trackIdToTrackType","_this2","previousStats","frameTimeHistory","fpsHistory","currentStats","toObject","withOverrides","getDecodeStats","getEncodeStats","deltaCompression","rtp","framesSent","totalEncodeTime","targetBitrate","prevRtp","deltaTotalEncodeTime","deltaFramesSent","framesEncodeTime","getCodecFromStats","avgFrameTimeMs","average","avgFps","videoDimension","rtpItem","framesDecoded","totalDecodeTime","deltaTotalDecodeTime","deltaFramesDecoded","framesDecodeTime","costOverrides","override","setCost","cost","oldStats","newStats","codecStats","clockRate","payloadType","fmtp","sdpFmtpLine","Tracer","setEnabled","BasePeerConnection","_ref9","connectionConfig","dispatcher","onUnrecoverableError","enableTracing","isIceRestarting","isDisposed","subscriptions","lock","lockKey","addTrickledIceCandidates","iceTrickleBuffer","unsubscribeIceTrickle","setSfuClient","onIceCandidate","asJSON","segments","ufragIndex","findIndex","onConnectionStateChange","onIceConnectionStateChange","OFFLINE","RECONNECTING","restartIce","onIceCandidateError","errorMessage","RTCPeerConnectionIceErrorEvent","errorCode","errorText","iceState","onIceGatherChange","onSignalingChange","edgeName","detachEventHandlers","TransceiverCache","_this3","layers","transceiverOrder","publishOption","findTransceiver","items","getLayers","setLayers","findLayer","ensureExhausted","trackTypeToParticipantStreamKey","UNSPECIFIED","isAudioTrackType","defaultBitratePerRid","q","toVideoLayers","layer","bitrate","maxBitrate","fps","quality","LOW_UNSPECIFIED","MID","HIGH","computeVideoLayers","optimalVideoLayers","maxSpatialLayers","maxTemporalLayers","useSingleLayer","getComputedMaxBitrate","downscaleFactor","bitrateFactor","svcCodec","scalabilityMode","spatialLayers","toScalabilityMode","withSimulcastConstraints","targetResolution","currentWidth","currentHeight","targetWidth","targetHeight","reductionFactor","ridMapping","extractMid","transceiverInitIndex","media","msid","Publisher","_ref10","_this4","publishOptions","baseOptions","transceiverCache","clonedTracks","publish","trackToPublish","cloneTrack","previousTrack","updateTransceiver","stopTrack","videoEncodings","withRid","toSvcEncodings","degradationPreference","negotiate","replaceTrack","syncPublishOptions","isPublishing","stopTracks","_len6","trackTypes","_key6","stopAllTracks","publishOptionId","videoSender","enabledLayers","transceiverId","codecInUse","usesSvcCodec","changed","shouldActivate","activeEncoders","offer","getAnnouncedTracks","answerSdp","getPublishedTracks","trackInfos","bundle","toTrackInfo","getAnnouncedTracksForReconnect","localDescription","isTrackLive","isAudioTrack","isStereo","channelCount","transceiverIndex","audioSettings","stereo","dtx","opus_dtx_enabled","red","redundant_coding_enabled","videoSenders","Subscriber","previousIsIceRestarting","handleOnTrack","primaryStream","rawTrackType","participantToUpdate","trackDebugInfo","toTrackType","streamKindProp","previousStream","answer","makeSafePromise","isPending","safePromise","unwrapPromise","fulfillment","checkPending","promiseWithResolvers","isResolved","isRejected","uninitialized","lazy","factory","timerWorker","src","TimerWorker","currentTimerId","fallback","setup","useTimerWorker","blob","script","createObjectURL","worker","Worker","destroy","terminate","ready","setTimer","clearTimer","getTimerId","sendMessage","timerWorkerEnabled","getTimers","StreamSfuClient","_ref11","_this5","joinResponseTimeout","onSignalClose","streamClient","isLeaving","isClosing","pingIntervalInMs","unhealthyTimeoutInMs","joinResponseTask","abortController","createWebSocket","eventsToTrace","signalWs","endpoint","onMessage","ws","WebSocket","binaryType","createWebSocketSignalChannel","ws_endpoint","lastMessageTimestamp","scheduleConnectionCheck","signalReady","race","onOpen","handleWebSocketClose","cleanUpWebSocket","keepAliveInterval","connectionCheckTimeout","NORMAL_CLOSURE","OPEN","unsubscribeNetworkChanged","migrateAwayTimeout","migrationTask","leaveAndClose","joinTask","notifyLeave","muteStates","enterMigration","keepAlive","joinRequest","requestPayload","ping","healthCheckRequest","leaveCallRequest","msgJson","timers","ERROR_CONNECTION_UNHEALTHY","edge_name","createSignalClient","Authorization","online","networkAvailableTask","isHealthy","DISPOSE_OLD_SOCKET","watchCallAccepted","currentUserId","RINGING","watchCallRejected","eventCall","callSession","rejectedBy","rejected_by","isCreatedByMe","every","watchCallEnded","IDLE","watchSfuCallEnded","LIVE_ENDED","hasPermission","permissionsContext","watchCallGrantsUpdated","currentGrants","canPublishAudio","canPublishVideo","canScreenshare","nextCapabilities","capability","_ref12","watchConnectionQualityChanged","connectionQualityUpdates","patches","connectionQuality","watchParticipantCountChanged","watchLiveEnded","watchSfuErrorReports","reconnectStrategy","watchPinsUpdated","handleRemoteSoftMute","MODERATION","disable","screenShare","pushToIfMissing","_len7","_key7","watchParticipantJoined","reconcileOrphanedTracks","watchParticipantLeft","watchParticipantUpdated","watchTrackPublished","watchTrackUnpublished","orphanTracks","reconciledTracks","watchDominantSpeakerChanged","watchAudioLevelChanged","audioLevels","audioLevel","registerRingingCallEventHandlers","coordinatorRingEvents","ViewportTracker","elementHandlerMap","observer","queueSet","setViewport","viewportElement","IntersectionObserver","root","_ref13","queueElement","queueHandler","contains","observe","cleanup","disconnect","element","queueItem","unobserve","DEFAULT_VIEWPORT_VISIBILITY_STATE","globalOverrideKey","DynascaleManager","speaker","_this6","viewportTracker","pendingSubscriptionsUpdate","videoTrackSubscriptionOverridesSubject","videoTrackSubscriptionOverrides$","incomingVideoSettings$","overrides","globalSettings","preferredResolution","fromEntries","_ref14","participantOverride","isParticipantVideoEnabled","setVideoTrackSubscriptionOverrides","sessionIds","applyTrackSubscriptions","debounceType","SLOW","trackSubscriptions","trackElementVisibility","previousVisibilityState","isVisible","isIntersecting","fullscreenElement","VISIBLE","bindVideoElement","videoElement","boundParticipant","requestTrackWithDimensions","participant$","viewportVisibilityStateSubscription","nextViewportVisibilityState","MEDIUM","clientWidth","clientHeight","lastDimensions","resizeObserver","ResizeObserver","currentDimensions","IMMEDIATE","publishedTracksSubscription","FAST","autoplay","playsInline","streamSubscription","videoStream","screenShareStream","srcObject","play","bindAudioElement","audioElement","updateMediaStreamSubscription","screenShareAudioStream","audioStream","selectedDevice","setSinkId","sinkIdSubscription","volumeSubscription","volume$","_ref15","volume","audioVolume","videoTrackSubscriptionOverrides","screenShareDimension","PermissionsContext","_this7","permissions","setPermissions","setCallSettings","permission","canPublish","canRequest","screensharing","access_request_enabled","CallType","CallTypes","callTypes","register","callType","unregister","BrowserPermission","disposeController","wasPrompted","assumeGranted","setState","query","queryName","getState","prompt","forcePrompt","throwOnNotAllowed","isGranted","disposeOfMediaStream","listen","getStateObservable","asStateObservable","getIsPromptingObservable","unlisten","getDevices","audioDeviceConstraints","autoGainControl","noiseSuppression","echoCancellation","videoDeviceConstraints","getAudioBrowserPermission","getVideoBrowserPermission","getDeviceChangeObserver","dueTime","activeTask","lastTime","emit","emitWhenIdle","targetTime","getAudioDevices","getVideoDevices","getAudioOutputDevices","getUserMediaExecId","getStream","isNotFoundOrOverconstrainedError","startsWith","getAudioStream","trackConstraints","relaxedConstraints","getVideoStream","getDisplayMediaExecId","deviceIds$","release","isMobile","InputMediaDeviceManager","stopOnLeave","isTrackStoppedDueToTrackEnd","filters","statusChangeConcurrencyTag","filterRegistrationConcurrencyTag","handleDisconnectedOrReplacedDevices","enable","prevStatus","optimisticStatus","setPendingStatus","unmuteStream","setStatus","forceStop","disableMode","muteStream","statusChangeSettled","resume","toggle","registerFilter","registered","applySettingsToStream","setDefaultConstraints","select","prevDeviceId","setDevice","publishStream","stopPublishStream","stopPublish","mediaStream","muteLocalStream","setMediaStream","disableTracks","enableTracks","rootStream","defaultConstraints","chainWith","parentStream","filterStream","parent","originalStop","parentTrack","handleParentTrackEnded","inputStream","handleTrackEnded","createTrackMuteHandler","notifyTrackMuteState","muteHandler","unmuteHandler","mediaDeviceKind","hasPrev","prevDevices","currentDevices","_ref16","isDeviceDisconnected","isDeviceReplaced","findDevice","prevDevice","groupId","InputMediaDeviceManagerState","statusSubject","optimisticStatusSubject","mediaStreamSubject","selectedDeviceSubject","defaultConstraintsSubject","mediaStream$","status$","optimisticStatus$","defaultConstraints$","hasBrowserPermission$","of","isPromptingPermission$","pendingStatus","getDeviceIdFromStream","CameraManagerState","directionSubject","direction$","CameraManager","isDirectionSupportedByDevice","selectDirection","flip","newDirection","selectTargetResolution","resolution","hasPublishedVideo","target_resolution","camera_facing","camera_default_on","MicrophoneManagerState","speakingWhileMutedSubject","speakingWhileMuted$","speakingWhileMuted","setSpeakingWhileMuted","DETECTION_FREQUENCY_IN_MS","AUDIO_LEVEL_THRESHOLD","FFT_SIZE","RNSpeechDetector","pc1","pc2","onSoundDetectedStateChanged","cleanupAudioStream","_setVolume","unsub","onSpeakingDetectedStateChange","speechTimer","silenceTimer","baselineNoiseLevel","speechDetected","audioLevelHistory","audioMediaSourceStats","avgAudioLevel","isSoundDetected","MicrophoneManager","speakingWhileMutedNotificationEnabled","soundDetectorConcurrencyTag","_ref17","stopSpeakingWhileMutedDetection","startSpeakingWhileMutedDetection","noiseCancellationRegistration","noiseCancellation","noise_cancellation","mode","canAutoEnable","notifyNoiseCancellationStopped","enableNoiseCancellation","noiseCancellationSettings","noiseCancellationChangeUnsubscribe","notifyNoiseCancellationStarting","registrationResult","toFilter","unregisterNoiseCancellation","disableNoiseCancellation","enableSpeakingWhileMutedNotification","disableSpeakingWhileMutedNotification","hasPublishedAudio","mic_default_on","rnSpeechDetector","soundDetectorCleanup","detectionFrequencyInMs","audioLevelThreshold","fftSize","destroyStreamOnStop","audioContext","analyser","createAnalyser","createMediaStreamSource","connect","frequencyBinCount","getByteFrequencyData","averagedDataValue","pv","cv","percentage","createSoundDetector","ScreenShareState","audioEnabledSubject","audioEnabled$","audioEnabled","setAudioEnabled","isEnabled","setSettings","ScreenShareManager","maybeTargetResolution","enableScreenShareAudio","disableScreenShareAudio","systemAudio","getScreenShareStream","SpeakerState","volumeSubject","isDeviceSelectionSupported","createElement","setVolume","SpeakerManager","_ref18","setParticipantVolume","Call","_ref19","_this8","clientStore","ringing","watching","sfuClientTag","reconnectConcurrencyTag","reconnectAttempts","reconnectReason","fastReconnectDeadlineSeconds","disconnectionTimeoutSeconds","lastOfflineTimestamp","trackPublishOrder","hasJoinedOnce","deviceSettingsAppliedOnce","initialized","joinLeaveConcurrencyTag","leaveCallHooks","streamClientEventHandlers","currentPublishOptions","registerEventHandlers","registerEffects","registerReconnectHandlers","handleOwnCapabilitiesUpdated","receiverId","isAcceptedByMe","accepted_by","isRejectedByMe","cancelAutoDrop","ringingSubject","isRinging","receiver_id","created_by_id","leaveCallIdle","scheduleAutoDrop","permissionToTrackType","offHandler","call_cid","registeredOffHandler","JOINING","waitUntilCallJoined","hasOtherParticipants","statsReporter","sfuStatsReporter","dynascaleManager","hook","stopOnLeavePromises","updateFromRingingEvent","creator","applyDeviceConfig","streamClientBasePath","ring","_hasConnectionID","getOrCreate","post","notify","accept","maxJoinRetries","doJoin","connectStartTime","joinCallData","performingMigration","MIGRATE","performingRejoin","REJOIN","performingFastReconnect","statsOptions","doJoinRequest","stats_options","previousSfuClient","previousSessionId","isWsHealthy","enable_rtc_stats","handleSfuSignalClose","subscriberSdp","publisherSdp","isReconnecting","getReconnectDetails","migrating_from","preferredPublishOptions","getPreferredPublishOptions","preferredSubscribeOptions","getPreferredSubscribeOptions","fastReconnect","restoreICE","includeSubscriber","bundlePolicy","ice_servers","ice","credential","initPublisherAndSubscriber","closePreviousInstances","migratingFromSfuId","reconnectAttempt","fromSfuId","preferredCodec","fmtpLine","preferredBitrate","maxSimulcastLayers","clientPublishOptions","screenShareSettings","subscriberCodec","subscriberFmtpLine","codecs","nextSfuClient","includePublisher","reconnect","_ref4","datacenter","pollingIntervalInMs","getRawStatsForTrack","getStatsForStream","statsForStream","sessionIdsToTrack","participantStats","subscriberRawStats","publisherRawStats","loop","startReportingStatsFor","stopReportingStatsFor","createStatsReporter","getLocationHint","MIGRATING","RECONNECTING_FAILED","reconnectStartTime","DISCONNECT","reconnectFast","reconnectRejoin","reconnectMigrate","restorePublishedTracks","restoreSubscribedTracks","currentSfuClient","currentSubscriber","currentPublisher","currentSfu","unregisterGoAway","unregisterOnError","unregisterNetworkChanged","publishVideoStream","publishAudioStream","publishScreenShareStream","audioTrack","updateLocalStreamState","_len8","_key8","_len9","_key9","streamStateProp","updatePublishOptions","_len10","_key10","resetReaction","criteria","sendReaction","muteSelf","myUserId","muteUser","muteOthers","muteType","muteTypeToTrackType","userIdsToMute","user_ids","muteAllUsers","mute_all_users","startRecording","stopRecording","startTranscription","stopTranscription","startClosedCaptions","trx","stopClosedCaptions","requestPermissions","grantPermissions","updateUserPermissions","grant_permissions","revokePermissions","revoke_permissions","goLive","stopLive","startHLS","stopHLS","startRTMPBroadcasts","stopAllRTMPBroadcasts","stopRTMPBroadcast","startFrameRecording","stopFrameRecording","updates","endCall","unpin","pinForEveryone","unpinForEveryone","queryMembers","updateCallMembers","timeoutInMs","auto_cancel_timeout_ms","incoming_call_timeout_ms","dropTimeout","queryRecordings","callSessionId","queryTranscriptions","getCallStats","callSessionID","getCallReport","session_id","submitFeedback","rating","getSdkSignature","sdk_version","sendCustomEvent","unbind","bindCallThumbnailElement","imageElement","handleError","fallbackImageSource","thumbnailUrl","image_url","searchParams","setPreferredIncomingVideoResolution","setIncomingVideoEnabled","setDisconnectionTimeout","timeoutSeconds","callTypeConfig","participantSorter","StableWSConnection","client","_this9","_log","setClient","_buildUrl","getAuthType","getUserAgent","wsBaseURL","onlineStatusChanged","_setHealth","_reconnect","interval","onopen","wsID","_getToken","authMessage","user_details","image","onmessage","isConnectionOpenResolved","rejectConnectionOpen","_errorFromWSEvent","lastEvent","scheduleNextPing","resolveConnectionOpen","isConnecting","consecutiveFailures","tokenManager","isStatic","connectionCheckTimeoutRef","refreshToken","received_at","onclose","wasClean","totalFailures","healthy","dispatchImmediately","statusCode","isWSFailure","isCloseEvent","StatusCode","_setupConnectionPromise","connectionOpenSafe","healthCheckTimeoutRef","client_id","clientID","pingInterval","isDisconnected","healthCheck","_connect","_waitForHealthy","connectionOpen","isClosedPromise","isTokenReady","tokenReady","loadToken","isConnectionIsPromisePending","_setupConnectionIdPromise","wsURL","WS","WebSocketImpl","connectionID","connection_id","resolveConnectionId","rejectConnectionId","_destroyCurrentWSConnection","decodeBase64","fromCharCode","TokenManager","secret","loadTokenPromise","setTokenOrProvider","tokenOrProvider","isAnonymous","validateToken","tokenProvider","tokenUserId","fragments","b64Payload","getUserFromToken","getToken","hintUrl","maxAttempts","locationHint","awsPop","StreamClient","_this10","setBaseURL","hint","locationHintUrl","locationHintTimeout","_getConnectionID","wsConnection","connectUser","userID","connectUserTask","node","allowServerSideConnect","_setUser","openConnection","updateNetworkConnectionStatus","persistUserOnConnectionFailure","closeConnection","disconnectUser","_user","wsPromise","wsPromiseSafe","newWsPromise","connectionIdPromiseSafe","connectGuestUser","guestUserCreatePromise","doAxiosRequest","publicEndpoint","access_token","connectAnonymousUser","_logApiRequest","_logApiResponse","_logApiError","connectionIdPromise","requestConfig","_enrichAxiosOptions","axiosInstance","put","handleResponse","client_request_id","errorFromResponse","isErrorResponse","defaultWSTimeout","cachedUserAgent","clientAppIdentifier","extras","_ref20","authorization","api_key","axiosRequestConfig","inputOptions","locationHintMaxAttempts","Agent","keepAliveMsecs","defaultWsTimeout","getInstanceKey","apiKey","createCoordinatorClient","appId","getClientAppIdentifier","coordinatorLogger","StreamVideoClient","apiKeyOrArgs","_this11","effectsRegistered","eventHandlersToUnregister","connectionConcurrencyTag","registerClientInstance","instanceKey","_instances","callsToReWatch","writeableStateStore","queryCalls","watch","filter_conditions","$in","newCall","theCall","newCallInstance","connectUserResponse","onConnectUserError","maxConnectUserRetries","errorQueue","me","createGuestUser","queryCallStats","queryAggregateCallStats","edges","addDevice","push_provider","push_provider_name","voip_token","addVoipDevice","removeDevice","onRingingCall","callId","clientOptions","enableTimerWorker","setLogger","lvl","readOnlyStateStore","initialTokenUsed","createTokenOrProvider","getOrCreateInstance","isPromise","parentSubscription","scheduleSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","isInteropObservable","obs","Symbol_observable","array","reportUnhandledError","isAsyncIterable","fromAsyncIterable","iterable_1","iterable_1_1","isReadableStreamLike","readableStream","readableStreamLikeToAsyncGenerator","asyncIterable","asyncIterable_1","__asyncValues","asyncIterable_1_1","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","SUFFIX_BROWSER","enumerize","enums","str1","str2","lowerize","rgxMapper","ua","arrays","j","regex","strMapper","windowsVersionMap","regexes","engine","EDGE","extensions","_ua","_uach","_rgxmap","mergedRegexes","_isSelfNav","getBrowser","_browser","brave","isBrave","getCPU","_cpu","getDevice","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","getOS","_os","getUA","setUA","CPU","DEVICE","ENGINE","exports","module","$","jQuery","Zepto","COMPLETE_NOTIFICATION","createNotification","isSubscription","EMPTY_OBSERVER","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","captureError","notification","timeoutProvider","init","hasLift","liftedSource","candidateSelectors","candidateSelector","NoElement","Element","msMatchesSelector","webkitMatchesSelector","getRootNode","_element$getRootNode","ownerDocument","isInert","lookUp","_node$getAttribute","inertAtt","getAttribute","parentNode","getCandidates","includeContainer","candidates","querySelectorAll","getCandidatesIteratively","elements","elementsToCheck","tagName","assigned","assignedElements","nestedCandidates","children","scopeParent","shadowRoot","getShadowRoot","validShadowRoot","shadowRootFilter","_nestedCandidates","hasTabIndex","getTabIndex","tabIndex","_node$getAttribute2","attValue","isContentEditable","sortOrderedTabbables","documentOrder","isInput","isNonTabbableRadio","isRadio","radioSet","radioScope","form","queryRadios","CSS","escape","checked","nodes","getCheckedRadio","isTabbableRadio","isZeroArea","_node$getBoundingClie","getBoundingClientRect","isHidden","displayCheck","getComputedStyle","visibility","nodeUnderDetails","parentElement","originalNode","rootNode","assignedSlot","_nodeRoot","_nodeRootHost","_nodeRootHost$ownerDo","_node$ownerDocument","nodeRoot","nodeRootHost","attached","_nodeRoot2","_nodeRootHost2","_nodeRootHost2$ownerD","isNodeAttached","getClientRects","isNodeMatchingSelectorFocusable","disabled","isHiddenInput","child","isDetailsWithSummary","isDisabledFromFieldset","isNodeMatchingSelectorTabbable","isValidShadowRootTabbable","shadowHostNode","sortByOrder","regularTabbables","orderedTabbables","isScope","candidateTabindex","getSortOrderTabIndex","sortable","tabbable","container","isTabbable","getPlatform","uaData","brands","brand","isAndroid","re","isJSDOM","FOCUSABLE_ATTRIBUTE","ARROW_LEFT","ARROW_RIGHT","activeElement","doc","_activeElement","isShadowRoot","getTarget","composedPath","isEventTargetWithin","getDocument","isTypeableElement","isHTMLElement","isTypeableCombobox","getFloatingFocusElement","floatingElement","hasAttribute","querySelector","getNodeChildren","onlyOpenChildren","allChildren","_node$context","parentId","currentChildren","_currentChildren","_node$context2","getNodeAncestors","_nodes$find","allAncestors","currentParentId","currentNode","stopEvent","preventDefault","stopPropagation","isVirtualClick","mozInputSource","isTrusted","pointerType","buttons","isVirtualPointerEvent","pressure","isMouseLikePointerType","strict","useLayoutEffect","useEffect","useLatestRef","ref","React","useSafeInsertionEffect","useInsertionEffect","useEffectEvent","isDifferentGridRow","cols","prevRow","isIndexOutOfListBounds","listRef","getMinListIndex","disabledIndices","findNonDisabledListIndex","getMaxListIndex","decrement","startingIndex","_temp","amount","isListIndexDisabled","getGridCellIndexOfCorner","sizes","cellMap","corner","firstCellIndex","sizeItem","lastIndexOf","getGridCellIndices","indices","flatMap","cellIndex","getTabbableOptions","getTabbableIn","dir","getNextTabbable","referenceElement","getPreviousTabbable","isOutsideEvent","containerElement","currentTarget","relatedTarget","disableFocusInside","dataset","tabindex","setAttribute","enableFocusInside","removeAttribute","sortByDocumentPosition","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","FloatingListContext","elementsRef","FloatingList","labelsRef","setNodes","prevSet","newMap","jsx","Provider","useListItem","setIndex","componentRef","_node$textContent","isLabelDefined","textContent","useModernLayoutEffect","ACTIVE_KEY","SELECTED_KEY","ARROW_UP","ARROW_DOWN","horizontalKeys","verticalKeys","SafeReact","serverHandoffComplete","genId","useId","setId","FloatingArrow","placement","floating","middlewareData","arrow","tipRadius","strokeWidth","staticOffset","stroke","style","restStyle","rest","clipPathId","isRTL","setIsRTL","side","alignment","isVerticalSide","computedStaticOffset","computedStrokeWidth","halfStrokeWidth","svgX","svgY","isCustomShape","yOffsetProp","xOffsetProp","arrowX","arrowY","dValue","rotation","top","left","bottom","right","jsxs","viewBox","pointerEvents","clipPath","fill","createEventEmitter","_map$get","_map$get2","FloatingNodeContext","FloatingTreeContext","useFloatingParentNodeId","_React$useContext","useFloatingTree","createAttribute","clearTimeoutIfSet","timeoutRef","rafId","enqueueFocus","preventScroll","cancelPrevious","sync","cancelAnimationFrame","focus","requestAnimationFrame","counterMap","WeakMap","uncontrolledElementsSet","WeakSet","markerMap","lockCount$1","unwrapHost","applyAttributeToOthers","uncorrectedAvoidElements","ariaHidden","inert","markerName","controlAttribute","avoidElements","correctedTarget","correctElements","elementsToKeep","elementsToStop","hiddenElements","markerCounter","keep","deep","getNodeName","attr","alreadyHidden","currentCounterValue","counterValue","markerValue","markOthers","HIDDEN_STYLES","border","clip","margin","overflow","padding","whiteSpace","FocusGuard","setRole","restProps","PortalContext","FloatingPortal","preserveTabOrder","portalNode","uniqueId","portalContext","usePortalContext","setPortalNode","portalNodeRef","existingIdRoot","getElementById","subRoot","appendChild","isElement","idWrapper","useFloatingPortalNode","focusManagerState","setFocusManagerState","beforeOutsideRef","afterOutsideRef","beforeInsideRef","afterInsideRef","modal","shouldRenderGuards","onFocus","_beforeInsideRef$curr","prevTabbable","domReference","ReactDOM","_afterInsideRef$curre","nextTabbable","closeOnFocusOut","onOpenChange","nativeEvent","useLiteMergeRefs","refs","previouslyFocusedElements","getPreviouslyFocusedElement","isConnected","handleTabIndex","floatingFocusElement","orderRef","_floatingFocusElement","focusableElements","focusable","tabbableContent","dataTabIndex","VisuallyHiddenDismiss","FloatingFocusManager","order","guards","_guards","initialFocus","returnFocus","restoreFocus","visuallyHiddenDismiss","outsideElementsInert","getInsideElements","_getInsideElements","events","dataRef","getNodeId","_dataRef$current$floa","floatingContext","nodeId","ignoreInitialFocus","isUntrappedTypeableCombobox","inertSupported","HTMLElement","useInert","initialFocusRef","returnFocusRef","tree","startDismissButtonRef","endDismissButtonRef","preventReturnFocusRef","isPointerDownRef","tabbableIndexRef","isInsidePortal","getTabbableContent","getTabbableElements","flat","onKeyDown","contains$1","getDocument$1","els","getTarget$1","shiftKey","handleFocusIn","tabbableIndex","handleFocusOutside","handlePointerDown","movedToUnrelatedNode","getNodeChildren$1","nodesRef","_node$context3","_node$context4","_node$context5","prevTabbableIndex","nodeToFocus","beforeGuardRef","afterGuardRef","mergedBeforeGuardRef","mergedAfterGuardRef","renderDismissButton","onClick","_portalContext$portal","_ancestors$find","portalNodes","ancestors","ancestorFloatingNodes","_node$context6","rootAncestorComboboxDomReference","_node$context7","insideElements","previouslyFocusedElement","initialFocusValue","elToFocus","focusAlreadyInsideFloatingEl","preventReturnFocusScroll","nested","isPreventScrollSupported","fallbackEl","insertAdjacentElement","activeEl","isFocusInsideFloatingTree","_node$context8","returnElement","getReturnElement","tabbableReturnElement","tabbableOptions","getFirstTabbableElement","Fragment","_portalContext$before","_portalContext$afterO","lockCount","FloatingOverlay","lockScroll","isIOS","bodyStyle","paddingProp","documentElement","scrollLeft","scrollbarWidth","innerWidth","scrollX","scrollY","_window$visualViewpor","_window$visualViewpor2","offsetLeft","visualViewport","offsetTop","scrollTo","enableScrollLock","isButtonTarget","isSpaceIgnored","useClick","eventOption","ignoreMouse","keyboardHandlers","stickIfOpen","pointerTypeRef","didKeyDownRef","reference","onPointerDown","onMouseDown","button","openEvent","defaultPrevented","isAnchorTarget","onKeyUp","bubbleHandlerKeys","pointerdown","mousedown","click","captureHandlerKeys","normalizeProp","normalizable","_normalizable$escapeK","_normalizable$outside","escapeKey","outsidePress","useFloating","internalRootContext","onOpenChangeProp","elementsProp","floatingId","positionReference","setPositionReference","useFloatingRootContext","rootContext","computedElements","_domReference","setDomReference","_setPositionReference","domReferenceRef","useFloating$1","computedPositionReference","contextElement","setReference","mergeProps","userProps","propsList","elementKey","isItem","domUserProps","__","validProps","propsOrGetProps","doSwitch","orientation","vertical","horizontal","isMainOrientationKey","isMainOrientationToEndKey","rtl","isCrossOrientationOpenKey","isCrossOrientationCloseKey","useListNavigation","activeIndex","onNavigate","unstable_onNavigate","selectedIndex","allowEscape","virtual","focusItemOnOpen","focusItemOnHover","openOnArrowKeyDown","parentOrientation","scrollItemIntoView","virtualItemRef","itemSizes","dense","floatingFocusElementRef","indexRef","typeableComboboxReference","focusItemOnOpenRef","keyRef","isPointerModalityRef","previousOnNavigateRef","previousMountedRef","previousOpenRef","forceSyncFocusRef","forceScrollIntoViewRef","disabledIndicesRef","latestOpenRef","scrollItemIntoViewRef","selectedIndexRef","activeId","setActiveId","virtualId","setVirtualId","focusItem","runFocus","_item$id","initialItem","forceScrollIntoView","waitedItem","scrollIntoViewOptions","scrollIntoView","block","inline","runs","waitForListPopulated","treeContainsActiveEl","handleVirtualFocus","hasActiveIndex","syncCurrentTarget","onMouseMove","onPointerLeave","getParentOrientation","_tree$nodesRef$curren","commonOnKeyDown","which","currentIndex","minIndex","maxIndex","startIndex","itemPlaced","targetCells","cell","createGridCellMap","minGridIndex","maxGridIndex","foundIndex","prevIndex","nextIndex","col","maxCol","lastRow","getGridNavigatedIndex","itemIndex","ariaActiveDescendantProp","onPointerMove","checkVirtualMouse","checkVirtualPointer","isArrowKey","isHomeOrEndKey","isMoveKey","isCrossOpenKey","isCrossCloseKey","isParentCrossOpenKey","isMainKey","isNavigationKey","deepestNode","deepestNodeId","maxDepth","findDeepest","getDeepestNode","eventObject","KeyboardEvent","bubbles","_deepestNode$context","_deepestNode$context2","isCurrentTarget","dispatchItem","_deepestNode$context$","isParentMainKey","onPointerEnter","componentRoleToAriaRoleMap","Audio","useCall","setAudioElement","useState","autoPlay","displayName","ParticipantsAudio","audioProps","audioTrackElement","screenShareAudioTrackElement","Fragment$1","ParticipantViewContext","createContext","useParticipantViewContext","useContext","useFloatingUIPreset","middleware","offsetInPx","availableHeight","autoUpdate","useDeviceList","selectedDeviceId","useI18n","useMemo","selectedDeviceInfo","deviceList","isSelected","defaultDevice","MenuVisualType","MenuContext","useMenuContext","MenuPortal","portalId","className","setFloating","MenuToggle","ToggleButton","visualType","MENU","onToggle","menuShown","setMenuShown","toggleHandler","useRef","parentDocument","handleClick","handleKeyDown","altKey","ctrlKey","capture","PORTAL","overflowY","GenericMenu","onItemClick","GenericMenuButtonItem","Icon","icon","clsx","usePictureInPictureState","isPiP","setIsPiP","pictureInPictureElement","handlePiP","ParticipantActionsContextMenu","participantViewElement","fullscreenModeOn","setFullscreenModeOn","hasAudioTrack","hasVideoTrack","hasScreenShareTrack","hasScreenShareAudioTrack","grantPermission","revokePermission","handleFullscreenChange","toggleParticipantPin","Restricted","requiredGrants","muteVideo","muteScreenShare","muteAudio","muteScreenShareAudio","requestFullscreen","toggleFullscreenMode","exitFullscreen","pictureInPictureEnabled","togglePictureInPicture","requestPictureInPicture","exitPictureInPicture","isComponentType","elementOrComponent","isValidElement","applyElementToRef","BaseVideoPlaceholder","forwardRef","setVideoElement","Browsers","pause","setError","InitialsFallback","alt","initials","DefaultVideoPlaceholder","DefaultPictureInPicturePlaceholder","Video$1","mirror","VideoPlaceholder","PictureInPicturePlaceholder","isVideoPaused","setIsVideoPaused","isWideMode","setIsWideMode","handlePlayPause","paused","isPublishingTrack","isInvisible","hasNoVideoOrInvisible","mirrorVideo","isScreenShareTrack","setVideoPlaceholderElement","IconButton","variant","CompositeButton","Menu","menuPlacement","menuOffset","title","ToggleMenuButton","DefaultToggleMenuButton","onMenuToggle","restButtonProps","Notification","visibilityTimeout","resetIsVisible","iconClassName","LoadingIndicator","_ref21","text","tooltip","Tooltip","_ref22","tooltipClassName","tooltipPlacement","visible","arrowRef","WithTooltip","_ref23","tooltipDisabled","handleMouseEnter","handleMouseLeave","tooltipVisible","onMouseEnter","onMouseLeave","setTooltipVisible","useCallback","useEnterLeaveHandlers","tooltipAnchor","setTooltipAnchor","tooltipActuallyVisible","RecordCallButton","_ref25","toggleCallRecording","isAwaitingResponse","isCallRecordingInProgress","useToggleCallRecording","defaultEmojiReactionMap","Reaction","_ref26","hideAfterTimeoutInMs","emojiReactionMap","emojiCode","createCallControlHandler","_ref28","isNotAllowedError","SelectContext","Select","defaultSelectedLabel","defaultSelectedIndex","handleSelect","handleSelectProp","isOpen","setIsOpen","setActiveIndex","setSelectedIndex","selectedLabel","setSelectedLabel","whileElementsMounted","listNav","typeahead","onMatch","unstable_onMatch","onTypingChange","unstable_onTypingChange","findMatch","resetMs","ignoreKeys","timeoutIdRef","stringRef","prevIndexRef","matchIndexRef","findMatchRef","ignoreKeysRef","setTypingChange","typing","getMatchingIndex","orderedList","toLocaleLowerCase","listContent","metaKey","_text$","_text$2","useTypeahead","dismiss","unstable_outsidePress","outsidePressEvent","referencePress","referencePressEvent","ancestorScroll","outsidePressFn","insideReactTreeRef","endedOrStartedInsideRef","escapeKeyBubbles","outsidePressBubbles","escapeKeyCapture","outsidePressCapture","isComposingRef","closeOnEscapeKeyDown","shouldDismiss","_child$context","__escapeKeyBubbles","isReactEvent","closeOnEscapeKeyDownCapture","_getTarget2","_getTarget","closeOnPressOutside","_dataRef$current$floa2","insideReactTree","endedOrStartedInside","inertSelector","markers","targetRootAncestor","isLastTraversableNode","nextParent","getParentNode","marker","lastTraversableNode","scrollRe","isScrollableX","overflowX","isScrollableY","canScrollX","scrollWidth","canScrollY","scrollHeight","pressedVerticalScrollbar","offsetX","offsetWidth","pressedHorizontalScrollbar","offsetY","targetIsInsideChildren","_child$context2","__outsidePressBubbles","closeOnPressOutsideCapture","_getTarget4","_getTarget3","compositionTimeout","onScroll","handleCompositionStart","handleCompositionEnd","isWebKit","getOverflowAncestors","ancestor","_doc$defaultView","defaultView","passive","onMouseUp","useDismiss","_elements$domReferenc","_componentRoleToAriaR","defaultFloatingId","defaultReferenceId","referenceId","_getFloatingFocusElem","ariaRole","isNested","floatingProps","commonProps","useRole","getReferenceProps","getFloatingProps","getItemProps","referenceDeps","floatingDeps","itemDeps","useInteractions","selectContext","DropDownSelectOption","DropDownSelect","DeviceSelectorOption","_ref30","onChange","defaultChecked","htmlFor","DeviceSelectorList","DeviceSelectorDropdown","DeviceSelector","DeviceSelectorVideo","_ref33","useCameraState","useCallStateHooks","ToggleAudioPreviewButton","_ref35","restCompositeButtonProps","useMicrophoneState","optimisticIsMute","hasBrowserPermission","isPromptingPermission","setTooltipDisabled","shown","ToggleVideoPreviewButton","CancelCallButton","_ref36","_ref38","onLeave","Status","permissionRequests","handleUpdatePermission","reqIndex","messageForPermission","Button","userName","StreamTheme","_ref60","as","Component","DefaultScreenShareOverlay","stopScreenShare","DefaultParticipantViewUI","_ref62","indicatorsVisible","showMenuButton","ParticipantActionsContextMenu$1","isScreenSharing","ParticipantDetails","_ref63","connectionQualityAsString","SfuModels","canUnpin","SpeechIndicator","POOR","ParticipantView","_ref64","ParticipantViewUI","trackedElement","setTrackedElement","contextVideoElement","setContextVideoElement","contextVideoPlaceholderElement","setContextVideoPlaceholderElement","propsDynascaleManager","manager","useTrackElementVisibility","useIncomingVideoSettings","participantViewContextValue","videoPlaceholderElement","videoRefs","StreamCall","StreamCallProvider","translations","en","StreamVideo","StreamVideoProvider","translationsOverrides","applyFilter","$and","$or","$not","conditions","maybeOperator","$eq","$neq","containsOperator","$contains","checkConditions","useFilteredParticipants","_ref65","excludeLocalParticipant","filterParticipants","useParticipants","useRemoteParticipants","allParticipants","unfilteredParticipants","applyParticipantsFilter","filterCallback","usePaginatedLayoutSortPreset","resetSortPreset","callConfig","loggedIn","LivestreamLayout","useHasOngoingScreenShare","currentSpeaker","presenter","Overlay","ParticipantOverlay","showParticipantCount","showDuration","showLiveBadge","showSpeakerName","floatingParticipantProps","FloatingParticipantOverlay","mirrorLocalParticipantVideo","enableFullScreen","useParticipantCount","duration","useUpdateCallDuration","toggleFullScreen","useToggleFullScreen","formatDuration","useIsCallLive","useCallSession","isCallLive","setDuration","live_started_at","liveStartTime","isFullscreen","setIsFullscreen","durationInMs","days","hours","minutes","GROUP_SIZE","PaginatedGridLayoutGroup","_ref66","groupSize","pageArrowsVisible","page","setPage","paginatedGridLayoutWrapperElement","setPaginatedGridLayoutWrapperElement","participantGroups","chunkCount","pageCount","selectedGroup","currentPage","DefaultParticipantViewUIBar","SpeakerLayout","_ref67","ParticipantViewUIBar","ParticipantViewUISpotlight","participantsBarPosition","participantsBarLimit","participantInSpotlight","otherParticipants","participantsBarWrapperElement","setParticipantsBarWrapperElement","participantsBarElement","setParticipantsBarElement","buttonsWrapperElement","setButtonsWrapperElement","isSpeakerScreenSharing","hardLimit","useCalculateHardLimit","wrapperElement","hostElement","limit","calculatedLimit","setCalculatedLimit","childWidth","childHeight","firstChild","isVertical","isHorizontal","isOneOnOneCall","useSpeakerLayoutSortPreset","participantsWithAppliedLimit","hardLimitToApply","renderParticipantsBar","VerticalScrollButtons","scrollWrapper","HorizontalScrollButtons","_ref68","scrollPosition","scrollElement","setScrollPosition","scrollHandler","abs","useHorizontalScrollPosition","scrollStartClickHandler","scrollBy","behavior","scrollEndClickHandler","_ref69","scrollTop","useVerticalScrollPosition","scrollTopClickHandler","scrollBottomClickHandler","Pip","layoutWrapperElement","setLayoutWrapperElement","screenSharingParticipant","Host","extendStatics","__proto__","__assign","adopt","__generator","g","sent","trys","ops","verb","op","to","pack","ar","Bounds","fromClientRect","clientRect","windowBounds","fromDOMRectList","domRectList","domRect","rect","parseBounds","parseDocumentSize","offsetHeight","toCodePoints$1","codePoints","fromCodePoint$1","fromCodePoint","codeUnits","codePoint","chars$2","lookup$2","i$2","chars$1$1","lookup$1$1","i$1$1","decode$1","encoded1","encoded2","encoded3","encoded4","bufferLength","polyUint16Array$1","polyUint32Array$1","UTRIE2_SHIFT_2$1","UTRIE2_SHIFT_1$1","UTRIE2_INDEX_SHIFT$1","UTRIE2_LSCP_INDEX_2_OFFSET$1","UTRIE2_DATA_MASK$1","UTRIE2_INDEX_1_OFFSET$1","UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1","UTRIE2_INDEX_2_MASK$1","slice16$1","Uint16Array","slice32$1","Uint32Array","createTrieFromBase64$1","_byteLength","view32","view16","headerLength","Trie$1","Trie","initialValue","highStart","highValueIndex","ix","chars$3","lookup$3","i$3","LETTER_NUMBER_MODIFIER","BK","CR$1","LF$1","CM","NL","WJ","ZW","GL","SP","ZWJ$1","B2","BA","BB","HY","CB","CL","CP","EX","IN","NS","OP","QU","IS","NU","PO","PR","SY","AI","AL","CJ","EB","EM","H2","H3","HL","ID","JL","JV","JT","RI$1","SA","XX","ea_OP","BREAK_MANDATORY","BREAK_NOT_ALLOWED$1","BREAK_ALLOWED$1","UnicodeTrie$1","ALPHABETICS","HARD_LINE_BREAKS","SPACE$1","PREFIX_POSTFIX","LINE_BREAKS","KOREAN_SYLLABLE_BLOCK","HYPHEN","codePointsToCharacterClasses","lineBreak","types","categories","classType","isAdjacentWithSpaceIgnored","classTypes","previousNonSpaceClassType","_lineBreakAtIndex","indicies","forbiddenBreaks","beforeIndex","afterIndex","before","cssFormattedClasses","wordBreak","isLetterNumber","forbiddenBreakpoints","letterNumber","Break","required","LineBreaker","lastEnd","FLAG_UNRESTRICTED","FLAG_ID","FLAG_INTEGER","FLAG_NUMBER","LINE_FEED","SOLIDUS","REVERSE_SOLIDUS","CHARACTER_TABULATION","SPACE","QUOTATION_MARK","EQUALS_SIGN","NUMBER_SIGN","DOLLAR_SIGN","PERCENTAGE_SIGN","APOSTROPHE","LEFT_PARENTHESIS","RIGHT_PARENTHESIS","LOW_LINE","HYPHEN_MINUS","EXCLAMATION_MARK","LESS_THAN_SIGN","GREATER_THAN_SIGN","COMMERCIAL_AT","LEFT_SQUARE_BRACKET","RIGHT_SQUARE_BRACKET","CIRCUMFLEX_ACCENT","LEFT_CURLY_BRACKET","QUESTION_MARK","RIGHT_CURLY_BRACKET","VERTICAL_LINE","TILDE","CONTROL","REPLACEMENT_CHARACTER","ASTERISK","PLUS_SIGN","COMMA","COLON","SEMICOLON","FULL_STOP","NULL","BACKSPACE","LINE_TABULATION","SHIFT_OUT","INFORMATION_SEPARATOR_ONE","DELETE","EOF","A","E","F","U","Z","isDigit","isSurrogateCodePoint","isHex","isLowerCaseLetter","isUpperCaseLetter","isLetter","isNonASCIICodePoint","isWhiteSpace","isNameStartCodePoint","isNameCodePoint","isNonPrintableCodePoint","isValidEscape","c1","c2","isIdentifierStart","c3","isNumberStart","stringToNumber","integers","int","fraction","fracd","frac","expsign","exponent","exp","LEFT_PARENTHESIS_TOKEN","RIGHT_PARENTHESIS_TOKEN","COMMA_TOKEN","SUFFIX_MATCH_TOKEN","PREFIX_MATCH_TOKEN","COLUMN_TOKEN","DASH_MATCH_TOKEN","INCLUDE_MATCH_TOKEN","LEFT_CURLY_BRACKET_TOKEN","RIGHT_CURLY_BRACKET_TOKEN","SUBSTRING_MATCH_TOKEN","BAD_URL_TOKEN","BAD_STRING_TOKEN","CDO_TOKEN","CDC_TOKEN","COLON_TOKEN","SEMICOLON_TOKEN","LEFT_SQUARE_BRACKET_TOKEN","RIGHT_SQUARE_BRACKET_TOKEN","WHITESPACE_TOKEN","EOF_TOKEN","Tokenizer","consumeToken","consumeCodePoint","consumeStringToken","peekCodePoint","flags","consumeName","reconsumeCodePoint","consumeNumericToken","e1","e2","e3","consumeIdentLikeToken","a1","a2","a3","u1","u2","consumeUnicodeRangeToken","consumeWhiteSpace","digits","questionMarks","digit","endDigits","consumeUrlToken","stringToken","consumeBadUrlRemnants","consumeEscapedCodePoint","consumeStringSlice","SLICE_STACK_SIZE","endingCodePoint","consumeNumber","repr","unit","hexCodePoint","Parser","_tokens","tokenizer","parseValue","parseComponentValue","parseValues","parseComponentValues","SyntaxError","reconsumeToken","consumeComponentValue","consumeSimpleBlock","consumeFunction","isEndingTokenFor","functionToken","cssFunction","isDimensionToken","isNumberToken","isIdentToken","isStringToken","isIdentWithValue","nonWhiteSpace","nonFunctionArgSeparator","parseFunctionArgs","isLength","isLengthPercentage","parseLengthPercentageTuple","ZERO_LENGTH","FIFTY_PERCENT","HUNDRED_PERCENT","getAbsoluteValueForTuple","tuple","getAbsoluteValue","DEG","GRAD","RAD","TURN","angle","_context","PI","isAngle","parseNamedSide","ident","deg","color$1","colorFunction","SUPPORTED_COLOR_FUNCTIONS","namedColor","COLORS","TRANSPARENT","isTransparent","color","asString","alpha","blue","green","getTokenColorValue","rgb","hue2rgb","t1","t2","hue","hsl","saturation","lightness","hsla","rgba","parseColor","ALICEBLUE","ANTIQUEWHITE","AQUA","AQUAMARINE","AZURE","BEIGE","BISQUE","BLACK","BLANCHEDALMOND","BLUE","BLUEVIOLET","BROWN","BURLYWOOD","CADETBLUE","CHARTREUSE","CHOCOLATE","CORAL","CORNFLOWERBLUE","CORNSILK","CRIMSON","CYAN","DARKBLUE","DARKCYAN","DARKGOLDENROD","DARKGRAY","DARKGREEN","DARKGREY","DARKKHAKI","DARKMAGENTA","DARKOLIVEGREEN","DARKORANGE","DARKORCHID","DARKRED","DARKSALMON","DARKSEAGREEN","DARKSLATEBLUE","DARKSLATEGRAY","DARKSLATEGREY","DARKTURQUOISE","DARKVIOLET","DEEPPINK","DEEPSKYBLUE","DIMGRAY","DIMGREY","DODGERBLUE","FIREBRICK","FLORALWHITE","FORESTGREEN","FUCHSIA","GAINSBORO","GHOSTWHITE","GOLD","GOLDENROD","GRAY","GREEN","GREENYELLOW","GREY","HONEYDEW","HOTPINK","INDIANRED","INDIGO","IVORY","KHAKI","LAVENDER","LAVENDERBLUSH","LAWNGREEN","LEMONCHIFFON","LIGHTBLUE","LIGHTCORAL","LIGHTCYAN","LIGHTGOLDENRODYELLOW","LIGHTGRAY","LIGHTGREEN","LIGHTGREY","LIGHTPINK","LIGHTSALMON","LIGHTSEAGREEN","LIGHTSKYBLUE","LIGHTSLATEGRAY","LIGHTSLATEGREY","LIGHTSTEELBLUE","LIGHTYELLOW","LIME","LIMEGREEN","LINEN","MAGENTA","MAROON","MEDIUMAQUAMARINE","MEDIUMBLUE","MEDIUMORCHID","MEDIUMPURPLE","MEDIUMSEAGREEN","MEDIUMSLATEBLUE","MEDIUMSPRINGGREEN","MEDIUMTURQUOISE","MEDIUMVIOLETRED","MIDNIGHTBLUE","MINTCREAM","MISTYROSE","MOCCASIN","NAVAJOWHITE","NAVY","OLDLACE","OLIVE","OLIVEDRAB","ORANGE","ORANGERED","ORCHID","PALEGOLDENROD","PALEGREEN","PALETURQUOISE","PALEVIOLETRED","PAPAYAWHIP","PEACHPUFF","PERU","PINK","PLUM","POWDERBLUE","PURPLE","REBECCAPURPLE","RED","ROSYBROWN","ROYALBLUE","SADDLEBROWN","SALMON","SANDYBROWN","SEAGREEN","SEASHELL","SIENNA","SILVER","SKYBLUE","SLATEBLUE","SLATEGRAY","SLATEGREY","SNOW","SPRINGGREEN","STEELBLUE","TAN","TEAL","THISTLE","TOMATO","TURQUOISE","VIOLET","WHEAT","WHITE","WHITESMOKE","YELLOW","YELLOWGREEN","backgroundClip","backgroundColor","parseColorStop","processColorStops","stops","lineLength","processStops","previous","stop_1","absoluteValue","gapBegin","stop_2","gapLength","gapValue","getAngleFromCorner","centerX","centerY","atan2","calculateGradientDirection","radian","sin","cos","halfWidth","halfHeight","halfLineLength","yDiff","xDiff","distance","sqrt","findCorner","closest","cx","cy","optimumDistance","optimumCorner","calculateRadius","gradient","rx","ry","shape","prefixLinearGradient","angle$1","firstToken","colorStop","CLOSEST_SIDE","FARTHEST_SIDE","CLOSEST_CORNER","FARTHEST_CORNER","CIRCLE","ELLIPSE","COVER","CONTAIN","prefixRadialGradient","isColorStop","isLinearGradient","background","isRadialGradient","image_1","addImage","imageFunction","SUPPORTED_IMAGE_FUNCTIONS","isSupportedImage","BACKGROUND_SIZE","isAtPosition_1","backgroundImage","backgroundOrigin","backgroundPosition","backgroundRepeat","parseBackgroundRepeat","LINE_BREAK","backgroundSize","isBackgroundSizeInfoToken","borderColorForSide","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderRadiusForSide","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderStyleForSide","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderWidthForSide","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","display","bit","parseDisplayValue","letterSpacing","WORD_BREAK","STRICT","NORMAL","lineHeight","computeLineHeight","fontSize","listStyleImage","listStylePosition","listStyleType","marginForSide","marginTop","marginRight","marginBottom","marginLeft","overflowWrap","paddingForSide","paddingTop","paddingRight","paddingBottom","paddingLeft","textAlign","textShadow","shadow","blur","textTransform","transform$1","transformFunction","SUPPORTED_TRANSFORM_FUNCTIONS","matrix","matrix3d","b1","b2","a4","b4","DEFAULT_VALUE","DEFAULT","transformOrigin","origins","BREAK_ALL","KEEP_ALL","zIndex","auto","time","opacity","textDecorationColor","textDecorationLine","fontFamily","results","fontWeight","fontVariant","fontStyle","counterIncrement","increments","filtered","counter","counterReset","resets","quotes","open_1","close_1","getQuote","quote","boxShadow","inset","paintOrder","webkitTextStrokeColor","webkitTextStrokeWidth","CSSParsedDeclaration","declaration","animationDuration","cssFloat","overflowTuple","textDecoration","isTransformed","isPositioned","isPositionedWithZIndex","isFloating","isInlineLevel","CSSParsedPseudoDeclaration","CSSParsedCounterDeclaration","length_1","value_1","elementDebuggerAttribute","getElementDebugType","isDebugging","elementType","ElementContainer","textNodes","styles","isHTMLElementNode","bounds","chars$1","lookup$1","i$1","polyUint16Array","polyUint32Array","UTRIE2_SHIFT_2","UTRIE2_SHIFT_1","UTRIE2_INDEX_SHIFT","UTRIE2_LSCP_INDEX_2_OFFSET","UTRIE2_DATA_MASK","UTRIE2_INDEX_1_OFFSET","UTRIE2_OMITTED_BMP_INDEX_1_LENGTH","UTRIE2_INDEX_2_MASK","slice16","slice32","createTrieFromBase64","chars","PseudoElementType","Prepend","CR","LF","Control","Extend","SpacingMark","LV","LVT","ZWJ","Extended_Pictographic","RI","toCodePoints","UnicodeTrie","BREAK_NOT_ALLOWED","BREAK_ALLOWED","codePointToClass","_graphemeBreakAtIndex","_codePoints","countRI","GraphemeBreaker","graphemeBreak","splitGraphemes","bk","breaker","graphemes","testRangeBounds","TEST_HEIGHT","createRange","range","testElement","selectNode","rangeBounds","rangeHeight","removeChild","testIOSLineBreak","wordSpacing","innerHTML","textList","supports","setStart","setEnd","boundAhead","testCORS","Image","crossOrigin","testResponseType","testSVG","img","canvas","ctx","getContext","drawImage","toDataURL","isGreenPixel","testForeignObject","fillStyle","fillRect","greenImageSrc","svg","createForeignObjectSVG","loadSerializedSVG$1","getImageData","xmlns","createElementNS","foreignObject","setAttributeNS","onload","XMLSerializer","serializeToString","FEATURES","SUPPORT_RANGE_BOUNDS","SUPPORT_WORD_BREAKING","SUPPORT_SVG_DRAWING","SUPPORT_FOREIGNOBJECT_DRAWING","SUPPORT_CORS_IMAGES","SUPPORT_RESPONSE_TYPE","SUPPORT_CORS_XHR","SUPPORT_NATIVE_TEXT_SEGMENTATION","Intl","Segmenter","TextBounds","parseTextBounds","breakText","textBounds","clientRects","subSegments","segmentGraphemes","subOffset_1","subSegment","replacementNode","splitText","getWrapperBounds","cloneNode","replaceChild","segmenter","granularity","segment","segmentWords","breakWords","wordSeparators","words","word_1","TextContainer","CAPITALIZE","capitalize","ImageElementContainer","currentSrc","intrinsicWidth","naturalWidth","intrinsicHeight","naturalHeight","CanvasElementContainer","SVGElementContainer","baseVal","LIElementContainer","OLElementContainer","reversed","CHECKBOX_BORDER_RADIUS","RADIO_BORDER_RADIUS","reformatInputBounds","getInputValue","PASSWORD","placeholder","CHECKBOX","RADIO","INPUT_COLOR","InputElementContainer","SelectElementContainer","TextareaElementContainer","IFrameElementContainer","iframe","contentWindow","parseTree","documentBackgroundColor","bodyBackgroundColor","LIST_OWNERS","parseNodeTree","childNode","nextNode","nextSibling","isTextNode","isElementNode","isSlotElement","assignedNodes","createContainer","createsRealStackingContext","createsStackingContext","slot","isTextareaElement","isSVGElement","isSelectElement","isImageElement","isCanvasElement","isLIElement","isOLElement","isInputElement","isIFrameElement","isBodyElement","nodeType","TEXT_NODE","ELEMENT_NODE","isSVGElementNode","isVideoElement","isStyleElement","isScriptElement","isCustomElement","CounterState","counters","getCounterValue","getCounterValues","canReset","counterNames","ROMAN_UPPER","ARMENIAN","HEBREW","GEORGIAN","createAdditiveCounter","symbols","suffix","createCounterText","integer","createCounterStyleWithSymbolResolver","codePointRangeLength","isNumeric","resolver","createCounterStyleFromRange","codePointRangeStart","codePointRangeEnd","createCounterStyleFromSymbols","CJK_ZEROS","CJK_TEN_COEFFICIENTS","CJK_TEN_HIGH_COEFFICIENTS","CJK_HUNDRED_COEFFICIENTS","createCJKCounter","numbers","multipliers","negativeSign","tmp","coefficient","CHINESE_INFORMAL_MULTIPLIERS","CHINESE_FORMAL_MULTIPLIERS","JAPANESE_NEGATIVE","KOREAN_NEGATIVE","appendSuffix","defaultSuffix","cjkSuffix","koreanSuffix","spaceSuffix","IGNORE_ATTRIBUTE","DocumentCloner","scrolledElements","quoteDepth","toIFrame","windowSize","createIFrameContainer","pageXOffset","pageYOffset","cloneWindow","documentClone","iframeLoad","iframeLoader","restoreNodeScroll","onclone","clonedReferenceElement","nodeName","fonts","imagesReady","serializeDoctype","doctype","restoreOwnerScroll","adoptNode","createElementClone","createCanvasClone","createVideoClone","createStyleClone","srcset","loading","createCustomElementClone","copyCSSStyles","sheet","cssRules","css","rule","cssText","inlineImages","clonedCanvas","clonedCtx","allowTaint","putImageData","gl","attribs","getContextAttributes","preserveDrawingBuffer","blankCanvas","appendChildNode","copyStyles","ignoreElements","cloneChildNodes","assignedNode","createTextNode","transitionProperty","styleBefore","styleAfter","createPseudoHideStyles","resolvePseudoContent","BEFORE","insertBefore","after","AFTER","pseudoElt","anonymousReplacedElement","counterStyle","counterState","counterType","delim","counterStates","counterType_1","separator","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","newClassName","baseValue","CORNER","cloneIframeContainer","scrolling","imageReady","images","childNodes","ignoredStyleProperties","property","setProperty","getPropertyValue","internalSubset","publicId","systemId","PSEUDO_BEFORE","PSEUDO_AFTER","PSEUDO_HIDE_ELEMENT_STYLE","createStyles","CacheStorage","getOrigin","link","_link","hostname","isSameOrigin","_origin","setContext","Cache","_options","_cache","isBlobImage","isRenderable","loadImage","useCORS","isInlineImage","useProxy","proxy","isInlineBase64Image","imageTimeout","reader_1","FileReader","readAsDataURL","queryString","timeout_1","INLINE_SVG","INLINE_BASE64","INLINE_IMG","isSVG","substr","Vector","deltaX","deltaY","lerp","BezierCurve","startControl","endControl","subdivide","firstHalf","ab","bc","cd","abbc","bccd","isBezierCurve","BoundCurves","tlh","tlv","trh","trv","brh","brv","blh","blv","factors","maxFactor","topWidth","rightHeight","bottomWidth","leftHeight","topLeftBorderDoubleOuterBox","getCurvePoints","TOP_LEFT","topRightBorderDoubleOuterBox","TOP_RIGHT","bottomRightBorderDoubleOuterBox","BOTTOM_RIGHT","bottomLeftBorderDoubleOuterBox","BOTTOM_LEFT","topLeftBorderDoubleInnerBox","topRightBorderDoubleInnerBox","bottomRightBorderDoubleInnerBox","bottomLeftBorderDoubleInnerBox","topLeftBorderStroke","topRightBorderStroke","bottomRightBorderStroke","bottomLeftBorderStroke","topLeftBorderBox","topRightBorderBox","bottomRightBorderBox","bottomLeftBorderBox","topLeftPaddingBox","topRightPaddingBox","bottomRightPaddingBox","bottomLeftPaddingBox","topLeftContentBox","topRightContentBox","bottomRightContentBox","bottomLeftContentBox","r1","r2","kappa","ox","oy","xm","ym","calculateBorderBoxPath","curves","calculateContentBoxPath","calculatePaddingBoxPath","TransformEffect","ClipEffect","OpacityEffect","isTransformEffect","effect","isClipEffect","isOpacityEffect","equalPath","transformPath","deltaW","deltaH","point","StackingContext","inlineLevel","nonInlineLevel","negativeZIndex","zeroOrAutoZIndexOrTransformedOrOpacity","positiveZIndex","nonPositionedFloats","nonPositionedInlineLevel","ElementPaint","effects","borderBox","paddingBox","getEffects","inFlow","croplessEffects","parseStackTree","stackingContext","realStackingContext","listItems","treatAsRealStackingContext","paintContainer","listOwnerItems","parentStack","order_1","index_1","index_2","processListItems","owner","numbering","parseStackingContexts","parsePathForBorder","borderSide","createPathFromCurves","parsePathForBorderDoubleOuter","parsePathForBorderDoubleInner","parsePathForBorderStroke","createStrokePathFromCurves","outer1","outer2","inner1","inner2","contentBox","calculateBackgroundPositioningArea","calculateBackgroundPaintingArea","calculateBackgroundRendering","intrinsicSize","backgroundPositioningArea","getBackgroundValueForIndex","backgroundPaintingArea","backgroundImageSize","calculateBackgroundSize","sizeWidth","sizeHeight","calculateBackgroundRepeatPath","isAuto","AUTO","hasIntrinsicValue","intrinsicProportion","second","hasIntrinsicProportion","hasIntrinsicWidth","hasIntrinsicHeight","hasIntrinsicDimensions","width_3","height_3","SMALL_IMAGE","SAMPLE_TEXT","FontMetrics","_data","_document","parseMetrics","span","verticalAlign","baseline","middle","getMetrics","Renderer","MASK_OFFSET","CanvasRenderer","_activeEffects","scale","fontMetrics","translate","textBaseline","applyEffects","popEffect","applyEffect","save","globalAlpha","restore","renderStack","renderStackContent","renderNode","paint","renderNodeBackgroundAndBorders","renderNodeContent","renderTextWithLetterSpacing","fillText","letter","measureText","createFontStyle","fixIOSSystemFonts","renderTextNode","font","paintOrderLayer","textShadows","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","strokeStyle","lineWidth","lineJoin","chrome","strokeText","renderReplacedElement","box","render","beginPath","arc","isTextInputElement","canvasTextAlign","_p","_e","_g","_f","_j","_h","_l","_k","_o","_m","mask","paths","moveTo","lineTo","formatPath","closePath","bezierCurveTo","renderRepeat","pattern","resizeImage","renderBackgroundImage","this_1","createPattern","x0","x1","y0","y1","gradient_1","createLinearGradient","addColorStop","top_1","radialGradient_1","createRadialGradient","midX","midY","invF","renderSolidBorder","curvePoints","renderDoubleBorder","outerPaths","innerPaths","hasBackground","borders","calculateBackgroundCurvedPaintingArea","borderBoxArea","maskOffset","shadowPaintingArea","borders_1","renderDashedDottedBorder","strokePaths","boxPaths","startX","startY","endX","endY","dashLength","spaceLength","useLineDash","multiplier","numberOfDashes","minSpace","maxSpace","setLineDash","lineCap","path1","path2","iOSBrokenFonts","fontFamilies","ForeignObjectRenderer","loadSerializedSVG","Logger","instances","Context","instanceName","instanceCount","html2canvas","renderElement","resourceOptions","contextOptions","windowOptions","windowWidth","windowHeight","innerHeight","foreignObjectRendering","cloneOptions","documentCloner","clonedElement","_u","parseBackgroundColor","renderOptions","devicePixelRatio","_q","_r","_s","_t","removeContainer","backgroundColorOverride","defaultBackgroundColor","grammar","reg","encoding","address","subtype","sessionConfig","raddr","tcptype","generation","attribute","dir2","clksrcExt","mediaClockValue","rateNumerator","rateDenominator","require","formatRegExp","formatStr","makeLine","defaultOuterOrder","defaultInnerOrder","payloads","outerOrder","innerOrder","UnsubscriptionError","errors","initialTeardown","_parentage","_finalizers","_parentage_1","_parentage_1_1","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","teardown","_hasParent","_addParent","_removeParent","empty","__await","releaseLock","defer","rej","makeString","object","lastOfPathSeparatorRegExp","cleanKey","canNotTraverseDeeper","getLastOfPath","Empty","stackIndex","setPath","newValue","getPath","deepExtend","overwrite","regexEscape","_entityMap","looksLikeObjectPathRegExpCache","capacity","regExpMap","regExpQueue","getRegExp","regExpFromCache","regExpNew","deepFind","keySeparator","nextPath","getCleanedCode","consoleLogger","concreteLogger","forward","deprecate","debugOnly","moduleName","baseLogger","EventEmitter","numListeners","numTimesAdded","ResourceStore","ns","defaultNS","ignoreJSONStructure","addNamespaces","removeNamespaces","getResource","lng","addResource","silent","addResources","resources","addResourceBundle","skipCopy","removeResourceBundle","hasResourceBundle","getResourceBundle","compatibilityAPI","getDataByLanguage","hasLanguageSomeTranslations","postProcessor","processors","addPostProcessor","translator","processor","checkedLoadedFor","Translator","services","changeLanguage","language","exists","interpolation","resolved","extractFromKey","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","looksLikeObjectPath","possibleChars","matched","ki","interpolator","nestingRegexp","parts","lastKey","overloadTranslationOptionHandler","returnDetails","namespace","appendNamespaceToCIMode","usedKey","exactUsedKey","usedLng","usedNS","usedParams","getUsedParamsDetails","resUsedKey","resExactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","extendTranslation","usedDefault","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValueSuffixOrdinalFallback","ordinal","needsZeroSuffixLookup","shouldUseIntlApi","pluralSeparator","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","suffixes","getSuffixes","appendNamespaceToMissingKey","parseMissingKeyHandler","returnObjects","returnedObjectHandler","resTypeIsArray","newKeyToUse","deepKey","defaultVariables","skipInterpolation","skipOnVariables","nestBef","nb","interpolate","na","nest","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","extracted","fallbackNS","needsContextHandling","codes","hasLoadedNamespace","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","ordinalPrefix","contextKey","contextSeparator","possibleKey","returnNull","returnEmptyString","resourceStore","optionsKeys","useOptionsReplaceForData","LanguageUtil","supportedLngs","getScriptPartFromCode","formatLanguageCode","getLanguagePartFromCode","getCanonicalLocales","formattedCode","lowerCaseLng","specialCases","part","cleanCode","isSupportedCode","load","nonExplicitSupportedLngs","getBestMatchFromCodes","cleanedLng","lngOnly","supportedLng","fallbacks","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","nonIntlVersions","intlVersions","suffixesOrder","zero","one","two","few","many","other","PluralResolver","compatibilityJSON","PluralRules","rules","createRules","plurals","pluralRulesCache","addRule","clearCache","getRule","cleanedCode","cacheKey","lngPart","needsPlural","resolvedOptions","pluralCategories","getPluralFormsOfKey","pluralCategory1","pluralCategory2","pluralCategory","prepend","getSuffixRetroCompatible","noAbs","simplifyPluralSuffix","returnSuffix","deepFindWithDefaults","defaultData","getPathWithDefaults","regexSafe","Interpolator","escapeValue","escape$1","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapeSuffix","unescapePrefix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","getOrResetRegExp","existingRegExp","regexp","regexpUnescape","replaces","handleFormat","interpolationkey","missingInterpolationHandler","safeValue","todo","matchedVar","temp","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","doReduce","elem","createCachedFormatter","optForCache","formatParams","formatter","Formatter","formats","NumberFormat","currency","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","ListFormat","addCached","mem","formatName","formatOptions","optStr","trimmedKey","parseFormatStr","formatted","valOptions","locale","Connector","backend","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","queueLoad","languages","toLoad","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","pushPath","removePending","loadedKeys","fcName","tried","wait","prepareLoading","loadOne","fallbackValue","isUpdate","clb","initImmediate","preload","partialBundledLanguages","tDescription","transformOptions","I18n","inst","modules","external","isInitialized","isClone","isInitializing","defOpts","createClassOnDemand","ClassOrObject","lu","languageDetector","detection","deferred","initializedStoreOnce","loadResources","usedCallback","resolvedLanguage","setResolvedLanguage","reloadResources","li","lngInLngs","isLanguageChangingTo","setLngProps","setLng","cacheUserLanguage","detect","getFixedT","keyPrefix","fixedT","resultKey","setDefaultNamespace","lastLng","loadNotPending","loadState","precheck","preResult","loadNamespaces","loadLanguages","preloaded","newLngs","cloneInstance","forkResourceStore","mergedOptions","StreamCallContext","DEFAULT_NAMESPACE","DEFAULT_CONFIG","currentLanguage","fallbackLanguage","DEFAULT_TRANSLATIONS_REGISTRY","translationsMap","mapToRegistry","defaultTranslationFunction","StreamI18n","i18nInstance","_checkIsInitialized","browserLanguage","registerTranslationsForLanguage","i18next","StreamI18nContext","StreamI18nProvider","createI18nParams","i18n","useCreateI18n","setTranslationFn","_i18n","StreamVideoContext","useObservableValue","setValue","RxUtils","EMPTY_DEVICES_ARRAY","useCallState","useIsCallRecordingInProgress","useOwnCapabilities","getComputedStatus","isMute","isTogglePending","useLazyDeviceList","placeholderDevices$","devices$","setDevices$","useAnonymousParticipantCount","useCallBlockedUserIds","useCallCallingState","useCallClosedCaptions","useCallCreatedAt","useCallCreatedBy","useCallCustomData","useCallEgress","useCallEndedAt","useCallEndedBy","useCallIngress","useCallMembers","useCallSettings","useCallStartedAt","useCallStartsAt","useCallStatsReport","useCallThumbnail","useCallUpdatedAt","useDominantSpeaker","useIsCallCaptioningInProgress","useIsCallHLSBroadcastingInProgress","useIsCallTranscribingInProgress","useLocalParticipant","isSpeakingWhileMuted","sortBy","useScreenShareState","useSpeakerState","setIsAwaitingResponse","isAwaiting","CallStateHooks","canRequestOnly","hasPermissionsOnly","requireAll","hasPermissions","createImpl","ctorFunc","Symbol_iterator","localCName","generateIdentifier","splitLines","splitSections","getDescription","getMediaSections","matchPrefix","parseCandidate","foundation","component","ip","relatedAddress","relatedPort","tcpType","ufrag","writeCandidate","parseIceOptions","parseRtpMap","channels","numChannels","writeRtpMap","pt","preferredPayloadType","parseExtmap","uri","attributes","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","colon","parseSsrcGroup","semantics","ssrcs","getMid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","writeIceParameters","iceLite","parseRtpParameters","headerExtensions","fecMechanisms","rtcp","mline","profile","rtpmapline","fmtps","wildcardRtcpFb","existingFeedback","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","sctpPort","fmt","sctpMapLines","writeSctpDescription","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","getDirection","getKind","parseOLine","sessionVersion","netType","addressType","isValidSDP","onNext","onComplete","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","observeOn","subscribeOn","scheduleAsyncIterable","scheduled","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","toIntIfInt","parseReg","needsBlank","keyLocation","rawName","attachProperties","validLine","paramReducer","parseParams","parseFmtpConfig","parsePayloads","parseRemoteCandidates","parseImageAttributes","parseSimulcastStreamList","scid","isRoot","errorThrown","pipeFromArray","isObserver","sink","promiseCtor","getPromiseCtor","operations","toPromise"],"sourceRoot":""}